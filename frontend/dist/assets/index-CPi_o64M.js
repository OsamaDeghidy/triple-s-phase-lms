var Kk=Object.defineProperty,Zk=Object.defineProperties;var Jk=Object.getOwnPropertyDescriptors;var Cu=Object.getOwnPropertySymbols;var T1=Object.prototype.hasOwnProperty,M1=Object.prototype.propertyIsEnumerable;var Yp=Math.pow,qp=(t,n,a)=>n in t?Kk(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,X=(t,n)=>{for(var a in n||(n={}))T1.call(n,a)&&qp(t,a,n[a]);if(Cu)for(var a of Cu(n))M1.call(n,a)&&qp(t,a,n[a]);return t},oe=(t,n)=>Zk(t,Jk(n));var Cn=(t,n)=>{var a={};for(var l in t)T1.call(t,l)&&n.indexOf(l)<0&&(a[l]=t[l]);if(t!=null&&Cu)for(var l of Cu(t))n.indexOf(l)<0&&M1.call(t,l)&&(a[l]=t[l]);return a};var e6=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var yi=(t,n,a)=>qp(t,typeof n!="symbol"?n+"":n,a);var $=(t,n,a)=>new Promise((l,d)=>{var p=m=>{try{x(a.next(m))}catch(y){d(y)}},h=m=>{try{x(a.throw(m))}catch(y){d(y)}},x=m=>m.done?l(m.value):Promise.resolve(m.value).then(p,h);x((a=a.apply(t,n)).next())});import{h as P5,j as $n,E as j5,d as N5,e as V0,B as c,A as Tt,T as f,D as Vt,L as dc,f as fr,g as Ut,i as es,k as Rr,l as t6,m as Zc,n as Jc,P as De,I as H5,o as xe,N as I1,S as ed,H as kh,p as nh,C as U5,q as Jr,V as cn,r as zt,Q as ar,s as jr,t as en,u as yt,v as te,w as re,M as Fc,x as We,y as jt,z as Fn,F as ts,G as Xe,J as qo,K as r6,O as ku,R as D1,U as xr,W as V5,X as Qe,Y as q5,Z as va,$ as qt,a0 as le,a1 as n6,a2 as _h,a3 as i6,a4 as Li,a5 as nt,a6 as q0,a7 as pt,a8 as Pc,a9 as ba,aa as Y5,ab as Yo,ac as a6,ad as Ah,ae as Y0,af as Q0,ag as o6,ah as s6,ai as l6,aj as ki,ak as yr,al as td,am as r0,an as c6,ao as Ac,ap as Be,aq as ze,ar as Vr,as as Q5,at as ih,au as Lr,av as G5,aw as G0,ax as W1,ay as $1,az as Wt,aA as wt,aB as Fi,aC as L1,aD as no,aE as Ot,aF as Bt,aG as X5,aH as _e,aI as pe,aJ as gt,aK as d6,aL as lo,aM as O1,aN as B1,aO as zn,aP as mt,aQ as co,aR as u6,aS as h6,aT as Pi,aU as dn,aV as Ca,aW as un,aX as ir,aY as K5,aZ as zh,a_ as jc,a$ as rd,b0 as f6,b1 as p6,b2 as rs,b3 as F1,b4 as g6,b5 as uc,b6 as Sr,b7 as ah,b8 as vr,b9 as wr,ba as Ln,bb as ji,bc as m6,bd as oh,be as x6,bf as X0,bg as sh,bh as ya,bi as lh,bj as Z5,bk as J5,bl as Eh,bm as ew,bn as P1,bo as b6,bp as ch,bq as Kn,br as n0,bs as eo,bt as os,bu as Nr,bv as ka,bw as io,bx as Je,by as Tr,bz as Zs,bA as tw,bB as Gu,bC as ei,bD as ti,bE as or,bF as be,bG as ri,bH as K0,bI as ni,bJ as Ea,bK as tn,bL as Wr,bM as $r,bN as pn,bO as rw,bP as i0,bQ as a0,bR as Z0,bS as j1,bT as nw,bU as y6,bV as v6,bW as iw,bX as J0,bY as aw,bZ as ow,b_ as w6,b$ as Oi,c0 as o0,c1 as kn,c2 as wa,c3 as Pn,c4 as S6,c5 as Nc,c6 as to,c7 as sw,c8 as Qo,c9 as N1,ca as Cc,cb as _u,cc as Au,cd as Xu,ce as C6,cf as H1,cg as U1,ch as V1,ci as ns,cj as dh,ck as lw,cl as k6,cm as Ni,cn as q1,co as _i,cp as nd,cq as cw,cr as em,cs as zc,ct as Ec,cu as Rc,cv as Y1,cw as Rh,cx as dw,cy as s0,cz as l0,cA as uh,cB as tm,cC as Th,cD as uw,cE as _6,cF as A6,cG as Q1,cH as hh,cI as hw,cJ as fw,cK as Tc,cL as pw,cM as gw,cN as mw,cO as xw,cP as z6,cQ as E6,cR as bw,cS as yw,cT as R6,cU as T6,cV as Ks,cW as rm,cX as M6,cY as nm,cZ as I6,c_ as vw,c$ as c0,d0 as D6,d1 as W6,d2 as d0,d3 as G1,d4 as $6,d5 as ww,d6 as L6}from"./mui-BpyiPBjE.js";import{e as Sw,f as O6,g as id,r as w,a as bt,c as B6,u as ct,h as ad,N as F6,L as hr,i as cr,j as cl,k as P6,l as Qp,m as Ye,B as j6}from"./react-CgFET2Y_.js";import{K as N6,S as H6,R as u0,M as U6,c as V6,C as X1,D as q6,I as Y6,s as Q6,a as G6,b as X6,T as vi,A as K1,d as Gp,B as Ns,e as K6,f as zu,g as Z1,h as J1,i as Z6,j as J6,k as Xp,l as e_,p as t_}from"./antd-DDkddgjB.js";import{a as r_,b as Kp,c as hc,d as fc,e as n_,f as Cw}from"./utils-BcV-xABf.js";var JW=e6(F=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function a(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(d){if(d.ep)return;d.ep=!0;const p=a(d);fetch(d.href,p)}})();var Rt=$n.Fragment,e=function(n,a,l){return P5.call(a,"css")?$n.jsx(j5,N5(n,a),l):$n.jsx(n,a,l)},o=function(n,a,l){return P5.call(a,"css")?$n.jsxs(j5,N5(n,a),l):$n.jsxs(n,a,l)},Zp={exports:{}},pc={},Jp={exports:{}},eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function i_(){return e2||(e2=1,function(t){function n(E,I){var A=E.length;E.push(I);e:for(;0<A;){var Q=A-1>>>1,J=E[Q];if(0<d(J,I))E[Q]=I,E[A]=J,A=Q;else break e}}function a(E){return E.length===0?null:E[0]}function l(E){if(E.length===0)return null;var I=E[0],A=E.pop();if(A!==I){E[0]=A;e:for(var Q=0,J=E.length,P=J>>>1;Q<P;){var ie=2*(Q+1)-1,ue=E[ie],fe=ie+1,de=E[fe];if(0>d(ue,A))fe<J&&0>d(de,ue)?(E[Q]=de,E[fe]=A,Q=fe):(E[Q]=ue,E[ie]=A,Q=ie);else if(fe<J&&0>d(de,A))E[Q]=de,E[fe]=A,Q=fe;else break e}}return I}function d(E,I){var A=E.sortIndex-I.sortIndex;return A!==0?A:E.id-I.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;t.unstable_now=function(){return p.now()}}else{var h=Date,x=h.now();t.unstable_now=function(){return h.now()-x}}var m=[],y=[],v=1,S=null,C=3,_=!1,z=!1,R=!1,B=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate!="undefined"?setImmediate:null;function j(E){for(var I=a(y);I!==null;){if(I.callback===null)l(y);else if(I.startTime<=E)l(y),I.sortIndex=I.expirationTime,n(m,I);else break;I=a(y)}}function ee(E){if(R=!1,j(E),!z)if(a(m)!==null)z=!0,V||(V=!0,U());else{var I=a(y);I!==null&&Y(ee,I.startTime-E)}}var V=!1,L=-1,k=5,G=-1;function W(){return B?!0:!(t.unstable_now()-G<k)}function M(){if(B=!1,V){var E=t.unstable_now();G=E;var I=!0;try{e:{z=!1,R&&(R=!1,O(L),L=-1),_=!0;var A=C;try{t:{for(j(E),S=a(m);S!==null&&!(S.expirationTime>E&&W());){var Q=S.callback;if(typeof Q=="function"){S.callback=null,C=S.priorityLevel;var J=Q(S.expirationTime<=E);if(E=t.unstable_now(),typeof J=="function"){S.callback=J,j(E),I=!0;break t}S===a(m)&&l(m),j(E)}else l(m);S=a(m)}if(S!==null)I=!0;else{var P=a(y);P!==null&&Y(ee,P.startTime-E),I=!1}}break e}finally{S=null,C=A,_=!1}I=void 0}}finally{I?U():V=!1}}}var U;if(typeof q=="function")U=function(){q(M)};else if(typeof MessageChannel!="undefined"){var H=new MessageChannel,N=H.port2;H.port1.onmessage=M,U=function(){N.postMessage(null)}}else U=function(){T(M,0)};function Y(E,I){L=T(function(){E(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(E){switch(C){case 1:case 2:case 3:var I=3;break;default:I=C}var A=C;C=I;try{return E()}finally{C=A}},t.unstable_requestPaint=function(){B=!0},t.unstable_runWithPriority=function(E,I){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var A=C;C=E;try{return I()}finally{C=A}},t.unstable_scheduleCallback=function(E,I,A){var Q=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?Q+A:Q):A=Q,E){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=A+J,E={id:v++,callback:I,priorityLevel:E,startTime:A,expirationTime:J,sortIndex:-1},A>Q?(E.sortIndex=A,n(y,E),a(m)===null&&E===a(y)&&(R?(O(L),L=-1):R=!0,Y(ee,A-Q))):(E.sortIndex=J,n(m,E),z||_||(z=!0,V||(V=!0,U()))),E},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(E){var I=C;return function(){var A=C;C=I;try{return E.apply(this,arguments)}finally{C=A}}}}(eg)),eg}var t2;function a_(){return t2||(t2=1,Jp.exports=i_()),Jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function o_(){if(r2)return pc;r2=1;var t=a_(),n=Sw(),a=O6();function l(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function p(r){var i=r,s=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(s=i.return),r=i.return;while(r)}return i.tag===3?s:null}function h(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function x(r){if(p(r)!==r)throw Error(l(188))}function m(r){var i=r.alternate;if(!i){if(i=p(r),i===null)throw Error(l(188));return i!==r?null:r}for(var s=r,u=i;;){var g=s.return;if(g===null)break;var b=g.alternate;if(b===null){if(u=g.return,u!==null){s=u;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===s)return x(g),r;if(b===u)return x(g),i;b=b.sibling}throw Error(l(188))}if(s.return!==u.return)s=g,u=b;else{for(var D=!1,Z=g.child;Z;){if(Z===s){D=!0,s=g,u=b;break}if(Z===u){D=!0,u=g,s=b;break}Z=Z.sibling}if(!D){for(Z=b.child;Z;){if(Z===s){D=!0,s=b,u=g;break}if(Z===u){D=!0,u=b,s=g;break}Z=Z.sibling}if(!D)throw Error(l(189))}}if(s.alternate!==u)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),q=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var H=Symbol.for("react.client.reference");function N(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===H?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case B:return"Profiler";case R:return"StrictMode";case ee:return"Suspense";case V:return"SuspenseList";case G:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case _:return"Portal";case q:return(r.displayName||"Context")+".Provider";case O:return(r._context.displayName||"Context")+".Consumer";case j:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case L:return i=r.displayName||null,i!==null?i:N(r.type)||"Memo";case k:i=r._payload,r=r._init;try{return N(r(i))}catch(s){}}return null}var Y=Array.isArray,E=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A={pending:!1,data:null,method:null,action:null},Q=[],J=-1;function P(r){return{current:r}}function ie(r){0>J||(r.current=Q[J],Q[J]=null,J--)}function ue(r,i){J++,Q[J]=r.current,r.current=i}var fe=P(null),de=P(null),K=P(null),se=P(null);function ve(r,i){switch(ue(K,i),ue(de,r),ue(fe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?i1(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=i1(i),r=a1(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(fe),ue(fe,r)}function ge(){ie(fe),ie(de),ie(K)}function ke(r){r.memoizedState!==null&&ue(se,r);var i=fe.current,s=a1(i,r.type);i!==s&&(ue(de,r),ue(fe,s))}function it(r){de.current===r&&(ie(fe),ie(de)),se.current===r&&(ie(se),ac._currentValue=A)}var kt=Object.prototype.hasOwnProperty,Cr=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,Ft=t.unstable_shouldYield,kr=t.unstable_requestPaint,Le=t.unstable_now,tr=t.unstable_getCurrentPriorityLevel,_r=t.unstable_ImmediatePriority,jn=t.unstable_UserBlockingPriority,hn=t.unstable_NormalPriority,zi=t.unstable_LowPriority,qr=t.unstable_IdlePriority,ii=t.log,ai=t.unstable_setDisableYieldValue,xn=null,Gt=null;function Yr(r){if(typeof ii=="function"&&ai(r),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(xn,r)}catch(i){}}var Re=Math.clz32?Math.clz32:Ei,Nn=Math.log,oi=Math.LN2;function Ei(r){return r>>>=0,r===0?32:31-(Nn(r)/oi|0)|0}var ae=256,Fe=4194304;function Ie(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ke(r,i,s){var u=r.pendingLanes;if(u===0)return 0;var g=0,b=r.suspendedLanes,D=r.pingedLanes;r=r.warmLanes;var Z=u&134217727;return Z!==0?(u=Z&~b,u!==0?g=Ie(u):(D&=Z,D!==0?g=Ie(D):s||(s=Z&~r,s!==0&&(g=Ie(s))))):(Z=u&~b,Z!==0?g=Ie(Z):D!==0?g=Ie(D):s||(s=u&~r,s!==0&&(g=Ie(s)))),g===0?0:i!==0&&i!==g&&(i&b)===0&&(b=g&-g,s=i&-i,b>=s||b===32&&(s&4194048)!==0)?i:g}function tt(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function $e(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function He(){var r=ae;return ae<<=1,(ae&4194048)===0&&(ae=256),r}function at(){var r=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),r}function Et(r){for(var i=[],s=0;31>s;s++)i.push(r);return i}function dr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ue(r,i,s,u,g,b){var D=r.pendingLanes;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=s,r.entangledLanes&=s,r.errorRecoveryDisabledLanes&=s,r.shellSuspendCounter=0;var Z=r.entanglements,ce=r.expirationTimes,we=r.hiddenUpdates;for(s=D&~s;0<s;){var Ee=31-Re(s),Me=1<<Ee;Z[Ee]=0,ce[Ee]=-1;var Se=we[Ee];if(Se!==null)for(we[Ee]=null,Ee=0;Ee<Se.length;Ee++){var Ce=Se[Ee];Ce!==null&&(Ce.lane&=-536870913)}s&=~Me}u!==0&&Pe(r,u,0),b!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=b&~(D&~i))}function Pe(r,i,s){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Re(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|s&4194090}function qe(r,i){var s=r.entangledLanes|=i;for(r=r.entanglements;s;){var u=31-Re(s),g=1<<u;g&i|r[u]&i&&(r[u]|=i),s&=~g}}function xt(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ve(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function si(){var r=I.p;return r!==0?r:(r=window.event,r===void 0?32:k1(r.type))}function Hi(r,i){var s=I.p;try{return I.p=r,i()}finally{I.p=s}}var Ae=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Ae,Ze="__reactProps$"+Ae,st="__reactContainer$"+Ae,ot="__reactEvents$"+Ae,je="__reactListeners$"+Ae,Nt="__reactHandles$"+Ae,Qr="__reactResources$"+Ae,Mt="__reactMarker$"+Ae;function Ri(r){delete r[Oe],delete r[Ze],delete r[ot],delete r[je],delete r[Nt]}function bn(r){var i=r[Oe];if(i)return i;for(var s=r.parentNode;s;){if(i=s[st]||s[Oe]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(r=c1(r);r!==null;){if(s=r[Oe])return s;r=c1(r)}return i}r=s,s=r.parentNode}return null}function yn(r){if(r=r[Oe]||r[st]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function vn(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(l(33))}function wn(r){var i=r[Qr];return i||(i=r[Qr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function et(r){r[Mt]=!0}var Gr=new Set,rn={};function Xt(r,i){En(r,i),En(r+"Capture",i)}function En(r,i){for(rn[r]=i,r=0;r<i.length;r++)Gr.add(i[r])}var Ra=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),li={},ft={};function Ji(r){return kt.call(ft,r)?!0:kt.call(li,r)?!1:Ra.test(r)?ft[r]=!0:(li[r]=!0,!1)}function fo(r,i,s){if(Ji(i))if(s===null)r.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+s)}}function po(r,i,s){if(s===null)r.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+s)}}function ci(r,i,s,u){if(u===null)r.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttributeNS(i,s,""+u)}}var ls,xl;function ea(r){if(ls===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);ls=i&&i[1]||"",xl=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ls+r+xl}var Ph=!1;function jh(r,i){if(!r||Ph)return"";Ph=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Me=function(){throw Error()};if(Object.defineProperty(Me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Me,[])}catch(Ce){var Se=Ce}Reflect.construct(r,[],Me)}else{try{Me.call()}catch(Ce){Se=Ce}r.call(Me.prototype)}}else{try{throw Error()}catch(Ce){Se=Ce}(Me=r())&&typeof Me.catch=="function"&&Me.catch(function(){})}}catch(Ce){if(Ce&&Se&&typeof Ce.stack=="string")return[Ce.stack,Se.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),D=b[0],Z=b[1];if(D&&Z){var ce=D.split(`
`),we=Z.split(`
`);for(g=u=0;u<ce.length&&!ce[u].includes("DetermineComponentFrameRoot");)u++;for(;g<we.length&&!we[g].includes("DetermineComponentFrameRoot");)g++;if(u===ce.length||g===we.length)for(u=ce.length-1,g=we.length-1;1<=u&&0<=g&&ce[u]!==we[g];)g--;for(;1<=u&&0<=g;u--,g--)if(ce[u]!==we[g]){if(u!==1||g!==1)do if(u--,g--,0>g||ce[u]!==we[g]){var Ee=`
`+ce[u].replace(" at new "," at ");return r.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",r.displayName)),Ee}while(1<=u&&0<=g);break}}}finally{Ph=!1,Error.prepareStackTrace=s}return(s=r?r.displayName||r.name:"")?ea(s):""}function VC(r){switch(r.tag){case 26:case 27:case 5:return ea(r.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 15:return jh(r.type,!1);case 11:return jh(r.type.render,!1);case 1:return jh(r.type,!0);case 31:return ea("Activity");default:return""}}function Zm(r){try{var i="";do i+=VC(r),r=r.return;while(r);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function di(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Jm(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qC(r){var i=Jm(r)?"checked":"value",s=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof s!="undefined"&&typeof s.get=="function"&&typeof s.set=="function"){var g=s.get,b=s.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(D){u=""+D,b.call(this,D)}}),Object.defineProperty(r,i,{enumerable:s.enumerable}),{getValue:function(){return u},setValue:function(D){u=""+D},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function gd(r){r._valueTracker||(r._valueTracker=qC(r))}function ex(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return r&&(u=Jm(r)?r.checked?"true":"false":r.value),r=u,r!==s?(i.setValue(r),!0):!1}function md(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch(i){return r.body}}var YC=/[\n"\\]/g;function ui(r){return r.replace(YC,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nh(r,i,s,u,g,b,D,Z){r.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.type=D:r.removeAttribute("type"),i!=null?D==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+di(i)):r.value!==""+di(i)&&(r.value=""+di(i)):D!=="submit"&&D!=="reset"||r.removeAttribute("value"),i!=null?Hh(r,D,di(i)):s!=null?Hh(r,D,di(s)):u!=null&&r.removeAttribute("value"),g==null&&b!=null&&(r.defaultChecked=!!b),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?r.name=""+di(Z):r.removeAttribute("name")}function tx(r,i,s,u,g,b,D,Z){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),i!=null||s!=null){if(!(b!=="submit"&&b!=="reset"||i!=null))return;s=s!=null?""+di(s):"",i=i!=null?""+di(i):s,Z||i===r.value||(r.value=i),r.defaultValue=i}u=u!=null?u:g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=Z?r.checked:!!u,r.defaultChecked=!!u,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.name=D)}function Hh(r,i,s){i==="number"&&md(r.ownerDocument)===r||r.defaultValue===""+s||(r.defaultValue=""+s)}function cs(r,i,s,u){if(r=r.options,i){i={};for(var g=0;g<s.length;g++)i["$"+s[g]]=!0;for(s=0;s<r.length;s++)g=i.hasOwnProperty("$"+r[s].value),r[s].selected!==g&&(r[s].selected=g),g&&u&&(r[s].defaultSelected=!0)}else{for(s=""+di(s),i=null,g=0;g<r.length;g++){if(r[g].value===s){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function rx(r,i,s){if(i!=null&&(i=""+di(i),i!==r.value&&(r.value=i),s==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=s!=null?""+di(s):""}function nx(r,i,s,u){if(i==null){if(u!=null){if(s!=null)throw Error(l(92));if(Y(u)){if(1<u.length)throw Error(l(93));u=u[0]}s=u}s==null&&(s=""),i=s}s=di(i),r.defaultValue=s,u=r.textContent,u===s&&u!==""&&u!==null&&(r.value=u)}function ds(r,i){if(i){var s=r.firstChild;if(s&&s===r.lastChild&&s.nodeType===3){s.nodeValue=i;return}}r.textContent=i}var QC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ix(r,i,s){var u=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,s):typeof s!="number"||s===0||QC.has(i)?i==="float"?r.cssFloat=s:r[i]=(""+s).trim():r[i]=s+"px"}function ax(r,i,s){if(i!=null&&typeof i!="object")throw Error(l(62));if(r=r.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&s[g]!==u&&ix(r,g,u)}else for(var b in i)i.hasOwnProperty(b)&&ix(r,b,i[b])}function Uh(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xd(r){return XC.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Vh=null;function qh(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var us=null,hs=null;function ox(r){var i=yn(r);if(i&&(r=i.stateNode)){var s=r[Ze]||null;e:switch(r=i.stateNode,i.type){case"input":if(Nh(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=r;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ui(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==r&&u.form===r.form){var g=u[Ze]||null;if(!g)throw Error(l(90));Nh(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<s.length;i++)u=s[i],u.form===r.form&&ex(u)}break e;case"textarea":rx(r,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&cs(r,!!s.multiple,i,!1)}}}var Yh=!1;function sx(r,i,s){if(Yh)return r(i,s);Yh=!0;try{var u=r(i);return u}finally{if(Yh=!1,(us!==null||hs!==null)&&(ru(),us&&(i=us,r=hs,hs=us=null,ox(i),r)))for(i=0;i<r.length;i++)ox(r[i])}}function bl(r,i){var s=r.stateNode;if(s===null)return null;var u=s[Ze]||null;if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(s&&typeof s!="function")throw Error(l(231,i,typeof s));return s}var ta=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Qh=!1;if(ta)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Qh=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch(r){Qh=!1}var Ta=null,Gh=null,bd=null;function lx(){if(bd)return bd;var r,i=Gh,s=i.length,u,g="value"in Ta?Ta.value:Ta.textContent,b=g.length;for(r=0;r<s&&i[r]===g[r];r++);var D=s-r;for(u=1;u<=D&&i[s-u]===g[b-u];u++);return bd=g.slice(r,1<u?1-u:void 0)}function yd(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function vd(){return!0}function cx(){return!1}function Rn(r){function i(s,u,g,b,D){this._reactName=s,this._targetInst=g,this.type=u,this.nativeEvent=b,this.target=D,this.currentTarget=null;for(var Z in r)r.hasOwnProperty(Z)&&(s=r[Z],this[Z]=s?s(b):b[Z]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?vd:cx,this.isPropagationStopped=cx,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),i}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wd=Rn(go),vl=v({},go,{view:0,detail:0}),KC=Rn(vl),Xh,Kh,wl,Sd=v({},vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==wl&&(wl&&r.type==="mousemove"?(Xh=r.screenX-wl.screenX,Kh=r.screenY-wl.screenY):Kh=Xh=0,wl=r),Xh)},movementY:function(r){return"movementY"in r?r.movementY:Kh}}),dx=Rn(Sd),ZC=v({},Sd,{dataTransfer:0}),JC=Rn(ZC),e3=v({},vl,{relatedTarget:0}),Zh=Rn(e3),t3=v({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),r3=Rn(t3),n3=v({},go,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),i3=Rn(n3),a3=v({},go,{data:0}),ux=Rn(a3),o3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c3(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=l3[r])?!!i[r]:!1}function Jh(){return c3}var d3=v({},vl,{key:function(r){if(r.key){var i=o3[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=yd(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?s3[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jh,charCode:function(r){return r.type==="keypress"?yd(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?yd(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),u3=Rn(d3),h3=v({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hx=Rn(h3),f3=v({},vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jh}),p3=Rn(f3),g3=v({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),m3=Rn(g3),x3=v({},Sd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),b3=Rn(x3),y3=v({},go,{newState:0,oldState:0}),v3=Rn(y3),w3=[9,13,27,32],ef=ta&&"CompositionEvent"in window,Sl=null;ta&&"documentMode"in document&&(Sl=document.documentMode);var S3=ta&&"TextEvent"in window&&!Sl,fx=ta&&(!ef||Sl&&8<Sl&&11>=Sl),px=" ",gx=!1;function mx(r,i){switch(r){case"keyup":return w3.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fs=!1;function C3(r,i){switch(r){case"compositionend":return xx(i);case"keypress":return i.which!==32?null:(gx=!0,px);case"textInput":return r=i.data,r===px&&gx?null:r;default:return null}}function k3(r,i){if(fs)return r==="compositionend"||!ef&&mx(r,i)?(r=lx(),bd=Gh=Ta=null,fs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fx&&i.locale!=="ko"?null:i.data;default:return null}}var _3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bx(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!_3[r.type]:i==="textarea"}function yx(r,i,s,u){us?hs?hs.push(u):hs=[u]:us=u,i=lu(i,"onChange"),0<i.length&&(s=new wd("onChange","change",null,s,u),r.push({event:s,listeners:i}))}var Cl=null,kl=null;function A3(r){Jy(r,0)}function Cd(r){var i=vn(r);if(ex(i))return r}function vx(r,i){if(r==="change")return i}var wx=!1;if(ta){var tf;if(ta){var rf="oninput"in document;if(!rf){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),rf=typeof Sx.oninput=="function"}tf=rf}else tf=!1;wx=tf&&(!document.documentMode||9<document.documentMode)}function Cx(){Cl&&(Cl.detachEvent("onpropertychange",kx),kl=Cl=null)}function kx(r){if(r.propertyName==="value"&&Cd(kl)){var i=[];yx(i,kl,r,qh(r)),sx(A3,i)}}function z3(r,i,s){r==="focusin"?(Cx(),Cl=i,kl=s,Cl.attachEvent("onpropertychange",kx)):r==="focusout"&&Cx()}function E3(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Cd(kl)}function R3(r,i){if(r==="click")return Cd(i)}function T3(r,i){if(r==="input"||r==="change")return Cd(i)}function M3(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Hn=typeof Object.is=="function"?Object.is:M3;function _l(r,i){if(Hn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var s=Object.keys(r),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var g=s[u];if(!kt.call(i,g)||!Hn(r[g],i[g]))return!1}return!0}function _x(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ax(r,i){var s=_x(r);r=0;for(var u;s;){if(s.nodeType===3){if(u=r+s.textContent.length,r<=i&&u>=i)return{node:s,offset:i-r};r=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=_x(s)}}function zx(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?zx(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Ex(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=md(r.document);i instanceof r.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch(u){s=!1}if(s)r=i.contentWindow;else break;i=md(r.document)}return i}function nf(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var I3=ta&&"documentMode"in document&&11>=document.documentMode,ps=null,af=null,Al=null,of=!1;function Rx(r,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;of||ps==null||ps!==md(u)||(u=ps,"selectionStart"in u&&nf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Al&&_l(Al,u)||(Al=u,u=lu(af,"onSelect"),0<u.length&&(i=new wd("onSelect","select",null,i,s),r.push({event:i,listeners:u}),i.target=ps)))}function mo(r,i){var s={};return s[r.toLowerCase()]=i.toLowerCase(),s["Webkit"+r]="webkit"+i,s["Moz"+r]="moz"+i,s}var gs={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionrun:mo("Transition","TransitionRun"),transitionstart:mo("Transition","TransitionStart"),transitioncancel:mo("Transition","TransitionCancel"),transitionend:mo("Transition","TransitionEnd")},sf={},Tx={};ta&&(Tx=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function xo(r){if(sf[r])return sf[r];if(!gs[r])return r;var i=gs[r],s;for(s in i)if(i.hasOwnProperty(s)&&s in Tx)return sf[r]=i[s];return r}var Mx=xo("animationend"),Ix=xo("animationiteration"),Dx=xo("animationstart"),D3=xo("transitionrun"),W3=xo("transitionstart"),$3=xo("transitioncancel"),Wx=xo("transitionend"),$x=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function Ti(r,i){$x.set(r,i),Xt(i,[r])}var Lx=new WeakMap;function hi(r,i){if(typeof r=="object"&&r!==null){var s=Lx.get(r);return s!==void 0?s:(i={value:r,source:i,stack:Zm(i)},Lx.set(r,i),i)}return{value:r,source:i,stack:Zm(i)}}var fi=[],ms=0,cf=0;function kd(){for(var r=ms,i=cf=ms=0;i<r;){var s=fi[i];fi[i++]=null;var u=fi[i];fi[i++]=null;var g=fi[i];fi[i++]=null;var b=fi[i];if(fi[i++]=null,u!==null&&g!==null){var D=u.pending;D===null?g.next=g:(g.next=D.next,D.next=g),u.pending=g}b!==0&&Ox(s,g,b)}}function _d(r,i,s,u){fi[ms++]=r,fi[ms++]=i,fi[ms++]=s,fi[ms++]=u,cf|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function df(r,i,s,u){return _d(r,i,s,u),Ad(r)}function xs(r,i){return _d(r,null,null,i),Ad(r)}function Ox(r,i,s){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s);for(var g=!1,b=r.return;b!==null;)b.childLanes|=s,u=b.alternate,u!==null&&(u.childLanes|=s),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(g=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,g&&i!==null&&(g=31-Re(s),r=b.hiddenUpdates,u=r[g],u===null?r[g]=[i]:u.push(i),i.lane=s|536870912),b):null}function Ad(r){if(50<Kl)throw Kl=0,mp=null,Error(l(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var bs={};function L3(r,i,s,u){this.tag=r,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(r,i,s,u){return new L3(r,i,s,u)}function uf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ra(r,i){var s=r.alternate;return s===null?(s=Un(r.tag,i,r.key,r.mode),s.elementType=r.elementType,s.type=r.type,s.stateNode=r.stateNode,s.alternate=r,r.alternate=s):(s.pendingProps=i,s.type=r.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=r.flags&65011712,s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,i=r.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=r.sibling,s.index=r.index,s.ref=r.ref,s.refCleanup=r.refCleanup,s}function Bx(r,i){r.flags&=65011714;var s=r.alternate;return s===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,i=s.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function zd(r,i,s,u,g,b){var D=0;if(u=r,typeof r=="function")uf(r)&&(D=1);else if(typeof r=="string")D=Bk(r,s,fe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case G:return r=Un(31,s,i,g),r.elementType=G,r.lanes=b,r;case z:return bo(s.children,g,b,i);case R:D=8,g|=24;break;case B:return r=Un(12,s,i,g|2),r.elementType=B,r.lanes=b,r;case ee:return r=Un(13,s,i,g),r.elementType=ee,r.lanes=b,r;case V:return r=Un(19,s,i,g),r.elementType=V,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case T:case q:D=10;break e;case O:D=9;break e;case j:D=11;break e;case L:D=14;break e;case k:D=16,u=null;break e}D=29,s=Error(l(130,r===null?"null":typeof r,"")),u=null}return i=Un(D,s,i,g),i.elementType=r,i.type=u,i.lanes=b,i}function bo(r,i,s,u){return r=Un(7,r,u,i),r.lanes=s,r}function hf(r,i,s){return r=Un(6,r,null,i),r.lanes=s,r}function ff(r,i,s){return i=Un(4,r.children!==null?r.children:[],r.key,i),i.lanes=s,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var ys=[],vs=0,Ed=null,Rd=0,pi=[],gi=0,yo=null,na=1,ia="";function vo(r,i){ys[vs++]=Rd,ys[vs++]=Ed,Ed=r,Rd=i}function Fx(r,i,s){pi[gi++]=na,pi[gi++]=ia,pi[gi++]=yo,yo=r;var u=na;r=ia;var g=32-Re(u)-1;u&=~(1<<g),s+=1;var b=32-Re(i)+g;if(30<b){var D=g-g%5;b=(u&(1<<D)-1).toString(32),u>>=D,g-=D,na=1<<32-Re(i)+g|s<<g|u,ia=b+r}else na=1<<b|s<<g|u,ia=r}function pf(r){r.return!==null&&(vo(r,1),Fx(r,1,0))}function gf(r){for(;r===Ed;)Ed=ys[--vs],ys[vs]=null,Rd=ys[--vs],ys[vs]=null;for(;r===yo;)yo=pi[--gi],pi[gi]=null,ia=pi[--gi],pi[gi]=null,na=pi[--gi],pi[gi]=null}var Sn=null,Ar=null,Pt=!1,wo=null,Ui=!1,mf=Error(l(519));function So(r){var i=Error(l(418,""));throw Rl(hi(i,r)),mf}function Px(r){var i=r.stateNode,s=r.type,u=r.memoizedProps;switch(i[Oe]=r,i[Ze]=u,s){case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":case"embed":At("load",i);break;case"video":case"audio":for(s=0;s<Jl.length;s++)At(Jl[s],i);break;case"source":At("error",i);break;case"img":case"image":case"link":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"input":At("invalid",i),tx(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),gd(i);break;case"select":At("invalid",i);break;case"textarea":At("invalid",i),nx(i,u.value,u.defaultValue,u.children),gd(i)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||u.suppressHydrationWarning===!0||n1(i.textContent,s)?(u.popover!=null&&(At("beforetoggle",i),At("toggle",i)),u.onScroll!=null&&At("scroll",i),u.onScrollEnd!=null&&At("scrollend",i),u.onClick!=null&&(i.onclick=cu),i=!0):i=!1,i||So(r)}function jx(r){for(Sn=r.return;Sn;)switch(Sn.tag){case 5:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:Sn=Sn.return}}function zl(r){if(r!==Sn)return!1;if(!Pt)return jx(r),Pt=!0,!1;var i=r.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=r.type,s=!(s!=="form"&&s!=="button")||Ip(r.type,r.memoizedProps)),s=!s),s&&Ar&&So(r),jx(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(l(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(s=r.data,s==="/$"){if(i===0){Ar=Ii(r.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;r=r.nextSibling}Ar=null}}else i===27?(i=Ar,qa(r.type)?(r=Lp,Lp=null,Ar=r):Ar=i):Ar=Sn?Ii(r.stateNode.nextSibling):null;return!0}function El(){Ar=Sn=null,Pt=!1}function Nx(){var r=wo;return r!==null&&(In===null?In=r:In.push.apply(In,r),wo=null),r}function Rl(r){wo===null?wo=[r]:wo.push(r)}var xf=P(null),Co=null,aa=null;function Ma(r,i,s){ue(xf,i._currentValue),i._currentValue=s}function oa(r){r._currentValue=xf.current,ie(xf)}function bf(r,i,s){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===s)break;r=r.return}}function yf(r,i,s,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var b=g.dependencies;if(b!==null){var D=g.child;b=b.firstContext;e:for(;b!==null;){var Z=b;b=g;for(var ce=0;ce<i.length;ce++)if(Z.context===i[ce]){b.lanes|=s,Z=b.alternate,Z!==null&&(Z.lanes|=s),bf(b.return,s,r),u||(D=null);break e}b=Z.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(l(341));D.lanes|=s,b=D.alternate,b!==null&&(b.lanes|=s),bf(D,s,r),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===r){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function Tl(r,i,s,u){r=null;for(var g=i,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(l(387));if(D=D.memoizedProps,D!==null){var Z=g.type;Hn(g.pendingProps.value,D.value)||(r!==null?r.push(Z):r=[Z])}}else if(g===se.current){if(D=g.alternate,D===null)throw Error(l(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(ac):r=[ac])}g=g.return}r!==null&&yf(i,r,s,u),i.flags|=262144}function Td(r){for(r=r.firstContext;r!==null;){if(!Hn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ko(r){Co=r,aa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function fn(r){return Hx(Co,r)}function Md(r,i){return Co===null&&ko(r),Hx(r,i)}function Hx(r,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},aa===null){if(r===null)throw Error(l(308));aa=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else aa=aa.next=i;return s}var O3=typeof AbortController!="undefined"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(s,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(s){return s()})}},B3=t.unstable_scheduleCallback,F3=t.unstable_NormalPriority,Hr={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new O3,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&B3(F3,function(){r.controller.abort()})}var Il=null,wf=0,ws=0,Ss=null;function P3(r,i){if(Il===null){var s=Il=[];wf=0,ws=Cp(),Ss={status:"pending",value:void 0,then:function(u){s.push(u)}}}return wf++,i.then(Ux,Ux),i}function Ux(){if(--wf===0&&Il!==null){Ss!==null&&(Ss.status="fulfilled");var r=Il;Il=null,ws=0,Ss=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function j3(r,i){var s=[],u={status:"pending",value:null,reason:null,then:function(g){s.push(g)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<s.length;g++)(0,s[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<s.length;g++)(0,s[g])(void 0)}),u}var Vx=E.S;E.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&P3(r,i),Vx!==null&&Vx(r,i)};var _o=P(null);function Sf(){var r=_o.current;return r!==null?r:sr.pooledCache}function Id(r,i){i===null?ue(_o,_o.current):ue(_o,i.pool)}function qx(){var r=Sf();return r===null?null:{parent:Hr._currentValue,pool:r}}var Dl=Error(l(460)),Yx=Error(l(474)),Dd=Error(l(542)),Cf={then:function(){}};function Qx(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Wd(){}function Gx(r,i,s){switch(s=r[s],s===void 0?r.push(i):s!==i&&(i.then(Wd,Wd),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Kx(r),r;default:if(typeof i.status=="string")i.then(Wd,Wd);else{if(r=sr,r!==null&&100<r.shellSuspendCounter)throw Error(l(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Kx(r),r}throw Wl=i,Dl}}var Wl=null;function Xx(){if(Wl===null)throw Error(l(459));var r=Wl;return Wl=null,r}function Kx(r){if(r===Dl||r===Dd)throw Error(l(483))}var Ia=!1;function kf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Da(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Wa(r,i,s){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Yt&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=Ad(r),Ox(r,null,s),i}return _d(r,u,i,s),Ad(r)}function $l(r,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,s|=u,i.lanes=s,qe(r,s)}}function Af(r,i){var s=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var g=null,b=null;if(s=s.firstBaseUpdate,s!==null){do{var D={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};b===null?g=b=D:b=b.next=D,s=s.next}while(s!==null);b===null?g=b=i:b=b.next=i}else g=b=i;s={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},r.updateQueue=s;return}r=s.lastBaseUpdate,r===null?s.firstBaseUpdate=i:r.next=i,s.lastBaseUpdate=i}var zf=!1;function Ll(){if(zf){var r=Ss;if(r!==null)throw r}}function Ol(r,i,s,u){zf=!1;var g=r.updateQueue;Ia=!1;var b=g.firstBaseUpdate,D=g.lastBaseUpdate,Z=g.shared.pending;if(Z!==null){g.shared.pending=null;var ce=Z,we=ce.next;ce.next=null,D===null?b=we:D.next=we,D=ce;var Ee=r.alternate;Ee!==null&&(Ee=Ee.updateQueue,Z=Ee.lastBaseUpdate,Z!==D&&(Z===null?Ee.firstBaseUpdate=we:Z.next=we,Ee.lastBaseUpdate=ce))}if(b!==null){var Me=g.baseState;D=0,Ee=we=ce=null,Z=b;do{var Se=Z.lane&-536870913,Ce=Se!==Z.lane;if(Ce?(Dt&Se)===Se:(u&Se)===Se){Se!==0&&Se===ws&&(zf=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var ut=r,lt=Z;Se=i;var Jt=s;switch(lt.tag){case 1:if(ut=lt.payload,typeof ut=="function"){Me=ut.call(Jt,Me,Se);break e}Me=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=lt.payload,Se=typeof ut=="function"?ut.call(Jt,Me,Se):ut,Se==null)break e;Me=v({},Me,Se);break e;case 2:Ia=!0}}Se=Z.callback,Se!==null&&(r.flags|=64,Ce&&(r.flags|=8192),Ce=g.callbacks,Ce===null?g.callbacks=[Se]:Ce.push(Se))}else Ce={lane:Se,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ee===null?(we=Ee=Ce,ce=Me):Ee=Ee.next=Ce,D|=Se;if(Z=Z.next,Z===null){if(Z=g.shared.pending,Z===null)break;Ce=Z,Z=Ce.next,Ce.next=null,g.lastBaseUpdate=Ce,g.shared.pending=null}}while(!0);Ee===null&&(ce=Me),g.baseState=ce,g.firstBaseUpdate=we,g.lastBaseUpdate=Ee,b===null&&(g.shared.lanes=0),Na|=D,r.lanes=D,r.memoizedState=Me}}function Zx(r,i){if(typeof r!="function")throw Error(l(191,r));r.call(i)}function Jx(r,i){var s=r.callbacks;if(s!==null)for(r.callbacks=null,r=0;r<s.length;r++)Zx(s[r],i)}var Cs=P(null),$d=P(0);function eb(r,i){r=fa,ue($d,r),ue(Cs,i),fa=r|i.baseLanes}function Ef(){ue($d,fa),ue(Cs,Cs.current)}function Rf(){fa=$d.current,ie(Cs),ie($d)}var $a=0,vt=null,Kt=null,Or=null,Ld=!1,ks=!1,Ao=!1,Od=0,Bl=0,_s=null,N3=0;function Mr(){throw Error(l(321))}function Tf(r,i){if(i===null)return!1;for(var s=0;s<i.length&&s<r.length;s++)if(!Hn(r[s],i[s]))return!1;return!0}function Mf(r,i,s,u,g,b){return $a=b,vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,E.H=r===null||r.memoizedState===null?Ob:Bb,Ao=!1,b=s(u,g),Ao=!1,ks&&(b=rb(i,s,u,g)),tb(r),b}function tb(r){E.H=Hd;var i=Kt!==null&&Kt.next!==null;if($a=0,Or=Kt=vt=null,Ld=!1,Bl=0,_s=null,i)throw Error(l(300));r===null||Xr||(r=r.dependencies,r!==null&&Td(r)&&(Xr=!0))}function rb(r,i,s,u){vt=r;var g=0;do{if(ks&&(_s=null),Bl=0,ks=!1,25<=g)throw Error(l(301));if(g+=1,Or=Kt=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}E.H=G3,b=i(s,u)}while(ks);return b}function H3(){var r=E.H,i=r.useState()[0];return i=typeof i.then=="function"?Fl(i):i,r=r.useState()[0],(Kt!==null?Kt.memoizedState:null)!==r&&(vt.flags|=1024),i}function If(){var r=Od!==0;return Od=0,r}function Df(r,i,s){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~s}function Wf(r){if(Ld){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ld=!1}$a=0,Or=Kt=vt=null,ks=!1,Bl=Od=0,_s=null}function Tn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?vt.memoizedState=Or=r:Or=Or.next=r,Or}function Br(){if(Kt===null){var r=vt.alternate;r=r!==null?r.memoizedState:null}else r=Kt.next;var i=Or===null?vt.memoizedState:Or.next;if(i!==null)Or=i,Kt=r;else{if(r===null)throw vt.alternate===null?Error(l(467)):Error(l(310));Kt=r,r={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},Or===null?vt.memoizedState=Or=r:Or=Or.next=r}return Or}function $f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(r){var i=Bl;return Bl+=1,_s===null&&(_s=[]),r=Gx(_s,r,i),i=vt,(Or===null?i.memoizedState:Or.next)===null&&(i=i.alternate,E.H=i===null||i.memoizedState===null?Ob:Bb),r}function Bd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Fl(r);if(r.$$typeof===q)return fn(r)}throw Error(l(438,String(r)))}function Lf(r){var i=null,s=vt.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var u=vt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=$f(),vt.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(r),u=0;u<r;u++)s[u]=W;return i.index++,s}function sa(r,i){return typeof i=="function"?i(r):i}function Fd(r){var i=Br();return Of(i,Kt,r)}function Of(r,i,s){var u=r.queue;if(u===null)throw Error(l(311));u.lastRenderedReducer=s;var g=r.baseQueue,b=u.pending;if(b!==null){if(g!==null){var D=g.next;g.next=b.next,b.next=D}i.baseQueue=g=b,u.pending=null}if(b=r.baseState,g===null)r.memoizedState=b;else{i=g.next;var Z=D=null,ce=null,we=i,Ee=!1;do{var Me=we.lane&-536870913;if(Me!==we.lane?(Dt&Me)===Me:($a&Me)===Me){var Se=we.revertLane;if(Se===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),Me===ws&&(Ee=!0);else if(($a&Se)===Se){we=we.next,Se===ws&&(Ee=!0);continue}else Me={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ce===null?(Z=ce=Me,D=b):ce=ce.next=Me,vt.lanes|=Se,Na|=Se;Me=we.action,Ao&&s(b,Me),b=we.hasEagerState?we.eagerState:s(b,Me)}else Se={lane:Me,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ce===null?(Z=ce=Se,D=b):ce=ce.next=Se,vt.lanes|=Me,Na|=Me;we=we.next}while(we!==null&&we!==i);if(ce===null?D=b:ce.next=Z,!Hn(b,r.memoizedState)&&(Xr=!0,Ee&&(s=Ss,s!==null)))throw s;r.memoizedState=b,r.baseState=D,r.baseQueue=ce,u.lastRenderedState=b}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Bf(r){var i=Br(),s=i.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=r;var u=s.dispatch,g=s.pending,b=i.memoizedState;if(g!==null){s.pending=null;var D=g=g.next;do b=r(b,D.action),D=D.next;while(D!==g);Hn(b,i.memoizedState)||(Xr=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),s.lastRenderedState=b}return[b,u]}function nb(r,i,s){var u=vt,g=Br(),b=Pt;if(b){if(s===void 0)throw Error(l(407));s=s()}else s=i();var D=!Hn((Kt||g).memoizedState,s);D&&(g.memoizedState=s,Xr=!0),g=g.queue;var Z=ob.bind(null,u,g,r);if(Pl(2048,8,Z,[r]),g.getSnapshot!==i||D||Or!==null&&Or.memoizedState.tag&1){if(u.flags|=2048,As(9,Pd(),ab.bind(null,u,g,s,i),null),sr===null)throw Error(l(349));b||($a&124)!==0||ib(u,i,s)}return s}function ib(r,i,s){r.flags|=16384,r={getSnapshot:i,value:s},i=vt.updateQueue,i===null?(i=$f(),vt.updateQueue=i,i.stores=[r]):(s=i.stores,s===null?i.stores=[r]:s.push(r))}function ab(r,i,s,u){i.value=s,i.getSnapshot=u,sb(i)&&lb(r)}function ob(r,i,s){return s(function(){sb(i)&&lb(r)})}function sb(r){var i=r.getSnapshot;r=r.value;try{var s=i();return!Hn(r,s)}catch(u){return!0}}function lb(r){var i=xs(r,2);i!==null&&Gn(i,r,2)}function Ff(r){var i=Tn();if(typeof r=="function"){var s=r;if(r=s(),Ao){Yr(!0);try{s()}finally{Yr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:r},i}function cb(r,i,s,u){return r.baseState=s,Of(r,Kt,typeof u=="function"?u:sa)}function U3(r,i,s,u,g){if(Nd(r))throw Error(l(485));if(r=i.action,r!==null){var b={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){b.listeners.push(D)}};E.T!==null?s(!0):b.isTransition=!1,u(b),s=i.pending,s===null?(b.next=i.pending=b,db(i,b)):(b.next=s.next,i.pending=s.next=b)}}function db(r,i){var s=i.action,u=i.payload,g=r.state;if(i.isTransition){var b=E.T,D={};E.T=D;try{var Z=s(g,u),ce=E.S;ce!==null&&ce(D,Z),ub(r,i,Z)}catch(we){Pf(r,i,we)}finally{E.T=b}}else try{b=s(g,u),ub(r,i,b)}catch(we){Pf(r,i,we)}}function ub(r,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){hb(r,i,u)},function(u){return Pf(r,i,u)}):hb(r,i,s)}function hb(r,i,s){i.status="fulfilled",i.value=s,fb(i),r.state=s,i=r.pending,i!==null&&(s=i.next,s===i?r.pending=null:(s=s.next,i.next=s,db(r,s)))}function Pf(r,i,s){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=s,fb(i),i=i.next;while(i!==u)}r.action=null}function fb(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function pb(r,i){return i}function gb(r,i){if(Pt){var s=sr.formState;if(s!==null){e:{var u=vt;if(Pt){if(Ar){t:{for(var g=Ar,b=Ui;g.nodeType!==8;){if(!b){g=null;break t}if(g=Ii(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Ar=Ii(g.nextSibling),u=g.data==="F!";break e}}So(u)}u=!1}u&&(i=s[0])}}return s=Tn(),s.memoizedState=s.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pb,lastRenderedState:i},s.queue=u,s=Wb.bind(null,vt,u),u.dispatch=s,u=Ff(!1),b=Vf.bind(null,vt,!1,u.queue),u=Tn(),g={state:i,dispatch:null,action:r,pending:null},u.queue=g,s=U3.bind(null,vt,g,b,s),g.dispatch=s,u.memoizedState=r,[i,s,!1]}function mb(r){var i=Br();return xb(i,Kt,r)}function xb(r,i,s){if(i=Of(r,i,pb)[0],r=Fd(sa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Fl(i)}catch(D){throw D===Dl?Dd:D}else u=i;i=Br();var g=i.queue,b=g.dispatch;return s!==i.memoizedState&&(vt.flags|=2048,As(9,Pd(),V3.bind(null,g,s),null)),[u,b,r]}function V3(r,i){r.action=i}function bb(r){var i=Br(),s=Kt;if(s!==null)return xb(i,s,r);Br(),i=i.memoizedState,s=Br();var u=s.queue.dispatch;return s.memoizedState=r,[i,u,!1]}function As(r,i,s,u){return r={tag:r,create:s,deps:u,inst:i,next:null},i=vt.updateQueue,i===null&&(i=$f(),vt.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=r.next=r:(u=s.next,s.next=r,r.next=u,i.lastEffect=r),r}function Pd(){return{destroy:void 0,resource:void 0}}function yb(){return Br().memoizedState}function jd(r,i,s,u){var g=Tn();u=u===void 0?null:u,vt.flags|=r,g.memoizedState=As(1|i,Pd(),s,u)}function Pl(r,i,s,u){var g=Br();u=u===void 0?null:u;var b=g.memoizedState.inst;Kt!==null&&u!==null&&Tf(u,Kt.memoizedState.deps)?g.memoizedState=As(i,b,s,u):(vt.flags|=r,g.memoizedState=As(1|i,b,s,u))}function vb(r,i){jd(8390656,8,r,i)}function wb(r,i){Pl(2048,8,r,i)}function Sb(r,i){return Pl(4,2,r,i)}function Cb(r,i){return Pl(4,4,r,i)}function kb(r,i){if(typeof i=="function"){r=r();var s=i(r);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function _b(r,i,s){s=s!=null?s.concat([r]):null,Pl(4,4,kb.bind(null,i,r),s)}function jf(){}function Ab(r,i){var s=Br();i=i===void 0?null:i;var u=s.memoizedState;return i!==null&&Tf(i,u[1])?u[0]:(s.memoizedState=[r,i],r)}function zb(r,i){var s=Br();i=i===void 0?null:i;var u=s.memoizedState;if(i!==null&&Tf(i,u[1]))return u[0];if(u=r(),Ao){Yr(!0);try{r()}finally{Yr(!1)}}return s.memoizedState=[u,i],u}function Nf(r,i,s){return s===void 0||($a&1073741824)!==0?r.memoizedState=i:(r.memoizedState=s,r=Ty(),vt.lanes|=r,Na|=r,s)}function Eb(r,i,s,u){return Hn(s,i)?s:Cs.current!==null?(r=Nf(r,s,u),Hn(r,i)||(Xr=!0),r):($a&42)===0?(Xr=!0,r.memoizedState=s):(r=Ty(),vt.lanes|=r,Na|=r,i)}function Rb(r,i,s,u,g){var b=I.p;I.p=b!==0&&8>b?b:8;var D=E.T,Z={};E.T=Z,Vf(r,!1,i,s);try{var ce=g(),we=E.S;if(we!==null&&we(Z,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ee=j3(ce,u);jl(r,i,Ee,Qn(r))}else jl(r,i,u,Qn(r))}catch(Me){jl(r,i,{then:function(){},status:"rejected",reason:Me},Qn())}finally{I.p=b,E.T=D}}function q3(){}function Hf(r,i,s,u){if(r.tag!==5)throw Error(l(476));var g=Tb(r).queue;Rb(r,g,i,A,s===null?q3:function(){return Mb(r),s(u)})}function Tb(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:A},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:s},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Mb(r){var i=Tb(r).next.queue;jl(r,i,{},Qn())}function Uf(){return fn(ac)}function Ib(){return Br().memoizedState}function Db(){return Br().memoizedState}function Y3(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var s=Qn();r=Da(s);var u=Wa(i,r,s);u!==null&&(Gn(u,i,s),$l(u,i,s)),i={cache:vf()},r.payload=i;return}i=i.return}}function Q3(r,i,s){var u=Qn();s={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Nd(r)?$b(i,s):(s=df(r,i,s,u),s!==null&&(Gn(s,r,u),Lb(s,i,u)))}function Wb(r,i,s){var u=Qn();jl(r,i,s,u)}function jl(r,i,s,u){var g={lane:u,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Nd(r))$b(i,g);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var D=i.lastRenderedState,Z=b(D,s);if(g.hasEagerState=!0,g.eagerState=Z,Hn(Z,D))return _d(r,i,g,0),sr===null&&kd(),!1}catch(ce){}finally{}if(s=df(r,i,g,u),s!==null)return Gn(s,r,u),Lb(s,i,u),!0}return!1}function Vf(r,i,s,u){if(u={lane:2,revertLane:Cp(),action:u,hasEagerState:!1,eagerState:null,next:null},Nd(r)){if(i)throw Error(l(479))}else i=df(r,s,u,2),i!==null&&Gn(i,r,2)}function Nd(r){var i=r.alternate;return r===vt||i!==null&&i===vt}function $b(r,i){ks=Ld=!0;var s=r.pending;s===null?i.next=i:(i.next=s.next,s.next=i),r.pending=i}function Lb(r,i,s){if((s&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,s|=u,i.lanes=s,qe(r,s)}}var Hd={readContext:fn,use:Bd,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useLayoutEffect:Mr,useInsertionEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useSyncExternalStore:Mr,useId:Mr,useHostTransitionStatus:Mr,useFormState:Mr,useActionState:Mr,useOptimistic:Mr,useMemoCache:Mr,useCacheRefresh:Mr},Ob={readContext:fn,use:Bd,useCallback:function(r,i){return Tn().memoizedState=[r,i===void 0?null:i],r},useContext:fn,useEffect:vb,useImperativeHandle:function(r,i,s){s=s!=null?s.concat([r]):null,jd(4194308,4,kb.bind(null,i,r),s)},useLayoutEffect:function(r,i){return jd(4194308,4,r,i)},useInsertionEffect:function(r,i){jd(4,2,r,i)},useMemo:function(r,i){var s=Tn();i=i===void 0?null:i;var u=r();if(Ao){Yr(!0);try{r()}finally{Yr(!1)}}return s.memoizedState=[u,i],u},useReducer:function(r,i,s){var u=Tn();if(s!==void 0){var g=s(i);if(Ao){Yr(!0);try{s(i)}finally{Yr(!1)}}}else g=i;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=Q3.bind(null,vt,r),[u.memoizedState,r]},useRef:function(r){var i=Tn();return r={current:r},i.memoizedState=r},useState:function(r){r=Ff(r);var i=r.queue,s=Wb.bind(null,vt,i);return i.dispatch=s,[r.memoizedState,s]},useDebugValue:jf,useDeferredValue:function(r,i){var s=Tn();return Nf(s,r,i)},useTransition:function(){var r=Ff(!1);return r=Rb.bind(null,vt,r.queue,!0,!1),Tn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,s){var u=vt,g=Tn();if(Pt){if(s===void 0)throw Error(l(407));s=s()}else{if(s=i(),sr===null)throw Error(l(349));(Dt&124)!==0||ib(u,i,s)}g.memoizedState=s;var b={value:s,getSnapshot:i};return g.queue=b,vb(ob.bind(null,u,b,r),[r]),u.flags|=2048,As(9,Pd(),ab.bind(null,u,b,s,i),null),s},useId:function(){var r=Tn(),i=sr.identifierPrefix;if(Pt){var s=ia,u=na;s=(u&~(1<<32-Re(u)-1)).toString(32)+s,i=""+i+"R"+s,s=Od++,0<s&&(i+="H"+s.toString(32)),i+=""}else s=N3++,i=""+i+"r"+s.toString(32)+"";return r.memoizedState=i},useHostTransitionStatus:Uf,useFormState:gb,useActionState:gb,useOptimistic:function(r){var i=Tn();i.memoizedState=i.baseState=r;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=Vf.bind(null,vt,!0,s),s.dispatch=i,[r,i]},useMemoCache:Lf,useCacheRefresh:function(){return Tn().memoizedState=Y3.bind(null,vt)}},Bb={readContext:fn,use:Bd,useCallback:Ab,useContext:fn,useEffect:wb,useImperativeHandle:_b,useInsertionEffect:Sb,useLayoutEffect:Cb,useMemo:zb,useReducer:Fd,useRef:yb,useState:function(){return Fd(sa)},useDebugValue:jf,useDeferredValue:function(r,i){var s=Br();return Eb(s,Kt.memoizedState,r,i)},useTransition:function(){var r=Fd(sa)[0],i=Br().memoizedState;return[typeof r=="boolean"?r:Fl(r),i]},useSyncExternalStore:nb,useId:Ib,useHostTransitionStatus:Uf,useFormState:mb,useActionState:mb,useOptimistic:function(r,i){var s=Br();return cb(s,Kt,r,i)},useMemoCache:Lf,useCacheRefresh:Db},G3={readContext:fn,use:Bd,useCallback:Ab,useContext:fn,useEffect:wb,useImperativeHandle:_b,useInsertionEffect:Sb,useLayoutEffect:Cb,useMemo:zb,useReducer:Bf,useRef:yb,useState:function(){return Bf(sa)},useDebugValue:jf,useDeferredValue:function(r,i){var s=Br();return Kt===null?Nf(s,r,i):Eb(s,Kt.memoizedState,r,i)},useTransition:function(){var r=Bf(sa)[0],i=Br().memoizedState;return[typeof r=="boolean"?r:Fl(r),i]},useSyncExternalStore:nb,useId:Ib,useHostTransitionStatus:Uf,useFormState:bb,useActionState:bb,useOptimistic:function(r,i){var s=Br();return Kt!==null?cb(s,Kt,r,i):(s.baseState=r,[r,s.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:Db},zs=null,Nl=0;function Ud(r){var i=Nl;return Nl+=1,zs===null&&(zs=[]),Gx(zs,r,i)}function Hl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Vd(r,i){throw i.$$typeof===S?Error(l(525)):(r=Object.prototype.toString.call(i),Error(l(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Fb(r){var i=r._init;return i(r._payload)}function Pb(r){function i(me,he){if(r){var ye=me.deletions;ye===null?(me.deletions=[he],me.flags|=16):ye.push(he)}}function s(me,he){if(!r)return null;for(;he!==null;)i(me,he),he=he.sibling;return null}function u(me){for(var he=new Map;me!==null;)me.key!==null?he.set(me.key,me):he.set(me.index,me),me=me.sibling;return he}function g(me,he){return me=ra(me,he),me.index=0,me.sibling=null,me}function b(me,he,ye){return me.index=ye,r?(ye=me.alternate,ye!==null?(ye=ye.index,ye<he?(me.flags|=67108866,he):ye):(me.flags|=67108866,he)):(me.flags|=1048576,he)}function D(me){return r&&me.alternate===null&&(me.flags|=67108866),me}function Z(me,he,ye,Te){return he===null||he.tag!==6?(he=hf(ye,me.mode,Te),he.return=me,he):(he=g(he,ye),he.return=me,he)}function ce(me,he,ye,Te){var Ge=ye.type;return Ge===z?Ee(me,he,ye.props.children,Te,ye.key):he!==null&&(he.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===k&&Fb(Ge)===he.type)?(he=g(he,ye.props),Hl(he,ye),he.return=me,he):(he=zd(ye.type,ye.key,ye.props,null,me.mode,Te),Hl(he,ye),he.return=me,he)}function we(me,he,ye,Te){return he===null||he.tag!==4||he.stateNode.containerInfo!==ye.containerInfo||he.stateNode.implementation!==ye.implementation?(he=ff(ye,me.mode,Te),he.return=me,he):(he=g(he,ye.children||[]),he.return=me,he)}function Ee(me,he,ye,Te,Ge){return he===null||he.tag!==7?(he=bo(ye,me.mode,Te,Ge),he.return=me,he):(he=g(he,ye),he.return=me,he)}function Me(me,he,ye){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return he=hf(""+he,me.mode,ye),he.return=me,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case C:return ye=zd(he.type,he.key,he.props,null,me.mode,ye),Hl(ye,he),ye.return=me,ye;case _:return he=ff(he,me.mode,ye),he.return=me,he;case k:var Te=he._init;return he=Te(he._payload),Me(me,he,ye)}if(Y(he)||U(he))return he=bo(he,me.mode,ye,null),he.return=me,he;if(typeof he.then=="function")return Me(me,Ud(he),ye);if(he.$$typeof===q)return Me(me,Md(me,he),ye);Vd(me,he)}return null}function Se(me,he,ye,Te){var Ge=he!==null?he.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Ge!==null?null:Z(me,he,""+ye,Te);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case C:return ye.key===Ge?ce(me,he,ye,Te):null;case _:return ye.key===Ge?we(me,he,ye,Te):null;case k:return Ge=ye._init,ye=Ge(ye._payload),Se(me,he,ye,Te)}if(Y(ye)||U(ye))return Ge!==null?null:Ee(me,he,ye,Te,null);if(typeof ye.then=="function")return Se(me,he,Ud(ye),Te);if(ye.$$typeof===q)return Se(me,he,Md(me,ye),Te);Vd(me,ye)}return null}function Ce(me,he,ye,Te,Ge){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return me=me.get(ye)||null,Z(he,me,""+Te,Ge);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case C:return me=me.get(Te.key===null?ye:Te.key)||null,ce(he,me,Te,Ge);case _:return me=me.get(Te.key===null?ye:Te.key)||null,we(he,me,Te,Ge);case k:var St=Te._init;return Te=St(Te._payload),Ce(me,he,ye,Te,Ge)}if(Y(Te)||U(Te))return me=me.get(ye)||null,Ee(he,me,Te,Ge,null);if(typeof Te.then=="function")return Ce(me,he,ye,Ud(Te),Ge);if(Te.$$typeof===q)return Ce(me,he,ye,Md(he,Te),Ge);Vd(he,Te)}return null}function ut(me,he,ye,Te){for(var Ge=null,St=null,rt=he,dt=he=0,Zr=null;rt!==null&&dt<ye.length;dt++){rt.index>dt?(Zr=rt,rt=null):Zr=rt.sibling;var $t=Se(me,rt,ye[dt],Te);if($t===null){rt===null&&(rt=Zr);break}r&&rt&&$t.alternate===null&&i(me,rt),he=b($t,he,dt),St===null?Ge=$t:St.sibling=$t,St=$t,rt=Zr}if(dt===ye.length)return s(me,rt),Pt&&vo(me,dt),Ge;if(rt===null){for(;dt<ye.length;dt++)rt=Me(me,ye[dt],Te),rt!==null&&(he=b(rt,he,dt),St===null?Ge=rt:St.sibling=rt,St=rt);return Pt&&vo(me,dt),Ge}for(rt=u(rt);dt<ye.length;dt++)Zr=Ce(rt,me,dt,ye[dt],Te),Zr!==null&&(r&&Zr.alternate!==null&&rt.delete(Zr.key===null?dt:Zr.key),he=b(Zr,he,dt),St===null?Ge=Zr:St.sibling=Zr,St=Zr);return r&&rt.forEach(function(Ka){return i(me,Ka)}),Pt&&vo(me,dt),Ge}function lt(me,he,ye,Te){if(ye==null)throw Error(l(151));for(var Ge=null,St=null,rt=he,dt=he=0,Zr=null,$t=ye.next();rt!==null&&!$t.done;dt++,$t=ye.next()){rt.index>dt?(Zr=rt,rt=null):Zr=rt.sibling;var Ka=Se(me,rt,$t.value,Te);if(Ka===null){rt===null&&(rt=Zr);break}r&&rt&&Ka.alternate===null&&i(me,rt),he=b(Ka,he,dt),St===null?Ge=Ka:St.sibling=Ka,St=Ka,rt=Zr}if($t.done)return s(me,rt),Pt&&vo(me,dt),Ge;if(rt===null){for(;!$t.done;dt++,$t=ye.next())$t=Me(me,$t.value,Te),$t!==null&&(he=b($t,he,dt),St===null?Ge=$t:St.sibling=$t,St=$t);return Pt&&vo(me,dt),Ge}for(rt=u(rt);!$t.done;dt++,$t=ye.next())$t=Ce(rt,me,dt,$t.value,Te),$t!==null&&(r&&$t.alternate!==null&&rt.delete($t.key===null?dt:$t.key),he=b($t,he,dt),St===null?Ge=$t:St.sibling=$t,St=$t);return r&&rt.forEach(function(Xk){return i(me,Xk)}),Pt&&vo(me,dt),Ge}function Jt(me,he,ye,Te){if(typeof ye=="object"&&ye!==null&&ye.type===z&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case C:e:{for(var Ge=ye.key;he!==null;){if(he.key===Ge){if(Ge=ye.type,Ge===z){if(he.tag===7){s(me,he.sibling),Te=g(he,ye.props.children),Te.return=me,me=Te;break e}}else if(he.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===k&&Fb(Ge)===he.type){s(me,he.sibling),Te=g(he,ye.props),Hl(Te,ye),Te.return=me,me=Te;break e}s(me,he);break}else i(me,he);he=he.sibling}ye.type===z?(Te=bo(ye.props.children,me.mode,Te,ye.key),Te.return=me,me=Te):(Te=zd(ye.type,ye.key,ye.props,null,me.mode,Te),Hl(Te,ye),Te.return=me,me=Te)}return D(me);case _:e:{for(Ge=ye.key;he!==null;){if(he.key===Ge)if(he.tag===4&&he.stateNode.containerInfo===ye.containerInfo&&he.stateNode.implementation===ye.implementation){s(me,he.sibling),Te=g(he,ye.children||[]),Te.return=me,me=Te;break e}else{s(me,he);break}else i(me,he);he=he.sibling}Te=ff(ye,me.mode,Te),Te.return=me,me=Te}return D(me);case k:return Ge=ye._init,ye=Ge(ye._payload),Jt(me,he,ye,Te)}if(Y(ye))return ut(me,he,ye,Te);if(U(ye)){if(Ge=U(ye),typeof Ge!="function")throw Error(l(150));return ye=Ge.call(ye),lt(me,he,ye,Te)}if(typeof ye.then=="function")return Jt(me,he,Ud(ye),Te);if(ye.$$typeof===q)return Jt(me,he,Md(me,ye),Te);Vd(me,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,he!==null&&he.tag===6?(s(me,he.sibling),Te=g(he,ye),Te.return=me,me=Te):(s(me,he),Te=hf(ye,me.mode,Te),Te.return=me,me=Te),D(me)):s(me,he)}return function(me,he,ye,Te){try{Nl=0;var Ge=Jt(me,he,ye,Te);return zs=null,Ge}catch(rt){if(rt===Dl||rt===Dd)throw rt;var St=Un(29,rt,null,me.mode);return St.lanes=Te,St.return=me,St}finally{}}}var Es=Pb(!0),jb=Pb(!1),mi=P(null),Vi=null;function La(r){var i=r.alternate;ue(Ur,Ur.current&1),ue(mi,r),Vi===null&&(i===null||Cs.current!==null||i.memoizedState!==null)&&(Vi=r)}function Nb(r){if(r.tag===22){if(ue(Ur,Ur.current),ue(mi,r),Vi===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Vi=r)}}else Oa()}function Oa(){ue(Ur,Ur.current),ue(mi,mi.current)}function la(r){ie(mi),Vi===r&&(Vi=null),ie(Ur)}var Ur=P(0);function qd(r){for(var i=r;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||$p(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qf(r,i,s,u){i=r.memoizedState,s=s(u,i),s=s==null?i:v({},i,s),r.memoizedState=s,r.lanes===0&&(r.updateQueue.baseState=s)}var Yf={enqueueSetState:function(r,i,s){r=r._reactInternals;var u=Qn(),g=Da(u);g.payload=i,s!=null&&(g.callback=s),i=Wa(r,g,u),i!==null&&(Gn(i,r,u),$l(i,r,u))},enqueueReplaceState:function(r,i,s){r=r._reactInternals;var u=Qn(),g=Da(u);g.tag=1,g.payload=i,s!=null&&(g.callback=s),i=Wa(r,g,u),i!==null&&(Gn(i,r,u),$l(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var s=Qn(),u=Da(s);u.tag=2,i!=null&&(u.callback=i),i=Wa(r,u,s),i!==null&&(Gn(i,r,s),$l(i,r,s))}};function Hb(r,i,s,u,g,b,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,b,D):i.prototype&&i.prototype.isPureReactComponent?!_l(s,u)||!_l(g,b):!0}function Ub(r,i,s,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==r&&Yf.enqueueReplaceState(i,i.state,null)}function zo(r,i){var s=i;if("ref"in i){s={};for(var u in i)u!=="ref"&&(s[u]=i[u])}if(r=r.defaultProps){s===i&&(s=v({},s));for(var g in r)s[g]===void 0&&(s[g]=r[g])}return s}var Yd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Vb(r){Yd(r)}function qb(r){console.error(r)}function Yb(r){Yd(r)}function Qd(r,i){try{var s=r.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Qb(r,i,s){try{var u=r.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Qf(r,i,s){return s=Da(s),s.tag=3,s.payload={element:null},s.callback=function(){Qd(r,i)},s}function Gb(r){return r=Da(r),r.tag=3,r}function Xb(r,i,s,u){var g=s.type.getDerivedStateFromError;if(typeof g=="function"){var b=u.value;r.payload=function(){return g(b)},r.callback=function(){Qb(i,s,u)}}var D=s.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(r.callback=function(){Qb(i,s,u),typeof g!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var Z=u.stack;this.componentDidCatch(u.value,{componentStack:Z!==null?Z:""})})}function X3(r,i,s,u,g){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=s.alternate,i!==null&&Tl(i,s,g,!0),s=mi.current,s!==null){switch(s.tag){case 13:return Vi===null?bp():s.alternate===null&&zr===0&&(zr=3),s.flags&=-257,s.flags|=65536,s.lanes=g,u===Cf?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([u]):i.add(u),vp(r,u,g)),!1;case 22:return s.flags|=65536,u===Cf?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([u]):s.add(u)),vp(r,u,g)),!1}throw Error(l(435,s.tag))}return vp(r,u,g),bp(),!1}if(Pt)return i=mi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==mf&&(r=Error(l(422),{cause:u}),Rl(hi(r,s)))):(u!==mf&&(i=Error(l(423),{cause:u}),Rl(hi(i,s))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=hi(u,s),g=Qf(r.stateNode,u,g),Af(r,g),zr!==4&&(zr=2)),!1;var b=Error(l(520),{cause:u});if(b=hi(b,s),Xl===null?Xl=[b]:Xl.push(b),zr!==4&&(zr=2),i===null)return!0;u=hi(u,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,r=g&-g,s.lanes|=r,r=Qf(s.stateNode,u,r),Af(s,r),!1;case 1:if(i=s.type,b=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ha===null||!Ha.has(b))))return s.flags|=65536,g&=-g,s.lanes|=g,g=Gb(g),Xb(g,r,s,u),Af(s,g),!1}s=s.return}while(s!==null);return!1}var Kb=Error(l(461)),Xr=!1;function nn(r,i,s,u){i.child=r===null?jb(i,null,s,u):Es(i,r.child,s,u)}function Zb(r,i,s,u,g){s=s.render;var b=i.ref;if("ref"in u){var D={};for(var Z in u)Z!=="ref"&&(D[Z]=u[Z])}else D=u;return ko(i),u=Mf(r,i,s,D,b,g),Z=If(),r!==null&&!Xr?(Df(r,i,g),ca(r,i,g)):(Pt&&Z&&pf(i),i.flags|=1,nn(r,i,u,g),i.child)}function Jb(r,i,s,u,g){if(r===null){var b=s.type;return typeof b=="function"&&!uf(b)&&b.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=b,ey(r,i,b,u,g)):(r=zd(s.type,null,u,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(b=r.child,!rp(r,g)){var D=b.memoizedProps;if(s=s.compare,s=s!==null?s:_l,s(D,u)&&r.ref===i.ref)return ca(r,i,g)}return i.flags|=1,r=ra(b,u),r.ref=i.ref,r.return=i,i.child=r}function ey(r,i,s,u,g){if(r!==null){var b=r.memoizedProps;if(_l(b,u)&&r.ref===i.ref)if(Xr=!1,i.pendingProps=u=b,rp(r,g))(r.flags&131072)!==0&&(Xr=!0);else return i.lanes=r.lanes,ca(r,i,g)}return Gf(r,i,s,u,g)}function ty(r,i,s){var u=i.pendingProps,g=u.children,b=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=b!==null?b.baseLanes|s:s,r!==null){for(g=i.child=r.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;i.childLanes=b&~u}else i.childLanes=0,i.child=null;return ry(r,i,u,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Id(i,b!==null?b.cachePool:null),b!==null?eb(i,b):Ef(),Nb(i);else return i.lanes=i.childLanes=536870912,ry(r,i,b!==null?b.baseLanes|s:s,s)}else b!==null?(Id(i,b.cachePool),eb(i,b),Oa(),i.memoizedState=null):(r!==null&&Id(i,null),Ef(),Oa());return nn(r,i,g,s),i.child}function ry(r,i,s,u){var g=Sf();return g=g===null?null:{parent:Hr._currentValue,pool:g},i.memoizedState={baseLanes:s,cachePool:g},r!==null&&Id(i,null),Ef(),Nb(i),r!==null&&Tl(r,i,u,!0),null}function Gd(r,i){var s=i.ref;if(s===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(l(284));(r===null||r.ref!==s)&&(i.flags|=4194816)}}function Gf(r,i,s,u,g){return ko(i),s=Mf(r,i,s,u,void 0,g),u=If(),r!==null&&!Xr?(Df(r,i,g),ca(r,i,g)):(Pt&&u&&pf(i),i.flags|=1,nn(r,i,s,g),i.child)}function ny(r,i,s,u,g,b){return ko(i),i.updateQueue=null,s=rb(i,u,s,g),tb(r),u=If(),r!==null&&!Xr?(Df(r,i,b),ca(r,i,b)):(Pt&&u&&pf(i),i.flags|=1,nn(r,i,s,b),i.child)}function iy(r,i,s,u,g){if(ko(i),i.stateNode===null){var b=bs,D=s.contextType;typeof D=="object"&&D!==null&&(b=fn(D)),b=new s(u,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Yf,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=u,b.state=i.memoizedState,b.refs={},kf(i),D=s.contextType,b.context=typeof D=="object"&&D!==null?fn(D):bs,b.state=i.memoizedState,D=s.getDerivedStateFromProps,typeof D=="function"&&(qf(i,s,D,u),b.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(D=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),D!==b.state&&Yf.enqueueReplaceState(b,b.state,null),Ol(i,u,b,g),Ll(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){b=i.stateNode;var Z=i.memoizedProps,ce=zo(s,Z);b.props=ce;var we=b.context,Ee=s.contextType;D=bs,typeof Ee=="object"&&Ee!==null&&(D=fn(Ee));var Me=s.getDerivedStateFromProps;Ee=typeof Me=="function"||typeof b.getSnapshotBeforeUpdate=="function",Z=i.pendingProps!==Z,Ee||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(Z||we!==D)&&Ub(i,b,u,D),Ia=!1;var Se=i.memoizedState;b.state=Se,Ol(i,u,b,g),Ll(),we=i.memoizedState,Z||Se!==we||Ia?(typeof Me=="function"&&(qf(i,s,Me,u),we=i.memoizedState),(ce=Ia||Hb(i,s,ce,u,Se,we,D))?(Ee||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=we),b.props=u,b.state=we,b.context=D,u=ce):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{b=i.stateNode,_f(r,i),D=i.memoizedProps,Ee=zo(s,D),b.props=Ee,Me=i.pendingProps,Se=b.context,we=s.contextType,ce=bs,typeof we=="object"&&we!==null&&(ce=fn(we)),Z=s.getDerivedStateFromProps,(we=typeof Z=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D!==Me||Se!==ce)&&Ub(i,b,u,ce),Ia=!1,Se=i.memoizedState,b.state=Se,Ol(i,u,b,g),Ll();var Ce=i.memoizedState;D!==Me||Se!==Ce||Ia||r!==null&&r.dependencies!==null&&Td(r.dependencies)?(typeof Z=="function"&&(qf(i,s,Z,u),Ce=i.memoizedState),(Ee=Ia||Hb(i,s,Ee,u,Se,Ce,ce)||r!==null&&r.dependencies!==null&&Td(r.dependencies))?(we||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,Ce,ce),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,Ce,ce)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||D===r.memoizedProps&&Se===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&Se===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Ce),b.props=u,b.state=Ce,b.context=ce,u=Ee):(typeof b.componentDidUpdate!="function"||D===r.memoizedProps&&Se===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&Se===r.memoizedState||(i.flags|=1024),u=!1)}return b=u,Gd(r,i),u=(i.flags&128)!==0,b||u?(b=i.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,r!==null&&u?(i.child=Es(i,r.child,null,g),i.child=Es(i,null,s,g)):nn(r,i,s,g),i.memoizedState=b.state,r=i.child):r=ca(r,i,g),r}function ay(r,i,s,u){return El(),i.flags|=256,nn(r,i,s,u),i.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kf(r){return{baseLanes:r,cachePool:qx()}}function Zf(r,i,s){return r=r!==null?r.childLanes&~s:0,i&&(r|=xi),r}function oy(r,i,s){var u=i.pendingProps,g=!1,b=(i.flags&128)!==0,D;if((D=b)||(D=r!==null&&r.memoizedState===null?!1:(Ur.current&2)!==0),D&&(g=!0,i.flags&=-129),D=(i.flags&32)!==0,i.flags&=-33,r===null){if(Pt){if(g?La(i):Oa(),Pt){var Z=Ar,ce;if(ce=Z){e:{for(ce=Z,Z=Ui;ce.nodeType!==8;){if(!Z){Z=null;break e}if(ce=Ii(ce.nextSibling),ce===null){Z=null;break e}}Z=ce}Z!==null?(i.memoizedState={dehydrated:Z,treeContext:yo!==null?{id:na,overflow:ia}:null,retryLane:536870912,hydrationErrors:null},ce=Un(18,null,null,0),ce.stateNode=Z,ce.return=i,i.child=ce,Sn=i,Ar=null,ce=!0):ce=!1}ce||So(i)}if(Z=i.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return $p(Z)?i.lanes=32:i.lanes=536870912,null;la(i)}return Z=u.children,u=u.fallback,g?(Oa(),g=i.mode,Z=Xd({mode:"hidden",children:Z},g),u=bo(u,g,s,null),Z.return=i,u.return=i,Z.sibling=u,i.child=Z,g=i.child,g.memoizedState=Kf(s),g.childLanes=Zf(r,D,s),i.memoizedState=Xf,u):(La(i),Jf(i,Z))}if(ce=r.memoizedState,ce!==null&&(Z=ce.dehydrated,Z!==null)){if(b)i.flags&256?(La(i),i.flags&=-257,i=ep(r,i,s)):i.memoizedState!==null?(Oa(),i.child=r.child,i.flags|=128,i=null):(Oa(),g=u.fallback,Z=i.mode,u=Xd({mode:"visible",children:u.children},Z),g=bo(g,Z,s,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,Es(i,r.child,null,s),u=i.child,u.memoizedState=Kf(s),u.childLanes=Zf(r,D,s),i.memoizedState=Xf,i=g);else if(La(i),$p(Z)){if(D=Z.nextSibling&&Z.nextSibling.dataset,D)var we=D.dgst;D=we,u=Error(l(419)),u.stack="",u.digest=D,Rl({value:u,source:null,stack:null}),i=ep(r,i,s)}else if(Xr||Tl(r,i,s,!1),D=(s&r.childLanes)!==0,Xr||D){if(D=sr,D!==null&&(u=s&-s,u=(u&42)!==0?1:xt(u),u=(u&(D.suspendedLanes|s))!==0?0:u,u!==0&&u!==ce.retryLane))throw ce.retryLane=u,xs(r,u),Gn(D,r,u),Kb;Z.data==="$?"||bp(),i=ep(r,i,s)}else Z.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=ce.treeContext,Ar=Ii(Z.nextSibling),Sn=i,Pt=!0,wo=null,Ui=!1,r!==null&&(pi[gi++]=na,pi[gi++]=ia,pi[gi++]=yo,na=r.id,ia=r.overflow,yo=i),i=Jf(i,u.children),i.flags|=4096);return i}return g?(Oa(),g=u.fallback,Z=i.mode,ce=r.child,we=ce.sibling,u=ra(ce,{mode:"hidden",children:u.children}),u.subtreeFlags=ce.subtreeFlags&65011712,we!==null?g=ra(we,g):(g=bo(g,Z,s,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,Z=r.child.memoizedState,Z===null?Z=Kf(s):(ce=Z.cachePool,ce!==null?(we=Hr._currentValue,ce=ce.parent!==we?{parent:we,pool:we}:ce):ce=qx(),Z={baseLanes:Z.baseLanes|s,cachePool:ce}),g.memoizedState=Z,g.childLanes=Zf(r,D,s),i.memoizedState=Xf,u):(La(i),s=r.child,r=s.sibling,s=ra(s,{mode:"visible",children:u.children}),s.return=i,s.sibling=null,r!==null&&(D=i.deletions,D===null?(i.deletions=[r],i.flags|=16):D.push(r)),i.child=s,i.memoizedState=null,s)}function Jf(r,i){return i=Xd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Xd(r,i){return r=Un(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function ep(r,i,s){return Es(i,r.child,null,s),r=Jf(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function sy(r,i,s){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),bf(r.return,i,s)}function tp(r,i,s,u,g){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=s,b.tailMode=g)}function ly(r,i,s){var u=i.pendingProps,g=u.revealOrder,b=u.tail;if(nn(r,i,u.children,s),u=Ur.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&sy(r,s,i);else if(r.tag===19)sy(r,s,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ue(Ur,u),g){case"forwards":for(s=i.child,g=null;s!==null;)r=s.alternate,r!==null&&qd(r)===null&&(g=s),s=s.sibling;s=g,s===null?(g=i.child,i.child=null):(g=s.sibling,s.sibling=null),tp(i,!1,g,s,b);break;case"backwards":for(s=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&qd(r)===null){i.child=g;break}r=g.sibling,g.sibling=s,s=g,g=r}tp(i,!0,s,null,b);break;case"together":tp(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ca(r,i,s){if(r!==null&&(i.dependencies=r.dependencies),Na|=i.lanes,(s&i.childLanes)===0)if(r!==null){if(Tl(r,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(l(153));if(i.child!==null){for(r=i.child,s=ra(r,r.pendingProps),i.child=s,s.return=i;r.sibling!==null;)r=r.sibling,s=s.sibling=ra(r,r.pendingProps),s.return=i;s.sibling=null}return i.child}function rp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Td(r)))}function K3(r,i,s){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),Ma(i,Hr,r.memoizedState.cache),El();break;case 27:case 5:ke(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:Ma(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(La(i),i.flags|=128,null):(s&i.child.childLanes)!==0?oy(r,i,s):(La(i),r=ca(r,i,s),r!==null?r.sibling:null);La(i);break;case 19:var g=(r.flags&128)!==0;if(u=(s&i.childLanes)!==0,u||(Tl(r,i,s,!1),u=(s&i.childLanes)!==0),g){if(u)return ly(r,i,s);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(Ur,Ur.current),u)break;return null;case 22:case 23:return i.lanes=0,ty(r,i,s);case 24:Ma(i,Hr,r.memoizedState.cache)}return ca(r,i,s)}function cy(r,i,s){if(r!==null)if(r.memoizedProps!==i.pendingProps)Xr=!0;else{if(!rp(r,s)&&(i.flags&128)===0)return Xr=!1,K3(r,i,s);Xr=(r.flags&131072)!==0}else Xr=!1,Pt&&(i.flags&1048576)!==0&&Fx(i,Rd,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")uf(u)?(r=zo(u,r),i.tag=1,i=iy(null,i,u,r,s)):(i.tag=0,i=Gf(null,i,u,r,s));else{if(u!=null){if(g=u.$$typeof,g===j){i.tag=11,i=Zb(null,i,u,r,s);break e}else if(g===L){i.tag=14,i=Jb(null,i,u,r,s);break e}}throw i=N(u)||u,Error(l(306,i,""))}}return i;case 0:return Gf(r,i,i.type,i.pendingProps,s);case 1:return u=i.type,g=zo(u,i.pendingProps),iy(r,i,u,g,s);case 3:e:{if(ve(i,i.stateNode.containerInfo),r===null)throw Error(l(387));u=i.pendingProps;var b=i.memoizedState;g=b.element,_f(r,i),Ol(i,u,null,s);var D=i.memoizedState;if(u=D.cache,Ma(i,Hr,u),u!==b.cache&&yf(i,[Hr],s,!0),Ll(),u=D.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:D.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=ay(r,i,u,s);break e}else if(u!==g){g=hi(Error(l(424)),i),Rl(g),i=ay(r,i,u,s);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ar=Ii(r.firstChild),Sn=i,Pt=!0,wo=null,Ui=!0,s=jb(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(El(),u===g){i=ca(r,i,s);break e}nn(r,i,u,s)}i=i.child}return i;case 26:return Gd(r,i),r===null?(s=f1(i.type,null,i.pendingProps,null))?i.memoizedState=s:Pt||(s=i.type,r=i.pendingProps,u=du(K.current).createElement(s),u[Oe]=i,u[Ze]=r,on(u,s,r),et(u),i.stateNode=u):i.memoizedState=f1(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ke(i),r===null&&Pt&&(u=i.stateNode=d1(i.type,i.pendingProps,K.current),Sn=i,Ui=!0,g=Ar,qa(i.type)?(Lp=g,Ar=Ii(u.firstChild)):Ar=g),nn(r,i,i.pendingProps.children,s),Gd(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Pt&&((g=u=Ar)&&(u=_k(u,i.type,i.pendingProps,Ui),u!==null?(i.stateNode=u,Sn=i,Ar=Ii(u.firstChild),Ui=!1,g=!0):g=!1),g||So(i)),ke(i),g=i.type,b=i.pendingProps,D=r!==null?r.memoizedProps:null,u=b.children,Ip(g,b)?u=null:D!==null&&Ip(g,D)&&(i.flags|=32),i.memoizedState!==null&&(g=Mf(r,i,H3,null,null,s),ac._currentValue=g),Gd(r,i),nn(r,i,u,s),i.child;case 6:return r===null&&Pt&&((r=s=Ar)&&(s=Ak(s,i.pendingProps,Ui),s!==null?(i.stateNode=s,Sn=i,Ar=null,r=!0):r=!1),r||So(i)),null;case 13:return oy(r,i,s);case 4:return ve(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Es(i,null,u,s):nn(r,i,u,s),i.child;case 11:return Zb(r,i,i.type,i.pendingProps,s);case 7:return nn(r,i,i.pendingProps,s),i.child;case 8:return nn(r,i,i.pendingProps.children,s),i.child;case 12:return nn(r,i,i.pendingProps.children,s),i.child;case 10:return u=i.pendingProps,Ma(i,i.type,u.value),nn(r,i,u.children,s),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,ko(i),g=fn(g),u=u(g),i.flags|=1,nn(r,i,u,s),i.child;case 14:return Jb(r,i,i.type,i.pendingProps,s);case 15:return ey(r,i,i.type,i.pendingProps,s);case 19:return ly(r,i,s);case 31:return u=i.pendingProps,s=i.mode,u={mode:u.mode,children:u.children},r===null?(s=Xd(u,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=ra(r.child,u),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return ty(r,i,s);case 24:return ko(i),u=fn(Hr),r===null?(g=Sf(),g===null&&(g=sr,b=vf(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=s),g=b),i.memoizedState={parent:u,cache:g},kf(i),Ma(i,Hr,g)):((r.lanes&s)!==0&&(_f(r,i),Ol(i,null,null,s),Ll()),g=r.memoizedState,b=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Ma(i,Hr,u)):(u=b.cache,Ma(i,Hr,u),u!==g.cache&&yf(i,[Hr],s,!0))),nn(r,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function da(r){r.flags|=4}function dy(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!b1(i)){if(i=mi.current,i!==null&&((Dt&4194048)===Dt?Vi!==null:(Dt&62914560)!==Dt&&(Dt&536870912)===0||i!==Vi))throw Wl=Cf,Yx;r.flags|=8192}}function Kd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?at():536870912,r.lanes|=i,Is|=i)}function Ul(r,i){if(!Pt)switch(r.tailMode){case"hidden":i=r.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?r.tail=null:s.sibling=null;break;case"collapsed":s=r.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function gr(r){var i=r.alternate!==null&&r.alternate.child===r.child,s=0,u=0;if(i)for(var g=r.child;g!==null;)s|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)s|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=s,i}function Z3(r,i,s){var u=i.pendingProps;switch(gf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(i),null;case 1:return gr(i),null;case 3:return s=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oa(Hr),ge(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(r===null||r.child===null)&&(zl(i)?da(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Nx())),gr(i),null;case 26:return s=i.memoizedState,r===null?(da(i),s!==null?(gr(i),dy(i,s)):(gr(i),i.flags&=-16777217)):s?s!==r.memoizedState?(da(i),gr(i),dy(i,s)):(gr(i),i.flags&=-16777217):(r.memoizedProps!==u&&da(i),gr(i),i.flags&=-16777217),null;case 27:it(i),s=K.current;var g=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&da(i);else{if(!u){if(i.stateNode===null)throw Error(l(166));return gr(i),null}r=fe.current,zl(i)?Px(i):(r=d1(g,u,s),i.stateNode=r,da(i))}return gr(i),null;case 5:if(it(i),s=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&da(i);else{if(!u){if(i.stateNode===null)throw Error(l(166));return gr(i),null}if(r=fe.current,zl(i))Px(i);else{switch(g=du(K.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?g.createElement(s,{is:u.is}):g.createElement(s)}}r[Oe]=i,r[Ze]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=r;e:switch(on(r,s,u),s){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&da(i)}}return gr(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&da(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(l(166));if(r=K.current,zl(i)){if(r=i.stateNode,s=i.memoizedProps,u=null,g=Sn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Oe]=i,r=!!(r.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||n1(r.nodeValue,s)),r||So(i)}else r=du(r).createTextNode(u),r[Oe]=i,i.stateNode=r}return gr(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=zl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(l(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(l(317));g[Oe]=i}else El(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gr(i),g=!1}else g=Nx(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(la(i),i):(la(i),null)}if(la(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=u!==null,r=r!==null&&r.memoizedState!==null,s){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var b=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==g&&(u.flags|=2048)}return s!==r&&s&&(i.child.flags|=8192),Kd(i,i.updateQueue),gr(i),null;case 4:return ge(),r===null&&zp(i.stateNode.containerInfo),gr(i),null;case 10:return oa(i.type),gr(i),null;case 19:if(ie(Ur),g=i.memoizedState,g===null)return gr(i),null;if(u=(i.flags&128)!==0,b=g.rendering,b===null)if(u)Ul(g,!1);else{if(zr!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(b=qd(r),b!==null){for(i.flags|=128,Ul(g,!1),r=b.updateQueue,i.updateQueue=r,Kd(i,r),i.subtreeFlags=0,r=s,s=i.child;s!==null;)Bx(s,r),s=s.sibling;return ue(Ur,Ur.current&1|2),i.child}r=r.sibling}g.tail!==null&&Le()>eu&&(i.flags|=128,u=!0,Ul(g,!1),i.lanes=4194304)}else{if(!u)if(r=qd(b),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Kd(i,r),Ul(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Pt)return gr(i),null}else 2*Le()-g.renderingStartTime>eu&&s!==536870912&&(i.flags|=128,u=!0,Ul(g,!1),i.lanes=4194304);g.isBackwards?(b.sibling=i.child,i.child=b):(r=g.last,r!==null?r.sibling=b:i.child=b,g.last=b)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Le(),i.sibling=null,r=Ur.current,ue(Ur,u?r&1|2:r&1),i):(gr(i),null);case 22:case 23:return la(i),Rf(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(s&536870912)!==0&&(i.flags&128)===0&&(gr(i),i.subtreeFlags&6&&(i.flags|=8192)):gr(i),s=i.updateQueue,s!==null&&Kd(i,s.retryQueue),s=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==s&&(i.flags|=2048),r!==null&&ie(_o),null;case 24:return s=null,r!==null&&(s=r.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),oa(Hr),gr(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function J3(r,i){switch(gf(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return oa(Hr),ge(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return it(i),null;case 13:if(la(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(l(340));El()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ie(Ur),null;case 4:return ge(),null;case 10:return oa(i.type),null;case 22:case 23:return la(i),Rf(),r!==null&&ie(_o),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return oa(Hr),null;case 25:return null;default:return null}}function uy(r,i){switch(gf(i),i.tag){case 3:oa(Hr),ge();break;case 26:case 27:case 5:it(i);break;case 4:ge();break;case 13:la(i);break;case 19:ie(Ur);break;case 10:oa(i.type);break;case 22:case 23:la(i),Rf(),r!==null&&ie(_o);break;case 24:oa(Hr)}}function Vl(r,i){try{var s=i.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var g=u.next;s=g;do{if((s.tag&r)===r){u=void 0;var b=s.create,D=s.inst;u=b(),D.destroy=u}s=s.next}while(s!==g)}}catch(Z){rr(i,i.return,Z)}}function Ba(r,i,s){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var b=g.next;u=b;do{if((u.tag&r)===r){var D=u.inst,Z=D.destroy;if(Z!==void 0){D.destroy=void 0,g=i;var ce=s,we=Z;try{we()}catch(Ee){rr(g,ce,Ee)}}}u=u.next}while(u!==b)}}catch(Ee){rr(i,i.return,Ee)}}function hy(r){var i=r.updateQueue;if(i!==null){var s=r.stateNode;try{Jx(i,s)}catch(u){rr(r,r.return,u)}}}function fy(r,i,s){s.props=zo(r.type,r.memoizedProps),s.state=r.memoizedState;try{s.componentWillUnmount()}catch(u){rr(r,i,u)}}function ql(r,i){try{var s=r.ref;if(s!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof s=="function"?r.refCleanup=s(u):s.current=u}}catch(g){rr(r,i,g)}}function qi(r,i){var s=r.ref,u=r.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(g){rr(r,i,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(g){rr(r,i,g)}else s.current=null}function py(r){var i=r.type,s=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(g){rr(r,r.return,g)}}function np(r,i,s){try{var u=r.stateNode;vk(u,r.type,s,i),u[Ze]=i}catch(g){rr(r,r.return,g)}}function gy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&qa(r.type)||r.tag===4}function ip(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||gy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&qa(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ap(r,i,s){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(r,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(r),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=cu));else if(u!==4&&(u===27&&qa(r.type)&&(s=r.stateNode,i=null),r=r.child,r!==null))for(ap(r,i,s),r=r.sibling;r!==null;)ap(r,i,s),r=r.sibling}function Zd(r,i,s){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?s.insertBefore(r,i):s.appendChild(r);else if(u!==4&&(u===27&&qa(r.type)&&(s=r.stateNode),r=r.child,r!==null))for(Zd(r,i,s),r=r.sibling;r!==null;)Zd(r,i,s),r=r.sibling}function my(r){var i=r.stateNode,s=r.memoizedProps;try{for(var u=r.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);on(i,u,s),i[Oe]=r,i[Ze]=s}catch(b){rr(r,r.return,b)}}var ua=!1,Ir=!1,op=!1,xy=typeof WeakSet=="function"?WeakSet:Set,Kr=null;function ek(r,i){if(r=r.containerInfo,Tp=mu,r=Ex(r),nf(r)){if("selectionStart"in r)var s={start:r.selectionStart,end:r.selectionEnd};else e:{s=(s=r.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var g=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{s.nodeType,b.nodeType}catch(lt){s=null;break e}var D=0,Z=-1,ce=-1,we=0,Ee=0,Me=r,Se=null;t:for(;;){for(var Ce;Me!==s||g!==0&&Me.nodeType!==3||(Z=D+g),Me!==b||u!==0&&Me.nodeType!==3||(ce=D+u),Me.nodeType===3&&(D+=Me.nodeValue.length),(Ce=Me.firstChild)!==null;)Se=Me,Me=Ce;for(;;){if(Me===r)break t;if(Se===s&&++we===g&&(Z=D),Se===b&&++Ee===u&&(ce=D),(Ce=Me.nextSibling)!==null)break;Me=Se,Se=Me.parentNode}Me=Ce}s=Z===-1||ce===-1?null:{start:Z,end:ce}}else s=null}s=s||{start:0,end:0}}else s=null;for(Mp={focusedElem:r,selectionRange:s},mu=!1,Kr=i;Kr!==null;)if(i=Kr,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Kr=r;else for(;Kr!==null;){switch(i=Kr,b=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,s=i,g=b.memoizedProps,b=b.memoizedState,u=s.stateNode;try{var ut=zo(s.type,g,s.elementType===s.type);r=u.getSnapshotBeforeUpdate(ut,b),u.__reactInternalSnapshotBeforeUpdate=r}catch(lt){rr(s,s.return,lt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,s=r.nodeType,s===9)Wp(r);else if(s===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Wp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(l(163))}if(r=i.sibling,r!==null){r.return=i.return,Kr=r;break}Kr=i.return}}function by(r,i,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Fa(r,s),u&4&&Vl(5,s);break;case 1:if(Fa(r,s),u&4)if(r=s.stateNode,i===null)try{r.componentDidMount()}catch(D){rr(s,s.return,D)}else{var g=zo(s.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(g,i,r.__reactInternalSnapshotBeforeUpdate)}catch(D){rr(s,s.return,D)}}u&64&&hy(s),u&512&&ql(s,s.return);break;case 3:if(Fa(r,s),u&64&&(r=s.updateQueue,r!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{Jx(r,i)}catch(D){rr(s,s.return,D)}}break;case 27:i===null&&u&4&&my(s);case 26:case 5:Fa(r,s),i===null&&u&4&&py(s),u&512&&ql(s,s.return);break;case 12:Fa(r,s);break;case 13:Fa(r,s),u&4&&wy(r,s),u&64&&(r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(s=ck.bind(null,s),zk(r,s))));break;case 22:if(u=s.memoizedState!==null||ua,!u){i=i!==null&&i.memoizedState!==null||Ir,g=ua;var b=Ir;ua=u,(Ir=i)&&!b?Pa(r,s,(s.subtreeFlags&8772)!==0):Fa(r,s),ua=g,Ir=b}break;case 30:break;default:Fa(r,s)}}function yy(r){var i=r.alternate;i!==null&&(r.alternate=null,yy(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ri(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ur=null,Mn=!1;function ha(r,i,s){for(s=s.child;s!==null;)vy(r,i,s),s=s.sibling}function vy(r,i,s){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(xn,s)}catch(b){}switch(s.tag){case 26:Ir||qi(s,i),ha(r,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ir||qi(s,i);var u=ur,g=Mn;qa(s.type)&&(ur=s.stateNode,Mn=!1),ha(r,i,s),tc(s.stateNode),ur=u,Mn=g;break;case 5:Ir||qi(s,i);case 6:if(u=ur,g=Mn,ur=null,ha(r,i,s),ur=u,Mn=g,ur!==null)if(Mn)try{(ur.nodeType===9?ur.body:ur.nodeName==="HTML"?ur.ownerDocument.body:ur).removeChild(s.stateNode)}catch(b){rr(s,i,b)}else try{ur.removeChild(s.stateNode)}catch(b){rr(s,i,b)}break;case 18:ur!==null&&(Mn?(r=ur,l1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.stateNode),cc(r)):l1(ur,s.stateNode));break;case 4:u=ur,g=Mn,ur=s.stateNode.containerInfo,Mn=!0,ha(r,i,s),ur=u,Mn=g;break;case 0:case 11:case 14:case 15:Ir||Ba(2,s,i),Ir||Ba(4,s,i),ha(r,i,s);break;case 1:Ir||(qi(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"&&fy(s,i,u)),ha(r,i,s);break;case 21:ha(r,i,s);break;case 22:Ir=(u=Ir)||s.memoizedState!==null,ha(r,i,s),Ir=u;break;default:ha(r,i,s)}}function wy(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{cc(r)}catch(s){rr(i,i.return,s)}}function tk(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new xy),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new xy),i;default:throw Error(l(435,r.tag))}}function sp(r,i){var s=tk(r);i.forEach(function(u){var g=dk.bind(null,r,u);s.has(u)||(s.add(u),u.then(g,g))})}function Vn(r,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var g=s[u],b=r,D=i,Z=D;e:for(;Z!==null;){switch(Z.tag){case 27:if(qa(Z.type)){ur=Z.stateNode,Mn=!1;break e}break;case 5:ur=Z.stateNode,Mn=!1;break e;case 3:case 4:ur=Z.stateNode.containerInfo,Mn=!0;break e}Z=Z.return}if(ur===null)throw Error(l(160));vy(b,D,g),ur=null,Mn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Sy(i,r),i=i.sibling}var Mi=null;function Sy(r,i){var s=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Vn(i,r),qn(r),u&4&&(Ba(3,r,r.return),Vl(3,r),Ba(5,r,r.return));break;case 1:Vn(i,r),qn(r),u&512&&(Ir||s===null||qi(s,s.return)),u&64&&ua&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(s=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var g=Mi;if(Vn(i,r),qn(r),u&512&&(Ir||s===null||qi(s,s.return)),u&4){var b=s!==null?s.memoizedState:null;if(u=r.memoizedState,s===null)if(u===null)if(r.stateNode===null){e:{u=r.type,s=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Mt]||b[Oe]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(u),g.head.insertBefore(b,g.querySelector("head > title"))),on(b,u,s),b[Oe]=r,et(b),u=b;break e;case"link":var D=m1("link","href",g).get(u+(s.href||""));if(D){for(var Z=0;Z<D.length;Z++)if(b=D[Z],b.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&b.getAttribute("rel")===(s.rel==null?null:s.rel)&&b.getAttribute("title")===(s.title==null?null:s.title)&&b.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){D.splice(Z,1);break t}}b=g.createElement(u),on(b,u,s),g.head.appendChild(b);break;case"meta":if(D=m1("meta","content",g).get(u+(s.content||""))){for(Z=0;Z<D.length;Z++)if(b=D[Z],b.getAttribute("content")===(s.content==null?null:""+s.content)&&b.getAttribute("name")===(s.name==null?null:s.name)&&b.getAttribute("property")===(s.property==null?null:s.property)&&b.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&b.getAttribute("charset")===(s.charSet==null?null:s.charSet)){D.splice(Z,1);break t}}b=g.createElement(u),on(b,u,s),g.head.appendChild(b);break;default:throw Error(l(468,u))}b[Oe]=r,et(b),u=b}r.stateNode=u}else x1(g,r.type,r.stateNode);else r.stateNode=g1(g,u,r.memoizedProps);else b!==u?(b===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):b.count--,u===null?x1(g,r.type,r.stateNode):g1(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&np(r,r.memoizedProps,s.memoizedProps)}break;case 27:Vn(i,r),qn(r),u&512&&(Ir||s===null||qi(s,s.return)),s!==null&&u&4&&np(r,r.memoizedProps,s.memoizedProps);break;case 5:if(Vn(i,r),qn(r),u&512&&(Ir||s===null||qi(s,s.return)),r.flags&32){g=r.stateNode;try{ds(g,"")}catch(Ce){rr(r,r.return,Ce)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,np(r,g,s!==null?s.memoizedProps:g)),u&1024&&(op=!0);break;case 6:if(Vn(i,r),qn(r),u&4){if(r.stateNode===null)throw Error(l(162));u=r.memoizedProps,s=r.stateNode;try{s.nodeValue=u}catch(Ce){rr(r,r.return,Ce)}}break;case 3:if(fu=null,g=Mi,Mi=uu(i.containerInfo),Vn(i,r),Mi=g,qn(r),u&4&&s!==null&&s.memoizedState.isDehydrated)try{cc(i.containerInfo)}catch(Ce){rr(r,r.return,Ce)}op&&(op=!1,Cy(r));break;case 4:u=Mi,Mi=uu(r.stateNode.containerInfo),Vn(i,r),qn(r),Mi=u;break;case 12:Vn(i,r),qn(r);break;case 13:Vn(i,r),qn(r),r.child.flags&8192&&r.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(fp=Le()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,sp(r,u)));break;case 22:g=r.memoizedState!==null;var ce=s!==null&&s.memoizedState!==null,we=ua,Ee=Ir;if(ua=we||g,Ir=Ee||ce,Vn(i,r),Ir=Ee,ua=we,qn(r),u&8192)e:for(i=r.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(s===null||ce||ua||Ir||Eo(r)),s=null,i=r;;){if(i.tag===5||i.tag===26){if(s===null){ce=s=i;try{if(b=ce.stateNode,g)D=b.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{Z=ce.stateNode;var Me=ce.memoizedProps.style,Se=Me!=null&&Me.hasOwnProperty("display")?Me.display:null;Z.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Ce){rr(ce,ce.return,Ce)}}}else if(i.tag===6){if(s===null){ce=i;try{ce.stateNode.nodeValue=g?"":ce.memoizedProps}catch(Ce){rr(ce,ce.return,Ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,sp(r,s))));break;case 19:Vn(i,r),qn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,sp(r,u)));break;case 30:break;case 21:break;default:Vn(i,r),qn(r)}}function qn(r){var i=r.flags;if(i&2){try{for(var s,u=r.return;u!==null;){if(gy(u)){s=u;break}u=u.return}if(s==null)throw Error(l(160));switch(s.tag){case 27:var g=s.stateNode,b=ip(r);Zd(r,b,g);break;case 5:var D=s.stateNode;s.flags&32&&(ds(D,""),s.flags&=-33);var Z=ip(r);Zd(r,Z,D);break;case 3:case 4:var ce=s.stateNode.containerInfo,we=ip(r);ap(r,we,ce);break;default:throw Error(l(161))}}catch(Ee){rr(r,r.return,Ee)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Cy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Cy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Fa(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)by(r,i.alternate,i),i=i.sibling}function Eo(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ba(4,i,i.return),Eo(i);break;case 1:qi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&fy(i,i.return,s),Eo(i);break;case 27:tc(i.stateNode);case 26:case 5:qi(i,i.return),Eo(i);break;case 22:i.memoizedState===null&&Eo(i);break;case 30:Eo(i);break;default:Eo(i)}r=r.sibling}}function Pa(r,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=r,b=i,D=b.flags;switch(b.tag){case 0:case 11:case 15:Pa(g,b,s),Vl(4,b);break;case 1:if(Pa(g,b,s),u=b,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(we){rr(u,u.return,we)}if(u=b,g=u.updateQueue,g!==null){var Z=u.stateNode;try{var ce=g.shared.hiddenCallbacks;if(ce!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ce.length;g++)Zx(ce[g],Z)}catch(we){rr(u,u.return,we)}}s&&D&64&&hy(b),ql(b,b.return);break;case 27:my(b);case 26:case 5:Pa(g,b,s),s&&u===null&&D&4&&py(b),ql(b,b.return);break;case 12:Pa(g,b,s);break;case 13:Pa(g,b,s),s&&D&4&&wy(g,b);break;case 22:b.memoizedState===null&&Pa(g,b,s),ql(b,b.return);break;case 30:break;default:Pa(g,b,s)}i=i.sibling}}function lp(r,i){var s=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(r!=null&&r.refCount++,s!=null&&Ml(s))}function cp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r))}function Yi(r,i,s,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ky(r,i,s,u),i=i.sibling}function ky(r,i,s,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Yi(r,i,s,u),g&2048&&Vl(9,i);break;case 1:Yi(r,i,s,u);break;case 3:Yi(r,i,s,u),g&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r)));break;case 12:if(g&2048){Yi(r,i,s,u),r=i.stateNode;try{var b=i.memoizedProps,D=b.id,Z=b.onPostCommit;typeof Z=="function"&&Z(D,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ce){rr(i,i.return,ce)}}else Yi(r,i,s,u);break;case 13:Yi(r,i,s,u);break;case 23:break;case 22:b=i.stateNode,D=i.alternate,i.memoizedState!==null?b._visibility&2?Yi(r,i,s,u):Yl(r,i):b._visibility&2?Yi(r,i,s,u):(b._visibility|=2,Rs(r,i,s,u,(i.subtreeFlags&10256)!==0)),g&2048&&lp(D,i);break;case 24:Yi(r,i,s,u),g&2048&&cp(i.alternate,i);break;default:Yi(r,i,s,u)}}function Rs(r,i,s,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var b=r,D=i,Z=s,ce=u,we=D.flags;switch(D.tag){case 0:case 11:case 15:Rs(b,D,Z,ce,g),Vl(8,D);break;case 23:break;case 22:var Ee=D.stateNode;D.memoizedState!==null?Ee._visibility&2?Rs(b,D,Z,ce,g):Yl(b,D):(Ee._visibility|=2,Rs(b,D,Z,ce,g)),g&&we&2048&&lp(D.alternate,D);break;case 24:Rs(b,D,Z,ce,g),g&&we&2048&&cp(D.alternate,D);break;default:Rs(b,D,Z,ce,g)}i=i.sibling}}function Yl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=r,u=i,g=u.flags;switch(u.tag){case 22:Yl(s,u),g&2048&&lp(u.alternate,u);break;case 24:Yl(s,u),g&2048&&cp(u.alternate,u);break;default:Yl(s,u)}i=i.sibling}}var Ql=8192;function Ts(r){if(r.subtreeFlags&Ql)for(r=r.child;r!==null;)_y(r),r=r.sibling}function _y(r){switch(r.tag){case 26:Ts(r),r.flags&Ql&&r.memoizedState!==null&&Pk(Mi,r.memoizedState,r.memoizedProps);break;case 5:Ts(r);break;case 3:case 4:var i=Mi;Mi=uu(r.stateNode.containerInfo),Ts(r),Mi=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Ql,Ql=16777216,Ts(r),Ql=i):Ts(r));break;default:Ts(r)}}function Ay(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Gl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];Kr=u,Ey(u,r)}Ay(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zy(r),r=r.sibling}function zy(r){switch(r.tag){case 0:case 11:case 15:Gl(r),r.flags&2048&&Ba(9,r,r.return);break;case 3:Gl(r);break;case 12:Gl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Jd(r)):Gl(r);break;default:Gl(r)}}function Jd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];Kr=u,Ey(u,r)}Ay(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ba(8,i,i.return),Jd(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Jd(i));break;default:Jd(i)}r=r.sibling}}function Ey(r,i){for(;Kr!==null;){var s=Kr;switch(s.tag){case 0:case 11:case 15:Ba(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ml(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,Kr=u;else e:for(s=r;Kr!==null;){u=Kr;var g=u.sibling,b=u.return;if(yy(u),u===s){Kr=null;break e}if(g!==null){g.return=b,Kr=g;break e}Kr=b}}}var rk={getCacheForType:function(r){var i=fn(Hr),s=i.data.get(r);return s===void 0&&(s=r(),i.data.set(r,s)),s}},nk=typeof WeakMap=="function"?WeakMap:Map,Yt=0,sr=null,_t=null,Dt=0,Qt=0,Yn=null,ja=!1,Ms=!1,dp=!1,fa=0,zr=0,Na=0,Ro=0,up=0,xi=0,Is=0,Xl=null,In=null,hp=!1,fp=0,eu=1/0,tu=null,Ha=null,an=0,Ua=null,Ds=null,Ws=0,pp=0,gp=null,Ry=null,Kl=0,mp=null;function Qn(){if((Yt&2)!==0&&Dt!==0)return Dt&-Dt;if(E.T!==null){var r=ws;return r!==0?r:Cp()}return si()}function Ty(){xi===0&&(xi=(Dt&536870912)===0||Pt?He():536870912);var r=mi.current;return r!==null&&(r.flags|=32),xi}function Gn(r,i,s){(r===sr&&(Qt===2||Qt===9)||r.cancelPendingCommit!==null)&&($s(r,0),Va(r,Dt,xi,!1)),dr(r,s),((Yt&2)===0||r!==sr)&&(r===sr&&((Yt&2)===0&&(Ro|=s),zr===4&&Va(r,Dt,xi,!1)),Qi(r))}function My(r,i,s){if((Yt&6)!==0)throw Error(l(327));var u=!s&&(i&124)===0&&(i&r.expiredLanes)===0||tt(r,i),g=u?ok(r,i):yp(r,i,!0),b=u;do{if(g===0){Ms&&!u&&Va(r,i,0,!1);break}else{if(s=r.current.alternate,b&&!ik(s)){g=yp(r,i,!1),b=!1;continue}if(g===2){if(b=i,r.errorRecoveryDisabledLanes&b)var D=0;else D=r.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){i=D;e:{var Z=r;g=Xl;var ce=Z.current.memoizedState.isDehydrated;if(ce&&($s(Z,D).flags|=256),D=yp(Z,D,!1),D!==2){if(dp&&!ce){Z.errorRecoveryDisabledLanes|=b,Ro|=b,g=4;break e}b=In,In=g,b!==null&&(In===null?In=b:In.push.apply(In,b))}g=D}if(b=!1,g!==2)continue}}if(g===1){$s(r,0),Va(r,i,0,!0);break}e:{switch(u=r,b=g,b){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:Va(u,i,xi,!ja);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(g=fp+300-Le(),10<g)){if(Va(u,i,xi,!ja),Ke(u,0,!0)!==0)break e;u.timeoutHandle=o1(Iy.bind(null,u,s,In,tu,hp,i,xi,Ro,Is,ja,b,2,-0,0),g);break e}Iy(u,s,In,tu,hp,i,xi,Ro,Is,ja,b,0,-0,0)}}break}while(!0);Qi(r)}function Iy(r,i,s,u,g,b,D,Z,ce,we,Ee,Me,Se,Ce){if(r.timeoutHandle=-1,Me=i.subtreeFlags,(Me&8192||(Me&16785408)===16785408)&&(ic={stylesheets:null,count:0,unsuspend:Fk},_y(i),Me=jk(),Me!==null)){r.cancelPendingCommit=Me(Fy.bind(null,r,i,b,s,u,g,D,Z,ce,Ee,1,Se,Ce)),Va(r,b,D,!we);return}Fy(r,i,b,s,u,g,D,Z,ce)}function ik(r){for(var i=r;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var g=s[u],b=g.getSnapshot;g=g.value;try{if(!Hn(b(),g))return!1}catch(D){return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Va(r,i,s,u){i&=~up,i&=~Ro,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var g=i;0<g;){var b=31-Re(g),D=1<<b;u[b]=-1,g&=~D}s!==0&&Pe(r,s,i)}function ru(){return(Yt&6)===0?(Zl(0),!1):!0}function xp(){if(_t!==null){if(Qt===0)var r=_t.return;else r=_t,aa=Co=null,Wf(r),zs=null,Nl=0,r=_t;for(;r!==null;)uy(r.alternate,r),r=r.return;_t=null}}function $s(r,i){var s=r.timeoutHandle;s!==-1&&(r.timeoutHandle=-1,Sk(s)),s=r.cancelPendingCommit,s!==null&&(r.cancelPendingCommit=null,s()),xp(),sr=r,_t=s=ra(r.current,null),Dt=i,Qt=0,Yn=null,ja=!1,Ms=tt(r,i),dp=!1,Is=xi=up=Ro=Na=zr=0,In=Xl=null,hp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var g=31-Re(u),b=1<<g;i|=r[g],u&=~b}return fa=i,kd(),s}function Dy(r,i){vt=null,E.H=Hd,i===Dl||i===Dd?(i=Xx(),Qt=3):i===Yx?(i=Xx(),Qt=4):Qt=i===Kb?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Yn=i,_t===null&&(zr=1,Qd(r,hi(i,r.current)))}function Wy(){var r=E.H;return E.H=Hd,r===null?Hd:r}function $y(){var r=E.A;return E.A=rk,r}function bp(){zr=4,ja||(Dt&4194048)!==Dt&&mi.current!==null||(Ms=!0),(Na&134217727)===0&&(Ro&134217727)===0||sr===null||Va(sr,Dt,xi,!1)}function yp(r,i,s){var u=Yt;Yt|=2;var g=Wy(),b=$y();(sr!==r||Dt!==i)&&(tu=null,$s(r,i)),i=!1;var D=zr;e:do try{if(Qt!==0&&_t!==null){var Z=_t,ce=Yn;switch(Qt){case 8:xp(),D=6;break e;case 3:case 2:case 9:case 6:mi.current===null&&(i=!0);var we=Qt;if(Qt=0,Yn=null,Ls(r,Z,ce,we),s&&Ms){D=0;break e}break;default:we=Qt,Qt=0,Yn=null,Ls(r,Z,ce,we)}}ak(),D=zr;break}catch(Ee){Dy(r,Ee)}while(!0);return i&&r.shellSuspendCounter++,aa=Co=null,Yt=u,E.H=g,E.A=b,_t===null&&(sr=null,Dt=0,kd()),D}function ak(){for(;_t!==null;)Ly(_t)}function ok(r,i){var s=Yt;Yt|=2;var u=Wy(),g=$y();sr!==r||Dt!==i?(tu=null,eu=Le()+500,$s(r,i)):Ms=tt(r,i);e:do try{if(Qt!==0&&_t!==null){i=_t;var b=Yn;t:switch(Qt){case 1:Qt=0,Yn=null,Ls(r,i,b,1);break;case 2:case 9:if(Qx(b)){Qt=0,Yn=null,Oy(i);break}i=function(){Qt!==2&&Qt!==9||sr!==r||(Qt=7),Qi(r)},b.then(i,i);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:Qx(b)?(Qt=0,Yn=null,Oy(i)):(Qt=0,Yn=null,Ls(r,i,b,7));break;case 5:var D=null;switch(_t.tag){case 26:D=_t.memoizedState;case 5:case 27:var Z=_t;if(!D||b1(D)){Qt=0,Yn=null;var ce=Z.sibling;if(ce!==null)_t=ce;else{var we=Z.return;we!==null?(_t=we,nu(we)):_t=null}break t}}Qt=0,Yn=null,Ls(r,i,b,5);break;case 6:Qt=0,Yn=null,Ls(r,i,b,6);break;case 8:xp(),zr=6;break e;default:throw Error(l(462))}}sk();break}catch(Ee){Dy(r,Ee)}while(!0);return aa=Co=null,E.H=u,E.A=g,Yt=s,_t!==null?0:(sr=null,Dt=0,kd(),zr)}function sk(){for(;_t!==null&&!Ft();)Ly(_t)}function Ly(r){var i=cy(r.alternate,r,fa);r.memoizedProps=r.pendingProps,i===null?nu(r):_t=i}function Oy(r){var i=r,s=i.alternate;switch(i.tag){case 15:case 0:i=ny(s,i,i.pendingProps,i.type,void 0,Dt);break;case 11:i=ny(s,i,i.pendingProps,i.type.render,i.ref,Dt);break;case 5:Wf(i);default:uy(s,i),i=_t=Bx(i,fa),i=cy(s,i,fa)}r.memoizedProps=r.pendingProps,i===null?nu(r):_t=i}function Ls(r,i,s,u){aa=Co=null,Wf(i),zs=null,Nl=0;var g=i.return;try{if(X3(r,g,i,s,Dt)){zr=1,Qd(r,hi(s,r.current)),_t=null;return}}catch(b){if(g!==null)throw _t=g,b;zr=1,Qd(r,hi(s,r.current)),_t=null;return}i.flags&32768?(Pt||u===1?r=!0:Ms||(Dt&536870912)!==0?r=!1:(ja=r=!0,(u===2||u===9||u===3||u===6)&&(u=mi.current,u!==null&&u.tag===13&&(u.flags|=16384))),By(i,r)):nu(i)}function nu(r){var i=r;do{if((i.flags&32768)!==0){By(i,ja);return}r=i.return;var s=Z3(i.alternate,i,fa);if(s!==null){_t=s;return}if(i=i.sibling,i!==null){_t=i;return}_t=i=r}while(i!==null);zr===0&&(zr=5)}function By(r,i){do{var s=J3(r.alternate,r);if(s!==null){s.flags&=32767,_t=s;return}if(s=r.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(r=r.sibling,r!==null)){_t=r;return}_t=r=s}while(r!==null);zr=6,_t=null}function Fy(r,i,s,u,g,b,D,Z,ce){r.cancelPendingCommit=null;do iu();while(an!==0);if((Yt&6)!==0)throw Error(l(327));if(i!==null){if(i===r.current)throw Error(l(177));if(b=i.lanes|i.childLanes,b|=cf,Ue(r,s,b,D,Z,ce),r===sr&&(_t=sr=null,Dt=0),Ds=i,Ua=r,Ws=s,pp=b,gp=g,Ry=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uk(hn,function(){return Uy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=E.T,E.T=null,g=I.p,I.p=2,D=Yt,Yt|=4;try{ek(r,i,s)}finally{Yt=D,I.p=g,E.T=u}}an=1,Py(),jy(),Ny()}}function Py(){if(an===1){an=0;var r=Ua,i=Ds,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=E.T,E.T=null;var u=I.p;I.p=2;var g=Yt;Yt|=4;try{Sy(i,r);var b=Mp,D=Ex(r.containerInfo),Z=b.focusedElem,ce=b.selectionRange;if(D!==Z&&Z&&Z.ownerDocument&&zx(Z.ownerDocument.documentElement,Z)){if(ce!==null&&nf(Z)){var we=ce.start,Ee=ce.end;if(Ee===void 0&&(Ee=we),"selectionStart"in Z)Z.selectionStart=we,Z.selectionEnd=Math.min(Ee,Z.value.length);else{var Me=Z.ownerDocument||document,Se=Me&&Me.defaultView||window;if(Se.getSelection){var Ce=Se.getSelection(),ut=Z.textContent.length,lt=Math.min(ce.start,ut),Jt=ce.end===void 0?lt:Math.min(ce.end,ut);!Ce.extend&&lt>Jt&&(D=Jt,Jt=lt,lt=D);var me=Ax(Z,lt),he=Ax(Z,Jt);if(me&&he&&(Ce.rangeCount!==1||Ce.anchorNode!==me.node||Ce.anchorOffset!==me.offset||Ce.focusNode!==he.node||Ce.focusOffset!==he.offset)){var ye=Me.createRange();ye.setStart(me.node,me.offset),Ce.removeAllRanges(),lt>Jt?(Ce.addRange(ye),Ce.extend(he.node,he.offset)):(ye.setEnd(he.node,he.offset),Ce.addRange(ye))}}}}for(Me=[],Ce=Z;Ce=Ce.parentNode;)Ce.nodeType===1&&Me.push({element:Ce,left:Ce.scrollLeft,top:Ce.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Me.length;Z++){var Te=Me[Z];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}mu=!!Tp,Mp=Tp=null}finally{Yt=g,I.p=u,E.T=s}}r.current=i,an=2}}function jy(){if(an===2){an=0;var r=Ua,i=Ds,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=E.T,E.T=null;var u=I.p;I.p=2;var g=Yt;Yt|=4;try{by(r,i.alternate,i)}finally{Yt=g,I.p=u,E.T=s}}an=3}}function Ny(){if(an===4||an===3){an=0,kr();var r=Ua,i=Ds,s=Ws,u=Ry;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?an=5:(an=0,Ds=Ua=null,Hy(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Ha=null),Ve(s),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(xn,i,void 0,(i.current.flags&128)===128)}catch(ce){}if(u!==null){i=E.T,g=I.p,I.p=2,E.T=null;try{for(var b=r.onRecoverableError,D=0;D<u.length;D++){var Z=u[D];b(Z.value,{componentStack:Z.stack})}}finally{E.T=i,I.p=g}}(Ws&3)!==0&&iu(),Qi(r),g=r.pendingLanes,(s&4194090)!==0&&(g&42)!==0?r===mp?Kl++:(Kl=0,mp=r):Kl=0,Zl(0)}}function Hy(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Ml(i)))}function iu(r){return Py(),jy(),Ny(),Uy()}function Uy(){if(an!==5)return!1;var r=Ua,i=pp;pp=0;var s=Ve(Ws),u=E.T,g=I.p;try{I.p=32>s?32:s,E.T=null,s=gp,gp=null;var b=Ua,D=Ws;if(an=0,Ds=Ua=null,Ws=0,(Yt&6)!==0)throw Error(l(331));var Z=Yt;if(Yt|=4,zy(b.current),ky(b,b.current,D,s),Yt=Z,Zl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(xn,b)}catch(ce){}return!0}finally{I.p=g,E.T=u,Hy(r,i)}}function Vy(r,i,s){i=hi(s,i),i=Qf(r.stateNode,i,2),r=Wa(r,i,2),r!==null&&(dr(r,2),Qi(r))}function rr(r,i,s){if(r.tag===3)Vy(r,r,s);else for(;i!==null;){if(i.tag===3){Vy(i,r,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ha===null||!Ha.has(u))){r=hi(s,r),s=Gb(2),u=Wa(i,s,2),u!==null&&(Xb(s,u,i,r),dr(u,2),Qi(u));break}}i=i.return}}function vp(r,i,s){var u=r.pingCache;if(u===null){u=r.pingCache=new nk;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(s)||(dp=!0,g.add(s),r=lk.bind(null,r,i,s),i.then(r,r))}function lk(r,i,s){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&s,r.warmLanes&=~s,sr===r&&(Dt&s)===s&&(zr===4||zr===3&&(Dt&62914560)===Dt&&300>Le()-fp?(Yt&2)===0&&$s(r,0):up|=s,Is===Dt&&(Is=0)),Qi(r)}function qy(r,i){i===0&&(i=at()),r=xs(r,i),r!==null&&(dr(r,i),Qi(r))}function ck(r){var i=r.memoizedState,s=0;i!==null&&(s=i.retryLane),qy(r,s)}function dk(r,i){var s=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(s=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(l(314))}u!==null&&u.delete(i),qy(r,s)}function uk(r,i){return Cr(r,i)}var au=null,Os=null,wp=!1,ou=!1,Sp=!1,To=0;function Qi(r){r!==Os&&r.next===null&&(Os===null?au=Os=r:Os=Os.next=r),ou=!0,wp||(wp=!0,fk())}function Zl(r,i){if(!Sp&&ou){Sp=!0;do for(var s=!1,u=au;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var b=0;else{var D=u.suspendedLanes,Z=u.pingedLanes;b=(1<<31-Re(42|r)+1)-1,b&=g&~(D&~Z),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(s=!0,Xy(u,b))}else b=Dt,b=Ke(u,u===sr?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||tt(u,b)||(s=!0,Xy(u,b));u=u.next}while(s);Sp=!1}}function hk(){Yy()}function Yy(){ou=wp=!1;var r=0;To!==0&&(wk()&&(r=To),To=0);for(var i=Le(),s=null,u=au;u!==null;){var g=u.next,b=Qy(u,i);b===0?(u.next=null,s===null?au=g:s.next=g,g===null&&(Os=s)):(s=u,(r!==0||(b&3)!==0)&&(ou=!0)),u=g}Zl(r)}function Qy(r,i){for(var s=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var D=31-Re(b),Z=1<<D,ce=g[D];ce===-1?((Z&s)===0||(Z&u)!==0)&&(g[D]=$e(Z,i)):ce<=i&&(r.expiredLanes|=Z),b&=~Z}if(i=sr,s=Dt,s=Ke(r,r===i?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,s===0||r===i&&(Qt===2||Qt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ne(u),r.callbackNode=null,r.callbackPriority=0;if((s&3)===0||tt(r,s)){if(i=s&-s,i===r.callbackPriority)return i;switch(u!==null&&Ne(u),Ve(s)){case 2:case 8:s=jn;break;case 32:s=hn;break;case 268435456:s=qr;break;default:s=hn}return u=Gy.bind(null,r),s=Cr(s,u),r.callbackPriority=i,r.callbackNode=s,i}return u!==null&&u!==null&&Ne(u),r.callbackPriority=2,r.callbackNode=null,2}function Gy(r,i){if(an!==0&&an!==5)return r.callbackNode=null,r.callbackPriority=0,null;var s=r.callbackNode;if(iu()&&r.callbackNode!==s)return null;var u=Dt;return u=Ke(r,r===sr?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(My(r,u,i),Qy(r,Le()),r.callbackNode!=null&&r.callbackNode===s?Gy.bind(null,r):null)}function Xy(r,i){if(iu())return null;My(r,i,!0)}function fk(){Ck(function(){(Yt&6)!==0?Cr(_r,hk):Yy()})}function Cp(){return To===0&&(To=He()),To}function Ky(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:xd(""+r)}function Zy(r,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,r.id&&s.setAttribute("form",r.id),i.parentNode.insertBefore(s,i),r=new FormData(r),s.parentNode.removeChild(s),r}function pk(r,i,s,u,g){if(i==="submit"&&s&&s.stateNode===g){var b=Ky((g[Ze]||null).action),D=u.submitter;D&&(i=(i=D[Ze]||null)?Ky(i.formAction):D.getAttribute("formAction"),i!==null&&(b=i,D=null));var Z=new wd("action","action",null,u,g);r.push({event:Z,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(To!==0){var ce=D?Zy(g,D):new FormData(g);Hf(s,{pending:!0,data:ce,method:g.method,action:b},null,ce)}}else typeof b=="function"&&(Z.preventDefault(),ce=D?Zy(g,D):new FormData(g),Hf(s,{pending:!0,data:ce,method:g.method,action:b},b,ce))},currentTarget:g}]})}}for(var kp=0;kp<lf.length;kp++){var _p=lf[kp],gk=_p.toLowerCase(),mk=_p[0].toUpperCase()+_p.slice(1);Ti(gk,"on"+mk)}Ti(Mx,"onAnimationEnd"),Ti(Ix,"onAnimationIteration"),Ti(Dx,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(D3,"onTransitionRun"),Ti(W3,"onTransitionStart"),Ti($3,"onTransitionCancel"),Ti(Wx,"onTransitionEnd"),En("onMouseEnter",["mouseout","mouseover"]),En("onMouseLeave",["mouseout","mouseover"]),En("onPointerEnter",["pointerout","pointerover"]),En("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function Jy(r,i){i=(i&4)!==0;for(var s=0;s<r.length;s++){var u=r[s],g=u.event;u=u.listeners;e:{var b=void 0;if(i)for(var D=u.length-1;0<=D;D--){var Z=u[D],ce=Z.instance,we=Z.currentTarget;if(Z=Z.listener,ce!==b&&g.isPropagationStopped())break e;b=Z,g.currentTarget=we;try{b(g)}catch(Ee){Yd(Ee)}g.currentTarget=null,b=ce}else for(D=0;D<u.length;D++){if(Z=u[D],ce=Z.instance,we=Z.currentTarget,Z=Z.listener,ce!==b&&g.isPropagationStopped())break e;b=Z,g.currentTarget=we;try{b(g)}catch(Ee){Yd(Ee)}g.currentTarget=null,b=ce}}}}function At(r,i){var s=i[ot];s===void 0&&(s=i[ot]=new Set);var u=r+"__bubble";s.has(u)||(e1(i,r,2,!1),s.add(u))}function Ap(r,i,s){var u=0;i&&(u|=4),e1(s,r,u,i)}var su="_reactListening"+Math.random().toString(36).slice(2);function zp(r){if(!r[su]){r[su]=!0,Gr.forEach(function(s){s!=="selectionchange"&&(xk.has(s)||Ap(s,!1,r),Ap(s,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[su]||(i[su]=!0,Ap("selectionchange",!1,i))}}function e1(r,i,s,u){switch(k1(i)){case 2:var g=Uk;break;case 8:g=Vk;break;default:g=jp}s=g.bind(null,i,s,r),g=void 0,!Qh||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(i,s,{capture:!0,passive:g}):r.addEventListener(i,s,!0):g!==void 0?r.addEventListener(i,s,{passive:g}):r.addEventListener(i,s,!1)}function Ep(r,i,s,u,g){var b=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var D=u.tag;if(D===3||D===4){var Z=u.stateNode.containerInfo;if(Z===g)break;if(D===4)for(D=u.return;D!==null;){var ce=D.tag;if((ce===3||ce===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;Z!==null;){if(D=bn(Z),D===null)return;if(ce=D.tag,ce===5||ce===6||ce===26||ce===27){u=b=D;continue e}Z=Z.parentNode}}u=u.return}sx(function(){var we=b,Ee=qh(s),Me=[];e:{var Se=$x.get(r);if(Se!==void 0){var Ce=wd,ut=r;switch(r){case"keypress":if(yd(s)===0)break e;case"keydown":case"keyup":Ce=u3;break;case"focusin":ut="focus",Ce=Zh;break;case"focusout":ut="blur",Ce=Zh;break;case"beforeblur":case"afterblur":Ce=Zh;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=JC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=p3;break;case Mx:case Ix:case Dx:Ce=r3;break;case Wx:Ce=m3;break;case"scroll":case"scrollend":Ce=KC;break;case"wheel":Ce=b3;break;case"copy":case"cut":case"paste":Ce=i3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=hx;break;case"toggle":case"beforetoggle":Ce=v3}var lt=(i&4)!==0,Jt=!lt&&(r==="scroll"||r==="scrollend"),me=lt?Se!==null?Se+"Capture":null:Se;lt=[];for(var he=we,ye;he!==null;){var Te=he;if(ye=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ye===null||me===null||(Te=bl(he,me),Te!=null&&lt.push(ec(he,Te,ye))),Jt)break;he=he.return}0<lt.length&&(Se=new Ce(Se,ut,null,s,Ee),Me.push({event:Se,listeners:lt}))}}if((i&7)===0){e:{if(Se=r==="mouseover"||r==="pointerover",Ce=r==="mouseout"||r==="pointerout",Se&&s!==Vh&&(ut=s.relatedTarget||s.fromElement)&&(bn(ut)||ut[st]))break e;if((Ce||Se)&&(Se=Ee.window===Ee?Ee:(Se=Ee.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ce?(ut=s.relatedTarget||s.toElement,Ce=we,ut=ut?bn(ut):null,ut!==null&&(Jt=p(ut),lt=ut.tag,ut!==Jt||lt!==5&&lt!==27&&lt!==6)&&(ut=null)):(Ce=null,ut=we),Ce!==ut)){if(lt=dx,Te="onMouseLeave",me="onMouseEnter",he="mouse",(r==="pointerout"||r==="pointerover")&&(lt=hx,Te="onPointerLeave",me="onPointerEnter",he="pointer"),Jt=Ce==null?Se:vn(Ce),ye=ut==null?Se:vn(ut),Se=new lt(Te,he+"leave",Ce,s,Ee),Se.target=Jt,Se.relatedTarget=ye,Te=null,bn(Ee)===we&&(lt=new lt(me,he+"enter",ut,s,Ee),lt.target=ye,lt.relatedTarget=Jt,Te=lt),Jt=Te,Ce&&ut)t:{for(lt=Ce,me=ut,he=0,ye=lt;ye;ye=Bs(ye))he++;for(ye=0,Te=me;Te;Te=Bs(Te))ye++;for(;0<he-ye;)lt=Bs(lt),he--;for(;0<ye-he;)me=Bs(me),ye--;for(;he--;){if(lt===me||me!==null&&lt===me.alternate)break t;lt=Bs(lt),me=Bs(me)}lt=null}else lt=null;Ce!==null&&t1(Me,Se,Ce,lt,!1),ut!==null&&Jt!==null&&t1(Me,Jt,ut,lt,!0)}}e:{if(Se=we?vn(we):window,Ce=Se.nodeName&&Se.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&Se.type==="file")var Ge=vx;else if(bx(Se))if(wx)Ge=T3;else{Ge=E3;var St=z3}else Ce=Se.nodeName,!Ce||Ce.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?we&&Uh(we.elementType)&&(Ge=vx):Ge=R3;if(Ge&&(Ge=Ge(r,we))){yx(Me,Ge,s,Ee);break e}St&&St(r,Se,we),r==="focusout"&&we&&Se.type==="number"&&we.memoizedProps.value!=null&&Hh(Se,"number",Se.value)}switch(St=we?vn(we):window,r){case"focusin":(bx(St)||St.contentEditable==="true")&&(ps=St,af=we,Al=null);break;case"focusout":Al=af=ps=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Rx(Me,s,Ee);break;case"selectionchange":if(I3)break;case"keydown":case"keyup":Rx(Me,s,Ee)}var rt;if(ef)e:{switch(r){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else fs?mx(r,s)&&(dt="onCompositionEnd"):r==="keydown"&&s.keyCode===229&&(dt="onCompositionStart");dt&&(fx&&s.locale!=="ko"&&(fs||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&fs&&(rt=lx()):(Ta=Ee,Gh="value"in Ta?Ta.value:Ta.textContent,fs=!0)),St=lu(we,dt),0<St.length&&(dt=new ux(dt,r,null,s,Ee),Me.push({event:dt,listeners:St}),rt?dt.data=rt:(rt=xx(s),rt!==null&&(dt.data=rt)))),(rt=S3?C3(r,s):k3(r,s))&&(dt=lu(we,"onBeforeInput"),0<dt.length&&(St=new ux("onBeforeInput","beforeinput",null,s,Ee),Me.push({event:St,listeners:dt}),St.data=rt)),pk(Me,r,we,s,Ee)}Jy(Me,i)})}function ec(r,i,s){return{instance:r,listener:i,currentTarget:s}}function lu(r,i){for(var s=i+"Capture",u=[];r!==null;){var g=r,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=bl(r,s),g!=null&&u.unshift(ec(r,g,b)),g=bl(r,i),g!=null&&u.push(ec(r,g,b))),r.tag===3)return u;r=r.return}return[]}function Bs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function t1(r,i,s,u,g){for(var b=i._reactName,D=[];s!==null&&s!==u;){var Z=s,ce=Z.alternate,we=Z.stateNode;if(Z=Z.tag,ce!==null&&ce===u)break;Z!==5&&Z!==26&&Z!==27||we===null||(ce=we,g?(we=bl(s,b),we!=null&&D.unshift(ec(s,we,ce))):g||(we=bl(s,b),we!=null&&D.push(ec(s,we,ce)))),s=s.return}D.length!==0&&r.push({event:i,listeners:D})}var bk=/\r\n?/g,yk=/\u0000|\uFFFD/g;function r1(r){return(typeof r=="string"?r:""+r).replace(bk,`
`).replace(yk,"")}function n1(r,i){return i=r1(i),r1(r)===i}function cu(){}function Zt(r,i,s,u,g,b){switch(s){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||ds(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&ds(r,""+u);break;case"className":po(r,"class",u);break;case"tabIndex":po(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":po(r,s,u);break;case"style":ax(r,u,b);break;case"data":if(i!=="object"){po(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||s!=="href")){r.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(s);break}u=xd(""+u),r.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(s==="formAction"?(i!=="input"&&Zt(r,i,"name",g.name,g,null),Zt(r,i,"formEncType",g.formEncType,g,null),Zt(r,i,"formMethod",g.formMethod,g,null),Zt(r,i,"formTarget",g.formTarget,g,null)):(Zt(r,i,"encType",g.encType,g,null),Zt(r,i,"method",g.method,g,null),Zt(r,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(s);break}u=xd(""+u),r.setAttribute(s,u);break;case"onClick":u!=null&&(r.onclick=cu);break;case"onScroll":u!=null&&At("scroll",r);break;case"onScrollEnd":u!=null&&At("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(l(61));if(s=u.__html,s!=null){if(g.children!=null)throw Error(l(60));r.innerHTML=s}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}s=xd(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(s,""+u):r.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(s,""):r.removeAttribute(s);break;case"capture":case"download":u===!0?r.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(s,u):r.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(s,u):r.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(s):r.setAttribute(s,u);break;case"popover":At("beforetoggle",r),At("toggle",r),fo(r,"popover",u);break;case"xlinkActuate":ci(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ci(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ci(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ci(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ci(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ci(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ci(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ci(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ci(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":fo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=GC.get(s)||s,fo(r,s,u))}}function Rp(r,i,s,u,g,b){switch(s){case"style":ax(r,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(l(61));if(s=u.__html,s!=null){if(g.children!=null)throw Error(l(60));r.innerHTML=s}}break;case"children":typeof u=="string"?ds(r,u):(typeof u=="number"||typeof u=="bigint")&&ds(r,""+u);break;case"onScroll":u!=null&&At("scroll",r);break;case"onScrollEnd":u!=null&&At("scrollend",r);break;case"onClick":u!=null&&(r.onclick=cu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rn.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(g=s.endsWith("Capture"),i=s.slice(2,g?s.length-7:void 0),b=r[Ze]||null,b=b!=null?b[s]:null,typeof b=="function"&&r.removeEventListener(i,b,g),typeof u=="function")){typeof b!="function"&&b!==null&&(s in r?r[s]=null:r.hasAttribute(s)&&r.removeAttribute(s)),r.addEventListener(i,u,g);break e}s in r?r[s]=u:u===!0?r.setAttribute(s,""):fo(r,s,u)}}}function on(r,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",r),At("load",r);var u=!1,g=!1,b;for(b in s)if(s.hasOwnProperty(b)){var D=s[b];if(D!=null)switch(b){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:Zt(r,i,b,D,s,null)}}g&&Zt(r,i,"srcSet",s.srcSet,s,null),u&&Zt(r,i,"src",s.src,s,null);return;case"input":At("invalid",r);var Z=b=D=g=null,ce=null,we=null;for(u in s)if(s.hasOwnProperty(u)){var Ee=s[u];if(Ee!=null)switch(u){case"name":g=Ee;break;case"type":D=Ee;break;case"checked":ce=Ee;break;case"defaultChecked":we=Ee;break;case"value":b=Ee;break;case"defaultValue":Z=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(l(137,i));break;default:Zt(r,i,u,Ee,s,null)}}tx(r,b,Z,ce,we,D,g,!1),gd(r);return;case"select":At("invalid",r),u=D=b=null;for(g in s)if(s.hasOwnProperty(g)&&(Z=s[g],Z!=null))switch(g){case"value":b=Z;break;case"defaultValue":D=Z;break;case"multiple":u=Z;default:Zt(r,i,g,Z,s,null)}i=b,s=D,r.multiple=!!u,i!=null?cs(r,!!u,i,!1):s!=null&&cs(r,!!u,s,!0);return;case"textarea":At("invalid",r),b=g=u=null;for(D in s)if(s.hasOwnProperty(D)&&(Z=s[D],Z!=null))switch(D){case"value":u=Z;break;case"defaultValue":g=Z;break;case"children":b=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(l(91));break;default:Zt(r,i,D,Z,s,null)}nx(r,u,g,b),gd(r);return;case"option":for(ce in s)if(s.hasOwnProperty(ce)&&(u=s[ce],u!=null))switch(ce){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Zt(r,i,ce,u,s,null)}return;case"dialog":At("beforetoggle",r),At("toggle",r),At("cancel",r),At("close",r);break;case"iframe":case"object":At("load",r);break;case"video":case"audio":for(u=0;u<Jl.length;u++)At(Jl[u],r);break;case"image":At("error",r),At("load",r);break;case"details":At("toggle",r);break;case"embed":case"source":case"link":At("error",r),At("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in s)if(s.hasOwnProperty(we)&&(u=s[we],u!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:Zt(r,i,we,u,s,null)}return;default:if(Uh(i)){for(Ee in s)s.hasOwnProperty(Ee)&&(u=s[Ee],u!==void 0&&Rp(r,i,Ee,u,s,void 0));return}}for(Z in s)s.hasOwnProperty(Z)&&(u=s[Z],u!=null&&Zt(r,i,Z,u,s,null))}function vk(r,i,s,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,D=null,Z=null,ce=null,we=null,Ee=null;for(Ce in s){var Me=s[Ce];if(s.hasOwnProperty(Ce)&&Me!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":ce=Me;default:u.hasOwnProperty(Ce)||Zt(r,i,Ce,null,u,Me)}}for(var Se in u){var Ce=u[Se];if(Me=s[Se],u.hasOwnProperty(Se)&&(Ce!=null||Me!=null))switch(Se){case"type":b=Ce;break;case"name":g=Ce;break;case"checked":we=Ce;break;case"defaultChecked":Ee=Ce;break;case"value":D=Ce;break;case"defaultValue":Z=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(l(137,i));break;default:Ce!==Me&&Zt(r,i,Se,Ce,u,Me)}}Nh(r,D,Z,ce,we,Ee,b,g);return;case"select":Ce=D=Z=Se=null;for(b in s)if(ce=s[b],s.hasOwnProperty(b)&&ce!=null)switch(b){case"value":break;case"multiple":Ce=ce;default:u.hasOwnProperty(b)||Zt(r,i,b,null,u,ce)}for(g in u)if(b=u[g],ce=s[g],u.hasOwnProperty(g)&&(b!=null||ce!=null))switch(g){case"value":Se=b;break;case"defaultValue":Z=b;break;case"multiple":D=b;default:b!==ce&&Zt(r,i,g,b,u,ce)}i=Z,s=D,u=Ce,Se!=null?cs(r,!!s,Se,!1):!!u!=!!s&&(i!=null?cs(r,!!s,i,!0):cs(r,!!s,s?[]:"",!1));return;case"textarea":Ce=Se=null;for(Z in s)if(g=s[Z],s.hasOwnProperty(Z)&&g!=null&&!u.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Zt(r,i,Z,null,u,g)}for(D in u)if(g=u[D],b=s[D],u.hasOwnProperty(D)&&(g!=null||b!=null))switch(D){case"value":Se=g;break;case"defaultValue":Ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(l(91));break;default:g!==b&&Zt(r,i,D,g,u,b)}rx(r,Se,Ce);return;case"option":for(var ut in s)if(Se=s[ut],s.hasOwnProperty(ut)&&Se!=null&&!u.hasOwnProperty(ut))switch(ut){case"selected":r.selected=!1;break;default:Zt(r,i,ut,null,u,Se)}for(ce in u)if(Se=u[ce],Ce=s[ce],u.hasOwnProperty(ce)&&Se!==Ce&&(Se!=null||Ce!=null))switch(ce){case"selected":r.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:Zt(r,i,ce,Se,u,Ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in s)Se=s[lt],s.hasOwnProperty(lt)&&Se!=null&&!u.hasOwnProperty(lt)&&Zt(r,i,lt,null,u,Se);for(we in u)if(Se=u[we],Ce=s[we],u.hasOwnProperty(we)&&Se!==Ce&&(Se!=null||Ce!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(l(137,i));break;default:Zt(r,i,we,Se,u,Ce)}return;default:if(Uh(i)){for(var Jt in s)Se=s[Jt],s.hasOwnProperty(Jt)&&Se!==void 0&&!u.hasOwnProperty(Jt)&&Rp(r,i,Jt,void 0,u,Se);for(Ee in u)Se=u[Ee],Ce=s[Ee],!u.hasOwnProperty(Ee)||Se===Ce||Se===void 0&&Ce===void 0||Rp(r,i,Ee,Se,u,Ce);return}}for(var me in s)Se=s[me],s.hasOwnProperty(me)&&Se!=null&&!u.hasOwnProperty(me)&&Zt(r,i,me,null,u,Se);for(Me in u)Se=u[Me],Ce=s[Me],!u.hasOwnProperty(Me)||Se===Ce||Se==null&&Ce==null||Zt(r,i,Me,Se,u,Ce)}var Tp=null,Mp=null;function du(r){return r.nodeType===9?r:r.ownerDocument}function i1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a1(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Ip(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Dp=null;function wk(){var r=window.event;return r&&r.type==="popstate"?r===Dp?!1:(Dp=r,!0):(Dp=null,!1)}var o1=typeof setTimeout=="function"?setTimeout:void 0,Sk=typeof clearTimeout=="function"?clearTimeout:void 0,s1=typeof Promise=="function"?Promise:void 0,Ck=typeof queueMicrotask=="function"?queueMicrotask:typeof s1!="undefined"?function(r){return s1.resolve(null).then(r).catch(kk)}:o1;function kk(r){setTimeout(function(){throw r})}function qa(r){return r==="head"}function l1(r,i){var s=i,u=0,g=0;do{var b=s.nextSibling;if(r.removeChild(s),b&&b.nodeType===8)if(s=b.data,s==="/$"){if(0<u&&8>u){s=u;var D=r.ownerDocument;if(s&1&&tc(D.documentElement),s&2&&tc(D.body),s&4)for(s=D.head,tc(s),D=s.firstChild;D;){var Z=D.nextSibling,ce=D.nodeName;D[Mt]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&D.rel.toLowerCase()==="stylesheet"||s.removeChild(D),D=Z}}if(g===0){r.removeChild(b),cc(i);return}g--}else s==="$"||s==="$?"||s==="$!"?g++:u=s.charCodeAt(0)-48;else u=0;s=b}while(s);cc(i)}function Wp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Wp(s),Ri(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}r.removeChild(s)}}function _k(r,i,s,u){for(;r.nodeType===1;){var g=s;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Mt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Ii(r.nextSibling),r===null)break}return null}function Ak(r,i,s){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Ii(r.nextSibling),r===null))return null;return r}function $p(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function zk(r,i){var s=r.ownerDocument;if(r.data!=="$?"||s.readyState==="complete")i();else{var u=function(){i(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ii(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var Lp=null;function c1(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var s=r.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return r;i--}else s==="/$"&&i++}r=r.previousSibling}return null}function d1(r,i,s){switch(i=du(s),r){case"html":if(r=i.documentElement,!r)throw Error(l(452));return r;case"head":if(r=i.head,!r)throw Error(l(453));return r;case"body":if(r=i.body,!r)throw Error(l(454));return r;default:throw Error(l(451))}}function tc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ri(r)}var bi=new Map,u1=new Set;function uu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var pa=I.d;I.d={f:Ek,r:Rk,D:Tk,C:Mk,L:Ik,m:Dk,X:$k,S:Wk,M:Lk};function Ek(){var r=pa.f(),i=ru();return r||i}function Rk(r){var i=yn(r);i!==null&&i.tag===5&&i.type==="form"?Mb(i):pa.r(r)}var Fs=typeof document=="undefined"?null:document;function h1(r,i,s){var u=Fs;if(u&&typeof i=="string"&&i){var g=ui(i);g='link[rel="'+r+'"][href="'+g+'"]',typeof s=="string"&&(g+='[crossorigin="'+s+'"]'),u1.has(g)||(u1.add(g),r={rel:r,crossOrigin:s,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),on(i,"link",r),et(i),u.head.appendChild(i)))}}function Tk(r){pa.D(r),h1("dns-prefetch",r,null)}function Mk(r,i){pa.C(r,i),h1("preconnect",r,i)}function Ik(r,i,s){pa.L(r,i,s);var u=Fs;if(u&&r&&i){var g='link[rel="preload"][as="'+ui(i)+'"]';i==="image"&&s&&s.imageSrcSet?(g+='[imagesrcset="'+ui(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(g+='[imagesizes="'+ui(s.imageSizes)+'"]')):g+='[href="'+ui(r)+'"]';var b=g;switch(i){case"style":b=Ps(r);break;case"script":b=js(r)}bi.has(b)||(r=v({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:r,as:i},s),bi.set(b,r),u.querySelector(g)!==null||i==="style"&&u.querySelector(rc(b))||i==="script"&&u.querySelector(nc(b))||(i=u.createElement("link"),on(i,"link",r),et(i),u.head.appendChild(i)))}}function Dk(r,i){pa.m(r,i);var s=Fs;if(s&&r){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+ui(u)+'"][href="'+ui(r)+'"]',b=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=js(r)}if(!bi.has(b)&&(r=v({rel:"modulepreload",href:r},i),bi.set(b,r),s.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(nc(b)))return}u=s.createElement("link"),on(u,"link",r),et(u),s.head.appendChild(u)}}}function Wk(r,i,s){pa.S(r,i,s);var u=Fs;if(u&&r){var g=wn(u).hoistableStyles,b=Ps(r);i=i||"default";var D=g.get(b);if(!D){var Z={loading:0,preload:null};if(D=u.querySelector(rc(b)))Z.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":i},s),(s=bi.get(b))&&Op(r,s);var ce=D=u.createElement("link");et(ce),on(ce,"link",r),ce._p=new Promise(function(we,Ee){ce.onload=we,ce.onerror=Ee}),ce.addEventListener("load",function(){Z.loading|=1}),ce.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,hu(D,i,u)}D={type:"stylesheet",instance:D,count:1,state:Z},g.set(b,D)}}}function $k(r,i){pa.X(r,i);var s=Fs;if(s&&r){var u=wn(s).hoistableScripts,g=js(r),b=u.get(g);b||(b=s.querySelector(nc(g)),b||(r=v({src:r,async:!0},i),(i=bi.get(g))&&Bp(r,i),b=s.createElement("script"),et(b),on(b,"link",r),s.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(g,b))}}function Lk(r,i){pa.M(r,i);var s=Fs;if(s&&r){var u=wn(s).hoistableScripts,g=js(r),b=u.get(g);b||(b=s.querySelector(nc(g)),b||(r=v({src:r,async:!0,type:"module"},i),(i=bi.get(g))&&Bp(r,i),b=s.createElement("script"),et(b),on(b,"link",r),s.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(g,b))}}function f1(r,i,s,u){var g=(g=K.current)?uu(g):null;if(!g)throw Error(l(446));switch(r){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Ps(s.href),s=wn(g).hoistableStyles,u=s.get(i),u||(u={type:"style",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){r=Ps(s.href);var b=wn(g).hoistableStyles,D=b.get(r);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,D),(b=g.querySelector(rc(r)))&&!b._p&&(D.instance=b,D.state.loading=5),bi.has(r)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},bi.set(r,s),b||Ok(g,r,s,D.state))),i&&u===null)throw Error(l(528,""));return D}if(i&&u!==null)throw Error(l(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=js(s),s=wn(g).hoistableScripts,u=s.get(i),u||(u={type:"script",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,r))}}function Ps(r){return'href="'+ui(r)+'"'}function rc(r){return'link[rel="stylesheet"]['+r+"]"}function p1(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function Ok(r,i,s,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),on(i,"link",s),et(i),r.head.appendChild(i))}function js(r){return'[src="'+ui(r)+'"]'}function nc(r){return"script[async]"+r}function g1(r,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+ui(s.href)+'"]');if(u)return i.instance=u,et(u),u;var g=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),et(u),on(u,"style",g),hu(u,s.precedence,r),i.instance=u;case"stylesheet":g=Ps(s.href);var b=r.querySelector(rc(g));if(b)return i.state.loading|=4,i.instance=b,et(b),b;u=p1(s),(g=bi.get(g))&&Op(u,g),b=(r.ownerDocument||r).createElement("link"),et(b);var D=b;return D._p=new Promise(function(Z,ce){D.onload=Z,D.onerror=ce}),on(b,"link",u),i.state.loading|=4,hu(b,s.precedence,r),i.instance=b;case"script":return b=js(s.src),(g=r.querySelector(nc(b)))?(i.instance=g,et(g),g):(u=s,(g=bi.get(b))&&(u=v({},s),Bp(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),et(g),on(g,"link",u),r.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,hu(u,s.precedence,r));return i.instance}function hu(r,i,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,b=g,D=0;D<u.length;D++){var Z=u[D];if(Z.dataset.precedence===i)b=Z;else if(b!==g)break}b?b.parentNode.insertBefore(r,b.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(r,i.firstChild))}function Op(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Bp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var fu=null;function m1(r,i,s){if(fu===null){var u=new Map,g=fu=new Map;g.set(s,u)}else g=fu,u=g.get(s),u||(u=new Map,g.set(s,u));if(u.has(r))return u;for(u.set(r,null),s=s.getElementsByTagName(r),g=0;g<s.length;g++){var b=s[g];if(!(b[Mt]||b[Oe]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var D=b.getAttribute(i)||"";D=r+D;var Z=u.get(D);Z?Z.push(b):u.set(D,[b])}}return u}function x1(r,i,s){r=r.ownerDocument||r,r.head.insertBefore(s,i==="title"?r.querySelector("head > title"):null)}function Bk(r,i,s){if(s===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function b1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ic=null;function Fk(){}function Pk(r,i,s){if(ic===null)throw Error(l(475));var u=ic;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=Ps(s.href),b=r.querySelector(rc(g));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=pu.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=b,et(b);return}b=r.ownerDocument||r,s=p1(s),(g=bi.get(g))&&Op(s,g),b=b.createElement("link"),et(b);var D=b;D._p=new Promise(function(Z,ce){D.onload=Z,D.onerror=ce}),on(b,"link",s),i.instance=b}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=pu.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function jk(){if(ic===null)throw Error(l(475));var r=ic;return r.stylesheets&&r.count===0&&Fp(r,r.stylesheets),0<r.count?function(i){var s=setTimeout(function(){if(r.stylesheets&&Fp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(s)}}:null}function pu(){if(this.count--,this.count===0){if(this.stylesheets)Fp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var gu=null;function Fp(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,gu=new Map,i.forEach(Nk,r),gu=null,pu.call(r))}function Nk(r,i){if(!(i.state.loading&4)){var s=gu.get(r);if(s)var u=s.get(null);else{s=new Map,gu.set(r,s);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var D=g[b];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(s.set(D.dataset.precedence,D),u=D)}u&&s.set(null,u)}g=i.instance,D=g.getAttribute("data-precedence"),b=s.get(D)||u,b===u&&s.set(null,g),s.set(D,g),this.count++,u=pu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),b?b.parentNode.insertBefore(g,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),i.state.loading|=4}}var ac={$$typeof:q,Provider:null,Consumer:null,_currentValue:A,_currentValue2:A,_threadCount:0};function Hk(r,i,s,u,g,b,D,Z){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Et(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.hiddenUpdates=Et(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function y1(r,i,s,u,g,b,D,Z,ce,we,Ee,Me){return r=new Hk(r,i,s,D,Z,ce,we,Me),i=1,b===!0&&(i|=24),b=Un(3,null,null,i),r.current=b,b.stateNode=r,i=vf(),i.refCount++,r.pooledCache=i,i.refCount++,b.memoizedState={element:u,isDehydrated:s,cache:i},kf(b),r}function v1(r){return r?(r=bs,r):bs}function w1(r,i,s,u,g,b){g=v1(g),u.context===null?u.context=g:u.pendingContext=g,u=Da(i),u.payload={element:s},b=b===void 0?null:b,b!==null&&(u.callback=b),s=Wa(r,u,i),s!==null&&(Gn(s,r,i),$l(s,r,i))}function S1(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var s=r.retryLane;r.retryLane=s!==0&&s<i?s:i}}function Pp(r,i){S1(r,i),(r=r.alternate)&&S1(r,i)}function C1(r){if(r.tag===13){var i=xs(r,67108864);i!==null&&Gn(i,r,67108864),Pp(r,67108864)}}var mu=!0;function Uk(r,i,s,u){var g=E.T;E.T=null;var b=I.p;try{I.p=2,jp(r,i,s,u)}finally{I.p=b,E.T=g}}function Vk(r,i,s,u){var g=E.T;E.T=null;var b=I.p;try{I.p=8,jp(r,i,s,u)}finally{I.p=b,E.T=g}}function jp(r,i,s,u){if(mu){var g=Np(u);if(g===null)Ep(r,i,u,xu,s),_1(r,u);else if(Yk(g,r,i,s,u))u.stopPropagation();else if(_1(r,u),i&4&&-1<qk.indexOf(r)){for(;g!==null;){var b=yn(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var D=Ie(b.pendingLanes);if(D!==0){var Z=b;for(Z.pendingLanes|=2,Z.entangledLanes|=2;D;){var ce=1<<31-Re(D);Z.entanglements[1]|=ce,D&=~ce}Qi(b),(Yt&6)===0&&(eu=Le()+500,Zl(0))}}break;case 13:Z=xs(b,2),Z!==null&&Gn(Z,b,2),ru(),Pp(b,2)}if(b=Np(u),b===null&&Ep(r,i,u,xu,s),b===g)break;g=b}g!==null&&u.stopPropagation()}else Ep(r,i,u,null,s)}}function Np(r){return r=qh(r),Hp(r)}var xu=null;function Hp(r){if(xu=null,r=bn(r),r!==null){var i=p(r);if(i===null)r=null;else{var s=i.tag;if(s===13){if(r=h(i),r!==null)return r;r=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return xu=r,null}function k1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tr()){case _r:return 2;case jn:return 8;case hn:case zi:return 32;case qr:return 268435456;default:return 32}default:return 32}}var Up=!1,Ya=null,Qa=null,Ga=null,oc=new Map,sc=new Map,Xa=[],qk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _1(r,i){switch(r){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":sc.delete(i.pointerId)}}function lc(r,i,s,u,g,b){return r===null||r.nativeEvent!==b?(r={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:b,targetContainers:[g]},i!==null&&(i=yn(i),i!==null&&C1(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function Yk(r,i,s,u,g){switch(i){case"focusin":return Ya=lc(Ya,r,i,s,u,g),!0;case"dragenter":return Qa=lc(Qa,r,i,s,u,g),!0;case"mouseover":return Ga=lc(Ga,r,i,s,u,g),!0;case"pointerover":var b=g.pointerId;return oc.set(b,lc(oc.get(b)||null,r,i,s,u,g)),!0;case"gotpointercapture":return b=g.pointerId,sc.set(b,lc(sc.get(b)||null,r,i,s,u,g)),!0}return!1}function A1(r){var i=bn(r.target);if(i!==null){var s=p(i);if(s!==null){if(i=s.tag,i===13){if(i=h(s),i!==null){r.blockedOn=i,Hi(r.priority,function(){if(s.tag===13){var u=Qn();u=xt(u);var g=xs(s,u);g!==null&&Gn(g,s,u),Pp(s,u)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){r.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}r.blockedOn=null}function bu(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var s=Np(r.nativeEvent);if(s===null){s=r.nativeEvent;var u=new s.constructor(s.type,s);Vh=u,s.target.dispatchEvent(u),Vh=null}else return i=yn(s),i!==null&&C1(i),r.blockedOn=s,!1;i.shift()}return!0}function z1(r,i,s){bu(r)&&s.delete(i)}function Qk(){Up=!1,Ya!==null&&bu(Ya)&&(Ya=null),Qa!==null&&bu(Qa)&&(Qa=null),Ga!==null&&bu(Ga)&&(Ga=null),oc.forEach(z1),sc.forEach(z1)}function yu(r,i){r.blockedOn===i&&(r.blockedOn=null,Up||(Up=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Qk)))}var vu=null;function E1(r){vu!==r&&(vu=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vu===r&&(vu=null);for(var i=0;i<r.length;i+=3){var s=r[i],u=r[i+1],g=r[i+2];if(typeof u!="function"){if(Hp(u||s)===null)continue;break}var b=yn(s);b!==null&&(r.splice(i,3),i-=3,Hf(b,{pending:!0,data:g,method:s.method,action:u},u,g))}}))}function cc(r){function i(ce){return yu(ce,r)}Ya!==null&&yu(Ya,r),Qa!==null&&yu(Qa,r),Ga!==null&&yu(Ga,r),oc.forEach(i),sc.forEach(i);for(var s=0;s<Xa.length;s++){var u=Xa[s];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Xa.length&&(s=Xa[0],s.blockedOn===null);)A1(s),s.blockedOn===null&&Xa.shift();if(s=(r.ownerDocument||r).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var g=s[u],b=s[u+1],D=g[Ze]||null;if(typeof b=="function")D||E1(s);else if(D){var Z=null;if(b&&b.hasAttribute("formAction")){if(g=b,D=b[Ze]||null)Z=D.formAction;else if(Hp(g)!==null)continue}else Z=D.action;typeof Z=="function"?s[u+1]=Z:(s.splice(u,3),u-=3),E1(s)}}}function Vp(r){this._internalRoot=r}wu.prototype.render=Vp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(l(409));var s=i.current,u=Qn();w1(s,u,r,i,null,null)},wu.prototype.unmount=Vp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;w1(r.current,2,null,r,null,null),ru(),i[st]=null}};function wu(r){this._internalRoot=r}wu.prototype.unstable_scheduleHydration=function(r){if(r){var i=si();r={blockedOn:null,target:r,priority:i};for(var s=0;s<Xa.length&&i!==0&&i<Xa[s].priority;s++);Xa.splice(s,0,r),s===0&&A1(r)}};var R1=n.version;if(R1!=="19.1.0")throw Error(l(527,R1,"19.1.0"));I.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(l(188)):(r=Object.keys(r).join(","),Error(l(268,r)));return r=m(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var Gk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{xn=Su.inject(Gk),Gt=Su}catch(r){}}return pc.createRoot=function(r,i){if(!d(r))throw Error(l(299));var s=!1,u="",g=Vb,b=qb,D=Yb,Z=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(D=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Z=i.unstable_transitionCallbacks)),i=y1(r,1,!1,null,null,s,u,g,b,D,Z,null),r[st]=i.current,zp(r),new Vp(i)},pc.hydrateRoot=function(r,i,s){if(!d(r))throw Error(l(299));var u=!1,g="",b=Vb,D=qb,Z=Yb,ce=null,we=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(D=s.onCaughtError),s.onRecoverableError!==void 0&&(Z=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(ce=s.unstable_transitionCallbacks),s.formState!==void 0&&(we=s.formState)),i=y1(r,1,!0,i,s!=null?s:null,u,g,b,D,Z,ce,we),i.context=v1(null),s=i.current,u=Qn(),u=xt(u),g=Da(u),g.callback=null,Wa(s,g,u),s=u,i.current.lanes=s,dr(i,s),Qi(i),r[st]=i.current,zp(r),new wu(i)},pc.version="19.1.0",pc}var n2;function s_(){if(n2)return Zp.exports;n2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Zp.exports=o_(),Zp.exports}var l_=s_();const c_=id(l_);var tg={exports:{}},rg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function d_(){if(i2)return rg;i2=1;var t=Sw();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var a=typeof Object.is=="function"?Object.is:n,l=t.useSyncExternalStore,d=t.useRef,p=t.useEffect,h=t.useMemo,x=t.useDebugValue;return rg.useSyncExternalStoreWithSelector=function(m,y,v,S,C){var _=d(null);if(_.current===null){var z={hasValue:!1,value:null};_.current=z}else z=_.current;_=h(function(){function B(ee){if(!T){if(T=!0,O=ee,ee=S(ee),C!==void 0&&z.hasValue){var V=z.value;if(C(V,ee))return q=V}return q=ee}if(V=q,a(O,ee))return V;var L=S(ee);return C!==void 0&&C(V,L)?(O=ee,V):(O=ee,q=L)}var T=!1,O,q,j=v===void 0?null:v;return[function(){return B(y())},j===null?void 0:function(){return B(j())}]},[y,v,S,C]);var R=l(m,_[0],_[1]);return p(function(){z.hasValue=!0,z.value=R},[R]),x(R),R},rg}var a2;function u_(){return a2||(a2=1,tg.exports=d_()),tg.exports}var h_=u_();function f_(t){t()}function p_(){let t=null,n=null;return{clear(){t=null,n=null},notify(){f_(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){const a=[];let l=t;for(;l;)a.push(l),l=l.next;return a},subscribe(a){let l=!0;const d=n={callback:a,next:null,prev:n};return d.prev?d.prev.next=d:t=d,function(){!l||t===null||(l=!1,d.next?d.next.prev=d.prev:n=d.prev,d.prev?d.prev.next=d.next:t=d.next)}}}}var o2={notify(){},get:()=>[]};function g_(t,n){let a,l=o2,d=0,p=!1;function h(R){v();const B=l.subscribe(R);let T=!1;return()=>{T||(T=!0,B(),S())}}function x(){l.notify()}function m(){z.onStateChange&&z.onStateChange()}function y(){return p}function v(){d++,a||(a=t.subscribe(m),l=p_())}function S(){d--,a&&d===0&&(a(),a=void 0,l.clear(),l=o2)}function C(){p||(p=!0,v())}function _(){p&&(p=!1,S())}const z={addNestedSub:h,notifyNestedSubs:x,handleChangeWrapper:m,isSubscribed:y,trySubscribe:C,tryUnsubscribe:_,getListeners:()=>l};return z}var m_=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",x_=m_(),b_=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",y_=b_(),v_=()=>x_||y_?w.useLayoutEffect:w.useEffect,w_=v_(),ng=Symbol.for("react-redux-context"),ig=typeof globalThis!="undefined"?globalThis:{};function S_(){var a;if(!w.createContext)return{};const t=(a=ig[ng])!=null?a:ig[ng]=new Map;let n=t.get(w.createContext);return n||(n=w.createContext(null),t.set(w.createContext,n)),n}var ao=S_();function C_(t){const{children:n,context:a,serverState:l,store:d}=t,p=w.useMemo(()=>{const m=g_(d);return{store:d,subscription:m,getServerState:l?()=>l:void 0}},[d,l]),h=w.useMemo(()=>d.getState(),[d]);w_(()=>{const{subscription:m}=p;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),h!==d.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[p,h]);const x=a||ao;return w.createElement(x.Provider,{value:p},n)}var k_=C_;function im(t=ao){return function(){return w.useContext(t)}}var kw=im();function _w(t=ao){const n=t===ao?kw:im(t),a=()=>{const{store:l}=n();return l};return Object.assign(a,{withTypes:()=>a}),a}var __=_w();function A_(t=ao){const n=t===ao?__:_w(t),a=()=>n().dispatch;return Object.assign(a,{withTypes:()=>a}),a}var od=A_(),z_=(t,n)=>t===n;function E_(t=ao){const n=t===ao?kw:im(t),a=(l,d={})=>{const{equalityFn:p=z_}=typeof d=="function"?{equalityFn:d}:d,h=n(),{store:x,subscription:m,getServerState:y}=h;w.useRef(!0);const v=w.useCallback({[l.name](C){return l(C)}}[l.name],[l]),S=h_.useSyncExternalStoreWithSelector(m.addNestedSub,x.getState,y||x.getState,v,p);return w.useDebugValue(S),S};return Object.assign(a,{withTypes:()=>a}),a}var am=E_(),ag,s2;function R_(){if(s2)return ag;s2=1;var t=typeof Element!="undefined",n=typeof Map=="function",a=typeof Set=="function",l=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function d(p,h){if(p===h)return!0;if(p&&h&&typeof p=="object"&&typeof h=="object"){if(p.constructor!==h.constructor)return!1;var x,m,y;if(Array.isArray(p)){if(x=p.length,x!=h.length)return!1;for(m=x;m--!==0;)if(!d(p[m],h[m]))return!1;return!0}var v;if(n&&p instanceof Map&&h instanceof Map){if(p.size!==h.size)return!1;for(v=p.entries();!(m=v.next()).done;)if(!h.has(m.value[0]))return!1;for(v=p.entries();!(m=v.next()).done;)if(!d(m.value[1],h.get(m.value[0])))return!1;return!0}if(a&&p instanceof Set&&h instanceof Set){if(p.size!==h.size)return!1;for(v=p.entries();!(m=v.next()).done;)if(!h.has(m.value[0]))return!1;return!0}if(l&&ArrayBuffer.isView(p)&&ArrayBuffer.isView(h)){if(x=p.length,x!=h.length)return!1;for(m=x;m--!==0;)if(p[m]!==h[m])return!1;return!0}if(p.constructor===RegExp)return p.source===h.source&&p.flags===h.flags;if(p.valueOf!==Object.prototype.valueOf&&typeof p.valueOf=="function"&&typeof h.valueOf=="function")return p.valueOf()===h.valueOf();if(p.toString!==Object.prototype.toString&&typeof p.toString=="function"&&typeof h.toString=="function")return p.toString()===h.toString();if(y=Object.keys(p),x=y.length,x!==Object.keys(h).length)return!1;for(m=x;m--!==0;)if(!Object.prototype.hasOwnProperty.call(h,y[m]))return!1;if(t&&p instanceof Element)return!1;for(m=x;m--!==0;)if(!((y[m]==="_owner"||y[m]==="__v"||y[m]==="__o")&&p.$$typeof)&&!d(p[y[m]],h[y[m]]))return!1;return!0}return p!==p&&h!==h}return ag=function(h,x){try{return d(h,x)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},ag}var T_=R_();const M_=id(T_);var og,l2;function I_(){if(l2)return og;l2=1;var t=function(n,a,l,d,p,h,x,m){if(!n){var y;if(a===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[l,d,p,h,x,m],S=0;y=new Error(a.replace(/%s/g,function(){return v[S++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}};return og=t,og}var D_=I_();const c2=id(D_);var sg,d2;function W_(){return d2||(d2=1,sg=function(n,a,l,d){var p=l?l.call(d,n,a):void 0;if(p!==void 0)return!!p;if(n===a)return!0;if(typeof n!="object"||!n||typeof a!="object"||!a)return!1;var h=Object.keys(n),x=Object.keys(a);if(h.length!==x.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(a),y=0;y<h.length;y++){var v=h[y];if(!m(v))return!1;var S=n[v],C=a[v];if(p=l?l.call(d,S,C,v):void 0,p===!1||p===void 0&&S!==C)return!1}return!0}),sg}var $_=W_();const L_=id($_);var Aw=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(Aw||{}),lg={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},u2=Object.values(Aw),om={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},O_=Object.entries(om).reduce((t,[n,a])=>(t[a]=n,t),{}),Bi="data-rh",al={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},ol=(t,n)=>{for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(Object.prototype.hasOwnProperty.call(l,n))return l[n]}return null},B_=t=>{let n=ol(t,"title");const a=ol(t,al.TITLE_TEMPLATE);if(Array.isArray(n)&&(n=n.join("")),a&&n)return a.replace(/%s/g,()=>n);const l=ol(t,al.DEFAULT_TITLE);return n||l||void 0},F_=t=>ol(t,al.ON_CHANGE_CLIENT_STATE)||(()=>{}),cg=(t,n)=>n.filter(a=>typeof a[t]!="undefined").map(a=>a[t]).reduce((a,l)=>X(X({},a),l),{}),P_=(t,n)=>n.filter(a=>typeof a.base!="undefined").map(a=>a.base).reverse().reduce((a,l)=>{if(!a.length){const d=Object.keys(l);for(let p=0;p<d.length;p+=1){const x=d[p].toLowerCase();if(t.indexOf(x)!==-1&&l[x])return a.concat(l)}}return a},[]),j_=t=>console&&typeof console.warn=="function"&&console.warn(t),gc=(t,n,a)=>{const l={};return a.filter(d=>Array.isArray(d[t])?!0:(typeof d[t]!="undefined"&&j_(`Helmet: ${t} should be of type "Array". Instead found type "${typeof d[t]}"`),!1)).map(d=>d[t]).reverse().reduce((d,p)=>{const h={};p.filter(m=>{let y;const v=Object.keys(m);for(let C=0;C<v.length;C+=1){const _=v[C],z=_.toLowerCase();n.indexOf(z)!==-1&&!(y==="rel"&&m[y].toLowerCase()==="canonical")&&!(z==="rel"&&m[z].toLowerCase()==="stylesheet")&&(y=z),n.indexOf(_)!==-1&&(_==="innerHTML"||_==="cssText"||_==="itemprop")&&(y=_)}if(!y||!m[y])return!1;const S=m[y].toLowerCase();return l[y]||(l[y]={}),h[y]||(h[y]={}),l[y][S]?!1:(h[y][S]=!0,!0)}).reverse().forEach(m=>d.push(m));const x=Object.keys(h);for(let m=0;m<x.length;m+=1){const y=x[m],v=X(X({},l[y]),h[y]);l[y]=v}return d},[]).reverse()},N_=(t,n)=>{if(Array.isArray(t)&&t.length){for(let a=0;a<t.length;a+=1)if(t[a][n])return!0}return!1},H_=t=>({baseTag:P_(["href"],t),bodyAttributes:cg("bodyAttributes",t),defer:ol(t,al.DEFER),encode:ol(t,al.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:cg("htmlAttributes",t),linkTags:gc("link",["rel","href"],t),metaTags:gc("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:gc("noscript",["innerHTML"],t),onChangeClientState:F_(t),scriptTags:gc("script",["src","innerHTML"],t),styleTags:gc("style",["cssText"],t),title:B_(t),titleAttributes:cg("titleAttributes",t),prioritizeSeoTags:N_(t,al.PRIORITIZE_SEO_TAGS)}),zw=t=>Array.isArray(t)?t.join(""):t,U_=(t,n)=>{const a=Object.keys(t);for(let l=0;l<a.length;l+=1)if(n[a[l]]&&n[a[l]].includes(t[a[l]]))return!0;return!1},dg=(t,n)=>Array.isArray(t)?t.reduce((a,l)=>(U_(l,n)?a.priority.push(l):a.default.push(l),a),{priority:[],default:[]}):{default:t,priority:[]},h2=(t,n)=>oe(X({},t),{[n]:void 0}),V_=["noscript","script","style"],h0=(t,n=!0)=>n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ew=t=>Object.keys(t).reduce((n,a)=>{const l=typeof t[a]!="undefined"?`${a}="${t[a]}"`:`${a}`;return n?`${n} ${l}`:l},""),q_=(t,n,a,l)=>{const d=Ew(a),p=zw(n);return d?`<${t} ${Bi}="true" ${d}>${h0(p,l)}</${t}>`:`<${t} ${Bi}="true">${h0(p,l)}</${t}>`},Y_=(t,n,a=!0)=>n.reduce((l,d)=>{const p=d,h=Object.keys(p).filter(y=>!(y==="innerHTML"||y==="cssText")).reduce((y,v)=>{const S=typeof p[v]=="undefined"?v:`${v}="${h0(p[v],a)}"`;return y?`${y} ${S}`:S},""),x=p.innerHTML||p.cssText||"",m=V_.indexOf(t)===-1;return`${l}<${t} ${Bi}="true" ${h}${m?"/>":`>${x}</${t}>`}`},""),Rw=(t,n={})=>Object.keys(t).reduce((a,l)=>{const d=om[l];return a[d||l]=t[l],a},n),Q_=(t,n,a)=>{const l={key:n,[Bi]:!0},d=Rw(a,l);return[bt.createElement("title",d,n)]},Ku=(t,n)=>n.map((a,l)=>{const d={key:l,[Bi]:!0};return Object.keys(a).forEach(p=>{const x=om[p]||p;if(x==="innerHTML"||x==="cssText"){const m=a.innerHTML||a.cssText;d.dangerouslySetInnerHTML={__html:m}}else d[x]=a[p]}),bt.createElement(t,d)}),Ci=(t,n,a=!0)=>{switch(t){case"title":return{toComponent:()=>Q_(t,n.title,n.titleAttributes),toString:()=>q_(t,n.title,n.titleAttributes,a)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Rw(n),toString:()=>Ew(n)};default:return{toComponent:()=>Ku(t,n),toString:()=>Y_(t,n,a)}}},G_=({metaTags:t,linkTags:n,scriptTags:a,encode:l})=>{const d=dg(t,lg.meta),p=dg(n,lg.link),h=dg(a,lg.script);return{priorityMethods:{toComponent:()=>[...Ku("meta",d.priority),...Ku("link",p.priority),...Ku("script",h.priority)],toString:()=>`${Ci("meta",d.priority,l)} ${Ci("link",p.priority,l)} ${Ci("script",h.priority,l)}`},metaTags:d.default,linkTags:p.default,scriptTags:h.default}},X_=t=>{const{baseTag:n,bodyAttributes:a,encode:l=!0,htmlAttributes:d,noscriptTags:p,styleTags:h,title:x="",titleAttributes:m,prioritizeSeoTags:y}=t;let{linkTags:v,metaTags:S,scriptTags:C}=t,_={toComponent:()=>{},toString:()=>""};return y&&({priorityMethods:_,linkTags:v,metaTags:S,scriptTags:C}=G_(t)),{priority:_,base:Ci("base",n,l),bodyAttributes:Ci("bodyAttributes",a,l),htmlAttributes:Ci("htmlAttributes",d,l),link:Ci("link",v,l),meta:Ci("meta",S,l),noscript:Ci("noscript",p,l),script:Ci("script",C,l),style:Ci("style",h,l),title:Ci("title",{title:x,titleAttributes:m},l)}},f0=X_,Eu=[],Tw=!!(typeof window!="undefined"&&window.document&&window.document.createElement),p0=class{constructor(t,n){yi(this,"instances",[]);yi(this,"canUseDOM",Tw);yi(this,"context");yi(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Eu:this.instances,add:t=>{(this.canUseDOM?Eu:this.instances).push(t)},remove:t=>{const n=(this.canUseDOM?Eu:this.instances).indexOf(t);(this.canUseDOM?Eu:this.instances).splice(n,1)}}});this.context=t,this.canUseDOM=n||!1,n||(t.helmet=f0({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},K_={},Mw=bt.createContext(K_),Vo,sm=(Vo=class extends w.Component{constructor(a){super(a);yi(this,"helmetData");this.helmetData=new p0(this.props.context||{},Vo.canUseDOM)}render(){return bt.createElement(Mw.Provider,{value:this.helmetData.value},this.props.children)}},yi(Vo,"canUseDOM",Tw),Vo),Hs=(t,n)=>{const a=document.head||document.querySelector("head"),l=a.querySelectorAll(`${t}[${Bi}]`),d=[].slice.call(l),p=[];let h;return n&&n.length&&n.forEach(x=>{const m=document.createElement(t);for(const y in x)if(Object.prototype.hasOwnProperty.call(x,y))if(y==="innerHTML")m.innerHTML=x.innerHTML;else if(y==="cssText")m.styleSheet?m.styleSheet.cssText=x.cssText:m.appendChild(document.createTextNode(x.cssText));else{const v=y,S=typeof x[v]=="undefined"?"":x[v];m.setAttribute(y,S)}m.setAttribute(Bi,"true"),d.some((y,v)=>(h=v,m.isEqualNode(y)))?d.splice(h,1):p.push(m)}),d.forEach(x=>{var m;return(m=x.parentNode)==null?void 0:m.removeChild(x)}),p.forEach(x=>a.appendChild(x)),{oldTags:d,newTags:p}},g0=(t,n)=>{const a=document.getElementsByTagName(t)[0];if(!a)return;const l=a.getAttribute(Bi),d=l?l.split(","):[],p=[...d],h=Object.keys(n);for(const x of h){const m=n[x]||"";a.getAttribute(x)!==m&&a.setAttribute(x,m),d.indexOf(x)===-1&&d.push(x);const y=p.indexOf(x);y!==-1&&p.splice(y,1)}for(let x=p.length-1;x>=0;x-=1)a.removeAttribute(p[x]);d.length===p.length?a.removeAttribute(Bi):a.getAttribute(Bi)!==h.join(",")&&a.setAttribute(Bi,h.join(","))},Z_=(t,n)=>{typeof t!="undefined"&&document.title!==t&&(document.title=zw(t)),g0("title",n)},f2=(t,n)=>{const{baseTag:a,bodyAttributes:l,htmlAttributes:d,linkTags:p,metaTags:h,noscriptTags:x,onChangeClientState:m,scriptTags:y,styleTags:v,title:S,titleAttributes:C}=t;g0("body",l),g0("html",d),Z_(S,C);const _={baseTag:Hs("base",a),linkTags:Hs("link",p),metaTags:Hs("meta",h),noscriptTags:Hs("noscript",x),scriptTags:Hs("script",y),styleTags:Hs("style",v)},z={},R={};Object.keys(_).forEach(B=>{const{newTags:T,oldTags:O}=_[B];T.length&&(z[B]=T),O.length&&(R[B]=_[B].oldTags)}),n&&n(),m(t,z,R)},mc=null,J_=t=>{mc&&cancelAnimationFrame(mc),t.defer?mc=requestAnimationFrame(()=>{f2(t,()=>{mc=null})}):(f2(t),mc=null)},e4=J_,p2=class extends w.Component{constructor(){super(...arguments);yi(this,"rendered",!1)}shouldComponentUpdate(n){return!L_(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:a}=this.props.context;let l=null;const d=H_(n.get().map(p=>{const h=X({},p.props);return delete h.context,h}));sm.canUseDOM?e4(d):f0&&(l=f0(d)),a(l)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},t0,t4=(t0=class extends w.Component{shouldComponentUpdate(t){return!M_(h2(this.props,"helmetData"),h2(t,"helmetData"))}mapNestedChildrenToProps(t,n){if(!n)return null;switch(t.type){case"script":case"noscript":return{innerHTML:n};case"style":return{cssText:n};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,n,a,l){return oe(X({},n),{[t.type]:[...n[t.type]||[],X(X({},a),this.mapNestedChildrenToProps(t,l))]})}mapObjectTypeChildren(t,n,a,l){switch(t.type){case"title":return oe(X({},n),{[t.type]:l,titleAttributes:X({},a)});case"body":return oe(X({},n),{bodyAttributes:X({},a)});case"html":return oe(X({},n),{htmlAttributes:X({},a)});default:return oe(X({},n),{[t.type]:X({},a)})}}mapArrayTypeChildrenToProps(t,n){let a=X({},n);return Object.keys(t).forEach(l=>{a=oe(X({},a),{[l]:t[l]})}),a}warnOnInvalidChildren(t,n){return c2(u2.some(a=>t.type===a),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${u2.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),c2(!n||typeof n=="string"||Array.isArray(n)&&!n.some(a=>typeof a!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,n){let a={};return bt.Children.forEach(t,l=>{if(!l||!l.props)return;const m=l.props,{children:d}=m,p=Cn(m,["children"]),h=Object.keys(p).reduce((y,v)=>(y[O_[v]||v]=p[v],y),{});let{type:x}=l;switch(typeof x=="symbol"?x=x.toString():this.warnOnInvalidChildren(l,d),x){case"Symbol(react.fragment)":n=this.mapChildrenToProps(d,n);break;case"link":case"meta":case"noscript":case"script":case"style":a=this.flattenArrayTypeChildren(l,a,h,d);break;default:n=this.mapObjectTypeChildren(l,n,h,d);break}}),this.mapArrayTypeChildrenToProps(a,n)}render(){const d=this.props,{children:t}=d,n=Cn(d,["children"]);let a=X({},n),{helmetData:l}=n;if(t&&(a=this.mapChildrenToProps(t,a)),l&&!(l instanceof p0)){const p=l;l=new p0(p.context,!0),delete a.helmetData}return l?bt.createElement(p2,oe(X({},a),{context:l.value})):bt.createElement(Mw.Consumer,null,p=>bt.createElement(p2,oe(X({},a),{context:p})))}},yi(t0,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),t0),Ru={exports:{}};/*!
 * CSSJanus. https://www.mediawiki.org/wiki/CSSJanus
 *
 * Copyright 2014 Trevor Parscal
 * Copyright 2010 Roan Kattouw
 * Copyright 2008 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g2;function r4(){return g2||(g2=1,function(t,n){var a;function l(p,h){var x=[],m=0;function y(S){return x.push(S),h}function v(){return x[m++]}return{tokenize:function(S){return S.replace(p,y)},detokenize:function(S){return S.replace(new RegExp("("+h+")","g"),v)}}}function d(){var p="`TMP`",h="`TMPLTR`",x="`TMPRTL`",m="`NOFLIP_SINGLE`",y="`NOFLIP_CLASS`",v="`COMMENT`",S="[^\\u0020-\\u007e]",C="(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)",_="(?:[0-9]*\\.[0-9]+|[0-9]+)",z="(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)",R="direction\\s*:\\s*",B="[!#$%&*-~]",T=`['"]?\\s*`,O="(^|[^a-zA-Z])",q="[^\\}]*?",j="\\/\\*\\!?\\s*@noflip\\s*\\*\\/",ee="\\/\\*[^*]*\\*+([^\\/*][^*]*\\*+)*\\/",V="(?:"+C+"|\\\\[^\\r\\n\\f0-9a-f])",L="(?:[_a-z]|"+S+"|"+V+")",k="(?:[_a-z0-9-]|"+S+"|"+V+")",G="-?"+L+k+"*",W=_+"(?:\\s*"+z+"|"+G+")?",M="((?:-?"+W+")|(?:inherit|auto))",U="(?:-?"+_+"(?:\\s*"+z+")?)",H="(?:\\+|\\-|\\*|\\/)",N="(?:\\(|\\)|\\t| )",Y="(?:"+N+"|"+U+"|"+H+"){3,}",E="(?:calc\\((?:"+Y+")\\))",I="((?:-?"+W+")|(?:inherit|auto)|"+E+")",A="((?:margin|padding|border-width)\\s*:\\s*)",Q="((?:-color|border-style)\\s*:\\s*)",J="(#?"+k+"+|(?:rgba?|hsla?)\\([ \\d.,%-]+\\))",P="(?:"+B+"|"+S+"|"+V+")*?",ie="(?![a-zA-Z])",ue="(?!("+k+`|\\r?\\n|\\s|#|\\:|\\.|\\,|\\+|>|~|\\(|\\)|\\[|\\]|=|\\*=|~=|\\^=|'[^']*'|"[^"]*"|`+v+")*?{)",fe="(?!"+P+T+"\\))",de="(?="+P+T+"\\))",K="(\\s*(?:!important\\s*)?[;}])",se=/`TMP`/g,ve=/`TMPLTR`/g,ge=/`TMPRTL`/g,ke=new RegExp(ee,"gi"),it=new RegExp("("+j+ue+"[^;}]+;?)","gi"),kt=new RegExp("("+j+q+"})","gi"),Cr=new RegExp("("+R+")ltr","gi"),Ne=new RegExp("("+R+")rtl","gi"),Ft=new RegExp(O+"(left)"+ie+fe+ue,"gi"),kr=new RegExp(O+"(right)"+ie+fe+ue,"gi"),Le=new RegExp(O+"(left)"+de,"gi"),tr=new RegExp(O+"(right)"+de,"gi"),_r=/(:dir\( *)ltr( *\))/g,jn=/(:dir\( *)rtl( *\))/g,hn=new RegExp(O+"(ltr)"+de,"gi"),zi=new RegExp(O+"(rtl)"+de,"gi"),qr=new RegExp(O+"([ns]?)e-resize","gi"),ii=new RegExp(O+"([ns]?)w-resize","gi"),ai=new RegExp(A+I+"(\\s+)"+I+"(\\s+)"+I+"(\\s+)"+I+K,"gi"),xn=new RegExp(Q+J+"(\\s+)"+J+"(\\s+)"+J+"(\\s+)"+J+K,"gi"),Gt=new RegExp("(background(?:-position)?\\s*:\\s*(?:[^:;}\\s]+\\s+)*?)("+W+")","gi"),Yr=new RegExp("(background-position-x\\s*:\\s*)(-?"+_+"%)","gi"),Re=new RegExp("(border-radius\\s*:\\s*)"+M+"(?:(?:\\s+"+M+")(?:\\s+"+M+")?(?:\\s+"+M+")?)?(?:(?:(?:\\s*\\/\\s*)"+M+")(?:\\s+"+M+")?(?:\\s+"+M+")?(?:\\s+"+M+")?)?"+K,"gi"),Nn=new RegExp("(box-shadow\\s*:\\s*(?:inset\\s*)?)"+M,"gi"),oi=new RegExp("(text-shadow\\s*:\\s*)"+M+"(\\s*)"+J,"gi"),Ei=new RegExp("(text-shadow\\s*:\\s*)"+J+"(\\s*)"+M,"gi"),ae=new RegExp("(text-shadow\\s*:\\s*)"+M,"gi"),Fe=new RegExp("(transform\\s*:[^;}]*)(translateX\\s*\\(\\s*)"+M+"(\\s*\\))","gi"),Ie=new RegExp("(transform\\s*:[^;}]*)(translate\\s*\\(\\s*)"+M+"((?:\\s*,\\s*"+M+"){0,2}\\s*\\))","gi");function Ke(Ue,Pe,qe){var xt,Ve;return qe.slice(-1)==="%"&&(xt=qe.indexOf("."),xt!==-1?(Ve=qe.length-xt-2,qe=100-parseFloat(qe),qe=qe.toFixed(Ve)+"%"):qe=100-parseFloat(qe)+"%"),Pe+qe}function tt(Ue){switch(Ue.length){case 4:Ue=[Ue[1],Ue[0],Ue[3],Ue[2]];break;case 3:Ue=[Ue[1],Ue[0],Ue[1],Ue[2]];break;case 2:Ue=[Ue[1],Ue[0]];break;case 1:Ue=[Ue[0]];break}return Ue.join(" ")}function $e(Ue,Pe){var qe,xt=[].slice.call(arguments),Ve=xt.slice(2,6).filter(function(Ae){return Ae}),si=xt.slice(6,10).filter(function(Ae){return Ae}),Hi=xt[10]||"";return si.length?qe=tt(Ve)+" / "+tt(si):qe=tt(Ve),Pe+qe+Hi}function He(Ue){return parseFloat(Ue)===0?Ue:Ue[0]==="-"?Ue.slice(1):"-"+Ue}function at(Ue,Pe,qe){return Pe+He(qe)}function Et(Ue,Pe,qe,xt,Ve){return Pe+qe+He(xt)+Ve}function dr(Ue,Pe,qe,xt,Ve){return Pe+qe+xt+He(Ve)}return{transform:function(Ue,Pe){var qe=new l(it,m),xt=new l(kt,y),Ve=new l(ke,v);return Ue=Ve.tokenize(xt.tokenize(qe.tokenize(Ue.replace("`","%60")))),Pe.transformDirInUrl&&(Ue=Ue.replace(_r,"$1"+h+"$2").replace(jn,"$1"+x+"$2").replace(hn,"$1"+p).replace(zi,"$1ltr").replace(se,"rtl").replace(ve,"ltr").replace(ge,"rtl")),Pe.transformEdgeInUrl&&(Ue=Ue.replace(Le,"$1"+p).replace(tr,"$1left").replace(se,"right")),Ue=Ue.replace(Cr,"$1"+p).replace(Ne,"$1ltr").replace(se,"rtl").replace(Ft,"$1"+p).replace(kr,"$1left").replace(se,"right").replace(qr,"$1$2"+p).replace(ii,"$1$2e-resize").replace(se,"w-resize").replace(Re,$e).replace(Nn,at).replace(oi,dr).replace(Ei,dr).replace(ae,at).replace(Fe,Et).replace(Ie,Et).replace(ai,"$1$2$3$8$5$6$7$4$9").replace(xn,"$1$2$3$8$5$6$7$4$9").replace(Gt,Ke).replace(Yr,Ke),Ue=qe.detokenize(xt.detokenize(Ve.detokenize(Ue))),Ue}}}a=new d,t.exports?n.transform=function(p,h,x){var m;return typeof h=="object"?m=h:(m={},typeof h=="boolean"&&(m.transformDirInUrl=h),typeof x=="boolean"&&(m.transformEdgeInUrl=x)),a.transform(p,m)}:typeof window!="undefined"&&(window.cssjanus=a)}(Ru,Ru.exports)),Ru.exports}var n4=r4();const i4=id(n4);function Iw(t,n,a){switch(t.type){case Y6:case q6:case X1:return t.return=t.return||t.value;case u0:t.value=Array.isArray(t.props)?t.props.join(","):t.props,Array.isArray(t.children)&&t.children.forEach(function(d){d.type===X1&&(d.children=d.value)})}var l=Q6(Array.prototype.concat(t.children),Iw);return G6(l)?t.return=t.value+"{"+l+"}":""}function Dw(t,n,a,l){if(t.type===N6||t.type===H6||t.type===u0&&(!t.parent||t.parent.type===U6||t.parent.type===u0)){var d=i4.transform(Iw(t));t.children=d?V6(d)[0].children:[],t.return=""}}Object.defineProperty(Dw,"name",{value:"stylisRTLPlugin"});function Ww(t){var n,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(a=Ww(t[n]))&&(l&&(l+=" "),l+=a);else for(n in t)t[n]&&(l&&(l+=" "),l+=n);return l}function ss(){for(var t,n,a=0,l="";a<arguments.length;)(t=arguments[a++])&&(n=Ww(t))&&(l&&(l+=" "),l+=n);return l}let a4={data:""},o4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||a4,s4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,l4=/\/\*[^]*?\*\/|  +/g,m2=/\n+/g,Po=(t,n)=>{let a="",l="",d="";for(let p in t){let h=t[p];p[0]=="@"?p[1]=="i"?a=p+" "+h+";":l+=p[1]=="f"?Po(h,p):p+"{"+Po(h,p[1]=="k"?"":n)+"}":typeof h=="object"?l+=Po(h,n?n.replace(/([^,])+/g,x=>p.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,x):x?x+" "+m:m)):p):h!=null&&(p=/^--/.test(p)?p:p.replace(/[A-Z]/g,"-$&").toLowerCase(),d+=Po.p?Po.p(p,h):p+":"+h+";")}return a+(n&&d?n+"{"+d+"}":d)+l},ga={},$w=t=>{if(typeof t=="object"){let n="";for(let a in t)n+=a+$w(t[a]);return n}return t},c4=(t,n,a,l,d)=>{let p=$w(t),h=ga[p]||(ga[p]=(m=>{let y=0,v=11;for(;y<m.length;)v=101*v+m.charCodeAt(y++)>>>0;return"go"+v})(p));if(!ga[h]){let m=p!==t?t:(y=>{let v,S,C=[{}];for(;v=s4.exec(y.replace(l4,""));)v[4]?C.shift():v[3]?(S=v[3].replace(m2," ").trim(),C.unshift(C[0][S]=C[0][S]||{})):C[0][v[1]]=v[2].replace(m2," ").trim();return C[0]})(t);ga[h]=Po(d?{["@keyframes "+h]:m}:m,a?"":"."+h)}let x=a&&ga.g?ga.g:null;return a&&(ga.g=ga[h]),((m,y,v,S)=>{S?y.data=y.data.replace(S,m):y.data.indexOf(m)===-1&&(y.data=v?m+y.data:y.data+m)})(ga[h],n,l,x),h},d4=(t,n,a)=>t.reduce((l,d,p)=>{let h=n[p];if(h&&h.call){let x=h(a),m=x&&x.props&&x.props.className||/^go/.test(x)&&x;h=m?"."+m:x&&typeof x=="object"?x.props?"":Po(x,""):x===!1?"":x}return l+d+(h==null?"":h)},"");function lm(t){let n=this||{},a=t.call?t(n.p):t;return c4(a.unshift?a.raw?d4(a,[].slice.call(arguments,1),n.p):a.reduce((l,d)=>Object.assign(l,d&&d.call?d(n.p):d),{}):a,o4(n.target),n.g,n.o,n.k)}lm.bind({g:1});lm.bind({k:1});function u4(t,n){for(var a=0;a<n.length;a++){var l=n[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function Lw(t,n,a){return n&&u4(t.prototype,n),t}function er(){return er=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},er.apply(this,arguments)}function Ow(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function sd(t,n){if(t==null)return{};var a={},l=Object.keys(t),d,p;for(p=0;p<l.length;p++)d=l[p],!(n.indexOf(d)>=0)&&(a[d]=t[d]);return a}function x2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var b2=function(){return""},h4=bt.createContext({enqueueSnackbar:b2,closeSnackbar:b2}),Oo={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},y2=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},cm=function(n){return""+y2(n.vertical)+y2(n.horizontal)},Tu=function(n){return!!n||n===0},Mu="unmounted",Us="exited",Vs="entering",xc="entered",v2="exiting",dm=function(t){Ow(n,t);function n(l){var d;d=t.call(this,l)||this;var p=l.appear,h;return d.appearStatus=null,l.in?p?(h=Us,d.appearStatus=Vs):h=xc:l.unmountOnExit||l.mountOnEnter?h=Mu:h=Us,d.state={status:h},d.nextCallback=null,d}n.getDerivedStateFromProps=function(d,p){var h=d.in;return h&&p.status===Mu?{status:Us}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(d){var p=null;if(d!==this.props){var h=this.state.status;this.props.in?h!==Vs&&h!==xc&&(p=Vs):(h===Vs||h===xc)&&(p=v2)}this.updateStatus(!1,p)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var d=this.props.timeout,p=d,h=d;return d!=null&&typeof d!="number"&&typeof d!="string"&&(h=d.exit,p=d.enter),{exit:h,enter:p}},a.updateStatus=function(d,p){d===void 0&&(d=!1),p!==null?(this.cancelNextCallback(),p===Vs?this.performEnter(d):this.performExit()):this.props.unmountOnExit&&this.state.status===Us&&this.setState({status:Mu})},a.performEnter=function(d){var p=this,h=this.props.enter,x=d,m=this.getTimeouts();if(!d&&!h){this.safeSetState({status:xc},function(){p.props.onEntered&&p.props.onEntered(p.node,x)});return}this.props.onEnter&&this.props.onEnter(this.node,x),this.safeSetState({status:Vs},function(){p.props.onEntering&&p.props.onEntering(p.node,x),p.onTransitionEnd(m.enter,function(){p.safeSetState({status:xc},function(){p.props.onEntered&&p.props.onEntered(p.node,x)})})})},a.performExit=function(){var d=this,p=this.props.exit,h=this.getTimeouts();if(!p){this.safeSetState({status:Us},function(){d.props.onExited&&d.props.onExited(d.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:v2},function(){d.props.onExiting&&d.props.onExiting(d.node),d.onTransitionEnd(h.exit,function(){d.safeSetState({status:Us},function(){d.props.onExited&&d.props.onExited(d.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(d,p){p=this.setNextCallback(p),this.setState(d,p)},a.setNextCallback=function(d){var p=this,h=!0;return this.nextCallback=function(){h&&(h=!1,p.nextCallback=null,d())},this.nextCallback.cancel=function(){h=!1},this.nextCallback},a.onTransitionEnd=function(d,p){this.setNextCallback(p);var h=d==null&&!this.props.addEndListener;if(!this.node||h){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),d!=null&&setTimeout(this.nextCallback,d)},a.render=function(){var d=this.state.status;if(d===Mu)return null;var p=this.props,h=p.children,x=sd(p,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return h(d,x)},Lw(n,[{key:"node",get:function(){var d,p=(d=this.props.nodeRef)===null||d===void 0?void 0:d.current;if(!p)throw new Error("notistack - Custom snackbar is not refForwarding");return p}}]),n}(bt.Component);function qs(){}dm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qs,onEntering:qs,onEntered:qs,onExit:qs,onExiting:qs,onExited:qs};function w2(t,n){typeof t=="function"?t(n):t&&(t.current=n)}function m0(t,n){return w.useMemo(function(){return t==null&&n==null?null:function(a){w2(t,a),w2(n,a)}},[t,n])}function fh(t){var n=t.timeout,a=t.style,l=a===void 0?{}:a,d=t.mode;return{duration:typeof n=="object"?n[d]||0:n,easing:l.transitionTimingFunction,delay:l.transitionDelay}}var x0={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Bw=function(n){n.scrollTop=n.scrollTop},S2=function(n){return Math.round(n)+"ms"};function Js(t,n){t===void 0&&(t=["all"]);var a=n||{},l=a.duration,d=l===void 0?300:l,p=a.easing,h=p===void 0?x0.easeInOut:p,x=a.delay,m=x===void 0?0:x,y=Array.isArray(t)?t:[t];return y.map(function(v){var S=typeof d=="string"?d:S2(d),C=typeof m=="string"?m:S2(m);return v+" "+S+" "+h+" "+C}).join(",")}function f4(t){return t&&t.ownerDocument||document}function Fw(t){var n=f4(t);return n.defaultView||window}function p4(t,n){n===void 0&&(n=166);var a;function l(){for(var d=this,p=arguments.length,h=new Array(p),x=0;x<p;x++)h[x]=arguments[x];var m=function(){t.apply(d,h)};clearTimeout(a),a=setTimeout(m,n)}return l.clear=function(){clearTimeout(a)},l}function g4(t,n){var a=n.getBoundingClientRect(),l=Fw(n),d;if(n.fakeTransform)d=n.fakeTransform;else{var p=l.getComputedStyle(n);d=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}var h=0,x=0;if(d&&d!=="none"&&typeof d=="string"){var m=d.split("(")[1].split(")")[0].split(",");h=parseInt(m[4],10),x=parseInt(m[5],10)}switch(t){case"left":return"translateX("+(l.innerWidth+h-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-h)+"px)";case"up":return"translateY("+(l.innerHeight+x-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-x)+"px)"}}function Iu(t,n){if(n){var a=g4(t,n);a&&(n.style.webkitTransform=a,n.style.transform=a)}}var Pw=w.forwardRef(function(t,n){var a=t.children,l=t.direction,d=l===void 0?"down":l,p=t.in,h=t.style,x=t.timeout,m=x===void 0?0:x,y=t.onEnter,v=t.onEntered,S=t.onExit,C=t.onExited,_=sd(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),z=w.useRef(null),R=m0(a.ref,z),B=m0(R,n),T=function(L,k){Iu(d,L),Bw(L),y&&y(L,k)},O=function(L){var k=(h==null?void 0:h.transitionTimingFunction)||x0.easeOut,G=fh({timeout:m,mode:"enter",style:er({},h,{transitionTimingFunction:k})});L.style.webkitTransition=Js("-webkit-transform",G),L.style.transition=Js("transform",G),L.style.webkitTransform="none",L.style.transform="none"},q=function(L){var k=(h==null?void 0:h.transitionTimingFunction)||x0.sharp,G=fh({timeout:m,mode:"exit",style:er({},h,{transitionTimingFunction:k})});L.style.webkitTransition=Js("-webkit-transform",G),L.style.transition=Js("transform",G),Iu(d,L),S&&S(L)},j=function(L){L.style.webkitTransition="",L.style.transition="",C&&C(L)},ee=w.useCallback(function(){z.current&&Iu(d,z.current)},[d]);return w.useEffect(function(){if(!(p||d==="down"||d==="right")){var V=p4(function(){z.current&&Iu(d,z.current)}),L=Fw(z.current);return L.addEventListener("resize",V),function(){V.clear(),L.removeEventListener("resize",V)}}},[d,p]),w.useEffect(function(){p||ee()},[p,ee]),w.createElement(dm,Object.assign({appear:!0,nodeRef:z,onEnter:T,onEntered:v,onEntering:O,onExit:q,onExited:j,in:p,timeout:m},_),function(V,L){return w.cloneElement(a,er({ref:B,style:er({visibility:V==="exited"&&!p?"hidden":void 0},h,{},a.props.style)},L))})});Pw.displayName="Slide";var Mh=function(n){return bt.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},n))},m4=function(){return bt.createElement(Mh,null,bt.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},x4=function(){return bt.createElement(Mh,null,bt.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},b4=function(){return bt.createElement(Mh,null,bt.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},y4=function(){return bt.createElement(Mh,null,bt.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},v4={default:void 0,success:bt.createElement(m4,null),warning:bt.createElement(x4,null),error:bt.createElement(b4,null),info:bt.createElement(y4,null)},Go={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:v4,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Pw,transitionDuration:{enter:225,exit:195}},w4=function(n,a){var l=function(p){return typeof p=="number"||p===null};return l(n)?n:l(a)?a:Go.autoHideDuration},S4=function(n,a){var l=function(p,h){return h.some(function(x){return typeof p===x})};return l(n,["string","number"])?n:l(n,["object"])?er({},Go.transitionDuration,{},l(a,["object"])&&a,{},n):l(a,["string","number"])?a:l(a,["object"])?er({},Go.transitionDuration,{},a):Go.transitionDuration},C4=function(n,a){return function(l,d){return d===void 0&&(d=!1),d?er({},Go[l],{},a[l],{},n[l]):l==="autoHideDuration"?w4(n.autoHideDuration,a.autoHideDuration):l==="transitionDuration"?S4(n.transitionDuration,a.transitionDuration):n[l]||a[l]||Go[l]}};function ld(t){return Object.entries(t).reduce(function(n,a){var l,d=a[0],p=a[1];return er({},n,(l={},l[d]=lm(p),l))},{})}var dl={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(n){return"notistack-MuiContent-"+n}},C2=ld({root:{height:0},entered:{height:"auto"}}),ug="0px",hg=175,jw=w.forwardRef(function(t,n){var a=t.children,l=t.in,d=t.onExited,p=w.useRef(null),h=w.useRef(null),x=m0(n,h),m=function(){return p.current?p.current.clientHeight:0},y=function(R){R.style.height=ug},v=function(R){var B=m(),T=fh({timeout:hg,mode:"enter"}),O=T.duration,q=T.easing;R.style.transitionDuration=typeof O=="string"?O:O+"ms",R.style.height=B+"px",R.style.transitionTimingFunction=q||""},S=function(R){R.style.height="auto"},C=function(R){R.style.height=m()+"px"},_=function(R){Bw(R);var B=fh({timeout:hg,mode:"exit"}),T=B.duration,O=B.easing;R.style.transitionDuration=typeof T=="string"?T:T+"ms",R.style.height=ug,R.style.transitionTimingFunction=O||""};return w.createElement(dm,{in:l,unmountOnExit:!0,onEnter:y,onEntered:S,onEntering:v,onExit:C,onExited:d,onExiting:_,nodeRef:h,timeout:hg},function(z,R){return w.createElement("div",Object.assign({ref:x,className:ss(C2.root,z==="entered"&&C2.entered),style:er({pointerEvents:"all",overflow:"hidden",minHeight:ug,transition:Js("height")},z==="entered"&&{overflow:"visible"},{},z==="exited"&&!l&&{visibility:"hidden"})},R),w.createElement("div",{ref:p,className:dl.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});jw.displayName="Collapse";var k2={right:"left",left:"right",bottom:"up",top:"down"},k4=function(n){return n.horizontal!=="center"?k2[n.horizontal]:k2[n.vertical]},_4=function(n){return"anchorOrigin"+cm(n)},A4=function(n){n===void 0&&(n={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(n).filter(function(l){return!a[l]}).reduce(function(l,d){var p;return er({},l,(p={},p[d]=n[d],p))},{})},z4=function(){};function Mc(t,n){return t.reduce(function(a,l){return l==null?a:function(){for(var p=arguments.length,h=new Array(p),x=0;x<p;x++)h[x]=arguments[x];var m=[].concat(h);n&&m.indexOf(n)===-1&&m.push(n),a.apply(this,m),l.apply(this,m)}},z4)}var E4=typeof window!="undefined"?w.useLayoutEffect:w.useEffect;function _2(t){var n=w.useRef(t);return E4(function(){n.current=t}),w.useCallback(function(){return n.current.apply(void 0,arguments)},[])}var Nw=w.forwardRef(function(t,n){var a=t.children,l=t.className,d=t.autoHideDuration,p=t.disableWindowBlurListener,h=p===void 0?!1:p,x=t.onClose,m=t.id,y=t.open,v=t.SnackbarProps,S=v===void 0?{}:v,C=w.useRef(),_=_2(function(){x&&x.apply(void 0,arguments)}),z=_2(function(q){!x||q==null||(C.current&&clearTimeout(C.current),C.current=setTimeout(function(){_(null,"timeout",m)},q))});w.useEffect(function(){return y&&z(d),function(){C.current&&clearTimeout(C.current)}},[y,d,z]);var R=function(){C.current&&clearTimeout(C.current)},B=w.useCallback(function(){d!=null&&z(d*.5)},[d,z]),T=function(j){S.onMouseEnter&&S.onMouseEnter(j),R()},O=function(j){S.onMouseLeave&&S.onMouseLeave(j),B()};return w.useEffect(function(){if(!h&&y)return window.addEventListener("focus",B),window.addEventListener("blur",R),function(){window.removeEventListener("focus",B),window.removeEventListener("blur",R)}},[h,B,y]),w.createElement("div",Object.assign({ref:n},S,{className:ss(dl.Snackbar,l),onMouseEnter:T,onMouseLeave:O}),a)});Nw.displayName="Snackbar";var fg,R4=ld({root:(fg={display:"flex",flexWrap:"wrap",flexGrow:1},fg[Oo.upSm]={flexGrow:"initial",minWidth:"288px"},fg)}),Hw=w.forwardRef(function(t,n){var a=t.className,l=sd(t,["className"]);return bt.createElement("div",Object.assign({ref:n,className:ss(R4.root,a)},l))});Hw.displayName="SnackbarContent";var bc=ld({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),A2="notistack-snackbar",Uw=w.forwardRef(function(t,n){var a=t.id,l=t.message,d=t.action,p=t.iconVariant,h=t.variant,x=t.hideIconVariant,m=t.style,y=t.className,v=p[h],S=d;return typeof S=="function"&&(S=S(a)),bt.createElement(Hw,{ref:n,role:"alert","aria-describedby":A2,style:m,className:ss(dl.MuiContent,dl.MuiContentVariant(h),bc.root,bc[h],y,!x&&v&&bc.lessPadding)},bt.createElement("div",{id:A2,className:bc.message},x?null:v,l),S&&bt.createElement("div",{className:bc.action},S))});Uw.displayName="MaterialDesignContent";var T4=w.memo(Uw),M4=ld({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),I4=function(n){var a=w.useRef(),l=w.useState(!0),d=l[0],p=l[1],h=Mc([n.snack.onClose,n.onClose]),x=function(){n.snack.requestClose&&h(null,"instructed",n.snack.id)},m=w.useCallback(function(){a.current=setTimeout(function(){p(function(G){return!G})},125)},[]);w.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var y=n.snack,v=n.classes,S=n.Component,C=S===void 0?T4:S,_=w.useMemo(function(){return A4(v)},[v]),z=y.open,R=y.SnackbarProps,B=y.TransitionComponent,T=y.TransitionProps,O=y.transitionDuration,q=y.disableWindowBlurListener,j=y.content,ee=sd(y,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),V=er({direction:k4(ee.anchorOrigin),timeout:O},T),L=j;typeof L=="function"&&(L=L(ee.id,ee.message));var k=["onEnter","onEntered","onExit","onExited"].reduce(function(G,W){var M;return er({},G,(M={},M[W]=Mc([n.snack[W],n[W]],ee.id),M))},{});return bt.createElement(jw,{in:d,onExited:k.onExited},bt.createElement(Nw,{open:z,id:ee.id,disableWindowBlurListener:q,autoHideDuration:ee.autoHideDuration,className:ss(M4.wrappedRoot,_.root,_[_4(ee.anchorOrigin)]),SnackbarProps:R,onClose:h},bt.createElement(B,Object.assign({},V,{appear:!0,in:z,onExit:k.onExit,onExited:m,onEnter:k.onEnter,onEntered:Mc([k.onEntered,x],ee.id)}),L||bt.createElement(C,Object.assign({},ee)))))},yc,pg,Du,Wu,gg,ma={view:{default:20},snackbar:{default:6,dense:2}},z2="."+dl.CollapseWrapper,mg=16,$u=ld({root:(yc={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Js(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},yc[z2]={padding:ma.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},yc.maxWidth="calc(100% - "+ma.view.default*2+"px)",yc[Oo.downXs]={width:"100%",maxWidth:"calc(100% - "+mg*2+"px)"},yc),rootDense:(pg={},pg[z2]={padding:ma.snackbar.dense+"px 0px"},pg),top:{top:ma.view.default-ma.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:ma.view.default-ma.snackbar.default+"px",flexDirection:"column-reverse"},left:(Du={left:ma.view.default+"px"},Du[Oo.upSm]={alignItems:"flex-start"},Du[Oo.downXs]={left:mg+"px"},Du),right:(Wu={right:ma.view.default+"px"},Wu[Oo.upSm]={alignItems:"flex-end"},Wu[Oo.downXs]={right:mg+"px"},Wu),center:(gg={left:"50%",transform:"translateX(-50%)"},gg[Oo.upSm]={alignItems:"center"},gg)}),D4=function(n){var a=n.classes,l=a===void 0?{}:a,d=n.anchorOrigin,p=n.dense,h=n.children,x=ss(dl.SnackbarContainer,$u[d.vertical],$u[d.horizontal],$u.root,l.containerRoot,l["containerAnchorOrigin"+cm(d)],p&&$u.rootDense);return bt.createElement("div",{className:x},h)},W4=w.memo(D4),E2=function(n){var a=typeof n=="string"||w.isValidElement(n);return!a},$4=function(t){Ow(n,t);function n(l){var d;return d=t.call(this,l)||this,d.enqueueSnackbar=function(p,h){if(h===void 0&&(h={}),p==null)throw new Error("enqueueSnackbar called with invalid argument");var x=E2(p)?p:h,m=E2(p)?p.message:p,y=x.key,v=x.preventDuplicate,S=sd(x,["key","preventDuplicate"]),C=Tu(y),_=C?y:new Date().getTime()+Math.random(),z=C4(S,d.props),R=er({id:_},S,{message:m,open:!0,entered:!1,requestClose:!1,persist:z("persist"),action:z("action"),content:z("content"),variant:z("variant"),anchorOrigin:z("anchorOrigin"),disableWindowBlurListener:z("disableWindowBlurListener"),autoHideDuration:z("autoHideDuration"),hideIconVariant:z("hideIconVariant"),TransitionComponent:z("TransitionComponent"),transitionDuration:z("transitionDuration"),TransitionProps:z("TransitionProps",!0),iconVariant:z("iconVariant",!0),style:z("style",!0),SnackbarProps:z("SnackbarProps",!0),className:ss(d.props.className,S.className)});return R.persist&&(R.autoHideDuration=void 0),d.setState(function(B){if(v===void 0&&d.props.preventDuplicate||v){var T=function(ee){return C?ee.id===_:ee.message===m},O=B.queue.findIndex(T)>-1,q=B.snacks.findIndex(T)>-1;if(O||q)return B}return d.handleDisplaySnack(er({},B,{queue:[].concat(B.queue,[R])}))}),_},d.handleDisplaySnack=function(p){var h=p.snacks;return h.length>=d.maxSnack?d.handleDismissOldest(p):d.processQueue(p)},d.processQueue=function(p){var h=p.queue,x=p.snacks;return h.length>0?er({},p,{snacks:[].concat(x,[h[0]]),queue:h.slice(1,h.length)}):p},d.handleDismissOldest=function(p){if(p.snacks.some(function(v){return!v.open||v.requestClose}))return p;var h=!1,x=!1,m=p.snacks.reduce(function(v,S){return v+(S.open&&S.persist?1:0)},0);m===d.maxSnack&&(x=!0);var y=p.snacks.map(function(v){return!h&&(!v.persist||x)?(h=!0,v.entered?(v.onClose&&v.onClose(null,"maxsnack",v.id),d.props.onClose&&d.props.onClose(null,"maxsnack",v.id),er({},v,{open:!1})):er({},v,{requestClose:!0})):er({},v)});return er({},p,{snacks:y})},d.handleEnteredSnack=function(p,h,x){if(!Tu(x))throw new Error("handleEnteredSnack Cannot be called with undefined key");d.setState(function(m){var y=m.snacks;return{snacks:y.map(function(v){return v.id===x?er({},v,{entered:!0}):er({},v)})}})},d.handleCloseSnack=function(p,h,x){d.props.onClose&&d.props.onClose(p,h,x);var m=x===void 0;d.setState(function(y){var v=y.snacks,S=y.queue;return{snacks:v.map(function(C){return!m&&C.id!==x?er({},C):C.entered?er({},C,{open:!1}):er({},C,{requestClose:!0})}),queue:S.filter(function(C){return C.id!==x})}})},d.closeSnackbar=function(p){var h=d.state.snacks.find(function(x){return x.id===p});Tu(p)&&h&&h.onClose&&h.onClose(null,"instructed",p),d.handleCloseSnack(null,"instructed",p)},d.handleExitedSnack=function(p,h){if(!Tu(h))throw new Error("handleExitedSnack Cannot be called with undefined key");d.setState(function(x){var m=d.processQueue(er({},x,{snacks:x.snacks.filter(function(y){return y.id!==h})}));return m.queue.length===0?m:d.handleDismissOldest(m)})},d.enqueueSnackbar,d.closeSnackbar,d.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:d.enqueueSnackbar.bind(x2(d)),closeSnackbar:d.closeSnackbar.bind(x2(d))}},d}var a=n.prototype;return a.render=function(){var d=this,p=this.state.contextValue,h=this.props,x=h.domRoot,m=h.children,y=h.dense,v=y===void 0?!1:y,S=h.Components,C=S===void 0?{}:S,_=h.classes,z=this.state.snacks.reduce(function(B,T){var O,q=cm(T.anchorOrigin),j=B[q]||[];return er({},B,(O={},O[q]=[].concat(j,[T]),O))},{}),R=Object.keys(z).map(function(B){var T=z[B],O=T[0];return bt.createElement(W4,{key:B,dense:v,anchorOrigin:O.anchorOrigin,classes:_},T.map(function(q){return bt.createElement(I4,{key:q.id,snack:q,classes:_,Component:C[q.variant],onClose:d.handleCloseSnack,onEnter:d.props.onEnter,onExit:d.props.onExit,onExited:Mc([d.handleExitedSnack,d.props.onExited],q.id),onEntered:Mc([d.handleEnteredSnack,d.props.onEntered],q.id)})}))});return bt.createElement(h4.Provider,{value:p},m,x?B6.createPortal(R,x):R)},Lw(n,[{key:"maxSnack",get:function(){return this.props.maxSnack||Go.maxSnack}}]),n}(w.Component);function sn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var L4=typeof Symbol=="function"&&Symbol.observable||"@@observable",R2=L4,xg=()=>Math.random().toString(36).substring(7).split("").join("."),O4={INIT:`@@redux/INIT${xg()}`,REPLACE:`@@redux/REPLACE${xg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${xg()}`},ph=O4;function um(t){if(typeof t!="object"||t===null)return!1;let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n||Object.getPrototypeOf(t)===null}function Vw(t,n,a){if(typeof t!="function")throw new Error(sn(2));if(typeof n=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(sn(0));if(typeof n=="function"&&typeof a=="undefined"&&(a=n,n=void 0),typeof a!="undefined"){if(typeof a!="function")throw new Error(sn(1));return a(Vw)(t,n)}let l=t,d=n,p=new Map,h=p,x=0,m=!1;function y(){h===p&&(h=new Map,p.forEach((B,T)=>{h.set(T,B)}))}function v(){if(m)throw new Error(sn(3));return d}function S(B){if(typeof B!="function")throw new Error(sn(4));if(m)throw new Error(sn(5));let T=!0;y();const O=x++;return h.set(O,B),function(){if(T){if(m)throw new Error(sn(6));T=!1,y(),h.delete(O),p=null}}}function C(B){if(!um(B))throw new Error(sn(7));if(typeof B.type=="undefined")throw new Error(sn(8));if(typeof B.type!="string")throw new Error(sn(17));if(m)throw new Error(sn(9));try{m=!0,d=l(d,B)}finally{m=!1}return(p=h).forEach(O=>{O()}),B}function _(B){if(typeof B!="function")throw new Error(sn(10));l=B,C({type:ph.REPLACE})}function z(){const B=S;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(sn(11));function O(){const j=T;j.next&&j.next(v())}return O(),{unsubscribe:B(O)}},[R2](){return this}}}return C({type:ph.INIT}),{dispatch:C,subscribe:S,getState:v,replaceReducer:_,[R2]:z}}function B4(t){Object.keys(t).forEach(n=>{const a=t[n];if(typeof a(void 0,{type:ph.INIT})=="undefined")throw new Error(sn(12));if(typeof a(void 0,{type:ph.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(sn(13))})}function F4(t){const n=Object.keys(t),a={};for(let p=0;p<n.length;p++){const h=n[p];typeof t[h]=="function"&&(a[h]=t[h])}const l=Object.keys(a);let d;try{B4(a)}catch(p){d=p}return function(h={},x){if(d)throw d;let m=!1;const y={};for(let v=0;v<l.length;v++){const S=l[v],C=a[S],_=h[S],z=C(_,x);if(typeof z=="undefined")throw x&&x.type,new Error(sn(14));y[S]=z,m=m||z!==_}return m=m||l.length!==Object.keys(h).length,m?y:h}}function gh(...t){return t.length===0?n=>n:t.length===1?t[0]:t.reduce((n,a)=>(...l)=>n(a(...l)))}function P4(...t){return n=>(a,l)=>{const d=n(a,l);let p=()=>{throw new Error(sn(15))};const h={getState:d.getState,dispatch:(m,...y)=>p(m,...y)},x=t.map(m=>m(h));return p=gh(...x)(d.dispatch),oe(X({},d),{dispatch:p})}}function j4(t){return um(t)&&"type"in t&&typeof t.type=="string"}var qw=Symbol.for("immer-nothing"),T2=Symbol.for("immer-draftable"),Zn=Symbol.for("immer-state");function $i(t,...n){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ul=Object.getPrototypeOf;function is(t){return!!t&&!!t[Zn]}function _a(t){var n;return t?Yw(t)||Array.isArray(t)||!!t[T2]||!!((n=t.constructor)!=null&&n[T2])||Dh(t)||Wh(t):!1}var N4=Object.prototype.constructor.toString();function Yw(t){if(!t||typeof t!="object")return!1;const n=ul(t);if(n===null)return!0;const a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object?!0:typeof a=="function"&&Function.toString.call(a)===N4}function mh(t,n){Ih(t)===0?Reflect.ownKeys(t).forEach(a=>{n(a,t[a],t)}):t.forEach((a,l)=>n(l,a,t))}function Ih(t){const n=t[Zn];return n?n.type_:Array.isArray(t)?1:Dh(t)?2:Wh(t)?3:0}function b0(t,n){return Ih(t)===2?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function Qw(t,n,a){const l=Ih(t);l===2?t.set(n,a):l===3?t.add(a):t[n]=a}function H4(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}function Dh(t){return t instanceof Map}function Wh(t){return t instanceof Set}function Bo(t){return t.copy_||t.base_}function y0(t,n){if(Dh(t))return new Map(t);if(Wh(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const a=Yw(t);if(n===!0||n==="class_only"&&!a){const l=Object.getOwnPropertyDescriptors(t);delete l[Zn];let d=Reflect.ownKeys(l);for(let p=0;p<d.length;p++){const h=d[p],x=l[h];x.writable===!1&&(x.writable=!0,x.configurable=!0),(x.get||x.set)&&(l[h]={configurable:!0,writable:!0,enumerable:x.enumerable,value:t[h]})}return Object.create(ul(t),l)}else{const l=ul(t);if(l!==null&&a)return X({},t);const d=Object.create(l);return Object.assign(d,t)}}function hm(t,n=!1){return $h(t)||is(t)||!_a(t)||(Ih(t)>1&&(t.set=t.add=t.clear=t.delete=U4),Object.freeze(t),n&&Object.entries(t).forEach(([a,l])=>hm(l,!0))),t}function U4(){$i(2)}function $h(t){return Object.isFrozen(t)}var V4={};function as(t){const n=V4[t];return n||$i(0,t),n}var Hc;function Gw(){return Hc}function q4(t,n){return{drafts_:[],parent_:t,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function M2(t,n){n&&(as("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function v0(t){w0(t),t.drafts_.forEach(Y4),t.drafts_=null}function w0(t){t===Hc&&(Hc=t.parent_)}function I2(t){return Hc=q4(Hc,t)}function Y4(t){const n=t[Zn];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function D2(t,n){n.unfinalizedDrafts_=n.drafts_.length;const a=n.drafts_[0];return t!==void 0&&t!==a?(a[Zn].modified_&&(v0(n),$i(4)),_a(t)&&(t=xh(n,t),n.parent_||bh(n,t)),n.patches_&&as("Patches").generateReplacementPatches_(a[Zn].base_,t,n.patches_,n.inversePatches_)):t=xh(n,a,[]),v0(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==qw?t:void 0}function xh(t,n,a){if($h(n))return n;const l=n[Zn];if(!l)return mh(n,(d,p)=>W2(t,l,n,d,p,a)),n;if(l.scope_!==t)return n;if(!l.modified_)return bh(t,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const d=l.copy_;let p=d,h=!1;l.type_===3&&(p=new Set(d),d.clear(),h=!0),mh(p,(x,m)=>W2(t,l,d,x,m,a,h)),bh(t,d,!1),a&&t.patches_&&as("Patches").generatePatches_(l,a,t.patches_,t.inversePatches_)}return l.copy_}function W2(t,n,a,l,d,p,h){if(is(d)){const x=p&&n&&n.type_!==3&&!b0(n.assigned_,l)?p.concat(l):void 0,m=xh(t,d,x);if(Qw(a,l,m),is(m))t.canAutoFreeze_=!1;else return}else h&&a.add(d);if(_a(d)&&!$h(d)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;xh(t,d),(!n||!n.scope_.parent_)&&typeof l!="symbol"&&Object.prototype.propertyIsEnumerable.call(a,l)&&bh(t,d)}}function bh(t,n,a=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&hm(n,a)}function Q4(t,n){const a=Array.isArray(t),l={type_:a?1:0,scope_:n?n.scope_:Gw(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let d=l,p=fm;a&&(d=[l],p=Uc);const{revoke:h,proxy:x}=Proxy.revocable(d,p);return l.draft_=x,l.revoke_=h,x}var fm={get(t,n){if(n===Zn)return t;const a=Bo(t);if(!b0(a,n))return G4(t,a,n);const l=a[n];return t.finalized_||!_a(l)?l:l===bg(t.base_,n)?(yg(t),t.copy_[n]=C0(l,t)):l},has(t,n){return n in Bo(t)},ownKeys(t){return Reflect.ownKeys(Bo(t))},set(t,n,a){const l=Xw(Bo(t),n);if(l!=null&&l.set)return l.set.call(t.draft_,a),!0;if(!t.modified_){const d=bg(Bo(t),n),p=d==null?void 0:d[Zn];if(p&&p.base_===a)return t.copy_[n]=a,t.assigned_[n]=!1,!0;if(H4(a,d)&&(a!==void 0||b0(t.base_,n)))return!0;yg(t),S0(t)}return t.copy_[n]===a&&(a!==void 0||n in t.copy_)||Number.isNaN(a)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=a,t.assigned_[n]=!0),!0},deleteProperty(t,n){return bg(t.base_,n)!==void 0||n in t.base_?(t.assigned_[n]=!1,yg(t),S0(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0},getOwnPropertyDescriptor(t,n){const a=Bo(t),l=Reflect.getOwnPropertyDescriptor(a,n);return l&&{writable:!0,configurable:t.type_!==1||n!=="length",enumerable:l.enumerable,value:a[n]}},defineProperty(){$i(11)},getPrototypeOf(t){return ul(t.base_)},setPrototypeOf(){$i(12)}},Uc={};mh(fm,(t,n)=>{Uc[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Uc.deleteProperty=function(t,n){return Uc.set.call(this,t,n,void 0)};Uc.set=function(t,n,a){return fm.set.call(this,t[0],n,a,t[0])};function bg(t,n){const a=t[Zn];return(a?Bo(a):t)[n]}function G4(t,n,a){var d;const l=Xw(n,a);return l?"value"in l?l.value:(d=l.get)==null?void 0:d.call(t.draft_):void 0}function Xw(t,n){if(!(n in t))return;let a=ul(t);for(;a;){const l=Object.getOwnPropertyDescriptor(a,n);if(l)return l;a=ul(a)}}function S0(t){t.modified_||(t.modified_=!0,t.parent_&&S0(t.parent_))}function yg(t){t.copy_||(t.copy_=y0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var X4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,a,l)=>{if(typeof n=="function"&&typeof a!="function"){const p=a;a=n;const h=this;return function(m=p,...y){return h.produce(m,v=>a.call(this,v,...y))}}typeof a!="function"&&$i(6),l!==void 0&&typeof l!="function"&&$i(7);let d;if(_a(n)){const p=I2(this),h=C0(n,void 0);let x=!0;try{d=a(h),x=!1}finally{x?v0(p):w0(p)}return M2(p,l),D2(d,p)}else if(!n||typeof n!="object"){if(d=a(n),d===void 0&&(d=n),d===qw&&(d=void 0),this.autoFreeze_&&hm(d,!0),l){const p=[],h=[];as("Patches").generateReplacementPatches_(n,d,p,h),l(p,h)}return d}else $i(1,n)},this.produceWithPatches=(n,a)=>{if(typeof n=="function")return(h,...x)=>this.produceWithPatches(h,m=>n(m,...x));let l,d;return[this.produce(n,a,(h,x)=>{l=h,d=x}),l,d]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){_a(t)||$i(8),is(t)&&(t=K4(t));const n=I2(this),a=C0(t,void 0);return a[Zn].isManual_=!0,w0(n),a}finishDraft(t,n){const a=t&&t[Zn];(!a||!a.isManual_)&&$i(9);const{scope_:l}=a;return M2(l,n),D2(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const d=n[a];if(d.path.length===0&&d.op==="replace"){t=d.value;break}}a>-1&&(n=n.slice(a+1));const l=as("Patches").applyPatches_;return is(t)?l(t,n):this.produce(t,d=>l(d,n))}};function C0(t,n){const a=Dh(t)?as("MapSet").proxyMap_(t,n):Wh(t)?as("MapSet").proxySet_(t,n):Q4(t,n);return(n?n.scope_:Gw()).drafts_.push(a),a}function K4(t){return is(t)||$i(10,t),Kw(t)}function Kw(t){if(!_a(t)||$h(t))return t;const n=t[Zn];let a;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,a=y0(t,n.scope_.immer_.useStrictShallowCopy_)}else a=y0(t,!0);return mh(a,(l,d)=>{Qw(a,l,Kw(d))}),n&&(n.finalized_=!1),a}var Jn=new X4,Zw=Jn.produce;Jn.produceWithPatches.bind(Jn);Jn.setAutoFreeze.bind(Jn);Jn.setUseStrictShallowCopy.bind(Jn);Jn.applyPatches.bind(Jn);Jn.createDraft.bind(Jn);Jn.finishDraft.bind(Jn);function Jw(t){return({dispatch:a,getState:l})=>d=>p=>typeof p=="function"?p(a,l,t):d(p)}var Z4=Jw(),J4=Jw,eA=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gh:gh.apply(null,arguments)},tA=t=>t&&typeof t.match=="function";function Ic(t,n){function a(...l){if(n){let d=n(...l);if(!d)throw new Error(Sa(0));return X(X({type:t,payload:d.payload},"meta"in d&&{meta:d.meta}),"error"in d&&{error:d.error})}return{type:t,payload:l[0]}}return a.toString=()=>`${t}`,a.type=t,a.match=l=>j4(l)&&l.type===t,a}var eS=class kc extends Array{constructor(...n){super(...n),Object.setPrototypeOf(this,kc.prototype)}static get[Symbol.species](){return kc}concat(...n){return super.concat.apply(this,n)}prepend(...n){return n.length===1&&Array.isArray(n[0])?new kc(...n[0].concat(this)):new kc(...n.concat(this))}};function $2(t){return _a(t)?Zw(t,()=>{}):t}function Lu(t,n,a){return t.has(n)?t.get(n):t.set(n,a(n)).get(n)}function rA(t){return typeof t=="boolean"}var nA=()=>function(n){const{thunk:a=!0,immutableCheck:l=!0,serializableCheck:d=!0,actionCreatorCheck:p=!0}=n!=null?n:{};let h=new eS;return a&&(rA(a)?h.push(Z4):h.push(J4(a.extraArgument))),h},iA="RTK_autoBatch",L2=t=>n=>{setTimeout(n,t)},aA=(t={type:"raf"})=>n=>(...a)=>{const l=n(...a);let d=!0,p=!1,h=!1;const x=new Set,m=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:L2(10):t.type==="callback"?t.queueNotification:L2(t.timeout),y=()=>{h=!1,p&&(p=!1,x.forEach(v=>v()))};return Object.assign({},l,{subscribe(v){const S=()=>d&&v(),C=l.subscribe(S);return x.add(v),()=>{C(),x.delete(v)}},dispatch(v){var S;try{return d=!((S=v==null?void 0:v.meta)!=null&&S[iA]),p=!d,p&&(h||(h=!0,m(y))),l.dispatch(v)}finally{d=!0}}})},oA=t=>function(a){const{autoBatch:l=!0}=a!=null?a:{};let d=new eS(t);return l&&d.push(aA(typeof l=="object"?l:void 0)),d};function sA(t){const n=nA(),{reducer:a=void 0,middleware:l,devTools:d=!0,preloadedState:p=void 0,enhancers:h=void 0}=t||{};let x;if(typeof a=="function")x=a;else if(um(a))x=F4(a);else throw new Error(Sa(1));let m;typeof l=="function"?m=l(n):m=n();let y=gh;d&&(y=eA(X({trace:!1},typeof d=="object"&&d)));const v=P4(...m),S=oA(v);let C=typeof h=="function"?h(S):S();const _=y(...C);return Vw(x,p,_)}function tS(t){const n={},a=[];let l;const d={addCase(p,h){const x=typeof p=="string"?p:p.type;if(!x)throw new Error(Sa(28));if(x in n)throw new Error(Sa(29));return n[x]=h,d},addMatcher(p,h){return a.push({matcher:p,reducer:h}),d},addDefaultCase(p){return l=p,d}};return t(d),[n,a,l]}function lA(t){return typeof t=="function"}function cA(t,n){let[a,l,d]=tS(n),p;if(lA(t))p=()=>$2(t());else{const x=$2(t);p=()=>x}function h(x=p(),m){let y=[a[m.type],...l.filter(({matcher:v})=>v(m)).map(({reducer:v})=>v)];return y.filter(v=>!!v).length===0&&(y=[d]),y.reduce((v,S)=>{if(S)if(is(v)){const _=S(v,m);return _===void 0?v:_}else{if(_a(v))return Zw(v,C=>S(C,m));{const C=S(v,m);if(C===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return v},x)}return h.getInitialState=p,h}var dA=(t,n)=>tA(t)?t.match(n):t(n);function uA(...t){return n=>t.some(a=>dA(a,n))}var hA="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",fA=(t=21)=>{let n="",a=t;for(;a--;)n+=hA[Math.random()*64|0];return n},pA=["name","message","stack","code"],vg=class{constructor(t,n){yi(this,"_type");this.payload=t,this.meta=n}},O2=class{constructor(t,n){yi(this,"_type");this.payload=t,this.meta=n}},gA=t=>{if(typeof t=="object"&&t!==null){const n={};for(const a of pA)typeof t[a]=="string"&&(n[a]=t[a]);return n}return{message:String(t)}},B2="External signal was aborted",cd=(()=>{function t(n,a,l){const d=Ic(n+"/fulfilled",(m,y,v,S)=>({payload:m,meta:oe(X({},S||{}),{arg:v,requestId:y,requestStatus:"fulfilled"})})),p=Ic(n+"/pending",(m,y,v)=>({payload:void 0,meta:oe(X({},v||{}),{arg:y,requestId:m,requestStatus:"pending"})})),h=Ic(n+"/rejected",(m,y,v,S,C)=>({payload:S,error:(l&&l.serializeError||gA)(m||"Rejected"),meta:oe(X({},C||{}),{arg:v,requestId:y,rejectedWithValue:!!S,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"})}));function x(m,{signal:y}={}){return(v,S,C)=>{const _=l!=null&&l.idGenerator?l.idGenerator(m):fA(),z=new AbortController;let R,B;function T(q){B=q,z.abort()}y&&(y.aborted?T(B2):y.addEventListener("abort",()=>T(B2),{once:!0}));const O=function(){return $(this,null,function*(){var ee,V;let q;try{let L=(ee=l==null?void 0:l.condition)==null?void 0:ee.call(l,m,{getState:S,extra:C});if(xA(L)&&(L=yield L),L===!1||z.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const k=new Promise((G,W)=>{R=()=>{W({name:"AbortError",message:B||"Aborted"})},z.signal.addEventListener("abort",R)});v(p(_,m,(V=l==null?void 0:l.getPendingMeta)==null?void 0:V.call(l,{requestId:_,arg:m},{getState:S,extra:C}))),q=yield Promise.race([k,Promise.resolve(a(m,{dispatch:v,getState:S,extra:C,requestId:_,signal:z.signal,abort:T,rejectWithValue:(G,W)=>new vg(G,W),fulfillWithValue:(G,W)=>new O2(G,W)})).then(G=>{if(G instanceof vg)throw G;return G instanceof O2?d(G.payload,_,m,G.meta):d(G,_,m)})])}catch(L){q=L instanceof vg?h(null,_,m,L.payload,L.meta):h(L,_,m)}finally{R&&z.signal.removeEventListener("abort",R)}return l&&!l.dispatchConditionRejection&&h.match(q)&&q.meta.condition||v(q),q})}();return Object.assign(O,{abort:T,requestId:_,arg:m,unwrap(){return O.then(mA)}})}}return Object.assign(x,{pending:p,rejected:h,fulfilled:d,settled:uA(h,d),typePrefix:n})}return t.withTypes=()=>t,t})();function mA(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function xA(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var bA=Symbol.for("rtk-slice-createasyncthunk");function yA(t,n){return`${t}/${n}`}function vA({creators:t}={}){var a;const n=(a=t==null?void 0:t.asyncThunk)==null?void 0:a[bA];return function(d){const{name:p,reducerPath:h=p}=d;if(!p)throw new Error(Sa(11));const x=(typeof d.reducers=="function"?d.reducers(SA()):d.reducers)||{},m=Object.keys(x),y={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(j,ee){const V=typeof j=="string"?j:j.type;if(!V)throw new Error(Sa(12));if(V in y.sliceCaseReducersByType)throw new Error(Sa(13));return y.sliceCaseReducersByType[V]=ee,v},addMatcher(j,ee){return y.sliceMatchers.push({matcher:j,reducer:ee}),v},exposeAction(j,ee){return y.actionCreators[j]=ee,v},exposeCaseReducer(j,ee){return y.sliceCaseReducersByName[j]=ee,v}};m.forEach(j=>{const ee=x[j],V={reducerName:j,type:yA(p,j),createNotation:typeof d.reducers=="function"};kA(ee)?AA(V,ee,v,n):CA(V,ee,v)});function S(){const[j={},ee=[],V=void 0]=typeof d.extraReducers=="function"?tS(d.extraReducers):[d.extraReducers],L=X(X({},j),y.sliceCaseReducersByType);return cA(d.initialState,k=>{for(let G in L)k.addCase(G,L[G]);for(let G of y.sliceMatchers)k.addMatcher(G.matcher,G.reducer);for(let G of ee)k.addMatcher(G.matcher,G.reducer);V&&k.addDefaultCase(V)})}const C=j=>j,_=new Map,z=new WeakMap;let R;function B(j,ee){return R||(R=S()),R(j,ee)}function T(){return R||(R=S()),R.getInitialState()}function O(j,ee=!1){function V(k){let G=k[j];return typeof G=="undefined"&&ee&&(G=Lu(z,V,T)),G}function L(k=C){const G=Lu(_,ee,()=>new WeakMap);return Lu(G,k,()=>{var M;const W={};for(const[U,H]of Object.entries((M=d.selectors)!=null?M:{}))W[U]=wA(H,k,()=>Lu(z,k,T),ee);return W})}return{reducerPath:j,getSelectors:L,get selectors(){return L(V)},selectSlice:V}}const q=oe(X({name:p,reducer:B,actions:y.actionCreators,caseReducers:y.sliceCaseReducersByName,getInitialState:T},O(h)),{injectInto(j,L={}){var k=L,{reducerPath:ee}=k,V=Cn(k,["reducerPath"]);const G=ee!=null?ee:h;return j.inject({reducerPath:G,reducer:B},V),X(X({},q),O(G,!0))}});return q}}function wA(t,n,a,l){function d(p,...h){let x=n(p);return typeof x=="undefined"&&l&&(x=a()),t(x,...h)}return d.unwrapped=t,d}var rS=vA();function SA(){function t(n,a){return X({_reducerDefinitionType:"asyncThunk",payloadCreator:n},a)}return t.withTypes=()=>t,{reducer(n){return Object.assign({[n.name](...a){return n(...a)}}[n.name],{_reducerDefinitionType:"reducer"})},preparedReducer(n,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:n,reducer:a}},asyncThunk:t}}function CA({type:t,reducerName:n,createNotation:a},l,d){let p,h;if("reducer"in l){if(a&&!_A(l))throw new Error(Sa(17));p=l.reducer,h=l.prepare}else p=l;d.addCase(t,p).exposeCaseReducer(n,p).exposeAction(n,h?Ic(t,h):Ic(t))}function kA(t){return t._reducerDefinitionType==="asyncThunk"}function _A(t){return t._reducerDefinitionType==="reducerWithPrepare"}function AA({type:t,reducerName:n},a,l,d){if(!d)throw new Error(Sa(18));const{payloadCreator:p,fulfilled:h,pending:x,rejected:m,settled:y,options:v}=a,S=d(t,p,v);l.exposeAction(n,S),h&&l.addCase(S.fulfilled,h),x&&l.addCase(S.pending,x),m&&l.addCase(S.rejected,m),y&&l.addMatcher(S.settled,y),l.exposeCaseReducer(n,{fulfilled:h||Ou,pending:x||Ou,rejected:m||Ou,settled:y||Ou})}function Ou(){}function Sa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}console.log("Environment variables:",{VITE_API_BASE_URL:"https://www.pdt-admin.com",MODE:"production",DEV:!1});const zA=()=>"https://www.pdt-admin.com",Zi={baseURL:zA(),timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"},retry:{retries:3,retryDelay:1e3}},ne=r_.create(Zi);ne.interceptors.request.use(t=>{const n=localStorage.getItem("token");return console.log("Request interceptor - Token exists:",!!n),console.log("Request URL:",t.url),console.log("Request method:",t.method),t.url&&t.url.includes("/reviews/create/")&&t.method==="post"&&(console.log("=== REQUEST INTERCEPTOR DEBUG ==="),console.log("Review creation request detected"),console.log("Request data:",t.data),console.log("Request headers:",t.headers),console.log("==================================")),n?(t.headers.Authorization=`Bearer ${n}`,console.log("Authorization header added")):console.log("No token found in localStorage"),t},t=>(console.log("Request interceptor error:",t),Promise.reject(t)));ne.interceptors.response.use(t=>(console.log("Response interceptor - Success:",t.status,t.config.url),t),t=>{var n,a,l,d;return console.log("Response interceptor - Error:",(n=t.response)==null?void 0:n.status,(a=t.response)==null?void 0:a.data,(l=t.config)==null?void 0:l.url),((d=t.response)==null?void 0:d.status)===401&&(console.log("Unauthorized access - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),window.location.href="/login"),Promise.reject(t)});const dd={login:t=>$(null,null,function*(){return(yield ne.post("/api/auth/login/",t)).data}),register:t=>$(null,null,function*(){return(yield ne.post("/api/auth/register/",t)).data}),logout:()=>$(null,null,function*(){return(yield ne.post("/api/auth/logout/")).data}),getProfile:()=>$(null,null,function*(){return(yield ne.get("/api/auth/profile/")).data}),updateProfile:t=>$(null,null,function*(){return(yield ne.put("/api/auth/profile/update/",t)).data}),changePassword:t=>$(null,null,function*(){return(yield ne.post("/api/auth/change-password/",t)).data}),checkEmail:t=>$(null,null,function*(){return(yield ne.get(`/api/auth/check-email/?email=${t}`)).data})},An={getCourses:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get("/api/courses/courses/",{params:t})).data}),getPublicCourses:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/courses/public/",{params:t})).data}catch(a){throw console.error("Error fetching public courses:",a),a}}),getCourse:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/`)).data}catch(n){throw console.error("Error fetching course:",n),n}}),createCourse:t=>$(null,null,function*(){var a;const n=new FormData;Object.keys(t).forEach(l=>{l==="tags"&&Array.isArray(t[l])?t[l].forEach(d=>n.append("tags",d)):l==="image"&&t[l]instanceof File?n.append("image",t[l]):l==="syllabus_pdf"&&t[l]instanceof File?n.append("syllabus_pdf",t[l]):l==="materials_pdf"&&t[l]instanceof File?n.append("materials_pdf",t[l]):t[l]!==null&&t[l]!==void 0&&n.append(l,t[l])});try{return(yield ne.post("/api/courses/courses/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){if(console.error("Error in createCourse API call:",l),((a=l.response)==null?void 0:a.status)===500)try{const p=(yield ne.get("/api/courses/courses/")).data,x=(Array.isArray(p)?p:p.results?p.results:p.data?p.data:[]).find(m=>m.title===t.title&&m.subtitle===t.subtitle);if(x)return x}catch(d){console.error("Error fetching courses to verify creation:",d)}throw l}}),updateCourse:(t,n)=>$(null,null,function*(){const a=new FormData;Object.keys(n).forEach(l=>{l==="tags"&&Array.isArray(n[l])?n[l].forEach(d=>a.append("tags",d)):l==="image"&&n[l]instanceof File?a.append("image",n[l]):l==="syllabus_pdf"&&n[l]instanceof File?a.append("syllabus_pdf",n[l]):l==="materials_pdf"&&n[l]instanceof File?a.append("materials_pdf",n[l]):n[l]!==null&&n[l]!==void 0&&n[l]!==""&&a.append(l,n[l])});try{return(yield ne.patch(`/api/courses/courses/${t}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw console.error("Error in updateCourse API call:",l),l}}),deleteCourse:t=>$(null,null,function*(){return(yield ne.delete(`/api/courses/courses/${t}/`)).data}),getCategories:()=>$(null,null,function*(){try{const n=(yield ne.get("/api/courses/categories/")).data;return Array.isArray(n)?n:n.results?n.results:n.data?n.data:[]}catch(t){return console.error("Error fetching categories:",t),[]}}),getTags:()=>$(null,null,function*(){return(yield ne.get("/api/courses/tags/")).data}),searchCourses:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get("/api/courses/search/",{params:t})).data}),getFeaturedCourses:()=>$(null,null,function*(){return(yield ne.get("/api/courses/featured/")).data}),getPopularCourses:()=>$(null,null,function*(){return(yield ne.get("/api/courses/popular/")).data}),getRecentCourses:()=>$(null,null,function*(){return(yield ne.get("/api/courses/recent/")).data}),enrollInCourse:t=>$(null,null,function*(){return(yield ne.post(`/api/courses/courses/${t}/enroll/`)).data}),unenrollFromCourse:t=>$(null,null,function*(){return(yield ne.post(`/api/courses/courses/${t}/unenroll/`)).data}),getDashboardStats:()=>$(null,null,function*(){return(yield ne.get("/api/courses/dashboard/stats/")).data}),getMyEnrolledCourses:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/my-enrolled-courses/")).data}catch(t){throw console.error("Error fetching enrolled courses:",t),t}}),getCourseTrackingData:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/course-tracking/${t}/`)).data}catch(n){throw console.error("Error fetching course tracking data:",n),n}}),getQuizData:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quiz/${t}/`)).data}catch(n){throw console.error("Error fetching quiz data:",n),n}}),submitQuizAttempt:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/assignments/quiz/${t}/submit/`,{answers:n})).data}catch(a){throw console.error("Error submitting quiz attempt:",a),a}}),markLessonCompleted:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/content/progress/course/${t}/complete/`,{lesson_id:n})).data}catch(a){throw console.error("Error marking lesson as completed:",a),a}}),trackLessonProgress:(t,n,a)=>$(null,null,function*(){try{return(yield ne.post(`/api/content/progress/course/${t}/track/`,X({lesson_id:n},a))).data}catch(l){throw console.error("Error tracking lesson progress:",l),l}}),updateModuleProgress:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/content/modules/${t}/mark_progress/`,n)).data}catch(a){throw console.error("Error updating module progress:",a),a}}),getLessonDetails:t=>$(null,null,function*(){try{return(yield ne.get(`/api/content/lessons/${t}/`)).data}catch(n){throw console.error("Error fetching lesson details:",n),n}}),downloadResource:t=>$(null,null,function*(){try{return(yield ne.get(`/api/content/resources/${t}/download/`,{responseType:"blob"})).data}catch(n){throw console.error("Error downloading resource:",n),n}})},nS={createMoyasarPayment:()=>$(null,null,function*(){return(yield ne.post("/api/store/payment/moyasar/create/")).data}),createCoursePayment:t=>$(null,null,function*(){return(yield ne.post(`/api/store/payment/moyasar/course/${t}/create/`)).data})},Fr={getArticles:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/articles/articles/",{params:t})).data}catch(a){throw console.error("Error fetching articles:",a),a}}),getArticle:t=>$(null,null,function*(){try{return(yield ne.get(`/api/articles/articles/${t}/`)).data}catch(n){throw console.error("Error fetching article:",n),n}}),getArticleBySlug:t=>$(null,null,function*(){try{const n=yield ne.get(`/api/articles/articles/?slug=${t}`);if(n.data&&n.data.results&&n.data.results.length>0)return n.data.results[0];if(Array.isArray(n.data)&&n.data.length>0)return n.data[0];throw new Error("Article not found")}catch(n){throw console.error("Error fetching article by slug:",n),n}}),createArticle:t=>$(null,null,function*(){const n=new FormData;Object.keys(t).forEach(a=>{a==="tags"&&Array.isArray(t[a])?t[a].forEach(l=>n.append("tags",l)):a==="image"&&t[a]instanceof File?n.append("image",t[a]):t[a]!==null&&t[a]!==void 0&&t[a]!==""&&n.append(a,t[a])});try{return(yield ne.post("/api/articles/articles/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error in createArticle API call:",a),a}}),updateArticle:(t,n)=>$(null,null,function*(){const a=new FormData;Object.keys(n).forEach(l=>{l==="tags"&&Array.isArray(n[l])?n[l].forEach(d=>a.append("tags",d)):l==="image"&&n[l]instanceof File?a.append("image",n[l]):n[l]!==null&&n[l]!==void 0&&n[l]!==""&&a.append(l,n[l])});try{return(yield ne.patch(`/api/articles/articles/${t}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw console.error("Error in updateArticle API call:",l),l}}),deleteArticle:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/articles/articles/${t}/`)).data}catch(n){throw console.error("Error deleting article:",n),n}}),getFeaturedArticles:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/featured/")).data}catch(t){throw console.error("Error fetching featured articles:",t),t}}),getRecentArticles:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/recent/")).data}catch(t){throw console.error("Error fetching recent articles:",t),t}}),getPopularArticles:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/popular/")).data}catch(t){throw console.error("Error fetching popular articles:",t),t}}),getRelatedArticles:(t,n=null,a=3)=>$(null,null,function*(){try{let l=`/api/articles/articles/?limit=${a}`;n&&(l+=`&category=${n}`),t&&(l+=`&exclude=${t}`);const d=yield ne.get(l);return d.data.results||d.data||[]}catch(l){return console.error("Error fetching related articles:",l),[]}}),getArticleTags:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/tags/")).data}catch(t){return console.error("Error fetching article tags:",t),[]}}),getAuthorProfile:t=>$(null,null,function*(){var n;try{console.log("Fetching author profile for ID:",t);let a;const l=[`/api/users/${t}/`,`/api/users/${t}/profile/`,`/api/profiles/${t}/`,`/api/users/profiles/${t}/`,`/api/instructors/${t}/`,`/api/teachers/${t}/`];for(const p of l)try{console.log(`Trying endpoint: ${p}`),a=yield ne.get(p),console.log(`Success with endpoint: ${p}`);break}catch(h){console.log(`Failed with endpoint: ${p}`,(n=h.response)==null?void 0:n.status);continue}if(!a)return console.error("All endpoints failed for author profile"),null;console.log("Author profile response:",a.data);let d=a.data;return a.data.profile&&(d=oe(X({},a.data.profile),{user:a.data,user_id:a.data.id,user_email:a.data.email,user_first_name:a.data.first_name,user_last_name:a.data.last_name,user_username:a.data.username})),a.data.user&&(d=oe(X({},a.data),{user_id:a.data.user.id,user_email:a.data.user.email,user_first_name:a.data.user.first_name,user_last_name:a.data.user.last_name,user_username:a.data.user.username})),d}catch(a){return console.error("Error fetching author profile:",a),null}}),getTeacherProfile:t=>$(null,null,function*(){try{console.log("Fetching teacher profile for ID:",t);const n=yield ne.get(`/api/teachers/${t}/`);return console.log("Teacher profile response:",n.data),n.data}catch(n){return console.error("Error fetching teacher profile:",n),null}}),searchArticles:t=>$(null,null,function*(){try{return(yield ne.get("/api/articles/search/",{params:{q:t}})).data}catch(n){throw console.error("Error searching articles:",n),n}}),getArticleCategories:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/categories/")).data}catch(t){return console.error("Error fetching article categories:",t),[]}}),getArticleComments:t=>$(null,null,function*(){try{console.log("Fetching comments for article:",t);const n=yield ne.get(`/api/articles/comments/?article=${t}`);return console.log("Comments API response:",n),n.data}catch(n){return console.error("Error fetching article comments:",n),[]}}),createArticleComment:(t,n)=>$(null,null,function*(){try{console.log("Creating comment for article:",t,"with data:",n);const a=yield ne.post("/api/articles/comments/",X({article:t},n));return console.log("Comment created successfully:",a.data),a.data}catch(a){throw console.error("Error creating article comment:",a),a}}),likeArticle:t=>$(null,null,function*(){try{return(yield ne.post(`/api/articles/articles/${t}/likes/`)).data}catch(n){throw console.error("Error liking article:",n),n}}),unlikeArticle:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/articles/articles/${t}/likes/unlike/`)).data}catch(n){throw console.error("Error unliking article:",n),n}}),bookmarkArticle:(t,n=null)=>$(null,null,function*(){try{return(yield ne.post(`/api/articles/articles/${t}/bookmarks/`,{notes:n})).data}catch(a){throw console.error("Error bookmarking article:",a),a}}),removeBookmark:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/articles/articles/${t}/bookmarks/remove_bookmark/`)).data}catch(n){throw console.error("Error removing bookmark:",n),n}}),rateArticle:(t,n,a=null)=>$(null,null,function*(){try{return(yield ne.post(`/api/articles/articles/${t}/ratings/`,{rating:n,comment:a})).data}catch(l){throw console.error("Error rating article:",l),l}}),getUserBookmarks:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/my/bookmarks/")).data}catch(t){throw console.error("Error fetching user bookmarks:",t),t}}),getUserRatings:()=>$(null,null,function*(){try{return(yield ne.get("/api/articles/my/ratings/")).data}catch(t){throw console.error("Error fetching user ratings:",t),t}}),checkArticleLike:t=>$(null,null,function*(){try{return(yield ne.get(`/api/articles/articles/${t}/likes/check_like/`)).data}catch(n){throw console.error("Error checking article like:",n),n}}),checkArticleBookmark:t=>$(null,null,function*(){try{return(yield ne.get(`/api/articles/articles/${t}/bookmarks/check_bookmark/`)).data}catch(n){throw console.error("Error checking article bookmark:",n),n}}),getArticleRatingStats:t=>$(null,null,function*(){try{return(yield ne.get(`/api/articles/articles/${t}/ratings/stats/`)).data}catch(n){throw console.error("Error fetching article rating stats:",n),n}})},sl=cd("auth/register",(a,l)=>$(null,[a,l],function*(t,{rejectWithValue:n}){var d,p,h,x;try{const m=yield dd.register(t);return m.success?(localStorage.setItem("token",m.token),localStorage.setItem("user",JSON.stringify(m.user)),{user:m.user,profile:m.profile,user_details:m.user_details,token:m.token}):n(m.error||"Registration failed")}catch(m){const y=((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.error)||((x=(h=m.response)==null?void 0:h.data)==null?void 0:x.details)||m.message||"Registration failed";return n(y)}})),Xo=cd("auth/login",(a,l)=>$(null,[a,l],function*(t,{rejectWithValue:n}){var d,p,h,x,m;try{const y=yield dd.login(t);return y.user?(localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),{user:y.user,profile:y.profile,user_details:y.user_details,token:y.token}):n(y.error||"Login failed")}catch(y){const v=((h=(p=(d=y.response)==null?void 0:d.data)==null?void 0:p.non_field_errors)==null?void 0:h[0])||((m=(x=y.response)==null?void 0:x.data)==null?void 0:m.error)||y.message||"Login failed";return n(v)}})),ll=cd("auth/logout",(a,l)=>$(null,[a,l],function*(t,{rejectWithValue:n}){try{return yield dd.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),null}catch(d){return localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),n(d.message||"Logout failed")}})),Zu=cd("auth/getProfile",(a,l)=>$(null,[a,l],function*(t,{rejectWithValue:n}){try{return yield dd.getProfile()}catch(d){return n(d.message||"Failed to get profile")}})),wg=cd("auth/updateProfile",(a,l)=>$(null,[a,l],function*(t,{rejectWithValue:n}){var d,p,h,x;try{return yield dd.updateProfile(t)}catch(m){const y=((p=(d=m.response)==null?void 0:d.data)==null?void 0:p.error)||((x=(h=m.response)==null?void 0:h.data)==null?void 0:x.details)||m.message||"Profile update failed";return n(y)}})),EA={user:null,profile:null,user_details:null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),loading:!1,error:null},iS=rS({name:"auth",initialState:EA,reducers:{clearError:t=>{t.error=null},setUser:(t,n)=>{t.user=n.payload,t.isAuthenticated=!!n.payload}},extraReducers:t=>{t.addCase(Xo.pending,n=>{n.loading=!0,n.error=null}).addCase(Xo.fulfilled,(n,a)=>{n.loading=!1,n.isAuthenticated=!0,n.user=a.payload.user,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.token=a.payload.token,n.error=null}).addCase(Xo.rejected,(n,a)=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=a.payload||"  "}).addCase(sl.pending,n=>{n.loading=!0,n.error=null}).addCase(sl.fulfilled,(n,a)=>{n.loading=!1,n.isAuthenticated=!0,n.user=a.payload.user,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.token=a.payload.token,n.error=null}).addCase(sl.rejected,(n,a)=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=a.payload||"  "}).addCase(ll.pending,n=>{n.loading=!0}).addCase(ll.fulfilled,n=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=null}).addCase(ll.rejected,(n,a)=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=a.payload||"  "}).addCase(Zu.pending,n=>{n.loading=!0}).addCase(Zu.fulfilled,(n,a)=>{n.loading=!1,n.user=a.payload.user,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.error=null}).addCase(Zu.rejected,(n,a)=>{n.loading=!1,n.error=a.payload||"    "}).addCase(wg.pending,n=>{n.loading=!0}).addCase(wg.fulfilled,(n,a)=>{n.loading=!1,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.error=null}).addCase(wg.rejected,(n,a)=>{n.loading=!1,n.error=a.payload||"    "})}}),{clearError:a7,setUser:o7}=iS.actions,RA=iS.reducer,aS=w.createContext(),TA=({children:t})=>{const n=od(),{user:a,profile:l,user_details:d,isAuthenticated:p,loading:h}=am(z=>z.auth),x=ct();w.useEffect(()=>{$(null,null,function*(){try{const R=localStorage.getItem("token"),B=localStorage.getItem("user");if(R&&B&&(!a||!l))try{yield n(Zu())}catch(T){console.error("Error getting profile:",T),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole")}}catch(R){console.error("Error initializing auth:",R)}})},[n,a,l]);const m=w.useCallback(z=>$(null,null,function*(){try{return yield n(Xo(z))}catch(R){throw console.error("Login error:",R),R}}),[n]),y=w.useCallback(()=>$(null,null,function*(){try{yield n(ll()),x("/login")}catch(z){console.error("Logout error:",z),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),x("/login")}}),[n,x]),v=w.useCallback(z=>{var B,T;if(!l)return!1;const R=((B=l.status)==null?void 0:B.toLowerCase())||((T=d==null?void 0:d.type)==null?void 0:T.toLowerCase());return R===z||R==="admin"},[l,d]),S=w.useCallback(z=>{var B,T;if(!l)return!1;const R=((B=l.status)==null?void 0:B.toLowerCase())||((T=d==null?void 0:d.type)==null?void 0:T.toLowerCase());return z.includes(R)||R==="admin"},[l,d]),C=w.useCallback(()=>{var z,R;return l?((z=l.status)==null?void 0:z.toLowerCase())||((R=d==null?void 0:d.type)==null?void 0:R.toLowerCase())||"student":"guest"},[l,d]),_={user:a,profile:l,user_details:d,isAuthenticated:p,loading:h,login:m,logout:y,hasRole:v,hasAnyRole:S,getUserRole:C,updateUser:z=>{console.warn("updateUser is not implemented. Use Redux actions instead.")}};return e(aS.Provider,{value:_,children:t})},uo=()=>{const t=w.useContext(aS);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Sg=V0({direction:"rtl",palette:{primary:{main:"#0288d1",light:"#7D9AFC",dark:"#0288d1",contrastText:"#ffffff"},secondary:{main:"#0e5181",light:"#968FFF",dark:"#4D44B5",contrastText:"#ffffff"},success:{main:"#00C853",light:"#5EFC82",dark:"#009624"},warning:{main:"#FFAB00",light:"#FFD54F",dark:"#FF8F00"},error:{main:"#FF3D00",light:"#FF6E40",dark:"#DD2C00"},background:{default:"#F8FAFF",paper:"#ffffff"},text:{primary:"#1A1A1A",secondary:"#666666",disabled:"#B3B3B3"},grey:{50:"#FAFAFA",100:"#F5F5F5",200:"#EEEEEE",300:"#E0E0E0",400:"#BDBDBD",500:"#9E9E9E",600:"#757575",700:"#616161",800:"#424242",900:"#212121"}},typography:{fontFamily:'"Tajawal", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:800,fontSize:"3.5rem",lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontWeight:700,fontSize:"2.5rem",lineHeight:1.2,letterSpacing:"-0.01em"},h3:{fontWeight:600,fontSize:"2rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.3},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.4},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.4},subtitle1:{fontSize:"1rem",lineHeight:1.5,fontWeight:500},subtitle2:{fontSize:"0.875rem",lineHeight:1.5,fontWeight:500},body1:{fontSize:"1rem",lineHeight:1.75},body2:{fontSize:"0.875rem",lineHeight:1.75},button:{textTransform:"none",fontWeight:600,letterSpacing:"0.01em"},caption:{fontSize:"0.75rem",lineHeight:1.66},overline:{fontSize:"0.75rem",lineHeight:2.66,letterSpacing:"0.08333em",textTransform:"uppercase"}},shape:{borderRadius:12},components:{MuiCssBaseline:{styleOverrides:{"html, body":{scrollBehavior:"smooth"},a:{textDecoration:"none",color:"inherit"},".MuiContainer-root":{paddingLeft:"24px",paddingRight:"24px","@media (min-width: 600px)":{paddingLeft:"32px",paddingRight:"32px"}}}},MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",boxShadow:"none",textTransform:"none",fontWeight:600,fontSize:"0.9375rem",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.12)",transform:"translateY(-2px)"},"&.MuiButton-contained":{"&:hover":{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}},"&.MuiButton-outlined":{borderWidth:"2px","&:hover":{borderWidth:"2px"}}},contained:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)","&.MuiButton-containedPrimary":{background:"linear-gradient(90deg, #0288d1 0%, #0e5181 100%)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",transform:"translateY(-4px)"}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.05)",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,"& fieldset":{borderColor:"#E0E0E0"},"&:hover fieldset":{borderColor:"#BDBDBD"},"&.Mui-focused fieldset":{borderColor:"#0288d1",boxShadow:"0 0 0 3px rgba(74, 108, 247, 0.1)"}}}}},MuiChip:{styleOverrides:{root:{borderRadius:6,fontWeight:500},colorPrimary:{backgroundColor:"rgba(74, 108, 247, 0.1)",color:"#0288d1"},colorSecondary:{backgroundColor:"rgba(108, 99, 255, 0.1)",color:"#0e5181"}}}},customShadows:{small:"0 2px 8px rgba(0, 0, 0, 0.08)",medium:"0 4px 16px rgba(0, 0, 0, 0.1)",large:"0 8px 24px rgba(0, 0, 0, 0.12)",primary:"0 8px 24px rgba(74, 108, 247, 0.2)",secondary:"0 8px 24px rgba(108, 99, 255, 0.2)"}}),MA={".text-ellipsis":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".text-gradient":{background:"linear-gradient(90deg, #0288d1 0%, #0e5181 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},".glass-effect":{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},".smooth-transition":{transition:"all 0.3s ease"}},Dc="/assets/profile-DRkKlqcl.jpg",Cg=270,IA=[{text:"",icon:e(kh,{}),path:"/",exact:!0},{text:" ",icon:e(nh,{}),path:"/teacher/dashboard"},{text:"",icon:e(U5,{}),path:"/teacher/my-courses"},{text:"",icon:e(Jr,{}),path:"/teacher/assignments"},{text:"",icon:e(ar,{}),path:"/teacher/quizzes"},{text:"",icon:e(jr,{}),path:"/teacher/exams"},{text:"",icon:e(cn,{}),path:"/teacher/meetings"},{text:"",icon:e(en,{}),path:"/teacher/articles"},{text:"",icon:e(ed,{}),path:"/teacher/settings"}],DA=[{text:"",icon:e(kh,{}),path:"/",exact:!0},{text:" ",icon:e(nh,{}),path:"/student/dashboard"},{text:"",icon:e(U5,{}),path:"/student/my-courses"},{text:"",icon:e(Jr,{}),path:"/student/assignments"},{text:"",icon:e(cn,{}),path:"/student/meetings"},{text:"",icon:e(zt,{}),path:"/student/certificates"},{text:"",icon:e(ed,{}),path:"/student/settings"}],kg=({children:t,toggleDarkMode:n,isDarkMode:a})=>{const l=ad(),d=ct(),p=od(),{getUserRole:h,user:x}=uo(),[m,y]=w.useState(null),[v,S]=w.useState(null),C=w.useRef(null),_=w.useRef(null),z=[{id:1,text:"     ",time:" 10 ",read:!1},{id:2,text:"    ",time:" ",read:!1},{id:3,text:"  ",time:" ",read:!0}],R=z.filter(M=>!M.read).length,T=x?{name:x.first_name&&x.last_name?`${x.first_name} ${x.last_name}`:x.username||"",email:x.email||"",avatar:x.profile_picture||Dc,role:h()==="instructor"?"":"",description:x.bio||(h()==="instructor"?"  ":"  ")}:{name:"",email:"",avatar:Dc,role:"",description:"  "},O=M=>{y(M.currentTarget)},q=M=>{S(M.currentTarget)},j=()=>{y(null),S(null)},ee=()=>{p(ll()),d("/login"),j()};w.useEffect(()=>{const M=U=>{C.current&&!C.current.contains(U.target)&&y(null),_.current&&!_.current.contains(U.target)&&S(null)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]);const V=h(),k=(()=>{switch(V){case"instructor":case"teacher":return IA;case"student":default:return DA}})(),G=(M,U=!1)=>U?l.pathname===M:l.pathname.startsWith(M)&&M!=="/",W=o(c,{sx:{height:"100%",background:"rgba(255,255,255,0.95)",borderRadius:"24px 0 0 24px",boxShadow:"0 8px 32px 0 rgba(31,38,135,0.10)",p:2,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},children:[o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3,background:"rgba(14,81,129,0.05)",borderRadius:3,p:2,boxShadow:"0 2px 8px 0 rgba(14,81,129,0.07)"},children:[e(Tt,{src:T.avatar,alt:T.name,sx:{width:90,height:90,mb:1,border:"3px solid #e5978b",boxShadow:"0 2px 8px 0 rgba(14,81,129,0.09)"}}),e(f,{fontWeight:700,children:T.name}),e(f,{variant:"caption",color:"text.secondary",children:T.description})]}),e(Vt,{sx:{width:"100%",mb:2}}),e(Rr,{sx:{width:"100%"},children:k.map(M=>{const U=G(M.path,M.exact);return e(F6,{to:M.path,style:{textDecoration:"none",color:"inherit",display:"block",marginBottom:"8px",borderRadius:"8px",background:U?"linear-gradient(90deg, rgba(14,81,129,0.1) 0%, #fff 100%)":"none",boxShadow:U?"0 2px 8px 0 rgba(14,81,129,0.10)":"none"},children:o(dc,{sx:{borderRadius:2,color:U?"#0e5181":"#757575","&:hover":{background:"linear-gradient(90deg, rgba(14,81,129,0.05) 0%, #fff 100%)",color:"#0e5181"}},children:[e(fr,{sx:{minWidth:36,color:U?"#0e5181":"#bdbdbd",fontSize:24},children:M.icon}),e(Ut,{primary:M.text,sx:{fontWeight:600}}),M.badge&&e(es,{badgeContent:M.badge,color:"secondary",sx:{position:"absolute",left:16}})]})},M.text)})})]});return o(c,{sx:{display:"flex",height:"100vh",width:"100%",background:"#f6f7fb",direction:"rtl",overflow:"hidden","& *":{"&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.02)"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"4px",border:"2px solid transparent",backgroundClip:"padding-box","&:hover":{backgroundColor:"rgba(0,0,0,0.15)"}}}},children:[e(c,{sx:{width:Cg,flexShrink:0,position:"relative",height:"100%",overflowY:"auto",overflowX:"hidden","&:hover":{"&::-webkit-scrollbar-thumb":{backgroundColor:"#a8a8a8"}}},children:e(t6,{variant:"permanent",anchor:"right",sx:{width:Cg,flexShrink:0,"& .MuiDrawer-paper":{width:Cg,boxSizing:"border-box",border:"none",background:"transparent",boxShadow:"none",position:"relative",height:"100%",overflow:"visible"}},children:W})}),o(c,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",width:"100%","& > *:first-child":{flexShrink:0},"& > *:last-child":{flexGrow:1,overflowY:"auto",overflowX:"hidden",p:4,pt:2,maxWidth:"100%","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)","&:hover":{backgroundColor:"rgba(0,0,0,0.15)"}}}},children:[e(c,{sx:{position:"relative",zIndex:1e3},children:e(Zc,{position:"static",elevation:0,sx:{background:"rgba(255,255,255,0.85)",boxShadow:"0 2px 10px 0 rgba(14,81,129,0.04)",mb:3,borderRadius:3},children:o(Jc,{sx:{justifyContent:"space-between"},children:[e(De,{component:"form",sx:{p:"2px 8px",display:"flex",alignItems:"center",width:250,background:"#fff",borderRadius:2,boxShadow:0},children:e(H5,{sx:{ml:1,flex:1},placeholder:"...",inputProps:{"aria-label":""}})}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[o(c,{ref:_,sx:{position:"relative"},children:[e(xe,{color:"inherit",sx:{bgcolor:v?"rgba(14,81,129,0.1)":"rgba(229,151,139,0.1)",p:1.2},onClick:q,children:e(es,{badgeContent:R,color:"error",children:e(I1,{})})}),v&&o(De,{sx:{position:"absolute",top:"100%",left:0,width:350,maxHeight:400,overflowY:"auto",borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",zIndex:9999,p:2,background:"#ffffff",border:"1px solid #e0e0e0",mt:1},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:1},children:[e(f,{variant:"subtitle1",fontWeight:600,children:""}),e(f,{variant:"caption",color:"primary",sx:{cursor:"pointer"},children:"  "})]}),e(Vt,{}),e(Rr,{sx:{p:0},children:z.map(M=>e(dc,{sx:{borderRadius:1,mb:.5,bgcolor:M.read?"transparent":"rgba(14,81,129,0.05)","&:hover":{bgcolor:"rgba(229,151,139,0.05)"}},children:o(c,{sx:{width:"100%"},children:[e(f,{variant:"body2",sx:{fontWeight:M.read?400:600},children:M.text}),e(f,{variant:"caption",color:"text.secondary",children:M.time})]})},M.id))}),e(c,{sx:{textAlign:"center",mt:1},children:e(f,{variant:"body2",color:"primary",sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:" "})})]})]}),o(c,{ref:C,sx:{position:"relative"},children:[e(xe,{onClick:O,sx:{p:0,"&:hover":{opacity:.8}},children:e(Tt,{src:T.avatar,alt:T.name,sx:{width:40,height:40,border:"2px solid #e5978b",cursor:"pointer",transition:"all 0.2s","&:hover":{transform:"scale(1.05)",boxShadow:"0 2px 8px rgba(14,81,129,0.3)"}}})}),m&&o(De,{sx:{position:"absolute",top:"100%",left:0,width:250,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",zIndex:9999,overflow:"hidden",background:"#ffffff",border:"1px solid #e0e0e0",mt:1},children:[o(c,{sx:{p:2,textAlign:"center",borderBottom:"1px solid #f0f0f0"},children:[e(Tt,{src:T.avatar,alt:T.name,sx:{width:64,height:64,mb:1,mx:"auto",border:"2px solid #e5978b"}}),e(f,{variant:"subtitle1",fontWeight:600,children:T.name}),e(f,{variant:"body2",color:"text.secondary",children:T.role}),e(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:T.email})]}),o(Rr,{sx:{p:0},children:[o(dc,{sx:{"&:hover":{bgcolor:"rgba(14,81,129,0.05)"}},children:[e(fr,{sx:{minWidth:36},children:e(ed,{fontSize:"small"})}),e(Ut,{primary:" "})]}),o(dc,{sx:{"&:hover":{bgcolor:"rgba(14,81,129,0.05)"}},children:[e(fr,{sx:{minWidth:36},children:e(I1,{fontSize:"small"})}),e(Ut,{primary:""})]}),e(Vt,{}),o(dc,{onClick:ee,sx:{color:"#f44336","&:hover":{bgcolor:"#ffebee"}},children:[e(fr,{sx:{minWidth:36,color:"inherit"},children:o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e("polyline",{points:"16 17 21 12 16 7"}),e("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})}),e(Ut,{primary:" "})]})]})]})]})]})]})})}),e(c,{component:"main",sx:{flexGrow:1,p:0,pt:0,width:"100%"},children:t})]})]})},k0="/assets/logo-BNzSFtTn.png",WA=yt`
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
`,$A=te(Zc,{shouldForwardProp:t=>t!=="scrolled"})(({theme:t,scrolled:n})=>({background:n?`linear-gradient(135deg, 
        rgba(102, 51, 153, 0.65) 0%, 
        rgba(51, 54, 121, 0.62) 50%, 
        rgba(27, 27, 72, 0.58) 100%)`:"transparent",backdropFilter:"none",WebkitBackdropFilter:"none",boxShadow:n?"0 4px 20px rgba(102, 51, 153, 0.3)":"none",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",padding:n?"12px 0":"20px 0",minHeight:n?"70px":"90px",borderBottom:n?"1px solid rgba(255, 255, 255, 0.08)":"none",animation:`${WA} 0.6s ease-out`,"&.MuiAppBar-root":{zIndex:t.zIndex.drawer+1},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:n?"linear-gradient(90deg, #663399, #333679, #1B1B48)":"linear-gradient(90deg, #E5978B, #D17A6F, #E5978B)",opacity:n?.8:1,transition:"all 0.4s ease"}}));te(re)(({theme:t,scrolled:n})=>({background:n?"linear-gradient(135deg, #663399 0%, #333679 50%, #1B1B48 100%)":"linear-gradient(135deg, #2D1B69 0%, #1A103F 50%, #0F0A2A 100%)",color:"white",borderRadius:"30px",padding:"12px 30px",fontWeight:"600",textTransform:"none",fontSize:"15px",boxShadow:n?"0 6px 20px rgba(102, 51, 153, 0.4)":"0 6px 20px rgba(45, 27, 105, 0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:n?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(229, 151, 139, 0.3)","&:hover":{transform:"translateY(-3px) scale(1.02)",boxShadow:n?"0 10px 30px rgba(102, 51, 153, 0.6)":"0 10px 30px rgba(229, 151, 139, 0.6)",background:n?"linear-gradient(135deg, #7a3fb3 0%, #3d42a0 50%, #23235a 100%)":"linear-gradient(135deg, #3A2375 0%, #2D1B69 50%, #1A103F 100%)"},"&:active":{transform:"translateY(-1px) scale(0.98)"}}));te("div")(({theme:t,scrolled:n})=>({position:"relative",borderRadius:"30px",backgroundColor:n?"rgba(255, 255, 255, 0.12)":"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(10px)",border:n?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:n?"rgba(255, 255, 255, 0.18)":"rgba(255, 255, 255, 0.12)",borderColor:n?"rgba(255, 255, 255, 0.25)":"rgba(229, 151, 139, 0.3)",boxShadow:n?"0 4px 15px rgba(102, 51, 153, 0.3)":"0 4px 15px rgba(229, 151, 139, 0.2)"},"&:focus-within":{backgroundColor:n?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.15)",borderColor:n?"#663399":"#E5978B",boxShadow:n?"0 0 0 3px rgba(102, 51, 153, 0.2)":"0 0 0 3px rgba(229, 151, 139, 0.2)"},marginRight:t.spacing(2),marginLeft:t.spacing(2),width:"100%",maxWidth:"450px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",[t.breakpoints.down("sm")]:{margin:"10px 0",width:"100%"}}));te("div")(({theme:t})=>({padding:t.spacing(0,2),height:"100%",position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#FFFFFF",pointerEvents:"none",fontSize:"20px"}));te(H5)(({theme:t})=>({color:"#FFFFFF",width:"100%","& .MuiInputBase-input":{padding:"16px 20px 16px 55px",width:"100%",fontSize:"15px",fontWeight:"500","&::placeholder":{color:"rgba(255, 255, 255, 0.7)",opacity:1,fontWeight:"400"}}}));const F2=te(re)(({theme:t,isHome:n,scrolled:a})=>({color:n?"#FFD700":"#FFFFFF",margin:t.spacing(0,1),fontWeight:"500",fontSize:"16px",textTransform:"none",position:"relative",padding:"12px 18px",borderRadius:"12px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:a?"1px solid transparent":"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:a?"transparent":"rgba(255, 255, 255, 0.05)",backdropFilter:a?"none":"blur(10px)","&:hover":{backgroundColor:a?"rgba(255, 255, 255, 0.12)":"rgba(255, 255, 255, 0.15)",transform:"translateY(-2px)",borderColor:n?"rgba(255, 215, 0, 0.3)":a?"rgba(255, 255, 255, 0.2)":"rgba(229, 151, 139, 0.3)",boxShadow:n?"0 6px 20px rgba(255, 215, 0, 0.3)":a?"0 6px 20px rgba(102, 51, 153, 0.3)":"0 6px 20px rgba(229, 151, 139, 0.3)"},"& .MuiButton-endIcon":{marginRight:4,marginLeft:-4,"& svg":{transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}},'&[aria-expanded="true"]':{"& .MuiButton-endIcon svg":{transform:"rotate(180deg)"}}})),P2=te(c)(({theme:t})=>({display:"flex",alignItems:"center",textDecoration:"none",marginRight:"40px","&:hover":{"& img":{transform:"scale(1.08) rotate(2deg)"},"& .MuiTypography-root":{background:"linear-gradient(135deg, #663399, #333679, #1B1B48)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},[t.breakpoints.down("sm")]:{marginRight:"20px"}})),j2=te("img")({height:"80px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",filter:"drop-shadow(0 2px 8px rgba(102, 51, 153, 0.3))","@media (max-width: 600px)":{height:"65px"}}),N2=te(f)(({theme:t,scrolled:n})=>({fontWeight:700,fontSize:"1.5rem",background:n?"linear-gradient(135deg, #663399 0%, #333679 50%, #1B1B48 100%)":"linear-gradient(135deg, #E5978B 0%, #D17A6F 50%, #E5978B 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginRight:"15px",lineHeight:1.2,transition:"all 0.3s ease",[t.breakpoints.down("sm")]:{fontSize:"1.3rem"}}));te(Fc)({"& .MuiPaper-root":{backgroundColor:"rgba(27, 27, 72, 0.95)",color:"#FFFFFF",marginTop:"15px",minWidth:"220px",boxShadow:"0 12px 40px rgba(102, 51, 153, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px","& .MuiDivider-root":{borderColor:"rgba(255, 255, 255, 0.1)",margin:"8px 0"}}});te(We)({padding:"12px 20px",borderRadius:"8px",margin:"2px 8px",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(102, 51, 153, 0.2)",transform:"translateX(5px)"},"& .MuiSvgIcon-root":{marginLeft:"12px",color:"#663399",fontSize:"20px"}});te(es)({"& .MuiBadge-badge":{backgroundColor:"#663399",color:"#FFFFFF",border:"2px solid rgba(27, 27, 72, 0.95)",fontSize:"10px",fontWeight:"600"}});const H2=te(c)(({theme:t})=>({display:"flex",alignItems:"center",background:"rgba(255, 255, 255, 0.08)",borderRadius:"20px",padding:"6px 12px",border:"1px solid rgba(255, 255, 255, 0.15)",marginLeft:t.spacing(1),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(8px)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(102, 51, 153, 0.2), transparent)",transition:"left 0.5s ease"},"&:hover":{background:"rgba(255, 255, 255, 0.12)",borderColor:"rgba(102, 51, 153, 0.4)",transform:"scale(1.05)",boxShadow:"0 8px 25px rgba(102, 51, 153, 0.3)","&::before":{left:"100%"}},"& .MuiSwitch-root":{width:"50px",height:"28px",padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:"2px",transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(22px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:"#663399",opacity:1,border:0,boxShadow:"0 0 15px rgba(102, 51, 153, 0.5)"},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#663399",border:"3px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:t.palette.grey[100]},"&.Mui-disabled + .MuiSwitch-track":{opacity:.7}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:"24px",height:"24px",background:"linear-gradient(135deg, #fff 0%, #f8f9fa 100%)",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(102, 51, 153, 0.1)",border:"1px solid rgba(102, 51, 153, 0.15)"},"& .MuiSwitch-track":{borderRadius:"24px",backgroundColor:"rgba(255, 255, 255, 0.25)",opacity:1,border:"1px solid rgba(255, 255, 255, 0.2)",transition:t.transitions.create(["background-color","box-shadow"],{duration:300})}}})),Bu=te(f)(({theme:t,active:n})=>({fontSize:"12px",fontWeight:"600",color:n?"#fff":"rgba(255, 255, 255, 0.6)",margin:"0 5px",transition:"all 0.3s ease",minWidth:"20px",textAlign:"center",letterSpacing:"0.3px",textShadow:n?"0 1px 2px rgba(0, 0, 0, 0.2)":"none"})),On=()=>{const[t,n]=w.useState(null),[a,l]=w.useState(!1),[d,p]=w.useState(!1),[h,x]=w.useState([]),[m,y]=w.useState(!0),[v,S]=w.useState("ar"),C=ct(),_=ad(),z=od(),R=jt(),B=Fn(R.breakpoints.down("md")),{user:T,isAuthenticated:O}=am(W=>W.auth),[q,j]=w.useState("");w.useEffect(()=>{$(null,null,function*(){try{y(!0);const M=yield An.getCategories();x(M)}catch(M){console.error("Error fetching categories:",M),x([{id:1,name:"",slug:"courses",courses_count:0},{id:2,name:" ",slug:"e-learning",courses_count:0},{id:3,name:"",slug:"diplomas",courses_count:0}])}finally{y(!1)}})},[]);const ee=[{text:"",path:"/",icon:e(kh,{})},{text:"",path:"#",icon:e(ts,{}),dropdown:h.map(W=>({text:W.courses_count?`${W.name} (${W.courses_count})`:W.name,path:`/courses?category=${W.slug}`}))},{text:"",path:"#",icon:e(zt,{}),dropdown:[{text:" ",path:"/about"},{text:"",path:"/articles"},{text:" ",path:"/contact"}]},{text:" ",path:"/dashboard",icon:e(nh,{}),auth:!0}];w.useEffect(()=>{const W=()=>{const M=window.scrollY>30;M!==d&&p(M)};return window.addEventListener("scroll",W),()=>window.removeEventListener("scroll",W)},[d]);const V=W=>{n(W.currentTarget)},L=()=>{n(null)},k=()=>{z(ll()),C("/login"),L()},G=W=>{const M=W.target.checked?"en":"ar";S(M),console.log("Language changed to:",M)};return o(Rt,{children:[e($A,{position:"fixed",scrolled:d,children:e(Xe,{maxWidth:"xl",children:o(Jc,{disableGutters:!0,children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[O?o(Rt,{children:[e(xe,{size:"large","aria-label":"shopping cart",color:"inherit",component:hr,to:"/cart",sx:{backgroundColor:"rgba(255, 255, 255, 0.12)",marginLeft:1,border:"1px solid rgba(255, 255, 255, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",transform:"translateY(-2px) scale(1.05)",borderColor:"rgba(102, 51, 153, 0.4)",boxShadow:"0 6px 20px rgba(102, 51, 153, 0.3)"}},children:e(es,{badgeContent:0,color:"error",children:e(qo,{})})}),e(xe,{size:"large","aria-label":"show notifications",color:"inherit",sx:{backgroundColor:"rgba(255, 255, 255, 0.12)",marginLeft:1,border:"1px solid rgba(255, 255, 255, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",transform:"translateY(-2px) scale(1.05)",borderColor:"rgba(102, 51, 153, 0.4)",boxShadow:"0 6px 20px rgba(102, 51, 153, 0.3)"}},children:e(es,{badgeContent:3,color:"error",children:e(r6,{})})}),e(xe,{onClick:V,size:"small",sx:{ml:2,p:0,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{"& .MuiAvatar-root":{transform:"scale(1.1) rotate(5deg)",boxShadow:"0 0 0 3px #663399, 0 8px 25px rgba(102, 51, 153, 0.4)"}}},children:e(Tt,{alt:(T==null?void 0:T.name)||"User",src:T==null?void 0:T.avatar,sx:{width:44,height:44,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"2px solid #663399",boxShadow:"0 4px 15px rgba(102, 51, 153, 0.3)"}})}),o(Fc,{anchorEl:t,open:!!t,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[o(c,{px:2,py:1,children:[e(f,{variant:"subtitle1",fontWeight:600,children:(T==null?void 0:T.name)||""}),e(f,{variant:"body2",color:"text.secondary",children:(T==null?void 0:T.email)||"user@example.com"})]}),e(Vt,{}),o(We,{onClick:()=>{C("/profile"),L()},children:[e(ku,{sx:{ml:1}})," "]}),o(We,{onClick:()=>{C("/dashboard"),L()},children:[e(nh,{sx:{ml:1}})," "]}),e(Vt,{}),o(We,{onClick:k,children:[e(D1,{sx:{ml:1}})," "]})]})]}):e(xe,{component:hr,to:"/login",size:"large","aria-label":"login",color:"inherit",sx:{backgroundColor:"rgba(255, 255, 255, 0.12)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"12px",width:"48px",height:"48px",marginLeft:1,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",transform:"translateY(-2px) scale(1.05)",borderColor:"rgba(102, 51, 153, 0.4)",boxShadow:"0 6px 20px rgba(102, 51, 153, 0.3)"}},children:e(ku,{})}),o(H2,{sx:{marginLeft:20},children:[" ",e(Bu,{active:v==="ar",children:"AR"}),e(xr,{checked:v==="en",onChange:G,size:"small"}),e(Bu,{active:v==="en",children:"EN"})]})]}),e(c,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},ml:4,"& > *:not(:last-child)":{mr:1}},children:ee.map(W=>{if(W.auth&&!O)return null;if(W.dropdown){const[M,U]=w.useState(null),H=!!M,N=E=>{U(E.currentTarget)},Y=()=>{U(null)};return o("div",{children:[e(F2,{"aria-controls":H?W.text:void 0,"aria-haspopup":"true","aria-expanded":H?"true":void 0,onClick:N,endIcon:e(V5,{}),className:_.pathname.startsWith(W.path)?"active":"",scrolled:d,children:W.text}),e(Fc,{id:W.text,anchorEl:M,open:H,onClose:Y,MenuListProps:{"aria-labelledby":W.text},PaperProps:{style:{backgroundColor:"rgba(27, 27, 72, 0.95)",color:"#FFFFFF",marginTop:"15px",minWidth:"220px",borderRadius:"16px",boxShadow:"0 12px 40px rgba(102, 51, 153, 0.4)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:m?e(c,{display:"flex",justifyContent:"center",p:3,children:e(Qe,{size:24,sx:{color:"#663399"}})}):W.dropdown.length>0?W.dropdown.map(E=>e(We,{component:hr,to:E.path,onClick:Y,sx:{color:"#E6E6E6",padding:"12px 20px",margin:"2px 8px",borderRadius:"8px",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(102, 51, 153, 0.2)",color:"#FFFFFF",transform:"translateX(5px)"},"&.Mui-selected":{backgroundColor:"rgba(102, 51, 153, 0.15)",color:"#663399"}},children:E.text},E.path)):e(We,{disabled:!0,sx:{color:"rgba(255, 255, 255, 0.5)",padding:"16px 20px",textAlign:"center"},children:"   "})})]},W.text)}return e(F2,{component:hr,to:W.path,className:_.pathname===W.path?"active":"",isHome:W.text==="",scrolled:d,children:W.text},W.path)})}),e(c,{sx:{display:"flex",alignItems:"center",ml:"auto"},children:o(P2,{component:hr,to:"/",children:[e(j2,{src:k0,alt:" "}),!B&&e(N2,{variant:"h6",scrolled:d})]})}),e(c,{sx:{display:{xs:"flex",md:"none"},mr:1},children:e(xe,{size:"large","aria-label":"show menu",onClick:()=>l(!0),color:"inherit",sx:{backgroundColor:"rgba(255, 255, 255, 0.12)",border:"1px solid rgba(255, 255, 255, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",transform:"scale(1.05)",borderColor:"rgba(102, 51, 153, 0.4)"}},children:e(q5,{})})})]})})}),a&&o(c,{sx:{position:"fixed",top:0,right:0,width:"80%",maxWidth:"300px",height:"100vh",backgroundColor:"#1A1A2E",zIndex:1300,boxShadow:"-5px 0 30px rgba(0, 0, 0, 0.3)",padding:"20px",overflowY:"auto",transform:a?"translateX(0)":"translateX(100%)",transition:"transform 0.3s ease-in-out"},children:[o(c,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[O?e(Tt,{alt:(T==null?void 0:T.name)||"User",src:T==null?void 0:T.avatar,sx:{width:40,height:40,border:"2px solid #663399"}}):e(ku,{sx:{fontSize:40,color:"#663399"}}),o(H2,{sx:{marginLeft:16},children:[" ",e(Bu,{active:v==="ar",children:"AR"}),e(xr,{checked:v==="en",onChange:G,size:"small"}),e(Bu,{active:v==="en",children:"EN"})]})]}),e(xe,{onClick:()=>l(!1),sx:{color:"#FFFFFF"},children:e(c,{component:"span",sx:{fontSize:"1.5rem"},children:""})})]}),e(c,{display:"flex",justifyContent:"center",alignItems:"center",mb:3,children:o(P2,{component:hr,to:"/",onClick:()=>l(!1),children:[e(j2,{src:k0,alt:" "}),e(N2,{variant:"h6",scrolled:d,children:" "})]})}),o(c,{children:[ee.map(W=>(!W.auth||O)&&o("div",{children:[e(re,{component:hr,to:W.path,fullWidth:!0,startIcon:W.icon,sx:{justifyContent:"flex-start",color:_.pathname===W.path?"#663399":"#FFFFFF",mb:1,borderRadius:"8px",padding:"10px 15px","&:hover":{backgroundColor:"rgba(102, 51, 153, 0.1)"}},onClick:()=>l(!1),children:W.text}),W.dropdown&&W.text===""&&e(c,{ml:2,mt:1,children:m?e(c,{display:"flex",justifyContent:"center",p:1,children:e(Qe,{size:16,sx:{color:"#663399"}})}):W.dropdown.length>0?W.dropdown.map(M=>e(re,{component:hr,to:M.path,fullWidth:!0,size:"small",sx:{justifyContent:"flex-start",color:"rgba(255, 255, 255, 0.8)",mb:.5,borderRadius:"6px",padding:"6px 12px",fontSize:"0.9rem","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)",color:"#663399"}},onClick:()=>l(!1),children:M.text},M.path)):e(f,{variant:"body2",color:"rgba(255, 255, 255, 0.5)",sx:{px:2,py:1},children:"   "})})]},W.path)),O&&e(re,{component:hr,to:"/cart",fullWidth:!0,startIcon:e(qo,{}),sx:{justifyContent:"flex-start",color:_.pathname==="/cart"?"#663399":"#FFFFFF",mb:1,borderRadius:"8px",padding:"10px 15px","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"}},onClick:()=>l(!1),children:" "})]}),e(c,{mt:3,children:O?e(re,{fullWidth:!0,variant:"contained",onClick:k,startIcon:e(D1,{}),sx:{background:"linear-gradient(135deg, #663399 0%, #333679 50%, #1B1B48 100%)","&:hover":{opacity:.9}},children:" "}):e(re,{fullWidth:!0,variant:"contained",component:hr,to:"/login",startIcon:e(ku,{}),sx:{background:"linear-gradient(135deg, #663399 0%, #333679 50%, #1B1B48 100%)","&:hover":{opacity:.9}},onClick:()=>l(!1),children:" "})})]}),a&&e(c,{onClick:()=>l(!1),sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1200}})]})},LA="/assets/footerBG-Bts_9o1E.png",OA="/assets/footerphone-NIyfDdaw.png",BA="/assets/footermassage-D5DpVN6M.png",FA="/assets/footerlocation-DP3wlIkd.png",PA=te(c)(({theme:t})=>({background:`url(${LA}) center/cover no-repeat, linear-gradient(135deg, #9C27B0 0%, #7B1FA2 50%, #6A1B9A 100%)`,color:"#FFFFFF",padding:t.spacing(2.5,0,2),position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.1)",zIndex:0},"& > *":{position:"relative",zIndex:1}})),_g=te(f)(({theme:t})=>({fontWeight:700,color:"#FFFFFF",marginBottom:t.spacing(1.5),position:"relative",fontSize:"1rem",paddingBottom:t.spacing(.5),"&:after":{content:'""',position:"absolute",right:0,bottom:0,width:40,height:1,background:"rgba(255, 255, 255, 0.5)",borderRadius:1,borderBottom:"1px dashed rgba(255, 255, 255, 0.5)"}})),U2=te(va)(({theme:t})=>({display:"block",color:"#E6E6E6",marginBottom:t.spacing(.5),textDecoration:"none",transition:"all 0.3s ease",fontSize:"0.85rem","&:hover":{color:"#FFFFFF",paddingRight:t.spacing(.5)}}));te(qt)({fontSize:"1rem",marginRight:8,opacity:0,transform:"translateX(-5px)",transition:"all 0.3s ease"});te(c)(({theme:t})=>({display:"flex",alignItems:"center",marginBottom:t.spacing(2),textAlign:"center",flexDirection:"column",flex:1,"& .MuiSvgIcon-root":{marginBottom:t.spacing(1),color:"#FFFFFF",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",padding:t.spacing(1.5),fontSize:"1.5rem",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center"}}));const jA=te(xe)(({theme:t})=>({backgroundColor:"#4A148C",color:"#FFFFFF",margin:t.spacing(0,1,1,0),width:"40px",height:"40px",transition:"all 0.3s ease","&:hover":{backgroundColor:"#6A1B9A",transform:"translateY(-2px)"}})),Bn=()=>{const t=jt(),n=Fn(t.breakpoints.down("md")),a=[{icon:e(c,{component:"img",src:OA,alt:"Phone",sx:{width:"80px",height:"80px"}}),title:"Call us any time:",text:"+962796098808"},{icon:e(c,{component:"img",src:BA,alt:"Email",sx:{width:"80px",height:"80px"}}),title:"Email us 24/7 hours:",text:"info@triplesacademy.com"},{icon:e(c,{component:"img",src:FA,alt:"Location",sx:{width:"80px",height:"80px"}}),title:"Our academy location:",text:"Al-Madina Al-Munawara Street, Amman - Jordan"}],l=[{text:"courses",to:"/courses"},{text:"Flash Cards",to:"/flashcards"},{text:"Questions Bank",to:"/question-bank"},{text:"blog",to:"/blog"},{text:"About Us",to:"/about"},{text:"Contact Us",to:"/contact"}],d=[{text:" ",to:"/faq"},{text:" ",to:"/privacy-policy"},{text:" ",to:"/terms"},{text:" ",to:"/refund-policy"},{text:" ",to:"/support"}],p=[{icon:e(_h,{}),url:"https://facebook.com"},{icon:e(i6,{}),url:"https://instagram.com"}],h=new Date().getFullYear();return e(PA,{component:"footer",children:o(Xe,{maxWidth:"xl",sx:{position:"relative",zIndex:1},children:[e(c,{sx:{background:"linear-gradient(135deg, #4A148C 0%, #6A1B9A 50%, #7B1FA2 100%)",borderRadius:"0px",padding:t.spacing(2,0),mb:3,display:"flex",flexDirection:n?"column":"row",alignItems:"center",justifyContent:"space-between",gap:0,position:"relative","&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"1px",background:"rgba(255, 255, 255, 0.1)"}},children:a.map((x,m)=>o(c,{sx:{display:"flex",alignItems:"center",gap:2,flex:1,justifyContent:"center",padding:t.spacing(1.5,1),borderRight:m<a.length-1?"1px solid rgba(255, 255, 255, 0.2)":"none","&:last-child":{borderRight:"none"}},children:[e(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",backgroundColor:"transparent",borderRadius:"0",padding:0,border:"none"},children:x.icon}),o(c,{sx:{textAlign:"left"},children:[e(f,{variant:"body2",sx:{color:"#FFFFFF",fontWeight:500,mb:.3,fontSize:"0.85rem"},children:x.title}),e(f,{variant:"body2",sx:{color:"#FFFFFF",fontWeight:600,fontSize:"0.9rem"},children:x.text})]})]},m))}),o(le,{container:!0,spacing:4,sx:{alignItems:"stretch",justifyContent:"center"},children:[e(le,{item:!0,xs:12,sm:6,md:2.5,children:o(c,{sx:{background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px",padding:t.spacing(3),height:"100%",minHeight:"250px",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(c,{display:"flex",alignItems:"center",justifyContent:"center",mb:2.5,children:e(c,{component:"img",src:k0,alt:"Triple S Academy Logo",sx:{width:{xs:140,sm:160,md:180},height:{xs:140,sm:160,md:180},maxWidth:"100%",objectFit:"contain",filter:"brightness(0) invert(1)",transition:"all 0.3s ease","&:hover":{filter:"brightness(0) invert(1) drop-shadow(0 0 20px rgba(255, 255, 255, 0.5))",transform:"scale(1.05)"}}})}),e(f,{variant:"body2",sx:{color:"#FFFFFF",lineHeight:1.5,mb:2.5,fontSize:"0.85rem",textAlign:"center",fontWeight:400},children:"Discover your hidden potential and start your journey of academic excellence with us."}),o(c,{sx:{textAlign:"center"},children:[e(f,{variant:"body2",sx:{color:"#FFFFFF",fontWeight:600,mb:1.5,fontSize:"0.85rem"},children:"FOLLOW US ON"}),e(c,{sx:{display:"flex",gap:.8,justifyContent:"center"},children:p.map((x,m)=>e(jA,{component:"a",href:x.url,target:"_blank",rel:"noopener noreferrer",sx:{width:"35px",height:"35px",fontSize:"1.1rem"},children:x.icon},m))})]})]})}),e(le,{item:!0,xs:12,sm:6,md:2.5,children:o(c,{sx:{background:"rgba(255, 255, 255, 0.06)",borderRadius:"12px",padding:t.spacing(3),height:"100%",minHeight:"250px",display:"flex",flexDirection:"column",justifyContent:"flex-start",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(_g,{sx:{fontSize:"1rem",mb:2},children:"Site Links"}),l.map((x,m)=>e(c,{mb:.8,children:e(U2,{component:hr,to:x.to,underline:"none",sx:{fontSize:"0.85rem",color:"#FFFFFF"},children:x.text})},m))]})}),e(le,{item:!0,xs:12,sm:6,md:2.5,children:o(c,{sx:{background:"rgba(255, 255, 255, 0.06)",borderRadius:"12px",padding:t.spacing(3),height:"100%",minHeight:"250px",display:"flex",flexDirection:"column",justifyContent:"flex-start",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(_g,{sx:{fontSize:"1rem",mb:2},children:"Other Links"}),d.map((x,m)=>e(c,{mb:.8,children:e(U2,{component:hr,to:x.to,underline:"none",sx:{fontSize:"0.85rem",color:"#FFFFFF"},children:x.text})},m))]})}),e(le,{item:!0,xs:12,sm:6,md:2.5,children:o(c,{sx:{background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px",padding:t.spacing(3),height:"100%",minHeight:"250px",display:"flex",flexDirection:"column",justifyContent:"flex-start",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e(_g,{sx:{fontSize:"1rem",mb:2},children:"Get in touch!"}),e(f,{variant:"body2",sx:{color:"#FFFFFF",lineHeight:1.4,mb:2,fontSize:"0.8rem",textAlign:"center"},children:"Subscribe our newsletter to get our latest Update & news"}),o(c,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[o(c,{sx:{position:"relative"},children:[e("input",{type:"email",placeholder:"Email Email",style:{width:"100%",padding:"10px 35px 10px 10px",border:"1px solid #E0E0E0",borderRadius:"6px",backgroundColor:"#FFFFFF",color:"#333333",fontSize:"0.85rem",outline:"none"}}),e(n6,{sx:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",color:"#666666",fontSize:"1rem"}})]}),e(re,{variant:"contained",sx:{backgroundColor:"#4A148C",color:"#FFFFFF",fontWeight:600,padding:"10px 16px",borderRadius:"6px",textTransform:"none",fontSize:"0.85rem","&:hover":{backgroundColor:"#6A1B9A",transform:"translateY(-2px)"}},children:"SUBSCRIBE NOW "})]})]})})]}),e(c,{sx:{mt:4,pt:3,borderTop:"1px solid rgba(255,255,255,0.2)",display:"flex",justifyContent:"center",alignItems:"center"},children:o(f,{variant:"body2",sx:{color:"#FFFFFF",textAlign:"center",fontSize:"0.85rem"},children:["Copyright  ",h," Bluetech Solutions All Rights Reserved."]})})]})})};yt`
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
`;yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`;yt`
  0% { transform: translateY(30px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
`;const NA=yt`
  0% { transform: translateX(-100px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
`,pm=yt`
  0% { transform: translateY(50px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
`;yt`
  0% { transform: translateX(-100%) skewX(-15deg); }
  100% { transform: translateX(200%) skewX(-15deg); }
`;const oS=yt`
  0% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(1); opacity: 0.8; }
`;te(c)(({theme:t})=>({position:"absolute",width:"100%",height:"100%",perspective:"1000px",zIndex:0,"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #0e5181 0%, #e5978b 100%)",animation:"${gradientBG} 15s ease infinite",backgroundSize:"400% 400%",zIndex:0}}));te(c)(({theme:t,src:n})=>({position:"absolute",width:"35%",height:"90%",left:"8%",top:"5%",transformStyle:"preserve-3d",transition:"transform 0.5s ease","&:hover":{transform:"rotateY(5deg) rotateX(5deg) scale(1.05)"},"&:after":{content:'""',position:"absolute",width:"100%",height:"100%",backgroundImage:`url(${n})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"15px",boxShadow:"0 15px 35px rgba(0,0,0,0.15)",transform:"translateZ(40px)",transition:"all 0.4s ease",backgroundColor:"rgba(255,255,255,0.95)",padding:"20px"},"@keyframes float":{"0%":{transform:"translateZ(0) rotate(0deg)"},"50%":{transform:"translateZ(20px) rotate(2deg)"},"100%":{transform:"translateZ(0) rotate(0deg)"}},animation:"float 6s ease-in-out infinite"}));const HA=te(c)(({theme:t})=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0,overflow:"hidden"})),Dn=te(c)(({top:t,left:n,width:a,height:l,rotation:d,color:p,delay:h})=>({position:"absolute",top:`${t}%`,left:`${n}%`,width:`${a}px`,height:`${l}px`,background:p,borderRadius:"20px",transform:`rotate(${d}deg)`,opacity:.6,animation:`${oS} 4s ease-in-out ${h}s infinite`})),Xn=te(c)(({top:t,left:n,size:a,delay:l})=>({position:"absolute",top:`${t}%`,left:`${n}%`,width:`${a}px`,height:`${a}px`,border:"2px solid #E5978B",borderRadius:"50%",opacity:.4,animation:`${oS} 6s ease-in-out ${l}s infinite`})),UA=te(c)(({theme:t})=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0,overflow:"hidden"})),VA=te(c)(({scrollProgress:t,theme:n})=>({position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:1,transition:"all 0.3s ease-out","& img":{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center center",transform:`scale(${1+t*.1}) translateY(${t*-20}px)`,transition:"transform 0.3s ease-out",filter:`brightness(${1.3+t*.2}) contrast(${1.4+t*.3}) saturate(${1.2+t*.2})`,display:"block"},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(45, 27, 105, 0.2) 0%, rgba(26, 16, 63, 0.25) 100%)",zIndex:1,opacity:.2+t*.2,transition:"opacity 0.3s ease-out"},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`linear-gradient(${90+t*45}deg, rgba(0,0,0,${.1+t*.2}) 0%, transparent 50%, rgba(0,0,0,${.05+t*.1}) 100%)`,zIndex:2,transition:"all 0.3s ease-out"}})),qA=te(c)(({theme:t})=>({position:"absolute",right:"40px",top:"50%",transform:"translateY(-50%)",display:"flex",flexDirection:"column",gap:"20px",zIndex:10,[t.breakpoints.down("md")]:{right:"20px",gap:"15px"}})),YA=te(c)(({active:t,theme:n})=>({width:t?"16px":"12px",height:t?"16px":"12px",borderRadius:"50%",backgroundColor:t?"#fff":"rgba(255, 255, 255, 0.6)",border:t?"2px solid #E5978B":"2px solid transparent",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:t?"0 0 15px rgba(229, 151, 139, 0.8)":"none","&:hover":{backgroundColor:t?"#fff":"rgba(255, 255, 255, 0.8)",transform:"scale(1.2)",boxShadow:t?"0 0 20px rgba(229, 151, 139, 1)":"0 0 10px rgba(255, 255, 255, 0.5)"}}));te(xe)(({theme:t})=>({position:"absolute",top:"20px",right:"20px",width:"50px",height:"50px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",borderRadius:"50%",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",zIndex:10,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)",transform:"scale(1.1)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.2)"},[t.breakpoints.down("sm")]:{top:"15px",right:"15px",width:"40px",height:"40px"}}));const V2=te("section")(({theme:t,scrollProgress:n})=>({position:"relative",color:"#fff",padding:"0",overflow:"hidden",height:"100vh",minHeight:"600px",display:"flex",alignItems:"center",justifyContent:"flex-start",textAlign:"left",background:"linear-gradient(135deg, #2D1B69 0%, #1A103F 50%, #0F0A2A 100%)","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, rgba(45, 27, 105, 0.8) 0%, rgba(26, 16, 63, 0.9) 100%)",zIndex:1},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent)",transform:`translateX(${n*100}%) skewX(-15deg)`,transition:"transform 0.3s ease-out",zIndex:1,pointerEvents:"none"}})),q2=te(Xe)(({theme:t})=>({position:"relative",zIndex:2,display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",height:"100%",justifyContent:"center",padding:t.spacing(6,0,6,2),maxWidth:"1000px",marginLeft:0,paddingTop:"120px",[t.breakpoints.down("md")]:{padding:t.spacing(4,2),paddingTop:"100px",textAlign:"center",alignItems:"center"}}));te(f)(({theme:t})=>({fontWeight:800,marginBottom:t.spacing(2),fontSize:"4rem",lineHeight:1.1,maxWidth:"1000px",animation:`${NA} 1s ease-out 0.3s both`,color:"#FFFFFF",textShadow:"0 2px 10px rgba(0,0,0,0.3)",[t.breakpoints.down("md")]:{fontSize:"3rem"},[t.breakpoints.down("sm")]:{fontSize:"2.5rem"}}));te(f)(({theme:t})=>({fontSize:"1.5rem",marginBottom:t.spacing(4),maxWidth:"600px",opacity:.95,animation:`${pm} 1s ease-out 0.6s both`,color:"#FFFFFF",fontWeight:400,[t.breakpoints.down("sm")]:{fontSize:"1.25rem"}}));const QA=te(re)(({theme:t,variant:n})=>({padding:t.spacing(2,4),fontSize:"1.1rem",fontWeight:700,borderRadius:"12px",textTransform:"none",background:n==="contained"?"linear-gradient(135deg, #2D1B69 0%, #1A103F 100%)":"transparent",color:n==="contained"?"white":"#2D1B69",border:n==="outlined"?"2px solid #2D1B69":"2px solid rgba(255, 255, 255, 0.2)",boxShadow:n==="contained"?"0 4px 15px rgba(45, 27, 105, 0.4)":"none",position:"relative",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",animation:`${pm} 1s ease-out 0.9s both`,"&:before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",transition:"0.5s"},"&:hover":{background:n==="contained"?"linear-gradient(135deg, #3A2375 0%, #2D1B69 100%)":"rgba(45, 27, 105, 0.1)",boxShadow:n==="contained"?"0 6px 20px rgba(45, 27, 105, 0.6)":"0 4px 12px rgba(45, 27, 105, 0.2)",transform:"translateY(-2px)",borderColor:"rgba(255, 255, 255, 0.4)","&:before":{left:"100%"}},"&:active":{transform:"translateY(1px)"},[t.breakpoints.down("sm")]:{width:"100%",marginBottom:t.spacing(1)}}));te("div")({display:"flex",alignItems:"center",marginBottom:"1.5rem",padding:"1.5rem 2rem",background:"linear-gradient(90deg, rgba(14, 81, 129, 0.1) 0%, rgba(229, 151, 139, 0.05) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.05)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,width:"4px",height:"100%",background:"linear-gradient(to bottom, #0e5181, #e5978b)",transition:"width 0.3s ease"},"&:hover":{transform:"translateX(8px)",boxShadow:"0 10px 20px rgba(0,0,0,0.1)","&::before":{width:"8px"},"& .feature-icon":{transform:"scale(1.2) rotate(5deg)",textShadow:"0 0 15px rgba(255,255,255,0.5)"}},"& .feature-icon":{marginLeft:"1.5rem",fontSize:"1.5rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1},"& .feature-text":{fontSize:"1rem",fontWeight:500,position:"relative",zIndex:1,background:"linear-gradient(90deg, #fff, #E2E8F0)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}});te("div")({position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center","& img":{maxWidth:"100%",height:"auto",maxHeight:"400px",objectFit:"contain",filter:"drop-shadow(0 10px 20px rgba(0,0,0,0.2))",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"scale(1.03) rotate(1deg)",filter:"drop-shadow(0 15px 30px rgba(14, 81, 129, 0.3))"}},"&::before":{content:'""',position:"absolute",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(229, 151, 139, 0.15) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(20px)",zIndex:0,animation:"pulse 8s infinite alternate"},"&::after":{content:'""',position:"absolute",width:"300px",height:"300px",background:"radial-gradient(circle, rgba(14, 81, 129, 0.1) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(30px)",zIndex:0,animation:"pulse 10s infinite alternate-reverse"},"@keyframes pulse":{"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.1)"}}});te("div")(({theme:t,top:n,left:a,size:l=40,delay:d})=>({position:"absolute",width:l,height:l,top:`${n}%`,left:`${a}%`,background:"rgba(14, 81, 129, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(14, 81, 129, 0.8)",animation:`float 6s ease-in-out ${d}s infinite`,backdropFilter:"blur(2px)",border:"1px solid rgba(14, 81, 129, 0.2)",zIndex:1,"&:hover":{background:"rgba(229, 151, 139, 0.15)",transform:"scale(1.1)"}}));const Mo=[{id:"fallback-1",image:"/static/images/placeholder-banner-1.jpg",title:"   ",subtitle:"    "},{id:"fallback-2",image:"/static/images/placeholder-banner-2.jpg",title:"  ",subtitle:"  "},{id:"fallback-3",image:"/static/images/placeholder-banner-3.jpg",title:"  ",subtitle:"  "}],GA=()=>{const t=jt();Fn(t.breakpoints.down("md"));const[n,a]=w.useState(0),[l,d]=w.useState(!0),[p,h]=w.useState(!1),x=w.useRef(null),[m,y]=w.useState({x:0,y:0}),[v,S]=w.useState([]),[C,_]=w.useState(!0),[z,R]=w.useState(0),[B,T]=w.useState(0),[O,q]=w.useState(0);w.useEffect(()=>{$(null,null,function*(){var G,W,M;try{console.log("Fetching banners from API..."),console.log("API base URL:",ne.defaults.baseURL),console.log("Full URL:",`${ne.defaults.baseURL}/api/extras/banners/active/`);const U=yield ne.get("/api/extras/banners/active/");console.log("API Response:",U.data);const H=U.data.results||U.data;console.log("Banners data:",H);const N=H.map(Y=>({id:Y.id,title:Y.title,subtitle:Y.description||"",image:Y.image_url,url:Y.url||null,banner_type:Y.banner_type||"main"}));console.log("Transformed slides:",N),S(N)}catch(U){console.error("Error fetching banners:",U),console.error("Error details:",((G=U.response)==null?void 0:G.data)||U.message),console.error("Error status:",(W=U.response)==null?void 0:W.status),console.error("Error config:",U.config),console.error("Error headers:",(M=U.response)==null?void 0:M.headers),S(Mo)}finally{_(!1)}})},[O]),w.useEffect(()=>{const k=v.length>0?v:Mo;if(!l||k.length===0)return;const G=setInterval(()=>{a(W=>W===k.length-1?0:W+1)},5e3);return()=>clearInterval(G)},[l,v.length]),w.useEffect(()=>{const k=()=>{var U;const G=window.pageYOffset,W=((U=x.current)==null?void 0:U.offsetHeight)||600,M=Math.min(G/W,1);T(M)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]),w.useEffect(()=>{const k=v.length>0?v:Mo;if(k.length===0)return;const G=setInterval(()=>{R(W=>W===k.length-1?0:W+1)},4e3);return()=>clearInterval(G)},[v]),w.useEffect(()=>{const k=v.length>0?v:Mo;n>=k.length&&k.length>0&&a(0)},[v.length,n]);const j=k=>{a(k)},ee=k=>{if(x.current){const G=x.current.getBoundingClientRect(),W=k.clientX-G.left,M=k.clientY-G.top;y({x:W,y:M})}};if(C)return e(V2,{children:e(q2,{maxWidth:"md",children:o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e(f,{variant:"h6",sx:{color:"#fff"},children:"  ..."}),e(c,{sx:{width:40,height:40,border:"3px solid rgba(255,255,255,0.3)",borderTop:"3px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})]})})});const V=v.length>0?v:Mo,L=V[n]||{title:"",subtitle:""};return e(Rt,{children:o(V2,{onMouseMove:ee,ref:x,scrollProgress:B,children:[e(UA,{children:V.map((k,G)=>e(VA,{scrollProgress:B,style:{opacity:G===n?1:0,zIndex:G===n?1:0},children:e("img",{src:k.image,alt:k.title||`Background ${G+1}`,style:{cursor:k.url?"pointer":"default",transition:"transform 0.3s ease"},onClick:()=>{k.url&&window.open(k.url,"_blank")},onError:W=>{Mo[G]&&(W.target.src=Mo[G].image)}})},k.id))}),o(HA,{children:[e(Dn,{top:10,left:5,width:120,height:8,rotation:45,color:"#4A2B8A",delay:0}),e(Dn,{top:15,left:15,width:80,height:6,rotation:45,color:"#6B3FA3",delay:.5}),e(Dn,{top:25,left:8,width:100,height:7,rotation:45,color:"#5A3596",delay:1}),e(Dn,{top:35,left:20,width:90,height:5,rotation:45,color:"#4A2B8A",delay:1.5}),e(Dn,{top:45,left:12,width:110,height:8,rotation:45,color:"#6B3FA3",delay:2}),e(Dn,{top:55,left:25,width:70,height:6,rotation:45,color:"#5A3596",delay:2.5}),e(Dn,{top:65,left:18,width:95,height:7,rotation:45,color:"#4A2B8A",delay:3}),e(Dn,{top:75,left:30,width:85,height:5,rotation:45,color:"#6B3FA3",delay:3.5}),e(Dn,{top:20,left:85,width:100,height:6,rotation:45,color:"#4A2B8A",delay:.2}),e(Dn,{top:30,left:90,width:80,height:7,rotation:45,color:"#6B3FA3",delay:.7}),e(Dn,{top:40,left:82,width:110,height:5,rotation:45,color:"#5A3596",delay:1.2}),e(Dn,{top:50,left:88,width:90,height:8,rotation:45,color:"#4A2B8A",delay:1.7}),e(Dn,{top:60,left:85,width:75,height:6,rotation:45,color:"#6B3FA3",delay:2.2}),e(Dn,{top:70,left:92,width:100,height:7,rotation:45,color:"#5A3596",delay:2.7}),e(Xn,{top:15,left:80,size:40,delay:0}),e(Xn,{top:25,left:75,size:30,delay:1}),e(Xn,{top:35,left:85,size:35,delay:2}),e(Xn,{top:45,left:78,size:25,delay:3}),e(Xn,{top:55,left:82,size:45,delay:4}),e(Xn,{top:65,left:76,size:20,delay:5}),e(Xn,{top:75,left:88,size:35,delay:6}),e(Xn,{top:20,left:15,size:30,delay:.5}),e(Xn,{top:30,left:10,size:25,delay:1.5}),e(Xn,{top:40,left:18,size:40,delay:2.5}),e(Xn,{top:50,left:12,size:20,delay:3.5}),e(Xn,{top:60,left:20,size:35,delay:4.5}),e(Xn,{top:70,left:8,size:30,delay:5.5})]}),e(q2,{maxWidth:!1,children:o(c,{sx:{maxWidth:"1000px",position:"relative",zIndex:2,padding:"0 20px 0 0",marginLeft:0,marginTop:"60px",transform:`translateY(${B*-30}px)`,transition:"transform 0.3s ease-out"},children:[e(f,{variant:"h2",sx:{fontSize:{xs:"2rem",sm:"2.75rem",md:"3.25rem"},fontWeight:800,lineHeight:1.2,mb:1,color:"#fff",textShadow:`0 ${2+B*3}px ${10+B*5}px rgba(0,0,0,${.3+B*.2})`,animation:`${pm} 1s ease-out 0.3s both`,position:"relative",zIndex:2,transform:`translateX(${B*-20}px)`,transition:"transform 0.3s ease-out","&:after":{content:'""',display:"block",width:"100px",height:"4px",background:"rgba(255,255,255,0.8)",margin:"12px auto 8px",borderRadius:"2px"}},children:L.title}),e(f,{variant:"h6",sx:{fontSize:{xs:"1.1rem",sm:"1.3rem"},fontWeight:400,mb:1.5,color:"rgba(255,255,255,0.95)",maxWidth:"700px",mx:"auto",lineHeight:1.7,textShadow:"0 1px 3px rgba(0,0,0,0.3)",position:"relative",zIndex:2,transform:`translateX(${B*-15}px)`,transition:"transform 0.3s ease-out",opacity:.95-B*.3},children:L.subtitle}),e(QA,{variant:"contained",component:hr,to:"/courses",endIcon:e(Li,{}),sx:{transform:`translateX(${B*-10}px) scale(${1-B*.1})`,transition:"all 0.3s ease-out",opacity:1-B*.4},children:" "})]})}),e(qA,{children:V.map((k,G)=>e(YA,{active:G===n,onClick:()=>j(G)},G))})]})})},gn={getCourses:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/courses/public/",{params:t})).data}catch(a){throw console.error("Error fetching courses:",a),a}}),getCourseById:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/`)).data}catch(n){throw console.error("Error fetching course by ID:",n),n}}),getCourse:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/`)).data}catch(n){throw console.error("Error fetching course:",n),n}}),searchCourses:(a,...l)=>$(null,[a,...l],function*(t,n={}){try{return(yield ne.get("/api/courses/search/",{params:X({query:t},n)})).data}catch(d){throw console.error("Error searching courses:",d),d}}),getFeaturedCourses:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/featured/")).data}catch(t){throw console.error("Error fetching featured courses:",t),t}}),getPopularCourses:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/popular/")).data}catch(t){throw console.error("Error fetching popular courses:",t),t}}),getRecentCourses:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/recent/")).data}catch(t){throw console.error("Error fetching recent courses:",t),t}}),getCategories:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/categories/")).data}catch(t){throw console.error("Error fetching categories:",t),t}}),getTags:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/tags/")).data}catch(t){throw console.error("Error fetching tags:",t),t}}),enrollInCourse:t=>$(null,null,function*(){try{return(yield ne.post(`/api/courses/courses/${t}/enroll/`)).data}catch(n){throw console.error("Error enrolling in course:",n),n}}),unenrollFromCourse:t=>$(null,null,function*(){try{return(yield ne.post(`/api/courses/courses/${t}/unenroll/`)).data}catch(n){throw console.error("Error unenrolling from course:",n),n}}),getCourseModules:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/modules/`)).data}catch(n){throw console.error("Error fetching course modules:",n),n}}),getMyCourses:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/courses/my_courses/")).data}catch(t){throw console.error("Error fetching my courses:",t),t}}),getDashboardStats:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/dashboard/stats/")).data}catch(t){throw console.error("Error fetching dashboard stats:",t),t}}),getGeneralStats:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/general/stats/")).data}catch(t){throw console.error("Error fetching general stats:",t),t}}),getRelatedCourses:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/related/`)).data}catch(n){throw console.error("Error fetching related courses:",n),n}}),getCourseCollections:()=>$(null,null,function*(){try{return(yield ne.get("/api/extras/collections/with_courses/")).data}catch(t){throw console.error("Error fetching course collections:",t),t}}),getPromotionalBanners:()=>$(null,null,function*(){try{return(yield ne.get("/api/extras/banners/promotional/")).data}catch(t){throw console.error("Error fetching promotional banners:",t),t}}),getCourseReviews:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/reviews/`)).data}catch(n){throw console.error("Error fetching course reviews:",n),n}}),addCourseReview:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/courses/courses/${t}/reviews/`,n)).data}catch(a){throw console.error("Error adding course review:",a),a}}),getCourseProgress:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/progress/`)).data}catch(n){throw console.error("Error fetching course progress:",n),n}})},No={getCart:()=>$(null,null,function*(){try{return(yield ne.get("/api/store/cart/")).data}catch(t){throw console.error("Error fetching cart:",t),t}}),addToCart:t=>$(null,null,function*(){try{return(yield ne.post("/api/store/cart/items/",{course_id:t})).data}catch(n){throw console.error("Error adding to cart:",n),n}}),removeFromCart:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/store/cart/items/${t}/`)).data}catch(n){throw console.error("Error removing from cart:",n),n}}),updateCartItem:(t,n)=>$(null,null,function*(){try{return(yield ne.patch(`/api/store/cart/items/${t}/`,{quantity:n})).data}catch(a){throw console.error("Error updating cart item:",a),a}}),clearCart:()=>$(null,null,function*(){try{return(yield ne.delete("/api/store/cart/")).data}catch(t){throw console.error("Error clearing cart:",t),t}})},XA="/assets/coursesliderBG-O5tl5-LR.png",Fu=te(c)(({theme:t})=>({position:"relative",padding:t.spacing(4,0),overflow:"hidden",direction:"rtl",backgroundImage:`url(${XA})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"70vh"}));te(c)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:t.spacing(4),padding:t.spacing(0,2)}));te(f)(({theme:t})=>({fontWeight:700,position:"relative","&:after":{content:'""',position:"absolute",right:0,bottom:-8,width:"50px",height:"4px",backgroundColor:t.palette.primary.main,borderRadius:"2px"}}));te(xe)(({theme:t})=>({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,boxShadow:t.shadows[2],"&:hover":{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},"&.Mui-disabled":{opacity:.5}}));const KA=te(c)(({theme:t})=>({display:"flex",gap:t.spacing(2.5),[t.breakpoints.down("md")]:{gap:t.spacing(2)}})),ZA=te(nt)(({theme:t})=>({width:"90%",borderRadius:"12px",overflow:"hidden",backgroundColor:"#ffffff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-8px)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)"}})),JA=te(c)(({theme:t})=>({position:"absolute",top:12,left:12,backgroundColor:"#FF0000",color:"#ffffff",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,zIndex:2,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"})),e8=te(q0)({position:"relative",paddingTop:"56.25%",backgroundColor:"#F0F0F0",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","&:hover .play-button":{opacity:1,transform:"scale(1.1)"},"& .no-image-content":{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#A0A0A0",fontSize:"0.9rem",fontWeight:500,"& .landscape-icon":{fontSize:"2.5rem",marginBottom:"8px"},"& .no-image-text":{fontSize:"0.8rem",color:"#A0A0A0"}}}),t8=te(c)(({theme:t})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",width:60,height:60,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",opacity:0,transition:"all 0.3s ease","&:hover":{backgroundColor:t.palette.primary.main,"& .MuiSvgIcon-root":{color:t.palette.primary.contrastText}}})),r8=te(pt)(({theme:t})=>({padding:"16px","& .MuiRating-root":{direction:"ltr"}}));te(f)(({theme:t})=>({color:t.palette.primary.main,fontSize:"0.75rem",fontWeight:600,marginBottom:t.spacing(.5)}));const n8=te(f)({display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",minHeight:"3.6em",lineHeight:"1.2",fontWeight:700,color:"#333333",fontSize:"1rem",marginBottom:"8px"});te(f)(({theme:t})=>({color:"#666666",fontSize:"0.8rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"4px"}));te(c)({display:"flex",alignItems:"center",gap:"8px",marginTop:"8px"});const i8=te(f)(({theme:t})=>({color:"#FF0000",fontWeight:700,fontSize:"1.1rem"}));te(f)(({theme:t})=>({color:t.palette.text.disabled,textDecoration:"line-through",fontSize:"0.875rem"}));te(f)(({theme:t})=>({color:t.palette.text.secondary,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"}));te(c)(({theme:t})=>({display:"flex",justifyContent:"center",gap:t.spacing(1),marginTop:t.spacing(2)}));te(c,{shouldForwardProp:t=>t!=="active"})(({active:t,theme:n})=>X({width:10,height:10,borderRadius:"50%",backgroundColor:n.palette.action.disabled,cursor:"pointer",transition:"all 0.3s ease","&:hover":{backgroundColor:n.palette.primary.main}},t&&{backgroundColor:n.palette.primary.main}));const a8=()=>{const t=jt();Fn(t.breakpoints.down("sm")),Fn(t.breakpoints.between("sm","lg"));const[n,a]=w.useState([]),[l,d]=w.useState(!0),[p,h]=w.useState(null);return w.useEffect(()=>{$(null,null,function*(){try{d(!0);const m=yield gn.getCourseCollections();a(m)}catch(m){console.error("Error fetching collections:",m),h("    ")}finally{d(!1)}})},[]),l?e(Fu,{children:e(Xe,{maxWidth:"lg",children:[1,2,3].map(x=>o(c,{sx:{mb:6},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[o(c,{children:[e(c,{sx:{width:200,height:32,bgcolor:"grey.300",borderRadius:1,mb:1}}),e(c,{sx:{width:300,height:20,bgcolor:"grey.200",borderRadius:1}})]}),e(c,{sx:{width:100,height:36,bgcolor:"grey.300",borderRadius:1}})]}),e(c,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fill, minmax(280px, 1fr))",sm:"repeat(auto-fill, minmax(300px, 1fr))",md:"repeat(auto-fill, minmax(320px, 1fr))",lg:"repeat(auto-fill, minmax(350px, 1fr))"},gap:3},children:[1,2,3,4].map(m=>o(c,{sx:{bgcolor:"grey.100",borderRadius:2,height:400,display:"flex",flexDirection:"column"},children:[e(c,{sx:{height:200,bgcolor:"grey.300",borderRadius:"8px 8px 0 0"}}),o(c,{sx:{p:2,flex:1,display:"flex",flexDirection:"column",gap:1},children:[e(c,{sx:{width:"60%",height:16,bgcolor:"grey.300",borderRadius:1}}),e(c,{sx:{width:"90%",height:20,bgcolor:"grey.300",borderRadius:1}}),e(c,{sx:{width:"70%",height:16,bgcolor:"grey.200",borderRadius:1}}),e(c,{sx:{width:"40%",height:16,bgcolor:"grey.200",borderRadius:1}})]})]},m))})]},x))})}):p?e(Fu,{children:e(Xe,{maxWidth:"lg",children:o(c,{sx:{textAlign:"center",py:8,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e(f,{variant:"h5",color:"error.main",sx:{mb:2},children:"    "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:p}),e(re,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),sx:{borderRadius:"8px",textTransform:"none"},children:" "})]})})}):!n||n.length===0?e(Fu,{children:e(Xe,{maxWidth:"lg",children:o(c,{sx:{textAlign:"center",py:8,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e(f,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"    "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"    "}),e(re,{variant:"outlined",color:"primary",component:hr,to:"/courses",sx:{borderRadius:"8px",textTransform:"none"},children:"  "})]})})}):e(Fu,{children:e(Xe,{maxWidth:"lg",children:n.map((x,m)=>e(c,{sx:{mb:6},children:x.courses&&x.courses.length>0?e(c,{sx:{overflow:"hidden",width:"100%",margin:"0 auto"},children:e(KA,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fill, minmax(280px, 1fr))",sm:"repeat(auto-fill, minmax(300px, 1fr))",md:"repeat(auto-fill, minmax(320px, 1fr))",lg:"repeat(auto-fill, minmax(350px, 1fr))"},gap:t.spacing(2.5),width:"100%",padding:t.spacing(0,2,4,2),[t.breakpoints.down("sm")]:{gap:t.spacing(2),padding:t.spacing(0,1,4,1)}},children:x.courses.map(y=>o(ZA,{component:hr,to:`/courses/${y.id}`,sx:{textDecoration:"none",color:"inherit"},children:[o(c,{sx:{position:"relative"},children:[e(e8,{image:y.image_url||"https://via.placeholder.com/300x180",title:y.title,children:e(t8,{className:"play-button",children:e(Pc,{fontSize:"large",color:"primary"})})}),e(JA,{children:"1 WEEKS"})]}),o(r8,{children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(ba,{value:4,precision:.1,readOnly:!0,size:"small",sx:{"& .MuiRating-iconFilled":{color:"#3F51B5"},"& .MuiRating-iconEmpty":{color:"#E0E0E0"}}}),e(f,{variant:"caption",color:"text.secondary",sx:{color:"#666666",fontSize:"0.8rem"},children:"(0)"})]}),e(n8,{variant:"subtitle1",component:"h3",children:y.title}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,fontSize:"0.8rem",color:"#666666"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(c,{sx:{width:12,height:12,backgroundColor:"#666666",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6rem",color:"#ffffff"},children:""}),o("span",{children:[": ",y.lessons_count||0]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(c,{sx:{width:12,height:12,backgroundColor:"#666666",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.6rem",color:"#ffffff"},children:""}),o("span",{children:["Students ",y.enrolled_count||60,"+"]})]}),e(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:e("span",{children:"Beginner"})})]}),o(c,{sx:{borderTop:"1px solid #E0E0E0",pt:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(c,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:"#E0E0E0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#666666",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23666666'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E")`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),e(f,{variant:"body2",sx:{color:"#333333",fontWeight:500},children:y.instructors&&y.instructors.length>0?y.instructors[0].name:"Test"})]}),e(i8,{children:y.is_free?"":`${y.discount_price||y.price}.00 $`})]})]})]},y.id))})}):o(c,{sx:{textAlign:"center",py:6,bgcolor:"grey.50",borderRadius:2,border:"1px dashed",borderColor:"grey.300"},children:[e(f,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"      "}),e(f,{variant:"body2",color:"text.secondary",children:"    "})]})},x.id))})})},o8="/assets/massageImage-D8lgiyN3.png",s8=te(c)(({theme:t})=>({position:"relative",padding:t.spacing(.5,0),background:"linear-gradient(135deg, rgba(102, 51, 153, 0.9) 0%, rgba(51, 54, 121, 0.9) 50%, rgba(27, 27, 72, 0.9) 100%)",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.05) 2px,
        rgba(255, 255, 255, 0.05) 4px
      )
    `,zIndex:0},"& > *":{position:"relative",zIndex:1},[t.breakpoints.down("md")]:{padding:t.spacing(.25,0)}})),l8=te(c)(({theme:t})=>({display:"grid",gridTemplateColumns:"1fr 2fr 1fr",gap:t.spacing(4),alignItems:"center",minHeight:"200px",position:"relative",[t.breakpoints.down("lg")]:{gridTemplateColumns:"1fr",gap:t.spacing(2),textAlign:"center"}})),c8=te(c)(({theme:t})=>({position:"relative",height:"180px",borderRadius:"16px",overflow:"hidden",backgroundImage:'url("https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.02)",boxShadow:"0 12px 40px rgba(0, 0, 0, 0.4)"},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(102, 51, 153, 0.7) 0%, rgba(51, 54, 121, 0.7) 50%, rgba(27, 27, 72, 0.7) 100%)",zIndex:1},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 30% 70%, rgba(255, 255, 255, 0.1) 0%, transparent 50%)",zIndex:2},[t.breakpoints.down("lg")]:{order:3,height:"140px",maxWidth:"320px",margin:"0 auto"}})),d8=te(c)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",zIndex:2,position:"relative",[t.breakpoints.down("lg")]:{order:2,alignItems:"center",textAlign:"center"}})),u8=te(c)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",gap:t.spacing(.5)})),h8=te(c)(({theme:t})=>({position:"relative",width:"120px",height:"120px",backgroundImage:`url(${o8})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)"},"&:before":{content:'""',position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",background:"linear-gradient(145deg, #FF0000 0%, #CC0000 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`
            0 4px 8px rgba(255, 0, 0, 0.4),
            inset 0 1px 2px rgba(255, 255, 255, 0.3),
            inset 0 -1px 2px rgba(0, 0, 0, 0.2)
        `,animation:"pulse 2s infinite"},"@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.1)"},"100%":{transform:"scale(1)"}}})),f8=te(c)(({theme:t})=>({position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",background:"linear-gradient(145deg, #FF0000 0%, #CC0000 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`
        0 2px 4px rgba(255, 0, 0, 0.4),
        inset 0 1px 2px rgba(255, 255, 255, 0.3),
        inset 0 -1px 2px rgba(0, 0, 0, 0.2)
    `,"& .MuiSvgIcon-root":{fontSize:"0.7rem",color:"#FFFFFF",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3))"}})),p8=te(f)(({theme:t})=>({fontSize:"2rem",fontWeight:800,color:"#FFFFFF",lineHeight:1.2,marginBottom:t.spacing(1),textAlign:"center",[t.breakpoints.down("sm")]:{fontSize:"1.5rem"}})),g8=te(f)(({theme:t})=>({fontSize:"1rem",color:"#FFFFFF",lineHeight:1.5,marginBottom:t.spacing(1.5),maxWidth:"500px",opacity:.95,textAlign:"center",[t.breakpoints.down("lg")]:{maxWidth:"100%"}})),m8=te(re)(({theme:t})=>({backgroundColor:"#FFFFFF",color:"#5C2D91",padding:t.spacing(1,3),borderRadius:"8px",textTransform:"none",fontWeight:700,fontSize:"1rem",boxShadow:"0 3px 10px rgba(255, 255, 255, 0.3)",transition:"all 0.3s ease",alignSelf:"center","&:hover":{backgroundColor:"#F5F5F5",transform:"translateY(-2px)",boxShadow:"0 5px 15px rgba(255, 255, 255, 0.4)"},"& .MuiButton-endIcon":{marginLeft:t.spacing(.5),marginRight:0}})),x8=te(c)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,position:"relative",[t.breakpoints.down("lg")]:{order:1}})),b8=()=>{const t=jt();return Fn(t.breakpoints.down("md")),e(s8,{children:e(Xe,{maxWidth:"lg",children:o(l8,{children:[e(c8,{}),o(d8,{children:[e(p8,{variant:"h2",component:"h2",children:"   "}),e(g8,{variant:"body1",children:"                ."}),e(m8,{endIcon:e(Li,{}),onClick:()=>window.location.href="/register",children:" "})]}),e(x8,{children:e(u8,{children:e(h8,{children:e(f8,{children:e(Y5,{})})})})})]})})})},y8=yt`
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
`,v8=te(c)(({theme:t})=>({position:"relative",padding:t.spacing(8,0),backgroundColor:"#FFFFFF","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #663399 0%, #333679 50%, #1B1B48 100%)"},"&:after":{content:'""',position:"absolute",top:0,left:0,width:"200px",height:"100%",background:`
            radial-gradient(circle at 20% 50%, rgba(135, 206, 235, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(135, 206, 235, 0.08) 0%, transparent 50%),
            radial-gradient(circle at 40% 80%, rgba(135, 206, 235, 0.06) 0%, transparent 50%)
        `,zIndex:0},[t.breakpoints.down("md")]:{padding:t.spacing(6,0)}})),w8=te(c)(({theme:t})=>({display:"grid",gridTemplateColumns:"1fr 1fr",gap:t.spacing(8),alignItems:"center",position:"relative",zIndex:1,[t.breakpoints.down("lg")]:{gridTemplateColumns:"1fr",gap:t.spacing(6)}})),S8=te(c)(({theme:t})=>({position:"relative",height:"500px",borderRadius:"16px",overflow:"hidden",backgroundImage:'url("https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",[t.breakpoints.down("lg")]:{height:"400px",order:2}})),C8=te(c)(({theme:t})=>({position:"absolute",bottom:"120px",left:"20px",backgroundColor:"#FFFFFF",borderRadius:"12px",padding:t.spacing(2),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.1)",minWidth:"200px",animation:`${y8} 3s ease-in-out infinite`})),k8=te(f)(({theme:t})=>({fontSize:"1.1rem",fontWeight:700,color:"#663399",marginBottom:t.spacing(1)})),_8=te(c)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(1)})),A8=te(c)(({theme:t})=>({width:"32px",height:"32px",borderRadius:"50%",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",border:"2px solid #FFFFFF",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"})),z8=te(c)(({theme:t})=>({width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#007BFF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",fontWeight:600,color:"#FFFFFF"})),E8=te(re)(({theme:t})=>({position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#333679",color:"#FFFFFF",padding:t.spacing(1.5,3),borderRadius:"8px",textTransform:"none",fontWeight:600,fontSize:"1rem",boxShadow:"0 4px 12px rgba(51, 54, 121, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#2A2D5F",transform:"translateX(-50%) translateY(-2px)",boxShadow:"0 6px 16px rgba(51, 54, 121, 0.4)"},"& .MuiButton-endIcon":{marginLeft:t.spacing(.5)}})),R8=te(c)(({theme:t})=>({padding:t.spacing(2,0),[t.breakpoints.down("lg")]:{order:1}})),T8=te(c)(({theme:t})=>({width:"24px",height:"24px",backgroundColor:"#E0E0E0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:t.spacing(1),"& .MuiSvgIcon-root":{fontSize:"1rem",color:"#A0A0A0"}})),M8=te(f)(({theme:t})=>({fontSize:"0.9rem",fontWeight:600,color:"#A0A0A0",textTransform:"uppercase",letterSpacing:"1px",marginBottom:t.spacing(2)})),I8=te(f)(({theme:t})=>({fontSize:"2.5rem",fontWeight:800,color:"#663399",lineHeight:1.2,marginBottom:t.spacing(3),[t.breakpoints.down("sm")]:{fontSize:"2rem"}})),D8=te(f)(({theme:t})=>({fontSize:"1rem",color:"#A0A0A0",lineHeight:1.6,marginBottom:t.spacing(4),maxWidth:"500px"})),W8=te(c)(({theme:t})=>({display:"grid",gridTemplateColumns:"1fr 1fr",gap:t.spacing(2),[t.breakpoints.down("sm")]:{gridTemplateColumns:"1fr"}})),$8=te(c)(({theme:t})=>({backgroundColor:"#F8F9FA",borderRadius:"8px",padding:t.spacing(2),borderLeft:"4px solid #663399",transition:"all 0.3s ease","&:hover":{backgroundColor:"#F0F0F0",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}})),L8=te(c)(({theme:t})=>({width:"20px",height:"20px",backgroundColor:"#663399",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:t.spacing(1),"& .MuiSvgIcon-root":{fontSize:"0.8rem",color:"#FFFFFF"}})),O8=te(f)(({theme:t})=>({fontSize:"1rem",fontWeight:700,color:"#663399",marginBottom:t.spacing(.5)})),B8=te(f)(({theme:t})=>({fontSize:"0.85rem",color:"#A0A0A0",lineHeight:1.4})),F8=()=>{const t=jt();Fn(t.breakpoints.down("md"));const n=["https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face"],[a,l]=w.useState(n.slice(0,4));w.useEffect(()=>{const p=setInterval(()=>{l(h=>[...n].sort(()=>Math.random()-.5).slice(0,4))},4e3);return()=>clearInterval(p)},[]);const d=[{title:"World Class Trainers",description:"Seamlessly envisioneer tactical data through services."},{title:"Easy Learning",description:"Seamlessly envisioneer tactical data through services."},{title:"Flexible",description:"Seamlessly envisioneer tactical data through services."},{title:"Affordable Price",description:"Seamlessly envisioneer tactical data through services."}];return e(v8,{children:e(Xe,{maxWidth:"lg",children:o(w8,{children:[o(S8,{children:[o(C8,{children:[e(k8,{children:"10k+ Active Students"}),o(_8,{children:[a.map((p,h)=>e(A8,{sx:{backgroundImage:`url(${p})`}},h)),e(z8,{children:"10k+"})]})]}),e(E8,{onClick:()=>window.location.href="/register",children:"GET STARTED "})]}),o(R8,{children:[e(T8,{children:e(Yo,{})}),e(M8,{children:"WHY CHOOSE US"}),e(I8,{variant:"h2",component:"h2",children:"Thousands Of Experts Around The World Ready To Help."}),e(D8,{variant:"body1",children:"Synergistically visualize alternative content before cross functional core Rapidiously administra standardized value via focused benefits. Rapidiously redefine highly efficient niche markets with plug-and-play materials professionally seize client centric solutions"}),e(W8,{children:d.map((p,h)=>o($8,{children:[e(L8,{children:e(Yo,{})}),e(O8,{children:p.title}),e(B8,{children:p.description})]},h))})]})]})})})},P8=[{number:"3.9k+",label:"Successfully Trained"},{number:"15.8k+",label:"Classes Completed"},{number:"97.5k+",label:"Satisfaction Rate"},{number:"100.2k+",label:"Students Community"}],Y2=[{id:1,name:"student1",content:"      .     .       .",rating:5,isPositive:!0},{id:2,name:"student1",content:"    .         .      .",rating:3,isPositive:!1},{id:3,name:"student2",content:"  !    .        .",rating:5,isPositive:!0},{id:4,name:"student3",content:"       .     .",rating:4,isPositive:!0},{id:5,name:"student4",content:"    .      .",rating:5,isPositive:!0}];yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-15px); }
  100% { transform: translateY(0px); }
`;const j8=te(c)(({theme:t})=>({background:"linear-gradient(90deg, #663399 0%, #333679 100%)",borderRadius:"16px",padding:t.spacing(4,2),marginBottom:t.spacing(8),display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 8px 32px rgba(102, 51, 153, 0.2)",position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      radial-gradient(circle at 20% 30%, rgba(135, 206, 235, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(135, 206, 235, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(135, 206, 235, 0.06) 0%, transparent 50%)
    `,borderRadius:"16px",pointerEvents:"none"},[t.breakpoints.down("md")]:{flexDirection:"column",gap:t.spacing(3),padding:t.spacing(3,2)}})),N8=te(c)(({theme:t})=>({textAlign:"center",color:"#FFFFFF",position:"relative",flex:1,"&:not(:last-child):after":{content:'""',position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"1px",height:"60%",backgroundColor:"rgba(135, 206, 235, 0.4)"}})),H8=te(f)(({theme:t})=>({fontSize:"2.5rem",fontWeight:800,marginBottom:t.spacing(.5),color:"#FFFFFF",[t.breakpoints.down("sm")]:{fontSize:"2rem"}})),U8=te(f)(({theme:t})=>({fontSize:"1rem",fontWeight:500,color:"#FFFFFF",opacity:.95,[t.breakpoints.down("sm")]:{fontSize:"0.9rem"}})),V8=te(c)(({theme:t})=>({padding:t.spacing(6,0),position:"relative",overflow:"hidden",backgroundColor:"#FFFFFF",[t.breakpoints.down("md")]:{padding:t.spacing(4,0)}})),q8=te(c)(({theme:t})=>({textAlign:"center",marginBottom:t.spacing(6),position:"relative",zIndex:1,[t.breakpoints.down("sm")]:{marginBottom:t.spacing(4)}})),Y8=te(f)(({theme:t})=>({fontSize:"0.9rem",fontWeight:600,color:"#A0A0A0",textTransform:"uppercase",letterSpacing:"1px",marginBottom:t.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",gap:t.spacing(1),direction:"rtl"})),Q8=te(f)(({theme:t})=>({fontSize:"2.5rem",fontWeight:800,color:"#663399",lineHeight:1.2,marginBottom:t.spacing(4),direction:"rtl",textAlign:"center",[t.breakpoints.down("sm")]:{fontSize:"2rem"}}));te(a6)(({theme:t})=>({position:"absolute",right:t.spacing(2),bottom:t.spacing(2),color:"rgba(0, 0, 0, 0.03)",fontSize:"6rem",zIndex:0,transform:"scaleX(-1)"}));const G8=te(f)(({theme:t})=>({fontWeight:700,marginBottom:2,color:t.palette.text.primary,fontSize:"1.1rem"})),X8=te(f)(({theme:t})=>({marginBottom:t.spacing(3),position:"relative",paddingRight:t.spacing(5),fontSize:"1rem",lineHeight:1.8,color:t.palette.text.secondary,direction:"rtl",textAlign:"right",marginTop:t.spacing(4)}));te(c)(({theme:t})=>({display:"flex",alignItems:"center",marginTop:"auto",paddingTop:t.spacing(2),borderTop:"1px solid rgba(0, 0, 0, 0.05)"}));te(Tt,{shouldForwardProp:t=>t!=="bgColor"})(({theme:t,bgColor:n})=>({width:60,height:60,marginRight:t.spacing(2),border:"3px solid #fff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)"},backgroundColor:n||t.palette.primary.main}));te(c)({display:"flex",flexDirection:"column"});te(f)(({theme:t})=>({color:t.palette.text.secondary,fontSize:"0.9rem",opacity:.8}));te(c)(({theme:t,rating:n})=>({display:"inline-flex",alignItems:"center",marginTop:t.spacing(1),"& .MuiSvgIcon-root":{fontSize:"1.2rem",color:"#FFD700"}}));const sS=te("button")(({theme:t,disabled:n})=>({position:"absolute",top:"50%",transform:"translateY(-50%)",width:48,height:48,borderRadius:"50%",backgroundColor:t.palette.background.paper,border:`1px solid ${t.palette.divider}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:n?"not-allowed":"pointer",opacity:n?.5:1,transition:"all 0.3s ease","&:hover:not(:disabled)":{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,borderColor:t.palette.primary.main},"&:focus":{outline:"none",boxShadow:`0 0 0 3px ${t.palette.primary.light}`}}));te(sS)(({theme:t})=>({right:-24,[t.breakpoints.down("md")]:{right:-16}}));te(sS)(({theme:t})=>({left:-24,[t.breakpoints.down("md")]:{left:-16}}));const K8=te(c)(({theme:t})=>({backgroundColor:"#FFFFFF",borderRadius:"12px",padding:t.spacing(3),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.1)",width:"400px",minHeight:"200px",flex:"0 0 auto",margin:t.spacing(0,1),display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease",border:"1px solid rgba(0, 0, 0, 0.05)",overflow:"hidden","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"},"&:before":{content:'""',position:"absolute",top:0,left:0,width:"50px",height:"50px",background:"linear-gradient(135deg, #663399 0%, #333679 100%)",clipPath:"polygon(0 0, 0 100%, 100% 0)",zIndex:1},[t.breakpoints.down("md")]:{width:"350px",margin:t.spacing(0,1)},[t.breakpoints.down("sm")]:{width:"300px",margin:t.spacing(0,.5)}})),Z8=te(c)(({theme:t})=>({position:"absolute",top:t.spacing(1.5),left:t.spacing(1.5),width:"28px",height:"28px",backgroundColor:"#FF6B6B",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,boxShadow:"0 2px 8px rgba(255, 107, 107, 0.3)","& .MuiSvgIcon-root":{fontSize:"1.1rem",color:"#FFFFFF"}})),J8=te(c)(({theme:t})=>({display:"flex",justifyContent:"center",alignItems:"center",gap:t.spacing(1),marginTop:t.spacing(4)})),ez=te(c)(({theme:t,active:n})=>({width:"12px",height:"12px",borderRadius:"50%",backgroundColor:n?"#663399":"#E0E0E0",transition:"all 0.3s ease",cursor:"pointer","&:hover":{backgroundColor:n?"#663399":"#B0B0B0"}})),tz=te(c)(({theme:t})=>({display:"flex",overflowX:"auto",gap:t.spacing(2),padding:t.spacing(2,0),scrollBehavior:"smooth","&::-webkit-scrollbar":{height:"6px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f1f1f1",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#663399",borderRadius:"3px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#333679"}})),rz=()=>{jt();const[t,n]=w.useState(0),[a,l]=w.useState(0),d=2,p=x=>{n(x),l(x)},h=x=>{const m=document.getElementById("testimonials-container");m&&m.scrollTo({left:x*416,behavior:"smooth"})};return w.useEffect(()=>{h(a)},[a]),e(V8,{children:o(Xe,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:[e(j8,{children:P8.map((x,m)=>o(N8,{children:[e(H8,{children:x.number}),e(U8,{children:x.label})]},m))}),o(q8,{children:[o(Y8,{children:[e(Ah,{sx:{fontSize:"1rem"}})," "]}),e(Q8,{variant:"h2",component:"h2",children:"    "})]}),e(tz,{id:"testimonials-container",children:Y2.map((x,m)=>o(K8,{children:[e(Z8,{children:e(ts,{})}),e(X8,{children:x.content}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"auto"},children:[e(G8,{children:x.name}),o(f,{sx:{color:"#A0A0A0",fontSize:"0.9rem"},children:["(",x.rating,")"]})]})]},x.id))}),e(J8,{children:Array.from({length:Math.ceil(Y2.length/d)}).map((x,m)=>e(ez,{active:m===a,onClick:()=>p(m)},m))})]})})},nz=[{id:1,title:"    ",author:"admin",date:"2025-06-01",image:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=250&fit=crop",readMore:" "},{id:2,title:"      ",author:"admin",date:"2025-06-01",image:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=250&fit=crop",readMore:" "},{id:3,title:"      ",author:"admin",date:"2025-06-01",image:"https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=400&h=250&fit=crop",readMore:" "},{id:4,title:"     ",author:"admin",date:"2025-05-28",image:"https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=250&fit=crop",readMore:" "},{id:5,title:"    ",author:"admin",date:"2025-05-25",image:"https://images.unsplash.com/photo-1559757175-0eb30cd8c063?w=400&h=250&fit=crop",readMore:" "},{id:6,title:"    ",author:"admin",date:"2025-05-22",image:"https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=400&h=250&fit=crop",readMore:" "}],iz=te(c)(({theme:t})=>({padding:t.spacing(8,0),backgroundColor:"#FFFFFF",position:"relative",[t.breakpoints.down("md")]:{padding:t.spacing(6,0)}})),az=te(c)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:t.spacing(6),[t.breakpoints.down("md")]:{flexDirection:"column",gap:t.spacing(3),alignItems:"flex-start"}})),oz=te(c)(({theme:t})=>({display:"flex",flexDirection:"column",gap:t.spacing(1)})),sz=te(f)(({theme:t})=>({fontSize:"0.9rem",fontWeight:600,color:"#A0A0A0",textTransform:"uppercase",letterSpacing:"1px",direction:"rtl"})),lz=te(f)(({theme:t})=>({fontSize:"2.5rem",fontWeight:800,color:"#663399",lineHeight:1.2,direction:"rtl",[t.breakpoints.down("sm")]:{fontSize:"2rem"}})),cz=te(re)(({theme:t})=>({backgroundColor:"#333679",color:"#FFFFFF",padding:t.spacing(1.5,3),borderRadius:"8px",textTransform:"none",fontWeight:600,fontSize:"1rem",boxShadow:"0 4px 12px rgba(51, 54, 121, 0.3)",transition:"all 0.3s ease",direction:"rtl","&:hover":{backgroundColor:"#2A2D5F",transform:"translateY(-2px)",boxShadow:"0 6px 16px rgba(51, 54, 121, 0.4)"},"& .MuiButton-endIcon":{marginLeft:t.spacing(.5)}})),dz=te(c)(({theme:t})=>({display:"flex",gap:t.spacing(3),alignItems:"center",position:"relative",overflow:"visible",padding:t.spacing(0,8),margin:t.spacing(0,-2),[t.breakpoints.down("lg")]:{gap:t.spacing(2),padding:t.spacing(0,6)},[t.breakpoints.down("md")]:{padding:t.spacing(0,4),margin:t.spacing(0,-1)}})),Q2=te(xe)(({theme:t})=>({width:"48px",height:"48px",borderRadius:"50%",backgroundColor:"#FFFFFF",border:"1px solid #E0E0E0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",zIndex:2,"&:hover":{backgroundColor:"#663399",color:"#FFFFFF",borderColor:"#663399",transform:"scale(1.1)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}})),uz=te(c)(({theme:t})=>({display:"flex",gap:t.spacing(3),overflowX:"auto",overflowY:"hidden",flex:1,scrollBehavior:"smooth",padding:t.spacing(1,0),margin:t.spacing(0,2),"&::-webkit-scrollbar":{height:"6px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f1f1f1",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#663399",borderRadius:"3px"},"&::-webkit-scrollbar-thumb:hover":{backgroundColor:"#333679"},[t.breakpoints.down("lg")]:{gap:t.spacing(2),margin:t.spacing(0,1)},[t.breakpoints.down("md")]:{flexDirection:"column",gap:t.spacing(2),overflowX:"hidden",margin:0}})),hz=te(c)(({theme:t})=>({backgroundColor:"#FFFFFF",borderRadius:"12px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.1)",overflow:"hidden",transition:"all 0.3s ease",border:"1px solid rgba(0, 0, 0, 0.05)",minWidth:"320px",maxWidth:"380px",width:"100%",flex:"0 0 auto","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"},[t.breakpoints.down("xl")]:{minWidth:"300px",maxWidth:"350px"},[t.breakpoints.down("lg")]:{minWidth:"280px",maxWidth:"320px"},[t.breakpoints.down("md")]:{minWidth:"100%",maxWidth:"100%",width:"100%"},[t.breakpoints.down("sm")]:{minWidth:"100%",maxWidth:"100%",width:"100%"}})),fz=te(c)(({theme:t})=>({width:"100%",height:"180px",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"4px",backgroundColor:"#000000"},[t.breakpoints.down("lg")]:{height:"160px"},[t.breakpoints.down("md")]:{height:"200px"},[t.breakpoints.down("sm")]:{height:"180px"}})),pz=te(c)(({theme:t})=>({padding:t.spacing(2.5),[t.breakpoints.down("lg")]:{padding:t.spacing(2)},[t.breakpoints.down("md")]:{padding:t.spacing(2.5)}})),gz=te(f)(({theme:t})=>({fontSize:"1.1rem",fontWeight:700,color:"#663399",marginBottom:t.spacing(1.5),lineHeight:1.4,direction:"rtl",textAlign:"right",[t.breakpoints.down("lg")]:{fontSize:"1rem",marginBottom:t.spacing(1)},[t.breakpoints.down("md")]:{fontSize:"1.1rem",marginBottom:t.spacing(1.5)}})),mz=te(c)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:t.spacing(1.5),fontSize:"0.85rem",color:"#A0A0A0",[t.breakpoints.down("lg")]:{fontSize:"0.8rem",marginBottom:t.spacing(1)},[t.breakpoints.down("md")]:{fontSize:"0.85rem",marginBottom:t.spacing(1.5)}})),xz=te(re)(({theme:t})=>({color:"#663399",textTransform:"none",fontWeight:600,fontSize:"0.9rem",padding:0,direction:"rtl","&:hover":{backgroundColor:"transparent",color:"#333679"},"& .MuiButton-endIcon":{marginLeft:t.spacing(.5)}})),bz=()=>{const t=jt();Fn(t.breakpoints.down("md"));const[n,a]=w.useState(0),l=()=>{const h=document.getElementById("articles-scroll-container");h&&h.scrollBy({left:-344,behavior:"smooth"})},d=()=>{const h=document.getElementById("articles-scroll-container");h&&h.scrollBy({left:344,behavior:"smooth"})};return e(iz,{children:o(Xe,{maxWidth:"lg",children:[o(az,{children:[o(oz,{children:[e(sz,{children:" "}),e(lz,{variant:"h2",component:"h2",children:" "})]}),e(cz,{endIcon:e(Li,{}),onClick:()=>window.location.href="/articles",children:"  "})]}),o(dz,{children:[e(Q2,{onClick:l,sx:{position:"absolute",left:-24,zIndex:2},children:e(Y0,{})}),e(uz,{id:"articles-scroll-container",children:nz.map(h=>o(hz,{children:[e(fz,{sx:{backgroundImage:`url(${h.image})`}}),o(pz,{children:[e(gz,{children:h.title}),o(mz,{children:[o(f,{variant:"body2",sx:{color:"#A0A0A0"},children:["by ",h.author]}),e(f,{variant:"body2",sx:{color:"#A0A0A0"},children:h.date})]}),e(xz,{endIcon:e(Li,{}),onClick:()=>window.location.href=`/article/${h.id}`,children:h.readMore})]})]},h.id))}),e(Q2,{onClick:d,sx:{position:"absolute",right:-24,zIndex:2},children:e(Q0,{})})]})]})})},yz=yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,vz=te(c)(({theme:t})=>({backgroundColor:"#ffffff",position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      radial-gradient(circle at 25% 25%, rgba(92, 45, 145, 0.06) 0%, transparent 25%),
      radial-gradient(circle at 75% 75%, rgba(52, 73, 139, 0.06) 0%, transparent 25%),
      radial-gradient(circle at 50% 10%, rgba(135, 206, 235, 0.04) 0%, transparent 20%),
      linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.98) 100%)
    `,zIndex:0},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      repeating-linear-gradient(
        90deg,
        transparent 0px,
        transparent 48px,
        rgba(92, 45, 145, 0.015) 50px,
        rgba(92, 45, 145, 0.015) 52px
      ),
      repeating-linear-gradient(
        0deg,
        transparent 0px,
        transparent 48px,
        rgba(52, 73, 139, 0.015) 50px,
        rgba(52, 73, 139, 0.015) 52px
      )
    `,zIndex:0},"& > *":{position:"relative",zIndex:1},[t.breakpoints.down("md")]:{padding:t.spacing(3,0)}})),wz=te(c)(({theme:t})=>({display:"grid",gridTemplateColumns:"1fr 1fr",gap:t.spacing(8),alignItems:"center",position:"relative",zIndex:2,minHeight:"400px",[t.breakpoints.down("lg")]:{gridTemplateColumns:"1fr",gap:t.spacing(6)}})),Sz=te(c)(({theme:t})=>({display:"flex",flexDirection:"column",gap:t.spacing(3),[t.breakpoints.down("lg")]:{textAlign:"center",order:2}})),Cz=te(c)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(1),marginBottom:t.spacing(1),"& .MuiSvgIcon-root":{color:"#A0A0A0",fontSize:"1.2rem"},"& span":{color:"#333333",fontSize:"0.9rem",fontWeight:500}})),kz=te(f)(({theme:t})=>({fontSize:"2.5rem",fontWeight:800,color:"#5C2D91",lineHeight:1.2,marginBottom:t.spacing(2),[t.breakpoints.down("sm")]:{fontSize:"2rem"}}));te(f)(({theme:t})=>({fontSize:"1.1rem",color:"#6c757d",lineHeight:1.6,marginBottom:t.spacing(3),maxWidth:"500px",[t.breakpoints.down("lg")]:{maxWidth:"100%"}}));const _z=te(re)(({theme:t})=>({background:"#34498B",color:"#fff",padding:t.spacing(1.5,3),borderRadius:"30px",textTransform:"none",fontWeight:600,fontSize:"1rem",boxShadow:"0 4px 15px rgba(52, 73, 139, 0.3)",transition:"all 0.3s ease",alignSelf:"flex-start",[t.breakpoints.down("lg")]:{alignSelf:"center"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(52, 73, 139, 0.4)",backgroundColor:"#2a3a6b"}})),Az=te(c)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",gap:t.spacing(2),[t.breakpoints.down("lg")]:{order:1}}));te(c)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(2),width:"100%",maxWidth:"600px",position:"relative"}));te(c)(({theme:t})=>({flex:1,height:"4px",backgroundColor:"#E0E0E0",borderRadius:"2px",position:"relative",overflow:"hidden"}));te(c)(({theme:t,progress:n})=>({height:"100%",backgroundColor:"#5C2D91",borderRadius:"2px",width:`${n}%`,transition:"width 0.3s ease"}));te(c)(({theme:t,position:n})=>({position:"absolute",top:"50%",left:`${n}%`,transform:"translate(-50%, -50%)",width:"16px",height:"16px",backgroundColor:"#5C2D91",borderRadius:"50%",border:"3px solid #ffffff",boxShadow:"0 2px 8px rgba(92, 45, 145, 0.3)",cursor:"pointer",transition:"left 0.3s ease","&:hover":{transform:"translate(-50%, -50%) scale(1.1)"}}));const Ag=te(nt)(({theme:t})=>({width:"180px",borderRadius:"16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.05)",transition:"all 0.3s ease",cursor:"pointer",overflow:"hidden",backgroundColor:"#ffffff","&:hover":{transform:"translateY(-8px)",boxShadow:"0 15px 35px rgba(0, 0, 0, 0.12)"},[t.breakpoints.down("md")]:{width:"100%",maxWidth:"280px"}})),zg=te(c)(({theme:t})=>({background:"transparent",padding:t.spacing(3,2),textAlign:"center",position:"relative","& .MuiSvgIcon-root":{fontSize:"3rem",marginBottom:t.spacing(1),color:"#87CEEB",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})),Eg=te(f)(({theme:t})=>({fontSize:"1.1rem",fontWeight:700,marginBottom:t.spacing(.5),color:"#5C2D91"})),Rg=te(f)(({theme:t})=>({fontSize:"0.9rem",color:"#666666",fontWeight:500})),Tg=te(c)(({theme:t})=>({padding:t.spacing(2),textAlign:"center"})),Mg=te(re)(({theme:t,color:n})=>({background:"#34498B",color:"#fff",padding:t.spacing(1,2),borderRadius:"20px",textTransform:"none",fontWeight:600,fontSize:"0.9rem",width:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 15px rgba(52, 73, 139, 0.4)",backgroundColor:"#2a3a6b"}})),zz=te(c)(({theme:t})=>({position:"absolute",top:"60%",left:"20%",right:"20%",height:"2px",background:"linear-gradient(90deg, transparent, #E0E0E0, transparent)",zIndex:1,borderRadius:"1px","&:after":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(45deg)",width:"8px",height:"8px",background:"#E0E0E0",borderRadius:"1px"},[t.breakpoints.down("lg")]:{display:"none"}}));te(nt,{shouldForwardProp:t=>t!=="delay"})(({theme:t,delay:n=0})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.03)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",position:"relative",cursor:"pointer","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08)","& .card-hover-effect":{opacity:1,transform:"scale(1.03)"},"& .course-image":{transform:"scale(1.05)"},"& .course-stats":{opacity:1,transform:"translateY(0)"}},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"5px",background:"linear-gradient(90deg, #6f42c1 0%, #e83e8c 100%)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",zIndex:2},animation:`${yz} 6s ease-in-out infinite`,animationDelay:`${n*.2}s`,opacity:1}));te(c)(({theme:t})=>({position:"relative",height:{xs:"160px",sm:"180px",md:"200px"},overflow:"hidden",background:"linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%)","& .course-image":{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.4s ease"}}));te(c)(({theme:t,variant:n="primary"})=>X(X(X({position:"absolute",top:"12px",right:"12px",padding:"4px 12px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:600,zIndex:3},n==="free"&&{background:"linear-gradient(90deg, #e5978b 0%, #d18a7a 100%)",color:"#fff"}),n==="featured"&&{background:"linear-gradient(90deg, #ffc107 0%, #ff9800 100%)",color:"#fff"}),n==="new"&&{background:"linear-gradient(90deg, #e5978b 0%, #45a049 100%)",color:"#fff"}));te(c)(({theme:t,bgcolor:n})=>({padding:t.spacing(2.5,3),background:"linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%)",color:"#fff",display:"flex",alignItems:"center",position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)"},"& .MuiSvgIcon-root":{marginLeft:t.spacing(1.5),fontSize:"2.2rem",position:"relative",zIndex:1,background:"rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"8px"},"& h3":{position:"relative",zIndex:1,margin:0,fontWeight:700,fontSize:"1.1rem"}}));te(pt)(({theme:t})=>({padding:{xs:t.spacing(2),sm:t.spacing(3)},position:"relative",zIndex:1,background:"#fff",borderRadius:"0 0 20px 20px",flex:1,display:"flex",flexDirection:"column","& h3":{marginTop:0,marginBottom:t.spacing(1.5),color:t.palette.text.primary,fontWeight:700,fontSize:{xs:"1.1rem",sm:"1.25rem"},lineHeight:1.4,minHeight:{xs:"2.5rem",sm:"3rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},"& p":{color:t.palette.text.secondary,marginBottom:t.spacing(2),minHeight:{xs:"60px",sm:"72px"},lineHeight:1.7,fontSize:{xs:"0.9rem",sm:"0.95rem"},display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},"& ul":{paddingRight:"20px",margin:"12px 0","& li":{marginBottom:"8px",position:"relative",paddingRight:"24px","&:before":{content:'""',position:"absolute",right:0,top:"8px",width:"8px",height:"8px",borderRadius:"50%",background:"#0e5181"}}}}));te(c)(({theme:t})=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(0,3,3,3),marginTop:"auto","& .MuiButton-root":{textTransform:"none",fontWeight:500,letterSpacing:"0.3px",padding:"10px 24px",borderRadius:"12px",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",position:"relative",overflow:"hidden",backgroundColor:"transparent",color:"#0e5181",border:"1.5px solid #0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.04)",transform:"translateY(-2px)",boxShadow:"0 6px 12px rgba(14, 81, 129, 0.1)",borderColor:"#0e5181"},"&:active":{transform:"translateY(0)",boxShadow:"0 2px 4px rgba(14, 81, 129, 0.1)"},"& .MuiButton-endIcon":{transition:"transform 0.3s ease",marginRight:t.spacing(.5),marginLeft:0},"&:hover .MuiButton-endIcon":{transform:"translateX(-4px)"},"& span":{position:"relative",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem"}},"& .MuiTypography-body2":{display:"flex",alignItems:"center",gap:"6px",color:t.palette.text.secondary,fontSize:"0.85rem","& svg":{color:"#0e5181",fontSize:"1rem"}}}));const Ez=()=>{const t=jt();Fn(t.breakpoints.down("md"));const[n,a]=w.useState(0),[l,d]=w.useState([]),[p,h]=w.useState([]),[x,m]=w.useState(!0),[y,v]=w.useState(null),[S,C]=w.useState(0),_=ct(),z=()=>$(null,null,function*(){try{m(!0);const B=yield An.getCategories();d(B),B.length>0&&(yield R(B[0].id))}catch(B){console.error("Error loading categories:",B),v("    ")}finally{m(!1)}}),R=B=>$(null,null,function*(){try{m(!0);const T=yield An.getPublicCourses({category:B});h(Array.isArray(T)?T:T.results||T.data||[])}catch(T){console.error("Error loading courses:",T),v("    "),h([])}finally{m(!1)}});return w.useEffect(()=>{z()},[]),e(vz,{children:o(Xe,{maxWidth:"lg",children:[o(wz,{children:[o(Sz,{children:[o(Cz,{children:[e(Ah,{}),e("span",{children:" "})]}),e(kz,{variant:"h2",component:"h2",children:"  "}),e(_z,{endIcon:e(Li,{}),onClick:()=>_("/courses"),children:"  "})]}),e(Az,{children:x&&l.length===0?o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:6,gap:2},children:[e(Qe,{sx:{color:"#5C2D91"}}),e(f,{variant:"body1",color:"text.secondary",children:"  ..."})]}):e(Rt,{children:o(c,{sx:{display:"flex",gap:t.spacing(3),justifyContent:"center",mb:3},children:[o(Ag,{children:[o(zg,{children:[e(o6,{}),e(Eg,{children:""}),e(Rg,{children:" 1"})]}),e(Tg,{children:e(Mg,{onClick:()=>_("/courses?category=pharmacy"),endIcon:e(Li,{}),children:" "})})]}),o(Ag,{children:[o(zg,{children:[e(s6,{}),e(Eg,{children:" "}),e(Rg,{children:" 2"})]}),e(Tg,{children:e(Mg,{onClick:()=>_("/courses?category=dentistry"),endIcon:e(Li,{}),children:" "})})]}),o(Ag,{children:[o(zg,{children:[e(l6,{}),e(Eg,{children:""}),e(Rg,{children:" 2"})]}),e(Tg,{children:e(Mg,{onClick:()=>_("/courses?category=medicine"),endIcon:e(Li,{}),children:" "})})]})]})})})]}),e(zz,{}),e(c,{sx:{position:"relative",zIndex:1,mt:8},children:e(ki,{in:!0,timeout:500,children:e(c,{children:x&&l.length===0?o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:6,gap:2},children:[e(Qe,{sx:{color:"#5C2D91"}}),e(f,{variant:"body1",color:"text.secondary",children:"  ..."})]}):e(Rt,{})})})})]})})},Rz=yt`
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,lS=yt`
  0% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
  100% {
    transform: translateY(0px);
  }
`,Tz=te(c)(({theme:t})=>({padding:t.spacing(10,0),backgroundColor:"#f9fafb",position:"relative",overflow:"hidden",[t.breakpoints.down("md")]:{padding:t.spacing(6,0)}})),Mz=te(c)(({theme:t})=>({display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:t.spacing(8),alignItems:"center",position:"relative",[t.breakpoints.down("lg")]:{gridTemplateColumns:"1fr",gap:t.spacing(4)}})),Iz=te(c)(({theme:t})=>({position:"relative",height:"500px",[t.breakpoints.down("lg")]:{height:"400px"}})),Dz=te(c)(({theme:t})=>({position:"relative",width:"100%",height:"100%"})),Wz=te(c)(({theme:t})=>({position:"absolute",width:"70%",height:"70%",top:"15%",left:"15%",borderRadius:"16px",overflow:"hidden",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",zIndex:3,animation:`${lS} 6s ease-in-out infinite`,"& img":{width:"100%",height:"100%",objectFit:"cover",display:"block"}})),$z=te(c)(({theme:t})=>({position:"absolute",width:"50%",height:"50%",bottom:"5%",right:"5%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 15px 30px rgba(0, 0, 0, 0.15)",zIndex:4,border:"4px solid #ffffff",animation:`${lS} 7s ease-in-out infinite 1s`,"& img":{width:"100%",height:"100%",objectFit:"cover",display:"block"}})),Lz=te(c)(({theme:t})=>({position:"absolute",width:"120px",height:"120px",top:"0",right:"0",borderRadius:"50%",background:"linear-gradient(135deg, rgba(111, 66, 193, 0.1) 0%, rgba(51, 54, 121, 0.2) 100%)",zIndex:1})),Oz=te(c)(({theme:t})=>({display:"flex",flexDirection:"column",gap:t.spacing(3),position:"relative"})),Bz=te(c)(({theme:t})=>({display:"inline-flex",alignItems:"center",gap:t.spacing(1),padding:t.spacing(1,2),backgroundColor:"rgba(111, 66, 193, 0.1)",borderRadius:"30px",marginBottom:t.spacing(2),"& .MuiSvgIcon-root":{color:"#6f42c1",fontSize:"1.2rem"},"& span":{color:"#6f42c1",fontSize:"0.9rem",fontWeight:600}})),Fz=te(f)(({theme:t})=>({fontSize:"2.5rem",fontWeight:800,color:"#1f2937",lineHeight:1.2,marginBottom:t.spacing(2),"& span":{color:"#6f42c1"},[t.breakpoints.down("sm")]:{fontSize:"2rem"}})),G2=te(f)(({theme:t})=>({fontSize:"1.1rem",color:"#4b5563",lineHeight:1.7,marginBottom:t.spacing(2)})),Pz=te(c)(({theme:t})=>({display:"flex",flexDirection:"column",gap:t.spacing(2),marginBottom:t.spacing(3)})),Ig=te(c)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(1.5),"& .MuiSvgIcon-root":{color:"#6f42c1",fontSize:"1.2rem",flexShrink:0},"& span":{color:"#374151",fontSize:"1rem",fontWeight:500}})),jz=te(re)(({theme:t})=>({background:"linear-gradient(135deg, #6f42c1 0%, #333679 100%)",color:"#fff",padding:t.spacing(1.5,3),borderRadius:"8px",textTransform:"none",fontWeight:600,fontSize:"1rem",boxShadow:"0 4px 15px rgba(111, 66, 193, 0.3)",transition:"all 0.3s ease",alignSelf:"flex-start","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(111, 66, 193, 0.4)"}})),Nz=te(nt)(({theme:t})=>({position:"absolute",bottom:"20px",left:"0",background:"#ffffff",color:"#1f2937",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",minWidth:"180px",zIndex:5,animation:`${Rz} 1s ease-out`,[t.breakpoints.down("lg")]:{position:"relative",bottom:"auto",left:"auto",marginTop:t.spacing(3)}})),Hz=te(pt)(({theme:t})=>({padding:t.spacing(2),textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"})),Uz=te(f)(({theme:t})=>({fontSize:"2rem",fontWeight:800,marginBottom:t.spacing(.5),color:"#6f42c1"})),Vz=te(f)(({theme:t})=>({fontSize:"0.9rem",color:"#6b7280",marginBottom:t.spacing(1)})),qz=te(c)(({theme:t})=>({position:"fixed",bottom:"20px",left:"20px",right:"20px",zIndex:1e3,display:"flex",justifyContent:"space-between",pointerEvents:"none",[t.breakpoints.down("md")]:{position:"relative",bottom:"auto",left:"auto",right:"auto",marginTop:t.spacing(3),justifyContent:"center",gap:t.spacing(2)}})),Yz=te(xe)(({theme:t})=>({background:"#6f42c1",color:"#fff",width:"60px",height:"60px",boxShadow:"0 4px 15px rgba(111, 66, 193, 0.3)",pointerEvents:"auto","&:hover":{background:"#5a3594",transform:"scale(1.1)"}})),Qz=te(xe)(({theme:t})=>({background:"#fff",color:"#6f42c1",width:"60px",height:"60px",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",pointerEvents:"auto","&:hover":{background:"#f3f4f6",transform:"scale(1.1)"}})),Gz=te(c)(({theme:t})=>({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,opacity:.3,pointerEvents:"none",backgroundImage:"radial-gradient(#9ca3af 1px, transparent 1px)",backgroundSize:"20px 20px"})),Xz=()=>o(Tz,{children:[e(Gz,{}),o(Xe,{maxWidth:"lg",children:[o(Mz,{children:[e(Iz,{children:o(Dz,{children:[e(Lz,{}),e(Wz,{children:e("img",{src:"/src/assets/images/about3.jpeg",alt:"Online Education Professional",onError:n=>{n.target.src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80"}})}),e($z,{children:e("img",{src:"/src/assets/images/about2.jpeg",alt:"Online Learning Person",onError:n=>{n.target.src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80"}})}),e(Nz,{children:o(Hz,{children:[e(zt,{sx:{fontSize:"2rem",color:"#6f42c1",mb:1}}),e(Uz,{children:"50k+"}),e(Vz,{children:"   "})]})})]})}),o(Oz,{children:[o(Bz,{children:[e(zt,{}),e("span",{children:" "})]}),o(Fz,{children:["   ",e("span",{children:" "})]}),e(G2,{children:"                        ."}),e(G2,{children:"                          ."}),o(Pz,{children:[o(Ig,{children:[e(yr,{}),e("span",{children:"       4000    "})]}),o(Ig,{children:[e(yr,{}),e("span",{children:"   "})]}),o(Ig,{children:[e(yr,{}),e("span",{children:"    "})]})]}),e(jz,{endIcon:e(qt,{}),onClick:()=>window.location.href="/about",children:" "})]})]}),o(qz,{children:[e(Yz,{children:e(td,{})}),e(Qz,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:e(r0,{})})]})]})]}),Kz=()=>o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[o(t4,{children:[e("title",{children:" |    "}),e("meta",{name:"description",content:"         .        ."}),e("meta",{name:"keywords",content:"  ,  ,  ,  ,  "})]}),e(On,{}),o(c,{component:"main",sx:{flex:1},children:[e(c,{component:"section",id:"home",children:e(GA,{})}),e(c,{component:"section",id:"learning-methods",children:e(Ez,{})}),e(c,{component:"section",id:"about-academy",children:e(Xz,{})}),e(c,{component:"section",id:"course-collections",sx:{bgcolor:"background.default"},children:e(a8,{})}),e(c,{component:"section",id:"banner-file",children:e(b8,{})}),e(c,{component:"section",id:"why-choose-us",children:e(F8,{})}),e(c,{component:"section",id:"testimonials",sx:{bgcolor:"background.default"},children:e(rz,{})}),e(c,{component:"section",id:"featured-articles",children:e(bz,{})})]}),e(Bn,{})]}),X2=yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,Zz=yt`
  0% { box-shadow: 0 0 0 0 rgba(98,0,238,0.4); }
  70% { box-shadow: 0 0 0 10px rgba(98,0,238,0); }
  100% { box-shadow: 0 0 0 0 rgba(98,0,238,0); }
`,Jz=te(Xe)(({theme:t})=>({minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:t.spacing(3)})),eE=te(De)(({theme:t})=>({display:"flex",flexDirection:"row",overflow:"hidden",maxWidth:1e3,width:"100%",borderRadius:t.shape.borderRadius*3,boxShadow:t.shadows[10],position:"relative",zIndex:1,"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #6200ee 0%, #03dac6 100%)",zIndex:-1,transform:"skewY(-5deg)",opacity:.1}})),tE=te(c)(({theme:t})=>({flex:1,padding:t.spacing(8,4),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #6200ee 0%, #3700b3 100%)",color:t.palette.common.white,textAlign:"center",[t.breakpoints.down("md")]:{display:"none"}})),rE=te(c)(({theme:t})=>({flex:1,padding:t.spacing(6,5),display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:t.palette.background.paper,[t.breakpoints.down("md")]:{padding:t.spacing(4,3)}})),nE=te(Tt)(({theme:t})=>({margin:t.spacing(1,"auto",3,"auto"),backgroundColor:t.palette.primary.main,width:70,height:70,display:"flex",alignItems:"center",justifyContent:"center",animation:`${Zz} 2s infinite`})),iE=te(re)(({theme:t})=>({margin:t.spacing(3,0,2),padding:t.spacing(1.5),borderRadius:50,fontWeight:600,letterSpacing:.5,textTransform:"none",fontSize:"1rem",boxShadow:"0 4px 14px 0 rgba(98, 0, 238, 0.2)","&:hover":{boxShadow:"0 6px 20px 0 rgba(98, 0, 238, 0.3)",transform:"translateY(-2px)"},transition:"all 0.3s ease"})),Dg=te(xe)(({theme:t})=>({border:`1px solid ${t.palette.divider}`,margin:t.spacing(0,1),"&:hover":{backgroundColor:t.palette.action.hover}})),K2=te("div")(({theme:t})=>({position:"absolute",color:"rgba(255, 255, 255, 0.05)",fontSize:"10rem",zIndex:0,"&:nth-of-type(1)":{top:"10%",left:"10%",animation:`${X2} 6s ease-in-out infinite`},"&:nth-of-type(2)":{bottom:"10%",right:"10%",animation:`${X2} 7s ease-in-out infinite`,animationDelay:"0.5s"}})),aE=()=>{const[t,n]=w.useState(!1),[a,l]=w.useState({email:"",password:""}),[d,p]=w.useState({}),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(""),{loading:C,error:_}=am(ee=>ee.auth),z=od(),R=ct(),B=jt();w.useEffect(()=>(y(!0),()=>y(!1)),[]);const T=ee=>{const{name:V,value:L}=ee.target;l(oe(X({},a),{[V]:L})),(d[V]||v)&&(p(oe(X({},d),{[V]:""})),S(""))},O=()=>{const ee={};return a.email||(ee.email="  "),a.password||(ee.password="  "),p(ee),S(""),Object.keys(ee).length===0},q=ee=>$(null,null,function*(){var V,L,k,G,W,M;if(ee.preventDefault(),!!O()){x(!0),S("");try{const U=yield z(Xo(a));if(Xo.fulfilled.match(U)){const H=((k=(L=(V=U.payload)==null?void 0:V.profile)==null?void 0:L.status)==null?void 0:k.toLowerCase())||((M=(W=(G=U.payload)==null?void 0:G.user_details)==null?void 0:W.type)==null?void 0:M.toLowerCase())||"student";R(H==="admin"||H==="instructor"?"/teacher/dashboard":"/student/dashboard")}else if(Xo.rejected.match(U)){const H=U.error||"    .    .";S(H)}}catch(U){console.error("Login error:",U),S("    .    .")}finally{m&&x(!1)}}}),j=ee=>{console.log(`Logging in with ${ee}`)};return e(ki,{in:!0,timeout:800,children:e(Jz,{maxWidth:!1,children:o(eE,{elevation:3,children:[o(tE,{children:[e(K2,{children:e(zt,{fontSize:"inherit"})}),e(K2,{children:e(c6,{fontSize:"inherit"})}),o(c,{sx:{position:"relative",zIndex:1},children:[e(f,{variant:"h3",sx:{fontWeight:700,mb:2},children:" !"}),e(f,{variant:"body1",sx:{opacity:.9,mb:4,maxWidth:"80%",mx:"auto"},children:"    .      ."}),o(c,{sx:{mt:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e(f,{variant:"body2",sx:{mb:2},children:"  "}),e(re,{component:hr,to:"/register",variant:"outlined",color:"inherit",sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:" "})]})]})]}),o(rE,{children:[o(c,{sx:{textAlign:"center",mb:4},children:[e(nE,{children:e(Ac,{})}),e(f,{component:"h1",variant:"h4",sx:{fontWeight:700,mb:1,color:B.palette.primary.main}}),e(f,{variant:"body2",color:"text.secondary",children:"       "})]}),(_||v)&&e(ki,{in:!0,children:e(Be,{severity:"error",sx:{mb:3,width:"100%",direction:"rtl",textAlign:"right"},children:v||_})}),o(c,{component:"form",onSubmit:q,sx:{width:"100%"},children:[e(ze,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:" ",name:"email",autoComplete:"email",autoFocus:!0,value:a.email,onChange:T,error:!!d.email,helperText:d.email,disabled:C,InputProps:{startAdornment:e(Vr,{position:"start",children:e(Q5,{color:d.email?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:B.palette.divider},"&:hover fieldset":{borderColor:B.palette.primary.main},"&.Mui-focused fieldset":{borderColor:B.palette.primary.main,boxShadow:`0 0 0 2px ${B.palette.primary.light}`}}}}),e(ze,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:" ",type:t?"text":"password",id:"password",autoComplete:"current-password",value:a.password,onChange:T,error:!!d.password,helperText:d.password,disabled:C,InputProps:{startAdornment:e(Vr,{position:"start",children:e(Ac,{color:d.password?"error":"action"})}),endAdornment:e(Vr,{position:"end",children:e(xe,{"aria-label":"   ",onClick:()=>n(!t),edge:"end",size:"small",sx:{color:B.palette.text.secondary,"&:hover":{color:B.palette.primary.main,backgroundColor:"transparent"}},children:t?e(ih,{}):e(Lr,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:B.palette.divider},"&:hover fieldset":{borderColor:B.palette.primary.main},"&.Mui-focused fieldset":{borderColor:B.palette.primary.main,boxShadow:`0 0 0 2px ${B.palette.primary.light}`}}}}),e(c,{sx:{display:"flex",justifyContent:"flex-end",mt:1,mb:2},children:e(va,{component:hr,to:"/forgot-password",variant:"body2",sx:{textDecoration:"none",color:B.palette.text.secondary,"&:hover":{color:B.palette.primary.main}},children:"  "})}),e(iE,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:h,sx:{background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"}},children:h?e(Qe,{size:24,color:"inherit"}):e(c,{sx:{display:"flex",alignItems:"center"},children:e("span",{children:" "})})}),o(c,{sx:{my:3,display:"flex",alignItems:"center"},children:[e(Vt,{sx:{flexGrow:1}}),e(f,{variant:"body2",color:"text.secondary",sx:{px:2},children:"  "}),e(Vt,{sx:{flexGrow:1}})]}),o(c,{sx:{display:"flex",justifyContent:"center",gap:2,mb:3},children:[e(Dg,{onClick:()=>j("google"),"aria-label":"Google",children:e(G5,{color:"error"})}),e(Dg,{onClick:()=>j("facebook"),"aria-label":"Facebook",children:e(_h,{color:"primary"})}),e(Dg,{onClick:()=>j("twitter"),"aria-label":"Twitter",children:e(G0,{color:"info"})})]})]})]})]})})})},Z2=yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,cS=yt`
  0% { box-shadow: 0 0 0 0 rgba(98,0,238,0.4); }
  70% { box-shadow: 0 0 0 10px rgba(98,0,238,0); }
  100% { box-shadow: 0 0 0 0 rgba(98,0,238,0); }
`;te(Xe)(({theme:t})=>({minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:t.spacing(3)}));const oE=te(De)(({theme:t})=>({display:"flex",flexDirection:"row",overflow:"hidden",maxWidth:1100,width:"100%",borderRadius:t.shape.borderRadius*3,boxShadow:t.shadows[10],position:"relative",zIndex:1,"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #6200ee 0%, #03dac6 100%)",zIndex:-1,transform:"skewY(-5deg)",opacity:.1}})),sE=te(c)(({theme:t})=>({flex:1,padding:t.spacing(8,4),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #6200ee 0%, #3700b3 100%)",color:t.palette.common.white,textAlign:"center",[t.breakpoints.down("md")]:{display:"none"}})),lE=te(c)(({theme:t})=>({flex:1.5,padding:t.spacing(6,5),display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:t.palette.background.paper,overflowY:"auto",maxHeight:"90vh",[t.breakpoints.down("md")]:{padding:t.spacing(4,3)}})),cE=te(Tt)(({theme:t})=>({margin:t.spacing(1),backgroundColor:t.palette.primary.main,width:70,height:70,marginBottom:t.spacing(2),animation:`${cS} 2s infinite`}));te(re)(({theme:t})=>({margin:t.spacing(3,0,2),padding:t.spacing(1.5),borderRadius:50,fontWeight:600,letterSpacing:.5,textTransform:"none",fontSize:"1rem",boxShadow:"0 4px 14px 0 rgba(98, 0, 238, 0.2)","&:hover":{boxShadow:"0 6px 20px 0 rgba(98, 0, 238, 0.3)",transform:"translateY(-2px)"},transition:"all 0.3s ease"}));const Wg=te(xe)(({theme:t})=>({border:`1px solid ${t.palette.divider}`,margin:t.spacing(0,1),"&:hover":{backgroundColor:t.palette.action.hover}})),J2=te("div")(({theme:t})=>({position:"absolute",color:"rgba(255, 255, 255, 0.05)",fontSize:"10rem",zIndex:0,"&:nth-of-type(1)":{top:"10%",left:"10%",animation:`${Z2} 6s ease-in-out infinite`},"&:nth-of-type(2)":{bottom:"10%",right:"10%",animation:`${Z2} 7s ease-in-out infinite`,animationDelay:"0.5s"}})),dE=te(c,{shouldForwardProp:t=>t!=="active"})(({theme:t,active:n})=>({width:32,height:32,borderRadius:"50%",backgroundColor:n?t.palette.primary.main:t.palette.grey[300],color:n?"#fff":t.palette.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",marginRight:8,fontWeight:600,fontSize:"0.875rem",transition:"all 0.3s ease"})),uE=te(f,{shouldForwardProp:t=>t!=="active"})(({theme:t,active:n})=>({color:n?t.palette.text.primary:t.palette.text.secondary,fontWeight:n?600:400,fontSize:"0.875rem",transition:"all 0.3s ease"})),hE=()=>{const[t,n]=w.useState(!1),[a,l]=w.useState(!1),[d,p]=w.useState(1),[h,x]=w.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",userType:"Student",acceptTerms:!1,organizationName:"",bio:"",website:""}),[m,y]=w.useState({}),[v,S]=w.useState(!1),[C,_]=w.useState(""),[z,R]=w.useState(!1),B=od(),T=ct(),O=jt();w.useEffect(()=>(R(!0),()=>R(!1)),[]);const q=U=>{const{name:H,value:N,checked:Y,type:E}=U.target,I=E==="checkbox"?Y:N;x(A=>oe(X({},A),{[H]:I})),m[H]&&y(A=>oe(X({},A),{[H]:""})),C&&_("")},j=()=>{V(d)&&p(U=>Math.min(U+1,3))},ee=()=>{p(U=>Math.max(U-1,1))},V=U=>{const H={},N=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return U===1?(h.firstName.trim()||(H.firstName="  "),h.lastName.trim()||(H.lastName="  "),h.email?N.test(h.email)||(H.email="    "):H.email="  ",h.phone||(H.phone="  ")):U===2?(h.password?h.password.length<8&&(H.password="      8   "):H.password="  ",h.confirmPassword?h.password!==h.confirmPassword&&(H.confirmPassword="   "):H.confirmPassword="   ",h.userType==="Organization"&&!h.organizationName&&(H.organizationName="  ")):U===3&&(h.acceptTerms||(H.acceptTerms="    ")),y(H),Object.keys(H).length===0},L=()=>{const U=V(1),H=V(2),N=V(3);return U?H?N||p(3):p(2):p(1),U&&H&&N},k=U=>$(null,null,function*(){var H,N,Y;if(U.preventDefault(),!!L()){S(!0),_("");try{const E=X({email:h.email,password:h.password,confirm_password:h.confirmPassword,name:`${h.firstName} ${h.lastName}`,phone:h.phone||"",status:h.userType==="Instructor"?"Instructor":"Student"},h.userType==="Instructor"&&{bio:h.bio||"",qualification:h.qualification||""}),I=yield B(sl(E));if(sl.fulfilled.match(I)){const A=((Y=(N=(H=I.payload)==null?void 0:H.profile)==null?void 0:N.status)==null?void 0:Y.toLowerCase())||"student";T(A==="instructor"?"/teacher/dashboard":"/student/dashboard")}else if(sl.rejected.match(I)){const A=I.error||"   .    .";_(A)}}catch(E){console.error("Registration failed:",E),_(E.message||"   .    ."),window.scrollTo({top:0,behavior:"smooth"})}finally{z&&S(!1)}}}),G=U=>{console.log(`Logging in with ${U}`)},W=()=>o(c,{sx:{width:"100%",mb:4},children:[e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:[1,2,3].map(U=>o(bt.Fragment,{children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[e(dE,{active:d>=U,children:d>U?e(yr,{fontSize:"small"}):U}),e(uE,{active:d>=U,children:U===1?"Account":U===2?"Password":"Finish"})]}),U<3&&e(c,{sx:{width:40,height:2,backgroundColor:d>U?O.palette.primary.main:O.palette.grey[300],mx:1,transition:"all 0.3s ease"}})]},U))}),e(c,{sx:{width:"100%",height:4,backgroundColor:O.palette.grey[200],borderRadius:2,overflow:"hidden"},children:e(c,{sx:{width:`${d/3*100}%`,height:"100%",backgroundColor:O.palette.primary.main,transition:"width 0.3s ease"}})})]}),M=U=>{switch(U){case 1:return e(ki,{in:!0,timeout:300,children:o(c,{children:[e(f,{variant:"h6",sx:{mb:3,color:O.palette.text.primary,fontWeight:600},children:" "}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,sm:6,children:e(ze,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:" ",autoFocus:!0,value:h.firstName,onChange:q,error:!!m.firstName,helperText:m.firstName,disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e(no,{color:m.firstName?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{required:!0,fullWidth:!0,id:"lastName",label:" ",name:"lastName",autoComplete:"family-name",value:h.lastName,onChange:q,error:!!m.lastName,helperText:m.lastName,disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e(no,{color:m.lastName?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}})})]}),e(ze,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:" ",name:"email",autoComplete:"email",value:h.email,onChange:q,error:!!m.email,helperText:m.email,disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e(Q5,{color:m.email?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e(ze,{margin:"normal",required:!0,fullWidth:!0,id:"phone",label:" ",name:"phone",autoComplete:"tel",value:h.phone,onChange:q,error:!!m.phone,helperText:m.phone,disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e(Y5,{color:m.phone?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),o(Wt,{fullWidth:!0,margin:"normal",error:!!m.userType,sx:{mb:3},children:[e(Ot,{id:"user-type-label",children:""}),e(Bt,{labelId:"user-type-label",id:"userType",name:"userType",value:h.userType,label:"",onChange:q,disabled:v,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:e(We,{value:"Student",children:o(c,{sx:{display:"flex",alignItems:"center"},children:[e(zt,{sx:{mr:1,color:"text.secondary"}}),e("span",{children:""})]})})}),m.userType&&e(L1,{children:m.userType})]}),h.userType==="Organization"&&e(ze,{margin:"normal",required:!0,fullWidth:!0,id:"organizationName",label:" ",placeholder:"  ",name:"organizationName",value:h.organizationName,onChange:q,error:!!m.organizationName,helperText:m.organizationName,disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e($1,{color:m.organizationName?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),h.userType==="Instructor"&&e(ze,{margin:"normal",fullWidth:!0,multiline:!0,rows:3,id:"bio",label:" ",name:"bio",value:h.bio,onChange:q,error:!!m.bio,helperText:m.bio||"    ",disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",sx:{alignSelf:"flex-start",mt:1},children:e(X5,{color:m.bio?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,alignItems:"flex-start"}}}),e(c,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:e(re,{variant:"contained",onClick:j,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"}},children:"Continue"})})]})});case 2:return e(ki,{in:!0,timeout:300,children:o(c,{children:[e(f,{variant:"h6",sx:{mb:3,color:O.palette.text.primary,fontWeight:600},children:"  "}),e(ze,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:" ",type:t?"text":"password",id:"password",autoComplete:"new-password",value:h.password,onChange:q,error:!!m.password,helperText:m.password||" 8         ",disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e(Ac,{color:m.password?"error":"action"})}),endAdornment:e(Vr,{position:"end",children:e(xe,{"aria-label":"   ",onClick:()=>n(!t),edge:"end",size:"small",sx:{color:O.palette.text.secondary,"&:hover":{color:O.palette.primary.main,backgroundColor:"transparent"}},children:t?e(ih,{}):e(Lr,{})})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e(ze,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"  ",type:a?"text":"password",id:"confirmPassword",value:h.confirmPassword,onChange:q,error:!!m.confirmPassword,helperText:m.confirmPassword,disabled:v,InputProps:{startAdornment:e(Vr,{position:"start",children:e(Ac,{color:m.confirmPassword?"error":"action"})}),endAdornment:e(Vr,{position:"end",children:e(xe,{"aria-label":"    ",onClick:()=>l(!a),edge:"end",size:"small",sx:{color:O.palette.text.secondary,"&:hover":{color:O.palette.primary.main,backgroundColor:"transparent"}},children:a?e(ih,{}):e(Lr,{})})})},sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),o(c,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e(re,{variant:"outlined",onClick:ee,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,borderColor:O.palette.primary.main,color:O.palette.primary.main,"&:hover":{borderColor:O.palette.primary.dark,backgroundColor:"rgba(98, 0, 238, 0.04)"}},children:"Back"}),e(re,{variant:"contained",onClick:j,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"}},children:"Continue"})]})]})});case 3:return e(ki,{in:!0,timeout:300,children:o(c,{children:[o(c,{sx:{textAlign:"center",mb:4},children:[e(yr,{sx:{fontSize:60,color:O.palette.success.main,mb:2,animation:`${cS} 2s infinite`}}),e(f,{variant:"h6",sx:{mb:2,color:O.palette.text.primary,fontWeight:600},children:"   !"}),e(f,{variant:"body2",color:"text.secondary",children:"       ."})]}),o(De,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${O.palette.divider}`,borderRadius:2},children:[e(f,{variant:"subtitle2",color:"text.secondary",sx:{mb:2,textTransform:"uppercase",letterSpacing:1},children:" "}),o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:" "}),e(f,{variant:"body1",children:`${h.firstName} ${h.lastName}`})]}),o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:" "}),e(f,{variant:"body1",children:h.email})]}),o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:" "}),e(f,{variant:"body1",children:h.phone})]}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:" "}),o(c,{sx:{display:"flex",alignItems:"center",mt:.5},children:[h.userType==="Student"&&e(zt,{color:"primary",sx:{mr:1}}),h.userType==="Instructor"&&e(W1,{color:"primary",sx:{mr:1}}),h.userType==="Organization"&&e($1,{color:"primary",sx:{mr:1}}),e(f,{variant:"body1",children:h.userType})]})]}),h.userType==="Organization"&&h.organizationName&&o(c,{sx:{mt:2,pt:2,borderTop:`1px solid ${O.palette.divider}`},children:[e(f,{variant:"subtitle2",color:"text.secondary",sx:{mb:2,textTransform:"uppercase",letterSpacing:1},children:" "}),o(c,{sx:{mb:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:" "}),e(f,{variant:"body1",children:h.organizationName})]})]}),h.userType==="Instructor"&&h.bio&&o(c,{sx:{mt:2,pt:2,borderTop:`1px solid ${O.palette.divider}`},children:[e(f,{variant:"subtitle2",color:"text.secondary",sx:{mb:2,textTransform:"uppercase",letterSpacing:1},children:"  "}),e(f,{variant:"body2",children:h.bio})]})]}),o(Wt,{required:!0,error:!!m.acceptTerms,component:"fieldset",variant:"standard",sx:{width:"100%",mb:3},children:[e(wt,{control:e(Fi,{checked:h.acceptTerms,onChange:q,name:"acceptTerms",color:"primary",disabled:v}),label:o(f,{variant:"body2",children:[" "," ",e(va,{href:"/terms",target:"_blank",rel:"noopener",sx:{textDecoration:"none"},children:" "})," ",""," ",e(va,{href:"/privacy",target:"_blank",rel:"noopener",sx:{textDecoration:"none"},children:" "})]})}),m.acceptTerms&&e(L1,{children:m.acceptTerms})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e(re,{variant:"outlined",onClick:ee,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,borderColor:O.palette.primary.main,color:O.palette.primary.main,"&:hover":{borderColor:O.palette.primary.dark,backgroundColor:"rgba(98, 0, 238, 0.04)"}},children:"Back"}),e(re,{type:"submit",variant:"contained",disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"},"&.Mui-disabled":{background:O.palette.grey[300],color:O.palette.grey[500]}},children:v?e(Qe,{size:24,color:"inherit"}):" "})]})]})});default:return null}};return e(Xe,{component:"main",maxWidth:"lg",sx:{py:4},children:o(oE,{children:[o(sE,{children:[e(J2,{children:e(zt,{sx:{fontSize:"inherit"}})}),e(J2,{children:e(W1,{sx:{fontSize:"inherit"}})}),o(c,{sx:{position:"relative",zIndex:1,textAlign:"center",px:4},children:[e(f,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:700,letterSpacing:"0.5px"},children:"   "}),e(f,{variant:"body1",sx:{mb:4,opacity:.9,lineHeight:1.7},children:"         ."}),e(c,{sx:{width:"100%",maxWidth:300,mx:"auto",mb:4},children:e("img",{src:"/images/register-illustration.svg",alt:"Learning illustration",style:{width:"100%",height:"auto"},onError:U=>{U.target.onerror=null,U.target.style.display="none"}})}),e(f,{variant:"body2",sx:{opacity:.8,mb:2},children:"   "}),e(re,{component:hr,to:"/login",variant:"outlined",color:"inherit",sx:{borderRadius:50,px:4,py:1,fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:" "})]})]}),e(lE,{children:o(c,{sx:{width:"100%",maxWidth:500,mx:"auto"},children:[o(c,{sx:{textAlign:"center",mb:4},children:[e(cE,{children:e(Ac,{})}),e(f,{component:"h1",variant:"h5",sx:{fontWeight:700,color:O.palette.primary.main},children:" "}),o(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[" ",d,"  3"]})]}),C&&e(Be,{severity:"error",sx:{mb:3,borderRadius:2},children:C}),o(c,{component:"form",onSubmit:k,noValidate:!0,sx:{mt:1},children:[W(),M(d)]}),o(c,{sx:{mt:4,textAlign:"center"},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"  "}),o(c,{sx:{display:"flex",justifyContent:"center",gap:2},children:[e(Wg,{"aria-label":"Google",onClick:()=>G("google"),sx:{"&:hover":{color:"#DB4437"}},children:e(G5,{})}),e(Wg,{"aria-label":"Facebook",onClick:()=>G("facebook"),sx:{"&:hover":{color:"#4267B2"}},children:e(_h,{})}),e(Wg,{"aria-label":"Twitter",onClick:()=>G("twitter"),sx:{"&:hover":{color:"#1DA1F2"}},children:e(G0,{})})]})]}),e(c,{sx:{mt:4,textAlign:"center"},children:o(f,{variant:"body2",color:"text.secondary",children:["By creating an account, you agree to our"," ",e(va,{href:"/terms",target:"_blank",rel:"noopener",color:"primary",children:"Terms of Service"})," ","and"," ",e(va,{href:"/privacy",target:"_blank",rel:"noopener",color:"primary",children:"Privacy Policy"}),"."]})})]})})]})})},gm=w.createContext({});function mm(t){const n=w.useRef(null);return n.current===null&&(n.current=t()),n.current}const xm=typeof window!="undefined",dS=xm?w.useLayoutEffect:w.useEffect,Lh=w.createContext(null);function bm(t,n){t.indexOf(n)===-1&&t.push(n)}function ym(t,n){const a=t.indexOf(n);a>-1&&t.splice(a,1)}const Aa=(t,n,a)=>a>n?n:a<t?t:a;let vm=()=>{};const za={},uS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function hS(t){return typeof t=="object"&&t!==null}const fS=t=>/^0[^.\s]+$/u.test(t);function wm(t){let n;return()=>(n===void 0&&(n=t()),n)}const Ai=t=>t,fE=(t,n)=>a=>n(t(a)),ud=(...t)=>t.reduce(fE),Vc=(t,n,a)=>{const l=n-t;return l===0?1:(a-t)/l};class Sm{constructor(){this.subscriptions=[]}add(n){return bm(this.subscriptions,n),()=>ym(this.subscriptions,n)}notify(n,a,l){const d=this.subscriptions.length;if(d)if(d===1)this.subscriptions[0](n,a,l);else for(let p=0;p<d;p++){const h=this.subscriptions[p];h&&h(n,a,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gi=t=>t*1e3,Xi=t=>t/1e3;function pS(t,n){return n?t*(1e3/n):0}const gS=(t,n,a)=>(((1-3*a+3*n)*t+(3*a-6*n))*t+3*n)*t,pE=1e-7,gE=12;function mE(t,n,a,l,d){let p,h,x=0;do h=n+(a-n)/2,p=gS(h,l,d)-t,p>0?a=h:n=h;while(Math.abs(p)>pE&&++x<gE);return h}function hd(t,n,a,l){if(t===n&&a===l)return Ai;const d=p=>mE(p,0,1,t,a);return p=>p===0||p===1?p:gS(d(p),n,l)}const mS=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,xS=t=>n=>1-t(1-n),bS=hd(.33,1.53,.69,.99),Cm=xS(bS),yS=mS(Cm),vS=t=>(t*=2)<1?.5*Cm(t):.5*(2-Math.pow(2,-10*(t-1))),km=t=>1-Math.sin(Math.acos(t)),wS=xS(km),SS=mS(km),xE=hd(.42,0,1,1),bE=hd(0,0,.58,1),CS=hd(.42,0,.58,1),yE=t=>Array.isArray(t)&&typeof t[0]!="number",kS=t=>Array.isArray(t)&&typeof t[0]=="number",vE={linear:Ai,easeIn:xE,easeInOut:CS,easeOut:bE,circIn:km,circInOut:SS,circOut:wS,backIn:Cm,backInOut:yS,backOut:bS,anticipate:vS},wE=t=>typeof t=="string",ev=t=>{if(kS(t)){vm(t.length===4);const[n,a,l,d]=t;return hd(n,a,l,d)}else if(wE(t))return vE[t];return t},Pu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],tv={value:null};function SE(t,n){let a=new Set,l=new Set,d=!1,p=!1;const h=new WeakSet;let x={delta:0,timestamp:0,isProcessing:!1},m=0;function y(S){h.has(S)&&(v.schedule(S),t()),m++,S(x)}const v={schedule:(S,C=!1,_=!1)=>{const R=_&&d?a:l;return C&&h.add(S),R.has(S)||R.add(S),S},cancel:S=>{l.delete(S),h.delete(S)},process:S=>{if(x=S,d){p=!0;return}d=!0,[a,l]=[l,a],a.forEach(y),n&&tv.value&&tv.value.frameloop[n].push(m),m=0,a.clear(),d=!1,p&&(p=!1,v.process(S))}};return v}const CE=40;function _S(t,n){let a=!1,l=!0;const d={delta:0,timestamp:0,isProcessing:!1},p=()=>a=!0,h=Pu.reduce((q,j)=>(q[j]=SE(p,n?j:void 0),q),{}),{setup:x,read:m,resolveKeyframes:y,preUpdate:v,update:S,preRender:C,render:_,postRender:z}=h,R=()=>{const q=za.useManualTiming?d.timestamp:performance.now();a=!1,za.useManualTiming||(d.delta=l?1e3/60:Math.max(Math.min(q-d.timestamp,CE),1)),d.timestamp=q,d.isProcessing=!0,x.process(d),m.process(d),y.process(d),v.process(d),S.process(d),C.process(d),_.process(d),z.process(d),d.isProcessing=!1,a&&n&&(l=!1,t(R))},B=()=>{a=!0,l=!0,d.isProcessing||t(R)};return{schedule:Pu.reduce((q,j)=>{const ee=h[j];return q[j]=(V,L=!1,k=!1)=>(a||B(),ee.schedule(V,L,k)),q},{}),cancel:q=>{for(let j=0;j<Pu.length;j++)h[Pu[j]].cancel(q)},state:d,steps:h}}const{schedule:pr,cancel:oo,state:ln,steps:$g}=_S(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Ai,!0);let Ju;function kE(){Ju=void 0}const Wn={now:()=>(Ju===void 0&&Wn.set(ln.isProcessing||za.useManualTiming?ln.timestamp:performance.now()),Ju),set:t=>{Ju=t,queueMicrotask(kE)}},AS=t=>n=>typeof n=="string"&&n.startsWith(t),_m=AS("--"),_E=AS("var(--"),Am=t=>_E(t)?AE.test(t.split("/*")[0].trim()):!1,AE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qc=oe(X({},pl),{transform:t=>Aa(0,1,t)}),ju=oe(X({},pl),{default:1}),Wc=t=>Math.round(t*1e5)/1e5,zm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zE(t){return t==null}const EE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Em=(t,n)=>a=>!!(typeof a=="string"&&EE.test(a)&&a.startsWith(t)||n&&!zE(a)&&Object.prototype.hasOwnProperty.call(a,n)),zS=(t,n,a)=>l=>{if(typeof l!="string")return l;const[d,p,h,x]=l.match(zm);return{[t]:parseFloat(d),[n]:parseFloat(p),[a]:parseFloat(h),alpha:x!==void 0?parseFloat(x):1}},RE=t=>Aa(0,255,t),Lg=oe(X({},pl),{transform:t=>Math.round(RE(t))}),Ho={test:Em("rgb","red"),parse:zS("red","green","blue"),transform:({red:t,green:n,blue:a,alpha:l=1})=>"rgba("+Lg.transform(t)+", "+Lg.transform(n)+", "+Lg.transform(a)+", "+Wc(qc.transform(l))+")"};function TE(t){let n="",a="",l="",d="";return t.length>5?(n=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7),d=t.substring(7,9)):(n=t.substring(1,2),a=t.substring(2,3),l=t.substring(3,4),d=t.substring(4,5),n+=n,a+=a,l+=l,d+=d),{red:parseInt(n,16),green:parseInt(a,16),blue:parseInt(l,16),alpha:d?parseInt(d,16)/255:1}}const _0={test:Em("#"),parse:TE,transform:Ho.transform},fd=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),Ja=fd("deg"),Ki=fd("%"),ht=fd("px"),ME=fd("vh"),IE=fd("vw"),rv=oe(X({},Ki),{parse:t=>Ki.parse(t)/100,transform:t=>Ki.transform(t*100)}),el={test:Em("hsl","hue"),parse:zS("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:a,alpha:l=1})=>"hsla("+Math.round(t)+", "+Ki.transform(Wc(n))+", "+Ki.transform(Wc(a))+", "+Wc(qc.transform(l))+")"},Pr={test:t=>Ho.test(t)||_0.test(t)||el.test(t),parse:t=>Ho.test(t)?Ho.parse(t):el.test(t)?el.parse(t):_0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ho.transform(t):el.transform(t),getAnimatableNone:t=>{const n=Pr.parse(t);return n.alpha=0,Pr.transform(n)}},DE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WE(t){var n,a;return isNaN(t)&&typeof t=="string"&&(((n=t.match(zm))==null?void 0:n.length)||0)+(((a=t.match(DE))==null?void 0:a.length)||0)>0}const ES="number",RS="color",$E="var",LE="var(",nv="${}",OE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yc(t){const n=t.toString(),a=[],l={color:[],number:[],var:[]},d=[];let p=0;const x=n.replace(OE,m=>(Pr.test(m)?(l.color.push(p),d.push(RS),a.push(Pr.parse(m))):m.startsWith(LE)?(l.var.push(p),d.push($E),a.push(m)):(l.number.push(p),d.push(ES),a.push(parseFloat(m))),++p,nv)).split(nv);return{values:a,split:x,indexes:l,types:d}}function TS(t){return Yc(t).values}function MS(t){const{split:n,types:a}=Yc(t),l=n.length;return d=>{let p="";for(let h=0;h<l;h++)if(p+=n[h],d[h]!==void 0){const x=a[h];x===ES?p+=Wc(d[h]):x===RS?p+=Pr.transform(d[h]):p+=d[h]}return p}}const BE=t=>typeof t=="number"?0:Pr.test(t)?Pr.getAnimatableNone(t):t;function FE(t){const n=TS(t);return MS(t)(n.map(BE))}const so={test:WE,parse:TS,createTransformer:MS,getAnimatableNone:FE};function Og(t,n,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(n-t)*6*a:a<1/2?n:a<2/3?t+(n-t)*(2/3-a)*6:t}function PE({hue:t,saturation:n,lightness:a,alpha:l}){t/=360,n/=100,a/=100;let d=0,p=0,h=0;if(!n)d=p=h=a;else{const x=a<.5?a*(1+n):a+n-a*n,m=2*a-x;d=Og(m,x,t+1/3),p=Og(m,x,t),h=Og(m,x,t-1/3)}return{red:Math.round(d*255),green:Math.round(p*255),blue:Math.round(h*255),alpha:l}}function yh(t,n){return a=>a>0?n:t}const br=(t,n,a)=>t+(n-t)*a,Bg=(t,n,a)=>{const l=t*t,d=a*(n*n-l)+l;return d<0?0:Math.sqrt(d)},jE=[_0,Ho,el],NE=t=>jE.find(n=>n.test(t));function iv(t){const n=NE(t);if(!n)return!1;let a=n.parse(t);return n===el&&(a=PE(a)),a}const av=(t,n)=>{const a=iv(t),l=iv(n);if(!a||!l)return yh(t,n);const d=X({},a);return p=>(d.red=Bg(a.red,l.red,p),d.green=Bg(a.green,l.green,p),d.blue=Bg(a.blue,l.blue,p),d.alpha=br(a.alpha,l.alpha,p),Ho.transform(d))},A0=new Set(["none","hidden"]);function HE(t,n){return A0.has(t)?a=>a<=0?t:n:a=>a>=1?n:t}function UE(t,n){return a=>br(t,n,a)}function Rm(t){return typeof t=="number"?UE:typeof t=="string"?Am(t)?yh:Pr.test(t)?av:YE:Array.isArray(t)?IS:typeof t=="object"?Pr.test(t)?av:VE:yh}function IS(t,n){const a=[...t],l=a.length,d=t.map((p,h)=>Rm(p)(p,n[h]));return p=>{for(let h=0;h<l;h++)a[h]=d[h](p);return a}}function VE(t,n){const a=X(X({},t),n),l={};for(const d in a)t[d]!==void 0&&n[d]!==void 0&&(l[d]=Rm(t[d])(t[d],n[d]));return d=>{for(const p in l)a[p]=l[p](d);return a}}function qE(t,n){var d;const a=[],l={color:0,var:0,number:0};for(let p=0;p<n.values.length;p++){const h=n.types[p],x=t.indexes[h][l[h]],m=(d=t.values[x])!=null?d:0;a[p]=m,l[h]++}return a}const YE=(t,n)=>{const a=so.createTransformer(n),l=Yc(t),d=Yc(n);return l.indexes.var.length===d.indexes.var.length&&l.indexes.color.length===d.indexes.color.length&&l.indexes.number.length>=d.indexes.number.length?A0.has(t)&&!d.values.length||A0.has(n)&&!l.values.length?HE(t,n):ud(IS(qE(l,d),d.values),a):yh(t,n)};function DS(t,n,a){return typeof t=="number"&&typeof n=="number"&&typeof a=="number"?br(t,n,a):Rm(t)(t,n)}const QE=t=>{const n=({timestamp:a})=>t(a);return{start:(a=!0)=>pr.update(n,a),stop:()=>oo(n),now:()=>ln.isProcessing?ln.timestamp:Wn.now()}},WS=(t,n,a=10)=>{let l="";const d=Math.max(Math.round(n/a),2);for(let p=0;p<d;p++)l+=Math.round(t(p/(d-1))*1e4)/1e4+", ";return`linear(${l.substring(0,l.length-2)})`},vh=2e4;function Tm(t){let n=0;const a=50;let l=t.next(n);for(;!l.done&&n<vh;)n+=a,l=t.next(n);return n>=vh?1/0:n}function GE(t,n=100,a){const l=a(oe(X({},t),{keyframes:[0,n]})),d=Math.min(Tm(l),vh);return{type:"keyframes",ease:p=>l.next(d*p).value/n,duration:Xi(d)}}const XE=5;function $S(t,n,a){const l=Math.max(n-XE,0);return pS(a-t(l),n-l)}const Er={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fg=.001;function KE({duration:t=Er.duration,bounce:n=Er.bounce,velocity:a=Er.velocity,mass:l=Er.mass}){let d,p,h=1-n;h=Aa(Er.minDamping,Er.maxDamping,h),t=Aa(Er.minDuration,Er.maxDuration,Xi(t)),h<1?(d=y=>{const v=y*h,S=v*t,C=v-a,_=z0(y,h),z=Math.exp(-S);return Fg-C/_*z},p=y=>{const S=y*h*t,C=S*a+a,_=Math.pow(h,2)*Math.pow(y,2)*t,z=Math.exp(-S),R=z0(Math.pow(y,2),h);return(-d(y)+Fg>0?-1:1)*((C-_)*z)/R}):(d=y=>{const v=Math.exp(-y*t),S=(y-a)*t+1;return-Fg+v*S},p=y=>{const v=Math.exp(-y*t),S=(a-y)*(t*t);return v*S});const x=5/t,m=JE(d,p,x);if(t=Gi(t),isNaN(m))return{stiffness:Er.stiffness,damping:Er.damping,duration:t};{const y=Math.pow(m,2)*l;return{stiffness:y,damping:h*2*Math.sqrt(l*y),duration:t}}}const ZE=12;function JE(t,n,a){let l=a;for(let d=1;d<ZE;d++)l=l-t(l)/n(l);return l}function z0(t,n){return t*Math.sqrt(1-n*n)}const eR=["duration","bounce"],tR=["stiffness","damping","mass"];function ov(t,n){return n.some(a=>t[a]!==void 0)}function rR(t){let n=X({velocity:Er.velocity,stiffness:Er.stiffness,damping:Er.damping,mass:Er.mass,isResolvedFromDuration:!1},t);if(!ov(t,tR)&&ov(t,eR))if(t.visualDuration){const a=t.visualDuration,l=2*Math.PI/(a*1.2),d=l*l,p=2*Aa(.05,1,1-(t.bounce||0))*Math.sqrt(d);n=oe(X({},n),{mass:Er.mass,stiffness:d,damping:p})}else{const a=KE(t);n=oe(X(X({},n),a),{mass:Er.mass}),n.isResolvedFromDuration=!0}return n}function wh(t=Er.visualDuration,n=Er.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:l,restDelta:d}=a;const p=a.keyframes[0],h=a.keyframes[a.keyframes.length-1],x={done:!1,value:p},{stiffness:m,damping:y,mass:v,duration:S,velocity:C,isResolvedFromDuration:_}=rR(oe(X({},a),{velocity:-Xi(a.velocity||0)})),z=C||0,R=y/(2*Math.sqrt(m*v)),B=h-p,T=Xi(Math.sqrt(m/v)),O=Math.abs(B)<5;l||(l=O?Er.restSpeed.granular:Er.restSpeed.default),d||(d=O?Er.restDelta.granular:Er.restDelta.default);let q;if(R<1){const ee=z0(T,R);q=V=>{const L=Math.exp(-R*T*V);return h-L*((z+R*T*B)/ee*Math.sin(ee*V)+B*Math.cos(ee*V))}}else if(R===1)q=ee=>h-Math.exp(-T*ee)*(B+(z+T*B)*ee);else{const ee=T*Math.sqrt(R*R-1);q=V=>{const L=Math.exp(-R*T*V),k=Math.min(ee*V,300);return h-L*((z+R*T*B)*Math.sinh(k)+ee*B*Math.cosh(k))/ee}}const j={calculatedDuration:_&&S||null,next:ee=>{const V=q(ee);if(_)x.done=ee>=S;else{let L=ee===0?z:0;R<1&&(L=ee===0?Gi(z):$S(q,ee,V));const k=Math.abs(L)<=l,G=Math.abs(h-V)<=d;x.done=k&&G}return x.value=x.done?h:V,x},toString:()=>{const ee=Math.min(Tm(j),vh),V=WS(L=>j.next(ee*L).value,ee,30);return ee+"ms "+V},toTransition:()=>{}};return j}wh.applyToOptions=t=>{const n=GE(t,100,wh);return t.ease=n.ease,t.duration=Gi(n.duration),t.type="keyframes",t};function E0({keyframes:t,velocity:n=0,power:a=.8,timeConstant:l=325,bounceDamping:d=10,bounceStiffness:p=500,modifyTarget:h,min:x,max:m,restDelta:y=.5,restSpeed:v}){const S=t[0],C={done:!1,value:S},_=k=>x!==void 0&&k<x||m!==void 0&&k>m,z=k=>x===void 0?m:m===void 0||Math.abs(x-k)<Math.abs(m-k)?x:m;let R=a*n;const B=S+R,T=h===void 0?B:h(B);T!==B&&(R=T-S);const O=k=>-R*Math.exp(-k/l),q=k=>T+O(k),j=k=>{const G=O(k),W=q(k);C.done=Math.abs(G)<=y,C.value=C.done?T:W};let ee,V;const L=k=>{_(C.value)&&(ee=k,V=wh({keyframes:[C.value,z(C.value)],velocity:$S(q,k,C.value),damping:d,stiffness:p,restDelta:y,restSpeed:v}))};return L(0),{calculatedDuration:null,next:k=>{let G=!1;return!V&&ee===void 0&&(G=!0,j(k),L(k)),ee!==void 0&&k>=ee?V.next(k-ee):(!G&&j(k),C)}}}function nR(t,n,a){const l=[],d=a||za.mix||DS,p=t.length-1;for(let h=0;h<p;h++){let x=d(t[h],t[h+1]);if(n){const m=Array.isArray(n)?n[h]||Ai:n;x=ud(m,x)}l.push(x)}return l}function iR(t,n,{clamp:a=!0,ease:l,mixer:d}={}){const p=t.length;if(vm(p===n.length),p===1)return()=>n[0];if(p===2&&n[0]===n[1])return()=>n[1];const h=t[0]===t[1];t[0]>t[p-1]&&(t=[...t].reverse(),n=[...n].reverse());const x=nR(n,l,d),m=x.length,y=v=>{if(h&&v<t[0])return n[0];let S=0;if(m>1)for(;S<t.length-2&&!(v<t[S+1]);S++);const C=Vc(t[S],t[S+1],v);return x[S](C)};return a?v=>y(Aa(t[0],t[p-1],v)):y}function aR(t,n){const a=t[t.length-1];for(let l=1;l<=n;l++){const d=Vc(0,n,l);t.push(br(a,1,d))}}function oR(t){const n=[0];return aR(n,t.length-1),n}function sR(t,n){return t.map(a=>a*n)}function lR(t,n){return t.map(()=>n||CS).splice(0,t.length-1)}function $c({duration:t=300,keyframes:n,times:a,ease:l="easeInOut"}){const d=yE(l)?l.map(ev):ev(l),p={done:!1,value:n[0]},h=sR(a&&a.length===n.length?a:oR(n),t),x=iR(h,n,{ease:Array.isArray(d)?d:lR(n,d)});return{calculatedDuration:t,next:m=>(p.value=x(m),p.done=m>=t,p)}}const cR=t=>t!==null;function Mm(t,{repeat:n,repeatType:a="loop"},l,d=1){const p=t.filter(cR),x=d<0||n&&a!=="loop"&&n%2===1?0:p.length-1;return!x||l===void 0?p[x]:l}const dR={decay:E0,inertia:E0,tween:$c,keyframes:$c,spring:wh};function LS(t){typeof t.type=="string"&&(t.type=dR[t.type])}class Im{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,a){return this.finished.then(n,a)}}const uR=t=>t/100;class Dm extends Im{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var l,d;const{motionValue:a}=this.options;a&&a.updatedAt!==Wn.now()&&this.tick(Wn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(d=(l=this.options).onStop)==null||d.call(l))},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;LS(n);const{type:a=$c,repeat:l=0,repeatDelay:d=0,repeatType:p,velocity:h=0}=n;let{keyframes:x}=n;const m=a||$c;m!==$c&&typeof x[0]!="number"&&(this.mixKeyframes=ud(uR,DS(x[0],x[1])),x=[0,100]);const y=m(oe(X({},n),{keyframes:x}));p==="mirror"&&(this.mirroredGenerator=m(oe(X({},n),{keyframes:[...x].reverse(),velocity:-h}))),y.calculatedDuration===null&&(y.calculatedDuration=Tm(y));const{calculatedDuration:v}=y;this.calculatedDuration=v,this.resolvedDuration=v+d,this.totalDuration=this.resolvedDuration*(l+1)-d,this.generator=y}updateTime(n){const a=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(n,a=!1){const{generator:l,totalDuration:d,mixKeyframes:p,mirroredGenerator:h,resolvedDuration:x,calculatedDuration:m}=this;if(this.startTime===null)return l.next(0);const{delay:y=0,keyframes:v,repeat:S,repeatType:C,repeatDelay:_,type:z,onUpdate:R,finalKeyframe:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-d/this.speed,this.startTime)),a?this.currentTime=n:this.updateTime(n);const T=this.currentTime-y*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?T<0:T>d;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let q=this.currentTime,j=l;if(S){const k=Math.min(this.currentTime,d)/x;let G=Math.floor(k),W=k%1;!W&&k>=1&&(W=1),W===1&&G--,G=Math.min(G,S+1),!!(G%2)&&(C==="reverse"?(W=1-W,_&&(W-=_/x)):C==="mirror"&&(j=h)),q=Aa(0,1,W)*x}const ee=O?{done:!1,value:v[0]}:j.next(q);p&&(ee.value=p(ee.value));let{done:V}=ee;!O&&m!==null&&(V=this.playbackSpeed>=0?this.currentTime>=d:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return L&&z!==E0&&(ee.value=Mm(v,this.options,B,this.speed)),R&&R(ee.value),L&&this.finish(),ee}then(n,a){return this.finished.then(n,a)}get duration(){return Xi(this.calculatedDuration)}get time(){return Xi(this.currentTime)}set time(n){var a;n=Gi(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Wn.now());const a=this.playbackSpeed!==n;this.playbackSpeed=n,a&&(this.time=Xi(this.currentTime))}play(){var d,p;if(this.isStopped)return;const{driver:n=QE,startTime:a}=this.options;this.driver||(this.driver=n(h=>this.tick(h))),(p=(d=this.options).onPlay)==null||p.call(d);const l=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=l):this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime||(this.startTime=a!=null?a:l),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var n,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(n=this.options).onComplete)==null||a.call(n)}cancel(){var n,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(n=this.options).onCancel)==null||a.call(n)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),n.observe(this)}}function hR(t){var n;for(let a=1;a<t.length;a++)(n=t[a])!=null||(t[a]=t[a-1])}const Uo=t=>t*180/Math.PI,R0=t=>{const n=Uo(Math.atan2(t[1],t[0]));return T0(n)},fR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:R0,rotateZ:R0,skewX:t=>Uo(Math.atan(t[1])),skewY:t=>Uo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},T0=t=>(t=t%360,t<0&&(t+=360),t),sv=R0,lv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),cv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),pR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lv,scaleY:cv,scale:t=>(lv(t)+cv(t))/2,rotateX:t=>T0(Uo(Math.atan2(t[6],t[5]))),rotateY:t=>T0(Uo(Math.atan2(-t[2],t[0]))),rotateZ:sv,rotate:sv,skewX:t=>Uo(Math.atan(t[4])),skewY:t=>Uo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function M0(t){return t.includes("scale")?1:0}function I0(t,n){if(!t||t==="none")return M0(n);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let l,d;if(a)l=pR,d=a;else{const x=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);l=fR,d=x}if(!d)return M0(n);const p=l[n],h=d[1].split(",").map(mR);return typeof p=="function"?p(h):h[p]}const gR=(t,n)=>{const{transform:a="none"}=getComputedStyle(t);return I0(a,n)};function mR(t){return parseFloat(t.trim())}const gl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ml=new Set(gl),dv=t=>t===pl||t===ht,xR=new Set(["x","y","z"]),bR=gl.filter(t=>!xR.has(t));function yR(t){const n=[];return bR.forEach(a=>{const l=t.getValue(a);l!==void 0&&(n.push([a,l.get()]),l.set(a.startsWith("scale")?1:0))}),n}const Ko={width:({x:t},{paddingLeft:n="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(n)-parseFloat(a),height:({y:t},{paddingTop:n="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(n)-parseFloat(a),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>I0(n,"x"),y:(t,{transform:n})=>I0(n,"y")};Ko.translateX=Ko.x;Ko.translateY=Ko.y;const Zo=new Set;let D0=!1,W0=!1,$0=!1;function OS(){if(W0){const t=Array.from(Zo).filter(l=>l.needsMeasurement),n=new Set(t.map(l=>l.element)),a=new Map;n.forEach(l=>{const d=yR(l);d.length&&(a.set(l,d),l.render())}),t.forEach(l=>l.measureInitialState()),n.forEach(l=>{l.render();const d=a.get(l);d&&d.forEach(([p,h])=>{var x;(x=l.getValue(p))==null||x.set(h)})}),t.forEach(l=>l.measureEndState()),t.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}W0=!1,D0=!1,Zo.forEach(t=>t.complete($0)),Zo.clear()}function BS(){Zo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(W0=!0)})}function vR(){$0=!0,BS(),OS(),$0=!1}class Wm{constructor(n,a,l,d,p,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=a,this.name=l,this.motionValue=d,this.element=p,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(Zo.add(this),D0||(D0=!0,pr.read(BS),pr.resolveKeyframes(OS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:a,element:l,motionValue:d}=this;if(n[0]===null){const p=d==null?void 0:d.get(),h=n[n.length-1];if(p!==void 0)n[0]=p;else if(l&&a){const x=l.readValue(a,h);x!=null&&(n[0]=x)}n[0]===void 0&&(n[0]=h),d&&p===void 0&&d.set(n[0])}hR(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),Zo.delete(this)}cancel(){this.state==="scheduled"&&(Zo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wR=t=>t.startsWith("--");function SR(t,n,a){wR(n)?t.style.setProperty(n,a):t.style[n]=a}const CR=wm(()=>window.ScrollTimeline!==void 0),kR={};function _R(t,n){const a=wm(t);return()=>{var l;return(l=kR[n])!=null?l:a()}}const FS=_R(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),_c=([t,n,a,l])=>`cubic-bezier(${t}, ${n}, ${a}, ${l})`,uv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_c([0,.65,.55,1]),circOut:_c([.55,0,1,.45]),backIn:_c([.31,.01,.66,-.59]),backOut:_c([.33,1.53,.69,.99])};function PS(t,n){if(t)return typeof t=="function"?FS()?WS(t,n):"ease-out":kS(t)?_c(t):Array.isArray(t)?t.map(a=>PS(a,n)||uv.easeOut):uv[t]}function AR(t,n,a,{delay:l=0,duration:d=300,repeat:p=0,repeatType:h="loop",ease:x="easeOut",times:m}={},y=void 0){const v={[n]:a};m&&(v.offset=m);const S=PS(x,d);Array.isArray(S)&&(v.easing=S);const C={delay:l,duration:d,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:p+1,direction:h==="reverse"?"alternate":"normal"};return y&&(C.pseudoElement=y),t.animate(v,C)}function jS(t){return typeof t=="function"&&"applyToOptions"in t}function zR(a){var l=a,{type:t}=l,n=Cn(l,["type"]);var d,p;return jS(t)&&FS()?t.applyToOptions(n):((d=n.duration)!=null||(n.duration=300),(p=n.ease)!=null||(n.ease="easeOut"),n)}class ER extends Im{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:a,name:l,keyframes:d,pseudoElement:p,allowFlatten:h=!1,finalKeyframe:x,onComplete:m}=n;this.isPseudoElement=!!p,this.allowFlatten=h,this.options=n,vm(typeof n.type!="string");const y=zR(n);this.animation=AR(a,l,d,y,p),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!p){const v=Mm(d,this.options,x,this.speed);this.updateMotionValue?this.updateMotionValue(v):SR(a,l,v),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,a;(a=(n=this.animation).finish)==null||a.call(n)}cancel(){try{this.animation.cancel()}catch(n){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,a;this.isPseudoElement||(a=(n=this.animation).commitStyles)==null||a.call(n)}get duration(){var a,l;const n=((l=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:l.call(a).duration)||0;return Xi(Number(n))}get time(){return Xi(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Gi(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:a}){var l;return this.allowFlatten&&((l=this.animation.effect)==null||l.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&CR()?(this.animation.timeline=n,Ai):a(this)}}const NS={anticipate:vS,backInOut:yS,circInOut:SS};function RR(t){return t in NS}function TR(t){typeof t.ease=="string"&&RR(t.ease)&&(t.ease=NS[t.ease])}const hv=10;class MR extends ER{constructor(n){TR(n),LS(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){var v;const y=this.options,{motionValue:a,onUpdate:l,onComplete:d,element:p}=y,h=Cn(y,["motionValue","onUpdate","onComplete","element"]);if(!a)return;if(n!==void 0){a.set(n);return}const x=new Dm(oe(X({},h),{autoplay:!1})),m=Gi((v=this.finishedTime)!=null?v:this.time);a.setWithVelocity(x.sample(m-hv).value,x.sample(m).value,hv),x.stop()}}const fv=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(so.test(t)||t==="0")&&!t.startsWith("url("));function IR(t){const n=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==n)return!0}function DR(t,n,a,l){const d=t[0];if(d===null)return!1;if(n==="display"||n==="visibility")return!0;const p=t[t.length-1],h=fv(d,n),x=fv(p,n);return!h||!x?!1:IR(t)||(a==="spring"||jS(a))&&l}function $m(t){return hS(t)&&"offsetHeight"in t}const WR=new Set(["opacity","clipPath","filter","transform"]),$R=wm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function LR(t){var y;const{motionValue:n,name:a,repeatDelay:l,repeatType:d,damping:p,type:h}=t;if(!$m((y=n==null?void 0:n.owner)==null?void 0:y.current))return!1;const{onUpdate:x,transformTemplate:m}=n.owner.getProps();return $R()&&a&&WR.has(a)&&(a!=="transform"||!m)&&!x&&!l&&d!=="mirror"&&p!==0&&h!=="inertia"}const OR=40;class BR extends Im{constructor(C){var _=C,{autoplay:n=!0,delay:a=0,type:l="keyframes",repeat:d=0,repeatDelay:p=0,repeatType:h="loop",keyframes:x,name:m,motionValue:y,element:v}=_,S=Cn(_,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);var B;super(),this.stop=()=>{var T,O;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(O=this.keyframeResolver)==null||O.cancel()},this.createdAt=Wn.now();const z=X({autoplay:n,delay:a,type:l,repeat:d,repeatDelay:p,repeatType:h,name:m,motionValue:y,element:v},S),R=(v==null?void 0:v.KeyframeResolver)||Wm;this.keyframeResolver=new R(x,(T,O,q)=>this.onKeyframesResolved(T,O,z,!q),m,y,v),(B=this.keyframeResolver)==null||B.scheduleResolve()}onKeyframesResolved(n,a,l,d){this.keyframeResolver=void 0;const{name:p,type:h,velocity:x,delay:m,isHandoff:y,onUpdate:v}=l;this.resolvedAt=Wn.now(),DR(n,p,h,x)||((za.instantAnimations||!m)&&(v==null||v(Mm(n,l,a))),n[0]=n[n.length-1],l.duration=0,l.repeat=0);const S=d?this.resolvedAt?this.resolvedAt-this.createdAt>OR?this.resolvedAt:this.createdAt:this.createdAt:void 0,C=oe(X({startTime:S,finalKeyframe:a},l),{keyframes:n}),_=!y&&LR(C)?new MR(oe(X({},C),{element:C.motionValue.owner.current})):new Dm(C);_.finished.then(()=>this.notifyFinished()).catch(Ai),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(n,a){return this.finished.finally(n).then(()=>{})}get animation(){var n;return this._animation||((n=this.keyframeResolver)==null||n.resume(),vR()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var n;this._animation&&this.animation.cancel(),(n=this.keyframeResolver)==null||n.cancel()}}const FR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PR(t){const n=FR.exec(t);if(!n)return[,];const[,a,l,d]=n;return[`--${a!=null?a:l}`,d]}function HS(t,n,a=1){const[l,d]=PR(t);if(!l)return;const p=window.getComputedStyle(n).getPropertyValue(l);if(p){const h=p.trim();return uS(h)?parseFloat(h):h}return Am(d)?HS(d,n,a+1):d}function Lm(t,n){var a,l;return(l=(a=t==null?void 0:t[n])!=null?a:t==null?void 0:t.default)!=null?l:t}const US=new Set(["width","height","top","left","right","bottom",...gl]),jR={test:t=>t==="auto",parse:t=>t},VS=t=>n=>n.test(t),qS=[pl,ht,Ki,Ja,IE,ME,jR],pv=t=>qS.find(VS(t));function NR(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fS(t):!0}const HR=new Set(["brightness","contrast","saturate","opacity"]);function UR(t){const[n,a]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[l]=a.match(zm)||[];if(!l)return t;const d=a.replace(l,"");let p=HR.has(n)?1:0;return l!==a&&(p*=100),n+"("+p+d+")"}const VR=/\b([a-z-]*)\(.*?\)/gu,L0=oe(X({},so),{getAnimatableNone:t=>{const n=t.match(VR);return n?n.map(UR).join(" "):t}}),gv=oe(X({},pl),{transform:Math.round}),qR={rotate:Ja,rotateX:Ja,rotateY:Ja,rotateZ:Ja,scale:ju,scaleX:ju,scaleY:ju,scaleZ:ju,skew:Ja,skewX:Ja,skewY:Ja,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:qc,originX:rv,originY:rv,originZ:ht},Om=oe(X({borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,backgroundPositionX:ht,backgroundPositionY:ht},qR),{zIndex:gv,fillOpacity:qc,strokeOpacity:qc,numOctaves:gv}),YR=oe(X({},Om),{color:Pr,backgroundColor:Pr,outlineColor:Pr,fill:Pr,stroke:Pr,borderColor:Pr,borderTopColor:Pr,borderRightColor:Pr,borderBottomColor:Pr,borderLeftColor:Pr,filter:L0,WebkitFilter:L0}),YS=t=>YR[t];function QS(t,n){let a=YS(t);return a!==L0&&(a=so),a.getAnimatableNone?a.getAnimatableNone(n):void 0}const QR=new Set(["auto","none","0"]);function GR(t,n,a){let l=0,d;for(;l<t.length&&!d;){const p=t[l];typeof p=="string"&&!QR.has(p)&&Yc(p).values.length&&(d=t[l]),l++}if(d&&a)for(const p of n)t[p]=QS(a,d)}class XR extends Wm{constructor(n,a,l,d,p){super(n,a,l,d,p,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:a,name:l}=this;if(!a||!a.current)return;super.readKeyframes();for(let m=0;m<n.length;m++){let y=n[m];if(typeof y=="string"&&(y=y.trim(),Am(y))){const v=HS(y,a.current);v!==void 0&&(n[m]=v),m===n.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!US.has(l)||n.length!==2)return;const[d,p]=n,h=pv(d),x=pv(p);if(h!==x)if(dv(h)&&dv(x))for(let m=0;m<n.length;m++){const y=n[m];typeof y=="string"&&(n[m]=parseFloat(y))}else Ko[l]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:a}=this,l=[];for(let d=0;d<n.length;d++)(n[d]===null||NR(n[d]))&&l.push(d);l.length&&GR(n,l,a)}measureInitialState(){const{element:n,unresolvedKeyframes:a,name:l}=this;if(!n||!n.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ko[l](n.measureViewportBox(),window.getComputedStyle(n.current)),a[0]=this.measuredOrigin;const d=a[a.length-1];d!==void 0&&n.getValue(l,d).jump(d,!1)}measureEndState(){var x;const{element:n,name:a,unresolvedKeyframes:l}=this;if(!n||!n.current)return;const d=n.getValue(a);d&&d.jump(this.measuredOrigin,!1);const p=l.length-1,h=l[p];l[p]=Ko[a](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(x=this.removedTransforms)!=null&&x.length&&this.removedTransforms.forEach(([m,y])=>{n.getValue(m).set(y)}),this.resolveNoneKeyframes()}}function KR(t,n,a){var l;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let d=document;const p=(l=a==null?void 0:a[t])!=null?l:d.querySelectorAll(t);return p?Array.from(p):[]}return Array.from(t)}const GS=(t,n)=>n&&typeof t=="number"?n.transform(t):t,mv=30,ZR=t=>!isNaN(parseFloat(t));class JR{constructor(n,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(l,d=!0)=>{var h,x;const p=Wn.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const m of this.dependents)m.dirty();d&&((x=this.events.renderRequest)==null||x.notify(this.current))},this.hasAnimated=!1,this.setCurrent(n),this.owner=a.owner}setCurrent(n){this.current=n,this.updatedAt=Wn.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=ZR(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,a){this.events[n]||(this.events[n]=new Sm);const l=this.events[n].add(a);return n==="change"?()=>{l(),pr.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,a){this.passiveEffect=n,this.stopPassiveEffect=a}set(n,a=!0){!a||!this.passiveEffect?this.updateAndNotify(n,a):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,a,l){this.set(a),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-l}jump(n,a=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var n;(n=this.events.change)==null||n.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Wn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>mv)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,mv);return pS(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(n){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=n(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n,a;(n=this.dependents)==null||n.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hl(t,n){return new JR(t,n)}const{schedule:Bm}=_S(queueMicrotask,!1),Di={x:!1,y:!1};function XS(){return Di.x||Di.y}function eT(t){return t==="x"||t==="y"?Di[t]?null:(Di[t]=!0,()=>{Di[t]=!1}):Di.x||Di.y?null:(Di.x=Di.y=!0,()=>{Di.x=Di.y=!1})}function KS(t,n){const a=KR(t),l=new AbortController,d=oe(X({passive:!0},n),{signal:l.signal});return[a,d,()=>l.abort()]}function xv(t){return!(t.pointerType==="touch"||XS())}function tT(t,n,a={}){const[l,d,p]=KS(t,a),h=x=>{if(!xv(x))return;const{target:m}=x,y=n(m,x);if(typeof y!="function"||!m)return;const v=S=>{xv(S)&&(y(S),m.removeEventListener("pointerleave",v))};m.addEventListener("pointerleave",v,d)};return l.forEach(x=>{x.addEventListener("pointerenter",h,d)}),p}const ZS=(t,n)=>n?t===n?!0:ZS(t,n.parentElement):!1,Fm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rT=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nT(t){return rT.has(t.tagName)||t.tabIndex!==-1}const eh=new WeakSet;function bv(t){return n=>{n.key==="Enter"&&t(n)}}function Pg(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const iT=(t,n)=>{const a=t.currentTarget;if(!a)return;const l=bv(()=>{if(eh.has(a))return;Pg(a,"down");const d=bv(()=>{Pg(a,"up")}),p=()=>Pg(a,"cancel");a.addEventListener("keyup",d,n),a.addEventListener("blur",p,n)});a.addEventListener("keydown",l,n),a.addEventListener("blur",()=>a.removeEventListener("keydown",l),n)};function yv(t){return Fm(t)&&!XS()}function aT(t,n,a={}){const[l,d,p]=KS(t,a),h=x=>{const m=x.currentTarget;if(!yv(x))return;eh.add(m);const y=n(m,x),v=(_,z)=>{window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",C),eh.has(m)&&eh.delete(m),yv(_)&&typeof y=="function"&&y(_,{success:z})},S=_=>{v(_,m===window||m===document||a.useGlobalTarget||ZS(m,_.target))},C=_=>{v(_,!1)};window.addEventListener("pointerup",S,d),window.addEventListener("pointercancel",C,d)};return l.forEach(x=>{(a.useGlobalTarget?window:x).addEventListener("pointerdown",h,d),$m(x)&&(x.addEventListener("focus",y=>iT(y,d)),!nT(x)&&!x.hasAttribute("tabindex")&&(x.tabIndex=0))}),p}function JS(t){return hS(t)&&"ownerSVGElement"in t}function oT(t){return JS(t)&&t.tagName==="svg"}const mn=t=>!!(t&&t.getVelocity),sT=[...qS,Pr,so],lT=t=>sT.find(VS(t)),Pm=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class cT extends w.Component{getSnapshotBeforeUpdate(n){const a=this.props.childRef.current;if(a&&n.isPresent&&!this.props.isPresent){const l=a.offsetParent,d=$m(l)&&l.offsetWidth||0,p=this.props.sizeRef.current;p.height=a.offsetHeight||0,p.width=a.offsetWidth||0,p.top=a.offsetTop,p.left=a.offsetLeft,p.right=d-p.width-p.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dT({children:t,isPresent:n,anchorX:a,root:l}){const d=w.useId(),p=w.useRef(null),h=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=w.useContext(Pm);return w.useInsertionEffect(()=>{const{width:m,height:y,top:v,left:S,right:C}=h.current;if(n||!p.current||!m||!y)return;const _=a==="left"?`left: ${S}`:`right: ${C}`;p.current.dataset.motionPopId=d;const z=document.createElement("style");x&&(z.nonce=x);const R=l!=null?l:document.head;return R.appendChild(z),z.sheet&&z.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${_}px !important;
            top: ${v}px !important;
          }
        `),()=>{R.removeChild(z),R.contains(z)&&R.removeChild(z)}},[n]),$n.jsx(cT,{isPresent:n,childRef:p,sizeRef:h,children:w.cloneElement(t,{ref:p})})}const uT=({children:t,initial:n,isPresent:a,onExitComplete:l,custom:d,presenceAffectsLayout:p,mode:h,anchorX:x,root:m})=>{const y=mm(hT),v=w.useId();let S=!0,C=w.useMemo(()=>(S=!1,{id:v,initial:n,isPresent:a,custom:d,onExitComplete:_=>{y.set(_,!0);for(const z of y.values())if(!z)return;l&&l()},register:_=>(y.set(_,!1),()=>y.delete(_))}),[a,y,l]);return p&&S&&(C=X({},C)),w.useMemo(()=>{y.forEach((_,z)=>y.set(z,!1))},[a]),w.useEffect(()=>{!a&&!y.size&&l&&l()},[a]),h==="popLayout"&&(t=$n.jsx(dT,{isPresent:a,anchorX:x,root:m,children:t})),$n.jsx(Lh.Provider,{value:C,children:t})};function hT(){return new Map}function eC(t=!0){const n=w.useContext(Lh);if(n===null)return[!0,null];const{isPresent:a,onExitComplete:l,register:d}=n,p=w.useId();w.useEffect(()=>{if(t)return d(p)},[t]);const h=w.useCallback(()=>t&&l&&l(p),[p,l,t]);return!a&&l?[!1,h]:[!0]}const Nu=t=>t.key||"";function vv(t){const n=[];return w.Children.forEach(t,a=>{w.isValidElement(a)&&n.push(a)}),n}const fT=({children:t,custom:n,initial:a=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:p="sync",propagate:h=!1,anchorX:x="left",root:m})=>{const[y,v]=eC(h),S=w.useMemo(()=>vv(t),[t]),C=h&&!y?[]:S.map(Nu),_=w.useRef(!0),z=w.useRef(S),R=mm(()=>new Map),[B,T]=w.useState(S),[O,q]=w.useState(S);dS(()=>{_.current=!1,z.current=S;for(let V=0;V<O.length;V++){const L=Nu(O[V]);C.includes(L)?R.delete(L):R.get(L)!==!0&&R.set(L,!1)}},[O,C.length,C.join("-")]);const j=[];if(S!==B){let V=[...S];for(let L=0;L<O.length;L++){const k=O[L],G=Nu(k);C.includes(G)||(V.splice(L,0,k),j.push(k))}return p==="wait"&&j.length&&(V=j),q(vv(V)),T(S),null}const{forceRender:ee}=w.useContext(gm);return $n.jsx($n.Fragment,{children:O.map(V=>{const L=Nu(V),k=h&&!y?!1:S===O||C.includes(L),G=()=>{if(R.has(L))R.set(L,!0);else return;let W=!0;R.forEach(M=>{M||(W=!1)}),W&&(ee==null||ee(),q(z.current),h&&(v==null||v()),l&&l())};return $n.jsx(uT,{isPresent:k,initial:!_.current||a?void 0:!1,custom:n,presenceAffectsLayout:d,mode:p,root:m,onExitComplete:k?void 0:G,anchorX:x,children:V},L)})})},tC=w.createContext({strict:!1}),wv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fl={};for(const t in wv)fl[t]={isEnabled:n=>wv[t].some(a=>!!n[a])};function pT(t){for(const n in t)fl[n]=X(X({},fl[n]),t[n])}const gT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||gT.has(t)}let rC=t=>!Sh(t);function mT(t){typeof t=="function"&&(rC=n=>n.startsWith("on")?!Sh(n):t(n))}try{mT(require("@emotion/is-prop-valid").default)}catch(t){}function xT(t,n,a){const l={};for(const d in t)d==="values"&&typeof t.values=="object"||(rC(d)||a===!0&&Sh(d)||!n&&!Sh(d)||t.draggable&&d.startsWith("onDrag"))&&(l[d]=t[d]);return l}function bT(t){if(typeof Proxy=="undefined")return t;const n=new Map,a=(...l)=>t(...l);return new Proxy(a,{get:(l,d)=>d==="create"?t:(n.has(d)||n.set(d,t(d)),n.get(d))})}const Oh=w.createContext({});function Bh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qc(t){return typeof t=="string"||Array.isArray(t)}const jm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nm=["initial",...jm];function Fh(t){return Bh(t.animate)||Nm.some(n=>Qc(t[n]))}function nC(t){return!!(Fh(t)||t.variants)}function yT(t,n){if(Fh(t)){const{initial:a,animate:l}=t;return{initial:a===!1||Qc(a)?a:void 0,animate:Qc(l)?l:void 0}}return t.inherit!==!1?n:{}}function vT(t){const{initial:n,animate:a}=yT(t,w.useContext(Oh));return w.useMemo(()=>({initial:n,animate:a}),[Sv(n),Sv(a)])}function Sv(t){return Array.isArray(t)?t.join(" "):t}const wT=Symbol.for("motionComponentSymbol");function tl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ST(t,n,a){return w.useCallback(l=>{l&&t.onMount&&t.onMount(l),n&&(l?n.mount(l):n.unmount()),a&&(typeof a=="function"?a(l):tl(a)&&(a.current=l))},[n])}const Hm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),CT="framerAppearId",iC="data-"+Hm(CT),aC=w.createContext({});function kT(t,n,a,l,d){var R,B;const{visualElement:p}=w.useContext(Oh),h=w.useContext(tC),x=w.useContext(Lh),m=w.useContext(Pm).reducedMotion,y=w.useRef(null);l=l||h.renderer,!y.current&&l&&(y.current=l(t,{visualState:n,parent:p,props:a,presenceContext:x,blockInitialAnimation:x?x.initial===!1:!1,reducedMotionConfig:m}));const v=y.current,S=w.useContext(aC);v&&!v.projection&&d&&(v.type==="html"||v.type==="svg")&&_T(y.current,a,d,S);const C=w.useRef(!1);w.useInsertionEffect(()=>{v&&C.current&&v.update(a,x)});const _=a[iC],z=w.useRef(!!_&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,_))&&((B=window.MotionHasOptimisedAnimation)==null?void 0:B.call(window,_)));return dS(()=>{v&&(C.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),Bm.render(v.render),z.current&&v.animationState&&v.animationState.animateChanges())}),w.useEffect(()=>{v&&(!z.current&&v.animationState&&v.animationState.animateChanges(),z.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,_)}),z.current=!1))}),v}function _T(t,n,a,l){const{layoutId:d,layout:p,drag:h,dragConstraints:x,layoutScroll:m,layoutRoot:y,layoutCrossfade:v}=n;t.projection=new a(t.latestValues,n["data-framer-portal-id"]?void 0:oC(t.parent)),t.projection.setOptions({layoutId:d,layout:p,alwaysMeasureLayout:!!h||x&&tl(x),visualElement:t,animationType:typeof p=="string"?p:"both",initialPromotionConfig:l,crossfade:v,layoutScroll:m,layoutRoot:y})}function oC(t){if(t)return t.options.allowProjection!==!1?t.projection:oC(t.parent)}function AT({preloadedFeatures:t,createVisualElement:n,useRender:a,useVisualState:l,Component:d}){var x,m;t&&pT(t);function p(y,v){let S;const C=oe(X(X({},w.useContext(Pm)),y),{layoutId:zT(y)}),{isStatic:_}=C,z=vT(y),R=l(y,_);if(!_&&xm){ET();const B=RT(C);S=B.MeasureLayout,z.visualElement=kT(d,R,C,n,B.ProjectionNode)}return $n.jsxs(Oh.Provider,{value:z,children:[S&&z.visualElement?$n.jsx(S,X({visualElement:z.visualElement},C)):null,a(d,y,ST(R,z.visualElement,v),R,_,z.visualElement)]})}p.displayName=`motion.${typeof d=="string"?d:`create(${(m=(x=d.displayName)!=null?x:d.name)!=null?m:""})`}`;const h=w.forwardRef(p);return h[wT]=d,h}function zT({layoutId:t}){const n=w.useContext(gm).id;return n&&t!==void 0?n+"-"+t:t}function ET(t,n){w.useContext(tC).strict}function RT(t){const{drag:n,layout:a}=fl;if(!n&&!a)return{};const l=X(X({},n),a);return{MeasureLayout:n!=null&&n.isEnabled(t)||a!=null&&a.isEnabled(t)?l.MeasureLayout:void 0,ProjectionNode:l.ProjectionNode}}const Gc={};function TT(t){for(const n in t)Gc[n]=t[n],_m(n)&&(Gc[n].isCSSVariable=!0)}function sC(t,{layout:n,layoutId:a}){return ml.has(t)||t.startsWith("origin")||(n||a!==void 0)&&(!!Gc[t]||t==="opacity")}const MT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},IT=gl.length;function DT(t,n,a){let l="",d=!0;for(let p=0;p<IT;p++){const h=gl[p],x=t[h];if(x===void 0)continue;let m=!0;if(typeof x=="number"?m=x===(h.startsWith("scale")?1:0):m=parseFloat(x)===0,!m||a){const y=GS(x,Om[h]);if(!m){d=!1;const v=MT[h]||h;l+=`${v}(${y}) `}a&&(n[h]=y)}}return l=l.trim(),a?l=a(n,d?"":l):d&&(l="none"),l}function Um(t,n,a){const{style:l,vars:d,transformOrigin:p}=t;let h=!1,x=!1;for(const m in n){const y=n[m];if(ml.has(m)){h=!0;continue}else if(_m(m)){d[m]=y;continue}else{const v=GS(y,Om[m]);m.startsWith("origin")?(x=!0,p[m]=v):l[m]=v}}if(n.transform||(h||a?l.transform=DT(n,t.transform,a):l.transform&&(l.transform="none")),x){const{originX:m="50%",originY:y="50%",originZ:v=0}=p;l.transformOrigin=`${m} ${y} ${v}`}}const Vm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lC(t,n,a){for(const l in n)!mn(n[l])&&!sC(l,a)&&(t[l]=n[l])}function WT({transformTemplate:t},n){return w.useMemo(()=>{const a=Vm();return Um(a,n,t),Object.assign({},a.vars,a.style)},[n])}function $T(t,n){const a=t.style||{},l={};return lC(l,a,t),Object.assign(l,WT(t,n)),l}function LT(t,n){const a={},l=$T(t,n);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=l,a}const OT={offset:"stroke-dashoffset",array:"stroke-dasharray"},BT={offset:"strokeDashoffset",array:"strokeDasharray"};function FT(t,n,a=1,l=0,d=!0){t.pathLength=1;const p=d?OT:BT;t[p.offset]=ht.transform(-l);const h=ht.transform(n),x=ht.transform(a);t[p.array]=`${h} ${x}`}function cC(t,S,m,y,v){var C=S,{attrX:n,attrY:a,attrScale:l,pathLength:d,pathSpacing:p=1,pathOffset:h=0}=C,x=Cn(C,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]);var R,B;if(Um(t,x,y),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:z}=t;_.transform&&(z.transform=_.transform,delete _.transform),(z.transform||_.transformOrigin)&&(z.transformOrigin=(R=_.transformOrigin)!=null?R:"50% 50%",delete _.transformOrigin),z.transform&&(z.transformBox=(B=v==null?void 0:v.transformBox)!=null?B:"fill-box",delete _.transformBox),n!==void 0&&(_.x=n),a!==void 0&&(_.y=a),l!==void 0&&(_.scale=l),d!==void 0&&FT(_,d,p,h,!1)}const dC=()=>oe(X({},Vm()),{attrs:{}}),uC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PT(t,n,a,l){const d=w.useMemo(()=>{const p=dC();return cC(p,n,uC(l),t.transformTemplate,t.style),oe(X({},p.attrs),{style:X({},p.style)})},[n]);if(t.style){const p={};lC(p,t.style,t),d.style=X(X({},p),d.style)}return d}const jT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qm(t){return typeof t!="string"||t.includes("-")?!1:!!(jT.indexOf(t)>-1||/[A-Z]/u.test(t))}function NT(t=!1){return(a,l,d,{latestValues:p},h)=>{const m=(qm(a)?PT:LT)(l,p,h,a),y=xT(l,typeof a=="string",t),v=a!==w.Fragment?oe(X(X({},y),m),{ref:d}):{},{children:S}=l,C=w.useMemo(()=>mn(S)?S.get():S,[S]);return w.createElement(a,oe(X({},v),{children:C}))}}function Cv(t){const n=[{},{}];return t==null||t.values.forEach((a,l)=>{n[0][l]=a.get(),n[1][l]=a.getVelocity()}),n}function Ym(t,n,a,l){if(typeof n=="function"){const[d,p]=Cv(l);n=n(a!==void 0?a:t.custom,d,p)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[d,p]=Cv(l);n=n(a!==void 0?a:t.custom,d,p)}return n}function th(t){return mn(t)?t.get():t}function HT({scrapeMotionValuesFromProps:t,createRenderState:n},a,l,d){return{latestValues:UT(a,l,d,t),renderState:n()}}const hC=t=>(n,a)=>{const l=w.useContext(Oh),d=w.useContext(Lh),p=()=>HT(t,n,l,d);return a?p():mm(p)};function UT(t,n,a,l){const d={},p=l(t,{});for(const _ in p)d[_]=th(p[_]);let{initial:h,animate:x}=t;const m=Fh(t),y=nC(t);n&&y&&!m&&t.inherit!==!1&&(h===void 0&&(h=n.initial),x===void 0&&(x=n.animate));let v=a?a.initial===!1:!1;v=v||h===!1;const S=v?x:h;if(S&&typeof S!="boolean"&&!Bh(S)){const _=Array.isArray(S)?S:[S];for(let z=0;z<_.length;z++){const R=Ym(t,_[z]);if(R){const C=R,{transitionEnd:B,transition:T}=C,O=Cn(C,["transitionEnd","transition"]);for(const q in O){let j=O[q];if(Array.isArray(j)){const ee=v?j.length-1:0;j=j[ee]}j!==null&&(d[q]=j)}for(const q in B)d[q]=B[q]}}}return d}function Qm(t,n,a){var p;const{style:l}=t,d={};for(const h in l)(mn(l[h])||n.style&&mn(n.style[h])||sC(h,t)||((p=a==null?void 0:a.getValue(h))==null?void 0:p.liveStyle)!==void 0)&&(d[h]=l[h]);return d}const VT={useVisualState:hC({scrapeMotionValuesFromProps:Qm,createRenderState:Vm})};function fC(t,n,a){const l=Qm(t,n,a);for(const d in t)if(mn(t[d])||mn(n[d])){const p=gl.indexOf(d)!==-1?"attr"+d.charAt(0).toUpperCase()+d.substring(1):d;l[p]=t[d]}return l}const qT={useVisualState:hC({scrapeMotionValuesFromProps:fC,createRenderState:dC})};function YT(t,n){return function(l,{forwardMotionProps:d}={forwardMotionProps:!1}){const p=qm(l)?qT:VT,h=oe(X({},p),{preloadedFeatures:t,useRender:NT(d),createVisualElement:n,Component:l});return AT(h)}}function Xc(t,n,a){const l=t.getProps();return Ym(l,n,a!==void 0?a:l.custom,t)}const O0=t=>Array.isArray(t);function QT(t,n,a){t.hasValue(n)?t.getValue(n).set(a):t.addValue(n,hl(a))}function GT(t){return O0(t)?t[t.length-1]||0:t}function XT(t,n){let h=Xc(t,n)||{},{transitionEnd:l={},transition:d={}}=h,p=Cn(h,["transitionEnd","transition"]);p=X(X({},p),l);for(const x in p){const m=GT(p[x]);QT(t,x,m)}}function KT(t){return!!(mn(t)&&t.add)}function B0(t,n){const a=t.getValue("willChange");if(KT(a))return a.add(n);if(!a&&za.WillChange){const l=new za.WillChange("auto");t.addValue("willChange",l),l.add(n)}}function pC(t){return t.props[iC]}const ZT=t=>t!==null;function JT(t,{repeat:n,repeatType:a="loop"},l){const d=t.filter(ZT),p=n&&a!=="loop"&&n%2===1?0:d.length-1;return d[p]}const eM={type:"spring",stiffness:500,damping:25,restSpeed:10},tM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),rM={type:"keyframes",duration:.8},nM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iM=(t,{keyframes:n})=>n.length>2?rM:ml.has(t)?t.startsWith("scale")?tM(n[1]):eM:nM;function aM(S){var C=S,{when:t,delay:n,delayChildren:a,staggerChildren:l,staggerDirection:d,repeat:p,repeatType:h,repeatDelay:x,from:m,elapsed:y}=C,v=Cn(C,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(v).length}const Gm=(t,n,a,l={},d,p)=>h=>{const x=Lm(l,t)||{},m=x.delay||l.delay||0;let{elapsed:y=0}=l;y=y-Gi(m);const v=oe(X({keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:n.getVelocity()},x),{delay:-y,onUpdate:C=>{n.set(C),x.onUpdate&&x.onUpdate(C)},onComplete:()=>{h(),x.onComplete&&x.onComplete()},name:t,motionValue:n,element:p?void 0:d});aM(x)||Object.assign(v,iM(t,v)),v.duration&&(v.duration=Gi(v.duration)),v.repeatDelay&&(v.repeatDelay=Gi(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let S=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(S=!0)),(za.instantAnimations||za.skipAnimations)&&(S=!0,v.duration=0,v.delay=0),v.allowFlatten=!x.type&&!x.ease,S&&!p&&n.get()!==void 0){const C=JT(v.keyframes,x);if(C!==void 0){pr.update(()=>{v.onUpdate(C),v.onComplete()});return}}return x.isSync?new Dm(v):new BR(v)};function oM({protectedKeys:t,needsAnimating:n},a){const l=t.hasOwnProperty(a)&&n[a]!==!0;return n[a]=!1,l}function gC(t,n,{delay:a=0,transitionOverride:l,type:d}={}){var S;let v=n,{transition:p=t.getDefaultTransition(),transitionEnd:h}=v,x=Cn(v,["transition","transitionEnd"]);l&&(p=l);const m=[],y=d&&t.animationState&&t.animationState.getState()[d];for(const C in x){const _=t.getValue(C,(S=t.latestValues[C])!=null?S:null),z=x[C];if(z===void 0||y&&oM(y,C))continue;const R=X({delay:a},Lm(p||{},C)),B=_.get();if(B!==void 0&&!_.isAnimating&&!Array.isArray(z)&&z===B&&!R.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const q=pC(t);if(q){const j=window.MotionHandoffAnimation(q,C,pr);j!==null&&(R.startTime=j,T=!0)}}B0(t,C),_.start(Gm(C,_,z,t.shouldReduceMotion&&US.has(C)?{type:!1}:R,t,T));const O=_.animation;O&&m.push(O)}return h&&Promise.all(m).then(()=>{pr.update(()=>{h&&XT(t,h)})}),m}function F0(t,n,a={}){var m;const l=Xc(t,n,a.type==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);let{transition:d=t.getDefaultTransition()||{}}=l||{};a.transitionOverride&&(d=a.transitionOverride);const p=l?()=>Promise.all(gC(t,l,a)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(y=0)=>{const{delayChildren:v=0,staggerChildren:S,staggerDirection:C}=d;return sM(t,n,y,v,S,C,a)}:()=>Promise.resolve(),{when:x}=d;if(x){const[y,v]=x==="beforeChildren"?[p,h]:[h,p];return y().then(()=>v())}else return Promise.all([p(),h(a.delay)])}function sM(t,n,a=0,l=0,d=0,p=1,h){const x=[],m=t.variantChildren.size,y=(m-1)*d,v=typeof l=="function",S=v?C=>l(C,m):p===1?(C=0)=>C*d:(C=0)=>y-C*d;return Array.from(t.variantChildren).sort(lM).forEach((C,_)=>{C.notify("AnimationStart",n),x.push(F0(C,n,oe(X({},h),{delay:a+(v?0:l)+S(_)})).then(()=>C.notify("AnimationComplete",n)))}),Promise.all(x)}function lM(t,n){return t.sortNodePosition(n)}function cM(t,n,a={}){t.notify("AnimationStart",n);let l;if(Array.isArray(n)){const d=n.map(p=>F0(t,p,a));l=Promise.all(d)}else if(typeof n=="string")l=F0(t,n,a);else{const d=typeof n=="function"?Xc(t,n,a.custom):n;l=Promise.all(gC(t,d,a))}return l.then(()=>{t.notify("AnimationComplete",n)})}function mC(t,n){if(!Array.isArray(n))return!1;const a=n.length;if(a!==t.length)return!1;for(let l=0;l<a;l++)if(n[l]!==t[l])return!1;return!0}const dM=Nm.length;function xC(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?xC(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const n={};for(let a=0;a<dM;a++){const l=Nm[a],d=t.props[l];(Qc(d)||d===!1)&&(n[l]=d)}return n}const uM=[...jm].reverse(),hM=jm.length;function fM(t){return n=>Promise.all(n.map(({animation:a,options:l})=>cM(t,a,l)))}function pM(t){let n=fM(t),a=kv(),l=!0;const d=m=>(y,v)=>{var C;const S=Xc(t,v,m==="exit"?(C=t.presenceContext)==null?void 0:C.custom:void 0);if(S){const _=S,{transition:z,transitionEnd:R}=_,B=Cn(_,["transition","transitionEnd"]);y=X(X(X({},y),B),R)}return y};function p(m){n=m(t)}function h(m){const{props:y}=t,v=xC(t.parent)||{},S=[],C=new Set;let _={},z=1/0;for(let B=0;B<hM;B++){const T=uM[B],O=a[T],q=y[T]!==void 0?y[T]:v[T],j=Qc(q),ee=T===m?O.isActive:null;ee===!1&&(z=B);let V=q===v[T]&&q!==y[T]&&j;if(V&&l&&t.manuallyAnimateOnMount&&(V=!1),O.protectedKeys=X({},_),!O.isActive&&ee===null||!q&&!O.prevProp||Bh(q)||typeof q=="boolean")continue;const L=gM(O.prevProp,q);let k=L||T===m&&O.isActive&&!V&&j||B>z&&j,G=!1;const W=Array.isArray(q)?q:[q];let M=W.reduce(d(T),{});ee===!1&&(M={});const{prevResolvedValues:U={}}=O,H=X(X({},U),M),N=I=>{k=!0,C.has(I)&&(G=!0,C.delete(I)),O.needsAnimating[I]=!0;const A=t.getValue(I);A&&(A.liveStyle=!1)};for(const I in H){const A=M[I],Q=U[I];if(_.hasOwnProperty(I))continue;let J=!1;O0(A)&&O0(Q)?J=!mC(A,Q):J=A!==Q,J?A!=null?N(I):C.add(I):A!==void 0&&C.has(I)?N(I):O.protectedKeys[I]=!0}O.prevProp=q,O.prevResolvedValues=M,O.isActive&&(_=X(X({},_),M)),l&&t.blockInitialAnimation&&(k=!1),k&&(!(V&&L)||G)&&S.push(...W.map(I=>({animation:I,options:{type:T}})))}if(C.size){const B={};if(typeof y.initial!="boolean"){const T=Xc(t,Array.isArray(y.initial)?y.initial[0]:y.initial);T&&T.transition&&(B.transition=T.transition)}C.forEach(T=>{const O=t.getBaseTarget(T),q=t.getValue(T);q&&(q.liveStyle=!0),B[T]=O!=null?O:null}),S.push({animation:B})}let R=!!S.length;return l&&(y.initial===!1||y.initial===y.animate)&&!t.manuallyAnimateOnMount&&(R=!1),l=!1,R?n(S):Promise.resolve()}function x(m,y){var S;if(a[m].isActive===y)return Promise.resolve();(S=t.variantChildren)==null||S.forEach(C=>{var _;return(_=C.animationState)==null?void 0:_.setActive(m,y)}),a[m].isActive=y;const v=h(m);for(const C in a)a[C].protectedKeys={};return v}return{animateChanges:h,setActive:x,setAnimateFunction:p,getState:()=>a,reset:()=>{a=kv(),l=!0}}}function gM(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!mC(n,t):!1}function Io(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kv(){return{animate:Io(!0),whileInView:Io(),whileHover:Io(),whileTap:Io(),whileDrag:Io(),whileFocus:Io(),exit:Io()}}class ho{constructor(n){this.isMounted=!1,this.node=n}update(){}}class mM extends ho{constructor(n){super(n),n.animationState||(n.animationState=pM(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();Bh(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:a}=this.node.prevProps||{};n!==a&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let xM=0;class bM extends ho{constructor(){super(...arguments),this.id=xM++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:a}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===l)return;const d=this.node.animationState.setActive("exit",!n);a&&!n&&d.then(()=>{a(this.id)})}mount(){const{register:n,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const yM={animation:{Feature:mM},exit:{Feature:bM}};function Kc(t,n,a,l={passive:!0}){return t.addEventListener(n,a,l),()=>t.removeEventListener(n,a)}function pd(t){return{point:{x:t.pageX,y:t.pageY}}}const vM=t=>n=>Fm(n)&&t(n,pd(n));function Lc(t,n,a,l){return Kc(t,n,vM(a),l)}function bC({top:t,left:n,right:a,bottom:l}){return{x:{min:n,max:a},y:{min:t,max:l}}}function wM({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function SM(t,n){if(!n)return t;const a=n({x:t.left,y:t.top}),l=n({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:l.y,right:l.x}}const yC=1e-4,CM=1-yC,kM=1+yC,vC=.01,_M=0-vC,AM=0+vC;function _n(t){return t.max-t.min}function zM(t,n,a){return Math.abs(t-n)<=a}function _v(t,n,a,l=.5){t.origin=l,t.originPoint=br(n.min,n.max,t.origin),t.scale=_n(a)/_n(n),t.translate=br(a.min,a.max,t.origin)-t.originPoint,(t.scale>=CM&&t.scale<=kM||isNaN(t.scale))&&(t.scale=1),(t.translate>=_M&&t.translate<=AM||isNaN(t.translate))&&(t.translate=0)}function Oc(t,n,a,l){_v(t.x,n.x,a.x,l?l.originX:void 0),_v(t.y,n.y,a.y,l?l.originY:void 0)}function Av(t,n,a){t.min=a.min+n.min,t.max=t.min+_n(n)}function EM(t,n,a){Av(t.x,n.x,a.x),Av(t.y,n.y,a.y)}function zv(t,n,a){t.min=n.min-a.min,t.max=t.min+_n(n)}function Bc(t,n,a){zv(t.x,n.x,a.x),zv(t.y,n.y,a.y)}const Ev=()=>({translate:0,scale:1,origin:0,originPoint:0}),rl=()=>({x:Ev(),y:Ev()}),Rv=()=>({min:0,max:0}),Dr=()=>({x:Rv(),y:Rv()});function Si(t){return[t("x"),t("y")]}function jg(t){return t===void 0||t===1}function P0({scale:t,scaleX:n,scaleY:a}){return!jg(t)||!jg(n)||!jg(a)}function Fo(t){return P0(t)||wC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wC(t){return Tv(t.x)||Tv(t.y)}function Tv(t){return t&&t!=="0%"}function Ch(t,n,a){const l=t-a,d=n*l;return a+d}function Mv(t,n,a,l,d){return d!==void 0&&(t=Ch(t,d,l)),Ch(t,a,l)+n}function j0(t,n=0,a=1,l,d){t.min=Mv(t.min,n,a,l,d),t.max=Mv(t.max,n,a,l,d)}function SC(t,{x:n,y:a}){j0(t.x,n.translate,n.scale,n.originPoint),j0(t.y,a.translate,a.scale,a.originPoint)}const Iv=.999999999999,Dv=1.0000000000001;function RM(t,n,a,l=!1){const d=a.length;if(!d)return;n.x=n.y=1;let p,h;for(let x=0;x<d;x++){p=a[x],h=p.projectionDelta;const{visualElement:m}=p.options;m&&m.props.style&&m.props.style.display==="contents"||(l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&il(t,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),h&&(n.x*=h.x.scale,n.y*=h.y.scale,SC(t,h)),l&&Fo(p.latestValues)&&il(t,p.latestValues))}n.x<Dv&&n.x>Iv&&(n.x=1),n.y<Dv&&n.y>Iv&&(n.y=1)}function nl(t,n){t.min=t.min+n,t.max=t.max+n}function Wv(t,n,a,l,d=.5){const p=br(t.min,t.max,d);j0(t,n,a,p,l)}function il(t,n){Wv(t.x,n.x,n.scaleX,n.scale,n.originX),Wv(t.y,n.y,n.scaleY,n.scale,n.originY)}function CC(t,n){return bC(SM(t.getBoundingClientRect(),n))}function TM(t,n,a){const l=CC(t,a),{scroll:d}=n;return d&&(nl(l.x,d.offset.x),nl(l.y,d.offset.y)),l}const kC=({current:t})=>t?t.ownerDocument.defaultView:null,$v=(t,n)=>Math.abs(t-n);function MM(t,n){const a=$v(t.x,n.x),l=$v(t.y,n.y);return Math.sqrt(Yp(a,2)+Yp(l,2))}class _C{constructor(n,a,{transformPagePoint:l,contextWindow:d=window,dragSnapToOrigin:p=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Hg(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,z=MM(C.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!z)return;const{point:R}=C,{timestamp:B}=ln;this.history.push(oe(X({},R),{timestamp:B}));const{onStart:T,onMove:O}=this.handlers;_||(T&&T(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,C)},this.handlePointerMove=(C,_)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=Ng(_,this.transformPagePoint),pr.update(this.updatePoint,!0)},this.handlePointerUp=(C,_)=>{this.end();const{onEnd:z,onSessionEnd:R,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Hg(C.type==="pointercancel"?this.lastMoveEventInfo:Ng(_,this.transformPagePoint),this.history);this.startEvent&&z&&z(C,T),R&&R(C,T)},!Fm(n))return;this.dragSnapToOrigin=p,this.handlers=a,this.transformPagePoint=l,this.distanceThreshold=h,this.contextWindow=d||window;const x=pd(n),m=Ng(x,this.transformPagePoint),{point:y}=m,{timestamp:v}=ln;this.history=[oe(X({},y),{timestamp:v})];const{onSessionStart:S}=a;S&&S(n,Hg(m,this.history)),this.removeListeners=ud(Lc(this.contextWindow,"pointermove",this.handlePointerMove),Lc(this.contextWindow,"pointerup",this.handlePointerUp),Lc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),oo(this.updatePoint)}}function Ng(t,n){return n?{point:n(t.point)}:t}function Lv(t,n){return{x:t.x-n.x,y:t.y-n.y}}function Hg({point:t},n){return{point:t,delta:Lv(t,AC(n)),offset:Lv(t,IM(n)),velocity:DM(n,.1)}}function IM(t){return t[0]}function AC(t){return t[t.length-1]}function DM(t,n){if(t.length<2)return{x:0,y:0};let a=t.length-1,l=null;const d=AC(t);for(;a>=0&&(l=t[a],!(d.timestamp-l.timestamp>Gi(n)));)a--;if(!l)return{x:0,y:0};const p=Xi(d.timestamp-l.timestamp);if(p===0)return{x:0,y:0};const h={x:(d.x-l.x)/p,y:(d.y-l.y)/p};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function WM(t,{min:n,max:a},l){return n!==void 0&&t<n?t=l?br(n,t,l.min):Math.max(t,n):a!==void 0&&t>a&&(t=l?br(a,t,l.max):Math.min(t,a)),t}function Ov(t,n,a){return{min:n!==void 0?t.min+n:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function $M(t,{top:n,left:a,bottom:l,right:d}){return{x:Ov(t.x,a,d),y:Ov(t.y,n,l)}}function Bv(t,n){let a=n.min-t.min,l=n.max-t.max;return n.max-n.min<t.max-t.min&&([a,l]=[l,a]),{min:a,max:l}}function LM(t,n){return{x:Bv(t.x,n.x),y:Bv(t.y,n.y)}}function OM(t,n){let a=.5;const l=_n(t),d=_n(n);return d>l?a=Vc(n.min,n.max-l,t.min):l>d&&(a=Vc(t.min,t.max-d,n.min)),Aa(0,1,a)}function BM(t,n){const a={};return n.min!==void 0&&(a.min=n.min-t.min),n.max!==void 0&&(a.max=n.max-t.min),a}const N0=.35;function FM(t=N0){return t===!1?t=0:t===!0&&(t=N0),{x:Fv(t,"left","right"),y:Fv(t,"top","bottom")}}function Fv(t,n,a){return{min:Pv(t,n),max:Pv(t,a)}}function Pv(t,n){return typeof t=="number"?t:t[n]||0}const PM=new WeakMap;class jM{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:a=!1,distanceThreshold:l}={}){const{presenceContext:d}=this.visualElement;if(d&&d.isPresent===!1)return;const p=S=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(pd(S).point)},h=(S,C)=>{const{drag:_,dragPropagation:z,onDragStart:R}=this.getProps();if(_&&!z&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eT(_),!this.openDragLock))return;this.latestPointerEvent=S,this.latestPanInfo=C,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Si(T=>{let O=this.getAxisMotionValue(T).get()||0;if(Ki.test(O)){const{projection:q}=this.visualElement;if(q&&q.layout){const j=q.layout.layoutBox[T];j&&(O=_n(j)*(parseFloat(O)/100))}}this.originPoint[T]=O}),R&&pr.postRender(()=>R(S,C)),B0(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},x=(S,C)=>{this.latestPointerEvent=S,this.latestPanInfo=C;const{dragPropagation:_,dragDirectionLock:z,onDirectionLock:R,onDrag:B}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:T}=C;if(z&&this.currentDirection===null){this.currentDirection=NM(T),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",C.point,T),this.updateAxis("y",C.point,T),this.visualElement.render(),B&&B(S,C)},m=(S,C)=>{this.latestPointerEvent=S,this.latestPanInfo=C,this.stop(S,C),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>Si(S=>{var C;return this.getAnimationState(S)==="paused"&&((C=this.getAxisMotionValue(S).animation)==null?void 0:C.play())}),{dragSnapToOrigin:v}=this.getProps();this.panSession=new _C(n,{onSessionStart:p,onStart:h,onMove:x,onSessionEnd:m,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:l,contextWindow:kC(this.visualElement)})}stop(n,a){const l=n||this.latestPointerEvent,d=a||this.latestPanInfo,p=this.isDragging;if(this.cancel(),!p||!d||!l)return;const{velocity:h}=d;this.startAnimation(h);const{onDragEnd:x}=this.getProps();x&&pr.postRender(()=>x(l,d))}cancel(){this.isDragging=!1;const{projection:n,animationState:a}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(n,a,l){const{drag:d}=this.getProps();if(!l||!Hu(n,d,this.currentDirection))return;const p=this.getAxisMotionValue(n);let h=this.originPoint[n]+l[n];this.constraints&&this.constraints[n]&&(h=WM(h,this.constraints[n],this.elastic[n])),p.set(h)}resolveConstraints(){var p;const{dragConstraints:n,dragElastic:a}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(p=this.visualElement.projection)==null?void 0:p.layout,d=this.constraints;n&&tl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&l?this.constraints=$M(l.layoutBox,n):this.constraints=!1,this.elastic=FM(a),d!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&Si(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=BM(l.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:a}=this.getProps();if(!n||!tl(n))return!1;const l=n.current,{projection:d}=this.visualElement;if(!d||!d.layout)return!1;const p=TM(l,d.root,this.visualElement.getTransformPagePoint());let h=LM(d.layout.layoutBox,p);if(a){const x=a(wM(h));this.hasMutatedConstraints=!!x,x&&(h=bC(x))}return h}startAnimation(n){const{drag:a,dragMomentum:l,dragElastic:d,dragTransition:p,dragSnapToOrigin:h,onDragTransitionEnd:x}=this.getProps(),m=this.constraints||{},y=Si(v=>{if(!Hu(v,a,this.currentDirection))return;let S=m&&m[v]||{};h&&(S={min:0,max:0});const C=d?200:1e6,_=d?40:1e7,z=X(X({type:"inertia",velocity:l?n[v]:0,bounceStiffness:C,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10},p),S);return this.startAxisValueAnimation(v,z)});return Promise.all(y).then(x)}startAxisValueAnimation(n,a){const l=this.getAxisMotionValue(n);return B0(this.visualElement,n),l.start(Gm(n,l,0,a,this.visualElement,!1))}stopAnimation(){Si(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Si(n=>{var a;return(a=this.getAxisMotionValue(n).animation)==null?void 0:a.pause()})}getAnimationState(n){var a;return(a=this.getAxisMotionValue(n).animation)==null?void 0:a.state}getAxisMotionValue(n){const a=`_drag${n.toUpperCase()}`,l=this.visualElement.getProps(),d=l[a];return d||this.visualElement.getValue(n,(l.initial?l.initial[n]:void 0)||0)}snapToCursor(n){Si(a=>{const{drag:l}=this.getProps();if(!Hu(a,l,this.currentDirection))return;const{projection:d}=this.visualElement,p=this.getAxisMotionValue(a);if(d&&d.layout){const{min:h,max:x}=d.layout.layoutBox[a];p.set(n[a]-br(h,x,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:a}=this.getProps(),{projection:l}=this.visualElement;if(!tl(a)||!l||!this.constraints)return;this.stopAnimation();const d={x:0,y:0};Si(h=>{const x=this.getAxisMotionValue(h);if(x&&this.constraints!==!1){const m=x.get();d[h]=OM({min:m,max:m},this.constraints[h])}});const{transformTemplate:p}=this.visualElement.getProps();this.visualElement.current.style.transform=p?p({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),Si(h=>{if(!Hu(h,n,null))return;const x=this.getAxisMotionValue(h),{min:m,max:y}=this.constraints[h];x.set(br(m,y,d[h]))})}addListeners(){if(!this.visualElement.current)return;PM.set(this.visualElement,this);const n=this.visualElement.current,a=Lc(n,"pointerdown",m=>{const{drag:y,dragListener:v=!0}=this.getProps();y&&v&&this.start(m)}),l=()=>{const{dragConstraints:m}=this.getProps();tl(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:d}=this.visualElement,p=d.addEventListener("measure",l);d&&!d.layout&&(d.root&&d.root.updateScroll(),d.updateLayout()),pr.read(l);const h=Kc(window,"resize",()=>this.scalePositionWithinConstraints()),x=d.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y})=>{this.isDragging&&y&&(Si(v=>{const S=this.getAxisMotionValue(v);S&&(this.originPoint[v]+=m[v].translate,S.set(S.get()+m[v].translate))}),this.visualElement.render())});return()=>{h(),a(),p(),x&&x()}}getProps(){const n=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:l=!1,dragPropagation:d=!1,dragConstraints:p=!1,dragElastic:h=N0,dragMomentum:x=!0}=n;return oe(X({},n),{drag:a,dragDirectionLock:l,dragPropagation:d,dragConstraints:p,dragElastic:h,dragMomentum:x})}}function Hu(t,n,a){return(n===!0||n===t)&&(a===null||a===t)}function NM(t,n=10){let a=null;return Math.abs(t.y)>n?a="y":Math.abs(t.x)>n&&(a="x"),a}class HM extends ho{constructor(n){super(n),this.removeGroupControls=Ai,this.removeListeners=Ai,this.controls=new jM(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ai}unmount(){this.removeGroupControls(),this.removeListeners()}}const jv=t=>(n,a)=>{t&&pr.postRender(()=>t(n,a))};class UM extends ho{constructor(){super(...arguments),this.removePointerDownListener=Ai}onPointerDown(n){this.session=new _C(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kC(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:a,onPan:l,onPanEnd:d}=this.node.getProps();return{onSessionStart:jv(n),onStart:jv(a),onMove:l,onEnd:(p,h)=>{delete this.session,d&&pr.postRender(()=>d(p,h))}}}mount(){this.removePointerDownListener=Lc(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Nv(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const vc={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(ht.test(t))t=parseFloat(t);else return t;const a=Nv(t,n.target.x),l=Nv(t,n.target.y);return`${a}% ${l}%`}},VM={correct:(t,{treeScale:n,projectionDelta:a})=>{const l=t,d=so.parse(t);if(d.length>5)return l;const p=so.createTransformer(t),h=typeof d[0]!="number"?1:0,x=a.x.scale*n.x,m=a.y.scale*n.y;d[0+h]/=x,d[1+h]/=m;const y=br(x,m,.5);return typeof d[2+h]=="number"&&(d[2+h]/=y),typeof d[3+h]=="number"&&(d[3+h]/=y),p(d)}};let Hv=!1;class qM extends w.Component{componentDidMount(){const{visualElement:n,layoutGroup:a,switchLayoutGroup:l,layoutId:d}=this.props,{projection:p}=n;TT(YM),p&&(a.group&&a.group.add(p),l&&l.register&&d&&l.register(p),Hv&&p.root.didUpdate(),p.addEventListener("animationComplete",()=>{this.safeToRemove()}),p.setOptions(oe(X({},p.options),{onExitComplete:()=>this.safeToRemove()}))),rh.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:a,visualElement:l,drag:d,isPresent:p}=this.props,{projection:h}=l;return h&&(h.isPresent=p,Hv=!0,d||n.layoutDependency!==a||a===void 0||n.isPresent!==p?h.willUpdate():this.safeToRemove(),n.isPresent!==p&&(p?h.promote():h.relegate()||pr.postRender(()=>{const x=h.getStack();(!x||!x.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),Bm.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:a,switchLayoutGroup:l}=this.props,{projection:d}=n;d&&(d.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(d),l&&l.deregister&&l.deregister(d))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function zC(t){const[n,a]=eC(),l=w.useContext(gm);return $n.jsx(qM,oe(X({},t),{layoutGroup:l,switchLayoutGroup:w.useContext(aC),isPresent:n,safeToRemove:a}))}const YM={borderRadius:oe(X({},vc),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:vc,borderTopRightRadius:vc,borderBottomLeftRadius:vc,borderBottomRightRadius:vc,boxShadow:VM};function QM(t,n,a){const l=mn(t)?t:hl(t);return l.start(Gm("",l,n,a)),l.animation}const GM=(t,n)=>t.depth-n.depth;class XM{constructor(){this.children=[],this.isDirty=!1}add(n){bm(this.children,n),this.isDirty=!0}remove(n){ym(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(GM),this.isDirty=!1,this.children.forEach(n)}}function KM(t,n){const a=Wn.now(),l=({timestamp:d})=>{const p=d-a;p>=n&&(oo(l),t(p-n))};return pr.setup(l,!0),()=>oo(l)}const EC=["TopLeft","TopRight","BottomLeft","BottomRight"],ZM=EC.length,Uv=t=>typeof t=="string"?parseFloat(t):t,Vv=t=>typeof t=="number"||ht.test(t);function JM(t,n,a,l,d,p){var h,x,m,y;d?(t.opacity=br(0,(h=a.opacity)!=null?h:1,eI(l)),t.opacityExit=br((x=n.opacity)!=null?x:1,0,tI(l))):p&&(t.opacity=br((m=n.opacity)!=null?m:1,(y=a.opacity)!=null?y:1,l));for(let v=0;v<ZM;v++){const S=`border${EC[v]}Radius`;let C=qv(n,S),_=qv(a,S);if(C===void 0&&_===void 0)continue;C||(C=0),_||(_=0),C===0||_===0||Vv(C)===Vv(_)?(t[S]=Math.max(br(Uv(C),Uv(_),l),0),(Ki.test(_)||Ki.test(C))&&(t[S]+="%")):t[S]=_}(n.rotate||a.rotate)&&(t.rotate=br(n.rotate||0,a.rotate||0,l))}function qv(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const eI=RC(0,.5,wS),tI=RC(.5,.95,Ai);function RC(t,n,a){return l=>l<t?0:l>n?1:a(Vc(t,n,l))}function Yv(t,n){t.min=n.min,t.max=n.max}function wi(t,n){Yv(t.x,n.x),Yv(t.y,n.y)}function Qv(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function Gv(t,n,a,l,d){return t-=n,t=Ch(t,1/a,l),d!==void 0&&(t=Ch(t,1/d,l)),t}function rI(t,n=0,a=1,l=.5,d,p=t,h=t){if(Ki.test(n)&&(n=parseFloat(n),n=br(h.min,h.max,n/100)-h.min),typeof n!="number")return;let x=br(p.min,p.max,l);t===p&&(x-=n),t.min=Gv(t.min,n,a,x,d),t.max=Gv(t.max,n,a,x,d)}function Xv(t,n,[a,l,d],p,h){rI(t,n[a],n[l],n[d],n.scale,p,h)}const nI=["x","scaleX","originX"],iI=["y","scaleY","originY"];function Kv(t,n,a,l){Xv(t.x,n,nI,a?a.x:void 0,l?l.x:void 0),Xv(t.y,n,iI,a?a.y:void 0,l?l.y:void 0)}function Zv(t){return t.translate===0&&t.scale===1}function TC(t){return Zv(t.x)&&Zv(t.y)}function Jv(t,n){return t.min===n.min&&t.max===n.max}function aI(t,n){return Jv(t.x,n.x)&&Jv(t.y,n.y)}function e5(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function MC(t,n){return e5(t.x,n.x)&&e5(t.y,n.y)}function t5(t){return _n(t.x)/_n(t.y)}function r5(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class oI{constructor(){this.members=[]}add(n){bm(this.members,n),n.scheduleRender()}remove(n){if(ym(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(n){const a=this.members.findIndex(d=>n===d);if(a===0)return!1;let l;for(let d=a;d>=0;d--){const p=this.members[d];if(p.isPresent!==!1){l=p;break}}return l?(this.promote(l),!0):!1}promote(n,a){const l=this.lead;if(n!==l&&(this.prevLead=l,this.lead=n,n.show(),l)){l.instance&&l.scheduleRender(),n.scheduleRender(),n.resumeFrom=l,a&&(n.resumeFrom.preserveOpacity=!0),l.snapshot&&(n.snapshot=l.snapshot,n.snapshot.latestValues=l.animationValues||l.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:d}=n.options;d===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:a,resumingFrom:l}=n;a.onExitComplete&&a.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sI(t,n,a){let l="";const d=t.x.translate/n.x,p=t.y.translate/n.y,h=(a==null?void 0:a.z)||0;if((d||p||h)&&(l=`translate3d(${d}px, ${p}px, ${h}px) `),(n.x!==1||n.y!==1)&&(l+=`scale(${1/n.x}, ${1/n.y}) `),a){const{transformPerspective:y,rotate:v,rotateX:S,rotateY:C,skewX:_,skewY:z}=a;y&&(l=`perspective(${y}px) ${l}`),v&&(l+=`rotate(${v}deg) `),S&&(l+=`rotateX(${S}deg) `),C&&(l+=`rotateY(${C}deg) `),_&&(l+=`skewX(${_}deg) `),z&&(l+=`skewY(${z}deg) `)}const x=t.x.scale*n.x,m=t.y.scale*n.y;return(x!==1||m!==1)&&(l+=`scale(${x}, ${m})`),l||"none"}const Ug=["","X","Y","Z"],lI=1e3;let cI=0;function Vg(t,n,a,l){const{latestValues:d}=n;d[t]&&(a[t]=d[t],n.setStaticValue(t,0),l&&(l[t]=0))}function IC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const a=pC(n);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:d,layoutId:p}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",pr,!(d||p))}const{parent:l}=t;l&&!l.hasCheckedOptimisedAppear&&IC(l)}function DC({attachResizeListener:t,defaultParent:n,measureScroll:a,checkIsScrollRoot:l,resetTransform:d}){return class{constructor(h={},x=n==null?void 0:n()){this.id=cI++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hI),this.nodes.forEach(mI),this.nodes.forEach(xI),this.nodes.forEach(fI)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=x?x.root||x:this,this.path=x?[...x.path,x]:[],this.parent=x,this.depth=x?x.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new XM)}addEventListener(h,x){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new Sm),this.eventHandlers.get(h).add(x)}notifyListeners(h,...x){const m=this.eventHandlers.get(h);m&&m.notify(...x)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=JS(h)&&!oT(h),this.instance=h;const{layoutId:x,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||x)&&(this.isLayoutDirty=!0),t){let v,S=0;const C=()=>this.root.updateBlockedByResize=!1;pr.read(()=>{S=window.innerWidth}),t(h,()=>{const _=window.innerWidth;_!==S&&(S=_,this.root.updateBlockedByResize=!0,v&&v(),v=KM(C,250),rh.hasAnimatedSinceResize&&(rh.hasAnimatedSinceResize=!1,this.nodes.forEach(a5)))})}x&&this.root.registerSharedNode(x,this),this.options.animate!==!1&&y&&(x||m)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:S,hasRelativeLayoutChanged:C,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const z=this.options.transition||y.getDefaultTransition()||SI,{onLayoutAnimationStart:R,onLayoutAnimationComplete:B}=y.getProps(),T=!this.targetLayout||!MC(this.targetLayout,_),O=!S&&C;if(this.options.layoutRoot||this.resumeFrom||O||S&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const q=oe(X({},Lm(z,"layout")),{onPlay:R,onComplete:B});(y.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q),this.setAnimationOrigin(v,O)}else S||a5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bI),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const S=this.path[v];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:x,layout:m}=this.options;if(x===void 0&&!m)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n5);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(i5);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gI),this.nodes.forEach(dI),this.nodes.forEach(uI)):this.nodes.forEach(i5),this.clearAllSnapshots();const x=Wn.now();ln.delta=Aa(0,1e3/60,x-ln.timestamp),ln.timestamp=x,ln.isProcessing=!0,$g.update.process(ln),$g.preRender.process(ln),$g.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pI),this.sharedNodes.forEach(yI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_n(this.snapshot.measuredBox.x)&&!_n(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:x}=this.options;x&&x.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let x=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(x=!1),x&&this.instance){const m=l(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:m,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!d)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,x=this.projectionDelta&&!TC(this.projectionDelta),m=this.getTransformTemplate(),y=m?m(this.latestValues,""):void 0,v=y!==this.prevTransformTemplateValue;h&&this.instance&&(x||Fo(this.latestValues)||v)&&(d(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const x=this.measurePageBox();let m=this.removeElementScroll(x);return h&&(m=this.removeTransform(m)),CI(m),{animationId:this.root.animationId,measuredBox:x,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var y;const{visualElement:h}=this.options;if(!h)return Dr();const x=h.measureViewportBox();if(!(((y=this.scroll)==null?void 0:y.wasRoot)||this.path.some(kI))){const{scroll:v}=this.root;v&&(nl(x.x,v.offset.x),nl(x.y,v.offset.y))}return x}removeElementScroll(h){var m;const x=Dr();if(wi(x,h),(m=this.scroll)!=null&&m.wasRoot)return x;for(let y=0;y<this.path.length;y++){const v=this.path[y],{scroll:S,options:C}=v;v!==this.root&&S&&C.layoutScroll&&(S.wasRoot&&wi(x,h),nl(x.x,S.offset.x),nl(x.y,S.offset.y))}return x}applyTransform(h,x=!1){const m=Dr();wi(m,h);for(let y=0;y<this.path.length;y++){const v=this.path[y];!x&&v.options.layoutScroll&&v.scroll&&v!==v.root&&il(m,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),Fo(v.latestValues)&&il(m,v.latestValues)}return Fo(this.latestValues)&&il(m,this.latestValues),m}removeTransform(h){const x=Dr();wi(x,h);for(let m=0;m<this.path.length;m++){const y=this.path[m];if(!y.instance||!Fo(y.latestValues))continue;P0(y.latestValues)&&y.updateSnapshot();const v=Dr(),S=y.measurePageBox();wi(v,S),Kv(x,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,v)}return Fo(this.latestValues)&&Kv(x,this.latestValues),x}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options=oe(X(X({},this.options),h),{crossfade:h.crossfade!==void 0?h.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var C;const x=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=x.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=x.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=x.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==x;if(!(h||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(C=this.parent)!=null&&C.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:S}=this.options;if(!(!this.layout||!(v||S))){if(this.resolvedRelativeTargetAt=ln.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dr(),this.relativeTargetOrigin=Dr(),Bc(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dr(),this.targetWithTransforms=Dr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),SC(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dr(),this.relativeTargetOrigin=Dr(),Bc(this.relativeTargetOrigin,this.target,_.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||P0(this.parent.latestValues)||wC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var z;const h=this.getLead(),x=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||(z=this.parent)!=null&&z.isProjectionDirty)&&(m=!1),x&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(m=!1),m)return;const{layout:y,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||v))return;wi(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,C=this.treeScale.y;RM(this.layoutCorrected,this.treeScale,this.path,x),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Dr());const{target:_}=h;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qv(this.prevProjectionDelta.x,this.projectionDelta.x),Qv(this.prevProjectionDelta.y,this.projectionDelta.y)),Oc(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==C||!r5(this.projectionDelta.x,this.prevProjectionDelta.x)||!r5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var x;if((x=this.options.visualElement)==null||x.scheduleRender(),h){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rl(),this.projectionDelta=rl(),this.projectionDeltaWithTransform=rl()}setAnimationOrigin(h,x=!1){const m=this.snapshot,y=m?m.latestValues:{},v=X({},this.latestValues),S=rl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!x;const C=Dr(),_=m?m.source:void 0,z=this.layout?this.layout.source:void 0,R=_!==z,B=this.getStack(),T=!B||B.members.length<=1,O=!!(R&&!T&&this.options.crossfade===!0&&!this.path.some(wI));this.animationProgress=0;let q;this.mixTargetDelta=j=>{const ee=j/1e3;o5(S.x,h.x,ee),o5(S.y,h.y,ee),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bc(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vI(this.relativeTarget,this.relativeTargetOrigin,C,ee),q&&aI(this.relativeTarget,q)&&(this.isProjectionDirty=!1),q||(q=Dr()),wi(q,this.relativeTarget)),R&&(this.animationValues=v,JM(v,y,this.latestValues,ee,O,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var x,m,y;this.notifyListeners("animationStart"),(x=this.currentAnimation)==null||x.stop(),(y=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||y.stop(),this.pendingAnimation&&(oo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pr.update(()=>{rh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hl(0)),this.currentAnimation=QM(this.motionValue,[0,1e3],oe(X({},h),{velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),h.onUpdate&&h.onUpdate(v)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:x,target:m,layout:y,latestValues:v}=h;if(!(!x||!m||!y)){if(this!==h&&this.layout&&y&&WC(this.options.animationType,this.layout.layoutBox,y.layoutBox)){m=this.target||Dr();const S=_n(this.layout.layoutBox.x);m.x.min=h.target.x.min,m.x.max=m.x.min+S;const C=_n(this.layout.layoutBox.y);m.y.min=h.target.y.min,m.y.max=m.y.min+C}wi(x,m),il(x,v),Oc(this.projectionDeltaWithTransform,this.layoutCorrected,x,v)}}registerSharedNode(h,x){this.sharedNodes.has(h)||this.sharedNodes.set(h,new oI),this.sharedNodes.get(h).add(x);const y=x.options.initialPromotionConfig;x.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(x):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var x;const{layoutId:h}=this.options;return h?((x=this.getStack())==null?void 0:x.lead)||this:this}getPrevLead(){var x;const{layoutId:h}=this.options;return h?(x=this.getStack())==null?void 0:x.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:x,preserveFollowOpacity:m}={}){const y=this.getStack();y&&y.promote(this,m),h&&(this.projectionDelta=void 0,this.needsReset=!0),x&&this.setOptions({transition:x})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let x=!1;const{latestValues:m}=h;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(x=!0),!x)return;const y={};m.z&&Vg("z",h,y,this.animationValues);for(let v=0;v<Ug.length;v++)Vg(`rotate${Ug[v]}`,h,y,this.animationValues),Vg(`skew${Ug[v]}`,h,y,this.animationValues);h.render();for(const v in y)h.setStaticValue(v,y[v]),this.animationValues&&(this.animationValues[v]=y[v]);h.scheduleRender()}applyProjectionStyles(h,x){var z,R;if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=th(x==null?void 0:x.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=th(x==null?void 0:x.pointerEvents)||""),this.hasProjected&&!Fo(this.latestValues)&&(h.transform=m?m({},""):"none",this.hasProjected=!1);return}h.visibility="";const v=y.animationValues||y.latestValues;this.applyTransformsToTarget();let S=sI(this.projectionDeltaWithTransform,this.treeScale,v);m&&(S=m(v,S)),h.transform=S;const{x:C,y:_}=this.projectionDelta;h.transformOrigin=`${C.origin*100}% ${_.origin*100}% 0`,y.animationValues?h.opacity=y===this?(R=(z=v.opacity)!=null?z:this.latestValues.opacity)!=null?R:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=y===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const B in Gc){if(v[B]===void 0)continue;const{correct:T,applyTo:O,isCSSVariable:q}=Gc[B],j=S==="none"?v[B]:T(v[B],y);if(O){const ee=O.length;for(let V=0;V<ee;V++)h[O[V]]=j}else q?this.options.visualElement.renderState.vars[B]=j:h[B]=j}this.options.layoutId&&(h.pointerEvents=y===this?th(x==null?void 0:x.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var x;return(x=h.currentAnimation)==null?void 0:x.stop()}),this.root.nodes.forEach(n5),this.root.sharedNodes.clear()}}}function dI(t){t.updateLayout()}function uI(t){var a;const n=((a=t.resumeFrom)==null?void 0:a.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:d}=t.layout,{animationType:p}=t.options,h=n.source!==t.layout.source;p==="size"?Si(S=>{const C=h?n.measuredBox[S]:n.layoutBox[S],_=_n(C);C.min=l[S].min,C.max=C.min+_}):WC(p,n.layoutBox,l)&&Si(S=>{const C=h?n.measuredBox[S]:n.layoutBox[S],_=_n(l[S]);C.max=C.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[S].max=t.relativeTarget[S].min+_)});const x=rl();Oc(x,l,n.layoutBox);const m=rl();h?Oc(m,t.applyTransform(d,!0),n.measuredBox):Oc(m,l,n.layoutBox);const y=!TC(x);let v=!1;if(!t.resumeFrom){const S=t.getClosestProjectingParent();if(S&&!S.resumeFrom){const{snapshot:C,layout:_}=S;if(C&&_){const z=Dr();Bc(z,n.layoutBox,C.layoutBox);const R=Dr();Bc(R,l,_.layoutBox),MC(z,R)||(v=!0),S.options.layoutRoot&&(t.relativeTarget=R,t.relativeTargetOrigin=z,t.relativeParent=S)}}}t.notifyListeners("didUpdate",{layout:l,snapshot:n,delta:m,layoutDelta:x,hasLayoutChanged:y,hasRelativeLayoutChanged:v})}else if(t.isLead()){const{onExitComplete:l}=t.options;l&&l()}t.options.transition=void 0}function hI(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fI(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pI(t){t.clearSnapshot()}function n5(t){t.clearMeasurements()}function i5(t){t.isLayoutDirty=!1}function gI(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function a5(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function mI(t){t.resolveTargetDelta()}function xI(t){t.calcProjection()}function bI(t){t.resetSkewAndRotation()}function yI(t){t.removeLeadSnapshot()}function o5(t,n,a){t.translate=br(n.translate,0,a),t.scale=br(n.scale,1,a),t.origin=n.origin,t.originPoint=n.originPoint}function s5(t,n,a,l){t.min=br(n.min,a.min,l),t.max=br(n.max,a.max,l)}function vI(t,n,a,l){s5(t.x,n.x,a.x,l),s5(t.y,n.y,a.y,l)}function wI(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const SI={duration:.45,ease:[.4,0,.1,1]},l5=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),c5=l5("applewebkit/")&&!l5("chrome/")?Math.round:Ai;function d5(t){t.min=c5(t.min),t.max=c5(t.max)}function CI(t){d5(t.x),d5(t.y)}function WC(t,n,a){return t==="position"||t==="preserve-aspect"&&!zM(t5(n),t5(a),.2)}function kI(t){var n;return t!==t.root&&((n=t.scroll)==null?void 0:n.wasRoot)}const _I=DC({attachResizeListener:(t,n)=>Kc(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qg={current:void 0},$C=DC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!qg.current){const t=new _I({});t.mount(window),t.setOptions({layoutScroll:!0}),qg.current=t}return qg.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),AI={pan:{Feature:UM},drag:{Feature:HM,ProjectionNode:$C,MeasureLayout:zC}};function u5(t,n,a){const{props:l}=t;t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",a==="Start");const d="onHover"+a,p=l[d];p&&pr.postRender(()=>p(n,pd(n)))}class zI extends ho{mount(){const{current:n}=this.node;n&&(this.unmount=tT(n,(a,l)=>(u5(this.node,l,"Start"),d=>u5(this.node,d,"End"))))}unmount(){}}class EI extends ho{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch(a){n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ud(Kc(this.node.current,"focus",()=>this.onFocus()),Kc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function h5(t,n,a){const{props:l}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&l.whileTap&&t.animationState.setActive("whileTap",a==="Start");const d="onTap"+(a==="End"?"":a),p=l[d];p&&pr.postRender(()=>p(n,pd(n)))}class RI extends ho{mount(){const{current:n}=this.node;n&&(this.unmount=aT(n,(a,l)=>(h5(this.node,l,"Start"),(d,{success:p})=>h5(this.node,d,p?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const H0=new WeakMap,Yg=new WeakMap,TI=t=>{const n=H0.get(t.target);n&&n(t)},MI=t=>{t.forEach(TI)};function II(a){var l=a,{root:t}=l,n=Cn(l,["root"]);const d=t||document;Yg.has(d)||Yg.set(d,{});const p=Yg.get(d),h=JSON.stringify(n);return p[h]||(p[h]=new IntersectionObserver(MI,X({root:t},n))),p[h]}function DI(t,n,a){const l=II(n);return H0.set(t,a),l.observe(t),()=>{H0.delete(t),l.unobserve(t)}}const WI={some:0,all:1};class $I extends ho{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:a,margin:l,amount:d="some",once:p}=n,h={root:a?a.current:void 0,rootMargin:l,threshold:typeof d=="number"?d:WI[d]},x=m=>{const{isIntersecting:y}=m;if(this.isInView===y||(this.isInView=y,p&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:v,onViewportLeave:S}=this.node.getProps(),C=y?v:S;C&&C(m)};return DI(this.node.current,h,x)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:n,prevProps:a}=this.node;["amount","margin","root"].some(LI(n,a))&&this.startObserver()}unmount(){}}function LI({viewport:t={}},{viewport:n={}}={}){return a=>t[a]!==n[a]}const OI={inView:{Feature:$I},tap:{Feature:RI},focus:{Feature:EI},hover:{Feature:zI}},BI={layout:{ProjectionNode:$C,MeasureLayout:zC}},U0={current:null},LC={current:!1};function FI(){if(LC.current=!0,!!xm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>U0.current=t.matches;t.addEventListener("change",n),n()}else U0.current=!1}const PI=new WeakMap;function jI(t,n,a){for(const l in n){const d=n[l],p=a[l];if(mn(d))t.addValue(l,d);else if(mn(p))t.addValue(l,hl(d,{owner:t}));else if(p!==d)if(t.hasValue(l)){const h=t.getValue(l);h.liveStyle===!0?h.jump(d):h.hasAnimated||h.set(d)}else{const h=t.getStaticValue(l);t.addValue(l,hl(h!==void 0?h:d,{owner:t}))}}for(const l in a)n[l]===void 0&&t.removeValue(l);return n}const f5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class NI{scrapeMotionValuesFromProps(n,a,l){return{}}constructor({parent:n,props:a,presenceContext:l,reducedMotionConfig:d,blockInitialAnimation:p,visualState:h},x={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Wn.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,pr.render(this.render,!1,!0))};const{latestValues:m,renderState:y}=h;this.latestValues=m,this.baseTarget=X({},m),this.initialValues=a.initial?X({},m):{},this.renderState=y,this.parent=n,this.props=a,this.presenceContext=l,this.depth=n?n.depth+1:0,this.reducedMotionConfig=d,this.options=x,this.blockInitialAnimation=!!p,this.isControllingVariants=Fh(a),this.isVariantNode=nC(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const C=this.scrapeMotionValuesFromProps(a,{},this),{willChange:v}=C,S=Cn(C,["willChange"]);for(const _ in S){const z=S[_];m[_]!==void 0&&mn(z)&&z.set(m[_],!1)}}mount(n){this.current=n,PI.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,l)=>this.bindToMotionValue(l,a)),LC.current||FI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:U0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),oo(this.notifyUpdate),oo(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const a=this.features[n];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(n,a){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const l=ml.has(n);l&&this.onBindTransform&&this.onBindTransform();const d=a.on("change",x=>{this.latestValues[n]=x,this.props.onUpdate&&pr.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0)}),p=a.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,n,a)),this.valueSubscriptions.set(n,()=>{d(),p(),h&&h(),a.owner&&a.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in fl){const a=fl[n];if(!a)continue;const{isEnabled:l,Feature:d}=a;if(!this.features[n]&&d&&l(this.props)&&(this.features[n]=new d(this)),this.features[n]){const p=this.features[n];p.isMounted?p.update():(p.mount(),p.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dr()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,a){this.latestValues[n]=a}update(n,a){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let l=0;l<f5.length;l++){const d=f5[l];this.propEventSubscriptions[d]&&(this.propEventSubscriptions[d](),delete this.propEventSubscriptions[d]);const p="on"+d,h=n[p];h&&(this.propEventSubscriptions[d]=this.on(d,h))}this.prevMotionValues=jI(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(n),()=>a.variantChildren.delete(n)}addValue(n,a){const l=this.values.get(n);a!==l&&(l&&this.removeValue(n),this.bindToMotionValue(n,a),this.values.set(n,a),this.latestValues[n]=a.get())}removeValue(n){this.values.delete(n);const a=this.valueSubscriptions.get(n);a&&(a(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,a){if(this.props.values&&this.props.values[n])return this.props.values[n];let l=this.values.get(n);return l===void 0&&a!==void 0&&(l=hl(a===null?void 0:a,{owner:this}),this.addValue(n,l)),l}readValue(n,a){var d;let l=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:(d=this.getBaseTargetFromProps(this.props,n))!=null?d:this.readValueFromInstance(this.current,n,this.options);return l!=null&&(typeof l=="string"&&(uS(l)||fS(l))?l=parseFloat(l):!lT(l)&&so.test(a)&&(l=QS(n,a)),this.setBaseTarget(n,mn(l)?l.get():l)),mn(l)?l.get():l}setBaseTarget(n,a){this.baseTarget[n]=a}getBaseTarget(n){var p;const{initial:a}=this.props;let l;if(typeof a=="string"||typeof a=="object"){const h=Ym(this.props,a,(p=this.presenceContext)==null?void 0:p.custom);h&&(l=h[n])}if(a&&l!==void 0)return l;const d=this.getBaseTargetFromProps(this.props,n);return d!==void 0&&!mn(d)?d:this.initialValues[n]!==void 0&&l===void 0?void 0:this.baseTarget[n]}on(n,a){return this.events[n]||(this.events[n]=new Sm),this.events[n].add(a)}notify(n,...a){this.events[n]&&this.events[n].notify(...a)}}class OC extends NI{constructor(){super(...arguments),this.KeyframeResolver=XR}sortInstanceNodePosition(n,a){return n.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(n,a){return n.style?n.style[a]:void 0}removeValueFromRenderState(n,{vars:a,style:l}){delete a[n],delete l[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;mn(n)&&(this.childSubscription=n.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function BC(t,{style:n,vars:a},l,d){const p=t.style;let h;for(h in n)p[h]=n[h];d==null||d.applyProjectionStyles(p,l);for(h in a)p.setProperty(h,a[h])}function HI(t){return window.getComputedStyle(t)}class UI extends OC{constructor(){super(...arguments),this.type="html",this.renderInstance=BC}readValueFromInstance(n,a){var l;if(ml.has(a))return(l=this.projection)!=null&&l.isProjecting?M0(a):gR(n,a);{const d=HI(n),p=(_m(a)?d.getPropertyValue(a):d[a])||0;return typeof p=="string"?p.trim():p}}measureInstanceViewportBox(n,{transformPagePoint:a}){return CC(n,a)}build(n,a,l){Um(n,a,l.transformTemplate)}scrapeMotionValuesFromProps(n,a,l){return Qm(n,a,l)}}const FC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VI(t,n,a,l){BC(t,n,void 0,l);for(const d in n.attrs)t.setAttribute(FC.has(d)?d:Hm(d),n.attrs[d])}class qI extends OC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dr}getBaseTargetFromProps(n,a){return n[a]}readValueFromInstance(n,a){if(ml.has(a)){const l=YS(a);return l&&l.default||0}return a=FC.has(a)?a:Hm(a),n.getAttribute(a)}scrapeMotionValuesFromProps(n,a,l){return fC(n,a,l)}build(n,a,l){cC(n,a,this.isSVGTag,l.transformTemplate,l.style)}renderInstance(n,a,l,d){VI(n,a,l,d)}mount(n){this.isSVGTag=uC(n.tagName),super.mount(n)}}const YI=(t,n)=>qm(t)?new qI(n):new UI(n,{allowProjection:t!==w.Fragment}),QI=YT(X(X(X(X({},yM),OI),AI),BI),YI),It=bT(QI),GI={offscreen:{y:50,opacity:0},onscreen:{y:0,opacity:1,transition:{type:"spring",bounce:.4,duration:.8}}},XI=te(nt)(({theme:t})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:"16px",overflow:"hidden",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.12)",border:"none",background:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(10px)","&:hover":{transform:"translateY(-10px) scale(1.02)",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)","& .course-image":{transform:"scale(1.08)"},"& .cart-button":{transform:"scale(1.1) rotate(8deg)","&::after":{transform:"scale(1.2)",opacity:0}},"& .course-title":{color:t.palette.primary.main},"& .course-instructor":{transform:"translateX(5px)"}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #e94560, #533483)",opacity:.8,transition:"all 0.3s ease"}})),KI=te("div")(({theme:t})=>({position:"relative",paddingTop:"56.25%",overflow:"hidden",borderRadius:"12px 12px 0 0",margin:"4px","& .course-image":{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"},"& .course-badge":{position:"absolute",top:16,right:16,zIndex:1,borderRadius:"20px",fontWeight:600,padding:"6px 12px",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px",background:"rgba(255, 255, 255, 0.9)",color:t.palette.primary.main,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.15)"}},"&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"60%",background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%)",zIndex:1}})),ZI=te(xe)(({theme:t,added:n})=>({position:"absolute",top:"16px",right:"16px",zIndex:3,backgroundColor:n?t.palette.success.main:"rgba(255, 255, 255, 0.95)",color:n?"#fff":t.palette.primary.main,width:"44px",height:"44px",borderRadius:"50%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:n?t.palette.success.dark:t.palette.primary.main,color:"#fff",transform:"scale(1.1) rotate(8deg)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.2)"},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",border:`2px solid ${n?t.palette.success.main:t.palette.primary.main}`,animation:n?`${Jo} 1.5s infinite`:"none",opacity:.7},"& .cart-icon":{transition:"transform 0.3s ease"},"&:hover .cart-icon":{transform:"scale(1.2) rotate(-8deg)"}})),JI=te("span")(({theme:t})=>({position:"absolute",top:"-6px",right:"-6px",backgroundColor:t.palette.error.main,color:"#fff",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:"bold",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:`${Jo} 2s infinite`})),eD=yt`
  0% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(5deg); }
  100% { transform: translateY(0px) rotate(0deg); }
`,Jo=yt`
  0% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(1); opacity: 0.8; }
`,tD=yt`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,rD=te("div")(()=>({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1,overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",zIndex:1},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e94560' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`,opacity:.4,zIndex:2,animation:`${Jo} 15s ease-in-out infinite`}})),Ys=te("div")({position:"absolute",borderRadius:"50%",background:"linear-gradient(45deg, #0e5181, #1a5f8a)",filter:"blur(60px)",opacity:.15,zIndex:1,animation:`${eD} 15s ease-in-out infinite`,"&:nth-of-type(1)":{width:"300px",height:"300px",top:"10%",right:"10%",animationDelay:"0s"},"&:nth-of-type(2)":{width:"200px",height:"200px",bottom:"20%",right:"15%",animationDelay:"5s"},"&:nth-of-type(3)":{width:"250px",height:"250px",top:"30%",left:"15%",animationDelay:"7s",background:"linear-gradient(45deg, #0a3d62, #0e5181)"}}),nD=te("div")(({theme:t})=>({background:"linear-gradient(135deg, #0e5181 0%, #1a5f8a 50%, #0a3d62 100%)",color:"white",padding:"30px 0 25px",margin:"0 0 20px 0",position:"relative",overflow:"hidden",boxShadow:"0 15px 50px rgba(0, 0, 0, 0.3)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 20% 30%, rgba(14, 81, 129, 0.3) 0%, transparent 50%)",zIndex:1,animation:`${Jo} 15s ease-in-out infinite`},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e5978b' fill-opacity='0.08' fill-rule='evenodd'/%3E%3C/svg%3E")`,opacity:.6,zIndex:2,animation:`${tD} 120s linear infinite`}}));te("div")(({theme:t})=>({position:"relative",width:"100%",maxWidth:"800px",margin:"0 auto","& .search-input":{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"50px",padding:"12px 24px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)","& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-notchedOutline":{border:"none"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"none",boxShadow:"0 0 0 2px rgba(229, 151, 139, 0.5)"}},"& .search-button":{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",color:t.palette.primary.main}}));const p5=te(_e,{shouldForwardProp:t=>t!=="selected"})(({theme:t,selected:n})=>({margin:t.spacing(.5),padding:t.spacing(1,2),borderRadius:"20px",fontWeight:600,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"2px solid",borderColor:n?t.palette.primary.main:"transparent",backgroundColor:n?t.palette.primary.main:pe(t.palette.background.paper,.8),color:n?"#fff":t.palette.text.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.08)",cursor:"pointer","&:hover":{backgroundColor:n?t.palette.primary.dark:pe(t.palette.primary.main,.1),color:n?"#fff":t.palette.primary.main,borderColor:t.palette.primary.main,transform:"translateY(-2px)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.15)"},"& .MuiChip-label":{fontSize:"0.875rem",padding:"4px 8px"},"& .MuiChip-icon":{fontSize:"1rem"}})),iD=te(f)(({theme:t})=>({display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",minHeight:"1.6em",fontWeight:700,lineHeight:1.3,marginBottom:"8px",color:t.palette.text.primary,transition:"color 0.3s ease"})),aD=te(c)(({theme:t})=>({display:"flex",alignItems:"center",marginTop:"auto",paddingTop:"12px",borderTop:"1px solid rgba(0,0,0,0.05)"})),oD=te(c)(({theme:t})=>({display:"flex",alignItems:"center",color:t.palette.text.secondary,fontSize:"0.875rem","& > *":{display:"flex",alignItems:"center",marginLeft:t.spacing(1.5),"& svg":{fontSize:"1rem",marginLeft:t.spacing(.5)}}})),sD=()=>{var U;const t=jt(),[n,a]=w.useState([]),[l,d]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState(""),[S,C]=w.useState("all"),[_,z]=w.useState("all"),[R,B]=w.useState({}),[T,O]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{$(null,null,function*(){try{h(!0),m(null);const[N,Y]=yield Promise.all([gn.getCourses({status:"published"}),gn.getCategories()]),E=N.results||N,I=Y.results||Y;console.log("Courses data:",E),console.log("Categories data:",I),E.length>0&&console.log("Sample course category structure:",E[0].category),a(E),d(I);try{const A=yield No.getCart(),Q={};A.items&&A.items.forEach(J=>{Q[J.course.id]=!0}),B(Q)}catch(A){console.log("Cart not available:",A)}}catch(N){console.error("Error fetching data:",N),m("    .    .")}finally{h(!1)}})},[]);const q=n.filter(H=>{var Q;const N=y.toLowerCase(),Y=!y||((Q=H.title)==null?void 0:Q.toLowerCase().includes(N))||H.instructors&&H.instructors.some(J=>{var P;return(P=J.name)==null?void 0:P.toLowerCase().includes(N)});let E=_==="all";if(!E&&H.category){const J=typeof H.category=="object"?H.category.id:H.category;E=J==_,n.indexOf(H)<3&&console.log(`Course "${H.title}":`,{courseCategory:H.category,categoryId:J,activeCategory:_,matchesCategory:E})}const I=S==="all"||H.level===S,A=Y&&E&&I;return n.indexOf(H)<3&&console.log(`Course "${H.title}" filter result:`,{matchesSearch:Y,matchesCategory:E,matchesLevel:I,finalResult:A}),A}),j=(H,N)=>{C(N)},ee=H=>{console.log("Category changed to:",H),z(H)},V=(H,N)=>$(null,null,function*(){var Y;N.preventDefault(),N.stopPropagation();try{if(R[H]){const I=(Y=(yield No.getCart()).items)==null?void 0:Y.find(A=>A.course.id===H);I&&(yield No.removeFromCart(I.id)),B(A=>{const Q=X({},A);return delete Q[H],Q}),O({open:!0,message:"    ",severity:"info"})}else yield No.addToCart(H),B(E=>oe(X({},E),{[H]:!0})),O({open:!0,message:"    ",severity:"success"})}catch(E){console.error("Error toggling cart item:",E),O({open:!0,message:"    ",severity:"error"})}}),L=H=>{switch(H==null?void 0:H.toLowerCase()){case"beginner":return"";case"intermediate":return"";case"advanced":return"";default:return H||" "}},k=H=>!H||H.length===0?" ":H[0].name||" ",G=H=>!H||H.length===0?null:H[0].profile_pic,W=H=>{if(!H.category)return null;const N=typeof H.category=="object"?H.category.id:H.category,Y=l.find(E=>E.id===N);return Y?Y.name:null},M=H=>H.image?H.image.startsWith("http")?H.image:`${Zi.baseURL}${H.image}`:"https://source.unsplash.com/random/800x450?course,education";return p?o(c,{children:[e(On,{}),e(c,{sx:{py:8,px:{xs:2,md:4}},children:e(Xe,{maxWidth:"xl",children:e(le,{container:!0,spacing:4,children:[1,2,3,4].map(H=>e(le,{sx:{width:{xs:"100%",sm:"calc(50% - 32px)",md:"calc(33.333% - 32px)",lg:"calc(25% - 32px)"},flex:{xs:"0 0 100%",sm:"0 0 calc(50% - 32px)",md:"0 0 calc(33.333% - 32px)",lg:"0 0 calc(25% - 32px)"},px:2,mb:4},children:o(nt,{children:[e(gt,{variant:"rectangular",height:160,animation:"wave"}),o(pt,{children:[e(gt,{width:"80%",height:24,animation:"wave"}),e(gt,{width:"60%",height:20,animation:"wave",sx:{mt:1}}),o(c,{sx:{display:"flex",mt:2},children:[e(gt,{variant:"circular",width:24,height:24}),e(gt,{width:"40%",height:20,animation:"wave",sx:{mr:1}})]}),e(gt,{width:"100%",height:40,animation:"wave",sx:{mt:2}})]})]})},H))})})}),e(Bn,{})]}):x?o(c,{children:[e(On,{}),o(Xe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[e(d6,{sx:{fontSize:60,color:"error.main",mb:2}}),e(f,{variant:"h5",color:"error",gutterBottom:!0,children:" "}),e(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:x}),e(re,{variant:"contained",onClick:()=>window.location.reload(),sx:{mt:2},children:" "})]}),e(Bn,{})]}):o(c,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",position:"relative"},children:[o(rD,{children:[e(Ys,{}),e(Ys,{style:{width:"200px",height:"200px",bottom:"20%",right:"15%",animationDelay:"5s"}}),e(Ys,{style:{width:"250px",height:"250px",top:"30%",left:"15%",animationDelay:"7s"}})]}),e(On,{}),o(nD,{children:[e(Ys,{style:{width:"300px",height:"300px",top:"-100px",right:"-100px",animationDelay:"0s"}}),e(Ys,{style:{width:"200px",height:"200px",bottom:"-50px",right:"20%",animationDelay:"2s",animationDuration:"15s"}}),e(Ys,{style:{width:"400px",height:"400px",bottom:"-200px",left:"-150px",animationDelay:"4s",animationDuration:"20s"}}),e(Xe,{maxWidth:"lg",sx:{position:"relative",zIndex:3},children:e(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:o(c,{sx:{textAlign:"center",py:3,position:"relative","&::before, &::after":{content:'""',position:"absolute",width:"100px",height:"100px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",filter:"blur(40px)",zIndex:-1},"&::before":{top:"20%",left:"10%",animation:`${Jo} 8s ease-in-out infinite`},"&::after":{bottom:"10%",right:"15%",animation:`${Jo} 10s ease-in-out infinite reverse`}},children:[e(f,{variant:"h3",component:"h1",sx:{fontWeight:800,mb:2,color:"#ffffff",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.2rem"},lineHeight:1.2,textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:"  "}),e(It.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:e(f,{variant:"body1",sx:{maxWidth:"600px",mx:"auto",mb:2,color:"rgba(255,255,255,0.9)",fontSize:{xs:"0.9rem",sm:"1rem"},lineHeight:1.6,fontWeight:300,textShadow:"0 1px 3px rgba(0,0,0,0.2)"},children:"          "})}),e(It.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},style:{width:"100%",maxWidth:"700px",margin:"0 auto"},children:e(c,{sx:{position:"relative",maxWidth:"400px",mx:"auto","&::before":{content:'""',position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",background:"linear-gradient(45deg, #0e5181, #1a5f8a, #0a3d62)",borderRadius:"25px",zIndex:-1,opacity:.3,animation:`${Jo} 3s ease-in-out infinite`}},children:e(ze,{fullWidth:!0,variant:"outlined",placeholder:"  ...",value:y,onChange:H=>v(H.target.value),sx:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"25px",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)","& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none",boxShadow:"0 0 0 2px rgba(229, 151, 139, 0.5)"},paddingRight:"15px"},"& .MuiInputBase-input":{padding:"10px 15px",fontSize:"0.9rem","&::placeholder":{opacity:.7,color:t.palette.text.secondary}}},InputProps:{startAdornment:e(Vr,{position:"start",children:e(lo,{sx:{color:"#0e5181",ml:1,fontSize:"1.1rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})})}})})})]})})})]}),e(Xe,{maxWidth:"xl",sx:{flex:1,py:6,position:"relative",zIndex:1},children:o(c,{sx:{mb:6},children:[e(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:o(c,{sx:{mb:4},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[o(f,{variant:"h6",component:"h3",fontWeight:600,sx:{display:"flex",alignItems:"center",gap:1},children:[e(O1,{sx:{color:"primary.main"}}),""]}),(_!=="all"||y||S!=="all")&&e(re,{size:"small",variant:"outlined",color:"primary",onClick:()=>{v(""),z("all"),C("all")},startIcon:e(B1,{}),sx:{borderRadius:"20px",textTransform:"none",fontSize:"0.8rem"},children:" "})]}),o(c,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,maxHeight:{xs:"140px",sm:"auto"},overflowY:{xs:"auto",sm:"visible"},pb:{xs:1,sm:0},"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{background:"rgba(0,0,0,0.3)",borderRadius:"3px","&:hover":{background:"rgba(0,0,0,0.5)"}}},children:[e(p5,{label:" ",selected:_==="all",onClick:()=>ee("all"),icon:e(O1,{fontSize:"small"}),sx:{backgroundColor:_==="all"?"primary.main":"background.paper",color:_==="all"?"white":"text.primary","&:hover":{backgroundColor:_==="all"?"primary.dark":"primary.light",color:"white"}}}),l.map(H=>(console.log("Rendering category:",H),e(p5,{label:H.name,selected:_===H.id.toString(),onClick:()=>ee(H.id.toString()),sx:{backgroundColor:_===H.id.toString()?"primary.main":"background.paper",color:_===H.id.toString()?"white":"text.primary","&:hover":{backgroundColor:_===H.id.toString()?"primary.dark":"primary.light",color:"white"}}},H.id)))]})]})}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,flexWrap:"wrap",gap:2},children:[o(c,{children:[o(f,{variant:"h4",component:"h2",fontWeight:700,children:[_==="all"?" ":` ${((U=l.find(H=>H.id===parseInt(_)))==null?void 0:U.name)||""}`,y&&`:    "${y}"`]}),o(f,{variant:"body2",color:"text.secondary",sx:{mt:.5,display:"flex",alignItems:"center",gap:.5},children:[e("span",{style:{fontWeight:600,color:"primary.main"},children:q.length}),"    ",n.length," ",(_!=="all"||y||S!=="all")&&e(_e,{label:"",size:"small",color:"primary",variant:"outlined",sx:{height:"20px",fontSize:"0.7rem",ml:1}})]})]}),o(zn,{value:S,onChange:j,textColor:"primary",indicatorColor:"primary",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTabs-flexContainer":{gap:1},"& .MuiTab-root":{minHeight:36,padding:"6px 16px",borderRadius:"20px",fontWeight:500,minWidth:"auto","&.Mui-selected":{color:"white",backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}}}},children:[e(mt,{value:"all",label:""}),e(mt,{value:"beginner",label:"",icon:e(zt,{fontSize:"small"}),iconPosition:"start"}),e(mt,{value:"intermediate",label:"",icon:e(co,{fontSize:"small"}),iconPosition:"start"}),e(mt,{value:"advanced",label:"",icon:e(u6,{fontSize:"small"}),iconPosition:"start"})]})]}),q.length>0?e(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:3,width:"100%"},children:q.map((H,N)=>{var Y,E;return e(c,{sx:{width:"100%"},children:e(It.div,{initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,margin:"-100px"},variants:GI,style:{height:"100%"},children:o(XI,{elevation:0,component:hr,to:`/courses/${H.id}`,style:{textDecoration:"none",color:"inherit"},children:[o(KI,{children:[e("img",{src:M(H),alt:H.title,className:"course-image"}),H.is_featured&&e(_e,{label:"",color:"primary",size:"small",className:"course-badge",sx:{bgcolor:"primary.main",color:"white",fontWeight:600}}),H.is_certified&&e(_e,{label:"",color:"secondary",size:"small",className:"course-badge",sx:{bgcolor:"secondary.main",color:"white",fontWeight:600,top:H.is_featured?50:16}}),o(ZI,{className:"cart-button",onClick:I=>V(H.id,I),added:R[H.id],children:[R[H.id]?e(Yo,{className:"cart-icon"}):e(h6,{className:"cart-icon"}),!R[H.id]&&e(JI,{children:"+"})]})]}),o(pt,{sx:{display:"flex",flexDirection:"column",flexGrow:1,p:3},children:[o(c,{sx:{mb:1.5},children:[W(H)&&e(_e,{label:W(H),size:"small",sx:{backgroundColor:"rgba(229, 151, 139, 0.1)",color:"primary.main",border:"1px solid rgba(229, 151, 139, 0.3)",fontWeight:500,fontSize:"0.7rem",height:"24px",mb:1,"& .MuiChip-label":{px:1.5},"&:hover":{backgroundColor:"rgba(229, 151, 139, 0.2)",borderColor:"primary.main"}}}),e(_e,{label:L(H.level),size:"small",color:H.level==="beginner"?"success":H.level==="intermediate"?"warning":"error",sx:{mb:1.5,fontWeight:600,fontSize:"0.7rem"}}),e(iD,{variant:"h6",component:"h3",gutterBottom:!0,children:H.title})]}),o(aD,{children:[e(Tt,{src:G(H.instructors),alt:k(H.instructors),sx:{width:32,height:32,ml:1.5}}),o(c,{sx:{flexGrow:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:""}),e(f,{variant:"subtitle2",fontWeight:500,children:k(H.instructors)})]}),e(c,{sx:{textAlign:"left"},children:o(c,{sx:{display:"flex",alignItems:"center",mb:.5},children:[e(Pi,{color:"warning",fontSize:"small",sx:{ml:.5}}),e(f,{variant:"body2",fontWeight:600,children:((Y=H.average_rating)==null?void 0:Y.toFixed(1))||"0.0"})]})})]}),e(Vt,{sx:{my:2}}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(oD,{children:[o(c,{children:[e(dn,{fontSize:"small"}),e(f,{variant:"caption",sx:{mr:.5},children:H.duration||" "})]}),o(c,{children:[e(Ca,{fontSize:"small"}),e(f,{variant:"caption",sx:{mr:.5},children:((E=H.total_enrollments)==null?void 0:E.toLocaleString())||0})]})]}),e(c,{sx:{textAlign:"left"},children:H.discount_price?o(Rt,{children:[o(f,{variant:"body2",color:"error",sx:{textDecoration:"line-through",opacity:.7,fontSize:"0.8rem"},children:[H.price," ."]}),o(f,{variant:"h6",color:"primary",sx:{lineHeight:1,mt:-.5},children:[H.discount_price," ."]})]}):e(f,{variant:"h6",color:"primary",children:H.is_free?"":`${H.price} .`})})]})]})]})})},H.id)})}):e(c,{textAlign:"center",py:8,sx:{bgcolor:"background.paper",borderRadius:2,border:"1px dashed",borderColor:"divider"},children:o(c,{sx:{maxWidth:400,margin:"0 auto"},children:[e(zt,{sx:{fontSize:60,color:"text.secondary",opacity:.5,mb:2}}),e(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"     "}),e(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"          .            ."}),e(re,{variant:"outlined",color:"primary",onClick:()=>{v(""),z("all"),C("all")},startIcon:e(B1,{}),sx:{mt:2},children:"  "})]})})]})}),e(Bn,{}),e(un,{open:T.open,autoHideDuration:3e3,onClose:()=>O(oe(X({},T),{open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e(Be,{onClose:()=>O(oe(X({},T),{open:!1})),severity:T.severity,sx:{width:"100%"},children:T.message})})]})},mr={getModules:t=>$(null,null,function*(){return(yield ne.get("/api/content/modules/",{params:{course_id:t,course:t}})).data}),getLessons:(...a)=>$(null,[...a],function*({moduleId:t,courseId:n}={}){return(yield ne.get("/api/content/lessons/",{params:{module:t,course:n}})).data}),getLessonById:t=>$(null,null,function*(){return(yield ne.get(`/api/content/lessons/${t}/`)).data}),createLesson:t=>$(null,null,function*(){var n,a;try{console.log("Creating lesson with payload:",t);const l=yield ne.post("/api/content/lessons/",t);return console.log("Lesson created successfully:",l.data),l.data}catch(l){if(console.error("Error creating lesson:",l),console.error("Error response:",(n=l.response)==null?void 0:n.data),(a=l.response)!=null&&a.data){const d=l.response.data.error||l.response.data.details||l.response.data.message||"    ";throw new Error(d)}throw new Error("    ")}}),updateLesson:(t,n)=>$(null,null,function*(){return(yield ne.patch(`/api/content/lessons/${t}/`,n)).data}),deleteLesson:t=>$(null,null,function*(){return(yield ne.delete(`/api/content/lessons/${t}/`)).data}),getModuleById:t=>$(null,null,function*(){return(yield ne.get(`/api/content/modules/${t}/`)).data}),createModule:C=>$(null,[C],function*({courseId:t,name:n,title:a,description:l,order:d,isActive:p,status:h,durationMinutes:x,videoDurationSeconds:m,pdfFile:y,videoFile:v,note:S}){const _=new FormData;_.append("course",t),(n||a)&&_.append("name",n||a),l!=null&&_.append("description",l),typeof d!="undefined"&&_.append("order",String(d)),typeof p!="undefined"&&_.append("is_active",p?"true":"false"),h&&_.append("status",h);const z=typeof m=="number"?m:typeof x=="number"?Math.round(x*60):0;return z&&_.append("video_duration",String(z)),S&&_.append("note",S),v&&v instanceof File&&_.append("video",v),y&&y instanceof File&&_.append("pdf",y),(yield ne.post("/api/content/modules/",_,{headers:{"Content-Type":"multipart/form-data"}})).data}),updateModule:(C,_)=>$(null,[C,_],function*(t,{name:n,title:a,description:l,order:d,isActive:p,status:h,durationMinutes:x,videoDurationSeconds:m,pdfFile:y,videoFile:v,note:S}){const z=new FormData;(n||a)&&z.append("name",n||a),l!=null&&z.append("description",l),typeof d!="undefined"&&z.append("order",String(d)),typeof p!="undefined"&&z.append("is_active",p?"true":"false"),h&&z.append("status",h);const R=typeof m=="number"?m:typeof x=="number"?Math.round(x*60):void 0;return typeof R!="undefined"&&z.append("video_duration",String(R)),S&&z.append("note",S),v&&v instanceof File&&z.append("video",v),y&&y instanceof File&&z.append("pdf",y),(yield ne.patch(`/api/content/modules/${t}/`,z,{headers:{"Content-Type":"multipart/form-data"}})).data}),getLessonResources:(...a)=>$(null,[...a],function*({lessonId:t,moduleId:n}={}){return(yield ne.get("/api/content/resources/",{params:{lesson:t,module:n}})).data}),createLessonResource:t=>$(null,null,function*(){var n,a;try{console.log("Creating lesson resource with payload:",t);const l=new FormData;Object.entries(t||{}).forEach(([p,h])=>{h!=null&&(console.log(`Adding to FormData: ${p} = ${h}`),l.append(p,h))}),console.log("FormData entries:");for(let[p,h]of l.entries())console.log(`${p}: ${h}`);return(yield ne.post("/api/content/resources/",l,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){if(console.error("Error creating lesson resource:",l),console.error("Error response:",(n=l.response)==null?void 0:n.data),(a=l.response)!=null&&a.data){const d=l.response.data.error||l.response.data.details||l.response.data.message||"    ";throw new Error(d)}throw new Error("    ")}}),updateLessonResource:(t,n)=>$(null,null,function*(){var a;try{const l=new FormData;return Object.entries(n||{}).forEach(([p,h])=>{h!=null&&l.append(p,h)}),(yield ne.patch(`/api/content/resources/${t}/`,l,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw console.error("Error updating lesson resource:",l),(a=l.response)!=null&&a.data?new Error(l.response.data.error||l.response.data.details||"    "):new Error("    ")}}),deleteLessonResource:t=>$(null,null,function*(){var n;try{return(yield ne.delete(`/api/content/resources/${t}/`)).data}catch(a){throw console.error("Error deleting lesson resource:",a),(n=a.response)!=null&&n.data?new Error(a.response.data.error||a.response.data.details||"    "):new Error("    ")}})},Ht="/api/assignments",lr={getAssignments:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get(`${Ht}/assignments/`,{params:t})).data}),getAssignmentById:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/assignments/${t}/`)).data}),getAssignmentWithQuestions:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/assignments/${t}/questions_with_answers/`)).data}),getAssignmentSubmissions:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/assignments/${t}/submissions/`)).data}),createAssignment:t=>$(null,null,function*(){console.log("createAssignment called with data:",t);const n=new FormData,a=(d,p)=>{p!=null&&p!==""&&n.append(d,p)};a("title",t.title),a("description",t.description),a("course",t.course),a("module",t.module),a("due_date",t.due_date),typeof t.duration!="undefined"&&n.append("duration",String(t.duration)),a("points",t.points),typeof t.max_attempts!="undefined"&&n.append("max_attempts",String(t.max_attempts)),typeof t.allow_late_submissions!="undefined"&&n.append("allow_late_submissions",t.allow_late_submissions?"true":"false"),typeof t.late_submission_penalty!="undefined"&&n.append("late_submission_penalty",String(t.late_submission_penalty)),typeof t.has_questions!="undefined"&&n.append("has_questions",t.has_questions?"true":"false"),typeof t.has_file_upload!="undefined"&&n.append("has_file_upload",t.has_file_upload?"true":"false"),t.assignment_file instanceof File&&n.append("assignment_file",t.assignment_file),typeof t.is_active!="undefined"&&n.append("is_active",t.is_active?"true":"false"),console.log("FormData entries:");for(let[d,p]of n.entries())console.log(`${d}: ${p}`);console.log("Making POST request to:",`${Ht}/assignments/`);const l=yield ne.post(`${Ht}/assignments/`,n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Response received:",l.data),console.log("Response structure:",{hasId:"id"in l.data,idValue:l.data.id,keys:Object.keys(l.data),type:typeof l.data.id}),l.data}),updateAssignment:(t,n)=>$(null,null,function*(){const a=new FormData,l=(p,h)=>{h!=null&&h!==""&&a.append(p,h)};return l("title",n.title),l("description",n.description),l("course",n.course),l("module",n.module),l("due_date",n.due_date),typeof n.duration!="undefined"&&a.append("duration",String(n.duration)),l("points",n.points),typeof n.max_attempts!="undefined"&&a.append("max_attempts",String(n.max_attempts)),typeof n.allow_late_submissions!="undefined"&&a.append("allow_late_submissions",n.allow_late_submissions?"true":"false"),typeof n.late_submission_penalty!="undefined"&&a.append("late_submission_penalty",String(n.late_submission_penalty)),typeof n.has_questions!="undefined"&&a.append("has_questions",n.has_questions?"true":"false"),typeof n.has_file_upload!="undefined"&&a.append("has_file_upload",n.has_file_upload?"true":"false"),n.assignment_file instanceof File&&a.append("assignment_file",n.assignment_file),typeof n.is_active!="undefined"&&a.append("is_active",n.is_active?"true":"false"),(yield ne.patch(`${Ht}/assignments/${t}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}),deleteAssignment:t=>$(null,null,function*(){return(yield ne.delete(`${Ht}/assignments/${t}/`)).data}),getAssignmentQuestions:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/questions/`,{params:{assignment:t}})).data}),getAssignmentQuestionsWithAnswers:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/questions/`,{params:{assignment:t}})).data}),createQuestion:t=>$(null,null,function*(){console.log("createQuestion called with payload:",t);const n=new FormData;t.assignment&&n.append("assignment",t.assignment),t.text&&n.append("text",t.text),t.question_type&&n.append("question_type",t.question_type),t.points&&n.append("points",t.points),t.explanation&&n.append("explanation",t.explanation),t.order&&n.append("order",t.order),t.is_required!==void 0&&n.append("is_required",t.is_required),t.file instanceof File&&n.append("image",t.file),console.log("Question FormData entries:");for(let[l,d]of n.entries())console.log(`${l}: ${d}`);console.log("Making POST request to:",`${Ht}/questions/`);const a=yield ne.post(`${Ht}/questions/`,n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Question creation response:",a.data),a.data}),updateQuestion:(t,n)=>$(null,null,function*(){return(yield ne.patch(`${Ht}/questions/${t}/`,n)).data}),deleteQuestion:t=>$(null,null,function*(){return(yield ne.delete(`${Ht}/questions/${t}/`)).data}),getQuestionAnswers:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/answers/`,{params:{question:t}})).data}),createAnswer:t=>$(null,null,function*(){console.log("createAnswer called with payload:",t);const n=new FormData;t.question&&n.append("question",t.question),t.text&&n.append("text",t.text),t.is_correct!==void 0&&n.append("is_correct",t.is_correct),t.explanation&&n.append("explanation",t.explanation),t.order&&n.append("order",t.order),console.log("Answer FormData entries:");for(let[l,d]of n.entries())console.log(`${l}: ${d}`);const a=yield ne.post(`${Ht}/answers/`,n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Answer creation response:",a.data),a.data}),updateAnswer:(t,n)=>$(null,null,function*(){return(yield ne.patch(`${Ht}/answers/${t}/`,n)).data}),deleteAnswer:t=>$(null,null,function*(){return(yield ne.delete(`${Ht}/answers/${t}/`)).data}),getSubmissions:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get(`${Ht}/submissions/`,{params:t})).data}),getSubmissionById:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/submissions/${t}/`)).data}),createSubmission:t=>$(null,null,function*(){const n=new FormData;t.assignment&&n.append("assignment",t.assignment),t.submission_text&&n.append("submission_text",t.submission_text),t.submitted_file&&n.append("submitted_file",t.submitted_file),t.question_responses&&Array.isArray(t.question_responses)&&(console.log("Question responses before JSON.stringify:",t.question_responses),n.append("question_responses",JSON.stringify(t.question_responses)),t.question_responses.forEach((l,d)=>{l.file_answer&&n.append(`question_responses[${d}][file_answer]`,l.file_answer)})),console.log("FormData contents:");for(let[l,d]of n.entries())console.log(`${l}: ${d}`);return(yield ne.post(`${Ht}/submissions/`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}),gradeSubmission:(t,n)=>$(null,null,function*(){return(yield ne.patch(`${Ht}/submissions/${t}/grade/`,n)).data}),updateSubmission:(t,n)=>$(null,null,function*(){return(yield ne.patch(`${Ht}/submissions/${t}/`,n)).data}),deleteSubmission:t=>$(null,null,function*(){return(yield ne.delete(`${Ht}/submissions/${t}/`)).data}),downloadAssignmentFile:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/assignments/${t}/download/`,{responseType:"blob"})).data}),downloadSubmissionFile:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/submissions/${t}/download/`,{responseType:"blob"})).data}),getAssignmentStats:t=>$(null,null,function*(){return(yield ne.get(`${Ht}/assignments/${t}/statistics/`)).data}),getMySubmissions:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get(`${Ht}/submissions/my/`,{params:t})).data}),getTeacherAssignments:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get(`${Ht}/assignments/teacher/`,{params:t})).data}),getStudentAssignments:(...n)=>$(null,[...n],function*(t={}){return(yield ne.get(`${Ht}/assignments/student/`,{params:t})).data})},nr={getExams:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/assignments/exams/",{params:t})).data}catch(a){throw console.error("Error fetching exams:",a),a}}),getExam:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exams/${t}/`)).data}catch(n){throw console.error("Error fetching exam:",n),n}}),createExam:t=>$(null,null,function*(){try{return(yield ne.post("/api/assignments/exams/",t)).data}catch(n){throw console.error("Error creating exam:",n),n}}),updateExam:(t,n)=>$(null,null,function*(){try{return(yield ne.patch(`/api/assignments/exams/${t}/`,n)).data}catch(a){throw console.error("Error updating exam:",a),a}}),deleteExam:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/assignments/exams/${t}/`)).data}catch(n){throw console.error("Error deleting exam:",n),n}}),getExamQuestions:t=>$(null,null,function*(){try{return(yield ne.get("/api/assignments/exam-questions/",{params:{exam:t}})).data}catch(n){throw console.error("Error fetching exam questions:",n),n}}),getExamQuestionAnswers:t=>$(null,null,function*(){try{return(yield ne.get("/api/assignments/exam-answers/",{params:{question:t}})).data}catch(n){throw console.error("Error fetching exam question answers:",n),n}}),createExamAnswer:t=>$(null,null,function*(){try{const n=new FormData;return n.append("question",t.question),n.append("text",t.text||""),n.append("is_correct",t.is_correct||!1),n.append("explanation",t.explanation||""),n.append("order",t.order||0),(yield ne.post("/api/assignments/exam-answers/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error creating exam answer:",n),n}}),updateExamAnswer:(t,n)=>$(null,null,function*(){try{const a=new FormData;return a.append("text",n.text||""),a.append("is_correct",n.is_correct||!1),a.append("explanation",n.explanation||""),a.append("order",n.order||0),(yield ne.put(`/api/assignments/exam-answers/${t}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error updating exam answer:",a),a}}),deleteExamAnswer:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/assignments/exam-answers/${t}/`)).data}catch(n){throw console.error("Error deleting exam answer:",n),n}}),addQuestion:(t,n)=>$(null,null,function*(){try{const a=new FormData;return a.append("exam",t),a.append("text",n.text||""),a.append("question_type",n.question_type||"essay"),a.append("points",n.points||10),a.append("explanation",n.explanation||""),a.append("order",n.order||1),n.image&&a.append("image",n.image),(yield ne.post("/api/assignments/exam-questions/",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error adding question:",a),a}}),updateQuestion:(t,n)=>$(null,null,function*(){try{const a=new FormData;return a.append("text",n.text||""),a.append("question_type",n.question_type||"essay"),a.append("points",n.points||10),a.append("explanation",n.explanation||""),a.append("order",n.order||1),n.image&&a.append("image",n.image),(yield ne.put(`/api/assignments/exam-questions/${t}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error updating question:",a),a}}),deleteQuestion:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/assignments/exam-questions/${t}/`)).data}catch(n){throw console.error("Error deleting question:",n),n}}),getExamAttempts:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exams/${t}/attempts/`)).data}catch(n){throw console.error("Error fetching exam attempts:",n),n}}),getExamStatistics:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exams/${t}/statistics/`)).data}catch(n){throw console.error("Error fetching exam statistics:",n),n}}),startExamAttempt:t=>$(null,null,function*(){var n;try{console.log("examAPI.startExamAttempt called with examId:",t);const a=yield ne.post("/api/assignments/exam-attempts/",{exam:t});return console.log("examAPI.startExamAttempt response:",a.data),a.data}catch(a){throw console.error("Error starting exam attempt:",a),console.error("Error response:",(n=a.response)==null?void 0:n.data),a}}),submitExamAnswers:(t,n)=>$(null,null,function*(){var a;try{console.log("examAPI.submitExamAnswers called with:",{attemptId:t,answers:n});const l=yield ne.post("/api/assignments/exam-user-answers/submit_answers/",{attempt:t,answers:n});return console.log("examAPI.submitExamAnswers response:",l.data),l.data}catch(l){throw console.error("Error submitting exam answers:",l),console.error("Error response:",(a=l.response)==null?void 0:a.data),l}}),finishExamAttempt:t=>$(null,null,function*(){var n;try{console.log("examAPI.finishExamAttempt called with:",{attemptId:t});const a=yield ne.patch(`/api/assignments/exam-attempts/${t}/finish/`);return console.log("examAPI.finishExamAttempt response:",a.data),a.data}catch(a){throw console.error("Error finishing exam attempt:",a),console.error("Error response:",(n=a.response)==null?void 0:n.data),a}}),getExamAttemptResult:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exam-attempts/${t}/`)).data}catch(n){throw console.error("Error fetching exam attempt result:",n),n}}),getExamAttemptAnswers:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exam-user-answers/?attempt=${t}`)).data}catch(n){throw console.error("Error fetching exam attempt answers:",n),n}}),getExamAttemptResultAnswers:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exam-user-answers/result_answers/?attempt=${t}`)).data}catch(n){throw console.error("Error fetching exam attempt result answers:",n),n}}),getExamAttemptAnswers:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/exam-user-answers/?attempt=${t}`)).data}catch(n){throw console.error("Error fetching exam attempt answers:",n),n}})},Uu={getCourseReviews:(a,...l)=>$(null,[a,...l],function*(t,n={}){try{return(yield ne.get(`/api/reviews/courses/${t}/reviews/`,{params:n})).data}catch(d){throw console.error("Error fetching course reviews:",d),d}}),createReview:(t,n)=>$(null,null,function*(){var a;try{console.log("=== REVIEW SERVICE DEBUG ==="),console.log("Course ID:",t),console.log("Review Data:",n),console.log("API URL:",`/api/reviews/reviews/create/${t}/`),console.log("============================");const l=yield ne.post(`/api/reviews/reviews/create/${t}/`,n,{headers:{"Content-Type":"application/json"}});return console.log("API Response:",l.data),l.data}catch(l){throw console.error("Error creating review:",l),console.error("Error response:",(a=l.response)==null?void 0:a.data),l}}),updateReview:(t,n)=>$(null,null,function*(){try{return(yield ne.put(`/api/reviews/reviews/${t}/`,n)).data}catch(a){throw console.error("Error updating review:",a),a}}),deleteReview:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/reviews/reviews/${t}/`)).data}catch(n){throw console.error("Error deleting review:",n),n}}),getReview:t=>$(null,null,function*(){try{return(yield ne.get(`/api/reviews/reviews/${t}/`)).data}catch(n){throw console.error("Error fetching review:",n),n}}),getCourseRating:t=>$(null,null,function*(){try{return(yield ne.get(`/api/reviews/courses/${t}/rating/`)).data}catch(n){throw console.error("Error fetching course rating:",n),n}}),likeReview:t=>$(null,null,function*(){try{return(yield ne.post(`/api/reviews/reviews/${t}/like/`)).data}catch(n){throw console.error("Error liking review:",n),n}}),reportReview:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/reviews/reviews/${t}/report/`,n)).data}catch(a){throw console.error("Error reporting review:",a),a}}),getUserReviews:t=>$(null,null,function*(){try{return(yield ne.get(`/api/reviews/users/${t}/reviews/`)).data}catch(n){throw console.error("Error fetching user reviews:",n),n}}),getMyReviews:()=>$(null,null,function*(){try{return(yield ne.get("/api/reviews/my-reviews/")).data}catch(t){throw console.error("Error fetching my reviews:",t),t}})};yt`
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
`;yt`
  0% { 
    opacity: 0; 
    transform: translateY(40px) scale(0.98); 
    filter: blur(8px);
  }
  50% {
    filter: blur(4px);
  }
  100% { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
    filter: blur(0);
  }
`;yt`
  0% { 
    transform: scale(1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  50% { 
    transform: scale(1.03);
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  }
  100% { 
    transform: scale(1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
`;yt`
  0% {
    background-position: -300px 0;
    opacity: 0.5;
  }
  50% {
    opacity: 0.8;
  }
  100% {
    background-position: calc(300px + 100%) 0;
    opacity: 0.5;
  }
`;yt`
  0% { 
    transform: translateY(0px) rotate(0deg);
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
  }
  25% {
    transform: translateY(-8px) rotate(0.5deg);
    filter: drop-shadow(0 8px 20px rgba(0,0,0,0.15));
  }
  50% {
    transform: translateY(-12px) rotate(-0.5deg);
    filter: drop-shadow(0 12px 25px rgba(0,0,0,0.2));
  }
  75% {
    transform: translateY(-8px) rotate(0.5deg);
    filter: drop-shadow(0 8px 20px rgba(0,0,0,0.15));
  }
  100% { 
    transform: translateY(0px) rotate(0deg);
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
  }
`;yt`
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 80% 20%;
  }
  100% {
    background-position: 0% 0%;
  }
`;yt`
  0% { background-position: 0 100%; }
  100% { background-position: 2000px 100%; }
`;const lD=yt`
  0% { opacity: 0.15; }
  50% { opacity: 0.3; }
  100% { opacity: 0.15; }
`,jo={sectionY:5,sectionYMobile:3,gridSpacing:3},Qs=te(c)(({theme:t})=>({display:"inline-flex",alignItems:"center",padding:t.spacing(1,2.25),background:`linear-gradient(145deg, ${pe(t.palette.background.paper,.15)}, ${pe(t.palette.background.paper,.05)})`,border:`1px solid ${pe(t.palette.common.white,.15)}`,borderRadius:999,color:t.palette.primary.contrastText,fontWeight:600,fontSize:"0.95rem",minHeight:40,gap:t.spacing(1.25),boxShadow:`0 6px 16px ${pe(t.palette.common.black,.25)}`}));te(c)(({theme:t})=>({background:`linear-gradient(180deg, ${pe(t.palette.background.paper,.15)} 0%, ${pe(t.palette.background.paper,.08)} 100%)`,border:`1px solid ${pe(t.palette.common.white,.08)}`,borderRadius:t.shape.borderRadius*4,padding:t.spacing(4),boxShadow:`0 20px 50px ${pe(t.palette.common.black,.25)}`}));const Qg=te(c)(({theme:t})=>({background:`linear-gradient(145deg, ${pe(t.palette.background.paper,.9)} 0%, ${pe(t.palette.background.default,.85)} 100%)`,border:`1px solid ${pe(t.palette.divider,.8)}`,borderRadius:t.shape.borderRadius*3,padding:t.spacing(3),marginBottom:t.spacing(4),boxShadow:`0 10px 24px ${pe(t.palette.common.black,.15)}`})),cD=te(Vt)(({theme:t})=>({borderColor:pe(t.palette.primary.main,.15)})),dD=te(c)(({theme:t})=>({padding:t.spacing(2,0),backgroundColor:"transparent","& a":{textDecoration:"none",color:t.palette.common.white,display:"flex",alignItems:"center",transition:"all 0.3s ease","& svg":{marginLeft:t.spacing(.75)},"&:hover":{color:t.palette.common.white,textDecoration:"underline",transform:"translateX(-2px)"}},"& .MuiBreadcrumbs-separator":{margin:t.spacing(0,.5),color:t.palette.text.secondary}}));te("div")(({theme:t})=>({padding:t.spacing(3,0),[t.breakpoints.down("sm")]:{padding:t.spacing(2,0)}}));te(zn)(({theme:t})=>({backgroundColor:t.palette.background.paper,borderBottom:`1px solid ${t.palette.divider}`,"& .MuiTabs-scroller":{overflow:"auto !important","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},"& .MuiTabs-indicator":{height:4},[t.breakpoints.down("sm")]:{"& .MuiTab-root":{minWidth:"auto",padding:t.spacing(1,2),fontSize:"0.8rem"}}}));const uD=te("div")(({theme:t})=>({padding:t.spacing(jo.sectionY,0,jo.sectionY+2,0),position:"relative",overflow:"hidden",color:t.palette.primary.contrastText,background:"#0e5181","&::before":{display:"none"},"&::after":{content:'""',position:"absolute",inset:0,background:`radial-gradient( circle at 20% 80%, ${pe("#e5978b",.15)} 0%, transparent 55%),
                 radial-gradient( circle at 85% 20%, ${pe("#ffffff",.1)} 0%, transparent 50%)`,animation:`${lD} 8s ease-in-out infinite`,pointerEvents:"none"}}));te(Xe)(({theme:t})=>({position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",minHeight:400,[t.breakpoints.down("md")]:{minHeight:300,textAlign:"center",alignItems:"center"}}));const hD=te(c)(({theme:t})=>({position:"relative",zIndex:1,maxWidth:"1200px",margin:"0 auto",transition:"all 0.3s ease-in-out",padding:t.spacing(0,2),[t.breakpoints.down("sm")]:{padding:t.spacing(0,1.5),textAlign:"center","& .MuiBreadcrumbs-root":{justifyContent:"center","& .MuiBreadcrumbs-separator":{margin:t.spacing(0,1)}}}})),fD=te(f)(({theme:t})=>({fontWeight:800,lineHeight:1.1,marginBottom:t.spacing(3),color:t.palette.common.white,textShadow:"0 2px 6px rgba(0,0,0,0.2)",[t.breakpoints.down("md")]:{fontSize:"2.5rem"},[t.breakpoints.down("sm")]:{fontSize:"2rem"}})),pD=te(f)(({theme:t})=>({fontSize:"1.25rem",fontWeight:400,marginBottom:t.spacing(3),opacity:.9,maxWidth:"800px"}));te(c)(({theme:t})=>({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",gap:t.spacing(2),marginBottom:t.spacing(4),"& > *":{display:"flex",alignItems:"center",padding:t.spacing(.75,1.5),background:`linear-gradient(135deg, ${pe(t.palette.common.white,.15)} 0%, ${pe(t.palette.common.white,.1)} 100%)`,borderRadius:t.shape.borderRadius*3,backdropFilter:"blur(10px)",border:`1px solid ${pe(t.palette.common.white,.2)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","& svg":{marginRight:t.spacing(.75),fontSize:"1.2rem",color:"rgba(255, 255, 255, 0.95)"},"&:hover":{background:`linear-gradient(135deg, ${pe(t.palette.common.white,.2)} 0%, ${pe(t.palette.common.white,.15)} 100%)`,transform:"translateY(-2px)",boxShadow:`0 8px 20px ${pe(t.palette.common.black,.2)}`}},[t.breakpoints.down("sm")]:{gap:t.spacing(1.5),flexDirection:"row",justifyContent:"center","& > *":{flex:"0 0 calc(50% - ${theme.spacing(1.5)})",padding:t.spacing(.75,1),fontSize:"0.875rem",justifyContent:"center","& svg":{fontSize:"1rem"}}},[t.breakpoints.down("sm")]:{gap:t.spacing(1.25),"& > *":{padding:t.spacing(.5,1.25),fontSize:"0.875rem"}}}));te(c)(({theme:t})=>({display:"inline-flex",alignItems:"center",background:`linear-gradient(135deg, ${pe(t.palette.common.white,.2)} 0%, ${pe(t.palette.common.white,.15)} 100%)`,color:t.palette.common.white,padding:t.spacing(.75,2),borderRadius:t.shape.borderRadius*3,fontWeight:700,transition:"all 0.3s ease-in-out",backdropFilter:"blur(10px)",border:`1px solid ${pe(t.palette.common.white,.2)}`,"&:hover":{background:`linear-gradient(135deg, ${pe(t.palette.common.white,.25)} 0%, ${pe(t.palette.common.white,.2)} 100%)`,transform:"translateY(-2px)",boxShadow:`0 4px 12px ${pe(t.palette.common.black,.2)}`},"& .MuiRating-root":{marginRight:t.spacing(.5),color:t.palette.warning.main,"& .MuiRating-iconFilled":{color:t.palette.warning.main},"& .MuiRating-iconHover":{color:t.palette.warning.dark}},[t.breakpoints.down("sm")]:{padding:t.spacing(.5,1.5)}}));te(nt)(({theme:t})=>({borderRadius:t.shape.borderRadius*4,boxShadow:`0 25px 50px ${pe(t.palette.common.black,.15)}`,overflow:"hidden",transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid",borderColor:pe(t.palette.primary.main,.1),display:"flex",flexDirection:"column",height:"auto",marginRight:{lg:0},backdropFilter:"blur(20px)",background:`linear-gradient(145deg, 
    ${pe(t.palette.background.paper,.9)}, 
    ${pe(t.palette.background.paper,.95)})`,"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:`0 30px 60px ${pe(t.palette.common.black,.15)}`,borderColor:t.palette.primary.light,"& .course-image":{transform:"scale(1.05)"},"& .course-title":{color:t.palette.primary.main}},"& .MuiCardMedia-root":{transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)"}}));const gD=te(De)(({theme:t})=>({marginBottom:t.spacing(2.5),borderRadius:t.shape.borderRadius*4,overflow:"hidden",boxShadow:`0 8px 20px ${pe(t.palette.common.black,.08)}`,transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid",borderColor:pe(t.palette.primary.main,.1),background:`linear-gradient(145deg, 
    ${pe(t.palette.background.paper,.95)}, 
    ${pe(t.palette.background.paper,.98)})`,"&:hover":{boxShadow:`0 8px 25px ${pe(t.palette.common.black,.1)}`,borderColor:t.palette.primary.light,transform:"translateY(-2px)"},"&.Mui-expanded":{margin:t.spacing(2,0),backgroundColor:pe(t.palette.primary.main,.02),borderColor:t.palette.primary.light}})),mD=te(pt)(({theme:t})=>({padding:t.spacing(3,4),background:`linear-gradient(135deg, ${pe(t.palette.background.paper,.95)} 0%, ${pe(t.palette.background.default,.8)} 100%)`,borderBottom:`2px solid ${pe(t.palette.primary.main,.1)}`,cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(90deg, transparent, ${pe(t.palette.primary.main,.1)}, transparent)`,transition:"left 0.6s ease"},"&:hover":{backgroundColor:pe(t.palette.primary.main,.05),transform:"translateY(-2px)",boxShadow:`0 8px 25px ${pe(t.palette.primary.main,.15)}`,"&::before":{left:"100%"}},"&.Mui-expanded":{backgroundColor:pe(t.palette.primary.main,.08),borderBottomColor:pe(t.palette.primary.main,.2),"& .module-title":{color:t.palette.primary.main,fontWeight:600},"& .module-icon":{transform:"rotate(180deg)",color:t.palette.primary.main}}})),xD=te(ir)(({theme:t,completed:n,preview:a})=>X(X({padding:t.spacing(2.5,4),borderBottom:`1px solid ${pe(t.palette.divider,.1)}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",background:n?`linear-gradient(135deg, ${pe(t.palette.success.light,.05)} 0%, ${pe(t.palette.success.main,.03)} 100%)`:"transparent","&:last-child":{borderBottom:"none"},"&:hover":{backgroundColor:pe(t.palette.primary.main,.05),paddingLeft:t.spacing(4),transform:"translateX(-5px)","& .lesson-play-icon":{opacity:1,transform:"translateX(0)"}}},n&&{backgroundColor:pe(t.palette.success.main,.1),"& .MuiListItemIcon-root":{color:t.palette.success.main},"&:hover":{backgroundColor:pe(t.palette.success.main,.15)}}),a&&{"& .MuiListItemText-primary":{color:t.palette.primary.main,fontWeight:600},"& .preview-badge":{background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.primary.light} 100%)`,color:t.palette.primary.contrastText,padding:"4px 12px",borderRadius:16,fontSize:"0.75rem",fontWeight:700,marginLeft:8,boxShadow:`0 2px 8px ${pe(t.palette.primary.main,.3)}`}}));te(re)(({theme:t})=>({width:"100%",padding:t.spacing(2.5,4),fontSize:"1.3rem",fontWeight:700,borderRadius:t.shape.borderRadius*4,textTransform:"none",marginBottom:t.spacing(2),position:"relative",overflow:"hidden",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",background:`linear-gradient(135deg, 
    #0e5181 0%, 
    #0e5181 50%,
    ${pe("#0e5181",.9)} 100%)`,boxShadow:`0 12px 30px ${pe("#0e5181",.4)},
              0 4px 8px ${pe("#0e5181",.2)}`,"&:hover":{transform:"translateY(-3px) scale(1.02)",boxShadow:`0 12px 35px ${pe("#0e5181",.4)}`,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)"},"&:active":{transform:"translateY(-1px) scale(0.98)"},[t.breakpoints.down("sm")]:{padding:t.spacing(1.5,2.5),fontSize:"1.1rem"}}));const Vu=te(c)(({theme:t})=>({display:"flex",alignItems:"center",marginBottom:t.spacing(2),padding:t.spacing(1,2),borderRadius:t.shape.borderRadius*2,transition:"all 0.3s ease","&:hover":{backgroundColor:pe(t.palette.primary.main,.05),transform:"translateX(-5px)"},"& svg":{marginRight:t.spacing(1.5),color:t.palette.primary.main,fontSize:"1.2rem"}})),xa=te(f)(({theme:t})=>({position:"relative",display:"inline-block",marginBottom:t.spacing(4),fontWeight:700,"&::after":{content:'""',position:"absolute",bottom:-8,left:0,width:"80px",height:"4px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:"2px"}}));te(nt)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",padding:t.spacing(6,5),textAlign:"center",borderRadius:t.shape.borderRadius*4,boxShadow:`0 15px 35px ${pe(t.palette.common.black,.12)},
              0 5px 15px ${pe(t.palette.common.black,.05)}`,transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",background:`linear-gradient(145deg, 
    ${pe(t.palette.background.paper,.97)} 0%, 
    ${pe(t.palette.background.paper,.99)} 100%)`,backdropFilter:"blur(20px)",border:`1px solid ${pe(t.palette.primary.main,.1)}`,"&:hover":{transform:"translateY(-6px)",boxShadow:`0 20px 40px ${pe(t.palette.common.black,.15)}`}}));te(c)(({theme:t})=>({position:"relative",marginTop:t.spacing(-15),zIndex:10,[t.breakpoints.up("lg")]:{position:"sticky",top:t.spacing(4),marginTop:t.spacing(-18)},[t.breakpoints.down("lg")]:{marginTop:t.spacing(4)},"& .MuiCard-root":{backdropFilter:"blur(15px)",background:`linear-gradient(145deg, 
      ${pe(t.palette.background.paper,.98)} 0%, 
      ${pe(t.palette.background.default,.95)} 50%,
      ${pe(t.palette.background.paper,.98)} 100%)`,borderRadius:t.shape.borderRadius*4,boxShadow:`0 20px 40px ${pe(t.palette.common.black,.12)},
                0 8px 20px ${pe(t.palette.common.black,.08)}`,border:`1px solid ${pe(t.palette.primary.main,.12)}`,transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:`0 25px 50px ${pe(t.palette.common.black,.15)},
                  0 12px 25px ${pe(t.palette.common.black,.1)}`}}}));te(c)(({theme:t})=>({display:"flex",alignItems:"center",margin:t.spacing(2,0),"& .original-price":{textDecoration:"line-through",color:t.palette.text.secondary,marginRight:t.spacing(1.5),fontSize:"1.1rem"},"& .discount-badge":{background:`linear-gradient(135deg, ${t.palette.error.main} 0%, ${t.palette.error.dark} 100%)`,color:t.palette.error.contrastText,padding:t.spacing(.5,1.5),borderRadius:t.shape.borderRadius*2,fontSize:"0.8rem",fontWeight:700,boxShadow:`0 2px 8px ${pe(t.palette.error.main,.3)}`}}));const bD=te(xe)(({theme:t})=>({position:"fixed",bottom:t.spacing(4),right:t.spacing(4),zIndex:1e3,width:60,height:60,backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,boxShadow:`0 8px 25px ${pe(t.palette.primary.main,.3)}`,background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.primary.dark} 100%)`,backdropFilter:"blur(10px)","&:hover":{backgroundColor:t.palette.primary.dark,transform:"scale(1.1) translateY(-2px)",boxShadow:`0 12px 30px ${pe(t.palette.primary.main,.4)}`},"&:active":{transform:"scale(0.95)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",[t.breakpoints.up("lg")]:{display:"none"},[t.breakpoints.down("sm")]:{bottom:t.spacing(3),right:t.spacing(3),width:50,height:50}})),yD=yt`
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
`,Do=te(c)(({theme:t})=>({display:"inline-block",animation:`${yD} 1.5s ease-in-out infinite`,backgroundColor:t.palette.action.hover,borderRadius:t.shape.borderRadius})),vD=()=>e(c,{sx:{py:4},children:e(Xe,{maxWidth:"lg",children:o(le,{container:!0,spacing:4,children:[o(le,{xs:12,lg:8,children:[e(Do,{variant:"rectangular",width:"100%",height:400,sx:{mb:3,borderRadius:2}}),o(c,{sx:{mb:4},children:[e(Do,{variant:"text",width:"60%",height:40,sx:{mb:2}}),e(Do,{variant:"text",width:"90%",height:24,sx:{mb:1}}),e(Do,{variant:"text",width:"80%",height:24,sx:{mb:3}}),e(Do,{variant:"rectangular",width:120,height:40,sx:{borderRadius:2}})]}),e(zn,{value:0,sx:{mb:3},children:["Overview","Curriculum","Instructor","Reviews","FAQs"].map(t=>e(mt,{label:t,sx:{minWidth:"auto"}},t))}),e(Do,{variant:"rectangular",width:"100%",height:300,sx:{borderRadius:2}})]}),e(le,{xs:12,lg:4,children:e(Do,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}})})]})})}),wD=()=>{var Nn,oi,Ei;const{id:t}=cr(),n=ct(),a=jt();Fn(a.breakpoints.down("sm"));const[l,d]=w.useState(null),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState(0),[S,C]=w.useState([]),[_,z]=w.useState(!1),[R,B]=w.useState(!1),[T,O]=w.useState({}),[q,j]=w.useState(!1),[ee,V]=w.useState(!1),[L,k]=w.useState(!1),[G,W]=w.useState(null),[M,U]=w.useState(0),H=w.useRef(null),N=w.useRef(null),[Y,E]=w.useState(!1),[I,A]=w.useState(!1),[Q,J]=w.useState([]),[P,ie]=w.useState(0),[ue,fe]=w.useState(!1),[de,K]=w.useState({rating:5,comment:""}),[se,ve]=w.useState(!1);w.useEffect(()=>{const ae=()=>{if(window.scrollY>200?j(!0):j(!1),H.current){const Ie=H.current.getBoundingClientRect();Ie.top<100&&Ie.bottom>window.innerHeight?V(!0):V(!1)}};return window.addEventListener("scroll",ae),()=>window.removeEventListener("scroll",ae)},[]);const ge=ae=>{O(Fe=>oe(X({},Fe),{[ae]:!Fe[ae]}))},ke=()=>{N.current&&N.current.scrollIntoView({behavior:"smooth",block:"start"})},it=()=>k(!0),kt=()=>k(!1),Cr=ae=>W(ae.currentTarget),Ne=()=>W(null),Ft=(ae,Fe)=>U(Fe),kr=ae=>ae!=null&&ae.completed?e(yr,{htmlColor:"#0e5181"}):(ae==null?void 0:ae.type)==="video"?e(P1,{htmlColor:"#0e5181"}):(ae==null?void 0:ae.type)==="article"?e(ch,{htmlColor:"#e5978b"}):(ae==null?void 0:ae.type)==="quiz"?e(ar,{htmlColor:"#0e5181"}):(ae==null?void 0:ae.type)==="assignment"?e(Jr,{htmlColor:"#e5978b"}):(ae==null?void 0:ae.type)==="exam"?e(ar,{htmlColor:"#0e5181"}):(ae==null?void 0:ae.type)==="file"?e(Kn,{htmlColor:"#e5978b"}):(ae==null?void 0:ae.type)==="project"?e(n0,{htmlColor:"#0e5181"}):(ae==null?void 0:ae.type)==="exercise"?e(eo,{htmlColor:"#e5978b"}):(ae==null?void 0:ae.type)==="case-study"?e(X5,{htmlColor:"#0e5181"}):ae!=null&&ae.isPreview?e(Pc,{htmlColor:"#0e5181"}):e(sh,{htmlColor:"#0e5181"}),Le=ae=>{const Fe={};return Array.isArray(ae)&&ae.forEach(Ie=>{Ie&&Ie.id&&(Fe[Ie.id]=!1)}),Fe};w.useEffect(()=>{t&&$(null,null,function*(){var Fe,Ie,Ke;h(!0),m(null);try{console.log("Fetching course data for ID:",t);const tt=yield gn.getCourseById(t);console.log("Course data from API:",tt);let $e=[];try{const Pe=yield gn.getRelatedCourses(t);$e=Pe.results||Pe||[],console.log("Related courses data:",$e)}catch(Pe){console.warn("Could not fetch related courses:",Pe),$e=[]}let He=[],at=!1;try{console.log("Fetching modules from content API for course:",t);const Pe=yield mr.getModules(t);if(console.log("Content API modules response:",Pe),Pe&&typeof Pe=="object"?Array.isArray(Pe)?He=Pe:Pe.modules&&Array.isArray(Pe.modules)?He=Pe.modules:Pe.results&&Array.isArray(Pe.results)?He=Pe.results:Pe.data&&Array.isArray(Pe.data)?He=Pe.data:He=[]:He=[],console.log("Processed content modules data:",He),He.length>0)at=!0;else try{const qe=yield gn.getCourseModules(t);console.log("Course API modules response:",qe),qe&&typeof qe=="object"&&(Array.isArray(qe)?He=qe:qe.modules&&Array.isArray(qe.modules)?He=qe.modules:qe.results&&Array.isArray(qe.results)&&(He=qe.results)),He.length>0&&(at=!0)}catch(qe){console.warn("Could not fetch course modules from course API:",qe),qe.response&&qe.response.status===403&&(at=!1)}}catch(Pe){console.warn("Could not fetch modules from content API:",Pe);try{const qe=yield gn.getCourseModules(t);console.log("Fallback course API modules response:",qe),qe&&typeof qe=="object"&&(Array.isArray(qe)?He=qe:qe.modules&&Array.isArray(qe.modules)?He=qe.modules:qe.results&&Array.isArray(qe.results)&&(He=qe.results)),He.length>0&&(at=!0)}catch(qe){console.warn("Could not fetch course modules from course API:",qe),qe.response&&qe.response.status===403&&(at=!1),He=[]}}if(He.length>0){console.log("Fetching content for modules...");for(let Pe=0;Pe<He.length;Pe++){const xt=He[Pe].id;try{const Ve=yield mr.getLessons({moduleId:xt,courseId:t});console.log(`Lessons for module ${xt}:`,Ve),Ve&&Array.isArray(Ve)?He[Pe].lessons=Ve:Ve&&Array.isArray(Ve.results)?He[Pe].lessons=Ve.results:Ve&&Array.isArray(Ve.data)&&(He[Pe].lessons=Ve.data)}catch(Ve){console.warn(`Could not fetch lessons for module ${xt}:`,Ve),He[Pe].lessons=[]}try{const Ve=yield lr.getAssignments({course:t,module:xt});console.log(`Assignments for module ${xt}:`,Ve),Ve&&Array.isArray(Ve)?He[Pe].assignments=Ve:Ve&&Array.isArray(Ve.results)?He[Pe].assignments=Ve.results:Ve&&Array.isArray(Ve.data)&&(He[Pe].assignments=Ve.data)}catch(Ve){console.warn(`Could not fetch assignments for module ${xt}:`,Ve),He[Pe].assignments=[]}try{const Ve=yield ne.get("/api/assignments/quizzes/",{params:{course:t,module:xt}});console.log(`Quizzes for module ${xt}:`,Ve.data),Ve.data&&Array.isArray(Ve.data)?He[Pe].quizzes=Ve.data:Ve.data&&Array.isArray(Ve.data.results)&&(He[Pe].quizzes=Ve.data.results)}catch(Ve){console.warn(`Could not fetch quizzes for module ${xt}:`,Ve),He[Pe].quizzes=[]}try{const Ve=yield nr.getExams({course:t,module:xt});console.log(`Exams for module ${xt}:`,Ve),Ve&&Array.isArray(Ve)?He[Pe].exams=Ve:Ve&&Array.isArray(Ve.results)?He[Pe].exams=Ve.results:Ve&&Array.isArray(Ve.data)&&(He[Pe].exams=Ve.data)}catch(Ve){console.warn(`Could not fetch exams for module ${xt}:`,Ve),He[Pe].exams=[]}}}let Et=[],dr=null;try{console.log("Fetching reviews from reviews API for course:",t);const Pe=yield Uu.getCourseReviews(t);console.log("Reviews API response:",Pe),Pe&&Pe.results?Et=Pe.results:Array.isArray(Pe)?Et=Pe:Et=[],console.log("Processed reviews data:",Et)}catch(Pe){console.warn("Could not fetch reviews from reviews API:",Pe);try{const qe=yield gn.getCourseReviews(t);Et=qe.results||qe||[],console.log("Fallback course reviews data:",Et)}catch(qe){console.warn("Could not fetch course reviews from course API:",qe),Et=[]}}try{const Pe=yield Uu.getCourseRating(t);console.log("Course rating stats:",Pe),dr=Pe}catch(Pe){console.warn("Could not fetch course rating stats:",Pe),dr=null}const Ue=tr(tt,He,Et,at,dr);console.log("Transformed course:",Ue),console.log("Transformed course modules:",Ue.modules),d(Ue),C($e),O(Le(Ue.modules)),h(!1)}catch(tt){console.error("Error fetching course data:",tt);let $e="    ";tt.response?tt.response.status===404?$e="  ":tt.response.status===403?$e="     ":tt.response.status===401?$e="     ":(Fe=tt.response.data)!=null&&Fe.detail?$e=tt.response.data.detail:(Ie=tt.response.data)!=null&&Ie.error?$e=tt.response.data.error:(Ke=tt.response.data)!=null&&Ke.message&&($e=tt.response.data.message):tt.request?$e="  .     .":$e=tt.message||"   ",m($e),h(!1)}})},[t]);const tr=(ae,Fe=[],Ie=[],Ke=!1,tt=null)=>{var Ve,si,Hi,Ae,Oe,Ze,st,ot,je,Nt,Qr,Mt,Ri,bn,yn,vn,wn,et,Gr,rn,Xt,En,Ra,li;console.log("Transforming course data:",ae);const $e=ft=>ft?typeof ft=="string"?ft.startsWith("http")?ft:`${Zi.baseURL}${ft}`:ft.url?ft.url:"https://source.unsplash.com/random/1600x500?programming,react":"https://source.unsplash.com/random/1600x500?programming,react",He=ft=>ft?typeof ft=="string"?ft.startsWith("http")?ft:`${Zi.baseURL}${ft}`:ft.url?ft.url:null:null,at=parseFloat(ae.price)||0,Et=parseFloat(ae.discount_price)||0,dr=Et>0?Math.round((at-Et)/at*100):0,Ue=Array.isArray(Fe)?Fe.reduce((ft,Ji)=>ft+(Array.isArray(Ji.lessons||Ji.content)?(Ji.lessons||Ji.content).length:0),0):0,Pe=Math.round(Ue*.5),qe=Array.isArray(Ie)?Ie.map(ft=>{var Ji,fo,po,ci,ls,xl,ea;return X({id:ft.id,user:{name:ft.user_name||((Ji=ft.user)==null?void 0:Ji.username)||((fo=ft.user)==null?void 0:fo.first_name)||((po=ft.user)==null?void 0:po.name)||"",avatar:$e(ft.user_image||((ls=(ci=ft.user)==null?void 0:ci.profile)==null?void 0:ls.avatar)||((xl=ft.user)==null?void 0:xl.profile_pic)||ft.avatar),id:((ea=ft.user)==null?void 0:ea.id)||null},rating:ft.rating||5,date:ft.created_at?new Date(ft.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"",title:ft.title||" ",content:ft.review_text||ft.content||ft.comment||ft.text||"",likes:ft.like_count||ft.helpful_count||ft.likes_count||0,isLiked:ft.is_liked_by_user||ft.is_liked||!1,isOwner:ft.is_owner||!1,isApproved:ft.is_approved!==!1},ft)}):[],xt=(tt==null?void 0:tt.average_rating)||ae.average_rating||ae.rating||4.8;return tt!=null&&tt.review_count||tt!=null&&tt.total_reviews||qe.length,{id:ae.id,title:ae.title||ae.name||"",subtitle:ae.subtitle||ae.short_description||((Ve=ae.description)==null?void 0:Ve.substring(0,100))||"",description:ae.description||"",longDescription:ae.description||ae.long_description||ae.content||"",instructor:((Hi=(si=ae.instructors)==null?void 0:si[0])==null?void 0:Hi.name)||((Ae=ae.instructor)==null?void 0:Ae.name)||((Oe=ae.teacher)==null?void 0:Oe.name)||" ",instructorTitle:((st=(Ze=ae.instructors)==null?void 0:Ze[0])==null?void 0:st.bio)||((ot=ae.instructor)==null?void 0:ot.title)||((je=ae.teacher)==null?void 0:je.title)||" ",instructorBio:((Qr=(Nt=ae.instructors)==null?void 0:Nt[0])==null?void 0:Qr.bio)||((Mt=ae.instructor)==null?void 0:Mt.bio)||((Ri=ae.teacher)==null?void 0:Ri.bio)||"",instructorAvatar:$e(((yn=(bn=ae.instructors)==null?void 0:bn[0])==null?void 0:yn.profile_pic)||((vn=ae.instructor)==null?void 0:vn.profile_pic)||((wn=ae.teacher)==null?void 0:wn.profile_pic)),instructorRating:((et=ae.instructor)==null?void 0:et.rating)||((Gr=ae.teacher)==null?void 0:Gr.rating)||4.9,instructorStudents:((rn=ae.instructor)==null?void 0:rn.students_count)||((Xt=ae.teacher)==null?void 0:Xt.students_count)||ae.total_enrollments||0,instructorCourses:((En=ae.instructor)==null?void 0:En.courses_count)||((Ra=ae.teacher)==null?void 0:Ra.courses_count)||8,bannerImage:$e(ae.image||ae.banner_image||ae.cover_image),thumbnail:$e(ae.image||ae.thumbnail||ae.cover_image),category:((li=ae.category)==null?void 0:li.name)||ae.category||" ",level:ae.level||"",duration:ae.duration||`${Pe} `,totalHours:Pe,lectures:Ue,resources:ae.resources_count||ae.materials_count||45,students:ae.total_enrollments||ae.students_count||ae.enrollments_count||0,rating:xt,courseReviews:qe,price:at,originalPrice:(Et>0,at),discount:dr,isBestseller:ae.is_featured||ae.is_bestseller||!1,lastUpdated:ae.updated_at?new Date(ae.updated_at).toLocaleDateString("ar-SA",{year:"numeric",month:"long"}):"",language:ae.language||"",captions:ae.captions||["","English"],features:["  ","   ","  ","    30 ","  "," "],isEnrolled:ae.is_enrolled||!1,planPdfUrl:He(ae.timeline_pdf||ae.plan_pdf||ae.plan||ae.syllabus_pdf),enrichmentPdfUrl:He(ae.enrichment_pdf||ae.resources_pdf||ae.materials_pdf),requirements:ae.requirements||ae.prerequisites||[],whoIsThisFor:ae.who_is_this_for||ae.target_audience||ae.audience||[],modules:_r(Fe,ae,Ke),curriculum:[{title:"",duration:"2h 45m",lectures:5,completed:2},{title:" React ",duration:"4h 15m",lectures:6,completed:0},{title:"   Redux",duration:"5h 30m",lectures:6,completed:0},{title:" ",duration:"3h 45m",lectures:5,completed:0}],faqs:ae.faqs||[{question:"      ",answer:'           ""  .       .'},{question:"   ",answer:"             ."},{question:"    ",answer:"        .              ."},{question:"      ",answer:"            .            ."},{question:"    ",answer:"      30         ."}]}},_r=(ae,Fe,Ie=!1)=>{console.log("transformModulesData called with:",{modulesData:ae,courseData:Fe,isUserEnrolled:Ie}),(!ae||!Array.isArray(ae))&&(console.log("modulesData is not an array, using empty array"),ae=[]);const Ke=ae.length>0&&ae.some($e=>{const He=$e.lessons||$e.content||$e.lectures||[];return Array.isArray(He)&&He.length>0});if(!Ie||!Ke){console.log("User not enrolled or no valid modules, showing preview modules");const $e=(Fe==null?void 0:Fe.title)||(Fe==null?void 0:Fe.name)||"",He=$e.toLowerCase().includes("react"),at=$e.toLowerCase().includes("web")||$e.toLowerCase().includes("frontend"),Et=$e.toLowerCase().includes("backend")||$e.toLowerCase().includes("django")||$e.toLowerCase().includes("python");return[{id:1,title:`  ${He?"React":at?" ":Et?" ":""}`,description:"     ",duration:"2h 45m",lessons:[{id:1,title:`  ${He?"React":at?" ":Et?" ":""}`,duration:"15:30",isPreview:!0,completed:!1,type:"video"},{id:2,title:"  ",duration:"12:45",isPreview:!0,completed:!1,type:"video"},{id:3,title:" ",duration:"18:20",isPreview:!1,completed:!1,type:"video"},{id:4,title:"  ",duration:"22:10",isPreview:!1,completed:!1,type:"video"},{id:5,title:"  ",duration:"08:30",isPreview:!0,completed:!1,type:"article"},{id:6,title:"  :  ",duration:"45:00",isPreview:!1,completed:!1,type:"assignment"},{id:7,title:"  ",duration:"20:00",isPreview:!1,completed:!1,type:"quiz"}]},{id:2,title:" ",description:"    ",duration:"4h 15m",lessons:[{id:8,title:"  -  ",duration:"22:10",isPreview:!0,completed:!1,type:"video"},{id:9,title:"  -  ",duration:"18:30",isPreview:!0,completed:!1,type:"video"},{id:10,title:" ",duration:"20:15",isPreview:!1,completed:!1,type:"video"},{id:11,title:" ",duration:"25:40",isPreview:!1,completed:!1,type:"video"},{id:12,title:" ",duration:"28:20",isPreview:!1,completed:!1,type:"video"},{id:13,title:" :  ",duration:"15:00",isPreview:!1,completed:!1,type:"exercise"},{id:14,title:"  :  ",duration:"60:00",isPreview:!1,completed:!1,type:"assignment"},{id:15,title:"  ",duration:"25:00",isPreview:!1,completed:!1,type:"quiz"}]},{id:3,title:" ",description:"    ",duration:"5h 30m",lessons:[{id:16,title:"  ",duration:"25:20",isPreview:!0,completed:!1,type:"video"},{id:17,title:"  ",duration:"19:45",isPreview:!1,completed:!1,type:"video"},{id:18,title:"  ",duration:"21:30",isPreview:!0,completed:!1,type:"video"},{id:19,title:"  ",duration:"28:15",isPreview:!1,completed:!1,type:"video"},{id:20,title:" ",duration:"17:50",isPreview:!1,completed:!1,type:"video"},{id:21,title:"  ",duration:"45:00",isPreview:!1,completed:!1,type:"project"},{id:22,title:"  :  ",duration:"90:00",isPreview:!1,completed:!1,type:"assignment"},{id:23,title:"  ",duration:"60:00",isPreview:!1,completed:!1,type:"exam"}]},{id:4,title:" ",description:"   ",duration:"3h 45m",lessons:[{id:24,title:" ",duration:"20:10",isPreview:!0,completed:!1,type:"video"},{id:25,title:" ",duration:"18:30",isPreview:!1,completed:!1,type:"video"},{id:26,title:" ",duration:"25:45",isPreview:!1,completed:!1,type:"video"},{id:27,title:" ",duration:"22:15",isPreview:!1,completed:!1,type:"video"},{id:28,title:"  ",duration:"30:00",isPreview:!1,completed:!1,type:"case-study"},{id:29,title:"  :  ",duration:"75:00",isPreview:!1,completed:!1,type:"assignment"},{id:30,title:"  ",duration:"30:00",isPreview:!1,completed:!1,type:"quiz"}]}]}const tt=ae.map(($e,He)=>{const at=ot=>Array.isArray(ot)?ot.map((je,Nt)=>X({id:`assignment_${je.id||Nt+1}`,title:je.title||` ${Nt+1}`,duration:"45:00",type:"assignment",isPreview:!1,completed:!1,description:je.description||"",dueDate:je.due_date,points:je.points||100,hasQuestions:je.has_questions||!1,hasFileUpload:je.has_file_upload||!1,order:je.order||Nt+1,isActive:je.is_active!==!1},je)):[],Et=ot=>Array.isArray(ot)?ot.map((je,Nt)=>X({id:`quiz_${je.id||Nt+1}`,title:je.title||` ${Nt+1}`,duration:je.time_limit?`${je.time_limit}:00`:"20:00",type:"quiz",isPreview:!1,completed:!1,description:je.description||"",passMark:je.pass_mark||60,totalQuestions:je.get_total_questions?je.get_total_questions():0,order:je.order||Nt+1,isActive:je.is_active!==!1},je)):[],dr=ot=>Array.isArray(ot)?ot.map((je,Nt)=>X({id:`exam_${je.id||Nt+1}`,title:je.title||` ${Nt+1}`,duration:je.time_limit?`${je.time_limit}:00`:"60:00",type:"exam",isPreview:!1,completed:!1,description:je.description||"",passMark:je.pass_mark||60,isFinal:je.is_final||!1,order:je.order||Nt+1,isActive:je.is_active!==!1},je)):[],Ue=ot=>Array.isArray(ot)?ot.map((je,Nt)=>{var bn,yn;let Qr=je.lesson_type||je.type||"video";const Mt=((bn=je.title)==null?void 0:bn.toLowerCase())||((yn=je.name)==null?void 0:yn.toLowerCase())||"";Mt.includes("")||Mt.includes("assignment")||Mt.includes("homework")?Qr="assignment":Mt.includes("")||Mt.includes("quiz")||Mt.includes("test")?Qr="quiz":Mt.includes("")||Mt.includes("exam")||Mt.includes("final")?Qr="exam":Mt.includes("")||Mt.includes("article")||Mt.includes("text")?Qr="article":Mt.includes("")||Mt.includes("file")||Mt.includes("document")?Qr="file":Mt.includes("")||Mt.includes("project")?Qr="project":Mt.includes("")||Mt.includes("exercise")||Mt.includes("practice")?Qr="exercise":(Mt.includes("")||Mt.includes("case")||Mt.includes("study"))&&(Qr="case-study");const Ri=vn=>{if(!vn)return"15:00";const wn=Math.floor(vn/60),et=vn%60;return wn>0?`${wn}:${et.toString().padStart(2,"0")}`:`${et}:00`};return X({id:je.id||Nt+1,title:je.title||je.name||` ${Nt+1}`,duration:Ri(je.duration_minutes||je.duration),type:Qr,isPreview:je.is_free||je.is_preview||je.isPreview||!1,completed:je.completed||je.is_completed||!1,description:je.description||"",videoUrl:je.video_url||je.videoUrl||null,fileUrl:je.file_url||je.fileUrl||null,content:je.content||"",difficulty:je.difficulty||"beginner",order:je.order||Nt+1},je)}):[],Pe=$e.lessons||$e.content||$e.lectures||[],qe=$e.assignments||[],xt=$e.quizzes||[],Ve=$e.exams||[];console.log(`Module ${$e.id||He+1}:`,{lessons:Pe.length,assignments:qe.length,quizzes:xt.length,exams:Ve.length});const si=Ue(Pe),Hi=at(qe),Ae=Et(xt),Oe=dr(Ve),Ze=[...si,...Hi,...Ae,...Oe].sort((ot,je)=>(ot.order||0)-(je.order||0));Ze.length===0&&(console.log(`No content found for module ${$e.id||He+1}, adding default content`),Ze.push({id:1,title:"  ",duration:"15:00",isPreview:!0,completed:!1,type:"video",order:1},{id:2,title:" ",duration:"45:00",isPreview:!1,completed:!1,type:"assignment",order:2},{id:3,title:" ",duration:"20:00",isPreview:!1,completed:!1,type:"quiz",order:3}));const st=ot=>{if(!ot)return"1h 00m";const je=Math.floor(ot/3600),Nt=Math.floor(ot%3600/60);return je>0?`${je}h ${Nt}m`:`${Nt}m`};return{id:$e.id||He+1,title:$e.name||$e.title||` ${He+1}`,description:$e.description||"",duration:st($e.video_duration||$e.duration),lessons:Ze,order:$e.order||He+1,status:$e.status||"published",isActive:$e.is_active!==!1}});return console.log("transformModulesData result:",tt),tt},jn=(ae,Fe)=>{v(Fe)},hn=(ae,Fe)=>{K(Ie=>oe(X({},Ie),{[ae]:Fe}))},zi=()=>$(null,null,function*(){var ae,Fe;if(!de.comment.trim()){alert("   ");return}try{ve(!0);const Ie={rating:de.rating,review_text:de.comment};console.log("=== REVIEW SUBMISSION DEBUG ==="),console.log("Original reviewForm:",de),console.log("Transformed reviewData:",Ie),console.log("Course ID:",t),console.log("================================");const Ke=yield Uu.createReview(t,Ie);console.log("Review submitted successfully:",Ke),alert("   !"),K({rating:5,comment:""}),fe(!1),window.location.reload()}catch(Ie){console.error("Error submitting review:",Ie);let Ke="   ";Ie.response&&(Ie.response.status===403?Ke="        ":Ie.response.status===400?Ke=((ae=Ie.response.data)==null?void 0:ae.error)||"   ":(Fe=Ie.response.data)!=null&&Fe.error&&(Ke=Ie.response.data.error)),alert(Ke)}finally{ve(!1)}}),qr=ae=>$(null,null,function*(){try{console.log("Liking review:",ae);const Fe=yield Uu.likeReview(ae);console.log("Like response:",Fe),d(Ie=>oe(X({},Ie),{reviews:Ie.reviews.map(Ke=>Ke.id===ae?oe(X({},Ke),{likes:Fe.liked?Ke.likes+1:Ke.likes-1,isLiked:Fe.liked}):Ke)}))}catch(Fe){console.error("Error liking review:",Fe),alert("   ")}}),ii=()=>{B(!R),console.log("Wishlist status:",!R)},ai=()=>$(null,null,function*(){var ae,Fe,Ie;try{E(!0);const Ke=yield No.addToCart(l.id);console.log("Added to cart:",Ke),J(tt=>[...tt,l]),ie(tt=>tt+l.price),alert("     !")}catch(Ke){console.error("Error adding to cart:",Ke);let tt="      ";Ke.response&&((ae=Ke.response.data)!=null&&ae.detail?tt=Ke.response.data.detail:(Fe=Ke.response.data)!=null&&Fe.error?tt=Ke.response.data.error:(Ie=Ke.response.data)!=null&&Ie.message&&(tt=Ke.response.data.message)),alert(tt)}finally{E(!1)}}),xn=()=>{n(`/payment/${l.id}`)};if(p)return o(c,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e(On,{}),e(vD,{}),e(c,{sx:{mt:"auto"},children:e(Bn,{})})]});if(x)return o(Xe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[o(Be,{severity:"error",sx:{mb:4},children:[e(f,{variant:"h6",gutterBottom:!0,children:"   "}),e(f,{variant:"body1",children:x})]}),o(c,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[e(re,{variant:"contained",color:"primary",size:"large",onClick:()=>window.location.reload(),startIcon:e(qt,{}),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem",fontWeight:600},children:"  "}),e(re,{variant:"outlined",color:"primary",size:"large",onClick:()=>n("/courses"),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem",fontWeight:600},children:" "})]})]});if(!l)return o(Xe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[o(c,{mb:4,children:[e(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"  "}),e(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:"        ."})]}),e(re,{variant:"contained",color:"primary",size:"large",onClick:()=>n("/courses"),startIcon:e(qt,{}),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem",fontWeight:600},children:"  "})]});const Gt=Array.isArray(l.modules)?l.modules.reduce((ae,Fe)=>ae+(Array.isArray(Fe.lessons)?Fe.lessons.length:0),0):0,Yr=Array.isArray(l.modules)?l.modules.flatMap(ae=>Array.isArray(ae.lessons)?ae.lessons:[]).filter(ae=>ae.completed).length:0,Re=Math.round(Yr/Gt*100)||0;return o(c,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e(On,{}),e(uD,{children:e(hD,{children:e(Xe,{maxWidth:"lg",sx:{position:"relative",zIndex:1},dir:"rtl",children:e(le,{container:!0,spacing:4,alignItems:"center",children:o(le,{xs:12,lg:9,sx:{mx:"auto"},children:[e(dD,{sx:{display:"flex",justifyContent:"flex-start"},children:o(K5,{"aria-label":"breadcrumb",sx:{color:"rgba(255,255,255,0.95)"},children:[o(hr,{to:"/",style:{display:"flex",alignItems:"center"},children:[e(kh,{sx:{mr:1,fontSize:20}}),""]}),e(hr,{to:"/courses",style:{color:"rgba(255,255,255,0.9)"},children:""}),e(f,{color:"primary.contrastText",children:l.category})]})}),o(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr auto"},alignItems:"center",gap:2},children:[o(c,{sx:{textAlign:"right"},children:[e(fD,{variant:"h3",component:"h1",sx:{textAlign:"right",mb:1},children:l.title}),e(pD,{variant:"subtitle1",component:"h2",sx:{textAlign:"right",opacity:.85},children:l.subtitle})]}),o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1},children:[e(xe,{onClick:ii,sx:{bgcolor:"rgba(255,255,255,0.12)",color:R?"#0e5181":"rgba(255,255,255,0.8)","&:hover":{bgcolor:"rgba(255,255,255,0.2)",transform:"scale(1.1)"}},children:R?e(zh,{}):e(jc,{})}),e(xe,{onClick:Cr,sx:{bgcolor:"rgba(255,255,255,0.12)",color:"rgba(255,255,255,0.8)","&:hover":{bgcolor:"rgba(255,255,255,0.2)",transform:"scale(1.1)"}},children:e(rd,{})})]})]}),o(Fc,{anchorEl:G,open:!!G,onClose:Ne,children:[o(We,{onClick:Ne,children:[e(f6,{sx:{mr:1}})," "]}),o(We,{onClick:Ne,children:[e(_h,{sx:{mr:1}})," "]}),o(We,{onClick:Ne,children:[e(G0,{sx:{mr:1}})," "]}),o(We,{onClick:Ne,children:[e(p6,{sx:{mr:1}})," "]})]}),o(c,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:1.25,mt:1.5},children:[o(Qs,{children:[e(Pi,{fontSize:"small",sx:{ml:.5}}),(()=>{const ae=l.rating;return`${typeof ae=="number"?ae.toFixed(1):isNaN(parseFloat(ae))?"0.0":parseFloat(ae).toFixed(1)}`})(),"  ",Array.isArray(l.reviews)?l.reviews.length:0," "]}),o(Qs,{children:[e(rs,{fontSize:"small",sx:{ml:.5}}),(()=>{const ae=l.students;if(typeof ae=="number")return ae.toLocaleString();const Fe=parseFloat(ae);return isNaN(Fe)?"0":Fe.toLocaleString()})()," "]}),o(Qs,{children:[e(dn,{fontSize:"small",sx:{ml:.5}})," ",l.duration]}),o(Qs,{children:[e(co,{fontSize:"small",sx:{ml:.5}})," ",l.level==="Beginner"?"":l.level==="Intermediate"?"":l.level==="Advanced"?"":l.level]}),o(Qs,{children:[e(F1,{fontSize:"small",sx:{ml:.5}})," ",l.language]}),o(Qs,{children:[e(g6,{fontSize:"small",sx:{ml:.5}})," CC: ",Array.isArray(l.captions)?l.captions.join(", "):" "]})]}),o(c,{sx:{display:"flex",alignItems:"center",mt:3,mb:2,justifyContent:"space-between",gap:2},children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[e(Tt,{src:l.instructorAvatar,alt:l.instructor,sx:{width:50,height:50,mr:2.5,border:"2px solid white",boxShadow:2}}),o(c,{sx:{mr:.5},children:[e(f,{variant:"subtitle2",fontWeight:600,children:l.instructor}),e(f,{variant:"body2",color:"rgba(255,255,255,0.8)",fontSize:"0.8rem",children:l.instructorTitle})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ba,{value:l.rating,precision:.1,readOnly:!0,size:"small",emptyIcon:e(uc,{fontSize:"inherit"}),sx:{ml:3}}),o(f,{variant:"body2",color:"primary.contrastText",children:[(()=>{const ae=l.rating;if(typeof ae=="number")return ae.toFixed(1);if(typeof ae=="string"){const Fe=parseFloat(ae);return isNaN(Fe)?"0.0":Fe.toFixed(1)}else return"0.0"})()," (",Array.isArray(l.reviews)?l.reviews.length:0,")"]})]})]}),o(f,{variant:"caption",display:"block",sx:{opacity:.8,mb:2},children:["  ",l.lastUpdated]}),_&&o(c,{sx:{mt:3,maxWidth:"600px"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[o(f,{variant:"body2",fontWeight:500,children:[": ",Re,"% "]}),o(f,{variant:"body2",color:"text.secondary",children:[Yr,"  ",Gt," "]})]}),e(Sr,{variant:"determinate",value:Re,sx:{height:10,borderRadius:5,backgroundColor:"rgba(255,255,255,0.2)","& .MuiLinearProgress-bar":{borderRadius:5,background:ae=>`linear-gradient(90deg, ${ae.palette.success.main} 0%, ${ae.palette.success.light} 100%)`}}})]}),o(c,{sx:{display:"flex",justifyContent:"flex-end",gap:1.5,mt:2},children:[e(re,{variant:"outlined",sx:{borderRadius:999,px:4,py:1.25,fontWeight:700,borderColor:"rgba(255,255,255,0.8)",color:"common.white",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)","&:hover":{borderColor:"common.white",bgcolor:"rgba(255,255,255,0.2)",transform:"translateY(-2px)"},"& .MuiButton-startIcon":{ml:1,mr:0}},onClick:it,startIcon:e(Pc,{sx:{color:"common.white"}}),children:" "}),e(re,{variant:"outlined",disabled:Y,sx:{borderRadius:999,px:4,py:1.25,fontWeight:700,borderColor:"rgba(255,255,255,0.8)",color:"common.white",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)","&:hover":{borderColor:"common.white",bgcolor:"rgba(255,255,255,0.2)",transform:"translateY(-2px)"},"& .MuiButton-startIcon":{ml:1,mr:0}},onClick:ai,startIcon:Y?e(Qe,{size:20,color:"inherit"}):e(qo,{sx:{color:"common.white"}}),children:Y?" ...":" "}),e(re,{variant:"contained",disabled:I,sx:{borderRadius:999,px:4,py:1.25,fontWeight:700,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},"& .MuiButton-startIcon":{ml:1,mr:0}},onClick:xn,startIcon:I?e(Qe,{size:20,color:"inherit"}):e(ah,{}),children:I?" ...":" "})]})]})})})})}),e(wr,{open:L,onClose:kt,maxWidth:"md",fullWidth:!0,children:e(vr,{sx:{p:0},children:e(c,{sx:{position:"relative",paddingTop:"56.25%"},children:e(c,{component:"iframe",src:l.previewUrl||"https://www.youtube.com/embed/dQw4w9WgXcQ",title:"Course Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,sx:{border:0,position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})})}),e(Xe,{maxWidth:"lg",sx:{position:"relative",pt:{xs:jo.sectionYMobile,md:jo.sectionY},pb:{xs:jo.sectionYMobile+2,md:jo.sectionY+2},px:{xs:2,sm:3,md:4},minHeight:"60vh"},children:e(le,{container:!0,spacing:jo.gridSpacing,ref:H,sx:{position:"relative",minHeight:"100%"},children:o(le,{xs:12,lg:12,sx:{order:{xs:1,lg:1},width:"100%"},children:[e(De,{sx:{mb:4,borderRadius:3,overflow:"visible",boxShadow:ae=>`0 4px 20px ${pe(ae.palette.common.black,.08)}`},elevation:0,children:o(zn,{value:y,onChange:jn,variant:"fullWidth",centered:!0,sx:{borderBottom:1,borderColor:"divider","& .MuiTabs-flexContainer":{"& .MuiButtonBase-root":{flex:1,minWidth:"auto",maxWidth:"none",flexBasis:0,width:"auto",justifyContent:"center",textAlign:"center",py:2,px:2,minHeight:56,fontSize:"1rem",textTransform:"none",fontWeight:500,borderRadius:999,mx:.75,border:ae=>`1px solid ${pe(ae.palette.primary.main,.15)}`,backgroundColor:"background.paper",transition:"all 0.3s ease",color:"text.secondary","&.Mui-selected":{color:"primary.main",bgcolor:ae=>pe(ae.palette.primary.main,.08),fontWeight:600,boxShadow:ae=>`0 6px 16px ${pe(ae.palette.primary.main,.18)}`},"&:hover":{bgcolor:ae=>pe(ae.palette.primary.main,.06)}}},"& .MuiTabs-indicator":{height:4,borderRadius:2}},children:[e(mt,{label:" "}),e(mt,{label:""}),e(mt,{label:" "}),e(mt,{label:" "})]})}),o(c,{sx:{mb:6},children:[y===0&&o(Qg,{children:[o(zn,{value:M,onChange:Ft,variant:"scrollable",scrollButtons:"auto",sx:{mb:3,"& .MuiTab-root":{minWidth:"auto"}},children:[e(mt,{label:" "}),e(mt,{label:" "}),e(mt,{label:" "})]}),M===0&&o(c,{children:[e(xa,{variant:"h5",component:"h2",gutterBottom:!0,children:" "}),e(f,{variant:"body1",paragraph:!0,dir:"rtl",sx:{lineHeight:1.8,fontSize:"1.1rem"},children:l.longDescription}),o(le,{container:!0,spacing:2,sx:{mt:1},children:[e(le,{xs:6,md:3,children:o(Vu,{children:[e(Ln,{}),o(f,{variant:"body2",children:[": ",l.duration]})]})}),e(le,{xs:6,md:3,children:o(Vu,{children:[e(ji,{}),o(f,{variant:"body2",children:[": ",Gt]})]})}),e(le,{xs:6,md:3,children:o(Vu,{children:[e(F1,{}),o(f,{variant:"body2",children:[": ",l.language]})]})}),e(le,{xs:6,md:3,children:o(Vu,{children:[e(m6,{}),e(f,{variant:"body2",children:": "})]})})]}),e(cD,{sx:{my:3}}),o(le,{container:!0,spacing:3,children:[Array.isArray(l.requirements)&&l.requirements.length>0&&e(le,{xs:12,md:6,children:o(c,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(14, 81, 129, 0.02) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.05)"},children:[e(xa,{variant:"h6",component:"h3",sx:{mb:2,color:"#0e5181"},children:"  "}),e(Rr,{disablePadding:!0,children:l.requirements.map((ae,Fe)=>o(ir,{disableGutters:!0,sx:{py:.75},children:[e(fr,{sx:{minWidth:30},children:e(yr,{htmlColor:"#0e5181",fontSize:"small"})}),e(Ut,{primary:e(f,{variant:"body2",dir:"rtl",sx:{color:"text.primary"},children:ae})})]},Fe))})]})}),Array.isArray(l.whoIsThisFor)&&l.whoIsThisFor.length>0&&e(le,{xs:12,md:6,children:o(c,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, rgba(229, 151, 139, 0.05) 0%, rgba(229, 151, 139, 0.02) 100%)",border:"1px solid rgba(229, 151, 139, 0.1)",boxShadow:"0 4px 15px rgba(229, 151, 139, 0.05)"},children:[e(xa,{variant:"h6",component:"h3",sx:{mb:2,color:"#e5978b"},children:"    "}),e(Rr,{disablePadding:!0,children:l.whoIsThisFor.map((ae,Fe)=>o(ir,{disableGutters:!0,sx:{py:.75},children:[e(fr,{sx:{minWidth:30},children:e(yr,{htmlColor:"#e5978b",fontSize:"small"})}),e(Ut,{primary:e(f,{variant:"body2",dir:"rtl",sx:{color:"text.primary"},children:ae})})]},Fe))})]})})]})]}),M===1&&o(c,{children:[e(xa,{variant:"h5",component:"h2",gutterBottom:!0,children:" "}),l.planPdfUrl?o(c,{sx:{border:"2px solid",borderColor:"rgba(14, 81, 129, 0.2)",borderRadius:3,overflow:"hidden",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%)"},children:[o(c,{sx:{p:2,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"h6",fontWeight:600,children:"   "}),e(re,{variant:"contained",size:"small",component:hr,to:l.planPdfUrl,target:"_blank",rel:"noopener",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:"   "})]}),e(c,{component:"iframe",src:l.planPdfUrl,title:" ",width:"100%",height:"600px",style:{border:0}})]}):e(Be,{severity:"info",sx:{borderRadius:2,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:"     ."})]}),M===2&&o(c,{children:[e(xa,{variant:"h5",component:"h2",gutterBottom:!0,children:" "}),l.enrichmentPdfUrl?o(c,{sx:{border:"2px solid",borderColor:"rgba(14, 81, 129, 0.2)",borderRadius:3,overflow:"hidden",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%)"},children:[o(c,{sx:{p:2,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"h6",fontWeight:600,children:"   "}),e(re,{variant:"contained",size:"small",component:hr,to:l.enrichmentPdfUrl,target:"_blank",rel:"noopener",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:"   "})]}),e(c,{component:"iframe",src:l.enrichmentPdfUrl,title:" ",width:"100%",height:"600px",style:{border:0}})]}):e(Be,{severity:"info",sx:{borderRadius:2,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:"     ."})]})]}),y===1&&o(Qg,{children:[!l.isEnrolled&&o(Be,{severity:"info",sx:{mb:3,borderRadius:2,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)","& .MuiAlert-icon":{color:"#0e5181"}},children:[e(f,{variant:"body1",fontWeight:600,sx:{mb:1},children:"   "}),e(f,{variant:"body2",children:"            .       ."})]}),l.isEnrolled&&o(Be,{severity:"success",sx:{mb:3,borderRadius:2,background:"linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(76, 175, 80, 0.02) 100%)",border:"1px solid rgba(76, 175, 80, 0.1)","& .MuiAlert-icon":{color:"#4caf50"}},children:[e(f,{variant:"body1",fontWeight:600,sx:{mb:1},children:"   "}),e(f,{variant:"body2",children:"   !      :    ."})]}),o(c,{sx:{mb:3,display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",gap:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.2},children:[e(ji,{sx:{color:"primary.main"}}),e(xa,{variant:"h5",component:"h2",sx:{mb:0},children:" "})]}),o(c,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1},children:[e(_e,{size:"small",color:"default",variant:"outlined",icon:e(ji,{}),label:`${Array.isArray(l.modules)?l.modules.length:0} `}),e(_e,{size:"small",color:"default",variant:"outlined",icon:e(en,{}),label:`${Gt} `}),e(_e,{size:"small",color:"default",variant:"outlined",icon:e(dn,{}),label:`${l.totalHours} `}),!l.isEnrolled&&e(_e,{size:"small",color:"warning",variant:"outlined",icon:e(oh,{}),label:" "}),l.isEnrolled&&e(_e,{size:"small",color:"success",variant:"outlined",icon:e(yr,{}),label:" "})]})]}),e(c,{sx:{mb:1},children:Array.isArray(l.modules)?l.modules.map((ae,Fe)=>o(gD,{elevation:0,sx:{mb:2.5,borderRadius:3,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 12px 35px rgba(14, 81, 129, 0.15)",borderColor:"rgba(14, 81, 129, 0.2)"}},children:[o(mD,{onClick:()=>ge(ae.id),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bgcolor:"background.paper",cursor:"pointer",borderRadius:3,"&:hover":{bgcolor:"rgba(14, 81, 129, 0.04)"}},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"rgba(14, 81, 129, 0.1)",border:"2px solid rgba(14, 81, 129, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,color:"#0e5181",fontSize:"1.1rem"},children:Fe+1}),e(f,{variant:"subtitle1",fontWeight:700,dir:"rtl",sx:{color:"#0e5181",fontSize:"1.1rem"},children:ae.title})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(()=>{var $e,He,at;const Ie=((He=($e=ae==null?void 0:ae.lessons)==null?void 0:$e.filter(Et=>Et==null?void 0:Et.completed))==null?void 0:He.length)||0,Ke=((at=ae==null?void 0:ae.lessons)==null?void 0:at.length)||0,tt=Ke?Math.round(Ie/Ke*100):0;return e(_e,{size:"small",variant:"outlined",icon:e(x6,{}),label:`: ${Ie}/${Ke} (${tt}%)`,sx:{bgcolor:"rgba(14, 81, 129, 0.08)",borderColor:"#0e5181",color:"#0e5181",fontWeight:600}})})(),e(dn,{fontSize:"small",sx:{color:"#e5978b",opacity:.9}}),e(f,{variant:"body2",sx:{color:"#e5978b",opacity:.9,fontWeight:600},children:ae.duration})]}),T[ae.id]?e(r0,{}):e(V5,{})]}),e(c,{sx:{height:0}}),e(X0,{in:T[ae.id],timeout:"auto",unmountOnExit:!0,children:e(Rr,{disablePadding:!0,sx:{px:2,pb:2,bgcolor:"background.paper"},children:Array.isArray(ae.lessons)?ae.lessons.map((Ie,Ke)=>e(xD,{completed:Ie.completed,preview:Ie.isPreview,sx:{bgcolor:"background.paper",px:0,py:1,transform:"none","&:hover":{transform:"none",backgroundColor:"transparent"}},children:o(c,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row-reverse",border:"1px solid rgba(14, 81, 129, 0.2)",borderRadius:2,px:2.5,py:1.5,bgcolor:"background.paper",transition:"all 0.3s ease",opacity:!l.isEnrolled&&!Ie.isPreview?.6:1,"&:hover":{borderColor:"#0e5181",bgcolor:"rgba(14, 81, 129, 0.02)",transform:l.isEnrolled||Ie.isPreview?"translateX(-5px)":"none"}},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.25},children:[e(c,{sx:{display:"flex",alignItems:"center",color:"text.primary",opacity:.95},children:!l.isEnrolled&&!Ie.isPreview?e(oh,{sx:{color:"#e5978b",fontSize:"1.2rem"}}):kr(Ie)}),o(f,{variant:"body2",dir:"rtl",sx:{color:!l.isEnrolled&&!Ie.isPreview?"text.secondary":"text.primary",fontWeight:500},children:[Ie.title,!l.isEnrolled&&!Ie.isPreview&&e(f,{component:"span",variant:"caption",sx:{color:"#e5978b",ml:1,fontSize:"0.7rem"},children:"( )"})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(f,{variant:"caption",sx:{color:"#e5978b",fontWeight:600},children:Ie.duration}),Ie.isPreview&&e(_e,{size:"small",label:" ",sx:{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181",fontSize:"0.7rem",height:20}})]})]})},Ie.id)):null})})]},ae.id)):null})]}),y===2&&o(Qg,{children:[o(c,{sx:{mb:3,p:2,display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,border:"1px solid",borderColor:"divider",borderRadius:2,bgcolor:"background.paper"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Tt,{src:l.instructorAvatar,alt:l.instructor,sx:{width:64,height:64,border:"2px solid",borderColor:"primary.main"}}),o(c,{sx:{textAlign:"right"},children:[e(f,{variant:"subtitle1",fontWeight:700,children:l.instructor}),e(f,{variant:"body2",color:"text.secondary",sx:{mt:.25},children:l.instructorTitle})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ba,{value:l.instructorRating,precision:.1,readOnly:!0,size:"small",emptyIcon:e(uc,{fontSize:"inherit"}),sx:{mr:1}}),o(f,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:[(()=>{const ae=l.instructorRating;if(typeof ae=="number")return ae.toFixed(1);const Fe=parseFloat(ae);return isNaN(Fe)?"0.0":Fe.toFixed(1)})()," / 5.0"]})]}),e(_e,{size:"small",color:"default",variant:"outlined",label:`${((oi=(Nn=l.instructorStudents)==null?void 0:Nn.toLocaleString)==null?void 0:oi.call(Nn))||l.instructorStudents||0} `}),e(_e,{size:"small",color:"default",variant:"outlined",label:`${l.instructorCourses||0} `}),e(re,{variant:"text",size:"small",sx:{textTransform:"none",color:"#0e5181",fontWeight:600,"&:hover":{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181"}},children:"  "})]})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[o(c,{children:[e(xa,{variant:"h5",component:"h2",sx:{mb:.5},children:" "}),o(c,{sx:{display:"flex",alignItems:"center"},children:[e(f,{variant:"h3",component:"span",sx:{mr:1,fontWeight:700},children:(()=>{const ae=l.rating;if(typeof ae=="number")return ae.toFixed(1);if(typeof ae=="string"){const Fe=parseFloat(ae);return isNaN(Fe)?"0.0":Fe.toFixed(1)}else return"0.0"})()}),e(ba,{value:l.rating,precision:.1,readOnly:!0,size:"large",emptyIcon:e(uc,{fontSize:"inherit"}),sx:{mr:1.25}}),o(f,{variant:"body1",color:"text.secondary",sx:{ml:.5},children:["   ",((Ei=l.reviews)==null?void 0:Ei.length)||0," "]})]})]}),e(re,{variant:"contained",startIcon:e(sh,{}),onClick:()=>fe(!0),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontWeight:600,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.2)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.3)",transform:"translateY(-2px)"}},children:" "})]}),o(c,{sx:{mb:4,p:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[e(f,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:" "}),[5,4,3,2,1].map(ae=>{var Fe;return o(c,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[o(c,{sx:{width:80,display:"flex",justifyContent:"space-between",mr:2},children:[o(f,{variant:"body2",fontWeight:500,children:[ae," "]}),e(c,{sx:{width:8}})]}),e(c,{sx:{flexGrow:1,mx:2},children:e(c,{sx:{width:"100%",height:10,bgcolor:"divider",borderRadius:5,overflow:"hidden"},children:e(c,{sx:{height:"100%",width:`${ae/5*100}%`,background:`linear-gradient(90deg, ${a.palette.warning.main} 0%, ${a.palette.warning.light} 100%)`,borderRadius:5}})})}),o(f,{variant:"body2",color:"text.secondary",sx:{minWidth:40,textAlign:"right"},children:[Math.round(ae/5*(((Fe=l.reviews)==null?void 0:Fe.length)||0))," "]})]},ae)})]}),o(c,{children:[Array.isArray(l.reviews)?l.reviews.map(ae=>{var Fe,Ie,Ke;return o(c,{sx:{p:3,mb:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[e(Tt,{src:(Fe=ae.user)==null?void 0:Fe.avatar,alt:(Ie=ae.user)==null?void 0:Ie.name,sx:{width:48,height:48,mr:2}}),o(c,{children:[e(f,{variant:"subtitle1",fontWeight:600,dir:"rtl",children:((Ke=ae.user)==null?void 0:Ke.name)||""}),o(c,{sx:{display:"flex",alignItems:"center"},children:[e(ba,{value:ae.rating,precision:.5,readOnly:!0,size:"small",emptyIcon:e(uc,{fontSize:"inherit"}),sx:{mr:1.25,color:"warning.main"}}),e(f,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:ae.date})]})]})]}),o(xe,{size:"small",color:ae.isLiked?"primary":"default",onClick:()=>qr(ae.id),sx:{"&:hover":{transform:"scale(1.1)"},transition:"all 0.2s ease"},children:[ae.isLiked?e(ya,{color:"error"}):e(lh,{}),e(f,{variant:"body2",sx:{ml:.5},children:ae.likes})]})]}),ae.title&&e(f,{variant:"h6",component:"h3",sx:{mb:1,fontWeight:600},dir:"rtl",children:ae.title}),e(f,{variant:"body1",color:"text.secondary",dir:"rtl",sx:{lineHeight:1.8},children:ae.content})]},ae.id)}):null,e(c,{sx:{display:"flex",justifyContent:"center",mt:4},children:e(re,{variant:"outlined",sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontWeight:600,borderColor:"#0e5181",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"white",borderColor:"#0e5181",transform:"translateY(-2px)"}},children:"   "})})]})]}),y===3&&o(c,{children:[e(xa,{variant:"h5",component:"h2",gutterBottom:!0,children:" "}),e(c,{sx:{mb:4},children:l.faqs&&l.faqs.length>0?l.faqs.map((ae,Fe)=>o(Z5,{elevation:0,sx:{mb:2,border:"1px solid",borderColor:"divider",borderRadius:2,"&:before":{display:"none"},"&.Mui-expanded":{margin:0,"&:not(:last-child)":{borderBottom:0}}},children:[e(J5,{expandIcon:e(Eh,{}),"aria-controls":`faq-panel-${Fe}`,id:`faq-header-${Fe}`,sx:{minHeight:70,"&.Mui-expanded":{minHeight:70,borderBottom:"1px solid",borderColor:"divider"}},children:e(f,{variant:"subtitle1",fontWeight:600,dir:"rtl",children:ae.question})}),e(ew,{children:e(f,{variant:"body1",color:"text.secondary",dir:"rtl",sx:{lineHeight:1.8},children:ae.answer})})]},Fe)):e(f,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",py:4},children:"       ."})})]})]})]})})}),e(bD,{color:"primary","aria-label":"enroll",onClick:ke,sx:{display:{xs:"flex",lg:"none"},position:"fixed",bottom:24,right:24,width:60,height:60,borderRadius:"50%",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{transform:"scale(1.1)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.4)"},transition:"all 0.3s ease"},children:ee?e(qo,{}):e(r0,{})}),Array.isArray(S)&&S.length>0&&o(Xe,{maxWidth:"lg",sx:{pt:1,pb:4,px:{xs:2,sm:3,md:4}},children:[o(c,{sx:{mb:4},children:[e(xa,{variant:"h4",component:"h2",gutterBottom:!0,children:"  "}),e(f,{variant:"body1",color:"text.secondary",sx:{fontSize:"1.1rem",lineHeight:1.6},children:"       "})]}),e(le,{container:!0,spacing:3,justifyContent:"center",children:Array.isArray(S)?S.slice(0,3).map(ae=>{var Fe;return e(le,{xs:12,sm:6,lg:4,children:o(nt,{sx:{height:"100%",cursor:"pointer",borderRadius:3,boxShadow:"0 6px 20px rgba(14, 81, 129, 0.08)",border:"1px solid",borderColor:"rgba(14, 81, 129, 0.08)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%)",backdropFilter:"blur(10px)",maxWidth:"400px",mx:"auto","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 15px 35px rgba(14, 81, 129, 0.15)",borderColor:"rgba(14, 81, 129, 0.2)"}},onClick:()=>n(`/courses/${ae.id}`),children:[e(c,{sx:{position:"relative",overflow:"hidden"},children:o(c,{sx:{width:"100%",height:180,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e("img",{src:ae.image||ae.thumbnail||"https://source.unsplash.com/random/400x200?programming",alt:ae.title,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.4s ease"},onMouseEnter:Ie=>Ie.target.style.transform="scale(1.1)",onMouseLeave:Ie=>Ie.target.style.transform="scale(1)"}),e(c,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.3) 0%, rgba(229, 151, 139, 0.3) 100%)",opacity:0,transition:"opacity 0.3s ease","&:hover":{opacity:1}}}),e(_e,{label:ae.category||" ",size:"small",sx:{position:"absolute",top:16,right:16,bgcolor:"rgba(255,255,255,0.9)",color:"#0e5181",fontWeight:600,fontSize:"0.7rem",backdropFilter:"blur(10px)"}}),e(xe,{size:"small",sx:{position:"absolute",top:16,left:16,bgcolor:"rgba(255,255,255,0.9)",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"white",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:e(jc,{fontSize:"small"})})]})}),o(pt,{sx:{p:2.5},children:[e(f,{variant:"h6",component:"h3",sx:{fontWeight:700,lineHeight:1.3,mb:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",fontSize:"1rem",color:"#0e5181"},dir:"rtl",children:ae.title}),o(c,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[e(Tt,{src:ae.instructorAvatar||((Fe=ae.instructor)==null?void 0:Fe.avatar),alt:ae.instructor,sx:{width:28,height:28,mr:1,border:"2px solid #e5978b"}}),e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem"},children:ae.instructor||" "})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1.5,gap:1.5},children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[e(P1,{fontSize:"small",sx:{color:"#0e5181",mr:.5}}),o(f,{variant:"caption",color:"text.secondary",children:[ae.lectures||4," "]})]}),o(c,{sx:{display:"flex",alignItems:"center"},children:[e(b6,{fontSize:"small",sx:{color:"#e5978b",mr:.5}}),o(f,{variant:"caption",color:"text.secondary",children:[ae.students||6," "]})]})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[e(ba,{value:(()=>{const Ie=ae.rating;if(typeof Ie=="number")return Ie;if(typeof Ie=="string"){const Ke=parseFloat(Ie);return isNaN(Ke)?0:Ke}else return 0})(),precision:.5,readOnly:!0,size:"small",emptyIcon:e(uc,{fontSize:"inherit"}),sx:{mr:1.25,"& .MuiRating-iconFilled":{color:"#e5978b"}}}),o(f,{variant:"caption",color:"text.secondary",sx:{ml:.5},children:[(()=>{const Ie=ae.rating;if(typeof Ie=="number")return Ie.toFixed(1);if(typeof Ie=="string"){const Ke=parseFloat(Ie);return isNaN(Ke)?"0.0":Ke.toFixed(1)}else return"0.0"})(),"/5.00"]})]}),o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o(f,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:700,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:[(()=>{const Ie=ae.price;if(typeof Ie=="number")return Ie.toFixed(2);if(typeof Ie=="string"){const Ke=parseFloat(Ie);return isNaN(Ke)?"0.00":Ke.toFixed(2)}else return"0.00"})()," ."]}),e(re,{variant:"outlined",size:"small",sx:{borderColor:"#0e5181",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"white",borderColor:"#0e5181"},borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.8rem",px:2,py:.5},children:" "})]})]})]})},ae.id)}):null})]}),e(wr,{open:ue,onClose:()=>fe(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(14, 81, 129, 0.1)",direction:"rtl"}},children:o(vr,{sx:{p:4,direction:"rtl"},children:[e(f,{variant:"h5",component:"h2",sx:{mb:3,fontWeight:700,textAlign:"center"},children:" "}),o(c,{sx:{mb:3},children:[e(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600,textAlign:"right"},children:" "}),e(c,{sx:{display:"flex",justifyContent:"flex-end"},children:e(ba,{value:de.rating,onChange:(ae,Fe)=>{hn("rating",Fe)},size:"large",sx:{direction:"ltr","& .MuiRating-iconFilled":{color:"#e5978b"},"& .MuiRating-iconHover":{color:"#e5978b"}}})})]}),o(c,{sx:{mb:3},children:[e(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600,textAlign:"right"},children:" ()"}),e("textarea",{value:de.comment,onChange:ae=>hn("comment",ae.target.value),placeholder:"   ...",style:{width:"100%",minHeight:"120px",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",direction:"rtl",textAlign:"right"}})]}),o(c,{sx:{display:"flex",gap:2,justifyContent:"flex-start",flexDirection:"row-reverse"},children:[e(re,{variant:"outlined",onClick:()=>fe(!1),disabled:se,sx:{borderColor:"#0e5181",color:"#0e5181","&:hover":{borderColor:"#e5978b",color:"#e5978b"},borderRadius:2,textTransform:"none",fontWeight:600},children:""}),e(re,{variant:"contained",onClick:zi,disabled:se||!de.comment.trim(),endIcon:se?e(Qe,{size:20,color:"inherit"}):null,sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)"},borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:se?" ...":" "})]})]})}),e(c,{sx:{mt:"auto"},children:e(Bn,{})})]})},SD=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:t.palette.background.paper,marginTop:t.spacing(3),border:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{padding:t.spacing(4)}})),Wo=te(ze)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:t.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}})),CD=te(re)(({theme:t})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}})),kD=te("div")(({theme:t,isDragActive:n})=>({border:`2px dashed ${n?t.palette.primary.main:t.palette.divider}`,borderRadius:"8px",padding:t.spacing(3),textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:n?"rgba(25, 118, 210, 0.05)":t.palette.background.paper,"&:hover":{borderColor:t.palette.primary.main,backgroundColor:"rgba(25, 118, 210, 0.03)"},[t.breakpoints.down("sm")]:{padding:t.spacing(2)}})),_D=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}],AD=[{value:"ar",label:""},{value:"en",label:"English"},{value:"fr",label:"Franais"}],zD=()=>{const t=jt(),n=ct(),[a,l]=w.useState(0),[d,p]=w.useState(!1),[h,x]=w.useState(!1),[m,y]=w.useState([]),[v,S]=w.useState({open:!1,message:"",severity:"success"}),[C,_]=w.useState({title:"",subtitle:"",description:"",short_description:"",level:"beginner",language:"ar",category:"",tags:[],is_free:!1,price:0,discount_price:null,status:"published",is_featured:!1,is_certified:!1,image:null,promotional_video:"",syllabus_pdf:null,materials_pdf:null}),[z,R]=w.useState("");w.useEffect(()=>{$(null,null,function*(){try{const N=yield An.getCategories();console.log("Categories API response:",N);const Y=Array.isArray(N)?N:N.results?N.results:N.data?N.data:[];console.log("Processed categories array:",Y),y(Y)}catch(N){console.error("Error fetching categories:",N),S({open:!0,message:"   ",severity:"error"}),y([])}})},[]);const B=H=>{const{name:N,value:Y,type:E,checked:I}=H.target;_(A=>oe(X({},A),{[N]:E==="checkbox"?I:Y}))},T=(H,N)=>{const Y=H.target.files[0];Y&&_(E=>oe(X({},E),{[N]:Y}))},O=()=>{z.trim()&&!C.tags.includes(z.trim())&&(_(H=>oe(X({},H),{tags:[...H.tags,z.trim()]})),R(""))},q=H=>{_(N=>oe(X({},N),{tags:N.tags.filter(Y=>Y!==H)}))},j=H=>$(null,null,function*(){var N,Y,E,I,A;if(H.preventDefault(),a===G.length-1){x(!0);try{console.log("Submitting course data:",C);const Q=yield An.createCourse(C);console.log("Course created successfully:",Q),S({open:!0,message:"   !     ...",severity:"success"}),setTimeout(()=>{n("/teacher/my-courses")},2e3)}catch(Q){if(console.error("Error creating course:",Q),((N=Q.response)==null?void 0:N.status)===500)try{const P=yield An.getCourses();if((Array.isArray(P)?P:P.results?P.results:P.data?P.data:[]).find(fe=>fe.title===C.title&&fe.subtitle===C.subtitle)){S({open:!0,message:"   !     ...",severity:"success"}),setTimeout(()=>{n("/teacher/my-courses")},2e3);return}}catch(P){console.error("Error fetching courses to verify creation:",P)}const J=((E=(Y=Q.response)==null?void 0:Y.data)==null?void 0:E.message)||((A=(I=Q.response)==null?void 0:I.data)==null?void 0:A.detail)||Q.message||"   ";S({open:!0,message:`${J} -         `,severity:"error"})}finally{x(!1)}}else W()}),ee=H=>{H.preventDefault(),p(!0)},V=()=>{p(!1)},L=(H,N)=>{H.preventDefault(),p(!1);const Y=H.dataTransfer.files[0];Y&&_(E=>oe(X({},E),{[N]:Y}))},k=H=>{switch(H){case 0:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e(Wo,{fullWidth:!0,label:" ",name:"title",value:C.title,onChange:B,variant:"outlined",required:!0,size:"medium",sx:{mb:2}}),e(Wo,{fullWidth:!0,label:" ",name:"subtitle",value:C.subtitle,onChange:B,variant:"outlined",multiline:!0,rows:2,sx:{mb:2}}),e(Wo,{fullWidth:!0,label:" ",name:"description",value:C.description,onChange:B,variant:"outlined",multiline:!0,rows:6,sx:{mb:3}}),o(c,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",sm:"row"}},children:[o(Wt,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(Ot,{children:" "}),e(Bt,{name:"level",value:C.level,onChange:B,label:" ",sx:{textAlign:"right"},children:_D.map(N=>e(We,{value:N.value,children:N.label},N.value))})]}),o(Wt,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(Ot,{children:""}),e(Bt,{name:"language",value:C.language,onChange:B,label:"",sx:{textAlign:"right"},children:AD.map(N=>e(We,{value:N.value,children:N.label},N.value))})]})]})]})]});case 1:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{sx:{mb:2},children:[e(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:" "}),o(kD,{isDragActive:d,onDragOver:ee,onDragLeave:V,onDrop:N=>L(N,"image"),onClick:()=>document.getElementById("image-upload").click(),sx:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:[e("input",{id:"image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:N=>T(N,"image")}),C.image?o(c,{textAlign:"center",width:"100%",children:[e("img",{src:URL.createObjectURL(C.image),alt:"Course preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"}}),e(f,{variant:"body2",color:"textSecondary",children:"      "})]}):o(c,{textAlign:"center",p:3,children:[e(ka,{color:"action",fontSize:"large",sx:{fontSize:48,mb:1}}),e(f,{variant:"body1",sx:{mt:1,mb:1,fontWeight:500},children:"      "}),e(f,{variant:"body2",color:"textSecondary",children:"   1280x720 "})]})]})]}),e(Wo,{fullWidth:!0,label:"   ()",name:"promotional_video",value:C.promotional_video,onChange:B,variant:"outlined",placeholder:"https://www.youtube.com/watch?v=...",InputProps:{startAdornment:e(ji,{color:"action",sx:{ml:1}})},sx:{mb:2}}),o(c,{sx:{mb:2},children:[e(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(c,{children:[e("input",{id:"syllabus-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:N=>T(N,"syllabus_pdf")}),e(re,{component:"label",htmlFor:"syllabus-upload",variant:"outlined",startIcon:e(io,{}),fullWidth:!0,sx:{py:1.5,borderRadius:"8px",justifyContent:"flex-start",textAlign:"right",textTransform:"none"},children:C.syllabus_pdf?` : ${C.syllabus_pdf.name}`:"   (PDF)"})]}),o(c,{children:[e("input",{id:"materials-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:N=>T(N,"materials_pdf")}),e(re,{component:"label",htmlFor:"materials-upload",variant:"outlined",startIcon:e(io,{}),fullWidth:!0,sx:{py:1.5,borderRadius:"8px",justifyContent:"flex-start",textAlign:"right",textTransform:"none"},children:C.materials_pdf?` : ${C.materials_pdf.name}`:"   (PDF)"})]})]})]})]})]});case 2:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(Wt,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(Ot,{children:""}),o(Bt,{name:"category",value:C.category,onChange:B,label:"",sx:{textAlign:"right"},children:[e(We,{value:"",children:e("em",{children:" "})}),Array.isArray(m)&&m.map(N=>e(We,{value:N.id,children:N.name},N.id))]})]}),o(c,{sx:{mb:2},children:[e(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:""}),o(c,{sx:{display:"flex",gap:1,mb:2},children:[e(Wo,{fullWidth:!0,label:"  ",value:z,onChange:N=>R(N.target.value),onKeyPress:N=>N.key==="Enter"&&(N.preventDefault(),O()),variant:"outlined",size:"small",sx:{flex:1}}),e(re,{variant:"contained",onClick:O,startIcon:e(Nr,{}),sx:{minWidth:"100px"},children:""})]}),e(c,{sx:{display:"flex",flexWrap:"wrap",gap:1,minHeight:"42px",border:"1px solid #e0e0e0",borderRadius:"4px",p:1},children:C.tags.length>0?C.tags.map((N,Y)=>e(_e,{label:N,onDelete:()=>q(N),sx:{backgroundColor:t.palette.primary.light,color:t.palette.primary.contrastText,"& .MuiChip-deleteIcon":{color:t.palette.primary.contrastText}}},Y)):e(f,{variant:"body2",color:"textSecondary",sx:{p:1,width:"100%",textAlign:"center"},children:"    "})})]})]})]});case 3:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e(c,{sx:{mb:2},children:e(wt,{control:e(Fi,{checked:C.is_free,onChange:B,name:"is_free",color:"primary"}),label:o(c,{children:[e(f,{variant:"body1",children:"  "}),e(f,{variant:"body2",color:"textSecondary",children:"       "})]}),sx:{m:0}})}),!C.is_free&&o(c,{sx:{display:"flex",flexDirection:"column",gap:2,mb:2,p:2,bgcolor:"#f8f9fa",borderRadius:"8px"},children:[o(c,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e(Wo,{fullWidth:!0,label:" (USD)",name:"price",type:"number",value:C.price,onChange:B,variant:"outlined",size:"medium",InputProps:{startAdornment:e(f,{sx:{ml:1},children:"$"})}}),e(Wo,{fullWidth:!0,label:"  ()",name:"discount_price",type:"number",value:C.discount_price||"",onChange:B,variant:"outlined",size:"medium",InputProps:{startAdornment:e(f,{sx:{ml:1},children:"$"})}})]}),C.price>0&&C.discount_price>0&&e(c,{sx:{textAlign:"center",mt:1},children:o(f,{variant:"body2",color:"text.secondary",children:[" ",Math.round((1-C.discount_price/C.price)*100),"%  "]})})]}),e(Vt,{sx:{my:1}}),e(c,{sx:{mb:2},children:e(wt,{control:e(Fi,{checked:C.is_featured,onChange:B,name:"is_featured",color:"primary"}),label:o(c,{children:[e(f,{variant:"body1",children:" "}),e(f,{variant:"body2",color:"textSecondary",children:"        "})]}),sx:{m:0,alignItems:"flex-start"}})}),e(c,{sx:{mb:2},children:e(wt,{control:e(Fi,{checked:C.is_certified,onChange:B,name:"is_certified",color:"primary"}),label:o(c,{children:[e(f,{variant:"body1",children:"  "}),e(f,{variant:"body2",color:"textSecondary",children:"         "})]}),sx:{m:0,alignItems:"flex-start"}})})]})]});default:return":   "}},G=[" "," "," "," "],W=()=>{l(H=>H+1)},M=()=>{l(H=>H-1)},U=()=>{S(oe(X({},v),{open:!1})),v.severity==="success"&&n("/teacher/my-courses")};return o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{mb:4,display:"flex",alignItems:"center"},children:[e(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:t.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:t.palette.action.hover}},children:e(qt,{})}),e(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:t.palette.primary.main},children:"  "})]}),o(SD,{elevation:0,children:[o(c,{sx:{width:"100%",mb:4,position:"relative"},children:[e(c,{sx:{position:"absolute",top:20,left:"50px",right:"50px",height:"2px",backgroundColor:t.palette.grey[300],zIndex:0},children:e(c,{sx:{height:"100%",backgroundColor:t.palette.primary.main,width:`${a/(G.length-1)*100}%`,transition:"width 0.3s ease"}})}),e(c,{sx:{display:"flex",justifyContent:"space-between",mb:2,position:"relative",zIndex:1},children:G.map((H,N)=>o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,position:"relative"},children:[e(c,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:a>=N?t.palette.primary.main:t.palette.grey[300],color:a>=N?"#fff":t.palette.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,mb:1,position:"relative",border:`2px solid ${t.palette.background.paper}`,boxSizing:"border-box"},children:N+1}),e(f,{variant:"caption",align:"center",sx:{fontSize:"0.75rem",color:a>=N?t.palette.primary.main:t.palette.text.secondary,fontWeight:a===N?600:"normal",maxWidth:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:H})]},H))})]}),o(c,{component:"form",onSubmit:j,children:[k(a),o(c,{sx:{display:"flex",justifyContent:"space-between",mt:4,pt:3,borderTop:`1px solid ${t.palette.divider}`},children:[e(re,{disabled:a===0,onClick:M,sx:{minWidth:"120px",borderRadius:"12px",textTransform:"none",fontWeight:600},children:""}),e(CD,{variant:"contained",color:"primary",type:"submit",disabled:h,startIcon:h?e(Qe,{size:20,color:"inherit"}):a===G.length-1?e(os,{}):null,sx:{minWidth:a===G.length-1?"200px":"120px",textTransform:"none",fontWeight:600},children:h?" ...":a===G.length-1?" ":""})]})]})]}),e(un,{open:v.open,autoHideDuration:v.severity==="success"?6e3:4e3,onClose:U,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:U,severity:v.severity,sx:{width:"100%"},action:e(re,{color:"inherit",size:"small",onClick:()=>n("/teacher/my-courses"),sx:{fontWeight:600},children:v.severity==="success"?" ":" "}),children:v.message})})]})},ED=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:t.palette.background.paper,marginTop:t.spacing(3),border:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{padding:t.spacing(4)}})),$o=te(ze)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:t.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}}));te(re)(({theme:t})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}}));const RD=te("div")(({theme:t,isDragActive:n})=>({border:`2px dashed ${n?t.palette.primary.main:t.palette.divider}`,borderRadius:"8px",padding:t.spacing(3),textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:n?"rgba(25, 118, 210, 0.05)":t.palette.background.paper,"&:hover":{borderColor:t.palette.primary.main,backgroundColor:"rgba(25, 118, 210, 0.03)"},[t.breakpoints.down("sm")]:{padding:t.spacing(2)}})),g5=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}],TD=[{value:"ar",label:""},{value:"en",label:"English"},{value:"fr",label:"Franais"}],qu=[" "," "," "," "],MD=()=>{const t=jt(),n=ct(),{id:a}=cr(),[l,d]=w.useState(0),[p,h]=w.useState(!1),[x,m]=w.useState(!0),[y,v]=w.useState(!1),[S,C]=w.useState(null),[_,z]=w.useState(null),[R,B]=w.useState([]),[T,O]=w.useState({id:a,title:"",subtitle:"",description:"",shortDescription:"",level:"beginner",language:"ar",category:"",tags:[],isFree:!1,price:0,discountPrice:null,status:"draft",isFeatured:!1,isCertified:!1,image:null,promotionalVideo:"",syllabusPdf:null,materialsPdf:null}),[q,j]=w.useState("");w.useEffect(()=>{a?$(null,null,function*(){var A,Q,J,P,ie,ue,fe;try{m(!0),C(null);const de=yield An.getCategories(),K=Array.isArray(de)?de:de.results?de.results:de.data?de.data:[];if(B(K),a){const ve=yield An.getCourse(a);O({id:ve.id,title:ve.title||"",subtitle:ve.subtitle||"",description:ve.description||"",shortDescription:ve.short_description||"",level:ve.level||"beginner",language:ve.language||"ar",category:((A=ve.category)==null?void 0:A.id)||"",tags:((Q=ve.tags)==null?void 0:Q.map(ge=>ge.name))||[],isFree:ve.is_free||!1,price:ve.price||0,discountPrice:ve.discount_price||null,status:ve.status||"draft",isFeatured:ve.is_featured||!1,isCertified:ve.is_certified||!1,image:null,promotionalVideo:ve.promotional_video||"",syllabusPdf:null,materialsPdf:null,imageUrl:ve.image,syllabusPdfUrl:ve.syllabus_pdf,materialsPdfUrl:ve.materials_pdf})}}catch(de){console.error("Error fetching data:",de);let K="     .    .";((J=de.response)==null?void 0:J.status)===404?K="     .":((P=de.response)==null?void 0:P.status)===403?K="      .":((ie=de.response)==null?void 0:ie.status)===500?K="   .     .":(fe=(ue=de.response)==null?void 0:ue.data)!=null&&fe.detail?K=de.response.data.detail:de.message&&(K=de.message),C(K)}finally{m(!1)}}):(m(!1),C("   "))},[a]);const ee=I=>{const{name:A,value:Q,type:J,checked:P}=I.target;O(ie=>oe(X({},ie),{[A]:J==="checkbox"?P:Q}))},V=(I,A)=>{const Q=I.target.files[0];Q&&O(J=>oe(X({},J),{[A]:Q}))},L=()=>{q.trim()&&!T.tags.includes(q.trim())&&(O(I=>oe(X({},I),{tags:[...I.tags,q.trim()]})),j(""))},k=I=>{O(A=>oe(X({},A),{tags:A.tags.filter(Q=>Q!==I)}))},G=()=>{d(I=>I+1)},W=()=>{d(I=>I-1)},M=I=>$(null,null,function*(){var A,Q,J,P,ie,ue,fe;if(I.preventDefault(),l===qu.length-1)try{if(v(!0),C(null),!T.title.trim()){C("  ");return}if(!T.description.trim()){C("  ");return}if(!T.isFree&&(!T.price||T.price<=0)){C("    ");return}if(T.discountPrice&&T.discountPrice>=T.price){C("        ");return}const de={title:T.title.trim(),subtitle:T.subtitle.trim(),description:T.description.trim(),short_description:T.shortDescription.trim(),level:T.level,language:T.language,category:T.category||null,tags:T.tags,is_free:T.isFree,price:T.isFree?0:T.price,discount_price:T.isFree?null:T.discountPrice,status:T.status,is_featured:T.isFeatured,is_certified:T.isCertified,promotional_video:T.promotionalVideo.trim()};T.image instanceof File&&(de.image=T.image),T.syllabusPdf instanceof File&&(de.syllabus_pdf=T.syllabusPdf),T.materialsPdf instanceof File&&(de.materials_pdf=T.materialsPdf);const K=yield An.updateCourse(a,de);console.log("Course updated successfully:",K),z("   !"),console.log("Success message set"),setTimeout(()=>{console.log("Navigating to /teacher/my-courses"),n("/teacher/my-courses")},2e3)}catch(de){console.error("Error updating course:",de);let K="    .    .";((A=de.response)==null?void 0:A.status)===404?K="     .":((Q=de.response)==null?void 0:Q.status)===403?K="     .":((J=de.response)==null?void 0:J.status)===400?K=((P=de.response.data)==null?void 0:P.detail)||"  .     .":((ie=de.response)==null?void 0:ie.status)===500?K="   .     .":(fe=(ue=de.response)==null?void 0:ue.data)!=null&&fe.detail?K=de.response.data.detail:de.message&&(K=de.message),C(K)}finally{v(!1)}else G()}),U=I=>{I.preventDefault(),h(!0)},H=()=>{h(!1)},N=(I,A)=>{I.preventDefault(),h(!1);const Q=I.dataTransfer.files[0];Q&&O(J=>oe(X({},J),{[A]:Q}))},Y=()=>{C(null),z(null)};w.useEffect(()=>{_&&console.log("Success state updated:",_)},[_]);const E=I=>{var A;switch(I){case 0:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e($o,{fullWidth:!0,label:" ",name:"title",value:T.title,onChange:ee,variant:"outlined",required:!0,size:"medium",sx:{mb:2}}),e($o,{fullWidth:!0,label:" ",name:"subtitle",value:T.subtitle,onChange:ee,variant:"outlined",multiline:!0,rows:2,sx:{mb:2}}),e($o,{fullWidth:!0,label:" ",name:"description",value:T.description,onChange:ee,variant:"outlined",multiline:!0,rows:6,sx:{mb:3}}),o(c,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",sm:"row"}},children:[o(Wt,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(Ot,{children:" "}),e(Bt,{name:"level",value:T.level,onChange:ee,label:" ",sx:{textAlign:"right"},children:g5.map(Q=>e(We,{value:Q.value,children:Q.label},Q.value))})]}),o(Wt,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(Ot,{children:""}),e(Bt,{name:"language",value:T.language,onChange:ee,label:"",sx:{textAlign:"right"},children:TD.map(Q=>e(We,{value:Q.value,children:Q.label},Q.value))})]})]}),o(Wt,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[e(Ot,{children:""}),o(Bt,{name:"category",value:T.category,onChange:ee,label:"",sx:{textAlign:"right"},children:[e(We,{value:"",children:e("em",{children:" "})}),Array.isArray(R)&&R.map(Q=>e(We,{value:Q.id,children:Q.name},Q.id))]})]}),o(c,{sx:{mb:2},children:[e(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:" "}),o(c,{sx:{display:"flex",gap:1,mb:1,flexDirection:"row-reverse"},children:[e($o,{fullWidth:!0,placeholder:"  ",value:q,onChange:Q=>j(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&(Q.preventDefault(),L()),size:"small",sx:{flexGrow:1}}),e(re,{variant:"contained",color:"primary",onClick:L,startIcon:e(Nr,{}),sx:{minWidth:"120px"},children:""})]}),e(c,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:T.tags.map((Q,J)=>e(_e,{label:Q,onDelete:()=>k(Q),sx:{backgroundColor:t.palette.primary.light,color:t.palette.primary.contrastText,"& .MuiChip-deleteIcon":{color:t.palette.primary.contrastText,"&:hover":{color:t.palette.primary.light}}}},J))})]})]})]});case 1:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{sx:{mb:2},children:[e(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:" "}),o(RD,{isDragActive:p,onDragOver:U,onDragLeave:H,onDrop:Q=>N(Q,"image"),onClick:()=>document.getElementById("image-upload").click(),sx:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:[e("input",{id:"image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:Q=>V(Q,"image")}),T.image?o(c,{textAlign:"center",width:"100%",children:[e("img",{src:URL.createObjectURL(T.image),alt:"Course preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"}}),e(f,{variant:"body2",color:"textSecondary",children:"      "})]}):T.imageUrl?o(c,{textAlign:"center",width:"100%",children:[e("img",{src:T.imageUrl,alt:"Course preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"}}),e(f,{variant:"body2",color:"textSecondary",children:"      "})]}):o(c,{textAlign:"center",p:3,children:[e(ka,{color:"action",fontSize:"large",sx:{fontSize:48,mb:1}}),e(f,{variant:"body1",sx:{mt:1,mb:1,fontWeight:500},children:"      "}),e(f,{variant:"body2",color:"textSecondary",children:"   1280x720 "})]})]})]}),e($o,{fullWidth:!0,label:"   ()",name:"promotionalVideo",value:T.promotionalVideo,onChange:ee,variant:"outlined",placeholder:"https://www.youtube.com/watch?v=...",InputProps:{startAdornment:e(ji,{color:"action",sx:{ml:1}})},sx:{mb:2}}),o(c,{sx:{mb:2},children:[e(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(c,{children:[e("input",{id:"syllabus-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:Q=>V(Q,"syllabusPdf")}),e(re,{variant:"outlined",component:"label",startIcon:e(io,{}),onClick:()=>document.getElementById("syllabus-upload").click(),sx:{width:"100%",justifyContent:"flex-start"},children:T.syllabusPdf?T.syllabusPdf.name:T.syllabusPdfUrl?"  (  )":"   (PDF)"})]}),o(c,{children:[e("input",{id:"materials-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:Q=>V(Q,"materialsPdf")}),e(re,{variant:"outlined",component:"label",startIcon:e(io,{}),onClick:()=>document.getElementById("materials-upload").click(),sx:{width:"100%",justifyContent:"flex-start"},children:T.materialsPdf?T.materialsPdf.name:T.materialsPdfUrl?"  (  )":"   (PDF)"})]})]})]})]})]});case 2:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e(wt,{control:e(Fi,{checked:T.isFree,onChange:ee,name:"isFree",color:"primary"}),label:"  ",sx:{mb:2}}),!T.isFree&&o(Rt,{children:[e($o,{fullWidth:!0,label:"  ()",name:"price",type:"number",value:T.price,onChange:ee,variant:"outlined",required:!0,sx:{mb:2},InputProps:{startAdornment:"$"}}),e($o,{fullWidth:!0,label:"  ()",name:"discountPrice",type:"number",value:T.discountPrice||"",onChange:ee,variant:"outlined",sx:{mb:2},InputProps:{startAdornment:"$"},helperText:"       "})]}),e(wt,{control:e(Fi,{checked:T.isCertified,onChange:ee,name:"isCertified",color:"primary"}),label:"   ",sx:{mb:2}}),e(wt,{control:e(Fi,{checked:T.isFeatured,onChange:ee,name:"isFeatured",color:"primary"}),label:"    ",sx:{mb:2}})]})]});case 3:return o(Rt,{children:[e(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:t.palette.primary.main},children:" "}),o(c,{sx:{mb:4},children:[e(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600,color:t.palette.text.primary},children:" "}),e(c,{sx:{backgroundColor:t.palette.background.paper,p:3,borderRadius:2,mb:3},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",pb:1,borderBottom:`1px solid ${t.palette.divider}`},children:[e(f,{variant:"body2",color:"textSecondary",children:":"}),e(f,{variant:"body1",fontWeight:500,children:T.title})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",pb:1,borderBottom:`1px solid ${t.palette.divider}`},children:[e(f,{variant:"body2",color:"textSecondary",children:" :"}),e(f,{variant:"body1",fontWeight:500,sx:{maxWidth:"60%",textAlign:"left"},children:T.subtitle})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",pb:1,borderBottom:`1px solid ${t.palette.divider}`},children:[e(f,{variant:"body2",color:"textSecondary",children:":"}),e(f,{variant:"body1",fontWeight:500,children:(A=g5.find(Q=>Q.value===T.level))==null?void 0:A.label})]}),o(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e(f,{variant:"body2",color:"textSecondary",children:":"}),e(f,{variant:"body1",fontWeight:500,children:T.isFree?"":T.discountPrice?`$${T.discountPrice} (   $${T.price})`:`$${T.price}`})]})]})}),e(c,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:e(re,{variant:"outlined",color:"primary",onClick:()=>d(0),startIcon:e(Tr,{}),children:" "})})]})]});default:return"   "}};return o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{display:"flex",alignItems:"center",mb:3},children:[e(Je,{title:"",children:e(xe,{onClick:()=>n(-1),sx:{ml:2},children:e(qt,{})})}),e(f,{variant:"h4",component:"h1",sx:{fontWeight:700},children:" "})]}),x?e(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:e(Qe,{})}):S?e(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:e(Be,{severity:"error",sx:{maxWidth:600},children:S})}):e("form",{onSubmit:M,children:o(ED,{children:[o(c,{sx:{width:"100%",mb:4,position:"relative"},children:[e(c,{sx:{position:"absolute",top:"40px",left:"20px",right:"20px",height:"2px",backgroundColor:t.palette.grey[300],zIndex:0},children:e(c,{sx:{height:"100%",width:`${l/(qu.length-1)*100}%`,backgroundColor:t.palette.primary.main,transition:"width 0.3s ease"}})}),e(c,{sx:{display:"flex",justifyContent:"space-between",position:"relative"},children:qu.map((I,A)=>o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,position:"relative",zIndex:1,cursor:"pointer"},onClick:()=>d(A),children:[e(c,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:l>=A?t.palette.primary.main:t.palette.grey[300],color:l>=A?"#fff":t.palette.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",mb:1,fontWeight:600,transition:"all 0.3s ease",border:`2px solid ${l>=A?t.palette.primary.main:t.palette.grey[300]}`},children:A+1}),e(f,{variant:"caption",align:"center",sx:{fontSize:"0.75rem",fontWeight:l>=A?600:400,color:l>=A?t.palette.primary.main:t.palette.text.secondary,mt:.5,textAlign:"center",px:1},children:I})]},I))})]}),e(c,{sx:{mb:4},children:E(l)}),o(c,{sx:{display:"flex",justifyContent:"space-between",pt:2},children:[e(re,{disabled:l===0,onClick:W,sx:{mr:1},startIcon:e(qt,{}),children:""}),e(c,{sx:{flex:"1 1 auto"}}),e(re,{variant:"contained",color:"primary",type:"submit",endIcon:y?e(Qe,{size:20}):e(os,{}),disabled:y,sx:{minWidth:"150px"},children:l===qu.length-1?y?" ...":" ":""})]})]})}),e(un,{open:!!S,autoHideDuration:6e3,onClose:Y,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:Y,severity:"error",sx:{width:"100%"},children:S})}),e(un,{open:!!_,autoHideDuration:6e3,onClose:Y,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:Y,severity:"success",sx:{width:"100%"},children:_})})]})},ID=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:t.palette.background.paper,marginTop:t.spacing(3),border:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{padding:t.spacing(4)}})),Gg=te(ze)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:t.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}})),DD=te(re)(({theme:t})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}}));te("div")(({theme:t,isDragActive:n})=>({border:`2px dashed ${n?t.palette.primary.main:t.palette.divider}`,borderRadius:"8px",padding:t.spacing(3),textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:n?"rgba(25, 118, 210, 0.05)":t.palette.background.paper,"&:hover":{borderColor:t.palette.primary.main,backgroundColor:"rgba(25, 118, 210, 0.03)"},[t.breakpoints.down("sm")]:{padding:t.spacing(2)}}));const WD=()=>{const t=jt(),n=ct(),{courseId:a}=cr(),[l,d]=w.useState(!1),[p,h]=w.useState(!1),[x,m]=w.useState(null),[y,v]=w.useState(null),[S,C]=w.useState({open:!1,message:"",severity:"success"}),[_,z]=w.useState({title:"",description:"",duration:"",isPreview:!1,videoFile:null,pdfFile:null,order:1,lessons:[{id:Date.now(),title:"",type:"video",duration:"",content:"",isPreview:!1,resources:[]}]}),R=q=>{const{name:j,value:ee,type:V,checked:L}=q.target;z(k=>oe(X({},k),{[j]:V==="checkbox"?L:ee}))},B=(q,j)=>{z(ee=>oe(X({},ee),{[`${q}File`]:j||null}))};w.useEffect(()=>{a&&$(null,null,function*(){try{const j=yield mr.getModules(a),V=(Array.isArray(j==null?void 0:j.results)?j.results:Array.isArray(j)?j:(j==null?void 0:j.modules)||[]).reduce((L,k)=>typeof k.order=="number"&&k.order>L?k.order:L,0);z(L=>oe(X({},L),{order:V+1}))}catch(j){m("    ")}})},[a]);const T=()=>{C(q=>oe(X({},q),{open:!1}))},O=q=>$(null,null,function*(){var j,ee,V,L,k;q.preventDefault();try{h(!0),v(null);const G={courseId:a,title:_.title,name:_.title,description:_.description,durationMinutes:_.duration?Number(_.duration):0,isActive:!0,status:"published",order:_.order};_.videoFile&&(G.videoFile=_.videoFile),_.pdfFile&&(G.pdfFile=_.pdfFile);const W=yield mr.createModule(G);console.log("Module created:",W),C({open:!0,message:"   !     ...",severity:"success"}),setTimeout(()=>{n(`/teacher/courses/${a}/units`)},2e3)}catch(G){console.error("Error creating module:",G);let W="  .    .";try{typeof((j=G==null?void 0:G.response)==null?void 0:j.data)=="string"?W=G.response.data:(V=(ee=G==null?void 0:G.response)==null?void 0:ee.data)!=null&&V.detail?W=G.response.data.detail:(k=(L=G==null?void 0:G.response)==null?void 0:L.data)!=null&&k.error&&(W=G.response.data.error)}catch(M){}v(W)}finally{h(!1)}});return o(Xe,{maxWidth:"lg",sx:{py:4},children:[y&&e(Be,{severity:"error",sx:{mb:2},children:y}),o(c,{sx:{mb:4,display:"flex",alignItems:"center"},children:[e(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:t.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:t.palette.action.hover}},children:e(qt,{})}),e(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:t.palette.primary.main},children:"  "})]}),e(ID,{elevation:0,children:o(c,{component:"form",onSubmit:O,sx:{display:"flex",flexDirection:"column",gap:3},children:[e(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:t.palette.primary.main},children:"  "}),e(Gg,{fullWidth:!0,label:" ",name:"title",value:_.title,onChange:R,variant:"outlined",required:!0,size:"medium"}),e(Gg,{fullWidth:!0,label:" ",name:"description",value:_.description,onChange:R,variant:"outlined",multiline:!0,rows:4}),e(Gg,{fullWidth:!0,label:"  ()",name:"duration",type:"number",value:_.duration,onChange:R,variant:"outlined",size:"medium",InputProps:{endAdornment:e(Vr,{position:"end",children:""})}}),o(c,{children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:""}),_.videoFile?o(c,{children:[e("video",{src:URL.createObjectURL(_.videoFile),controls:!0,style:{width:"100%",maxHeight:360,borderRadius:8,border:`1px solid ${t.palette.divider}`}}),o(c,{sx:{mt:1,display:"flex",gap:1},children:[e(_e,{label:_.videoFile.name,size:"small"}),e(re,{color:"error",onClick:()=>B("video",null),children:" "})]})]}):o(re,{component:"label",variant:"outlined",startIcon:e(Zs,{}),disabled:p,children:["  (MP4)",e("input",{hidden:!0,type:"file",accept:"video/*",onChange:q=>B("video",q.target.files&&q.target.files.length?q.target.files[0]:null)})]})]}),o(c,{children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:" PDF"}),_.pdfFile?o(c,{children:[e(c,{sx:{position:"relative",border:`1px solid ${t.palette.divider}`,borderRadius:1,overflow:"hidden"},children:e("iframe",{title:"pdf-preview",src:URL.createObjectURL(_.pdfFile),style:{width:"100%",height:480,border:0}})}),o(c,{sx:{mt:1,display:"flex",gap:1,alignItems:"center"},children:[e(_e,{label:_.pdfFile.name,size:"small"}),e(re,{component:"a",href:URL.createObjectURL(_.pdfFile),target:"_blank",rel:"noopener noreferrer",children:"  "}),e(re,{color:"error",onClick:()=>B("pdf",null),children:" "})]})]}):o(re,{component:"label",variant:"outlined",startIcon:e(Zs,{}),children:["  PDF",e("input",{hidden:!0,type:"file",accept:"application/pdf",onChange:q=>B("pdf",q.target.files&&q.target.files.length?q.target.files[0]:null)})]})]}),e(wt,{control:e(Fi,{checked:_.isPreview,onChange:R,name:"isPreview",color:"primary"}),label:" "}),e(c,{sx:{display:"flex",justifyContent:"flex-end",pt:1},children:e(DD,{variant:"contained",color:"primary",type:"submit",disabled:p,children:" "})})]})}),e(un,{open:S.open,autoHideDuration:6e3,onClose:T,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:T,severity:S.severity,sx:{width:"100%"},action:e(re,{color:"inherit",size:"small",onClick:()=>n(`/teacher/courses/${a}/units`),sx:{fontWeight:600},children:" "}),children:S.message})})]})},$D=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:t.palette.background.paper,marginTop:t.spacing(3),border:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{padding:t.spacing(4)}}));te(nt)(({theme:t})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease",border:`1px solid ${t.palette.divider}`,maxWidth:320,marginInline:"auto","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",borderColor:t.palette.primary.main}}));te(re)(({theme:t})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}));const LD=()=>{const t=jt(),n=ct(),{courseId:a}=cr(),[l,d]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(""),[y,v]=w.useState("all"),[S,C]=w.useState("order"),[_,z]=w.useState(null),[R,B]=w.useState(!1),[T,O]=w.useState(!1),[q,j]=w.useState(null),[ee,V]=w.useState({open:!1,message:"",severity:"success"}),[L,k]=w.useState(0),[G,W]=w.useState(10);w.useEffect(()=>{$(null,null,function*(){h(!0);try{const se=yield mr.getModules(a),ge=(Array.isArray(se==null?void 0:se.results)?se.results:Array.isArray(se)?se:(se==null?void 0:se.modules)||[]).map(ke=>({id:ke.id,title:ke.name||"",description:ke.description||"",duration:typeof ke.video_duration=="number"?Math.round(ke.video_duration/60):0,order:ke.order,status:ke.status||(ke.is_active?"published":"draft"),isPreview:ke.is_active===!1,lessonsCount:Array.isArray(ke.lessons)?ke.lessons.length:ke.lessons_count||0,completedLessons:0,createdAt:ke.created_at,updatedAt:ke.updated_at}));d(ge)}catch(se){console.error("Error fetching units:",se),V({open:!0,message:"    ",severity:"error"})}finally{h(!1)}})},[a]);const M=(K,se)=>{j(K.currentTarget),z(se)},U=()=>{j(null),z(null)},H=K=>{U(),K&&n(`/teacher/courses/${a}/units/${K.id}/edit`)},N=K=>{U(),K&&n(`/teacher/courses/${a}/units/${K.id}`)},Y=K=>{U(),K&&n(`/teacher/courses/${a}/units/${K.id}/lessons`)},E=()=>{U(),B(!0)},I=()=>{_&&(d(K=>K.filter(se=>se.id!==_.id)),V({open:!0,message:"   ",severity:"success"})),B(!1),z(null)},A=()=>{n(`/teacher/courses/${a}/units/new`)},Q=K=>{switch(K){case"published":return"success";case"draft":return"warning";case"archived":return"default";default:return"default"}},J=K=>{switch(K){case"published":return"";case"draft":return"";case"archived":return"";default:return" "}},ie=[...l.filter(K=>{const se=K.title.toLowerCase().includes(x.toLowerCase())||K.description.toLowerCase().includes(x.toLowerCase()),ve=y==="all"||K.status===y;return se&&ve})].sort((K,se)=>{switch(S){case"order":return K.order-se.order;case"title":return K.title.localeCompare(se.title);case"duration":return se.duration-K.duration;case"created":return new Date(se.createdAt)-new Date(K.createdAt);default:return K.order-se.order}}),ue=K=>e(en,{}),fe=(K,se)=>{k(se)},de=K=>{W(parseInt(K.target.value,10)),k(0)};return o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),e(c,{sx:{position:"relative",zIndex:2},children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(xe,{onClick:()=>n("/teacher/my-courses"),sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"}},children:e(qt,{})}),o(c,{children:[e(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"white"},children:" "}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"   "})]})]}),o(c,{sx:{display:"flex",gap:2},children:[e(re,{variant:"contained",startIcon:e(tw,{}),onClick:A,sx:{background:"linear-gradient(45deg, #0e5181 30%, #e5978b 90%)",color:"white",borderRadius:"25px",px:3,py:1.5,fontWeight:600,textTransform:"none",fontSize:"0.95rem",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.3)",border:"none","&:hover":{background:"linear-gradient(45deg, #0a3f66 30%, #d88a7e 90%)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"  "}),_&&e(re,{variant:"outlined",startIcon:e(Gu,{}),onClick:()=>Y(_),sx:{borderColor:"rgba(255,255,255,0.4)",color:"white",borderRadius:"25px",px:3,py:1.5,fontWeight:600,textTransform:"none",fontSize:"0.95rem",backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)","&:hover":{borderColor:"white",backgroundColor:"rgba(255,255,255,0.2)",transform:"translateY(-2px)",boxShadow:"0 4px 15px rgba(255,255,255,0.2)"},transition:"all 0.3s ease"},children:""})]})]})})]}),o($D,{elevation:0,children:[o(c,{sx:{display:"flex",gap:2,mb:3,flexDirection:{xs:"column",md:"row"}},children:[e(ze,{fullWidth:!0,placeholder:"  ...",value:x,onChange:K=>m(K.target.value),InputProps:{startAdornment:e(lo,{sx:{color:"text.secondary",mr:1}})},sx:{minWidth:300}}),o(Wt,{sx:{minWidth:150},children:[e(Ot,{children:""}),o(Bt,{value:y,onChange:K=>v(K.target.value),label:"",children:[e(We,{value:"all",children:""}),e(We,{value:"published",children:""}),e(We,{value:"draft",children:""}),e(We,{value:"archived",children:""})]})]}),o(Wt,{sx:{minWidth:150},children:[e(Ot,{children:" "}),o(Bt,{value:S,onChange:K=>C(K.target.value),label:" ",children:[e(We,{value:"order",children:""}),e(We,{value:"title",children:""}),e(We,{value:"duration",children:""}),e(We,{value:"created",children:" "})]})]})]}),p?e(c,{sx:{display:"flex",justifyContent:"center",py:4},children:e(Sr,{sx:{width:"100%"}})}):ie.length===0?o(c,{sx:{textAlign:"center",py:4},children:[e(f,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"  "}),e(f,{variant:"body2",color:"textSecondary",children:x||y!=="all"?"   ":"    "})]}):o(Rt,{children:[e(ni,{component:De,sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:o(ei,{children:[e(ti,{children:o(or,{sx:{backgroundColor:t.palette.primary.main},children:[e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:" "}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""})]})}),e(ri,{children:ie.slice(L*G,L*G+G).map(K=>o(or,{hover:!0,sx:{"&:hover":{backgroundColor:"action.hover"}},children:[e(be,{sx:{py:2,px:3},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Tt,{sx:{bgcolor:t.palette.primary.main,width:48,height:48,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:ue()}),o(c,{sx:{minWidth:0,flex:1},children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,lineHeight:1.2},children:K.title}),o(f,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem"},children:[": ",K.order]})]})]})}),e(be,{sx:{py:2,px:3},children:e(f,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.4},children:K.description||"  "})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e(dn,{sx:{fontSize:18,color:"text.secondary"}}),o(f,{variant:"body2",sx:{fontWeight:500},children:[K.duration," "]})]})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e(en,{sx:{fontSize:18,color:"text.secondary"}}),o(f,{variant:"body2",sx:{fontWeight:500},children:[K.lessonsCount," "]})]})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[e(_e,{label:J(K.status),color:Q(K.status),size:"small",variant:"outlined",sx:{fontWeight:600,minWidth:70}}),K.isPreview&&e(_e,{label:"",color:"primary",size:"small",variant:"outlined",sx:{fontWeight:600,minWidth:70}})]})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{width:120,mx:"auto"},children:[e(Sr,{variant:"determinate",value:K.lessonsCount?K.completedLessons/K.lessonsCount*100:0,sx:{height:8,borderRadius:4,mb:1,backgroundColor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:4}}}),o(f,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem"},children:[K.completedLessons,"  ",K.lessonsCount]})]})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>N(K),sx:{color:"primary.main",backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Lr,{fontSize:"small"})})}),e(Je,{title:"",children:e(xe,{size:"small",onClick:()=>Y(K),sx:{color:"success.main",backgroundColor:"rgba(76, 175, 80, 0.1)","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Gu,{fontSize:"small"})})}),e(Je,{title:"",children:e(xe,{size:"small",onClick:()=>H(K),sx:{color:"warning.main",backgroundColor:"rgba(255, 152, 0, 0.1)","&:hover":{backgroundColor:"rgba(255, 152, 0, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Tr,{fontSize:"small"})})}),e(Je,{title:"",children:e(xe,{size:"small",onClick:se=>M(se,K),sx:{backgroundColor:"rgba(158, 158, 158, 0.1)","&:hover":{backgroundColor:"rgba(158, 158, 158, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(K0,{fontSize:"small"})})})]})})]},K.id))})]})}),e(Ea,{component:"div",count:ie.length,page:L,onPageChange:fe,rowsPerPage:G,onRowsPerPageChange:de,labelRowsPerPage:"  :",labelDisplayedRows:({from:K,to:se,count:ve})=>`${K}-${se}  ${ve}`})]})]}),o(Fc,{anchorEl:q,open:!!q,onClose:U,PaperProps:{sx:{borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"}},children:[o(We,{onClick:()=>N(_),children:[e(fr,{children:e(Lr,{fontSize:"small"})}),e(Ut,{children:" "})]}),o(We,{onClick:()=>Y(_),children:[e(fr,{children:e(Gu,{fontSize:"small"})}),e(Ut,{children:""})]}),o(We,{onClick:()=>H(_),children:[e(fr,{children:e(Tr,{fontSize:"small"})}),e(Ut,{children:" "})]}),e(Vt,{}),o(We,{onClick:E,sx:{color:"error.main"},children:[e(fr,{children:e(tn,{fontSize:"small",color:"error"})}),e(Ut,{children:" "})]})]}),o(wr,{open:R,onClose:()=>B(!1),PaperProps:{sx:{borderRadius:"12px"}},children:[e(Wr,{children:" "}),e(vr,{children:o(f,{children:['      "',_==null?void 0:_.title,'"      .']})}),o($r,{children:[e(re,{onClick:()=>B(!1),children:""}),e(re,{onClick:I,color:"error",variant:"contained",children:""})]})]}),e(un,{open:ee.open,autoHideDuration:6e3,onClose:()=>V(oe(X({},ee),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:e(Be,{onClose:()=>V(oe(X({},ee),{open:!1})),severity:ee.severity,sx:{width:"100%"},children:ee.message})})]})},OD=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:t.palette.background.paper,marginTop:t.spacing(3),border:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{padding:t.spacing(4)}})),Xg=te(ze)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:t.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}})),BD=te(re)(({theme:t})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}})),FD=()=>{const t=jt(),n=ct(),{courseId:a,unitId:l}=cr(),[d,p]=w.useState(!0),[h,x]=w.useState(!1),[m,y]=w.useState({open:!1,message:"",severity:"success"}),[v,S]=w.useState({title:"",description:"",duration:"",isPreview:!1,videoFile:null,videoUrl:"",pdfFile:null,pdfUrl:""});w.useEffect(()=>{l&&$(null,null,function*(){p(!0);try{const B=yield mr.getModuleById(l);S(T=>oe(X({},T),{title:(B==null?void 0:B.name)||"",description:(B==null?void 0:B.description)||"",duration:typeof(B==null?void 0:B.video_duration)=="number"?Math.round(B.video_duration/60):"",isPreview:!(B!=null&&B.is_active),videoUrl:(B==null?void 0:B.video)||"",pdfUrl:(B==null?void 0:B.pdf)||""}))}catch(B){console.error("Error fetching unit data:",B),y({open:!0,message:"     ",severity:"error"})}finally{p(!1)}})},[l]);const C=R=>{const{name:B,value:T,type:O,checked:q}=R.target;S(j=>oe(X({},j),{[B]:O==="checkbox"?q:T}))},_=(R,B)=>{S(T=>X(X(oe(X({},T),{[`${R}File`]:B||null}),R==="video"?{videoUrl:B?"":T.videoUrl}:{}),R==="pdf"?{pdfUrl:B?"":T.pdfUrl}:{}))},z=R=>$(null,null,function*(){R.preventDefault(),x(!0);try{const B={title:v.title,name:v.title,description:v.description,durationMinutes:v.duration?Number(v.duration):void 0,status:v.isPreview?"draft":void 0,videoFile:v.videoFile,pdfFile:v.pdfFile};yield mr.updateModule(l,B),y({open:!0,message:"      !",severity:"success"}),n(`/teacher/courses/${a}/units`)}catch(B){console.error("Error saving unit:",B),y({open:!0,message:"    ",severity:"error"})}finally{x(!1)}});return d?e(Xe,{maxWidth:"lg",sx:{py:4},children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})})}):o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{mb:4,display:"flex",alignItems:"center"},children:[e(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:t.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:t.palette.action.hover}},children:e(qt,{})}),e(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:t.palette.primary.main},children:" "})]}),e(OD,{elevation:0,children:o(c,{component:"form",onSubmit:z,sx:{display:"flex",flexDirection:"column",gap:3},children:[e(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"  "}),e(Xg,{fullWidth:!0,label:" ",name:"title",value:v.title,onChange:C,variant:"outlined",required:!0,size:"medium"}),e(Xg,{fullWidth:!0,label:" ",name:"description",value:v.description,onChange:C,variant:"outlined",multiline:!0,rows:4}),e(Xg,{fullWidth:!0,label:"  ()",name:"duration",type:"number",value:v.duration,onChange:C,variant:"outlined",size:"medium",InputProps:{endAdornment:e(Vr,{position:"end",children:""})}}),o(c,{children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:""}),v.videoFile?o(c,{children:[e("video",{src:URL.createObjectURL(v.videoFile),controls:!0,style:{width:"100%",maxHeight:360,borderRadius:8,border:`1px solid ${t.palette.divider}`}}),e(c,{sx:{mt:1,display:"flex",gap:1},children:e(re,{color:"error",onClick:()=>_("video",null),children:" "})})]}):v.videoUrl?o(c,{children:[e("video",{src:v.videoUrl,controls:!0,style:{width:"100%",maxHeight:360,borderRadius:8,border:`1px solid ${t.palette.divider}`}}),e(c,{sx:{mt:1,display:"flex",gap:1},children:o(re,{component:"label",variant:"outlined",startIcon:e(Zs,{}),disabled:h,children:[" ",e("input",{hidden:!0,type:"file",accept:"video/*",onChange:R=>_("video",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})})]}):o(re,{component:"label",variant:"outlined",startIcon:e(Zs,{}),disabled:h,children:["  (MP4)",e("input",{hidden:!0,type:"file",accept:"video/*",onChange:R=>_("video",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})]}),o(c,{children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:" PDF"}),v.pdfFile?o(c,{children:[e(c,{sx:{position:"relative",border:`1px solid ${t.palette.divider}`,borderRadius:1,overflow:"hidden"},children:e("iframe",{title:"pdf-preview",src:URL.createObjectURL(v.pdfFile),style:{width:"100%",height:480,border:0}})}),o(c,{sx:{mt:1,display:"flex",gap:1,alignItems:"center"},children:[e(re,{component:"a",href:URL.createObjectURL(v.pdfFile),target:"_blank",rel:"noopener noreferrer",children:"  "}),e(re,{color:"error",onClick:()=>_("pdf",null),children:" "})]})]}):v.pdfUrl?o(c,{children:[e(c,{sx:{position:"relative",border:`1px solid ${t.palette.divider}`,borderRadius:1,overflow:"hidden"},children:e("iframe",{title:"pdf-preview",src:v.pdfUrl,style:{width:"100%",height:480,border:0}})}),o(c,{sx:{mt:1,display:"flex",gap:1,alignItems:"center"},children:[e(re,{component:"a",href:v.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:"  "}),o(re,{component:"label",variant:"outlined",startIcon:e(Zs,{}),disabled:h,children:[" ",e("input",{hidden:!0,type:"file",accept:"application/pdf",onChange:R=>_("pdf",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})]})]}):o(re,{component:"label",variant:"outlined",startIcon:e(Zs,{}),children:["  PDF",e("input",{hidden:!0,type:"file",accept:"application/pdf",onChange:R=>_("pdf",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})]}),e(wt,{control:e(Fi,{checked:v.isPreview,onChange:C,name:"isPreview",color:"primary"}),label:" "}),e(c,{sx:{display:"flex",justifyContent:"flex-end"},children:e(BD,{variant:"contained",type:"submit",disabled:h,children:h?" ...":" "})})]})}),e(un,{open:m.open,autoHideDuration:6e3,onClose:()=>y(oe(X({},m),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:e(Be,{onClose:()=>y(oe(X({},m),{open:!1})),severity:m.severity,sx:{width:"100%"},children:m.message})})]})},PD=te(wr)(({theme:t})=>({"& .MuiDialog-paper":{borderRadius:"16px",maxWidth:"800px",width:"90%",maxHeight:"90vh",direction:"rtl"}})),jD=te(Wr)(({theme:t})=>({background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3),"& .MuiTypography-root":{fontWeight:700,fontSize:"1.25rem"}})),Xm=({open:t,onClose:n,courseId:a,unitId:l,lessonId:d})=>{const[p,h]=w.useState(null),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,C]=w.useState([]);w.useEffect(()=>{t&&d&&_()},[t,d]);const _=()=>$(null,null,function*(){m(!0),v(null);try{const O=yield mr.getModuleById(l),q=((O==null?void 0:O.lessons)||[]).find(j=>String(j.id)===String(d));if(h(q||null),q)try{const j=yield mr.getLessonResources(d);C(j||[])}catch(j){console.log("No resources found for lesson"),C([])}else v("     ")}catch(O){v("  ")}finally{m(!1)}}),z=()=>{h(null),v(null),C([]),n()},R=O=>O?new Date(O).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",B=O=>{var j;switch((j=O.split(".").pop())==null?void 0:j.toLowerCase()){case"pdf":return e(io,{});case"doc":case"docx":return e(Ah,{});case"mp4":case"avi":case"mov":return e(a0,{});case"mp3":case"wav":return e(i0,{});case"jpg":case"jpeg":case"png":case"gif":return e(ka,{});default:return e(ch,{})}},T=O=>{console.log("Downloading resource:",O)};return o(PD,{open:t,onClose:z,maxWidth:"md",fullWidth:!0,children:[o(jD,{children:[e(f,{variant:"h6",children:" "}),e(xe,{onClick:z,sx:{color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:e(pn,{})})]}),o(vr,{sx:{p:3},children:[x&&e(c,{sx:{display:"flex",justifyContent:"center",py:4},children:e(Qe,{})}),y&&e(Be,{severity:"error",sx:{mb:2},children:y}),p&&!x&&o(c,{children:[o(c,{sx:{mb:3},children:[e(f,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:p.title}),o(c,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[e(_e,{label:p.lesson_type||"article",color:p.lesson_type==="video"?"primary":"default",variant:"outlined",size:"small"}),e(_e,{label:`${p.duration_minutes||0} `,color:"secondary",variant:"outlined",size:"small"}),p.is_free&&e(_e,{label:"",color:"success",variant:"outlined",size:"small"})]}),e(Vt,{sx:{my:2}})]}),o(c,{sx:{mb:3},children:[e(f,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:" "}),e(c,{sx:{p:3,backgroundColor:"grey.50",borderRadius:2,border:"1px solid",borderColor:"divider",minHeight:200},children:e(f,{variant:"body1",sx:{lineHeight:1.8,whiteSpace:"pre-wrap",textAlign:"right"},children:p.content||"   "})})]}),o(c,{sx:{p:3,backgroundColor:"grey.50",borderRadius:2,border:"1px solid",borderColor:"divider",mb:3},children:[e(f,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body2",color:"textSecondary",children:" :"}),e(f,{variant:"body1",fontWeight:600,children:p.id})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body2",color:"textSecondary",children:" :"}),e(_e,{label:p.lesson_type||"article",size:"small",color:p.lesson_type==="video"?"primary":"default"})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body2",color:"textSecondary",children:":"}),o(f,{variant:"body1",fontWeight:600,children:[p.duration_minutes||0," "]})]}),p.created_at&&o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body2",color:"textSecondary",children:" :"}),e(f,{variant:"body1",fontWeight:600,children:R(p.created_at)})]}),p.updated_at&&o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body2",color:"textSecondary",children:" :"}),e(f,{variant:"body1",fontWeight:600,children:R(p.updated_at)})]})]})]}),(S.length>0||p.resources&&p.resources.length>0)&&o(c,{sx:{p:3,backgroundColor:"grey.50",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[o(f,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:["  (",(S.length>0?S:p.resources||[]).length,")"]}),e(Rr,{sx:{bgcolor:"white",borderRadius:1},children:(S.length>0?S:p.resources||[]).map((O,q,j)=>o(ir,{sx:{borderBottom:q<j.length-1?"1px solid":"none",borderColor:"divider","&:hover":{backgroundColor:"action.hover"}},children:[e(fr,{sx:{minWidth:40},children:B(O.name||O.filename||"file")}),e(Ut,{primary:O.name||O.filename||" ",secondary:O.description||O.size?`${O.size} bytes`:"",sx:{"& .MuiListItemText-primary":{fontWeight:600,fontSize:"0.9rem"},"& .MuiListItemText-secondary":{fontSize:"0.8rem"}}}),e(rw,{children:e(xe,{edge:"end",onClick:()=>T(O),sx:{color:"primary.main","&:hover":{backgroundColor:"primary.main",color:"white"}},children:e(Kn,{})})})]},O.id||q))})]})]})]}),e($r,{sx:{p:2,justifyContent:"center"},children:e(c,{sx:{display:"flex",gap:2},children:o(f,{variant:"body2",color:"textSecondary",children:[" : ",d]})})})]})},m5=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:t.palette.background.paper,marginTop:t.spacing(3),border:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{padding:t.spacing(4)}}));te(nt)(({theme:t})=>({borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease",border:`1px solid ${t.palette.divider}`,"&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",borderColor:t.palette.primary.main}}));const Kg=[{value:"video",label:"",icon:e(ji,{}),color:"primary"},{value:"article",label:"",icon:e(en,{}),color:"secondary"}],ND=()=>{const t=jt(),n=ct(),{courseId:a,unitId:l}=cr(),[d,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(!1),[v,S]=w.useState(null),[C,_]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{l&&$(null,null,function*(){x(!0);try{const L=yield mr.getModuleById(l),k={id:L==null?void 0:L.id,title:(L==null?void 0:L.name)||"",description:(L==null?void 0:L.description)||"",duration:typeof(L==null?void 0:L.video_duration)=="number"?Math.round(L.video_duration/60):0,order:L==null?void 0:L.order,status:(L==null?void 0:L.status)||(L!=null&&L.is_active?"published":"draft"),isPreview:(L==null?void 0:L.is_active)===!1,lessons:Array.isArray(L==null?void 0:L.lessons)?L.lessons.map(G=>({id:G.id,title:G.title||"",type:G.lesson_type||"article",duration:G.duration_minutes||0,content:G.content||"",isPreview:G.is_free||!1,completed:!1,resources:[]})):[],createdAt:L==null?void 0:L.created_at,updatedAt:L==null?void 0:L.updated_at};p(k)}catch(L){console.error("Error fetching unit:",L),_({open:!0,message:"     ",severity:"error"})}finally{x(!1)}})},[l]);const z=()=>{n(`/teacher/courses/${a}/units/${l}/edit`)},R=V=>{S(V.id),y(!0)},B=()=>{y(!1),S(null)},T=V=>{const L=Kg.find(k=>k.value===V);return L?L.icon:e(en,{})},O=V=>{const L=Kg.find(k=>k.value===V);return L?L.color:"default"},q=V=>{const L=Kg.find(k=>k.value===V);return L?L.label:""},j=V=>V?new Date(V).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",ee=V=>V.completed?{label:"",color:"success"}:V.isPreview?{label:"",color:"primary"}:{label:" ",color:"default"};return h?e(Xe,{maxWidth:"lg",sx:{py:4},children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})})}):d?o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{mb:4,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[e(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:t.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:t.palette.action.hover}},children:e(qt,{})}),o(c,{children:[e(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:t.palette.primary.main},children:d.title}),e(f,{variant:"body1",color:"textSecondary",children:"   "})]})]}),e(re,{variant:"outlined",startIcon:e(Tr,{}),onClick:z,sx:{borderRadius:"12px"},children:" "})]}),o(m5,{elevation:0,children:[o(c,{sx:{display:"flex",alignItems:"center",mb:3},children:[e(Tt,{sx:{bgcolor:t.palette.primary.main,width:64,height:64,mr:2},children:e(en,{sx:{fontSize:32}})}),o(c,{sx:{flex:1},children:[e(f,{variant:"h5",component:"h2",sx:{fontWeight:600,mb:1},children:d.title}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e(_e,{label:d.status==="published"?"":"",color:d.status==="published"?"success":"warning",size:"small",variant:"outlined"}),d.isPreview&&e(_e,{label:"",color:"primary",size:"small",variant:"outlined"})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(dn,{sx:{fontSize:"1rem",color:"text.secondary"}}),o(f,{variant:"body2",color:"textSecondary",children:[d.duration," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(en,{sx:{fontSize:"1rem",color:"text.secondary"}}),o(f,{variant:"body2",color:"textSecondary",children:[d.lessons.length," "]})]})]})]})]}),e(f,{variant:"body1",color:"textSecondary",sx:{mb:3,lineHeight:1.6},children:d.description}),o(le,{container:!0,spacing:3,sx:{mb:3},children:[e(le,{item:!0,xs:12,children:o(c,{sx:{p:3,backgroundColor:t.palette.grey[50],borderRadius:3,border:`1px solid ${t.palette.divider}`,boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e(f,{variant:"h6",sx:{fontWeight:700,mb:3,color:t.palette.primary.main,textAlign:"center"},children:" "}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),e(f,{variant:"body1",fontWeight:600,color:"primary.main",children:j(d.createdAt)})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),e(f,{variant:"body1",fontWeight:600,color:"primary.main",children:j(d.updatedAt)})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),e(f,{variant:"body1",fontWeight:600,color:"primary.main",children:d.order||" "})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),o(f,{variant:"body1",fontWeight:600,color:"primary.main",children:[d.lessons.length," "]})]})})]})]})}),e(le,{item:!0,xs:12,children:o(c,{sx:{p:3,backgroundColor:t.palette.grey[50],borderRadius:3,border:`1px solid ${t.palette.divider}`,boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e(f,{variant:"h6",sx:{fontWeight:700,mb:3,color:t.palette.primary.main,textAlign:"center"},children:" "}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),o(f,{variant:"body1",fontWeight:600,color:"primary.main",children:[d.duration," "]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),o(f,{variant:"body1",fontWeight:600,color:"success.main",children:[d.lessons.filter(V=>V.completed).length,"  ",d.lessons.length]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:" "}),o(f,{variant:"body1",fontWeight:600,color:"warning.main",children:[d.lessons.filter(V=>V.isPreview).length," "]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[e(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:""}),e(_e,{label:d.status==="published"?"":"",color:d.status==="published"?"success":"warning",size:"small",sx:{fontWeight:600}})]})})]})]})})]})]}),o(m5,{elevation:0,sx:{mt:3},children:[o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[o(f,{variant:"h6",sx:{fontWeight:600,color:t.palette.primary.main},children:["  (",d.lessons.length,")"]}),o(c,{sx:{display:"flex",gap:1},children:[e(_e,{label:`${d.lessons.filter(V=>V.completed).length} `,color:"success",size:"small",variant:"outlined"}),e(_e,{label:`${d.lessons.filter(V=>V.isPreview).length} `,color:"primary",size:"small",variant:"outlined"})]})]}),e(ni,{sx:{borderRadius:2,border:`1px solid ${t.palette.divider}`},children:o(ei,{children:[e(ti,{children:o(or,{sx:{backgroundColor:t.palette.grey[50]},children:[e(be,{sx:{fontWeight:700,color:t.palette.primary.main},children:o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(en,{sx:{fontSize:20}}),""]})}),e(be,{sx:{fontWeight:700,color:t.palette.primary.main,textAlign:"center"},children:""}),e(be,{sx:{fontWeight:700,color:t.palette.primary.main,textAlign:"center"},children:""}),e(be,{sx:{fontWeight:700,color:t.palette.primary.main,textAlign:"center"},children:""}),e(be,{sx:{fontWeight:700,color:t.palette.primary.main,textAlign:"center"},children:""})]})}),e(ri,{children:d.lessons.map((V,L)=>{const k=ee(V);return o(or,{sx:{"&:hover":{backgroundColor:t.palette.action.hover,transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>R(V),children:[e(be,{children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Tt,{sx:{bgcolor:t.palette[O(V.type)].main,width:40,height:40},children:T(V.type)}),o(c,{children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:V.title}),e(f,{variant:"body2",color:"textSecondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",maxWidth:300},children:V.content||"   "})]})]})}),e(be,{align:"center",children:e(_e,{label:q(V.type),size:"small",color:O(V.type),variant:"outlined",sx:{fontWeight:600}})}),e(be,{align:"center",children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e(dn,{sx:{fontSize:16,color:"text.secondary"}}),o(f,{variant:"body2",fontWeight:500,children:[V.duration," "]})]})}),e(be,{align:"center",children:o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e(_e,{label:k.label,size:"small",color:k.color,variant:"filled",sx:{fontWeight:600}}),V.completed&&e(yr,{sx:{fontSize:16,color:"success.main"}})]})}),e(be,{align:"center",children:o(c,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e(Je,{title:" ",children:e(xe,{size:"small",color:"primary",onClick:G=>{G.stopPropagation(),R(V)},sx:{backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)",transform:"scale(1.1)"}},children:e(Pc,{})})}),e(Je,{title:" ",children:e(xe,{size:"small",color:"secondary",onClick:G=>{G.stopPropagation(),R(V)},sx:{backgroundColor:"rgba(156, 39, 176, 0.1)","&:hover":{backgroundColor:"rgba(156, 39, 176, 0.2)",transform:"scale(1.1)"}},children:e(Lr,{})})}),V.resources.length>0&&e(Je,{title:`${V.resources.length} `,children:e(es,{badgeContent:V.resources.length,color:"primary",children:e(xe,{size:"small",color:"info",sx:{backgroundColor:"rgba(3, 169, 244, 0.1)","&:hover":{backgroundColor:"rgba(3, 169, 244, 0.2)",transform:"scale(1.1)"}},children:e(Kn,{})})})})]})})]},V.id)})})]})})]}),e(un,{open:C.open,autoHideDuration:6e3,onClose:()=>_(oe(X({},C),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:e(Be,{onClose:()=>_(oe(X({},C),{open:!1})),severity:C.severity,sx:{width:"100%"},children:C.message})}),e(Xm,{open:m,onClose:B,courseId:a,unitId:l,lessonId:v})]}):e(Xe,{maxWidth:"lg",sx:{py:4},children:e(Be,{severity:"error",children:"     "})})},HD=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",border:`1px solid ${t.palette.divider}`})),UD=[{value:"video",label:""},{value:"article",label:""}],x5=({isEdit:t=!1})=>{const n=ct(),{courseId:a,unitId:l,lessonId:d}=cr(),[p,h]=w.useState(t),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,C]=w.useState({title:"",lesson_type:"article",duration_minutes:0,is_free:!1,video_url:"",content:""}),[_,z]=w.useState("none"),[R,B]=w.useState({title:"",resource_type:"document",file:null,url:"",is_public:!0}),[T,O]=w.useState([]),[q,j]=w.useState(!1),[ee,V]=w.useState(null);w.useEffect(()=>{$(null,null,function*(){if(t)try{h(!0),v(null);const M=yield mr.getModuleById(l),U=((M==null?void 0:M.lessons)||[]).find(H=>String(H.id)===String(d));U?C({title:U.title||"",lesson_type:U.lesson_type||"article",duration_minutes:U.duration_minutes||0,is_free:!!U.is_free,video_url:U.video_url||"",content:U.content||""}):v("   ")}catch(M){v("   ")}finally{h(!1)}})},[t,l,d]),w.useEffect(()=>{$(null,null,function*(){if(!(!t||!d))try{j(!0),V(null);const M=yield mr.getLessonResources({lessonId:d}),U=Array.isArray(M)?M:(M==null?void 0:M.results)||(M==null?void 0:M.data)||[];O(U)}catch(M){V("   ")}finally{j(!1)}})},[t,d]);const L=W=>$(null,null,function*(){try{yield mr.deleteLessonResource(W),O(M=>M.filter(U=>U.id!==W))}catch(M){V("  ")}}),k=(W,M)=>C(U=>oe(X({},U),{[W]:M}));return o(Xe,{maxWidth:"md",sx:{py:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:3},children:[e(xe,{onClick:()=>n(-1),children:e(qt,{})}),e(f,{variant:"h5",fontWeight:700,children:t?" ":" "})]}),o(HD,{component:"form",onSubmit:W=>$(null,null,function*(){var M,U,H,N;W.preventDefault();try{m(!0),v(null);let Y=d;if(t){const E=yield mr.updateLesson(d,X({module:l},S));Y=(E==null?void 0:E.id)||d}else{const E=yield mr.createLesson(X({module:l},S));Y=E==null?void 0:E.id}if(Y&&_!=="none"){if(console.log("Creating resource with mode:",_),console.log("Current lesson ID:",Y),console.log("Resource data:",R),_==="file"&&R.file){const E={lesson:Y,title:R.title||"Resource",resource_type:R.resource_type||"document",file:R.file,is_public:R.is_public?"true":"false"};console.log("Creating file resource with data:",E),yield mr.createLessonResource(E)}else if(_==="url"&&R.url){const E={lesson:Y,title:R.title||"Resource",resource_type:"link",url:R.url,is_public:R.is_public?"true":"false"};console.log("Creating URL resource with data:",E),yield mr.createLessonResource(E)}}n(`/teacher/courses/${a}/units/${l}/lessons`)}catch(Y){const E=((U=(M=Y==null?void 0:Y.response)==null?void 0:M.data)==null?void 0:U.detail)||((N=(H=Y==null?void 0:Y.response)==null?void 0:H.data)==null?void 0:N.error)||"  .   .";v(E)}finally{m(!1)}}),children:[y&&e(Be,{severity:"error",sx:{mb:2},children:y}),o(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2},children:[e(ze,{label:" ",value:S.title,onChange:W=>k("title",W.target.value),required:!0}),o(Wt,{children:[e(Ot,{children:" "}),e(Bt,{label:" ",value:S.lesson_type,onChange:W=>k("lesson_type",W.target.value),children:UD.map(W=>e(We,{value:W.value,children:W.label},W.value))})]}),e(ze,{label:" ()",type:"number",inputProps:{min:0},value:S.duration_minutes,onChange:W=>k("duration_minutes",Number(W.target.value||0))}),e(ze,{label:"  ()",value:S.video_url,onChange:W=>k("video_url",W.target.value)})]}),e(wt,{control:e(Fi,{checked:S.is_free,onChange:W=>k("is_free",W.target.checked)}),label:" ",sx:{mt:2}}),e(ze,{label:"",value:S.content,onChange:W=>k("content",W.target.value),fullWidth:!0,multiline:!0,rows:6,sx:{mt:2}}),e(Vt,{sx:{my:3}}),e(f,{variant:"h6",sx:{mb:1},children:"  ()"}),t&&o(c,{sx:{mb:2},children:[ee&&e(Be,{severity:"error",sx:{mb:1},children:ee}),q?e(f,{variant:"body2",color:"text.secondary",children:"  ..."}):T.length>0?e(Rr,{dense:!0,children:T.map(W=>o(ir,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,mb:1},children:[e(Z0,{fontSize:"small",style:{marginInlineEnd:6}}),e(Ut,{primary:W.title,secondary:W.resource_type}),W.file&&e(xe,{component:va,href:W.file,target:"_blank",rel:"noopener noreferrer",children:e(j1,{fontSize:"small"})}),W.url&&e(xe,{component:va,href:W.url,target:"_blank",rel:"noopener noreferrer",children:e(j1,{fontSize:"small"})}),e(rw,{children:e(xe,{edge:"end",color:"error",onClick:()=>L(W.id),children:e(nw,{})})})]},W.id))}):e(f,{variant:"body2",color:"text.secondary",children:"   ."})]}),o(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2},children:[o(Wt,{children:[e(Ot,{children:" "}),o(Bt,{label:" ",value:_,onChange:W=>z(W.target.value),children:[e(We,{value:"none",children:""}),e(We,{value:"file",children:" "}),e(We,{value:"url",children:" "})]})]}),_!=="none"&&e(ze,{label:" ",value:R.title,onChange:W=>B(M=>oe(X({},M),{title:W.target.value})),required:!0})]}),_==="file"&&o(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mt:2},children:[o(Wt,{children:[e(Ot,{children:" "}),o(Bt,{label:" ",value:R.resource_type,onChange:W=>B(M=>oe(X({},M),{resource_type:W.target.value})),children:[e(We,{value:"document",children:""}),e(We,{value:"presentation",children:" "}),e(We,{value:"spreadsheet",children:" "}),e(We,{value:"image",children:""}),e(We,{value:"audio",children:""}),e(We,{value:"video",children:""}),e(We,{value:"other",children:""})]})]}),o(re,{component:"label",variant:"outlined",children:[" ",e("input",{hidden:!0,type:"file",onChange:W=>{const M=W.target.files&&W.target.files.length?W.target.files[0]:null;B(U=>oe(X({},U),{file:M}))}})]}),R.file&&e(f,{variant:"caption",color:"text.secondary",children:R.file.name})]}),_==="url"&&e(c,{sx:{mt:2},children:e(ze,{label:" ",fullWidth:!0,value:R.url,onChange:W=>B(M=>oe(X({},M),{url:W.target.value})),placeholder:"https://example.com/resource.pdf"})}),o(c,{sx:{display:"flex",justifyContent:"flex-end",gap:1.5,mt:3},children:[e(re,{variant:"outlined",onClick:()=>n(-1),disabled:x,children:""}),e(re,{type:"submit",variant:"contained",startIcon:e(os,{}),disabled:x,children:""})]})]})]})},VD=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:`1px solid ${t.palette.divider}`}));te(De)(({theme:t})=>({padding:t.spacing(2),borderRadius:"10px",border:`1px solid ${t.palette.divider}`,transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.08)"}}));const qD=()=>{const t=ct(),{courseId:n,unitId:a}=cr(),[l,d]=w.useState(!0),[p,h]=w.useState(null),[x,m]=w.useState(null),[y,v]=w.useState(!1),[S,C]=w.useState(null),[_,z]=w.useState(!1),[R,B]=w.useState({open:!1,message:"",severity:"success"}),[T,O]=w.useState(0),[q,j]=w.useState(10),[ee,V]=w.useState(!1),[L,k]=w.useState(null);w.useEffect(()=>{a&&$(null,null,function*(){d(!0),m(null);try{const A=yield mr.getModuleById(a);h(A)}catch(A){m("  ")}finally{d(!1)}})},[a]);const G=Array.isArray(p==null?void 0:p.lessons)?p.lessons:[],W=I=>{C(I),v(!0)},M=()=>$(null,null,function*(){if(S){z(!0);try{yield mr.deleteLesson(S.id),h(I=>oe(X({},I),{lessons:((I==null?void 0:I.lessons)||[]).filter(A=>A.id!==S.id)})),B({open:!0,message:"   ",severity:"success"})}catch(I){B({open:!0,message:"  ",severity:"error"})}finally{z(!1),v(!1),C(null)}}}),U=I=>{switch((I||"").toLowerCase()){case"video":return e(ji,{fontSize:"small"});default:return e(en,{fontSize:"small"})}},H=(I,A)=>{O(A)},N=I=>{j(parseInt(I.target.value,10)),O(0)},Y=I=>{k(I),V(!0)},E=()=>{V(!1),k(null)};return o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),e(c,{sx:{position:"relative",zIndex:2},children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(xe,{onClick:()=>t(`/teacher/courses/${n}/units`),sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"}},children:e(qt,{})}),o(c,{children:[e(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"white"},children:" "}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:(p==null?void 0:p.name)||(p==null?void 0:p.title)||"  "})]})]}),e(re,{variant:"contained",startIcon:e(tw,{}),size:"large",onClick:()=>t(`/teacher/courses/${n}/units/${a}/lessons/create`),sx:{background:"linear-gradient(45deg, #0e5181 30%, #e5978b 90%)",color:"white",borderRadius:"25px",px:3,py:1.5,fontWeight:600,textTransform:"none",fontSize:"0.95rem",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.3)",border:"none","&:hover":{background:"linear-gradient(45deg, #0a3f66 30%, #d88a7e 90%)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:" "})]})})]}),o(VD,{children:[l&&e(c,{sx:{py:3},children:e(Sr,{})}),x&&e(f,{color:"error",sx:{mb:2},children:x}),!l&&!x&&(G.length>0?o(Rt,{children:[e(ni,{component:De,sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:o(ei,{children:[e(ti,{children:o(or,{sx:{backgroundColor:"primary.main"},children:[e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""}),e(be,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:""})]})}),e(ri,{children:G.slice(T*q,T*q+q).map(I=>o(or,{hover:!0,sx:{"&:hover":{backgroundColor:"action.hover"}},children:[e(be,{sx:{py:2,px:3},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:48,height:48,borderRadius:"50%",backgroundColor:"primary.main",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:U(I.lesson_type)}),o(c,{sx:{minWidth:0,flex:1},children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,lineHeight:1.2},children:I.title}),o(f,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem"},children:[" : ",I.id]})]})]})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:e(_e,{label:I.lesson_type||"article",variant:"outlined",size:"small",color:I.lesson_type==="video"?"primary":"default",sx:{fontWeight:600,minWidth:80}})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e(dn,{sx:{fontSize:18,color:"text.secondary"}}),o(f,{variant:"body2",sx:{fontWeight:500},children:[I.duration_minutes||0," "]})]})}),e(be,{sx:{py:2,px:3,textAlign:"center"},children:o(c,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e(Je,{title:"",children:e(xe,{size:"small",onClick:()=>Y(I.id),sx:{color:"primary.main",backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Lr,{fontSize:"small"})})}),e(Je,{title:"",children:e(xe,{size:"small",onClick:()=>t(`/teacher/courses/${n}/units/${a}/lessons/${I.id}/edit`),sx:{color:"warning.main",backgroundColor:"rgba(255, 152, 0, 0.1)","&:hover":{backgroundColor:"rgba(255, 152, 0, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Tr,{fontSize:"small"})})}),e(Je,{title:"",children:e(xe,{size:"small",color:"error",onClick:()=>W(I),sx:{backgroundColor:"rgba(244, 67, 54, 0.1)","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(nw,{fontSize:"small"})})})]})})]},I.id))})]})}),e(Ea,{component:"div",count:G.length,page:T,onPageChange:H,rowsPerPage:q,onRowsPerPageChange:N,labelRowsPerPage:"  :",labelDisplayedRows:({from:I,to:A,count:Q})=>`${I}-${A}  ${Q}`})]}):e(f,{variant:"body1",color:"text.secondary",children:"       ."}))]}),o(wr,{open:y,onClose:()=>!_&&v(!1),children:[e(Wr,{children:" "}),o(vr,{children:["     : ",S==null?void 0:S.title,"      ."]}),o($r,{children:[e(re,{onClick:()=>v(!1),disabled:_,children:""}),e(re,{color:"error",onClick:M,disabled:_,children:_?" ...":""})]})]}),e(un,{open:R.open,autoHideDuration:4e3,onClose:()=>B(I=>oe(X({},I),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:e(Be,{onClose:()=>B(I=>oe(X({},I),{open:!1})),severity:R.severity,sx:{width:"100%"},children:R.message})}),e(Xm,{open:ee,onClose:E,courseId:n,unitId:a,lessonId:L})]})},wc={getProfile:()=>$(null,null,function*(){try{return(yield ne.get("/api/auth/profile/")).data}catch(t){throw t}}),updateProfile:t=>$(null,null,function*(){try{return(yield ne.put("/api/auth/profile/update/",t)).data}catch(n){throw n}}),updateSettings:t=>$(null,null,function*(){try{return(yield ne.put("/api/auth/settings/",t)).data}catch(n){throw n}}),changePassword:t=>$(null,null,function*(){try{return(yield ne.post("/api/auth/change-password/",t)).data}catch(n){throw n}}),uploadProfilePicture:t=>$(null,null,function*(){try{const n=new FormData;return n.append("profile_picture",t),(yield ne.post("/api/auth/profile/upload-picture/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw n}}),getStatistics:()=>$(null,null,function*(){try{try{return(yield ne.get("/api/courses/student/dashboard/stats/")).data}catch(t){return(yield ne.get("/api/courses/dashboard/stats/")).data}}catch(t){throw t}}),getEducation:()=>$(null,null,function*(){try{return(yield ne.get("/api/auth/profile/education/")).data}catch(t){throw t}}),addEducation:t=>$(null,null,function*(){try{return(yield ne.post("/api/auth/profile/education/",t)).data}catch(n){throw n}}),updateEducation:(t,n)=>$(null,null,function*(){try{return(yield ne.put(`/api/auth/profile/education/${t}/`,n)).data}catch(a){throw a}}),deleteEducation:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/auth/profile/education/${t}/`)).data}catch(n){throw n}}),getExperience:()=>$(null,null,function*(){try{return(yield ne.get("/api/auth/profile/experience/")).data}catch(t){throw t}}),addExperience:t=>$(null,null,function*(){try{return(yield ne.post("/api/auth/profile/experience/",t)).data}catch(n){throw n}}),updateExperience:(t,n)=>$(null,null,function*(){try{return(yield ne.put(`/api/auth/profile/experience/${t}/`,n)).data}catch(a){throw a}}),deleteExperience:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/auth/profile/experience/${t}/`)).data}catch(n){throw n}}),updateSkills:t=>$(null,null,function*(){try{return(yield ne.put("/api/auth/profile/skills/",{skills:t})).data}catch(n){throw n}})};te(es)(({theme:t})=>({"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${t.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));te(c)(({theme:t})=>({background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:t.spacing(3),padding:t.spacing(4),marginBottom:t.spacing(4),position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3}}));const YD=te(nt)(({theme:t})=>({borderRadius:t.spacing(3),boxShadow:"0 8px 32px rgba(14, 81, 129, 0.1)",border:"1px solid",borderColor:pe("#0e5181",.08),transition:"all 0.3s ease",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(229, 151, 139, 0.02) 100%)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(14, 81, 129, 0.15)",borderColor:pe("#0e5181",.15)}}));te(nt)(({theme:t})=>({borderRadius:t.spacing(2.5),background:`linear-gradient(135deg, ${pe("#0e5181",.03)} 0%, ${pe("#e5978b",.03)} 100%)`,border:"1px solid",borderColor:pe("#0e5181",.08),transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.12)"}}));te(_e)(({theme:t})=>({borderRadius:t.spacing(2),fontWeight:600,background:`linear-gradient(135deg, ${pe("#0e5181",.1)} 0%, ${pe("#e5978b",.1)} 100%)`,border:`1px solid ${pe("#0e5181",.2)}`,color:"#0e5181","&:hover":{transform:"scale(1.05)",background:`linear-gradient(135deg, ${pe("#0e5181",.15)} 0%, ${pe("#e5978b",.15)} 100%)`}}));te(c)(({theme:t})=>({padding:t.spacing(3)}));const Zg=()=>{jt(),ct();const{user:t,getUserRole:n,updateUser:a}=uo(),l=w.useRef(null),[d,p]=w.useState(0),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[C,_]=w.useState(!0),[z,R]=w.useState({open:!1,message:"",severity:"success"}),[B,T]=w.useState({current_password:"",new_password:"",confirm_password:""}),[O,q]=w.useState({firstName:(t==null?void 0:t.first_name)||"",lastName:(t==null?void 0:t.last_name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",location:(t==null?void 0:t.location)||"",website:(t==null?void 0:t.website)||"",bio:(t==null?void 0:t.bio)||"",avatar:(t==null?void 0:t.profile_picture)||Dc,coverImage:"https://source.unsplash.com/random/1200x300?programming",joinDate:t!=null&&t.date_joined?new Date(t.date_joined).toLocaleDateString("ar-EG"):"",skills:(t==null?void 0:t.skills)||[],education:(t==null?void 0:t.education)||[],experience:(t==null?void 0:t.experience)||[],coursesEnrolled:0,coursesCompleted:0,certificates:0,lectures:0,lastActive:" ",isVerified:(t==null?void 0:t.is_verified)||!1,profileCompletion:0}),[j,ee]=w.useState({emailNotifications:{courseAnnouncements:!0,privateMessages:!0,promotionalOffers:!1,weeklyDigest:!0},privacy:{profileVisibility:"public",showEmail:!1,showPhone:!0,allowMessages:!0},appearance:{theme:"auto",language:"ar",fontSize:"medium"}}),V=()=>{x(!h)},L=U=>{const{name:H,value:N}=U.target;q(Y=>oe(X({},Y),{[H]:N}))},k=()=>$(null,null,function*(){var U,H;try{S(!0);const N={first_name:O.firstName,last_name:O.lastName,email:O.email,phone:O.phone,location:O.location,website:O.website,bio:O.bio};let Y;try{Y=yield wc.updateProfile(N)}catch(E){console.warn("Profile update failed, using local update:",E),Y=X(X({},t),N)}a&&a(Y),R({open:!0,message:"    ",severity:"success"}),x(!1)}catch(N){console.error("Error updating profile:",N),R({open:!0,message:((H=(U=N.response)==null?void 0:U.data)==null?void 0:H.message)||"   .    ",severity:"error"})}finally{S(!1)}});w.useEffect(()=>{t&&$(null,null,function*(){try{_(!0);let H={},N={};try{H=yield wc.getProfile()}catch(Y){console.warn("Could not load profile data:",Y),H={first_name:(t==null?void 0:t.first_name)||"",last_name:(t==null?void 0:t.last_name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",location:(t==null?void 0:t.location)||"",website:(t==null?void 0:t.website)||"",bio:(t==null?void 0:t.bio)||"",profile_picture:(t==null?void 0:t.profile_picture)||Dc,date_joined:(t==null?void 0:t.date_joined)||"",skills:(t==null?void 0:t.skills)||[],education:(t==null?void 0:t.education)||[],experience:(t==null?void 0:t.experience)||[],is_verified:(t==null?void 0:t.is_verified)||!1}}try{N=yield wc.getStatistics()}catch(Y){console.warn("Could not load statistics:",Y),N={coursesEnrolled:0,coursesCompleted:0,certificates:0,lectures:0}}q(Y=>X(X(X({},Y),H),N))}catch(H){console.error("Error loading profile data:",H),R({open:!0,message:"    ",severity:"error"})}finally{_(!1)}})},[t]);const G=()=>{R(U=>oe(X({},U),{open:!1}))},W=()=>$(null,null,function*(){var U,H,N,Y;if(B.new_password!==B.confirm_password){R({open:!0,message:"    ",severity:"error"});return}if(B.new_password.length<8){R({open:!0,message:"      8   ",severity:"error"});return}try{S(!0);try{yield wc.changePassword(B)}catch(E){console.warn("Password change failed:",E);const I=((H=(U=E.response)==null?void 0:U.data)==null?void 0:H.message)||((Y=(N=E.response)==null?void 0:N.data)==null?void 0:Y.detail)||"   .      .";throw new Error(I)}T({current_password:"",new_password:"",confirm_password:""}),R({open:!0,message:"    ",severity:"success"})}catch(E){console.error("Error changing password:",E),R({open:!0,message:E.message||"   ",severity:"error"})}finally{S(!1)}}),M=U=>$(null,null,function*(){var N,Y;const H=U.target.files[0];if(H){if(!H.type.startsWith("image/")){R({open:!0,message:"    ",severity:"error"});return}if(H.size>5*1024*1024){R({open:!0,message:"       5 ",severity:"error"});return}try{S(!0);try{const E=yield wc.uploadProfilePicture(H);q(I=>oe(X({},I),{avatar:E.profile_picture})),a&&a(oe(X({},t),{profile_picture:E.profile_picture})),R({open:!0,message:"    ",severity:"success"})}catch(E){console.warn("Profile picture upload failed, using local preview:",E);const I=new FileReader;I.onload=A=>{q(Q=>oe(X({},Q),{avatar:A.target.result}))},I.readAsDataURL(H),R({open:!0,message:"    (    )",severity:"warning"})}}catch(E){console.error("Error uploading profile picture:",E),R({open:!0,message:((Y=(N=E.response)==null?void 0:N.data)==null?void 0:Y.message)||"   ",severity:"error"})}finally{S(!1)}}});return O.coursesEnrolled,zt,O.coursesCompleted,Jr,O.certificates,jr,O.lectures,cn,C?e(Xe,{maxWidth:"xl",sx:{py:4,direction:"rtl"},children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e(Qe,{size:60})})}):o(Xe,{maxWidth:"xl",sx:{py:6,direction:"rtl"},children:[e(le,{container:!0,spacing:4,children:e(le,{item:!0,xs:12,children:e(y6,{direction:"up",in:!0,timeout:1e3,children:e(YD,{children:o(pt,{sx:{p:4},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,pb:2,borderBottom:"2px solid",borderColor:pe("#0e5181",.1)},children:[e(f,{variant:"h5",fontWeight:"bold",color:"#0e5181",children:"  "}),e(re,{variant:h?"contained":"outlined",sx:{backgroundColor:h?"#0e5181":"transparent",color:h?"white":"#0e5181",borderColor:"#0e5181","&:hover":{backgroundColor:h?"#0a3d5f":pe("#0e5181",.1)},px:3,py:1.5,borderRadius:2,fontWeight:"bold"},startIcon:h?e(os,{}):e(Tr,{}),onClick:h?k:V,disabled:v,children:h?" ":"  "})]}),o(le,{container:!0,spacing:4,children:[o(le,{item:!0,xs:12,md:4,children:[o(c,{sx:{textAlign:"center",mb:4,p:3,borderRadius:3,background:`linear-gradient(135deg, ${pe("#0e5181",.02)} 0%, ${pe("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:pe("#0e5181",.08)},children:[o(c,{sx:{position:"relative",display:"inline-block"},children:[e(Tt,{src:O.avatar,alt:`${O.firstName} ${O.lastName}`,sx:{width:140,height:140,border:"4px solid",borderColor:"#0e5181",mb:3,boxShadow:"0 8px 25px rgba(14, 81, 129, 0.2)"}}),h&&e(xe,{color:"error",sx:{position:"absolute",top:-8,right:-8,backgroundColor:"error.main",color:"white","&:hover":{backgroundColor:"error.dark"}},onClick:()=>q(U=>oe(X({},U),{avatar:Dc})),children:e(pn,{fontSize:"small"})})]}),h&&e(re,{variant:"outlined",startIcon:e(v6,{}),onClick:()=>{var U;return(U=l.current)==null?void 0:U.click()},fullWidth:!0,sx:{mb:2,borderColor:"#0e5181",color:"#0e5181","&:hover":{borderColor:"#0a3d5f",backgroundColor:pe("#0e5181",.05)}},children:" "}),e("input",{ref:l,type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),o(c,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${pe("#0e5181",.02)} 0%, ${pe("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:pe("#0e5181",.08)},children:[e(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:"  "}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:"  ",type:m?"text":"password",variant:"outlined",size:"small",value:B.current_password,onChange:U=>T(H=>oe(X({},H),{current_password:U.target.value})),sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{endAdornment:e(Vr,{position:"end",children:e(xe,{size:"small",onClick:()=>y(!m),edge:"end",sx:{color:"#0e5181"},children:m?e(ih,{fontSize:"small"}):e(Lr,{fontSize:"small"})})})}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:"  ",type:m?"text":"password",variant:"outlined",size:"small",value:B.new_password,onChange:U=>T(H=>oe(X({},H),{new_password:U.target.value})),sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}}})}),e(le,{item:!0,xs:12,children:e(re,{variant:"contained",fullWidth:!0,startIcon:v?e(Qe,{size:20}):e(oh,{}),onClick:W,disabled:v,sx:{backgroundColor:"#0e5181","&:hover":{backgroundColor:"#0a3d5f"},py:1.5,borderRadius:2,fontWeight:"bold"},children:"  "})})]})]})]}),o(le,{item:!0,xs:12,md:8,children:[o(c,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${pe("#0e5181",.02)} 0%, ${pe("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:pe("#0e5181",.08),mb:4},children:[e(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:" ",name:"username",value:(t==null?void 0:t.username)||"",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:" ",name:"firstName",value:O.firstName,onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:" ",name:"nickname",value:O.nickname||"",onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:"",name:"role",value:n()==="instructor"?"":"",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!0}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:" ",name:"lastName",value:O.lastName,onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:"  ",name:"displayName",value:O.displayName||`${O.firstName} ${O.lastName}`,onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})})]})]}),o(c,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${pe("#0e5181",.02)} 0%, ${pe("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:pe("#0e5181",.08),mb:4},children:[e(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:"  ()",name:"email",type:"email",value:O.email,onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:"",name:"whatsapp",value:O.whatsapp||"",onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:" ",name:"website",value:O.website,onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:"",name:"telegram",value:O.telegram||"",onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{fullWidth:!0,label:" ",name:"phone",value:O.phone,onChange:L,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})})]})]}),o(c,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${pe("#0e5181",.02)} 0%, ${pe("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:pe("#0e5181",.08)},children:[e(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:"  "}),e(ze,{fullWidth:!0,label:"  ",name:"bio",value:O.bio,onChange:L,multiline:!0,rows:6,variant:"outlined",size:"small",placeholder:"    ...",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:pe("#0e5181",.2)},"&:hover fieldset":{borderColor:pe("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})]})]})]})]})})})})}),e(iw,{"aria-label":"edit",sx:{position:"fixed",bottom:24,right:24,backgroundColor:"#0e5181",color:"white","&:hover":{backgroundColor:"#0a3d5f",transform:"scale(1.1)"},boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)",transition:"all 0.3s ease"},onClick:V,children:e(Tr,{})}),e(un,{open:z.open,autoHideDuration:6e3,onClose:G,anchorOrigin:{vertical:"top",horizontal:"left"},children:e(Be,{onClose:G,severity:z.severity,sx:{direction:"rtl"},children:z.message})})]})},QD=yt`
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
`;yt`
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
`;const GD=()=>{const[t,n]=w.useState([]),[a,l]=w.useState([]),[d,p]=w.useState(!0),[h,x]=w.useState(""),[m,y]=w.useState(""),[v,S]=w.useState(""),[C,_]=w.useState(""),[z,R]=w.useState([]),[B,T]=w.useState({open:!1,message:"",severity:"success"}),[O,q]=w.useState(0),[j,ee]=w.useState(10),V=ct();console.log("Categories state:",z),console.log("Categories length:",z.length),w.useEffect(()=>{$(null,null,function*(){try{p(!0);const A=yield gn.getCourses();console.log("Courses API response:",A);const Q=Array.isArray(A)?A:A.results?A.results:A.data?A.data:[];console.log("Processed courses array:",Q),Q.length>0&&(console.log("Sample course data:",Q[0]),console.log("Sample course category:",Q[0].category),console.log("Sample course category_id:",Q[0].category_id)),n(Q),l(Q)}catch(A){console.error("Error fetching courses:",A),T({open:!0,message:"   ",severity:"error"}),n([]),l([])}finally{p(!1)}})},[]),w.useEffect(()=>{$(null,null,function*(){try{console.log("Fetching categories...");const A=yield gn.getCategories();console.log("Categories API response:",A);const Q=Array.isArray(A)?A:A.results?A.results:A.data?A.data:[];console.log("Processed categories array:",Q),console.log("Categories length:",Q.length),Q.length>0&&console.log("Sample category data:",Q[0]),R(Q)}catch(A){console.error("Error fetching categories:",A),console.log("Trying fallback: extracting categories from courses...");const Q=[],J=new Map;a.forEach(P=>{console.log("Course category:",P.category),console.log("Course category_id:",P.category_id),console.log("Course category_name:",P.category_name);let ie=null;P.category&&P.category.id?ie=P.category:P.category_id&&P.category_name?ie={id:P.category_id,name:P.category_name}:P.category&&typeof P.category=="object"&&(ie=P.category),ie&&ie.id&&!J.has(ie.id)&&(J.set(ie.id,ie),Q.push(ie))}),console.log("Fallback categories:",Q),R(Q)}})},[a]);const L=I=>{const A=I.target.value;console.log("Search input changed:",A),x(A)};w.useEffect(()=>{console.log("=== APPLYING FILTERS ==="),console.log("Search query:",h),console.log("Selected category:",m),console.log("Selected status:",v),console.log("Selected level:",C),console.log("All courses count:",a.length),console.log("Available categories:",z),console.log("========================");let I=[...a];h&&(I=I.filter(A=>{var ue,fe,de,K,se;const Q=(ue=A.title)==null?void 0:ue.toLowerCase().includes(h.toLowerCase()),J=(fe=A.description)==null?void 0:fe.toLowerCase().includes(h.toLowerCase()),P=(de=A.category_name)==null?void 0:de.toLowerCase().includes(h.toLowerCase()),ie=(se=(K=A.category)==null?void 0:K.name)==null?void 0:se.toLowerCase().includes(h.toLowerCase());return Q||J||P||ie}),console.log("After search filter:",I.length)),m&&(I=I.filter(A=>{var ue,fe;const Q=((ue=A.category)==null?void 0:ue.id)||A.category_id||((fe=A.category)==null?void 0:fe.pk)||A.category,J=parseInt(Q),P=parseInt(m),ie=J===P;return console.log(`Course ${A.id}: categoryId=${Q} (${J}), selected=${m} (${P}), match=${ie}`),console.log("Course category object:",A.category),console.log("Course category_id:",A.category_id),console.log("Course category_name:",A.category_name),ie}),console.log("After category filter:",I.length)),v&&(I=I.filter(A=>{const Q=A.status===v;return console.log(`Course ${A.id}: status=${A.status}, selected=${v}, match=${Q}`),Q}),console.log("After status filter:",I.length)),C&&(I=I.filter(A=>{const Q=A.level===C;return console.log(`Course ${A.id}: level=${A.level}, selected=${C}, match=${Q}`),Q}),console.log("After level filter:",I.length)),console.log("Final filtered count:",I.length),n(I)},[h,m,v,C,a]),w.useEffect(()=>{const I=setTimeout(()=>{},300);return()=>clearTimeout(I)},[h]);const k=()=>{console.log("Clearing all filters..."),x(""),y(""),S(""),_("")},G=(I,A)=>{q(A)},W=I=>{ee(parseInt(I.target.value,10)),q(0)},M=t,U=I=>{V(`/courses/${I}`)},H=()=>{V("/teacher/courses/new")},N=()=>{T(oe(X({},B),{open:!1}))},Y=()=>o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(zt,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:""})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"   "})]})]});if(d)return e(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:e(Qe,{})});const E=I=>$(null,null,function*(){if(window.confirm("      "))try{T({open:!0,message:"   ",severity:"success"}),n(A=>A.filter(Q=>Q.id!==I)),l(A=>A.filter(Q=>Q.id!==I))}catch(A){console.error("Error deleting course:",A),T({open:!0,message:"   ",severity:"error"})}});return o(c,{sx:{minHeight:"100vh",bgcolor:"#f8f9fa",direction:"rtl"},children:[o(Xe,{maxWidth:"xl",sx:{py:3},children:[e(Y,{}),e(c,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:e(xe,{onClick:H,sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:e(Nr,{sx:{fontSize:28}})})}),e(nt,{sx:{mb:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:e(pt,{sx:{p:2},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e(ze,{label:"",value:h,onChange:L,size:"small",placeholder:"  ...",sx:{minWidth:200,flex:"1 1 200px","& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}},InputProps:{startAdornment:e(lo,{sx:{mr:1,color:"text.secondary",fontSize:"1.2rem"}})}}),o(Wt,{size:"small",sx:{minWidth:140},children:[e(Ot,{children:""}),o(Bt,{value:m,onChange:I=>y(I.target.value),label:"",sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),z.map(I=>e(We,{value:I.id,children:I.name},I.id))]})]}),o(Wt,{size:"small",sx:{minWidth:120},children:[e(Ot,{children:""}),o(Bt,{value:v,onChange:I=>S(I.target.value),label:"",sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),e(We,{value:"published",children:""}),e(We,{value:"draft",children:""})]})]}),e(_e,{label:`${t.length}  ${a.length}`,color:t.length!==a.length?"secondary":"primary",size:"small",variant:"outlined",sx:{minWidth:"fit-content",fontWeight:"bold",borderRadius:2}}),e(xe,{onClick:k,disabled:!h&&!m&&!v,size:"small",sx:{width:36,height:36,borderRadius:2,backgroundColor:"rgba(0,0,0,0.04)",color:"text.secondary","&:hover":{backgroundColor:"rgba(244,67,54,0.1)",color:"error.main",transform:"scale(1.05)"},"&:disabled":{opacity:.4,cursor:"not-allowed"},transition:"all 0.2s ease"},title:" ",children:e(J0,{sx:{fontSize:"1.1rem"}})})]})})}),M.length===0?e(ki,{in:!0,timeout:500,children:o(De,{elevation:0,sx:{p:{xs:3,md:6},textAlign:"center",bgcolor:"white",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",maxWidth:"600px",mx:"auto",my:4},children:[e(c,{sx:{width:120,height:120,mx:"auto",mb:3,position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(46, 204, 113, 0.1) 100%)",animation:`${QD} 2s infinite ease-in-out`}},children:e(zt,{color:"disabled",sx:{fontSize:60,position:"relative",top:"50%",transform:"translateY(-50%)"}})}),e(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:h?"  ":"    "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:"400px",mx:"auto"},children:h?"      .    .":'        "  "'}),e(re,{variant:"contained",startIcon:e(Nr,{}),onClick:H,sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",color:"white",borderRadius:2,px:4,py:1,fontWeight:"bold",textTransform:"none",boxShadow:"0 4px 14px rgba(14, 81, 129, 0.3)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)",transform:"translateY(-1px)"},transition:"all 0.3s ease"},children:"  "})]})}):o(nt,{sx:{borderRadius:3,boxShadow:2},children:[e(ni,{children:o(ei,{sx:{minWidth:650},"aria-label":"courses table",children:[e(ti,{children:o(or,{sx:{bgcolor:"#f8f9fa"},children:[e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:""}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:" "}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:""}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:""}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:""}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:""}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem",textAlign:"center"},children:""})]})}),e(ri,{children:M.slice(O*j,O*j+j).map(I=>{var A;return o(or,{hover:!0,sx:{"&:last-child td, &:last-child th":{border:0},cursor:"pointer","&:hover":{bgcolor:"rgba(14, 81, 129, 0.04)"}},onClick:()=>U(I.id),children:[e(be,{children:e(c,{component:"img",src:I.image||"https://via.placeholder.com/120x90/3498db/ffffff?text=Course",alt:I.title,sx:{width:120,height:90,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",objectFit:"cover",transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0,0,0,0.2)"}}})}),e(be,{children:o(c,{children:[e(f,{variant:"subtitle1",fontWeight:"bold",sx:{mb:.5},children:I.title}),e(f,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",maxWidth:200},children:I.short_description||I.description})]})}),e(be,{children:e(_e,{label:((A=I.category)==null?void 0:A.name)||I.category_name||" ",size:"small",sx:{fontWeight:"bold",bgcolor:"#3498db",color:"white",fontSize:"0.75rem"}})}),e(be,{children:o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Ca,{color:"action",fontSize:"small"}),e(f,{variant:"body2",children:I.total_enrollments||0})]})}),e(be,{children:o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(Pi,{sx:{color:"#f39c12",fontSize:"1rem"}}),e(f,{variant:"body2",children:I.average_rating||0})]})}),e(be,{children:e(f,{variant:"body2",color:I.is_free?"success.main":"primary.main",fontWeight:"bold",children:I.is_free?"":`$${I.price}`})}),e(be,{children:o(c,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"center",minWidth:120},children:[o(c,{sx:{display:"flex",gap:1},children:[e(Je,{title:" ",children:e(xe,{size:"small",sx:{bgcolor:"rgba(124,77,255,0.1)","&:hover":{bgcolor:"rgba(124,77,255,0.2)",transform:"scale(1.1)"}},onClick:Q=>{Q.stopPropagation(),V(`/teacher/courses/${I.id}/edit`)},children:e(Tr,{sx:{color:"#7c4dff",fontSize:"1rem"}})})}),e(Je,{title:" ",children:e(xe,{size:"small",sx:{bgcolor:"rgba(67,160,71,0.1)","&:hover":{bgcolor:"rgba(67,160,71,0.2)",transform:"scale(1.1)"}},onClick:Q=>{Q.stopPropagation(),V(`/courses/${I.id}`)},children:e(Lr,{sx:{color:"#43a047",fontSize:"1rem"}})})})]}),o(c,{sx:{display:"flex",gap:1},children:[e(Je,{title:" ",children:e(xe,{size:"small",sx:{bgcolor:"rgba(231,76,60,0.1)","&:hover":{bgcolor:"rgba(231,76,60,0.2)",transform:"scale(1.1)"}},onClick:Q=>{Q.stopPropagation(),V(`/teacher/courses/${I.id}/units`)},children:e(Gu,{sx:{color:"#e74c3c",fontSize:"1rem"}})})}),e(Je,{title:" ",children:e(xe,{size:"small",sx:{bgcolor:"rgba(192,57,43,0.1)","&:hover":{bgcolor:"rgba(192,57,43,0.2)",transform:"scale(1.1)"}},onClick:Q=>{Q.stopPropagation(),E(I.id)},children:e(tn,{sx:{color:"#c0392b",fontSize:"1rem"}})})})]})]})})]},I.id)})})]})}),e(Ea,{rowsPerPageOptions:[5,10,25],component:"div",count:M.length,rowsPerPage:j,page:O,onPageChange:G,onRowsPerPageChange:W,labelRowsPerPage:"   :",labelDisplayedRows:({from:I,to:A,count:Q})=>`${I}-${A}  ${Q!==-1?Q:`  ${A}`}`,sx:{direction:"rtl","& .MuiTablePagination-toolbar":{direction:"rtl"}}})]})]}),e(un,{open:B.open,autoHideDuration:6e3,onClose:N,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:N,severity:B.severity,sx:{width:"100%"},children:B.message})})]})},Lt={getQuizzes:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/assignments/quizzes/",{params:t})).data}catch(a){throw console.error("Error fetching quizzes:",a),a}}),getQuiz:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quizzes/${t}/`)).data}catch(n){throw console.error("Error fetching quiz:",n),n}}),getQuizQuestions:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quiz-questions/?quiz=${t}`)).data}catch(n){throw console.error("Error fetching quiz questions:",n),n}}),startQuizAttempt:t=>$(null,null,function*(){try{return(yield ne.post("/api/assignments/quiz-attempts/",{quiz:t})).data}catch(n){throw console.error("Error starting quiz attempt:",n),n}}),submitQuizAnswers:(t,n)=>$(null,null,function*(){var a,l;try{if(console.log("submitQuizAnswers called with:",{attemptId:t,answers:n}),!t)throw new Error("Attempt ID is required");if(!Array.isArray(n))throw new Error("Answers must be an array");const d=n.map(h=>({question_id:h.question_id,selected_answer_id:h.selected_answer_id||null,text_answer:h.text_answer||null}));console.log("Transformed answers:",d);let p;try{p=yield ne.post("/api/assignments/quiz-user-answers/submit_answers/",{attempt:t,answers:d})}catch(h){console.log("First attempt failed, trying alternative format:",(a=h.response)==null?void 0:a.data),p=yield ne.post("/api/assignments/quiz-user-answers/submit_answers/",{attempt:t,answers:d})}return p.data}catch(d){throw console.error("Error submitting quiz answers:",d),console.error("Error details:",(l=d.response)==null?void 0:l.data),d}}),finishQuizAttempt:t=>$(null,null,function*(){try{return(yield ne.patch(`/api/assignments/quiz-attempts/${t}/finish/`)).data}catch(n){throw console.error("Error finishing quiz attempt:",n),n}}),getQuizAttemptResult:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quiz-attempts/${t}/`)).data}catch(n){throw console.error("Error fetching quiz attempt result:",n),n}}),getUserQuizAttempts:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/assignments/quiz-attempts/",{params:t})).data}catch(a){throw console.error("Error fetching user quiz attempts:",a),a}}),getQuizAttemptAnswers:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quiz-user-answers/?attempt=${t}`)).data}catch(n){throw console.error("Error fetching quiz attempt answers:",n),n}}),getQuizAttemptResultAnswers:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quiz-user-answers/result_answers/?attempt=${t}`)).data}catch(n){throw console.error("Error fetching quiz attempt result answers:",n),n}}),getCourses:()=>$(null,null,function*(){try{return(yield ne.get("/api/courses/courses/")).data}catch(t){throw console.error("Error fetching courses:",t),t}}),getModules:t=>$(null,null,function*(){try{return(yield ne.get(`/api/courses/courses/${t}/modules/`)).data}catch(n){throw console.error("Error fetching modules:",n),n}}),createQuiz:t=>$(null,null,function*(){try{return(yield ne.post("/api/assignments/quizzes/",t)).data}catch(n){throw console.error("Error creating quiz:",n),n}}),updateQuiz:(t,n)=>$(null,null,function*(){try{return(yield ne.patch(`/api/assignments/quizzes/${t}/`,n)).data}catch(a){throw console.error("Error updating quiz:",a),a}}),deleteQuiz:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/assignments/quizzes/${t}/`)).data}catch(n){throw console.error("Error deleting quiz:",n),n}}),createQuizQuestion:t=>$(null,null,function*(){try{const n={quiz:parseInt(t.quiz),text:t.text.toString().trim(),question_type:t.question_type.toString(),points:parseInt(t.points)||1,explanation:t.explanation?t.explanation.toString():"",order:Math.max(0,parseInt(t.order)||0)};console.log(" Creating quiz question with clean data:",JSON.stringify(n,null,2));const a=yield ne.post("/api/assignments/quiz-questions/",n,{headers:{"Content-Type":"application/json"}});return console.log(" Quiz question created successfully:",a.data),a.data}catch(n){throw console.error(" Error creating quiz question:",n),n.response&&n.response.data&&console.error(" Server error details:",n.response.data),n}}),updateQuizQuestion:(t,n)=>$(null,null,function*(){try{const a={text:n.text.toString().trim(),question_type:n.question_type.toString(),points:parseInt(n.points)||1,explanation:n.explanation?n.explanation.toString():"",order:Math.max(0,parseInt(n.order)||0)};console.log(" Updating quiz question with clean data:",JSON.stringify(a,null,2));const l=yield ne.patch(`/api/assignments/quiz-questions/${t}/`,a,{headers:{"Content-Type":"application/json"}});return console.log(" Quiz question updated successfully:",l.data),l.data}catch(a){throw console.error(" Error updating quiz question:",a),a.response&&a.response.data&&console.error(" Server error details:",a.response.data),a}}),deleteQuizQuestion:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/assignments/quiz-questions/${t}/`)).data}catch(n){throw console.error("Error deleting quiz question:",n),n}}),createQuizAnswer:t=>$(null,null,function*(){try{return(yield ne.post("/api/assignments/quiz-answers/",t)).data}catch(n){throw console.error("Error creating quiz answer:",n),n}}),updateQuizAnswer:(t,n)=>$(null,null,function*(){try{return(yield ne.patch(`/api/assignments/quiz-answers/${t}/`,n)).data}catch(a){throw console.error("Error updating quiz answer:",a),a}}),deleteQuizAnswer:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/assignments/quiz-answers/${t}/`)).data}catch(n){throw console.error("Error deleting quiz answer:",n),n}}),getQuestionAnswers:t=>$(null,null,function*(){try{return(yield ne.get(`/api/assignments/quiz-answers/?question=${t}`)).data}catch(n){throw console.error("Error fetching question answers:",n),n}})};yt`
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
`;aw(nt)(({theme:t})=>({height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease-in-out",cursor:"pointer",position:"relative",overflow:"hidden",borderRadius:"16px",bgcolor:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 40px rgba(0,0,0,0.15)","& .MuiCardMedia-root":{transform:"scale(1.05)"},"& .action-buttons":{opacity:1,transform:"translateY(0)"}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:progress>=100?"linear-gradient(90deg, #43a047, #66bb6a)":"linear-gradient(90deg, #7c4dff, #43a047)",zIndex:1}}));aw(q0)({height:160,position:"relative",transition:"transform 0.5s ease-in-out",bgcolor:"#ecf0f1","&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"60%",background:"linear-gradient(to top, rgba(0,0,0,0.4) 0%, transparent 100%)",zIndex:1}});const b5=({isCompleted:t=!1})=>e(ki,{in:!0,timeout:500,children:o(c,{sx:{textAlign:"center",py:8,color:"#0e5181",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e(w6,{sx:{fontSize:80,color:"#e5978b"}}),e(f,{variant:"h5",fontWeight:700,gutterBottom:!0,children:t?"    ":"    "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:2},children:t?"      ":"        "}),!t&&e(re,{variant:"contained",size:"large",sx:{bgcolor:"#0e5181",borderRadius:3,px:5,py:1.5,fontWeight:700,"&:hover":{bgcolor:"#0a3d5f"}},onClick:()=>window.location.href="/courses",children:" "})]})}),XD=({course:t,onClick:n})=>{const a=ct(),[l,d]=w.useState(!1),[p,h]=w.useState([]),[x,m]=w.useState(!1),[y,v]=w.useState({totalLessons:0,completedLessons:0,duration:"0"}),S=Math.min(Math.max(t.progress||0,0),100),C=y.totalLessons||t.totalLessons||t.total_lessons||t.lessons_count||0,_=y.completedLessons||t.completedLessons||Math.floor(S/100*C),z=y.duration||t.duration||t.total_duration||"0",R=t.progress!==void 0?t.progress:S;console.log("Course data:",{id:t.id,title:t.title,progress:t.progress,totalLessons:t.totalLessons,completedLessons:t.completedLessons,duration:t.duration,total_duration:t.total_duration});const B=()=>$(null,null,function*(){var V,L;if(!l&&p.length===0){m(!0);try{const k=[];let G=0,W=0,M=0;const U=yield mr.getModules(t.id);console.log("Modules fetched:",U);const H=U.results||U||[];if(console.log("Modules array:",H),!Array.isArray(H))throw console.error("Modules is not an array:",H),new Error("Invalid modules data format");for(const E of H){const I=yield mr.getLessons({moduleId:E.id});console.log(`Lessons for module ${E.id}:`,I);const A=I.results||I||[];if(console.log(`Lessons array for module ${E.id}:`,A),!Array.isArray(A)){console.error(`Lessons for module ${E.id} is not an array:`,A);continue}const Q=A.map(J=>{if(G++,J.is_completed&&W++,J.duration){const P=J.duration.split(":");if(P.length===3){const ie=parseInt(P[0])||0,ue=parseInt(P[1])||0,fe=parseInt(P[2])||0;M+=ie*3600+ue*60+fe}}return{id:`lesson-${J.id}`,title:J.title,type:J.content_type||"video",duration:J.duration||null,completed:J.is_completed||!1,progress:J.progress_percentage||0,module_title:E.title,module_id:E.id,content_id:J.id,content_type:"lesson"}});k.push(...Q)}try{const E=yield lr.getAssignments({course:t.id});console.log("Assignments fetched:",E);const I=E.results||E||[];if(console.log("Assignments array:",I),!Array.isArray(I))throw console.error("Assignments is not an array:",I),new Error("Invalid assignments data format");const A=I.map(Q=>{var J,P;return{id:`assignment-${Q.id}`,title:Q.title,type:"assignment",duration:Q.due_date?new Date(Q.due_date).toLocaleDateString("ar-EG"):null,completed:Q.is_submitted||!1,progress:Q.grade?Math.round(Q.grade/Q.max_grade*100):0,module_title:((J=Q.module)==null?void 0:J.title)||"Assignment",module_id:(P=Q.module)==null?void 0:P.id,content_id:Q.id,content_type:"assignment",due_date:Q.due_date,grade:Q.grade,max_grade:Q.max_grade}});k.push(...A)}catch(E){console.log("No assignments found for course:",t.id)}try{const E=yield Lt.getQuizzes({course:t.id});console.log("Quizzes fetched:",E);const I=E.results||E||[];if(console.log("Quizzes array:",I),!Array.isArray(I))throw console.error("Quizzes is not an array:",I),new Error("Invalid quizzes data format");const A=I.map(Q=>{var J,P;return{id:`quiz-${Q.id}`,title:Q.title,type:"quiz",duration:Q.time_limit?`${Q.time_limit} min`:null,completed:Q.is_completed||!1,progress:Q.score?Math.round(Q.score/Q.max_score*100):0,module_title:((J=Q.module)==null?void 0:J.title)||"Quiz",module_id:(P=Q.module)==null?void 0:P.id,content_id:Q.id,content_type:"quiz",score:Q.score,max_score:Q.max_score,attempts:Q.attempts||0}});k.push(...A)}catch(E){console.log("No quizzes found for course:",t.id)}try{const E=yield nr.getExams({course:t.id});console.log("Exams fetched:",E);const I=E.results||E||[];if(console.log("Exams array:",I),!Array.isArray(I))throw console.error("Exams is not an array:",I),new Error("Invalid exams data format");const A=I.map(Q=>{var J,P;return{id:`exam-${Q.id}`,title:Q.title,type:"exam",duration:Q.duration?`${Q.duration} min`:null,completed:Q.is_completed||!1,progress:Q.score?Math.round(Q.score/Q.max_score*100):0,module_title:((J=Q.module)==null?void 0:J.title)||"Exam",module_id:(P=Q.module)==null?void 0:P.id,content_id:Q.id,content_type:"exam",score:Q.score,max_score:Q.max_score,attempts:Q.attempts||0}});k.push(...A)}catch(E){console.log("No exams found for course:",t.id)}t.resources&&t.resources.length>0&&t.resources.forEach(E=>{k.unshift({id:`resource-${E.id}`,title:E.title||"Resources",type:"resource",duration:null,completed:!1,progress:0,module_title:"Resources",content_id:E.id,content_type:"resource",resource_url:E.file_url})}),k.sort((E,I)=>{if(E.module_id&&I.module_id&&E.module_id!==I.module_id)return E.module_id-I.module_id;const A={resource:0,lesson:1,assignment:2,quiz:3,exam:4};return(A[E.content_type]||5)-(A[I.content_type]||5)});const N=G>0?Math.round(W/G*100):0,Y=M>0?`${Math.floor(M/3600)} ${Math.floor(M%3600/60)}`:"0";console.log("Calculated data:",{totalLessonsCount:G,completedLessonsCount:W,calculatedProgress:N,calculatedDuration:Y}),v({totalLessons:G,completedLessons:W,duration:Y}),h(k)}catch(k){console.error("Error fetching course content:",k),h([]),k.message.includes("Invalid")?console.error("Data format error:",k.message):((V=k.response)==null?void 0:V.status)===404?console.error("Course content not found"):((L=k.response)==null?void 0:L.status)===403?console.error("Access denied to course content"):console.error("Unexpected error:",k.message),console.warn("Failed to load course content. Please try again later.")}finally{m(!1)}}d(!l)}),T=(V,L)=>{switch(L){case"lesson":switch(V==null?void 0:V.toLowerCase()){case"video":case"video_lesson":return e(ji,{sx:{fontSize:16,color:"#666"}});case"text":case"article":return e(zt,{sx:{fontSize:16,color:"#666"}});default:return e(Oi,{sx:{fontSize:16,color:"#666"}})}case"assignment":return e(Tr,{sx:{fontSize:16,color:"#666"}});case"quiz":return e(o0,{sx:{fontSize:16,color:"#666"}});case"exam":return e(yr,{sx:{fontSize:16,color:"#666"}});case"resource":return e(io,{sx:{fontSize:16,color:"#666"}});default:return e(Oi,{sx:{fontSize:16,color:"#666"}})}},O=V=>{switch(V){case"lesson":return"#4caf50";case"assignment":return"#ff9800";case"quiz":return"#9c27b0";case"exam":return"#f44336";case"resource":return"#666";default:return"#666"}},q=V=>{switch(V){case"lesson":return"";case"assignment":return"";case"quiz":return"";case"exam":return"";case"resource":return"";default:return""}},j=V=>{switch(V.content_type){case"resource":return e(Kn,{sx:{fontSize:16}});case"lesson":return e(Oi,{sx:{fontSize:16}});case"assignment":return e(Tr,{sx:{fontSize:16}});case"quiz":return e(o0,{sx:{fontSize:16}});case"exam":return e(yr,{sx:{fontSize:16}});default:return e(Oi,{sx:{fontSize:16}})}},ee=V=>{switch(V.content_type){case"resource":V.resource_url&&window.open(V.resource_url,"_blank");break;case"lesson":a(`/student/courses/${t.id}/lessons/${V.content_id}`);break;case"assignment":a(`/student/courses/${t.id}/assignments/${V.content_id}`);break;case"quiz":a(`/student/courses/${t.id}/quizzes/${V.content_id}`);break;case"exam":a(`/student/courses/${t.id}/exams/${V.content_id}`);break;default:n(t.id)}};return o(nt,{sx:{borderRadius:"16px",mb:3,overflow:"hidden",background:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[o(c,{sx:{display:"flex",minHeight:200,flexDirection:{xs:"column",md:"row"}},children:[o(c,{sx:{flex:1,p:3,pb:2,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[o(c,{sx:{flex:1},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(f,{variant:"h6",sx:{fontSize:"18px",fontWeight:600,color:"#333"},children:t.title}),t.status&&e(_e,{label:t.status==="completed"?"":"",size:"small",sx:{bgcolor:t.status==="completed"?"#4caf50":"#2196f3",color:"white",fontSize:"10px",height:20}})]}),t.description&&e(f,{variant:"body2",sx:{color:"#666",fontSize:"14px",mb:1,lineHeight:1.4},children:t.description}),o(c,{sx:{display:"flex",gap:2,mb:1,flexWrap:"wrap",flexDirection:{xs:"column",sm:"row"}},children:[t.instructor&&o(f,{variant:"caption",sx:{color:"#999",fontSize:"12px",display:"flex",alignItems:"center",gap:.5},children:[e(zt,{sx:{fontSize:14}}),t.instructor]}),t.category&&e(f,{variant:"caption",sx:{color:"#999",fontSize:"12px"},children:t.category}),t.enrollment_date&&o(f,{variant:"caption",sx:{color:"#999",fontSize:"12px"},children:[" : ",new Date(t.enrollment_date).toLocaleDateString("ar-EG")]})]}),o(c,{sx:{mb:1},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e(f,{variant:"caption",sx:{color:"#666",fontSize:"12px",fontWeight:500},children:""}),o(f,{variant:"caption",sx:{color:"#0e5181",fontSize:"12px",fontWeight:600},children:[Math.round(R),"%"]})]}),e(Sr,{variant:"determinate",value:R,sx:{height:6,borderRadius:3,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{background:R>=100?"linear-gradient(90deg, #4caf50, #66bb6a)":"linear-gradient(90deg, #0e5181, #1a6ba8)",borderRadius:3}}})]}),o(f,{variant:"body2",sx:{color:"#666",fontSize:"14px",mb:2},children:[C>0?`${_}  ${C}  `:"   ","  ",z,"  ",t.grade&&o("span",{style:{marginLeft:"8px",color:"#4caf50",fontWeight:"bold"},children:[" : ",t.grade]}),o("span",{style:{marginLeft:"8px",color:"#0e5181",fontWeight:"bold"},children:[" : ",Math.round(R),"%"]})]}),l&&p.length>0&&o(f,{variant:"caption",sx:{color:"#4caf50",fontSize:"12px",fontWeight:"bold"},children:[p.length,"   "]}),l&&p.length>0&&e(c,{sx:{display:"flex",gap:1,mt:1,flexWrap:"wrap"},children:(()=>{const V=p.reduce((L,k)=>(L[k.content_type]=(L[k.content_type]||0)+1,L),{});return Object.entries(V).map(([L,k])=>e(_e,{label:`${k} ${q(L)}`,size:"small",sx:{bgcolor:O(L),color:"white",fontSize:"10px",height:20}},L))})()}),l&&p.length>0&&o(f,{variant:"caption",sx:{color:"#999",fontSize:"10px",fontStyle:"italic"},children:[" : ",new Date().toLocaleTimeString("ar-EG")]}),l&&p.length===0&&!x&&e(f,{variant:"caption",sx:{color:"#f44336",fontSize:"11px",fontStyle:"italic"},children:"    .    ."}),l&&p.length===0&&!x&&e(re,{variant:"outlined",size:"small",onClick:B,sx:{mt:1,fontSize:"10px",py:.5,px:2,minWidth:"auto"},children:" "}),x&&o(c,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[e(Qe,{size:16,sx:{color:"#7c4dff"}}),e(f,{variant:"caption",sx:{color:"#666",fontSize:"11px"},children:"  ..."})]}),!l&&p.length>0&&o(c,{sx:{display:"flex",gap:.5,mt:.5,flexWrap:"wrap"},children:[(()=>{const V=p.reduce((L,k)=>(L[k.content_type]=(L[k.content_type]||0)+1,L),{});return Object.entries(V).slice(0,3).map(([L,k])=>e(_e,{label:`${k} ${q(L)}`,size:"small",sx:{bgcolor:O(L),color:"white",fontSize:"9px",height:18}},L))})(),Object.keys(p.reduce((V,L)=>(V[L.content_type]=(V[L.content_type]||0)+1,V),{})).length>3&&o(f,{variant:"caption",sx:{color:"#999",fontSize:"9px",alignSelf:"center"},children:["+",Object.keys(p.reduce((V,L)=>(V[L.content_type]=(V[L.content_type]||0)+1,V),{})).length-3," "]})]}),!l&&p.length>0&&e(c,{sx:{mt:.5},children:o(f,{variant:"caption",sx:{color:"#0e5181",fontSize:"10px",fontWeight:500},children:[": ",Math.round(p.filter(V=>V.completed).length/p.length*100),"% "]})}),!l&&x&&o(c,{sx:{display:"flex",alignItems:"center",gap:.5,mt:.5},children:[e(Qe,{size:12,sx:{color:"#7c4dff"}}),e(f,{variant:"caption",sx:{color:"#666",fontSize:"10px"},children:" ..."})]})]}),e(re,{variant:"contained",sx:{bgcolor:t.status==="completed"?"#4caf50":"#2196f3",color:"white",borderRadius:"8px",px:3,py:1,fontSize:"14px",fontWeight:600,textTransform:"none",minWidth:100,alignSelf:"flex-start",mt:2,"&:hover":{bgcolor:t.status==="completed"?"#45a049":"#1976d2"}},onClick:V=>{V.stopPropagation(),n(t.id)},children:t.status==="completed"?"":R>0?"":""})]}),e(c,{sx:{display:"flex",justifyContent:"center",mt:2,borderTop:"1px solid #f0f0f0",pt:2,bgcolor:"#fafafa"},children:e(xe,{onClick:B,sx:{color:"#666",border:"none",outline:"none","&:hover":{bgcolor:"rgba(0,0,0,0.04)"},"&:focus":{outline:"none",border:"none"}},children:l?e(ow,{}):e(Eh,{})})})]}),e(X0,{in:l,timeout:"auto",unmountOnExit:!0,children:e(c,{sx:{borderTop:"1px solid #f0f0f0",bgcolor:"#fafafa"},children:x?o(c,{sx:{p:3,textAlign:"center"},children:[e(Qe,{size:24,sx:{color:"#7c4dff"}}),e(f,{variant:"body2",sx:{color:"#666",mt:1},children:"   ..."})]}):p.length===0?o(c,{sx:{p:3,textAlign:"center",color:"#666"},children:[e(zt,{sx:{fontSize:40,color:"#ccc",mb:1}}),e(f,{variant:"body2",sx:{mb:1},children:"      "}),e(f,{variant:"caption",sx:{color:"#999"},children:"   "})]}):e(Rr,{sx:{p:0},children:p.map((V,L)=>o(bt.Fragment,{children:[o(ir,{sx:{py:1.5,px:3,"&:hover":{bgcolor:"rgba(0,0,0,0.02)"}},children:[e(fr,{sx:{minWidth:40},children:e(Fi,{checked:V.completed,sx:{p:.5,"&.Mui-checked":{color:"#4caf50"}}})}),e(fr,{sx:{minWidth:32},children:T(V.type,V.content_type)}),e(Ut,{primary:o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(_e,{label:q(V.content_type),size:"small",sx:{bgcolor:O(V.content_type),color:"white",fontSize:"11px",height:20,"& .MuiChip-label":{px:1}}}),e(f,{variant:"body2",sx:{fontSize:"14px",color:"#333"},children:V.title}),V.module_title&&o(f,{variant:"caption",sx:{fontSize:"11px",color:"#999",ml:1,fontStyle:"italic"},children:["(",V.module_title,")"]})]})}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[(V.content_type==="assignment"||V.content_type==="quiz"||V.content_type==="exam")&&V.progress!==void 0?o(Rt,{children:[e(f,{variant:"body2",sx:{color:"#666",fontSize:"12px"},children:V.content_type==="assignment"&&V.grade?`${V.grade}/${V.max_grade}`:V.duration||`${Math.round(V.progress)}%`}),e(c,{sx:{width:40,height:4,bgcolor:"#f0f0f0",borderRadius:2,overflow:"hidden"},children:e(c,{sx:{width:`${V.progress}%`,height:"100%",bgcolor:O(V.content_type),borderRadius:2}})})]}):e(f,{variant:"body2",sx:{color:"#666",fontSize:"12px"},children:V.content_type==="resource"?" ":V.duration||"--:--"}),e(xe,{size:"small",sx:{color:"#999"},onClick:k=>{k.stopPropagation(),ee(V)},children:j(V)})]})]}),L<p.length-1&&e(Vt,{})]},V.id))})})})]})},KD=({course:t})=>e(nt,{sx:{display:"flex",alignItems:"center",borderRadius:"16px",minHeight:200,boxShadow:"0 8px 32px 0 rgba(229, 151, 139, 0.15)",mb:3,overflow:"hidden",background:"linear-gradient(120deg, #fdf2f2 0%, #fff 100%)",transition:"transform 0.25s, box-shadow 0.25s",border:"2px solid #e5978b","&:hover":{transform:"translateY(-8px) scale(1.03)",boxShadow:"0 16px 48px 0 rgba(229, 151, 139, 0.25)",border:"2px solid #e5978b"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #e5978b, #f0a8a0)",zIndex:1}},children:e(c,{sx:{display:"flex",width:"100%",flexDirection:{xs:"column",md:"row"}},children:o(c,{sx:{flex:1,p:3,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:e(_e,{label:t.category,sx:{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181",fontWeight:700,fontSize:14}})}),e(f,{variant:"h6",fontWeight:800,color:"#0e5181",sx:{mb:.5,fontSize:22},children:t.title}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:1.5,minHeight:36,fontSize:16},children:t.description}),o(f,{variant:"caption",color:"text.secondary",sx:{mb:1,fontSize:15},children:[e(zt,{sx:{fontSize:20,color:"#e5978b",ml:.5}}),t.instructor]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mt:1},children:[o(c,{sx:{flexGrow:1},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e(f,{variant:"caption",sx:{color:"#666",fontSize:"12px",fontWeight:500},children:""}),o(f,{variant:"caption",sx:{color:"#e5978b",fontSize:"12px",fontWeight:600},children:[Math.round(100),"%"]})]}),e(c,{sx:{height:12,bgcolor:"rgba(229, 151, 139, 0.1)",borderRadius:6,overflow:"hidden",position:"relative",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:e(c,{sx:{width:"100%",height:"100%",background:"linear-gradient(90deg, #e5978b 0%, #f0a8a0 100%)",borderRadius:6,transition:"width 0.8s ease-in-out",position:"relative","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.2) 100%)",borderRadius:6}}})})]}),e(yr,{sx:{color:"#e5978b",fontSize:28}})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mt:1},children:[o(f,{variant:"body2",fontWeight:700,color:"#e5978b",sx:{fontSize:16},children:[" - ",t.grade||"A"]}),t.completion_date&&o(f,{variant:"caption",color:"text.secondary",sx:{fontSize:14},children:["  : ",new Date(t.completion_date).toLocaleDateString("ar-EG")]})]}),e(c,{sx:{display:"flex",alignItems:"center",gap:2,mt:3},children:e(re,{variant:"outlined",size:"large",startIcon:e(zt,{}),sx:{color:"#0e5181",borderColor:"#0e5181",borderRadius:3,fontWeight:700,fontSize:18,px:5,py:1.5,"&:hover":{bgcolor:"rgba(14, 81, 129, 0.1)",borderColor:"#0e5181"}},children:" "})})]})})}),y5=()=>{const[t,n]=w.useState(0),[a,l]=w.useState(!0),[d,p]=w.useState(null),[h,x]=w.useState([]),[m,y]=w.useState([]),v=ct();w.useEffect(()=>{S()},[]);const S=()=>$(null,null,function*(){try{l(!0),p(null);const _=yield An.getMyEnrolledCourses(),z=(_.enrolled_courses||[]).map(B=>oe(X({},B),{progress:Math.min(Math.max(B.progress||0,0),100),totalLessons:B.totalLessons||B.total_lessons||0,completedLessons:B.completedLessons||Math.floor((B.progress||0)/100*(B.totalLessons||B.total_lessons||0)),duration:B.duration||B.total_duration||"0"})),R=(_.completed_courses||[]).map(B=>oe(X({},B),{progress:100,totalLessons:B.totalLessons||B.total_lessons||0,completedLessons:B.totalLessons||B.total_lessons||0,duration:B.duration||B.total_duration||"0"}));x(z),y(R)}catch(_){console.error("Error fetching courses:",_),p("    .    .")}finally{l(!1)}}),C=_=>{v(`/student/courses/${_}`)};return a?o(c,{sx:{minHeight:"100vh",background:"linear-gradient(120deg, #ede7f6 0%, #fff 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2},children:[e(Qe,{size:60,sx:{color:"#7c4dff"}}),e(f,{variant:"h6",sx:{color:"#7c4dff",fontWeight:600},children:"  ..."})]}):d?e(c,{sx:{minHeight:"100vh",background:"linear-gradient(120deg, #ede7f6 0%, #fff 100%)",py:4},children:e(Xe,{maxWidth:"xl",children:o(c,{sx:{textAlign:"center",py:8},children:[e(Be,{severity:"error",sx:{mb:3,maxWidth:600,mx:"auto"},children:d}),e(re,{variant:"contained",onClick:S,sx:{bgcolor:"#7c4dff",borderRadius:3,px:4,py:1.5,fontWeight:600,"&:hover":{bgcolor:"#6a3dcc"}},children:" "})]})})}):o(c,{sx:{minHeight:"100vh",background:"linear-gradient(120deg, #ede7f6 0%, #fff 100%)",py:0,px:0},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(zt,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:""})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"      "})]})]}),o(Xe,{maxWidth:"xl",children:[o(c,{sx:{display:"flex",justifyContent:"center",mb:4},children:[o(re,{variant:t===0?"contained":"outlined",onClick:()=>n(0),sx:{mx:1,bgcolor:t===0?"#0e5181":"#fff",color:t===0?"#fff":"#0e5181",borderColor:"#0e5181",fontWeight:700,borderRadius:3,px:4,py:1.2,boxShadow:t===0?"0 2px 12px 0 rgba(14, 81, 129, 0.2)":"none","&:hover":{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181"}},children:["  (",h.length,")"]}),o(re,{variant:t===1?"contained":"outlined",onClick:()=>n(1),sx:{mx:1,bgcolor:t===1?"#e5978b":"#fff",color:t===1?"#fff":"#e5978b",borderColor:"#e5978b",fontWeight:700,borderRadius:3,px:4,py:1.2,boxShadow:t===1?"0 2px 12px 0 rgba(229, 151, 139, 0.2)":"none","&:hover":{bgcolor:"rgba(229, 151, 139, 0.1)",color:"#e5978b"}},children:["  (",m.length,")"]})]}),e(c,{children:t===0?h.length>0?h.map(_=>e(XD,{course:_,onClick:C},_.id)):e(b5,{isCompleted:!1}):m.length>0?m.map(_=>e(KD,{course:_},_.id)):e(b5,{isCompleted:!0})})]})]})},ZD=te(Xe)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",textAlign:"center",padding:t.spacing(4)})),JD=()=>{const t=ct();return o(ZD,{maxWidth:"md",children:[e(c,{sx:{width:200,height:200,mb:4},children:o("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"},children:[e("rect",{width:"500",height:"500",rx:"250",fill:"#F5F7FA"}),e("path",{d:"M250 150V300M300 225H200",stroke:"#4F46E5",strokeWidth:"20",strokeLinecap:"round"}),e("path",{d:"M250 350C245.5 350 242 346.5 242 342C242 337.5 245.5 334 250 334C254.5 334 258 337.5 258 342C258 346.5 254.5 350 250 350Z",fill:"#4F46E5"}),e("path",{d:"M250 100C172.525 100 110 162.525 110 240C110 317.475 172.525 380 250 380C327.475 380 390 317.475 390 240C390 162.525 327.475 100 250 100ZM250 350C189.725 350 140 300.275 140 240C140 179.725 189.725 130 250 130C310.275 130 360 179.725 360 240C360 300.275 310.275 350 250 350Z",fill:"#4F46E5"})]})}),e(f,{variant:"h1",component:"h1",sx:{fontSize:"6rem",fontWeight:700,mb:2},children:"404"}),e(f,{variant:"h4",component:"h2",gutterBottom:!0,children:"Oops! Page not found"}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:4,maxWidth:"600px"},children:"The page you are looking for might have been removed, had its name changed, or is temporarily unavailable."}),o(c,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e(re,{variant:"contained",size:"large",onClick:()=>t(-1),sx:{px:4,py:1.5},children:"Go Back"}),e(re,{variant:"outlined",size:"large",onClick:()=>t("/"),sx:{px:4,py:1.5},children:"Go to Home"})]})]})},e9=()=>e(Xe,{maxWidth:"md",children:o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",textAlign:"center",p:3},children:[e(oh,{sx:{fontSize:80,color:"error.main",mb:2}}),e(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"  "}),e(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:"        ."}),e(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"          ."}),e(re,{variant:"contained",color:"primary",component:hr,to:"/",sx:{mt:3},children:"  "})]})}),t9=()=>{const{getUserRole:t}=uo(),n=t();return w.useEffect(()=>{console.log(`Redirecting user with role: ${n}`)},[n]),e(cl,{to:(()=>{switch(n){case"student":return"/student/dashboard";case"instructor":case"teacher":return"/teacher/dashboard";default:return"/login"}})(),replace:!0})},r9=()=>{const t=ct(),[n,a]=w.useState([]),[l,d]=w.useState(!0),[p,h]=w.useState(null),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,C]=w.useState(0),[_,z]=w.useState(10),[R,B]=w.useState(""),[T,O]=w.useState(""),[q,j]=w.useState(""),[ee,V]=w.useState([]),[L,k]=w.useState([]),[G,W]=w.useState([]);w.useEffect(()=>{$(null,null,function*(){yield U(),yield M()})},[]),w.useEffect(()=>{M()},[R,T,q]),w.useEffect(()=>{$(null,null,function*(){if(T)try{console.log("Fetching modules for selected course:",T);const P=yield Lt.getModules(T);let ie=[];Array.isArray(P)?ie=P:P&&typeof P=="object"&&(Array.isArray(P.modules)?ie=P.modules:Array.isArray(P.results)?ie=P.results:Array.isArray(P.data)&&(ie=P.data)),console.log("Updated modules for selected course:",ie),k(ie)}catch(P){console.error("Error fetching modules for selected course:",P),k([])}else k([]);j("")})},[T]),w.useEffect(()=>{console.log("Current modules state:",L),console.log("Current selected course:",T),console.log("Current selected module:",q)},[L,T,q]);const M=()=>$(null,null,function*(){var J;try{d(!0),h(null),console.log("Fetching quizzes...");const P={};R&&(P.search=R),T&&(P.course=T),q&&(P.module=q);const ie=yield Lt.getQuizzes(P);console.log("Raw quiz data:",ie);const ue=Array.isArray(ie)?ie:ie.results||ie.data||[];if(console.log("Processed quiz data:",ue),console.log("Number of quizzes:",ue.length),ue.forEach((fe,de)=>{console.log(`Quiz ${de+1}:`,{id:fe.id,title:fe.title,course:fe.course,module:fe.module,quiz_type:fe.quiz_type})}),a(ue),W(ue),L.length===0&&ue.length>0){const fe=[],de=new Map;ue.forEach(K=>{K.module&&!de.has(K.module.id)&&(de.set(K.module.id,K.module),fe.push(K.module))}),fe.length>0&&(k(fe),console.log("Updated modules from quizzes:",fe))}if(T&&L.length===0)try{const fe=yield Lt.getModules(T);let de=[];Array.isArray(fe)?de=fe:fe&&typeof fe=="object"&&(Array.isArray(fe.modules)?de=fe.modules:Array.isArray(fe.results)?de=fe.results:Array.isArray(fe.data)&&(de=fe.data)),k(de)}catch(fe){console.error("Error fetching modules for selected course:",fe)}}catch(P){console.error("Error fetching quizzes:",P),console.error("Error details:",(J=P.response)==null?void 0:J.data),h("    .    .")}finally{d(!1)}}),U=()=>$(null,null,function*(){try{console.log("Starting to fetch filter options...");const J=yield Lt.getCourses(),P=Array.isArray(J)?J:J.results||J.data||[];console.log("Fetched courses:",P),V(P);const ie=[],ue=new Map;console.log("Fetching modules for each course...");for(const fe of P)try{console.log(`Fetching modules for course: ${fe.title} (ID: ${fe.id})`);const de=yield Lt.getModules(fe.id);let K=[];Array.isArray(de)?K=de:de&&typeof de=="object"&&(Array.isArray(de.modules)?K=de.modules:Array.isArray(de.results)?K=de.results:Array.isArray(de.data)&&(K=de.data)),console.log(`Modules for course ${fe.title}:`,K),K.forEach(se=>{ue.has(se.id)||(ue.set(se.id,se),ie.push(se))})}catch(de){console.error(`Error fetching modules for course ${fe.id}:`,de)}console.log("Final all modules:",ie),k(ie)}catch(J){console.error("Error fetching filter options:",J)}}),H=J=>$(null,null,function*(){try{yield Lt.deleteQuiz(J),a(n.filter(P=>P.id!==J)),m(!1),v(null)}catch(P){console.error("Error deleting quiz:",P),h("    .    .")}}),N=J=>{v(J),m(!0)},Y=()=>{m(!1),v(null)},E=(J,P)=>{C(P)},I=J=>{z(parseInt(J.target.value,10)),C(0)},A=()=>{B(""),O(""),j("")},Q=J=>({video:"",module:"",quick:""})[J]||J;return l?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})}):o(c,{sx:{p:{xs:1,md:3}},children:[console.log("Current modules state:",L),console.log("Current courses state:",ee),o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(ar,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"      "})]})]}),o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(ar,{sx:{color:"#e5978b",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:n.length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(ar,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:n.filter(J=>J.is_active).length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(ar,{sx:{color:"#1976d2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary.main",children:n.filter(J=>J.quiz_type==="video").length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(ar,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:n.filter(J=>J.quiz_type==="module").length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),e(c,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:e(xe,{onClick:()=>t("/teacher/quizzes/create"),sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:e(Nr,{sx:{fontSize:28}})})}),p&&e(Be,{severity:"error",sx:{mb:3},onClose:()=>h(null),children:p}),e(nt,{sx:{mb:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:e(pt,{sx:{p:2},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e(ze,{label:"",value:R,onChange:J=>B(J.target.value),size:"small",placeholder:"  ...",sx:{minWidth:200,flex:"1 1 200px","& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}},InputProps:{startAdornment:e(lo,{sx:{mr:1,color:"text.secondary",fontSize:"1.2rem"}})}}),o(Wt,{size:"small",sx:{minWidth:140},children:[e(Ot,{children:""}),o(Bt,{value:T,onChange:J=>O(J.target.value),label:"",sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),ee.map(J=>e(We,{value:J.id,children:J.title},J.id))]})]}),o(Wt,{size:"small",sx:{minWidth:140},children:[e(Ot,{children:""}),o(Bt,{value:q,onChange:J=>j(J.target.value),label:"",sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),L.map(J=>e(We,{value:J.id,children:J.name||J.title},J.id))]})]}),e(_e,{label:`${n.length}  ${G.length}`,color:n.length!==G.length?"secondary":"primary",size:"small",variant:"outlined",sx:{minWidth:"fit-content",fontWeight:"bold",borderRadius:2}}),e(xe,{onClick:A,disabled:!R&&!T&&!q,size:"small",sx:{width:36,height:36,borderRadius:2,backgroundColor:"rgba(0,0,0,0.04)",color:"text.secondary","&:hover":{backgroundColor:"rgba(244,67,54,0.1)",color:"error.main",transform:"scale(1.05)"},"&:disabled":{opacity:.4,cursor:"not-allowed"},transition:"all 0.2s ease"},title:" ",children:e(J0,{sx:{fontSize:"1.1rem"}})})]})})}),n.length===0&&!l?o(c,{sx:{textAlign:"center",py:8},children:[e(f,{variant:"h6",color:"text.secondary",mb:2,children:"    "}),e(re,{variant:"contained",startIcon:e(Nr,{}),onClick:()=>t("/teacher/quizzes/create"),sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"  "})]}):o(De,{className:"assignments-table",sx:{width:"100%",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[e(ni,{sx:{maxHeight:600},children:o(ei,{stickyHeader:!0,children:[e(ti,{children:o(or,{sx:{backgroundColor:"#f8f9fa"},children:[e(be,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"right",py:2},children:" "}),e(be,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"right",py:2},children:" "}),e(be,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"center",py:2},children:""}),e(be,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"center",py:2},children:""}),e(be,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"right",py:2},children:"  "}),e(be,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"center",py:2},children:""})]})}),e(ri,{children:n.slice(S*_,S*_+_).map(J=>o(or,{sx:{"&:hover":{backgroundColor:"#f8f9fa",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s ease",borderBottom:"1px solid #f0f0f0"},children:[e(be,{children:o(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50%",backgroundColor:"#f3e5f5",color:"#0e5181"},children:e(ar,{sx:{fontSize:18}})}),e(f,{variant:"subtitle1",fontWeight:700,color:"#2c3e50",sx:{fontSize:"1rem",lineHeight:1.2,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:J.title})]}),J.description&&e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem",lineHeight:1.4,maxWidth:280,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",opacity:.8},children:J.description})]})}),e(be,{children:o(c,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[J.course&&o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(c,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#0e5181"}}),e(f,{variant:"body2",fontWeight:600,color:"#2c3e50",sx:{fontSize:"0.9rem",lineHeight:1.2},children:J.course.title})]}),J.module&&o(c,{sx:{display:"flex",alignItems:"center",gap:1,ml:1},children:[e(c,{sx:{width:6,height:6,borderRadius:"50%",backgroundColor:"#9e9e9e"}}),e(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem",lineHeight:1.2,opacity:.8},children:J.module.name||J.module.title})]})]})}),e(be,{children:e(c,{sx:{display:"flex",justifyContent:"center"},children:e(_e,{label:Q(J.quiz_type),size:"small",color:"secondary",sx:{fontWeight:700,fontSize:"0.75rem",height:24,borderRadius:12,backgroundColor:"#f3e5f5",color:"#0e5181",border:"1px solid #e1bee7"}})})}),e(be,{children:e(c,{sx:{display:"flex",justifyContent:"center"},children:e(_e,{label:J.is_active?"":" ",size:"small",color:J.is_active?"success":"warning",sx:{fontWeight:700,fontSize:"0.75rem",height:24,borderRadius:12,backgroundColor:J.is_active?"#e8f5e8":"#fff3e0",color:J.is_active?"#2e7d32":"#f57c00",border:J.is_active?"1px solid #c8e6c9":"1px solid #ffcc80"}})})}),e(be,{children:o(c,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[J.time_limit&&o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(c,{sx:{width:16,height:16,borderRadius:"50%",backgroundColor:"#e3f2fd",display:"flex",alignItems:"center",justifyContent:"center"},children:e(c,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#1976d2"}})}),o(f,{variant:"body2",fontWeight:600,color:"#2c3e50",sx:{fontSize:"0.85rem",lineHeight:1.2},children:[J.time_limit," "]})]}),J.pass_mark&&o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(c,{sx:{width:16,height:16,borderRadius:"50%",backgroundColor:"#e8f5e8",display:"flex",alignItems:"center",justifyContent:"center"},children:e(c,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#2e7d32"}})}),o(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem",lineHeight:1.2,opacity:.8},children:[J.pass_mark,"% "]})]})]})}),e(be,{children:o(c,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>t(`/teacher/quizzes/${J.id}`),sx:{color:"#1976d2",backgroundColor:"#e3f2fd",width:32,height:32,"&:hover":{backgroundColor:"#bbdefb",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Lr,{sx:{fontSize:16}})})}),e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>t(`/teacher/quizzes/${J.id}/edit`),sx:{color:"#1976d2",backgroundColor:"#f3e5f5",width:32,height:32,"&:hover":{backgroundColor:"#e1bee7",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(Tr,{sx:{fontSize:16}})})}),e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>N(J),sx:{color:"#d32f2f",backgroundColor:"#ffebee",width:32,height:32,"&:hover":{backgroundColor:"#ffcdd2",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:e(tn,{sx:{fontSize:16}})})})]})})]},J.id))})]})}),e(Ea,{rowsPerPageOptions:[5,10,25,50],component:"div",count:n.length,rowsPerPage:_,page:S,onPageChange:E,onRowsPerPageChange:I,labelRowsPerPage:"  :",labelDisplayedRows:({from:J,to:P,count:ie})=>`${J}-${P}  ${ie}`,sx:{backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0"}})]}),o(wr,{open:x,onClose:Y,children:[e(Wr,{children:" "}),e(vr,{children:o(f,{children:['      "',y==null?void 0:y.title,'"      .']})}),o($r,{children:[e(re,{onClick:Y,children:""}),e(re,{onClick:()=>H(y==null?void 0:y.id),color:"error",variant:"contained",children:""})]})]})]})},n9=[{value:"video",label:" "},{value:"module",label:" "},{value:"quick",label:" "}],i9=[{value:"multiple_choice",label:"  "},{value:"true_false",label:"  "},{value:"short_answer",label:" "}],v5=()=>{const t=ct(),{quizId:n}=cr(),a=!!n,[l,d]=w.useState(!1),[p,h]=w.useState(!1),[x,m]=w.useState(null),[y,v]=w.useState(null),[S,C]=w.useState([]),[_,z]=w.useState([]),[R,B]=w.useState({title:"",description:"",quiz_type:"video",module:"",course:"",time_limit:10,pass_mark:60,is_active:!0,questions:[]});w.useEffect(()=>{$(null,null,function*(){yield T(),a&&n&&(yield O())})},[a,n]),w.useEffect(()=>{R.course?q(R.course):z([])},[R.course]);const T=()=>$(null,null,function*(){try{d(!0),console.log("Fetching courses...");const N=yield Lt.getCourses();console.log("Courses data:",N);const Y=Array.isArray(N)?N:N.results||N.data||[];console.log("Processed courses:",Y),C(Y)}catch(N){console.error("Error fetching courses:",N),m("    ")}finally{d(!1)}}),O=()=>$(null,null,function*(){var N,Y;try{d(!0);const E=yield Lt.getQuiz(n);console.log("Quiz data:",E);const I=(E.questions||[]).map(J=>{if(console.log("Processing question:",J),J.question_type==="true_false"&&J.answers){const P=J.answers.find(ie=>ie.is_correct);if(console.log("True/false correct answer:",P),P){const ie=P.text==="";return oe(X({},J),{correct_answer:ie?"true":"false"})}else return console.warn("No correct answer found for true/false question:",J.id),oe(X({},J),{correct_answer:null})}if(J.question_type==="multiple_choice"&&J.answers){console.log("Multiple choice answers:",J.answers),console.log("Raw answer data:",JSON.stringify(J.answers,null,2));const P=J.answers.map((ie,ue)=>(console.log(`Processing answer ${ue}:`,ie),console.log(`Answer ${ue} is_correct:`,ie.is_correct,"Type:",typeof ie.is_correct),oe(X({},ie),{text:ie.text||"",is_correct:!!ie.is_correct,explanation:ie.explanation||""})));return console.log("Processed multiple choice answers:",P),console.log("Correct answers found:",P.filter(ie=>ie.is_correct).length),oe(X({},J),{answers:P})}return J}),A=((N=E.course)==null?void 0:N.id)||E.course,Q=((Y=E.module)==null?void 0:Y.id)||E.module;console.log("Course ID:",A,"Module ID:",Q),B({title:E.title||"",description:E.description||"",quiz_type:E.quiz_type||"video",module:Q||"",course:A||"",time_limit:E.time_limit||10,pass_mark:E.pass_mark||60,is_active:E.is_active!==void 0?E.is_active:!0,questions:I}),A&&(console.log("Fetching modules for course:",A),yield q(A))}catch(E){console.error("Error fetching quiz:",E),m("     ")}finally{d(!1)}}),q=N=>$(null,null,function*(){try{console.log("Fetching modules for course:",N);const Y=yield Lt.getModules(N);console.log("Raw modules data:",Y);let E=[];Array.isArray(Y)?E=Y:Y&&typeof Y=="object"&&(Array.isArray(Y.modules)?E=Y.modules:Array.isArray(Y.results)?E=Y.results:Array.isArray(Y.data)&&(E=Y.data)),console.log("Processed modules:",E),z(E)}catch(Y){console.error("Error fetching modules:",Y),z([])}}),j=N=>{const{name:Y,value:E,type:I,checked:A}=N.target;B(oe(X({},R),{[Y]:I==="checkbox"?A:E}))},ee=()=>{B(oe(X({},R),{questions:[...R.questions,{text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1}],correct_answer:null}]}))},V=(N,Y,E)=>{const I=R.questions.map((A,Q)=>{if(Q===N){const J=oe(X({},A),{[Y]:E});return Y==="question_type"&&(console.log(`Changing question ${N+1} type from ${A.question_type} to ${E}`),E==="true_false"?(console.log("Clearing answers for true/false question"),J.answers=[],J.correct_answer=null):E==="multiple_choice"?(console.log("Setting up multiple choice answers"),J.answers=[{text:"",is_correct:!1}],J.correct_answer=null):E==="short_answer"&&(console.log("Clearing answers for short answer question"),J.answers=[],J.correct_answer=null)),J}return A});B(oe(X({},R),{questions:I}))},L=N=>{const Y=R.questions.map((E,I)=>I===N?oe(X({},E),{answers:[...E.answers,{text:"",is_correct:!1}]}):E);B(oe(X({},R),{questions:Y}))},k=(N,Y,E,I)=>{const A=R.questions.map((Q,J)=>J===N?oe(X({},Q),{answers:Q.answers.map((P,ie)=>ie===Y?oe(X({},P),{[E]:I}):P)}):Q);B(oe(X({},R),{questions:A}))},G=N=>{const Y=R.questions.filter((E,I)=>I!==N);B(oe(X({},R),{questions:Y}))},W=(N,Y)=>{const E=R.questions.map((I,A)=>A===N?oe(X({},I),{answers:I.answers.filter((Q,J)=>J!==Y)}):I);B(oe(X({},R),{questions:E}))},M=N=>{const Y={id:N.id||null,text:N.text||"",question_type:N.question_type||"multiple_choice",points:N.points||1,explanation:N.explanation||"",order:N.order||0};return N.question_type==="multiple_choice"?oe(X({},Y),{answers:Array.isArray(N.answers)?N.answers.map(E=>({id:E.id||null,text:E.text||"",is_correct:E.is_correct||!1,explanation:E.explanation||"",order:E.order||0})):[],correct_answer:null}):N.question_type==="true_false"?oe(X({},Y),{answers:[],correct_answer:N.correct_answer||null}):oe(X({},Y),{answers:[],correct_answer:null})},U=()=>{if(!R.title.trim())return m("   "),!1;if(!R.course)return m("  "),!1;if(R.questions.length===0)return m("     "),!1;for(let N=0;N<R.questions.length;N++){const Y=R.questions[N];if(!Y.text.trim())return m(`     ${N+1}`),!1;if(Y.question_type==="multiple_choice"&&Y.answers.length<2)return m(`       ${N+1}`),!1;if(Y.question_type==="multiple_choice"){for(let I=0;I<Y.answers.length;I++){const A=Y.answers[I];if(!A.text||!A.text.trim())return m(`     ${I+1}   ${N+1}`),!1}if(!Y.answers.some(I=>I.is_correct))return m(`      ${N+1}`),!1}if(Y.question_type==="true_false"&&!Y.correct_answer)return m(`      ${N+1}`),!1}return!0},H=()=>$(null,null,function*(){if(U())try{h(!0),m(null),v(null);const N=oe(X({},R),{questions:R.questions.map((I,A)=>oe(X({},M(I)),{order:A}))});console.log(" Cleaned quiz data for saving:",N);const Y={title:R.title,description:R.description,quiz_type:R.quiz_type,course:R.course,module:R.module||null,time_limit:R.time_limit,pass_mark:R.pass_mark,is_active:R.is_active};if(console.log("Saving quiz data:",Y),!Y.course){m("  ");return}let E;if(a?E=yield Lt.updateQuiz(n,Y):E=yield Lt.createQuiz(Y),console.log("Saved quiz:",E),!E||!E.id)throw new Error("   ");if(R.questions.length>0){if(a)try{console.log(" Checking for questions to delete...");const I=yield Lt.getQuizQuestions(E.id);console.log(" Raw existing questions response:",I);let A=[];if(Array.isArray(I)?A=I:I&&typeof I=="object"&&(Array.isArray(I.results)?A=I.results:Array.isArray(I.data)&&(A=I.data)),A.length>0){console.log(" Existing questions from database:",A.map(ie=>({id:ie.id,text:ie.text}))),console.log(" Current questions in form:",R.questions.map(ie=>({id:ie.id,text:ie.text})));const Q=R.questions.filter(ie=>ie.id).map(ie=>ie.id),J=A.map(ie=>ie.id);console.log(" Current question IDs:",Q),console.log(" Existing question IDs:",J);const P=J.filter(ie=>!Q.includes(ie));if(console.log(" Questions to delete:",P),P.length>0){console.log(` Deleting ${P.length} removed questions...`);for(const ie of P)try{yield Lt.deleteQuizQuestion(ie),console.log(` Deleted removed question ${ie}`)}catch(ue){console.error(` Error deleting question ${ie}:`,ue)}}else console.log(" No questions to delete")}else console.log(" No existing questions found in database")}catch(I){console.error(" Error fetching existing questions:",I)}for(let I=0;I<N.questions.length;I++){const A=N.questions[I],Q=M(A),J={quiz:E.id,text:Q.text.trim(),question_type:Q.question_type,points:parseInt(Q.points)||1,explanation:Q.explanation||"",order:I};if(console.log(" Question data being sent:",JSON.stringify(J,null,2)),console.log(" Quiz ID type:",typeof E.id),console.log(" Quiz ID value:",E.id),console.log(" Order value:",J.order,"Type:",typeof J.order),!J.quiz)throw new Error(`  : ${JSON.stringify(J)}`);if(!J.text||!J.text.trim())throw new Error(`  : ${JSON.stringify(J)}`);if(!J.question_type)throw new Error(`  : ${JSON.stringify(J)}`);J.points<1&&(J.points=1),J.order<0&&(J.order=0),console.log(" Final question data validation:",{quiz:J.quiz,text:J.text,question_type:J.question_type,points:J.points,order:J.order,hasQuiz:!!J.quiz,hasText:!!J.text,hasQuestionType:!!J.question_type,hasPoints:!!J.points,hasOrder:J.order>=0});let P;if(A.id?P=yield Lt.updateQuizQuestion(A.id,J):P=yield Lt.createQuizQuestion(J),console.log("Saved question:",P),!P||!P.id)throw new Error(`   : ${JSON.stringify(P)}`);if(Q.question_type==="multiple_choice"&&Q.answers.length>0){if(console.log("Processing multiple choice answers for question:",P.id),console.log("All answers:",Q.answers),A.id){console.log("Deleting existing answers for question:",A.id);try{const ie=yield Lt.getQuestionAnswers(A.id);console.log("Raw existing answers response:",ie);let ue=[];if(Array.isArray(ie)?ue=ie:ie&&typeof ie=="object"&&(Array.isArray(ie.results)?ue=ie.results:Array.isArray(ie.data)&&(ue=ie.data)),ue.length>0){console.log(" Deleting existing answers:",ue.map(fe=>({id:fe.id,text:fe.text})));for(const fe of ue)try{yield Lt.deleteQuizAnswer(fe.id),console.log(` Deleted existing answer ${fe.id}`)}catch(de){console.error(` Error deleting existing answer ${fe.id}:`,de)}}else console.log(" No existing answers found for question:",A.id)}catch(ie){console.error(" Error fetching existing answers:",ie)}}for(let ie=0;ie<Q.answers.length;ie++){const ue=Q.answers[ie];if(!ue.text||!ue.text.trim())throw new Error(`     ${ie+1}`);const fe={question:P.id,text:ue.text.trim(),is_correct:ue.is_correct||!1,explanation:ue.explanation||"",order:ie};console.log(`Creating answer ${ie+1} with data:`,fe);try{yield Lt.createQuizAnswer(fe),console.log(` Answer ${ie+1} created successfully`)}catch(de){throw console.error(` Error creating answer ${ie+1}:`,de),new Error(`     ${ie+1}: ${de.message}`)}}}if(Q.question_type==="true_false"&&Q.correct_answer){if(console.log("Processing true/false answer for question:",P.id),console.log("Correct answer:",Q.correct_answer),A.id){console.log("Deleting existing true/false answers for question:",A.id);try{const fe=yield Lt.getQuestionAnswers(A.id);console.log("Raw existing true/false answers response:",fe);let de=[];if(Array.isArray(fe)?de=fe:fe&&typeof fe=="object"&&(Array.isArray(fe.results)?de=fe.results:Array.isArray(fe.data)&&(de=fe.data)),de.length>0){console.log(" Deleting existing true/false answers:",de.map(K=>({id:K.id,text:K.text})));for(const K of de)try{yield Lt.deleteQuizAnswer(K.id),console.log(` Deleted existing answer ${K.id}`)}catch(se){console.error(` Error deleting existing answer ${K.id}:`,se)}}else console.log(" No existing true/false answers found for question:",A.id)}catch(fe){console.error(" Error fetching existing answers:",fe)}}const ie=Q.correct_answer==="true"?"":"",ue={question:P.id,text:ie,is_correct:!0,explanation:"",order:0};console.log("Creating correct answer with data:",ue);try{yield Lt.createQuizAnswer(ue),console.log(` Correct answer "${ie}" created successfully`)}catch(fe){throw console.error(" Error creating correct answer:",fe),new Error(`    : ${fe.message}`)}}}}v(a?"   ":"   "),setTimeout(()=>{t("/teacher/quizzes")},1500)}catch(N){console.error("Error saving quiz:",N);let Y="    .    .";if(N.response&&N.response.data){const E=N.response.data;E.detail?Y=E.detail:E.message?Y=E.message:typeof E=="string"?Y=E:E.non_field_errors&&(Y=E.non_field_errors.join(", "))}else N.message&&(Y=N.message);m(Y)}finally{h(!1)}});return l?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})}):o(c,{sx:{maxWidth:900,mx:"auto",p:{xs:1,md:3}},children:[e(re,{startIcon:e(qt,{}),sx:{mb:2},onClick:()=>t(-1),children:""}),o(De,{sx:{p:4,borderRadius:3,boxShadow:3},children:[e(f,{variant:"h5",fontWeight:700,mb:3,children:a?" ":"  "}),x&&e(Be,{severity:"error",sx:{mb:3},onClose:()=>m(null),children:x}),y&&e(Be,{severity:"success",sx:{mb:3},children:y}),o(kn,{spacing:2,children:[e(ze,{label:" ",name:"title",value:R.title,onChange:j,fullWidth:!0,required:!0}),e(ze,{label:" ",name:"description",value:R.description,onChange:j,fullWidth:!0,multiline:!0,rows:2}),o(kn,{direction:{xs:"column",sm:"row"},spacing:2,children:[e(ze,{select:!0,label:" ",name:"quiz_type",value:R.quiz_type,onChange:j,sx:{minWidth:180},children:n9.map(N=>e(We,{value:N.value,children:N.label},N.value))}),o(ze,{select:!0,label:"",name:"course",value:R.course,onChange:j,sx:{minWidth:180},required:!0,children:[e(We,{value:"",children:" "}),S.map(N=>e(We,{value:N.id,children:N.title},N.id))]}),o(ze,{select:!0,label:"",name:"module",value:R.module,onChange:j,sx:{minWidth:180},disabled:!R.course,children:[e(We,{value:"",children:"  ()"}),_.map(N=>e(We,{value:N.id,children:N.name||N.title},N.id))]})]}),o(kn,{direction:{xs:"column",sm:"row"},spacing:2,children:[e(ze,{label:" ",name:"time_limit",type:"number",value:R.time_limit,onChange:j,sx:{minWidth:180}}),e(ze,{label:"  (%)",name:"pass_mark",type:"number",value:R.pass_mark,onChange:j,sx:{minWidth:180}}),e(wt,{control:e(xr,{checked:R.is_active,onChange:j,name:"is_active"}),label:""})]})]}),e(Vt,{sx:{my:4}}),o(c,{children:[o(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e(f,{variant:"h6",fontWeight:700,children:""}),e(re,{startIcon:e(Nr,{}),sx:{ml:2},onClick:ee,children:" "})]}),e(kn,{spacing:3,children:R.questions.map((N,Y)=>o(De,{sx:{p:3,borderRadius:2,position:"relative"},children:[e(xe,{size:"small",color:"error",sx:{position:"absolute",top:8,left:8},onClick:()=>G(Y),children:e(tn,{})}),o(kn,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,children:[e(ze,{label:" ",value:N.text,onChange:E=>V(Y,"text",E.target.value),fullWidth:!0,required:!0}),e(ze,{select:!0,label:" ",value:N.question_type,onChange:E=>V(Y,"question_type",E.target.value),sx:{minWidth:180},children:i9.map(E=>e(We,{value:E.value,children:E.label},E.value))}),e(ze,{label:"",type:"number",value:N.points,onChange:E=>V(Y,"points",E.target.value),sx:{minWidth:120}})]}),e(ze,{label:"  ()",value:N.explanation||"",onChange:E=>V(Y,"explanation",E.target.value),fullWidth:!0,multiline:!0,rows:2,sx:{mb:2}}),N.question_type==="multiple_choice"&&o(c,{children:[e(f,{variant:"subtitle2",mb:1,children:""}),e(kn,{spacing:1,children:N.answers.map((E,I)=>o(kn,{direction:"row",spacing:1,alignItems:"center",children:[e(ze,{label:` ${I+1}`,value:E.text,onChange:A=>k(Y,I,"text",A.target.value),sx:{flex:1},required:!0}),e(_e,{label:E.is_correct?"":"",color:E.is_correct?"success":"default",onClick:()=>k(Y,I,"is_correct",!E.is_correct),sx:{cursor:"pointer"}}),e(xe,{size:"small",color:"error",onClick:()=>W(Y,I),disabled:N.answers.length<=1,children:e(tn,{})})]},I))}),e(re,{startIcon:e(Nr,{}),sx:{mt:1},onClick:()=>L(Y),children:" "})]}),N.question_type==="true_false"&&o(c,{children:[e(f,{variant:"subtitle2",mb:1,children:"  "}),o(kn,{direction:"row",spacing:2,children:[e(_e,{label:"",color:N.correct_answer==="true"?"success":"default",onClick:()=>V(Y,"correct_answer","true"),sx:{cursor:"pointer",px:3,py:1},variant:N.correct_answer==="true"?"filled":"outlined"}),e(_e,{label:"",color:N.correct_answer==="false"?"success":"default",onClick:()=>V(Y,"correct_answer","false"),sx:{cursor:"pointer",px:3,py:1},variant:N.correct_answer==="false"?"filled":"outlined"})]})]})]},Y))})]}),o(c,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[e(re,{variant:"outlined",onClick:()=>t(-1),disabled:p,children:""}),e(re,{variant:"contained",startIcon:p?e(Qe,{size:20}):e(os,{}),sx:{fontWeight:"bold",px:4},onClick:H,disabled:p,children:p?" ...":a?" ":" "})]})]})]})},a9=()=>{var z;const t=ct(),{quizId:n}=cr(),[a,l]=w.useState(null),[d,p]=w.useState(!0),[h,x]=w.useState(null),[m,y]=w.useState(!1);w.useEffect(()=>{v()},[n]);const v=()=>$(null,null,function*(){try{p(!0),x(null);const R=yield Lt.getQuiz(n);l(R)}catch(R){console.error("Error fetching quiz:",R),x("     ")}finally{p(!1)}}),S=()=>$(null,null,function*(){try{yield Lt.deleteQuiz(n),y(!1),t("/teacher/quizzes")}catch(R){console.error("Error deleting quiz:",R),x("    ")}}),C=R=>({video:"",module:"",quick:""})[R]||R,_=R=>({multiple_choice:"  ",true_false:"  ",short_answer:" "})[R]||R;return d?o(c,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"60vh",gap:3},children:[e(Qe,{size:60,thickness:4}),e(f,{variant:"h6",color:"text.secondary",children:"   ..."})]}):h?o(c,{sx:{maxWidth:1e3,mx:"auto",p:{xs:2,md:4}},children:[e(re,{startIcon:e(qt,{}),variant:"outlined",sx:{mb:3,borderRadius:2,px:3},onClick:()=>t(-1),children:" "}),o(De,{sx:{p:4,borderRadius:3,textAlign:"center",bgcolor:"error.50",border:"1px solid",borderColor:"error.200"},children:[e(Be,{severity:"error",sx:{mb:2},children:h}),e(re,{variant:"contained",onClick:()=>v(),sx:{mt:2},children:" "})]})]}):a?o(c,{sx:{maxWidth:1e3,mx:"auto",p:{xs:2,md:4}},children:[e(c,{sx:{mb:3},children:e(re,{startIcon:e(qt,{}),variant:"outlined",sx:{mb:2,borderRadius:2,px:3,"&:hover":{backgroundColor:"primary.light",color:"white"}},onClick:()=>t(-1),children:" "})}),o(De,{sx:{p:{xs:3,md:4},borderRadius:4,boxShadow:"0 8px 32px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)"},children:[e(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:3,flexWrap:"wrap"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2,flex:1,minWidth:0},children:[e(c,{sx:{p:1.5,borderRadius:3,bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:e(ar,{sx:{fontSize:32}})}),o(c,{sx:{minWidth:0,flex:1},children:[e(f,{variant:"h4",fontWeight:700,sx:{mb:.5,color:"text.primary",wordBreak:"break-word"},children:a.title}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(_e,{label:C(a.quiz_type),color:"secondary",size:"small",sx:{borderRadius:2}}),!a.is_active&&e(_e,{label:" ",color:"warning",size:"small",sx:{borderRadius:2}})]})]})]})}),a.description&&e(De,{sx:{p:3,mb:3,borderRadius:3,bgcolor:"grey.50",border:"1px solid",borderColor:"grey.200"},children:e(f,{variant:"body1",color:"text.secondary",sx:{lineHeight:1.6},children:a.description})}),o(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2,mb:4},children:[a.course&&o(De,{sx:{p:2.5,borderRadius:3,bgcolor:"primary.50",border:"1px solid",borderColor:"primary.200"},children:[e(f,{variant:"body2",color:"primary.dark",fontWeight:600,mb:.5,children:""}),e(f,{variant:"body1",fontWeight:500,children:a.course.title})]}),a.module&&o(De,{sx:{p:2.5,borderRadius:3,bgcolor:"secondary.50",border:"1px solid",borderColor:"secondary.200"},children:[e(f,{variant:"body2",color:"secondary.dark",fontWeight:600,mb:.5,children:""}),e(f,{variant:"body1",fontWeight:500,children:a.module.name})]}),(a.time_limit||a.pass_mark)&&o(De,{sx:{p:2.5,borderRadius:3,bgcolor:"info.50",border:"1px solid",borderColor:"info.200"},children:[e(f,{variant:"body2",color:"info.dark",fontWeight:600,mb:.5,children:""}),o(f,{variant:"body1",fontWeight:500,children:[a.time_limit&&`${a.time_limit} `,a.time_limit&&a.pass_mark&&" | ",a.pass_mark&&`${a.pass_mark}% `]})]})]}),e(Vt,{sx:{my:3,borderColor:"grey.300"}}),o(c,{sx:{mb:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:4},children:[e(f,{variant:"h5",fontWeight:700,color:"text.primary",children:" "}),e(_e,{label:`${((z=a.questions)==null?void 0:z.length)||0} `,color:"primary",variant:"outlined",sx:{borderRadius:2}})]}),a.questions&&a.questions.length>0?e(kn,{spacing:4,children:a.questions.map((R,B)=>o(De,{sx:{p:4,borderRadius:4,bgcolor:"white",border:"1px solid",borderColor:"grey.200",boxShadow:"0 4px 16px rgba(0,0,0,0.08)","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)",transition:"all 0.3s ease-in-out"}},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e(c,{sx:{minWidth:50,height:50,borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"1.2rem",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"},children:B+1}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(_e,{label:_(R.question_type),size:"small",color:"secondary",sx:{borderRadius:2,fontWeight:600}}),e(_e,{label:`${R.points} `,size:"small",color:"info",variant:"outlined",sx:{borderRadius:2,fontWeight:600}})]})]}),e(c,{sx:{mb:3},children:e(f,{variant:"h6",fontWeight:600,sx:{lineHeight:1.6,wordBreak:"break-word",color:"text.primary",fontSize:"1.1rem"},children:R.text})}),R.explanation&&o(De,{sx:{p:3,mb:3,borderRadius:3,bgcolor:"warning.50",border:"1px solid",borderColor:"warning.200",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:0,left:0,width:"4px",height:"100%",bgcolor:"warning.main"}}),e(f,{variant:"body2",color:"warning.dark",fontWeight:600,mb:1,children:"  :"}),e(f,{variant:"body1",color:"text.secondary",sx:{lineHeight:1.6},children:R.explanation})]}),R.answers&&R.answers.length>0&&o(c,{children:[o(f,{variant:"h6",color:"text.primary",fontWeight:600,mb:2,sx:{display:"flex",alignItems:"center",gap:1},children:[e(c,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"primary.main"}})," :"]}),e(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:R.answers.map((T,O)=>o(De,{sx:{p:2.5,borderRadius:3,border:"2px solid",borderColor:T.is_correct?"success.main":"grey.300",bgcolor:T.is_correct?"success.50":"grey.50",position:"relative",overflow:"hidden",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:[T.is_correct&&e(c,{sx:{position:"absolute",top:0,right:0,width:0,height:0,borderStyle:"solid",borderWidth:"0 30px 30px 0",borderColor:"transparent success.main transparent transparent"}}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[o(c,{sx:{minWidth:32,height:32,borderRadius:"50%",bgcolor:T.is_correct?"success.main":"grey.400",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.9rem"},children:[String.fromCharCode(65+O)," "]}),e(f,{variant:"body1",fontWeight:T.is_correct?600:500,sx:{color:T.is_correct?"success.dark":"text.primary",lineHeight:1.4},children:T.text})]}),T.is_correct&&e(c,{sx:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:.5},children:e(f,{variant:"caption",sx:{color:"success.main",fontWeight:700,fontSize:"0.7rem"},children:"  "})})]},T.id||O))})]})]},R.id||B))}):o(De,{sx:{p:8,borderRadius:4,bgcolor:"grey.50",border:"2px dashed",borderColor:"grey.300",textAlign:"center"},children:[e(c,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:"grey.300",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:e(f,{variant:"h4",color:"grey.500",children:"?"})}),e(f,{variant:"h6",color:"text.secondary",mb:2,children:"  "}),e(f,{variant:"body1",color:"text.secondary",sx:{maxWidth:400,mx:"auto"},children:"       .       ."})]})]}),o(c,{sx:{display:"flex",justifyContent:"flex-end",gap:2,pt:3,borderTop:"1px solid",borderColor:"grey.200"},children:[e(re,{variant:"outlined",startIcon:e(Tr,{}),onClick:()=>t(`/teacher/quizzes/${a.id}/edit`),sx:{borderRadius:2,px:4,py:1.5,fontWeight:600},children:" "}),e(re,{variant:"contained",color:"error",startIcon:e(tn,{}),onClick:()=>y(!0),sx:{borderRadius:2,px:4,py:1.5,fontWeight:600},children:" "})]})]}),o(wr,{open:m,onClose:()=>y(!1),PaperProps:{sx:{borderRadius:3,maxWidth:500,width:"90%"}},children:[e(Wr,{sx:{pb:1,borderBottom:"1px solid",borderColor:"grey.200"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{p:1,borderRadius:2,bgcolor:"error.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:e(tn,{sx:{fontSize:24}})}),e(f,{variant:"h6",fontWeight:600,children:"  "})]})}),o(vr,{sx:{pt:3},children:[e(f,{variant:"body1",sx:{mb:2,lineHeight:1.6},children:"     :"}),e(De,{sx:{p:2,mb:2,borderRadius:2,bgcolor:"error.50",border:"1px solid",borderColor:"error.200"},children:o(f,{variant:"h6",fontWeight:600,color:"error.dark",children:['"',a.title,'"']})}),e(f,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.5},children:" :      .       ."})]}),o($r,{sx:{p:3,pt:2,gap:2},children:[e(re,{onClick:()=>y(!1),variant:"outlined",sx:{borderRadius:2,px:3,py:1,fontWeight:600},children:""}),e(re,{onClick:S,color:"error",variant:"contained",startIcon:e(tn,{}),sx:{borderRadius:2,px:3,py:1,fontWeight:600},children:" "})]})]})]}):o(c,{sx:{maxWidth:1e3,mx:"auto",p:{xs:2,md:4}},children:[e(re,{startIcon:e(qt,{}),variant:"outlined",sx:{mb:3,borderRadius:2,px:3},onClick:()=>t(-1),children:" "}),o(De,{sx:{p:6,borderRadius:3,textAlign:"center",bgcolor:"warning.50",border:"1px solid",borderColor:"warning.200"},children:[e(Be,{severity:"warning",sx:{mb:2},children:"  "}),e(f,{variant:"body1",color:"text.secondary",children:"            "})]})]})},o9=()=>{const t=ct(),[n,a]=w.useState([]),[l,d]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState(!1),[S,C]=w.useState(null),[_,z]=w.useState({search:"",course:"",module:"",isFinal:"",isActive:""}),[R,B]=w.useState([]),[T,O]=w.useState([]),[q,j]=w.useState([]),[ee,V]=w.useState(!1);w.useEffect(()=>{L(),k()},[]),w.useEffect(()=>{W()},[n,_]),w.useEffect(()=>{const E=setTimeout(()=>{W()},300);return()=>clearTimeout(E)},[_.search]),w.useEffect(()=>{if(_.course){const E=T.filter(I=>I.course===parseInt(_.course));j(E),_.module&&(E.some(A=>A.id===parseInt(_.module))||z(A=>oe(X({},A),{module:""})))}else j(T)},[_.course,T]);const L=()=>$(null,null,function*(){try{h(!0),m(null);const E=yield nr.getExams();a(E.results||E)}catch(E){console.error("Error fetching exams:",E),m("    ")}finally{h(!1)}}),k=()=>$(null,null,function*(){try{V(!0);const E=yield gn.getMyCourses(),I=E.results||E;B(I),yield G(),console.log("Fetched courses:",I.length)}catch(E){console.error("Error fetching courses:",E);try{const I=yield gn.getCourses(),A=I.results||I;B(A),yield G(),console.log("Fetched public courses:",A.length)}catch(I){console.error("Error fetching public courses:",I)}}finally{V(!1)}}),G=()=>$(null,null,function*(){try{const E=yield ne.get("/content/modules/"),I=E.data.results||E.data;O(I),j(I),console.log("Fetched modules from content API:",I.length)}catch(E){console.error("Error fetching modules:",E),O([]),j([])}}),W=()=>{let E=[...n];_.search&&(E=E.filter(I=>{var A;return I.title.toLowerCase().includes(_.search.toLowerCase())||((A=I.description)==null?void 0:A.toLowerCase().includes(_.search.toLowerCase()))})),_.course&&(E=E.filter(I=>{var A;return((A=I.course)==null?void 0:A.id)===parseInt(_.course)})),_.module&&(E=E.filter(I=>{var A;return((A=I.module)==null?void 0:A.id)===parseInt(_.module)})),_.isFinal!==""&&(E=E.filter(I=>I.is_final===(_.isFinal==="true"))),_.isActive!==""&&(E=E.filter(I=>I.is_active===(_.isActive==="true"))),d(E)},M=(E,I)=>{z(A=>oe(X({},A),{[E]:I}))},U=()=>{z({search:"",course:"",module:"",isFinal:"",isActive:""})},H=E=>$(null,null,function*(){try{yield nr.deleteExam(E),a(n.filter(I=>I.id!==E)),d(l.filter(I=>I.id!==E)),v(!1),C(null)}catch(I){console.error("Error deleting exam:",I),m("    ")}}),N=E=>{C(E),v(!0)},Y=E=>E?new Date(E).toLocaleDateString("ar-EG"):"---";return p?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})}):o(c,{sx:{p:{xs:1,md:3}},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(jr,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"  "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"      "})]})]}),o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(jr,{sx:{color:"#0e5181",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:n.length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(jr,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:n.filter(E=>E.is_active).length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(jr,{sx:{color:"#1976d2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary.main",children:n.filter(E=>E.is_final).length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(jr,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:n.filter(E=>!E.is_final).length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),e(c,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:e(xe,{onClick:()=>t("/teacher/exams/create"),sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:e(Nr,{sx:{fontSize:28}})})}),x&&e(Be,{severity:"error",sx:{mb:2},children:x}),e(nt,{sx:{mb:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:e(pt,{sx:{p:2},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e(ze,{label:"",value:_.search,onChange:E=>M("search",E.target.value),size:"small",placeholder:"  ...",sx:{minWidth:200,flex:"1 1 200px","& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}},InputProps:{startAdornment:e(lo,{sx:{mr:1,color:"text.secondary",fontSize:"1.2rem"}})}}),o(Wt,{size:"small",sx:{minWidth:140},children:[e(Ot,{children:""}),o(Bt,{value:_.course,onChange:E=>M("course",E.target.value),label:"",disabled:ee,sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),R.length>0?R.map(E=>e(We,{value:E.id,children:E.title},E.id)):e(We,{disabled:!0,children:ee?" ...":"   "})]})]}),o(Wt,{size:"small",sx:{minWidth:140},children:[e(Ot,{children:""}),o(Bt,{value:_.module,onChange:E=>M("module",E.target.value),label:"",disabled:ee,sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),q.length>0?q.map(E=>e(We,{value:E.id,children:E.name||E.title},E.id)):e(We,{disabled:!0,children:ee?" ...":_.course?"    ":"   "})]})]}),o(Wt,{size:"small",sx:{minWidth:120},children:[e(Ot,{children:""}),o(Bt,{value:_.isFinal,onChange:E=>M("isFinal",E.target.value),label:"",sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),e(We,{value:"true",children:""}),e(We,{value:"false",children:""})]})]}),o(Wt,{size:"small",sx:{minWidth:120},children:[e(Ot,{children:""}),o(Bt,{value:_.isActive,onChange:E=>M("isActive",E.target.value),label:"",sx:{borderRadius:2,backgroundColor:"white"},children:[e(We,{value:"",children:""}),e(We,{value:"true",children:""}),e(We,{value:"false",children:""})]})]}),e(_e,{label:`${l.length}  ${n.length}`,color:l.length!==n.length?"secondary":"primary",size:"small",variant:"outlined",sx:{minWidth:"fit-content",fontWeight:"bold",borderRadius:2}}),e(xe,{onClick:U,disabled:!_.search&&!_.course&&!_.module&&!_.isFinal&&!_.isActive,size:"small",sx:{width:36,height:36,borderRadius:2,backgroundColor:"rgba(0,0,0,0.04)",color:"text.secondary","&:hover":{backgroundColor:"rgba(244,67,54,0.1)",color:"error.main",transform:"scale(1.05)"},"&:disabled":{opacity:.4,cursor:"not-allowed"},transition:"all 0.2s ease"},title:" ",children:e(J0,{sx:{fontSize:"1.1rem"}})})]})})}),e(De,{elevation:2,sx:{borderRadius:3},children:e(ni,{children:o(ei,{children:[e(ti,{children:o(or,{children:[e(be,{children:""}),e(be,{children:""}),e(be,{children:""}),e(be,{children:""}),e(be,{children:""}),e(be,{children:" "}),e(be,{align:"center",children:""})]})}),e(ri,{children:l.length===0?e(or,{children:e(be,{colSpan:7,align:"center",children:e(f,{variant:"body1",color:"text.secondary",children:n.length===0?"   ":"     "})})}):l.map(E=>{var I,A;return o(or,{hover:!0,children:[e(be,{children:E.title}),e(be,{children:((I=E.course)==null?void 0:I.title)||"---"}),e(be,{children:((A=E.module)==null?void 0:A.name)||"---"}),e(be,{children:E.is_final?e(_e,{label:"",color:"success",size:"small"}):e(_e,{label:"",color:"info",size:"small"})}),e(be,{children:E.is_active?e(_e,{label:"",color:"primary",size:"small"}):e(_e,{label:"",color:"default",size:"small"})}),e(be,{children:Y(E.created_at)}),o(be,{align:"center",children:[e(Je,{title:" ",children:e(xe,{onClick:()=>t(`/teacher/exams/${E.id}`),children:e(Lr,{color:"primary"})})}),e(Je,{title:"",children:e(xe,{onClick:()=>t(`/teacher/exams/${E.id}/edit`),children:e(Tr,{color:"warning"})})}),e(Je,{title:"",children:e(xe,{onClick:()=>N(E),children:e(tn,{color:"error"})})})]})]},E.id)})})]})})}),o(wr,{open:y,onClose:()=>v(!1),children:[e(Wr,{children:" "}),e(vr,{children:o(f,{children:['      "',S==null?void 0:S.title,'"      .']})}),o($r,{children:[e(re,{onClick:()=>v(!1),children:""}),e(re,{onClick:()=>H(S==null?void 0:S.id),color:"error",variant:"contained",children:""})]})]})]})},w5=({isEdit:t=!1})=>{var V,L;const n=ct(),{examId:a}=cr(),[l,d]=w.useState({title:"",description:"",course:"",module:"",time_limit:"",pass_mark:60,total_points:100,is_final:!1,is_active:!0,allow_multiple_attempts:!1,max_attempts:1,show_answers_after:!1,randomize_questions:!1,start_date:"",end_date:""}),[p,h]=w.useState([]),[x,m]=w.useState([]),[y,v]=w.useState(!1),[S,C]=w.useState(!1),[_,z]=w.useState(null);w.useEffect(()=>{R(),t&&a&&T()},[t,a]),w.useEffect(()=>{console.log("Form data changed:",l)},[l]),w.useEffect(()=>{console.log("Modules changed:",x)},[x]),w.useEffect(()=>{console.log("Course changed to:",l.course),l.course?B(l.course):(console.log("No course selected, clearing modules"),m([]))},[l.course]);const R=()=>$(null,null,function*(){try{console.log("Fetching courses...");const k=yield gn.getCourses();console.log("Courses response:",k);let G=[];Array.isArray(k)?G=k:k&&Array.isArray(k.results)?G=k.results:k&&typeof k=="object"&&(G=k.results||k.courses||[]),Array.isArray(G)||(console.warn("Courses is not an array, converting to empty array:",G),G=[]),console.log("Final courses list:",G),h(G)}catch(k){console.error("Error fetching courses:",k),z("    "),h([])}}),B=k=>$(null,null,function*(){try{console.log("Fetching modules for course:",k);let G;try{G=yield gn.getCourseModules(k),console.log("Modules response from getCourseModules:",G)}catch(M){console.log("getCourseModules failed, trying getCourse:",M);const U=yield gn.getCourse(k);console.log("Course response:",U),G={results:U.modules||[]}}let W=[];Array.isArray(G)?W=G:G&&Array.isArray(G.results)?W=G.results:G&&Array.isArray(G.modules)?W=G.modules:G&&typeof G=="object"&&(W=G.modules||G.results||[]),Array.isArray(W)||(console.warn("Modules is not an array, converting to empty array:",W),W=[]),console.log("Final modules list:",W),m(W)}catch(G){console.error("Error fetching modules:",G),m([])}}),T=()=>$(null,null,function*(){var k,G,W,M,U,H,N,Y,E,I;try{v(!0);const A=yield nr.getExam(a);console.log("Fetched exam data:",A);const Q=((G=(k=A.course)==null?void 0:k.id)==null?void 0:G.toString())||((W=A.course)==null?void 0:W.toString())||"",J=((U=(M=A.module)==null?void 0:M.id)==null?void 0:U.toString())||((H=A.module)==null?void 0:H.toString())||"";d({title:A.title||"",description:A.description||"",course:Q,module:J,time_limit:((N=A.time_limit)==null?void 0:N.toString())||"",pass_mark:((Y=A.pass_mark)==null?void 0:Y.toString())||"60",total_points:((E=A.total_points)==null?void 0:E.toString())||"100",is_final:A.is_final||!1,is_active:A.is_active!==void 0?A.is_active:!0,allow_multiple_attempts:A.allow_multiple_attempts||!1,max_attempts:((I=A.max_attempts)==null?void 0:I.toString())||"1",show_answers_after:A.show_answers_after||!1,randomize_questions:A.randomize_questions||!1,start_date:j(A.start_date),end_date:j(A.end_date)}),console.log("Set form data:",{courseId:Q,moduleId:J}),Q&&(yield B(Q))}catch(A){console.error("Error fetching exam:",A),z("     ")}finally{v(!1)}}),O=k=>{const{name:G,value:W,type:M,checked:U}=k.target;d(H=>oe(X({},H),{[G]:M==="checkbox"?U:W}))},q=k=>k?new Date(k).toISOString():null,j=k=>{if(!k)return"";const G=new Date(k),W=G.getFullYear(),M=String(G.getMonth()+1).padStart(2,"0"),U=String(G.getDate()).padStart(2,"0"),H=String(G.getHours()).padStart(2,"0"),N=String(G.getMinutes()).padStart(2,"0");return`${W}-${M}-${U}T${H}:${N}`},ee=k=>$(null,null,function*(){k.preventDefault();try{if(C(!0),z(null),l.start_date&&l.end_date){const W=new Date(l.start_date),M=new Date(l.end_date);if(W>=M){z("       "),C(!1);return}}const G=oe(X({},l),{course:parseInt(l.course),module:l.module?parseInt(l.module):null,time_limit:l.time_limit?parseInt(l.time_limit):null,pass_mark:parseFloat(l.pass_mark),total_points:parseInt(l.total_points),max_attempts:parseInt(l.max_attempts),start_date:q(l.start_date),end_date:q(l.end_date)});t?yield nr.updateExam(a,G):yield nr.createExam(G),n("/teacher/exams")}catch(G){console.error("Error saving exam:",G),z("    ")}finally{C(!1)}});return y?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})}):e(c,{sx:{maxWidth:1200,mx:"auto",p:{xs:1,md:3}},children:o(De,{elevation:2,sx:{borderRadius:3,p:4},children:[o(f,{variant:"h5",fontWeight:700,mb:3,children:[e(jr,{sx:{mr:1,color:"primary.main"}}),t?" ":"  "]}),_&&e(Be,{severity:"error",sx:{mb:2},children:_}),o("form",{onSubmit:ee,children:[o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,children:e(ze,{label:" ",name:"title",value:l.title,onChange:O,fullWidth:!0,required:!0,variant:"outlined",sx:{minWidth:400}})}),e(le,{item:!0,xs:12,md:8,children:e(ze,{select:!0,label:"",name:"course",value:l.course||"",onChange:O,fullWidth:!0,required:!0,variant:"outlined",sx:{minWidth:300},helperText:l.course?`: ${Array.isArray(p)&&((V=p.find(k=>k.id.toString()===l.course))==null?void 0:V.title)||" "}`:"",children:Array.isArray(p)&&p.map(k=>e(We,{value:k.id.toString(),children:k.title},k.id))})}),e(le,{item:!0,xs:12,md:4,children:o(ze,{select:!0,label:" ()",name:"module",value:l.module||"",onChange:O,fullWidth:!0,variant:"outlined",sx:{minWidth:250},helperText:l.module?`: ${Array.isArray(x)&&((L=x.find(k=>k.id.toString()===l.module))==null?void 0:L.name)||" "}`:l.course&&Array.isArray(x)&&x.length>0?`${x.length}  `:l.course?"  ...":"  ",disabled:!l.course,InputProps:{endAdornment:l.course&&Array.isArray(x)&&x.length===0&&e(Qe,{size:20})},children:[e(We,{value:"",children:""}),Array.isArray(x)&&x.map(k=>e(We,{value:k.id.toString(),children:k.name},k.id))]})}),e(le,{item:!0,xs:12,children:e(ze,{label:" ",name:"description",value:l.description,onChange:O,fullWidth:!0,multiline:!0,minRows:4,variant:"outlined",sx:{minWidth:500}})}),e(le,{item:!0,xs:12,sm:6,md:3,children:e(ze,{label:" ",name:"time_limit",type:"number",value:l.time_limit,onChange:O,fullWidth:!0,variant:"outlined",inputProps:{min:1},sx:{minWidth:200}})}),e(le,{item:!0,xs:12,sm:6,md:3,children:e(ze,{label:"  (%)",name:"pass_mark",type:"number",value:l.pass_mark,onChange:O,fullWidth:!0,variant:"outlined",inputProps:{min:0,max:100,step:.1},sx:{minWidth:200}})}),e(le,{item:!0,xs:12,sm:6,md:3,children:e(ze,{label:" ",name:"total_points",type:"number",value:l.total_points,onChange:O,fullWidth:!0,variant:"outlined",inputProps:{min:1},sx:{minWidth:200}})}),e(le,{item:!0,xs:12,sm:6,md:3,children:e(ze,{label:"  ",name:"max_attempts",type:"number",value:l.max_attempts,onChange:O,fullWidth:!0,variant:"outlined",inputProps:{min:1},sx:{minWidth:200}})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{label:"  ",name:"start_date",type:"datetime-local",value:l.start_date,onChange:O,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{minWidth:250},helperText:"    "})}),e(le,{item:!0,xs:12,sm:6,children:e(ze,{label:"  ",name:"end_date",type:"datetime-local",value:l.end_date,onChange:O,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{minWidth:250},helperText:"    "})}),e(le,{item:!0,xs:12,children:o(c,{sx:{display:"flex",flexWrap:"wrap",gap:3,p:2,border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fafafa"},children:[e(wt,{control:e(xr,{name:"is_final",checked:l.is_final,onChange:O}),label:" ",sx:{minWidth:150}}),e(wt,{control:e(xr,{name:"is_active",checked:l.is_active,onChange:O}),label:" ",sx:{minWidth:150}}),e(wt,{control:e(xr,{name:"allow_multiple_attempts",checked:l.allow_multiple_attempts,onChange:O}),label:"  ",sx:{minWidth:180}}),e(wt,{control:e(xr,{name:"show_answers_after",checked:l.show_answers_after,onChange:O}),label:"   ",sx:{minWidth:200}}),e(wt,{control:e(xr,{name:"randomize_questions",checked:l.randomize_questions,onChange:O}),label:"  ",sx:{minWidth:180}})]})})]}),o(c,{sx:{mt:4,display:"flex",gap:2,justifyContent:"flex-end"},children:[e(re,{variant:"outlined",onClick:()=>n("/teacher/exams"),disabled:S,children:""}),e(re,{type:"submit",variant:"contained",startIcon:S?e(Qe,{size:20}):e(os,{}),sx:{borderRadius:2,fontWeight:"bold",px:4},disabled:S,children:S?" ...":""})]})]})]})})},s9=()=>{var ie,ue,fe,de;const t=ct(),{examId:n}=cr(),[a,l]=w.useState(null),[d,p]=w.useState([]),[h,x]=w.useState(!0),[m,y]=w.useState(null),[v,S]=w.useState(!1),[C,_]=w.useState(null),[z,R]=w.useState(!1),[B,T]=w.useState(!1),[O,q]=w.useState(null),[j,ee]=w.useState({text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]});w.useEffect(()=>{n&&(V(),L())},[n]);const V=()=>$(null,null,function*(){try{x(!0);const K=yield nr.getExam(n);console.log(" Exam data received:",K),console.log(" Course data:",K.course),console.log(" Module data:",K.module),l(K)}catch(K){console.error("Error fetching exam:",K),y("     ")}finally{x(!1)}}),L=()=>$(null,null,function*(){try{const K=yield nr.getExamQuestions(n),se=K.results||K,ve=yield Promise.all(se.map(ge=>$(null,null,function*(){try{const ke=yield nr.getExamQuestionAnswers(ge.id),it=Array.isArray(ke==null?void 0:ke.results)?ke.results:Array.isArray(ke)?ke:[];return oe(X({},ge),{answers:it})}catch(ke){return console.error(`Error fetching answers for question ${ge.id}:`,ke),oe(X({},ge),{answers:[]})}})));p(ve)}catch(K){console.error("Error fetching questions:",K),y("    ")}}),k=K=>$(null,null,function*(){try{yield nr.deleteQuestion(K),p(d.filter(se=>se.id!==K)),S(!1),_(null)}catch(se){console.error("Error deleting question:",se),y("    ")}}),G=()=>$(null,null,function*(){var K;try{if(!j.text.trim()){y("   ");return}if(j.question_type==="multiple_choice"){if(j.answers.filter(it=>it.text.trim()).length<2){y("    ");return}if(j.answers.filter(it=>it.is_correct).length===0){y("      ");return}}if(j.question_type==="true_false"&&j.answers.filter(ke=>ke.is_correct).length===0){y("   ");return}if(j.question_type==="short_answer"&&!((K=j.answers[0])!=null&&K.text.trim())){y("   ");return}const se=oe(X({},j),{exam:n,points:parseInt(j.points)}),ve=yield nr.addQuestion(n,se);if(j.question_type==="multiple_choice"||j.question_type==="true_false"||j.question_type==="short_answer")for(let ge=0;ge<j.answers.length;ge++){const ke=j.answers[ge];ke.text.trim()&&(yield nr.createExamAnswer({question:ve.id,text:ke.text,is_correct:ke.is_correct,explanation:ke.explanation||"",order:ge}))}R(!1),y(null),ee({text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]}),L()}catch(se){console.error("Error adding question:",se),y("    ")}}),W=K=>{_(K),S(!0)},M=K=>{q(K),ee({text:K.text||"",question_type:K.question_type||"multiple_choice",points:K.points||1,explanation:K.explanation||"",answers:K.answers||[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]}),T(!0)},U=()=>$(null,null,function*(){var K;try{if(!j.text.trim()){y("   ");return}if(j.question_type==="multiple_choice"&&j.answers.filter(ge=>ge.is_correct).length===0){y("      ");return}if(j.question_type==="true_false"&&j.answers.filter(ge=>ge.is_correct).length===0){y("   ");return}if(j.question_type==="short_answer"&&!((K=j.answers[0])!=null&&K.text.trim())){y("   ");return}const se=oe(X({},j),{points:parseInt(j.points)});if(yield nr.updateQuestion(O.id,se),j.question_type==="multiple_choice"||j.question_type==="true_false"||j.question_type==="short_answer"){const ve=O.answers||[];for(let ge=0;ge<j.answers.length;ge++){const ke=j.answers[ge];ke.text.trim()&&(ve[ge]&&ve[ge].id?yield nr.updateExamAnswer(ve[ge].id,{text:ke.text,is_correct:ke.is_correct,explanation:ke.explanation||"",order:ge}):yield nr.createExamAnswer({question:O.id,text:ke.text,is_correct:ke.is_correct,explanation:ke.explanation||"",order:ge}))}for(let ge=j.answers.length;ge<ve.length;ge++)ve[ge]&&ve[ge].id&&(yield nr.deleteExamAnswer(ve[ge].id))}T(!1),q(null),y(null),L()}catch(se){console.error("Error updating question:",se),y("    ")}}),H=(K,se,ve)=>{const ge=[...j.answers];ge[K]=oe(X({},ge[K]),{[se]:ve}),ee(oe(X({},j),{answers:ge}))},N=()=>{ee({text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]}),y(null),R(!0)},Y=K=>{const se=j.answers.map((ve,ge)=>oe(X({},ve),{is_correct:ge===K}));ee(oe(X({},j),{answers:se}))},E=()=>{ee(oe(X({},j),{answers:[...j.answers,{text:"",is_correct:!1}]}))},I=K=>{if(j.answers.length>2){const se=j.answers.filter((ve,ge)=>ge!==K);ee(oe(X({},j),{answers:se}))}},A=K=>{let se=[];K==="multiple_choice"?se=[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]:K==="true_false"?se=[{text:"",is_correct:!1},{text:"",is_correct:!1}]:K==="short_answer"&&(se=[{text:"",is_correct:!0}]),ee(oe(X({},j),{question_type:K,answers:se}))},Q=K=>{if(!K)return" ";try{const se=new Date(K);return isNaN(se.getTime())?" ":se.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(se){return console.error("Error formatting date:",se)," "}},J=K=>{switch(K){case"multiple_choice":return"  ";case"true_false":return"  ";case"short_answer":return" ";default:return K}},P=()=>{const K=new Date,se=a.start_date?new Date(a.start_date):null,ve=a.end_date?new Date(a.end_date):null;return a.is_active?se&&K<se?{status:"  ",color:"warning"}:ve&&K>ve?{status:"",color:"error"}:se&&ve&&K>=se&&K<=ve?{status:"",color:"success"}:{status:"",color:"primary"}:{status:"",color:"default"}};return h?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})}):a?o(c,{sx:{maxWidth:1200,mx:"auto",p:{xs:2,md:4}},children:[o(De,{elevation:3,sx:{borderRadius:4,p:4,mb:4,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white"},children:[o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(jr,{sx:{fontSize:40,color:"white"}}),o(c,{children:[e(f,{variant:"h4",fontWeight:700,sx:{color:"white",mb:.5},children:a.title}),o(c,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[a.is_final&&e(_e,{label:"",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:600}}),e(_e,{label:P().status,sx:{bgcolor:P().color==="success"?"rgba(76,175,80,0.2)":P().color==="warning"?"rgba(255,152,0,0.2)":P().color==="error"?"rgba(244,67,54,0.2)":"rgba(255,255,255,0.2)",color:"white",fontWeight:600}})]})]})]}),o(c,{sx:{display:"flex",gap:1},children:[e(re,{variant:"outlined",onClick:()=>t("/teacher/exams"),sx:{borderColor:"rgba(255,255,255,0.5)",color:"white","&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:" "}),e(re,{variant:"contained",onClick:()=>t(`/teacher/exams/${n}/edit`),startIcon:e(Tr,{}),sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:" "})]})]}),o(c,{sx:{display:"flex",flexWrap:"wrap",gap:3,mb:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600},children:":"}),e(f,{variant:"body1",sx:{color:"white"},children:((ie=a.course)==null?void 0:ie.title)||" "})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600},children:":"}),e(f,{variant:"body1",sx:{color:"white"},children:((ue=a.module)==null?void 0:ue.name)||" "})]})]}),a.description&&e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",lineHeight:1.6},children:a.description})]}),o(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",lg:"1fr 1fr"},gap:4},children:[o(De,{elevation:2,sx:{borderRadius:3,p:4,height:"fit-content"},children:[o(f,{variant:"h5",fontWeight:700,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e(jr,{sx:{color:"primary.main"}})," "]}),o(c,{sx:{display:"grid",gap:3},children:[o(c,{children:[e(f,{variant:"h6",fontWeight:600,sx:{mb:2,color:"primary.main"},children:" "}),o(c,{sx:{display:"grid",gap:2},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(_e,{label:`${a.time_limit||" "} `,color:"info",size:"small"})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(_e,{label:`${a.pass_mark}%`,color:"success",size:"small"})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(_e,{label:`${a.total_points} `,color:"warning",size:"small"})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(_e,{label:a.allow_multiple_attempts?`${a.max_attempts} `:" ",color:a.allow_multiple_attempts?"secondary":"default",size:"small"})]})]})]}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,sx:{mb:2,color:"primary.main"},children:" "}),o(c,{sx:{display:"grid",gap:2},children:[a.start_date&&o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(f,{variant:"body2",color:"text.secondary",children:Q(a.start_date)})]}),a.end_date&&o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(f,{variant:"body2",color:"text.secondary",children:Q(a.end_date)})]})]})]}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,sx:{mb:2,color:"primary.main"},children:" "}),o(c,{sx:{display:"grid",gap:2},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(_e,{label:a.show_answers_after?"":"",color:a.show_answers_after?"success":"default",size:"small"})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),e(_e,{label:a.randomize_questions?"":"",color:a.randomize_questions?"warning":"default",size:"small"})]})]})]}),a.is_active&&a.start_date&&a.end_date&&(()=>{const K=new Date,se=new Date(a.start_date),ve=new Date(a.end_date);if(K>=se&&K<=ve){const ge=ve-K,ke=Math.floor(ge/(1e3*60*60*24)),it=Math.floor(ge%(1e3*60*60*24)/(1e3*60*60)),kt=Math.floor(ge%(1e3*60*60)/(1e3*60));return o(c,{sx:{p:3,bgcolor:"#fff3cd",borderRadius:2,border:"1px solid #ffeaa7"},children:[e(f,{variant:"h6",color:"warning.dark",fontWeight:600,sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:"  "}),o(f,{variant:"body1",color:"warning.dark",fontWeight:600,children:[ke>0?`${ke}  `:"",it>0?`${it}  `:"",kt," "]})]})}return null})()]})]}),o(De,{elevation:2,sx:{borderRadius:3,p:4},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[o(f,{variant:"h5",fontWeight:700,sx:{display:"flex",alignItems:"center",gap:1},children:[e(ar,{sx:{color:"primary.main"}})," (",d.length,")"]}),e(re,{variant:"contained",startIcon:e(Nr,{}),sx:{borderRadius:2,fontWeight:"bold",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #0a3d5f 0%, #d17a6f 100%)"}},onClick:N,children:" "})]}),m&&e(Be,{severity:"error",sx:{mb:3},children:m}),d.length===0?o(c,{sx:{textAlign:"center",py:6},children:[e(ar,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"    "}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"     "}),e(re,{variant:"contained",startIcon:e(Nr,{}),onClick:N,sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #0a3d5f 0%, #d17a6f 100%)"}},children:"  "})]}):e(c,{sx:{maxHeight:"70vh",overflowY:"auto"},children:d.map((K,se)=>o(De,{elevation:1,sx:{p:3,mb:3,borderRadius:2,border:"1px solid",borderColor:"grey.200","&:hover":{boxShadow:3,borderColor:"primary.main"}},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[o(c,{sx:{flex:1},children:[o(f,{variant:"h6",fontWeight:600,sx:{mb:1},children:[" ",se+1,": ",K.text]}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e(_e,{label:J(K.question_type),size:"small",color:"primary",variant:"outlined"}),e(_e,{label:`${K.points} `,size:"small",color:"info"})]})]}),o(c,{sx:{display:"flex",gap:1},children:[e(Je,{title:"",children:e(xe,{onClick:()=>M(K),sx:{color:"primary.main","&:hover":{bgcolor:"primary.light"}},children:e(Tr,{})})}),e(Je,{title:"",children:e(xe,{onClick:()=>W(K),sx:{color:"error.main","&:hover":{bgcolor:"error.light"}},children:e(tn,{})})})]})]}),K.explanation&&e(c,{sx:{mb:2,p:2,bgcolor:"grey.50",borderRadius:1},children:o(f,{variant:"body2",color:"text.secondary",children:[e("strong",{children:":"})," ",K.explanation]})}),K.answers&&K.answers.length>0&&o(c,{sx:{mt:3},children:[o(f,{variant:"h6",color:"text.primary",fontWeight:600,mb:2,sx:{display:"flex",alignItems:"center",gap:1},children:[e(c,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"primary.main"}})," :"]}),e(c,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:K.answers.map((ve,ge)=>{const ke=ve.is_correct===!0||ve.is_correct==="true"||ve.is_correct===1;return o(De,{sx:{p:2.5,borderRadius:3,border:"2px solid",borderColor:ke?"success.main":"grey.300",bgcolor:ke?"rgba(76, 175, 80, 0.15)":"grey.50",position:"relative",overflow:"hidden",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:[ke&&e(c,{sx:{position:"absolute",top:0,right:0,width:0,height:0,borderStyle:"solid",borderWidth:"0 30px 30px 0",borderColor:"transparent success.main transparent transparent"}}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{minWidth:32,height:32,borderRadius:"50%",bgcolor:ke?"success.main":"grey.400",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.9rem",position:"relative",boxShadow:ke?"0 2px 8px rgba(76, 175, 80, 0.3)":"none"},children:String.fromCharCode(65+ge)}),e(f,{variant:"body1",fontWeight:ke?700:500,sx:{color:ke?"#2e7d32":"text.primary",lineHeight:1.4,fontSize:ke?"1.1rem":"1rem"},children:ve.text})]}),ke&&e(c,{sx:{position:"absolute",top:8,right:8,width:32,height:32,borderRadius:"50%",bgcolor:"success.main",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem",fontWeight:"bold",boxShadow:"0 3px 12px rgba(76, 175, 80, 0.4)",border:"3px solid white"},children:""})]},ge)})})]})]},K.id))})]})]}),o(wr,{open:v,onClose:()=>S(!1),children:[e(Wr,{children:"  "}),e(vr,{children:o(f,{children:['      "',C==null?void 0:C.text,'"      .']})}),o($r,{children:[e(re,{onClick:()=>S(!1),children:""}),e(re,{onClick:()=>k(C==null?void 0:C.id),color:"error",variant:"contained",children:""})]})]}),o(wr,{open:z,onClose:()=>R(!1),maxWidth:"md",fullWidth:!0,dir:"rtl",children:[e(Wr,{sx:{textAlign:"right"},children:"  "}),e(vr,{sx:{direction:"rtl"},children:o(c,{sx:{pt:1,textAlign:"right"},children:[m&&e(Be,{severity:"error",sx:{mb:2},children:m}),e(ze,{label:" ",value:j.text,onChange:K=>ee(oe(X({},j),{text:K.target.value})),fullWidth:!0,multiline:!0,minRows:3,sx:{mb:2},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),o(ze,{select:!0,label:" ",value:j.question_type,onChange:K=>A(K.target.value),fullWidth:!0,sx:{mb:2},inputProps:{dir:"rtl"},children:[e(We,{value:"multiple_choice",children:"  "}),e(We,{value:"true_false",children:"  "}),e(We,{value:"short_answer",children:" "})]}),e(ze,{label:"",type:"number",value:j.points,onChange:K=>ee(oe(X({},j),{points:K.target.value})),fullWidth:!0,sx:{mb:2},inputProps:{min:1,dir:"rtl",style:{textAlign:"right"}}}),e(ze,{label:"  ()",value:j.explanation,onChange:K=>ee(oe(X({},j),{explanation:K.target.value})),fullWidth:!0,multiline:!0,minRows:2,sx:{mb:3},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),e(f,{variant:"h6",sx:{mb:2,mt:3,textAlign:"right"},children:""}),j.question_type==="multiple_choice"&&o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:"  :"}),j.answers.map((K,se)=>o(c,{sx:{display:"flex",alignItems:"center",mb:1,direction:"rtl"},children:[e(ze,{label:` ${se+1}`,value:K.text,onChange:ve=>H(se,"text",ve.target.value),fullWidth:!0,sx:{ml:1},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),e(wt,{control:e(xr,{checked:K.is_correct,onChange:()=>Y(se)}),label:"",sx:{direction:"rtl"}}),j.answers.length>2&&e(xe,{onClick:()=>I(se),color:"error",size:"small",children:e(tn,{})})]},se)),e(re,{variant:"outlined",onClick:E,startIcon:e(Nr,{}),sx:{mt:1,direction:"rtl"},children:" "})]}),j.question_type==="true_false"&&o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:"  :"}),j.answers.map((K,se)=>o(c,{sx:{display:"flex",alignItems:"center",mb:1,direction:"rtl"},children:[o(f,{sx:{minWidth:60,ml:2},children:[K.text,":"]}),e(wt,{control:e(xr,{checked:K.is_correct,onChange:()=>Y(se)}),label:"",sx:{direction:"rtl"}})]},se))]}),j.question_type==="short_answer"&&o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:" :"}),e(ze,{label:" ",value:((fe=j.answers[0])==null?void 0:fe.text)||"",onChange:K=>H(0,"text",K.target.value),fullWidth:!0,inputProps:{dir:"rtl",style:{textAlign:"right"}}})]})]})}),o($r,{sx:{direction:"rtl"},children:[e(re,{onClick:()=>R(!1),children:""}),e(re,{onClick:G,variant:"contained",disabled:!j.text.trim(),children:""})]})]}),o(wr,{open:B,onClose:()=>T(!1),maxWidth:"md",fullWidth:!0,dir:"rtl",PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(14, 81, 129, 0.1)",direction:"rtl"}},children:[e(Wr,{sx:{textAlign:"center",fontWeight:700,color:"#0e5181"},children:" "}),o(vr,{sx:{direction:"rtl"},children:[m&&e(Be,{severity:"error",sx:{mb:2,direction:"rtl",textAlign:"right"},children:m}),e(ze,{label:" ",value:j.text,onChange:K=>ee(oe(X({},j),{text:K.target.value})),fullWidth:!0,multiline:!0,rows:3,sx:{mb:2},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),o(ze,{select:!0,label:" ",value:j.question_type,onChange:K=>ee(oe(X({},j),{question_type:K.target.value})),fullWidth:!0,sx:{mb:2},children:[e(We,{value:"multiple_choice",children:"  "}),e(We,{value:"true_false",children:"  "}),e(We,{value:"short_answer",children:" "}),e(We,{value:"essay",children:""})]}),e(ze,{label:"",type:"number",value:j.points,onChange:K=>ee(oe(X({},j),{points:K.target.value})),fullWidth:!0,sx:{mb:2},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),e(ze,{label:"  ()",value:j.explanation,onChange:K=>ee(oe(X({},j),{explanation:K.target.value})),fullWidth:!0,multiline:!0,rows:2,sx:{mb:2},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),j.question_type==="multiple_choice"&&o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:":"}),j.answers.map((K,se)=>o(c,{sx:{display:"flex",alignItems:"center",mb:1,direction:"rtl"},children:[e(ze,{label:` ${se+1}`,value:K.text,onChange:ve=>H(se,"text",ve.target.value),fullWidth:!0,sx:{ml:1},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),e(wt,{control:e(xr,{checked:K.is_correct,onChange:()=>Y(se)}),label:"",sx:{direction:"rtl"}}),j.answers.length>2&&e(xe,{onClick:()=>I(se),color:"error",size:"small",children:e(tn,{})})]},se)),e(re,{variant:"outlined",onClick:E,startIcon:e(Nr,{}),sx:{mt:1,direction:"rtl"},children:" "})]}),j.question_type==="true_false"&&o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:"  :"}),j.answers.map((K,se)=>o(c,{sx:{display:"flex",alignItems:"center",mb:1,direction:"rtl"},children:[e(f,{sx:{minWidth:60,ml:2},children:K.text}),e(wt,{control:e(xr,{checked:K.is_correct,onChange:()=>Y(se)}),label:"",sx:{direction:"rtl"}})]},se))]}),j.question_type==="short_answer"&&o(c,{sx:{mb:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:" :"}),e(ze,{label:" ",value:((de=j.answers[0])==null?void 0:de.text)||"",onChange:K=>H(0,"text",K.target.value),fullWidth:!0,inputProps:{dir:"rtl",style:{textAlign:"right"}}})]})]}),o($r,{sx:{direction:"rtl",justifyContent:"flex-start",flexDirection:"row-reverse"},children:[e(re,{onClick:()=>T(!1),sx:{borderColor:"#0e5181",color:"#0e5181","&:hover":{borderColor:"#e5978b",color:"#e5978b"},borderRadius:2,textTransform:"none",fontWeight:600},children:""}),e(re,{onClick:U,variant:"contained",sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)"},borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:" "})]})]})]}):e(c,{sx:{p:3},children:e(Be,{severity:"error",children:"    "})})};yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`;yt`
  0% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(103, 58, 183, 0); }
  100% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0); }
`;te(De)(({theme:t})=>({padding:t.spacing(3),height:"100%",borderRadius:16,background:t.palette.mode==="dark"?`linear-gradient(145deg, ${pe(t.palette.background.paper,.9)}, ${pe(t.palette.background.default,.9)})`:`linear-gradient(145deg, ${t.palette.background.paper}, ${t.palette.background.default})`,boxShadow:t.shadows[5],backdropFilter:"blur(10px)",border:`1px solid ${pe(t.palette.divider,.1)}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-8px)",boxShadow:t.shadows[10],"&::before":{opacity:.1,transform:"scale(1.5)"}},"&::before":{content:'""',position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:`radial-gradient(circle, ${t.palette.primary.main} 0%, transparent 70%)`,opacity:.05,transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:0}}));class l9{getStudentStats(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/student/dashboard/stats/")).data}catch(n){return console.error("Error fetching student stats:",n),{enrolledCourses:0,completedLessons:0,pendingAssignments:0,averageGrade:0,totalPoints:0,learningStreak:0,certificates:0,recentActivity:[]}}})}getTeacherStats(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/teacher/dashboard/stats/")).data}catch(n){return console.error("Error fetching teacher stats:",n),{totalCourses:0,totalStudents:0,totalRevenue:0,averageRating:0,pendingAssignments:0,upcomingMeetings:0,recentEnrollments:0,courseProgress:[]}}})}getStudentCourses(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/student/courses/")).data}catch(n){return console.error("Error fetching student courses:",n),[]}})}getTeacherCourses(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/teacher/courses/")).data}catch(n){return console.error("Error fetching teacher courses:",n),[]}})}getRecentActivity(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/student/recent-activity/")).data}catch(n){return console.error("Error fetching recent activity:",n),[]}})}getTeacherRecentActivity(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/teacher/recent-activity/")).data}catch(n){return console.error("Error fetching teacher recent activity:",n),[]}})}getUpcomingAssignments(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/student/upcoming-assignments/")).data}catch(n){return console.error("Error fetching upcoming assignments:",n),[]}})}getUpcomingMeetings(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/student/upcoming-meetings/")).data}catch(n){return console.error("Error fetching upcoming meetings:",n),[]}})}getStudentProgress(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/teacher/student-progress/")).data}catch(n){return console.error("Error fetching student progress:",n),[]}})}getAchievements(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/student/achievements/")).data}catch(n){return console.error("Error fetching achievements:",n),[]}})}getRecentAnnouncements(){return $(this,null,function*(){try{return(yield ne.get("/api/courses/teacher/announcements/")).data}catch(n){return console.error("Error fetching recent announcements:",n),[]}})}}const Wi=new l9,c9={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Za={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},S5=()=>{const t=jt(),n=ct(),[a,l]=w.useState(!0),[d,p]=w.useState(new Date),[h,x]=w.useState(0),[m,y]=w.useState({enrolledCourses:0,completedLessons:0,pendingAssignments:0,averageGrade:0,totalPoints:0,learningStreak:0,certificates:0}),[v,S]=w.useState([]),[C,_]=w.useState([]),[z,R]=w.useState([]),[B,T]=w.useState([]),[O,q]=w.useState([]),[j,ee]=w.useState([]);w.useEffect(()=>{V()},[]);const V=()=>$(null,null,function*(){try{l(!0);const[W,M,U,H,N,Y]=yield Promise.all([Wi.getStudentStats(),Wi.getStudentCourses(),Wi.getAchievements(),Wi.getRecentActivity(),Wi.getUpcomingAssignments(),Wi.getUpcomingMeetings()]);y(W);const E=M.length>0?M.map(Q=>oe(X({},Q),{progress:Math.min(Math.max(Q.progress||0,0),100),total_lessons:Q.total_lessons||Q.totalLessons||0,completed_lessons:Q.completed_lessons||Q.completedLessons||Math.floor((Q.progress||0)/100*(Q.total_lessons||Q.totalLessons||0)),duration:Q.duration||Q.total_duration||"0"})):[{id:1,title:"   ",progress:0,description:"    ",status:"active",total_lessons:20,completed_lessons:0,duration:"1 34 44"},{id:2,title:" ",progress:0,description:"   ",status:"active",total_lessons:16,completed_lessons:0,duration:"49 54"}];S(E);const I=U.length>0?U:[{id:1,title:" ",description:"    ",color:"primary",icon:e(ts,{}),progress:100,reward:"10 "},{id:2,title:" ",description:" 5  ",color:"success",icon:e(yr,{}),progress:60,reward:"25 "},{id:3,title:"  ",description:"  90%  ",color:"warning",icon:e(ar,{}),progress:0,reward:"50 "}];_(I),R(H),T(N),q(Y),ee([{id:1,title:" 3 - ",time:"08:00 - 10:00",date:"2024-01-10",day:"",color:"#0e5181",type:"lecture"},{id:2,title:"  1",time:"10:00 - 11:35",date:"2024-01-10",day:"",color:"#0e5181",type:"assignment"},{id:3,title:"  2",time:"11:00 - 15:00",date:"2024-01-11",day:"",color:"#0e5181",type:"exam"},{id:4,title:" 2 - ",time:"07:00 - 08:15",date:"2024-01-12",day:"",color:"#0e5181",type:"lecture"},{id:5,title:"  3",time:"09:00 - 10:15",date:"2024-01-12",day:"",color:"#0e5181",type:"assignment"},{id:6,title:" 2 - ",time:"09:00 - 10:15",date:"2024-01-13",day:"",color:"#0e5181",type:"practice"},{id:7,title:" ",time:"12:00 - 13:15",date:"2024-01-13",day:"",color:"#0e5181",type:"exam"}])}catch(W){console.error("Error loading dashboard data:",W)}finally{l(!1)}}),L=W=>{n(`/student/courses/${W}`)},k=W=>W>=90?"A+":W>=85?"A":W>=80?"B+":W>=75?"B":W>=70?"C+":W>=65?"C":W>=60?"D+":"D",G=(W,M)=>{x(M)};return a?e(c,{sx:{p:{xs:2,md:3}},children:e(le,{container:!0,spacing:3,children:[1,2,3,4].map(W=>e(le,{item:!0,xs:12,sm:6,lg:3,children:e(gt,{variant:"rectangular",height:200,sx:{borderRadius:4}})},W))})}):e(c,{sx:{p:{xs:2,md:3}},children:o(It.div,{initial:"hidden",animate:"show",variants:c9,children:[o(c,{sx:{mb:5,px:1},children:[e(It.div,{variants:Za,children:e(f,{variant:"h4",sx:{fontWeight:800,mb:2,background:t.palette.mode==="dark"?"linear-gradient(45deg, #fff, #90caf9)":"linear-gradient(45deg, #1976d2, #42a5f5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"},children:"  ! "})}),e(It.div,{variants:Za,children:e(f,{variant:"h6",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:1,mb:4,"&::before":{content:'""',display:"block",width:24,height:3,background:t.palette.primary.main,borderRadius:2}},children:"     "})})]}),e(c,{sx:{mb:5,px:1},children:o(le,{container:!0,spacing:2,children:[e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Za,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#9c27b0",color:"white","& svg":{fontSize:"1.5rem"}},children:e(zt,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:m.enrolledCourses||0})]})]})})})})}),e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Za,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#0e5181",color:"white","& svg":{fontSize:"1.5rem"}},children:e(Jr,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:m.pendingAssignments||0})]})]})})})})}),e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Za,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#ff9800",color:"white","& svg":{fontSize:"1.5rem"}},children:e(wa,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:k(m.averageGrade||0)})]})]})})})})}),e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Za,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#4caf50",color:"white","& svg":{fontSize:"1.5rem"}},children:e(Pi,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:(m.totalPoints||0).toLocaleString()})]})]})})})})})]})}),e(It.div,{variants:Za,children:o(nt,{sx:{width:"100%",background:"white",borderRadius:4,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:[e(c,{sx:{background:"linear-gradient(135deg, #0e5181, #1a6ba8)",borderRadius:"16px 16px 0 0",p:0},children:o(zn,{value:h,onChange:G,sx:{"& .MuiTab-root":{color:"white",fontWeight:600,fontSize:"1rem",minHeight:60,"&.Mui-selected":{color:"white",fontWeight:700}},"& .MuiTabs-indicator":{backgroundColor:"white",height:3}},children:[e(mt,{icon:e(zt,{}),label:"",iconPosition:"start",sx:{display:"flex",alignItems:"center",gap:1}}),e(mt,{icon:e(Pn,{}),label:" ",iconPosition:"start",sx:{display:"flex",alignItems:"center",gap:1}})]})}),o(c,{sx:{height:600,overflow:"auto"},children:[h===0&&o(c,{sx:{p:3},children:[o(c,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(c,{children:[e(f,{variant:"h6",fontWeight:600,sx:{mb:1,color:"#0e5181"},children:" "}),e(f,{variant:"body2",color:"text.secondary",children:"   "})]}),e(re,{variant:"contained",size:"small",endIcon:e(co,{}),sx:{borderRadius:3,background:"linear-gradient(45deg, #0e5181, #1a6ba8)","&:hover":{background:"linear-gradient(45deg, #1a6ba8, #0e5181)"}},onClick:()=>n("/student/courses"),children:" "})]}),e(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:v.map((W,M)=>e(It.div,{variants:Za,children:e(nt,{sx:{borderRadius:3,background:"white",border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transform:"translateY(-2px)"}},children:e(pt,{sx:{p:3},children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o(c,{sx:{display:"flex",alignItems:"flex-start",gap:2,flex:1},children:[e(c,{sx:{width:40,height:40,borderRadius:2,background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:700,color:"#666",flexShrink:0},children:M+1}),o(c,{sx:{flex:1},children:[e(f,{variant:"h6",fontWeight:600,sx:{mb:1.5,color:"#333"},children:W.title}),o(c,{sx:{mb:1.5},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e(f,{variant:"caption",sx:{color:"#666",fontSize:"11px",fontWeight:500},children:""}),o(f,{variant:"caption",sx:{color:"#0e5181",fontSize:"11px",fontWeight:600},children:[Math.round(W.progress||0),"%"]})]}),e(Sr,{variant:"determinate",value:W.progress||0,sx:{height:8,borderRadius:4,backgroundColor:"#f0f0f0","& .MuiLinearProgress-bar":{background:(W.progress||0)>=100?"linear-gradient(45deg, #4caf50, #66bb6a)":"linear-gradient(45deg, #0e5181, #1a6ba8)",borderRadius:4}}})]}),o(c,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[o(f,{variant:"body2",color:"text.secondary",children:[W.completed_lessons||0,"  ",W.total_lessons||20,"  "]}),o(f,{variant:"body2",color:"text.secondary",children:[W.duration||"1 34 44","  "]}),o(f,{variant:"body2",sx:{color:"#0e5181",fontWeight:500},children:[": ",Math.round(W.progress||0),"%"]})]})]})]}),e(c,{sx:{ml:2,flexShrink:0},children:e(re,{variant:"contained",size:"large",sx:{minWidth:100,height:48,borderRadius:3,background:"linear-gradient(45deg, #0e5181, #1a6ba8)",color:"white",fontWeight:600,fontSize:"1rem",textTransform:"none",boxShadow:"0 4px 12px rgba(14, 81, 129, 0.3)","&:hover":{background:"linear-gradient(45deg, #1a6ba8, #0e5181)",boxShadow:"0 6px 16px rgba(14, 81, 129, 0.4)",transform:"translateY(-1px)"},transition:"all 0.3s ease"},onClick:()=>L(W.id),children:(W.progress||0)>0?"":""})})]})})})},W.id))})]}),h===1&&o(c,{sx:{p:3},children:[o(c,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"h5",fontWeight:700,sx:{color:"#333"},children:"  "}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(xe,{size:"small",sx:{color:"#666"},onClick:()=>p(new Date(d.getTime()-7*24*60*60*1e3)),children:e(Y0,{})}),e(f,{variant:"body1",sx:{minWidth:120,textAlign:"center",color:"#333",fontWeight:600},children:d.toLocaleDateString("ar-SA",{month:"long",year:"numeric"})}),e(xe,{size:"small",sx:{color:"#666"},onClick:()=>p(new Date(d.getTime()+7*24*60*60*1e3)),children:e(Q0,{})})]})]}),o(c,{sx:{border:"1px solid #e0e0e0",borderRadius:2,overflow:"hidden",background:"white"},children:[o(c,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:"1px solid #e0e0e0",background:"#f8f9fa"},children:[e(c,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center"},children:e(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:""})}),["","","",""].map((W,M)=>o(c,{sx:{p:2,borderRight:M<3?"1px solid #e0e0e0":"none",textAlign:"center"},children:[e(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:W}),e(f,{variant:"caption",color:"text.secondary",children:10+M})]},W))]}),["07:00","08:00","09:00","10:00","11:00","12:00","13:00"].map((W,M)=>o(c,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:M<6?"1px solid #e0e0e0":"none",minHeight:60},children:[e(c,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa"},children:e(f,{variant:"caption",color:"text.secondary",fontWeight:500,children:W})}),[0,1,2,3].map(U=>e(c,{sx:{p:1,borderRight:U<3?"1px solid #e0e0e0":"none",position:"relative",minHeight:60},children:j.filter(H=>{const N=H.time.split(" - ")[0],Y=H.day;return N===W&&Y===["","","",""][U]}).map(H=>o(c,{sx:{position:"absolute",top:4,left:4,right:4,bottom:4,background:"rgba(14, 81, 129, 0.08)",borderRadius:1,p:1,color:"#0e5181",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:[e(f,{variant:"caption",fontWeight:600,sx:{fontSize:"0.7rem",lineHeight:1.2},children:H.title}),e(f,{variant:"caption",sx:{opacity:.8,fontSize:"0.6rem",lineHeight:1.2},children:H.time})]},H.id))},U))]},W))]}),j.length===0&&o(c,{sx:{textAlign:"center",py:4},children:[e(Pn,{sx:{fontSize:48,color:"#ccc",mb:2}}),e(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"     "}),e(re,{variant:"contained",sx:{background:"#e5978b","&:hover":{background:"#f0a8a0"}},onClick:()=>n("/student/calendar"),children:"  "})]})]})]})]})})]})})},d9={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Lo={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},C5=()=>{jt();const t=ct(),[n,a]=w.useState(!0),[l,d]=w.useState({totalCourses:0,totalStudents:0,totalRevenue:0,averageRating:0,pendingAssignments:0,upcomingMeetings:0,recentEnrollments:0}),[p,h]=w.useState([]),[x,m]=w.useState([]),[y,v]=w.useState([]),[S,C]=w.useState([]),[_,z]=w.useState(new Date),[R,B]=w.useState([]),[T,O]=w.useState(0);w.useEffect(()=>{q()},[]);const q=()=>$(null,null,function*(){try{a(!0);const[L,k,G,W,M]=yield Promise.all([Wi.getTeacherStats(),Wi.getTeacherCourses(),Wi.getStudentProgress(),Wi.getRecentActivity(),Wi.getRecentAnnouncements()]);d({totalCourses:L.totalCourses||0,totalStudents:L.totalStudents||0,totalRevenue:L.totalRevenue||0,averageRating:L.averageRating||0,pendingAssignments:L.pendingAssignments||0,upcomingMeetings:L.upcomingMeetings||0,recentEnrollments:L.recentEnrollments||0}),h(k||[]),m(G||[]);const U=W&&W.length>0?W:[{id:1,title:"   ",description:"     ",time:" 5 ",type:"assignment",course:" 1"},{id:2,title:"  ",description:"      ",time:" ",type:"enrollment",course:""}];v(U);const H=M&&M.length>0?M:[{id:1,title:" ",content:"     ",date:"2024-01-15",read:!1,course:" 1"},{id:2,title:" ",content:"    ",date:"2024-01-14",read:!0,course:""}];C(H),B([{id:1,title:" 3 - ",time:"08:00 - 10:00",date:"2024-01-10",day:"",color:"#0e5181"},{id:2,title:" 1",time:"10:00 - 11:35",date:"2024-01-10",day:"",color:"#0e5181"},{id:3,title:" 2 - ",time:"11:00 - 15:00",date:"2024-01-11",day:"",color:"#0e5181"},{id:4,title:" 2",time:"07:00 - 08:15",date:"2024-01-12",day:"",color:"#0e5181"},{id:5,title:" 3",time:"09:00 - 10:15",date:"2024-01-12",day:"",color:"#0e5181"},{id:6,title:" 2",time:"09:00 - 10:15",date:"2024-01-13",day:"",color:"#0e5181"},{id:7,title:" 1",time:"12:00 - 13:15",date:"2024-01-13",day:"",color:"#0e5181"}])}catch(L){console.error("Error loading dashboard data:",L)}finally{a(!1)}}),j=L=>{t(`/teacher/courses/${L}`)},ee=L=>{t(`/teacher/courses/${L}/edit`)},V=(L,k)=>{O(k)};return n?e(c,{sx:{p:{xs:2,md:3}},children:e(le,{container:!0,spacing:3,children:[1,2,3,4].map(L=>e(le,{size:{xs:12,sm:6,lg:3},children:e(gt,{variant:"rectangular",height:200,sx:{borderRadius:4}})},L))})}):e(c,{sx:{p:{xs:2,md:3},backgroundColor:"#f8f9fa",minHeight:"100vh"},children:o(It.div,{initial:"hidden",animate:"show",variants:d9,children:[o(c,{sx:{mb:5,px:1},children:[e(It.div,{variants:Lo,children:e(f,{variant:"h4",sx:{fontWeight:800,mb:2,color:"#0e5181",textAlign:"center"},children:"  /! "})}),e(It.div,{variants:Lo,children:e(f,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",mb:4},children:"     "})})]}),e(c,{sx:{mb:5,px:1},children:o(le,{container:!0,spacing:2,children:[e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Lo,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#9c27b0",color:"white","& svg":{fontSize:"1.5rem"}},children:e(rs,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:l.totalStudents||0})]})]})})})})}),e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Lo,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#0e5181",color:"white","& svg":{fontSize:"1.5rem"}},children:e(zt,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:""}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:l.totalCourses||0})]})]})})})})}),e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Lo,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#ff9800",color:"white","& svg":{fontSize:"1.5rem"}},children:e(Jr,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),e(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:l.pendingAssignments||0})]})]})})})})}),e(le,{size:{xs:12,sm:6,md:3},children:e(It.div,{variants:Lo,children:e(nt,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:e(pt,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(c,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#4caf50",color:"white","& svg":{fontSize:"1.5rem"}},children:e(Pi,{})}),o(c,{children:[e(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:" "}),o(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:[l.averageRating.toFixed(1),""]})]})]})})})})})]})}),e(c,{sx:{px:1,width:"100%"},children:e(It.div,{variants:Lo,children:o(nt,{sx:{borderRadius:4,background:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[e(c,{sx:{background:"linear-gradient(135deg, #0e5181, #1a6ba8)",color:"white"},children:o(zn,{value:T,onChange:V,sx:{"& .MuiTab-root":{color:"rgba(255, 255, 255, 0.7)",fontWeight:600,fontSize:"1rem",minHeight:60,"&.Mui-selected":{color:"white",background:"rgba(255, 255, 255, 0.1)"}},"& .MuiTabs-indicator":{backgroundColor:"white",height:3}},children:[e(mt,{label:"",icon:e(zt,{}),iconPosition:"start",sx:{flex:1}}),e(mt,{label:" ",icon:e(Pn,{}),iconPosition:"start",sx:{flex:1}})]})}),o(c,{sx:{height:600,overflow:"auto"},children:[T===0&&o(c,{sx:{p:3},children:[o(c,{sx:{mb:3},children:[e(f,{variant:"h6",fontWeight:600,sx:{mb:1,color:"#0e5181"},children:"  "}),e(f,{variant:"body2",color:"text.secondary",children:"   "})]}),p.length>0?e(ni,{component:De,sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:o(ei,{sx:{minWidth:650},"aria-label":"courses table",children:[e(ti,{children:o(or,{sx:{backgroundColor:"#f8f9fa"},children:[e(be,{sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181",textAlign:"right"},children:""}),e(be,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:" "}),e(be,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:""}),e(be,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:""}),e(be,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:""}),e(be,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:""})]})}),e(ri,{children:p.map(L=>o(or,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f8f9fa"},cursor:"pointer",transition:"background-color 0.2s ease"},onClick:()=>j(L.id),children:[e(be,{component:"th",scope:"row",sx:{textAlign:"right",verticalAlign:"top"},children:o(c,{sx:{display:"flex",alignItems:"flex-start",gap:2,flexDirection:"row-reverse"},children:[o(c,{sx:{flex:1,minWidth:0},children:[e(f,{variant:"subtitle1",fontWeight:600,sx:{color:"#333",textAlign:"right",mb:.5,lineHeight:1.3},children:L.title||" "}),e(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",display:"block",lineHeight:1.4},children:L.description||"  "})]}),e(c,{sx:{width:40,height:40,borderRadius:2,background:"linear-gradient(135deg, #0e5181, #1a6ba8)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",flexShrink:0,"& svg":{fontSize:"1.2rem"}},children:e(zt,{})})]})}),e(be,{align:"center",children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e(rs,{sx:{fontSize:16,color:"#666"}}),e(f,{variant:"body2",fontWeight:500,children:L.students||0})]})}),e(be,{align:"center",children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[e(Pi,{sx:{fontSize:16,color:"#ffc107"}}),e(f,{variant:"body2",fontWeight:500,children:L.rating||0})]})}),e(be,{align:"center",children:e(_e,{label:L.category||" ",size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontWeight:500}})}),e(be,{align:"center",children:e(_e,{label:L.status==="published"?"":"",size:"small",sx:{backgroundColor:L.status==="published"?"#e8f5e8":"#fff3e0",color:L.status==="published"?"#2e7d32":"#f57c00",fontWeight:500}})}),e(be,{align:"center",children:o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e(xe,{size:"small",sx:{color:"#0e5181",backgroundColor:"rgba(14, 81, 129, 0.08)","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.15)",color:"#1a6ba8"}},onClick:k=>{k.stopPropagation(),j(L.id)},title:" ",children:e(S6,{fontSize:"small"})}),e(xe,{size:"small",sx:{color:"#e5978b",backgroundColor:"rgba(229, 151, 139, 0.08)","&:hover":{backgroundColor:"rgba(229, 151, 139, 0.15)",color:"#d17a6f"}},onClick:k=>{k.stopPropagation(),ee(L.id)},title:" ",children:e(Tr,{fontSize:"small"})})]})})]},L.id))})]})}):o(c,{sx:{textAlign:"center",py:4},children:[e(zt,{sx:{fontSize:48,color:"#ccc",mb:2}}),e(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"   "}),e(re,{variant:"contained",sx:{background:"#0e5181","&:hover":{background:"#1a6ba8"}},onClick:()=>t("/teacher/courses/new"),children:"  "})]})]}),T===1&&o(c,{sx:{p:3},children:[o(c,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"h5",fontWeight:700,sx:{color:"#333"},children:" "}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(xe,{size:"small",sx:{color:"#666"},onClick:()=>z(new Date(_.getTime()-7*24*60*60*1e3)),children:e(Y0,{})}),e(f,{variant:"body1",sx:{minWidth:120,textAlign:"center",color:"#333",fontWeight:600},children:_.toLocaleDateString("ar-SA",{month:"long",year:"numeric"})}),e(xe,{size:"small",sx:{color:"#666"},onClick:()=>z(new Date(_.getTime()+7*24*60*60*1e3)),children:e(Q0,{})})]})]}),o(c,{sx:{border:"1px solid #e0e0e0",borderRadius:2,overflow:"hidden",background:"white"},children:[o(c,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:"1px solid #e0e0e0",background:"#f8f9fa"},children:[e(c,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center"},children:e(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:""})}),["","","",""].map((L,k)=>o(c,{sx:{p:2,borderRight:k<3?"1px solid #e0e0e0":"none",textAlign:"center"},children:[e(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:L}),e(f,{variant:"caption",color:"text.secondary",children:10+k})]},L))]}),["07:00","08:00","09:00","10:00","11:00","12:00","13:00"].map((L,k)=>o(c,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:k<6?"1px solid #e0e0e0":"none",minHeight:60},children:[e(c,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa"},children:e(f,{variant:"caption",color:"text.secondary",fontWeight:500,children:L})}),[0,1,2,3].map(G=>e(c,{sx:{p:1,borderRight:G<3?"1px solid #e0e0e0":"none",position:"relative",minHeight:60},children:R.filter(W=>{const M=W.time.split(" - ")[0],U=W.day;return M===L&&U===["","","",""][G]}).map(W=>o(c,{sx:{position:"absolute",top:4,left:4,right:4,bottom:4,background:"rgba(14, 81, 129, 0.08)",borderRadius:1,p:1,color:"#0e5181",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:[e(f,{variant:"caption",fontWeight:600,sx:{fontSize:"0.7rem",lineHeight:1.2},children:W.title}),e(f,{variant:"caption",sx:{opacity:.8,fontSize:"0.6rem",lineHeight:1.2},children:W.time})]},W.id))},G))]},L))]}),R.length===0&&o(c,{sx:{textAlign:"center",py:4},children:[e(Pn,{sx:{fontSize:48,color:"#ccc",mb:2}}),e(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"   "}),e(re,{variant:"contained",sx:{background:"#e5978b","&:hover":{background:"#f0a8a0"}},onClick:()=>t("/teacher/meetings"),children:" "})]})]})]})]})})})]})})},u9=({quizId:t,onFinish:n})=>{var U,H,N;const a=ct(),{quizId:l}=cr(),d=t||l,[p,h]=w.useState(0),[x,m]=w.useState({}),[y,v]=w.useState(null),[S,C]=w.useState([]),[_,z]=w.useState(!0),[R,B]=w.useState(null),[T,O]=w.useState(null),[q,j]=w.useState(!1);w.useEffect(()=>{ee()},[d]);const ee=()=>$(null,null,function*(){try{z(!0),B(null);const Y=yield Lt.getQuiz(d);v(Y);const E=Y.questions||[];C(E);const I=yield Lt.startQuizAttempt(d);O(I.id)}catch(Y){console.error("Error loading quiz:",Y),B("    .    .")}finally{z(!1)}}),V=Y=>{m(oe(X({},x),{[p]:Y}))},L=()=>{p<S.length-1&&h(p+1)},k=()=>{p>0&&h(p-1)},G=()=>$(null,null,function*(){try{if(j(!0),!T){B("     .    .");return}const Y=S.map((E,I)=>{var A,Q;return{question_id:E.id,selected_answer_id:((A=x[I])==null?void 0:A.selected_answer)||null,text_answer:((Q=x[I])==null?void 0:Q.text_answer)||null}});console.log("Answers to submit:",Y),yield Lt.submitQuizAnswers(T,Y),yield Lt.finishQuizAttempt(T),n?n(T):a(`/student/quiz/${d}/result/${T}`)}catch(Y){console.error("Error submitting quiz:",Y),B("    .    .")}finally{j(!1)}});if(_)return e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e(Qe,{})});if(R)return o(c,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:[e(Be,{severity:"error",sx:{mb:2},children:R}),e(re,{variant:"contained",onClick:()=>window.location.reload(),children:" "})]});if(!y||!S.length)return e(c,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:e(Be,{severity:"info",children:"     ."})});const W=S[p],M=S.length;return e(c,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:o(De,{sx:{p:4,borderRadius:3,boxShadow:3},children:[e(f,{variant:"h5",fontWeight:700,mb:2,children:y.title}),o(kn,{direction:"row",spacing:2,mb:2,alignItems:"center",children:[e(_e,{label:` ${p+1}  ${M}`,color:"primary"}),y.time_limit&&e(_e,{label:`: ${y.time_limit} `,color:"secondary"}),e(_e,{label:`: ${W.points}`,color:"info"})]}),e(Sr,{variant:"determinate",value:(p+1)/M*100,sx:{mb:3,height:8,borderRadius:2}}),e(f,{variant:"h6",mb:2,children:W.text}),W.question_type==="multiple_choice"&&e(Nc,{value:((U=x[p])==null?void 0:U.selected_answer)||"",onChange:Y=>V(oe(X({},x[p]),{selected_answer:Y.target.value})),children:W.answers&&W.answers.length>0?W.answers.map((Y,E)=>e(wt,{value:Y.id,control:e(to,{}),label:Y.text},E)):o(c,{children:[e(f,{color:"error",sx:{mb:1},children:"     "}),e(f,{variant:"caption",color:"text.secondary",children:"       "})]})}),W.question_type==="true_false"&&o(Nc,{value:((H=x[p])==null?void 0:H.selected_answer)||"",onChange:Y=>V(oe(X({},x[p]),{selected_answer:Y.target.value})),children:[e(wt,{value:"true",control:e(to,{}),label:""}),e(wt,{value:"false",control:e(to,{}),label:""})]}),W.question_type==="short_answer"&&e(ze,{label:"",value:((N=x[p])==null?void 0:N.text_answer)||"",onChange:Y=>V(oe(X({},x[p]),{text_answer:Y.target.value})),fullWidth:!0,multiline:!0,rows:3,sx:{mt:2}}),o(kn,{direction:"row",spacing:2,mt:4,justifyContent:"space-between",children:[e(re,{variant:"outlined",onClick:k,disabled:p===0,children:""}),p<M-1?e(re,{variant:"contained",onClick:L,children:""}):e(re,{variant:"contained",color:"success",onClick:G,disabled:q,children:q?" ...":" "})]})]})})},h9=({quizId:t,attemptId:n,onRetry:a,onClose:l})=>{var ee,V;ct();const{quizId:d,attemptId:p}=cr(),h=t||d,x=n||p,[m,y]=w.useState(null),[v,S]=w.useState([]),[C,_]=w.useState(!0),[z,R]=w.useState(null);w.useEffect(()=>{x&&B()},[x]);const B=()=>$(null,null,function*(){var L,k;try{if(_(!0),R(null),!x){R("     .");return}console.log(" Loading quiz result for attempt:",x);const G=yield Lt.getQuizAttemptResult(x);console.log(" Quiz attempt result:",G),y(G);let W=null;try{console.log(" Trying result_answers endpoint..."),W=yield Lt.getQuizAttemptResultAnswers(x),console.log(" Quiz result answers data:",W)}catch(U){console.log(" Result answers failed, trying regular answers...",U);try{W=yield Lt.getQuizAttemptAnswers(x),console.log(" Quiz regular answers data:",W)}catch(H){console.log(" Both answer endpoints failed:",H);try{console.log(" Trying to get quiz questions as fallback...");const N=yield Lt.getQuizQuestions(h);console.log(" Quiz questions fallback:",N),W={results:((L=N.results)==null?void 0:L.map((Y,E)=>({id:`mock-${E}`,question:Y,text_answer:null,selected_answer_id:null,is_correct:!1,points_earned:0,feedback:null})))||[]}}catch(N){console.log(" Fallback also failed:",N),W={results:[],answers:[]}}}}const M=(W==null?void 0:W.results)||(W==null?void 0:W.answers)||W||[];console.log(" Processed answers array:",M),console.log(" Answers count:",M.length),console.log(" First answer structure:",M[0]),S(M)}catch(G){console.error(" Error loading quiz result:",G),console.error(" Error details:",(k=G.response)==null?void 0:k.data),R(`     : ${G.message||"  "}`)}finally{_(!1)}});if(C)return e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e(Qe,{})});if(z)return o(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:[e(Be,{severity:"error",sx:{mb:2},children:z}),e(re,{variant:"contained",onClick:B,children:" "})]});if(!m)return e(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:e(Be,{severity:"warning",children:"    "})});const T=m.score||m.percentage||m.total_score||0,O=((ee=m.quiz)==null?void 0:ee.pass_mark)||m.pass_mark||50,q=m.passed!==void 0?m.passed:T>=O,j=((V=m.quiz)==null?void 0:V.total_points)||m.total_points||100;return console.log(" Result calculation:",{score:T,passed:q,passMark:O,totalPoints:j,result:m}),o(c,{sx:{maxWidth:600,mx:"auto",p:{xs:1,md:3}},children:[o(De,{elevation:2,sx:{borderRadius:3,p:4,mb:3,textAlign:"center"},children:[e(jr,{sx:{fontSize:48,color:q?"success.main":"error.main",mb:2}}),e(f,{variant:"h5",fontWeight:700,mb:2,sx:{direction:"rtl",textAlign:"center"},children:" "}),e(_e,{label:q?"":"",color:q?"success":"error",sx:{mb:2,fontSize:18}}),o(f,{variant:"h4",fontWeight:800,color:q?"success.main":"error.main",mb:2,children:[T.toFixed(1),"%"]}),e(Sr,{variant:"determinate",value:T,sx:{mb:2,height:10,borderRadius:2,"& .MuiLinearProgress-bar":{backgroundColor:q?"success.main":"error.main"}}}),o(f,{variant:"body1",mb:2,sx:{direction:"rtl",textAlign:"center"},children:[": ",T.toFixed(1),"  ",j]}),o(f,{variant:"body2",color:"text.secondary",mb:2,sx:{direction:"rtl",textAlign:"center"},children:[" : ",O,"%"]}),v&&v.length>0&&o(f,{variant:"body2",color:"text.secondary",mb:2,sx:{direction:"rtl",textAlign:"center"},children:[" : ",v.length," |  : ",v.filter(L=>L.is_correct===!0).length]}),q?e(re,{variant:"contained",color:"primary",sx:{borderRadius:2,fontWeight:"bold",px:4,mt:2},onClick:l,children:""}):e(re,{variant:"contained",color:"error",sx:{borderRadius:2,fontWeight:"bold",px:4,mt:2},onClick:a||(()=>window.location.reload()),children:" "})]}),v&&v.length>0?o(De,{elevation:2,sx:{borderRadius:3,p:3},children:[o(f,{variant:"h6",fontWeight:700,mb:3,sx:{direction:"rtl",textAlign:"center"},children:["  (",v.length," )"]}),v.map((L,k)=>{var N,Y,E,I,A,Q,J,P;console.log(` Answer ${k+1}:`,L);let G="    ";if(L.text_answer)G=L.text_answer;else if((N=L.selected_answer)!=null&&N.text)G=L.selected_answer.text;else if(L.selected_answer_id){const ie=(E=(Y=L.question)==null?void 0:Y.answers)==null?void 0:E.find(ue=>ue.id===L.selected_answer_id);G=(ie==null?void 0:ie.text)||`  (ID: ${L.selected_answer_id})`}else L.answer_text?G=L.answer_text:L.user_answer&&(G=L.user_answer);let W=" ";if((I=L.question)!=null&&I.answers){const ie=L.question.answers.find(ue=>ue.is_correct);ie&&(W=ie.text)}else(A=L.correct_answer)!=null&&A.text&&(W=L.correct_answer.text);const M=L.is_correct!==void 0?L.is_correct:!1,U=L.points_earned||L.score||0,H=((Q=L.question)==null?void 0:Q.points)||L.total_points||1;return o(c,{sx:{mb:3,p:2,border:"1px solid",borderColor:"divider",borderRadius:2},children:[o(f,{variant:"subtitle1",fontWeight:600,mb:1,sx:{direction:"rtl",textAlign:"right"},children:[" ",k+1,": ",((J=L.question)==null?void 0:J.text)||L.question_text||` ${k+1}`]}),o(c,{sx:{mb:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{direction:"rtl",textAlign:"right"},children:":"}),e(f,{variant:"body1",sx:{direction:"rtl",textAlign:"right",p:1,bgcolor:"grey.100",borderRadius:1,mb:1},children:G})]}),((P=L.question)==null?void 0:P.question_type)!=="short_answer"&&o(c,{sx:{mb:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{direction:"rtl",textAlign:"right"},children:" :"}),e(f,{variant:"body1",sx:{direction:"rtl",textAlign:"right",p:1,bgcolor:M?"success.light":"error.light",borderRadius:1,mb:1},children:W})]}),o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(_e,{label:M?"":"",color:M?"success":"error",size:"small"}),o(f,{variant:"body2",color:"text.secondary",children:[": ",U," / ",H]})]}),L.feedback&&o(c,{sx:{mt:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{direction:"rtl",textAlign:"right"},children:":"}),e(f,{variant:"body2",sx:{direction:"rtl",textAlign:"right",p:1,bgcolor:"info.light",borderRadius:1},children:L.feedback})]})]},L.id||k)})]}):e(De,{elevation:2,sx:{borderRadius:3,p:3},children:o(Be,{severity:"warning",sx:{textAlign:"center"},children:["    .      .",e("br",{}),o("small",{children:["Attempt ID: ",x," | Quiz ID: ",h]}),e("br",{}),o("small",{children:["Debug: answers length = ",(v==null?void 0:v.length)||0]}),e("br",{}),e(re,{variant:"outlined",size:"small",onClick:B,sx:{mt:2},children:"  "})]})}),e(c,{sx:{display:"flex",justifyContent:"center",mt:3},children:e(re,{variant:"outlined",color:"primary",onClick:l,sx:{borderRadius:3,px:4,py:1.5,fontWeight:"bold"},children:""})})]})},PC=({examId:t,onStart:n,onClose:a})=>{const l=ct(),[d,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(null);w.useEffect(()=>{t&&v()},[t]);const v=()=>$(null,null,function*(){try{x(!0),y(null);const C=yield nr.getExam(t);p(C)}catch(C){console.error("Error loading exam:",C),y("    .    .")}finally{x(!1)}}),S=()=>$(null,null,function*(){try{const C=yield nr.startExamAttempt(t);n?n(C.id):l("taking")}catch(C){console.error("Error starting exam:",C),y("    .    .")}});return h?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e(Qe,{})}):m?o(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:[e(Be,{severity:"error",sx:{mb:2},children:m}),e(re,{variant:"contained",onClick:v,children:" "})]}):d?e(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:o(De,{elevation:2,sx:{borderRadius:3,p:4,mb:3,textAlign:"center"},children:[e(jr,{sx:{fontSize:48,color:"primary.main",mb:2}}),e(f,{variant:"h5",fontWeight:700,mb:2,children:d.title}),e(f,{variant:"body1",mb:2,children:d.description||"    "}),o(c,{sx:{display:"flex",justifyContent:"center",gap:2,mb:2,flexWrap:"wrap"},children:[d.time_limit&&e(_e,{label:`: ${d.time_limit} `,color:"info"}),d.pass_mark&&e(_e,{label:` : ${d.pass_mark}%`,color:"success"}),d.total_points&&e(_e,{label:` : ${d.total_points}`,color:"primary"})]}),e(re,{variant:"contained",startIcon:e(Oi,{}),size:"large",sx:{borderRadius:2,fontWeight:"bold",px:5,py:1.5},onClick:S,children:" "})]})}):e(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:e(Be,{severity:"warning",children:"    "})})},jC=({examId:t,attemptId:n,onFinish:a,onClose:l})=>{var V,L,k;const[d,p]=w.useState(0),[h,x]=w.useState({}),[m,y]=w.useState([]),[v,S]=w.useState(!0),[C,_]=w.useState(null),[z,R]=w.useState(!1),B=ct();w.useEffect(()=>{t&&T()},[t]);const T=()=>$(null,null,function*(){try{S(!0),_(null);const G=yield nr.getExamQuestions(t);y(G.results||G)}catch(G){console.error("Error loading exam questions:",G),_("     .    .")}finally{S(!1)}});if(v)return e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e(Qe,{})});if(C)return o(c,{sx:{maxWidth:600,mx:"auto",p:{xs:1,md:3}},children:[e(Be,{severity:"error",sx:{mb:2},children:C}),e(re,{variant:"contained",onClick:T,children:" "})]});if(!m||m.length===0)return e(c,{sx:{maxWidth:600,mx:"auto",p:{xs:1,md:3}},children:e(Be,{severity:"warning",children:"     "})});const O=m[d],q=m.length,j=G=>{x(oe(X({},h),{[d]:G}))},ee=()=>$(null,null,function*(){try{if(R(!0),!n){_("     .    .");return}const G=m.map((W,M)=>{var U,H;return{question_id:W.id,selected_answer_id:((U=h[M])==null?void 0:U.selected_answer)||null,text_answer:((H=h[M])==null?void 0:H.text_answer)||null}});yield nr.submitExamAnswers(n,G),yield nr.finishExamAttempt(n),a?a(n):B("result")}catch(G){console.error("Error submitting exam:",G),_("    .    .")}finally{R(!1)}});return e(c,{sx:{maxWidth:600,mx:"auto",p:{xs:1,md:3}},children:o(De,{elevation:2,sx:{borderRadius:3,p:4,mb:3},children:[o(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e(ar,{sx:{mr:1,color:"primary.main"}}),o(f,{variant:"h6",fontWeight:700,children:[" ",d+1,"  ",q]}),e(_e,{label:`: ${O.points}`,color:"info",size:"small",sx:{ml:2}})]}),e(Sr,{variant:"determinate",value:(d+1)/q*100,sx:{mb:3,height:8,borderRadius:2}}),e(f,{variant:"h5",mb:3,children:O.text}),O.question_type==="multiple_choice"&&e(Nc,{value:((V=h[d])==null?void 0:V.selected_answer)||"",onChange:G=>j(oe(X({},h[d]),{selected_answer:G.target.value})),children:O.answers&&O.answers.length>0?O.answers.map((G,W)=>e(wt,{value:G.id,control:e(to,{}),label:G.text},W)):e(f,{color:"error",children:"     "})}),O.question_type==="true_false"&&o(Nc,{value:((L=h[d])==null?void 0:L.selected_answer)||"",onChange:G=>j(oe(X({},h[d]),{selected_answer:G.target.value})),children:[e(wt,{value:"true",control:e(to,{}),label:""}),e(wt,{value:"false",control:e(to,{}),label:""})]}),O.question_type==="short_answer"&&e(ze,{label:"",value:((k=h[d])==null?void 0:k.text_answer)||"",onChange:G=>j(oe(X({},h[d]),{text_answer:G.target.value})),fullWidth:!0,multiline:!0,rows:3,sx:{mt:2}}),o(c,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e(re,{variant:"outlined",startIcon:e(qt,{}),disabled:d===0,onClick:()=>p(G=>G-1),children:""}),d<q-1?e(re,{variant:"contained",endIcon:e(Li,{}),onClick:()=>p(G=>G+1),children:""}):e(re,{variant:"contained",endIcon:e(sw,{}),color:"success",onClick:ee,disabled:z,children:z?" ...":" "})]})]})})},Km=({examId:t,attemptId:n,onRetry:a,onClose:l})=>{var T,O;const[d,p]=w.useState(null),[h,x]=w.useState([]),[m,y]=w.useState(!0),[v,S]=w.useState(null);w.useEffect(()=>{n&&C()},[n]);const C=()=>$(null,null,function*(){try{if(y(!0),S(null),!n){S("     .");return}const q=yield nr.getExamAttemptResult(n);p(q);const j=yield nr.getExamAttemptResultAnswers(n);x(j.results||j)}catch(q){console.error("Error loading exam result:",q),S("     .    .")}finally{y(!1)}});if(m)return e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e(Qe,{})});if(v)return o(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:[e(Be,{severity:"error",sx:{mb:2},children:v}),e(re,{variant:"contained",onClick:C,children:" "})]});if(!d)return e(c,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:e(Be,{severity:"warning",children:"    "})});const _=d.score||0,z=((T=d.exam)==null?void 0:T.pass_mark)||60,R=_>=z,B=((O=d.exam)==null?void 0:O.total_points)||100;return o(c,{sx:{maxWidth:600,mx:"auto",p:{xs:1,md:3}},children:[o(De,{elevation:2,sx:{borderRadius:3,p:4,mb:3,textAlign:"center"},children:[e(jr,{sx:{fontSize:48,color:R?"success.main":"error.main",mb:2}}),e(f,{variant:"h5",fontWeight:700,mb:2,sx:{direction:"rtl",textAlign:"center"},children:" "}),e(_e,{label:R?"":"",color:R?"success":"error",sx:{mb:2,fontSize:18}}),o(f,{variant:"h4",fontWeight:800,color:R?"success.main":"error.main",mb:2,children:[_.toFixed(1),"%"]}),e(Sr,{variant:"determinate",value:_,sx:{mb:2,height:10,borderRadius:2,"& .MuiLinearProgress-bar":{backgroundColor:R?"success.main":"error.main"}}}),o(f,{variant:"body1",mb:2,sx:{direction:"rtl",textAlign:"center"},children:[": ",_.toFixed(1),"  ",B]}),o(f,{variant:"body2",color:"text.secondary",mb:2,sx:{direction:"rtl",textAlign:"center"},children:[" : ",z,"%"]}),R?e(re,{variant:"contained",color:"primary",sx:{borderRadius:2,fontWeight:"bold",px:4,mt:2},onClick:l,children:""}):e(re,{variant:"contained",color:"error",sx:{borderRadius:2,fontWeight:"bold",px:4,mt:2},onClick:a||(()=>window.location.reload()),children:" "})]}),h&&h.length>0&&o(De,{elevation:2,sx:{borderRadius:3,p:3},children:[e(f,{variant:"h6",fontWeight:700,mb:3,sx:{direction:"rtl",textAlign:"center"},children:" "}),h.map((q,j)=>{var ee,V,L,k,G,W,M;return o(c,{sx:{mb:3,p:2,border:"1px solid",borderColor:"divider",borderRadius:2},children:[o(f,{variant:"subtitle1",fontWeight:600,mb:1,sx:{direction:"rtl",textAlign:"right"},children:[" ",j+1,": ",(ee=q.question)==null?void 0:ee.text]}),o(c,{sx:{mb:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{direction:"rtl",textAlign:"right"},children:":"}),e(f,{variant:"body1",sx:{direction:"rtl",textAlign:"right",p:1,bgcolor:"grey.100",borderRadius:1,mb:1},children:q.text_answer||((V=q.selected_answer)==null?void 0:V.text)||"    "})]}),((L=q.question)==null?void 0:L.question_type)!=="short_answer"&&o(c,{sx:{mb:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{direction:"rtl",textAlign:"right"},children:" :"}),e(f,{variant:"body1",sx:{direction:"rtl",textAlign:"right",p:1,bgcolor:q.is_correct?"success.light":"error.light",borderRadius:1,mb:1},children:((W=(G=(k=q.question)==null?void 0:k.answers)==null?void 0:G.find(U=>U.is_correct))==null?void 0:W.text)||" "})]}),o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(_e,{label:q.is_correct?"":"",color:q.is_correct?"success":"error",size:"small"}),o(f,{variant:"body2",color:"text.secondary",children:[": ",q.points_earned||0," / ",((M=q.question)==null?void 0:M.points)||0]})]}),q.feedback&&o(c,{sx:{mt:1},children:[e(f,{variant:"body2",color:"text.secondary",sx:{direction:"rtl",textAlign:"right"},children:":"}),e(f,{variant:"body2",sx:{direction:"rtl",textAlign:"right",p:1,bgcolor:"info.light",borderRadius:1},children:q.feedback})]})]},q.id||j)})]}),e(c,{sx:{display:"flex",justifyContent:"center",mt:3},children:e(re,{variant:"outlined",color:"primary",onClick:l,sx:{borderRadius:3,px:4,py:1.5,fontWeight:"bold"},children:""})})]})},f9=({onClose:t,finalExamData:n,courseId:a})=>{var G,W;const[l,d]=w.useState("start"),[p,h]=w.useState({}),[x,m]=w.useState(null),[y,v]=w.useState(!1),[S,C]=w.useState(null),[_,z]=w.useState(null),[R,B]=w.useState(!1),[T,O]=w.useState([]),[q,j]=w.useState(!1);w.useEffect(()=>{n&&(m(n),console.log("FinalExamModal - Exam data:",n),console.log("FinalExamModal - Previous attempts:",n.previous_attempts),n.previous_attempts&&n.previous_attempts.length>0?(O(n.previous_attempts),j(!0),console.log("FinalExamModal - Has completed exam: true")):(j(!1),console.log("FinalExamModal - Has completed exam: false")))},[n]);const ee=(M,U)=>{h(oe(X({},p),{[M]:U}))},V=()=>{if(console.log("handleViewResults called"),console.log("Previous attempts:",T),T.length>0){const M=T[0];console.log("Latest attempt:",M),z(M.id),d("result")}else console.log("No previous attempts found")},L=()=>$(null,null,function*(){var M,U,H;if(console.log("handleStart called with exam:",x),!x){console.log("No exam data available");return}try{v(!0),C(null),console.log("Starting exam attempt for exam ID:",x.id);const N=yield nr.startExamAttempt(x.id);if(console.log("Exam attempt started successfully:",N),console.log("Attempt data keys:",Object.keys(N)),console.log("Attempt ID from response:",N.id),!N.id){console.error("No ID in attempt data:",N),C("   :      .");return}z(N.id),console.log("Set attemptId to:",N.id),d("questions")}catch(N){console.error("Error starting final exam:",N),console.error("Error details:",{message:N.message,response:(M=N.response)==null?void 0:M.data,status:(U=N.response)==null?void 0:U.status});const Y=(H=N.response)==null?void 0:H.data;if(Array.isArray(Y)&&Y.length>0){const E=Y[0];E.includes("  ")?C("      .    ."):E.includes("      ")?C("      .     ."):C(E)}else C("    .    .")}finally{v(!1)}}),k=()=>$(null,null,function*(){var M,U,H;if(console.log("handleSubmit called",{attemptId:_,exam:x==null?void 0:x.id,answers:p,step:l}),!_||!x){console.log("Missing required data:",{attemptId:_,exam:x==null?void 0:x.id,step:l}),C('     .    " ".');return}if(l!=="questions"){console.log("Invalid step for submission:",l),C("       .");return}if(!_){console.log("No attemptId found, redirecting to start exam"),C('    .    " " .'),d("intro");return}try{B(!0),C(null);const N=x.questions.map(I=>{var P;const A=p[I.id];let Q=(A==null?void 0:A.selected_answer)||null;if(Array.isArray(Q)&&(Q=Q[0]||null),I.question_type==="true_false"&&Q){const ie=(P=I.answers)==null?void 0:P.find(ue=>ue.id==Q);ie&&(ie.text===""||ie.text==="true"?Q="true":(ie.text===""||ie.text==="false")&&(Q="false"))}const J={question_id:I.id,selected_answer_id:Q,text_answer:(A==null?void 0:A.text_answer)||null};return console.log(`Question ${I.id} submission:`,J),J});console.log("Submitting answers:",N);const Y=yield nr.submitExamAnswers(_,N);console.log("Submit result:",Y);const E=yield nr.finishExamAttempt(_);console.log("Finish result:",E),d("result")}catch(N){console.error("Error submitting final exam:",N),console.error("Error details:",{message:N.message,response:(M=N.response)==null?void 0:M.data,status:(U=N.response)==null?void 0:U.status});const Y=(H=N.response)==null?void 0:H.data;Y&&typeof Y=="object"?Y.error?C(Y.error):Array.isArray(Y)&&Y.length>0?C(Y[0]):C("    .    ."):C("    .    .")}finally{B(!1)}});return e(c,{sx:{maxWidth:420,mx:"auto",p:0},children:o(De,{elevation:3,sx:{borderRadius:4,p:3,mb:2,boxShadow:"0 4px 24px 0 rgba(63,81,181,0.10)"},children:[l==="start"&&o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[S&&e(Be,{severity:"error",sx:{mb:2,width:"100%"},children:S}),e(jr,{sx:{fontSize:48,color:"primary.main",mb:1}}),e(f,{variant:"h6",fontWeight:800,mb:1,sx:{textAlign:"center",letterSpacing:1},children:(x==null?void 0:x.title)||" "}),e(f,{variant:"body2",color:"text.secondary",mb:2,sx:{textAlign:"center",fontSize:15},children:(x==null?void 0:x.description)||"     "}),o(kn,{direction:"row",spacing:1,mb:2,children:[e(_e,{icon:e(dn,{}),label:`${(x==null?void 0:x.time_limit)||60} `,size:"small",color:"info"}),e(_e,{icon:e(Qo,{}),label:`: ${(x==null?void 0:x.pass_mark)||60}%`,size:"small",color:"success"}),e(_e,{label:`: ${(x==null?void 0:x.total_points)||100}`,size:"small",color:"primary"})]}),q&&e(Be,{severity:"info",sx:{mb:2,direction:"rtl",textAlign:"right"},children:"    .        ."}),o(kn,{direction:"column",spacing:2,sx:{width:"100%",mt:2},children:[e(re,{variant:"contained",color:"primary",size:"large",startIcon:y?e(Qe,{size:20,color:"inherit"}):e(Oi,{}),disabled:y||!x,sx:{borderRadius:99,px:5,py:1.2,fontWeight:"bold",fontSize:18,boxShadow:"0 4px 16px 0 rgba(63,81,181,0.10)"},onClick:L,children:y?" ...":" "}),q&&e(re,{variant:"outlined",color:"secondary",size:"large",startIcon:e(jr,{}),sx:{borderRadius:99,px:5,py:1.2,fontWeight:"bold",fontSize:16,borderWidth:2,"&:hover":{borderWidth:2,bgcolor:"secondary.light",color:"white"}},onClick:V,children:"  "})]})]}),l==="questions"&&o(c,{children:[S&&e(Be,{severity:"error",sx:{mb:2},children:S}),o(f,{variant:"h6",fontWeight:700,mb:2,textAlign:"center",children:[" (",((G=x==null?void 0:x.questions)==null?void 0:G.length)||0,")"]}),e(Vt,{sx:{mb:2}}),(W=x==null?void 0:x.questions)==null?void 0:W.map((M,U)=>{var H,N,Y;return o(De,{sx:{p:2,mb:2,borderRadius:2,boxShadow:0,bgcolor:"grey.50"},children:[o(f,{variant:"subtitle2",fontWeight:600,mb:1,sx:{direction:"rtl",textAlign:"right"},children:[U+1,". ",M.text,e(_e,{label:`: ${M.points}`,color:"info",size:"small",sx:{ml:1}})]}),M.question_type==="multiple_choice"||M.question_type==="true_false"?e(Nc,{value:((H=p[M.id])==null?void 0:H.selected_answer)||"",onChange:E=>{const I=Array.isArray(E.target.value)?E.target.value[0]:E.target.value;ee(M.id,oe(X({},p[M.id]),{selected_answer:I}))},sx:{direction:"rtl"},children:(N=M.answers)==null?void 0:N.map(E=>e(wt,{value:E.id,control:e(to,{}),label:E.text,sx:{direction:"rtl",textAlign:"right"}},E.id))}):e(ze,{fullWidth:!0,multiline:!0,minRows:2,placeholder:"  ...",value:((Y=p[M.id])==null?void 0:Y.text_answer)||"",onChange:E=>ee(M.id,oe(X({},p[M.id]),{text_answer:E.target.value})),sx:{mt:1,direction:"rtl",textAlign:"right"}})]},M.id)}),o(c,{sx:{display:"flex",justifyContent:"center",gap:2,mt:2},children:[e(re,{variant:"outlined",onClick:t,sx:{borderRadius:3,px:3},children:""}),e(re,{variant:"contained",color:"success",endIcon:R?e(Qe,{size:20,color:"inherit"}):e(sw,{}),disabled:R,onClick:k,sx:{borderRadius:99,px:5,py:1.2,fontWeight:"bold",fontSize:18,boxShadow:"0 4px 16px 0 rgba(63,81,181,0.10)"},children:R?" ...":" "})]})]}),l==="result"&&e(Km,{examId:x==null?void 0:x.id,attemptId:_,onClose:t})]})})},ro={generateCertificate:t=>$(null,null,function*(){try{return(yield ne.post(`/api/certificates/generate/${t}/`)).data}catch(n){throw console.error("Error generating certificate:",n),n}}),getMyCertificates:()=>$(null,null,function*(){try{return(yield ne.get("/api/certificates/get-my-certificates/")).data}catch(t){throw console.error("Error fetching certificates:",t),t}}),getCertificateDetail:t=>$(null,null,function*(){try{return(yield ne.get(`/api/certificates/detail/${t}/`)).data}catch(n){throw console.error("Error fetching certificate detail:",n),n}}),verifyCertificate:t=>$(null,null,function*(){try{return(yield ne.get(`/api/certificates/verify-code/${t}/`)).data}catch(n){throw console.error("Error verifying certificate:",n),n}}),downloadPDF:t=>$(null,null,function*(){try{return(yield ne.get(`/api/certificates/download/${t}/`)).data}catch(n){throw console.error("Error downloading certificate:",n),n}}),checkCourseCompletion:t=>$(null,null,function*(){try{return(yield ne.get(`/api/certificates/check-completion/${t}/`)).data}catch(n){throw console.error("Error checking course completion:",n),n}}),getVerificationUrl:t=>`${window.location.origin}/certificates/verify/${t}`,shareCertificate:t=>$(null,null,function*(){const n=ro.getVerificationUrl(t.verification_code);if(navigator.share)try{return yield navigator.share({title:` ${t.course_name}`,text:`   ${t.course_name}`,url:n}),{success:!0,message:"   "}}catch(a){if(a.name!=="AbortError")throw a;return{success:!1,message:"  "}}else try{return yield navigator.clipboard.writeText(n),{success:!0,message:"     "}}catch(a){throw new Error("    ")}})},p9=({url:t,playing:n,onPlay:a,onPause:l,onProgress:d,onDuration:p,width:h,height:x,style:m,lessonData:y})=>{const v=bt.useRef(null),C=(z=>z?z.startsWith("http://")||z.startsWith("https://")?z:z.startsWith("/media/")||z.startsWith("/static/")?`${Zi.baseURL}${z}`:z.startsWith("/")?z:`${Zi.baseURL}/media/${z}`:null)(t);return console.log("VideoPlayer - Original URL:",t),console.log("VideoPlayer - Processed URL:",C),console.log("VideoPlayer - isValidVideoUrl:",C&&(C.includes(".mp4")||C.includes(".webm")||C.includes(".ogg")||C.includes(".avi")||C.includes(".mov")||C.includes(".wmv")||C.includes(".flv")||C.includes("blob:")||C.startsWith("http://")||C.startsWith("https://"))),bt.useEffect(()=>{const z=v.current;if(!z)return;const R=()=>a&&a(),B=()=>l&&l(),T=()=>{d&&z.duration&&d({played:z.currentTime/z.duration,playedSeconds:z.currentTime,loaded:1,loadedSeconds:z.duration})},O=()=>p&&p(z.duration),q=()=>p&&p(z.duration);return z.addEventListener("play",R),z.addEventListener("pause",B),z.addEventListener("timeupdate",T),z.addEventListener("durationchange",O),z.addEventListener("loadedmetadata",q),()=>{z.removeEventListener("play",R),z.removeEventListener("pause",B),z.removeEventListener("timeupdate",T),z.removeEventListener("durationchange",O),z.removeEventListener("loadedmetadata",q)}},[a,l,d,p]),bt.useEffect(()=>{v.current&&(n?v.current.play().catch(z=>console.error("Error playing video:",z)):v.current.pause())},[n]),C&&(C.includes(".mp4")||C.includes(".webm")||C.includes(".ogg")||C.includes(".avi")||C.includes(".mov")||C.includes(".wmv")||C.includes(".flv")||C.includes("blob:")||C.startsWith("http://")||C.startsWith("https://"))?e(Rt,{children:e("video",{ref:v,src:C,style:X({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000"},m),controls:!0,playsInline:!0,preload:"metadata",onError:z=>{console.error("Video error:",z),console.error("Video src (original):",t),console.error("Video src (processed):",C),console.error("Video error details:",z.target.error)},onLoadStart:()=>{console.log("Video load started for URL:",C)},onLoadedData:()=>{console.log("Video data loaded for URL:",C)},onCanPlay:()=>{console.log("Video can play for URL:",C)}})}):o("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000",color:"white",flexDirection:"column",gap:2,padding:2},children:[y!=null&&y.content?e(c,{sx:{width:"100%",height:"100%",p:3,overflow:"auto",bgcolor:"rgba(255,255,255,0.95)",color:"text.primary"},children:e(f,{variant:"body1",sx:{textAlign:"right",lineHeight:1.8,fontSize:"1.1rem","& h1, & h2, & h3, & h4, & h5, & h6":{color:"primary.main",fontWeight:"bold",mb:2},"& p":{mb:2},"& ul, & ol":{pr:2,mb:2},"& li":{mb:1},"& img":{maxWidth:"100%",height:"auto",borderRadius:1,boxShadow:2},"& blockquote":{borderLeft:4,borderColor:"primary.main",pl:2,fontStyle:"italic",bgcolor:"grey.50",p:2,borderRadius:1,mb:2},"& code":{bgcolor:"grey.100",px:1,py:.5,borderRadius:.5,fontFamily:"monospace"},"& pre":{bgcolor:"grey.100",p:2,borderRadius:1,overflow:"auto",mb:2}},dangerouslySetInnerHTML:{__html:y.content}})}):o(Rt,{children:[e(f,{variant:"h6",sx:{color:"white",textAlign:"center"},children:"   "}),e(f,{variant:"body2",sx:{color:"white",textAlign:"center",opacity:.7},children:t?"      ":"      "})]}),t&&o(f,{variant:"caption",sx:{color:"white",textAlign:"center",opacity:.5,wordBreak:"break-all"},children:[" : ",t]}),C&&C!==t&&o(f,{variant:"caption",sx:{color:"white",textAlign:"center",opacity:.5,wordBreak:"break-all"},children:[" : ",C]})]})};te(Sr)(({theme:t})=>({height:10,borderRadius:5,[`&.${N1.colorPrimary}`]:{backgroundColor:t.palette.grey[t.palette.mode==="light"?200:800]},[`& .${N1.bar}`]:{borderRadius:5,backgroundImage:"linear-gradient(45deg, #3f51b5, #2196f3)"}}));te(Qe)({position:"relative","& .MuiCircularProgress-circle":{strokeLinecap:"round"}});te(f)({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:"bold"});const g9=yt`
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
`;te(nt)(({theme:t})=>({borderRadius:t.shape.borderRadius*2,background:t.palette.mode==="dark"?"rgba(30, 30, 46, 0.8)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:`1px solid ${t.palette.divider}`,boxShadow:t.shadows[4],transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",animation:`${g9} 0.5s ease-out forwards`,"&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[8],borderColor:t.palette.primary.main}}));te(nt)(({theme:t,active:n})=>({marginBottom:t.spacing(2),borderRadius:t.shape.borderRadius*2,background:n?t.palette.mode==="dark"?"rgba(63, 81, 181, 0.15)":"rgba(63, 81, 181, 0.05)":"transparent",borderLeft:`4px solid ${n?t.palette.primary.main:"transparent"}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderLeft:`4px solid ${t.palette.primary.light}`,background:t.palette.mode==="dark"?"rgba(63, 81, 181, 0.2)":"rgba(63, 81, 181, 0.08)",transform:"translateX(4px)"},"& .MuiCardContent-root":{padding:t.spacing(2)}}));te(Sr)(({theme:t,value:n})=>({height:8,borderRadius:4,backgroundColor:t.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)","& .MuiLinearProgress-bar":{borderRadius:4,background:n===100?`linear-gradient(90deg, ${t.palette.success.main} 0%, ${t.palette.success.light} 100%)`:`linear-gradient(90deg, ${t.palette.primary.main} 0%, ${t.palette.secondary.main} 100%)`,boxShadow:`0 0 10px ${t.palette.primary.main}40`}}));const m9=t=>{switch(t){case"video":return e(ji,{color:"primary"});case"quiz":return e(ar,{color:"secondary"});case"assignment":return e(Jr,{color:"warning"});default:return e(ts,{color:"action"})}},x9=(t,n)=>{const a=t?t.split(".").pop().toLowerCase():"";if(n)switch(n.toLowerCase()){case"pdf":return e(io,{sx:{color:"#d32f2f"}});case"image":case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":return e(ka,{sx:{color:"#1976d2"}});case"video":case"mp4":case"avi":case"mov":case"wmv":case"flv":case"webm":return e(a0,{sx:{color:"#388e3c"}});case"audio":case"mp3":case"wav":case"ogg":case"aac":return e(i0,{sx:{color:"#f57c00"}});case"document":case"doc":case"docx":return e(V1,{sx:{color:"#1976d2"}});case"excel":case"xls":case"xlsx":return e(U1,{sx:{color:"#388e3c"}});case"powerpoint":case"ppt":case"pptx":return e(sh,{sx:{color:"#d32f2f"}});case"code":case"txt":case"js":case"html":case"css":case"py":case"java":case"cpp":case"c":return e(n0,{sx:{color:"#7b1fa2"}});case"archive":case"zip":case"rar":case"7z":case"tar":case"gz":return e(H1,{sx:{color:"#5d4037"}});default:return e(ch,{sx:{color:"#757575"}})}switch(a){case"pdf":return e(io,{sx:{color:"#d32f2f"}});case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":case"svg":return e(ka,{sx:{color:"#1976d2"}});case"mp4":case"avi":case"mov":case"wmv":case"flv":case"webm":case"mkv":return e(a0,{sx:{color:"#388e3c"}});case"mp3":case"wav":case"ogg":case"aac":case"flac":return e(i0,{sx:{color:"#f57c00"}});case"doc":case"docx":return e(V1,{sx:{color:"#1976d2"}});case"xls":case"xlsx":return e(U1,{sx:{color:"#388e3c"}});case"ppt":case"pptx":return e(sh,{sx:{color:"#d32f2f"}});case"txt":case"js":case"html":case"css":case"py":case"java":case"cpp":case"c":case"php":case"json":case"xml":return e(n0,{sx:{color:"#7b1fa2"}});case"zip":case"rar":case"7z":case"tar":case"gz":return e(H1,{sx:{color:"#5d4037"}});default:return e(ch,{sx:{color:"#757575"}})}},b9=(t,n)=>{const a=t?t.split(".").pop().toLowerCase():"";if(n)switch(n.toLowerCase()){case"pdf":return"#d32f2f";case"image":case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":return"#1976d2";case"video":case"mp4":case"avi":case"mov":case"wmv":case"flv":case"webm":return"#388e3c";case"audio":case"mp3":case"wav":case"ogg":case"aac":return"#f57c00";case"document":case"doc":case"docx":return"#1976d2";case"excel":case"xls":case"xlsx":return"#388e3c";case"powerpoint":case"ppt":case"pptx":return"#d32f2f";case"code":case"txt":case"js":case"html":case"css":case"py":case"java":case"cpp":case"c":return"#7b1fa2";case"archive":case"zip":case"rar":case"7z":case"tar":case"gz":return"#5d4037";default:return"#757575"}switch(a){case"pdf":return"#d32f2f";case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":case"svg":return"#1976d2";case"mp4":case"avi":case"mov":case"wmv":case"flv":case"webm":case"mkv":return"#388e3c";case"mp3":case"wav":case"ogg":case"aac":case"flac":return"#f57c00";case"doc":case"docx":return"#1976d2";case"xls":case"xlsx":return"#388e3c";case"ppt":case"pptx":return"#d32f2f";case"txt":case"js":case"html":case"css":case"py":case"java":case"cpp":case"c":case"php":case"json":case"xml":return"#7b1fa2";case"zip":case"rar":case"7z":case"tar":case"gz":return"#5d4037";default:return"#757575"}},y9=({modules:t,expandedModule:n,onModuleClick:a,onLessonClick:l,currentLessonId:d,setActiveQuizId:p,setOpenQuiz:h,setShowQuizResult:x,showFinalExamButton:m,onFinalExamClick:y,assignments:v,quizzes:S,exams:C,onAssignmentClick:_})=>{const z=jt(),[R,B]=w.useState("lessons");return o(De,{elevation:0,sx:{borderRadius:2,overflow:"hidden",border:`1px solid ${z.palette.divider}`,maxHeight:"calc(100vh - 200px)",overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:z.palette.grey[100]},"&::-webkit-scrollbar-thumb":{backgroundColor:z.palette.grey[400],borderRadius:"3px"}},children:[o(c,{sx:{p:2,bgcolor:z.palette.background.paper,borderBottom:`1px solid ${z.palette.divider}`},children:[o(f,{variant:"h6",sx:{fontWeight:"bold",display:"flex",alignItems:"center",mb:2},children:[e(ts,{sx:{ml:1}})," "]}),o(zn,{value:R,onChange:(T,O)=>B(O),variant:"fullWidth",sx:{"& .MuiTab-root":{minHeight:40,fontSize:"0.8rem",fontWeight:"bold"},"& .Mui-selected":{color:z.palette.primary.main},"& .MuiTabs-indicator":{backgroundColor:z.palette.primary.main,height:3}},children:[e(mt,{label:` (${(t==null?void 0:t.reduce((T,O)=>{var q;return T+(((q=O.lessons)==null?void 0:q.length)||0)},0))||0})`,value:"lessons",icon:e(ts,{sx:{fontSize:18}}),iconPosition:"start"}),e(mt,{label:` (${(v==null?void 0:v.length)||0})`,value:"assignments",icon:e(Jr,{sx:{fontSize:18}}),iconPosition:"start"}),e(mt,{label:` (${(S==null?void 0:S.length)||0})`,value:"quizzes",icon:e(ar,{sx:{fontSize:18}}),iconPosition:"start"}),e(mt,{label:` (${(C==null?void 0:C.length)||0})`,value:"exams",icon:e(Qo,{sx:{fontSize:18}}),iconPosition:"start"})]})]}),R==="lessons"&&o(Rr,{sx:{p:0},children:[(t||[]).map((T,O)=>o(bt.Fragment,{children:[o(ir,{component:"div",onClick:()=>a(T.id),sx:{bgcolor:n===T.id?"action.hover":"background.paper",borderBottom:`1px solid ${z.palette.divider}`,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},children:[e(fr,{children:e(c,{sx:{width:20,height:20,borderRadius:2,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 2px 8px rgba(14, 81, 129, 0.3)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 100%)",borderRadius:2}},children:e(c,{sx:{position:"relative",zIndex:1},children:e(c,{sx:{width:24,height:24,borderRadius:"50%",background:"linear-gradient(45deg, #ffffff 0%, rgba(255,255,255,0.8) 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",width:8,height:8,borderRadius:"50%",background:"linear-gradient(45deg, #0e5181 0%, #e5978b 100%)",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}})})})}),e(Ut,{primary:e(f,{variant:"subtitle1",sx:{fontWeight:"bold",textAlign:"right",direction:"rtl"},children:T.title}),secondary:o(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl",display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[T.completedLessons,"  ",T.totalLessons," "]}),sx:{ml:1}}),o(c,{sx:{display:"flex",alignItems:"center"},children:[e(c,{sx:{width:80,mr:1},children:e(Sr,{variant:"determinate",value:T.progress,sx:{height:6,borderRadius:3,bgcolor:"grey.100",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.1)","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 1px 3px rgba(14, 81, 129, 0.3)"}}})}),e(c,{sx:{width:32,height:32,borderRadius:"50%",bgcolor:n===T.id?"primary.main":"grey.200",display:"flex",alignItems:"center",justifyContent:"center",color:n===T.id?"white":"grey.600",transition:"all 0.3s ease","&:hover":{bgcolor:n===T.id?"primary.dark":"grey.300",transform:"scale(1.1)"}},children:n===T.id?e(ow,{sx:{fontSize:20}}):e(Eh,{sx:{fontSize:20}})})]})]}),e(X0,{in:n===T.id,timeout:"auto",unmountOnExit:!0,children:e(Rr,{component:"div",disablePadding:!0,children:(T.lessons||[]).map((q,j)=>o(ir,{component:"div",selected:d===q.id,onClick:()=>l(T.id,q.id),sx:{pl:8,pr:2,py:1.5,cursor:"pointer",borderBottom:`1px solid ${z.palette.divider}`,bgcolor:d===q.id?"action.selected":"background.paper","&:hover":{bgcolor:"action.hover"},"&.Mui-selected":{bgcolor:"action.selected","&:hover":{bgcolor:"action.hover"}}},children:[e(fr,{sx:{minWidth:36},children:q.completed?e(yr,{color:"success",sx:{fontSize:20}}):e(c,{sx:{width:20,height:20,borderRadius:"50%",border:`2px solid ${z.palette.grey[400]}`}})}),e(Ut,{primary:o(f,{variant:"body2",sx:{fontWeight:d===q.id?"bold":"normal",color:d===q.id?"primary.main":"text.primary",display:"flex",alignItems:"center",gap:1},children:[q.title,q.type==="quiz"&&e(re,{variant:"outlined",size:"small",startIcon:e(ar,{}),sx:{ml:1,fontSize:"0.75rem",borderRadius:2,px:1.5,py:.5},onClick:ee=>{ee.stopPropagation(),p&&p(q.quizId||q.id),h&&h(!0),x&&x(!1)},children:" "})]}),secondary:o(c,{children:[o(f,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem",display:"flex",alignItems:"center",mt:.5,gap:1},children:[o(c,{sx:{display:"flex",alignItems:"center"},children:[m9(q.type),e("span",{style:{marginRight:"4px"},children:q.type==="video"?"":q.type==="quiz"?"":""})]}),e("span",{children:q.duration})]}),q.resources&&q.resources.length>0&&o(f,{variant:"caption",color:"primary.main",sx:{fontSize:"0.65rem",display:"flex",alignItems:"center",mt:.5},children:[e(Cc,{sx:{fontSize:12,ml:.5}}),q.resources.length," "]})]})}),e(xe,{size:"small",edge:"end",children:e(Pc,{sx:{fontSize:20}})})]},q.id))})})]},T.id)),m&&e(ir,{sx:{justifyContent:"center",py:2},children:e(re,{variant:"contained",color:"primary",size:"small",sx:{borderRadius:2,fontWeight:"bold",px:0,py:.5,fontSize:15,minWidth:0,width:"85%",height:38,boxShadow:"0 2px 8px 0 rgba(63,81,181,0.08)",mx:"auto",display:"block",mt:1,mb:1,letterSpacing:1},onClick:y,children:"  "})})]}),R==="assignments"&&e(Rr,{sx:{p:0},children:v&&v.length>0?v.map((T,O)=>o(ir,{sx:{borderBottom:`1px solid ${z.palette.divider}`,direction:"rtl",textAlign:"right","&:hover":{bgcolor:"action.hover"}},children:[e(fr,{children:e(c,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"warning.light",display:"flex",alignItems:"center",justifyContent:"center",color:"warning.dark"},children:e(Jr,{sx:{fontSize:20}})})}),e(Ut,{primary:e(f,{variant:"subtitle1",sx:{fontWeight:"bold",textAlign:"right",direction:"rtl"},children:T.title||T.name||` ${O+1}`}),secondary:o(c,{sx:{textAlign:"right",direction:"rtl"},children:[e(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl"},children:T.description||"   "}),o(c,{sx:{display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[o(f,{variant:"caption",color:"text.secondary",sx:{ml:1,textAlign:"right",direction:"rtl"},children:[": ",T.points||T.total_points||" "]}),T.due_date&&o(Rt,{children:[e(f,{variant:"caption",color:"text.secondary",sx:{mx:1},children:""}),o(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl"},children:[" : ",new Date(T.due_date).toLocaleDateString("ar-SA")]})]})]}),T.attachments&&T.attachments.length>0&&o(f,{variant:"caption",color:"primary.main",sx:{fontSize:"0.65rem",display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[e(Cc,{sx:{fontSize:12,ml:.5}}),T.attachments.length," "]})]})}),e(re,{variant:"outlined",size:"small",sx:{borderRadius:2,textTransform:"none",fontSize:"0.7rem",px:1.5,py:.5,minWidth:"auto"},onClick:()=>{_&&_(T.id)},children:" "})]},T.id||O)):e(ir,{children:e(Ut,{primary:e(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"     "})})})}),R==="quizzes"&&e(Rr,{sx:{p:0},children:S&&S.length>0?S.map((T,O)=>o(ir,{sx:{borderBottom:`1px solid ${z.palette.divider}`,direction:"rtl",textAlign:"right","&:hover":{bgcolor:"action.hover"}},children:[e(fr,{children:e(c,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"secondary.light",display:"flex",alignItems:"center",justifyContent:"center",color:"secondary.dark"},children:e(ar,{sx:{fontSize:20}})})}),e(Ut,{primary:e(f,{variant:"subtitle1",sx:{fontWeight:"bold",textAlign:"right",direction:"rtl"},children:T.title||T.name||` ${O+1}`}),secondary:o(c,{sx:{textAlign:"right",direction:"rtl"},children:[e(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl"},children:T.description||"   "}),o(c,{sx:{display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[o(f,{variant:"caption",color:"text.secondary",sx:{ml:1,textAlign:"right",direction:"rtl"},children:[": ",T.total_points||T.points||" "]}),T.time_limit&&o(Rt,{children:[e(f,{variant:"caption",color:"text.secondary",sx:{mx:1},children:""}),o(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl"},children:[": ",T.time_limit," "]})]})]}),T.attachments&&T.attachments.length>0&&o(f,{variant:"caption",color:"primary.main",sx:{fontSize:"0.65rem",display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[e(Cc,{sx:{fontSize:12,ml:.5}}),T.attachments.length," "]})]})}),e(re,{variant:"outlined",size:"small",startIcon:e(ar,{sx:{fontSize:"0.8rem"}}),sx:{borderRadius:2,textTransform:"none",fontSize:"0.7rem",px:1.5,py:.5,minWidth:"auto"},onClick:()=>{p&&p(T.id),h&&h(!0),x&&x(!1)},children:" "})]},T.id||O)):e(ir,{children:e(Ut,{primary:e(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"     "})})})}),R==="exams"&&e(Rr,{sx:{p:0},children:C&&C.length>0?C.map((T,O)=>o(ir,{sx:{borderBottom:`1px solid ${z.palette.divider}`,direction:"rtl",textAlign:"right","&:hover":{bgcolor:"action.hover"}},children:[e(fr,{children:e(c,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"error.light",display:"flex",alignItems:"center",justifyContent:"center",color:"error.dark"},children:e(Qo,{sx:{fontSize:20}})})}),e(Ut,{primary:e(f,{variant:"subtitle1",sx:{fontWeight:"bold",textAlign:"right",direction:"rtl"},children:T.title||T.name||` ${O+1}`}),secondary:o(c,{sx:{textAlign:"right",direction:"rtl"},children:[e(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl"},children:T.description||"   "}),o(c,{sx:{display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[o(f,{variant:"caption",color:"text.secondary",sx:{ml:1,textAlign:"right",direction:"rtl"},children:[": ",T.total_points||T.points||" "]}),T.time_limit&&o(Rt,{children:[e(f,{variant:"caption",color:"text.secondary",sx:{mx:1},children:""}),o(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",direction:"rtl"},children:[": ",T.time_limit," "]})]})]}),T.attachments&&T.attachments.length>0&&o(f,{variant:"caption",color:"primary.main",sx:{fontSize:"0.65rem",display:"flex",alignItems:"center",mt:.5,justifyContent:"flex-end"},children:[e(Cc,{sx:{fontSize:12,ml:.5}}),T.attachments.length," "]})]})}),e(re,{variant:"outlined",size:"small",startIcon:e(Qo,{sx:{fontSize:"0.8rem"}}),sx:{borderRadius:2,textTransform:"none",fontSize:"0.7rem",px:1.5,py:.5,minWidth:"auto"},onClick:()=>handleExamStart(T.id),children:" "})]},T.id||O)):e(ir,{children:e(Ut,{primary:e(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:2},children:"     "})})})})]})},v9=()=>{const{id:t}=cr(),n=ct();ad();const a=jt(),l=Fn(a.breakpoints.down("md")),[d,p]=w.useState(null),[h,x]=w.useState(null),[m,y]=w.useState(!0),[v,S]=w.useState(null),[C,_]=w.useState({}),[z,R]=w.useState(null),[B,T]=w.useState(!1),[O,q]=w.useState(!1),[j,ee]=w.useState(!0),[V,L]=w.useState("content"),[k,G]=w.useState(0),[W,M]=w.useState(0),U=w.useRef(null),[H,N]=w.useState(!1),[Y,E]=w.useState(null),[I,A]=w.useState(null),[Q,J]=w.useState(!1),[P,ie]=w.useState("start"),[ue,fe]=w.useState(!1),[de,K]=w.useState(!1),[se,ve]=w.useState(null),[ge,ke]=w.useState(null),[it,kt]=w.useState(!1),[Cr,Ne]=w.useState(!1),[Ft,kr]=w.useState(""),[Le,tr]=w.useState("info"),[_r,jn]=w.useState(null),[hn,zi]=w.useState(!1),[qr,ii]=w.useState({open:!1,url:"",title:""});w.useEffect(()=>{t&&(xn(),ai())},[t]);const ai=()=>$(null,null,function*(){try{const Ae=yield ro.checkCourseCompletion(t);console.log("Course completion status from API:",Ae),console.log("API says - Total modules:",Ae.total_modules,"Completed modules:",Ae.completed_modules),console.log("API says - is_completed:",Ae.is_completed,"has_certificate:",Ae.has_certificate),jn(Ae)}catch(Ae){console.error("Error checking course completion:",Ae)}}),xn=()=>$(null,null,function*(){var Ae,Oe,Ze,st,ot,je,Nt,Qr,Mt,Ri,bn,yn,vn,wn;try{if(y(!0),S(null),!t){S("   "),y(!1);return}const et=yield An.getCourseTrackingData(t);if(console.log("Full API Response:",et),console.log("Course modules:",(Ae=et==null?void 0:et.course)==null?void 0:Ae.modules),!et||!et.course){S("   "),y(!1);return}const Gr={id:et.course.id,title:et.course.title,instructor:et.course.instructor,instructorAvatar:et.course.instructor_avatar,category:et.course.category,level:et.course.level,duration:et.course.duration,progress:et.course.overall_progress,rating:et.course.rating,totalStudents:et.course.total_students,lastAccessed:{moduleId:((Oe=et.course.modules[0])==null?void 0:Oe.id)||"m1",lessonId:((st=(Ze=et.course.modules[0])==null?void 0:Ze.lessons[0])==null?void 0:st.id)||"l1",title:((je=(ot=et.course.modules[0])==null?void 0:ot.lessons[0])==null?void 0:je.title)||" ",duration:((Qr=(Nt=et.course.modules[0])==null?void 0:Nt.lessons[0])==null?void 0:Qr.duration_minutes)||15,completion:et.course.completed_lessons},enrolledDate:(Mt=et.enrollment)==null?void 0:Mt.enrollment_date,hasFinalExam:et.course.has_final_exam,modules:(et.course.modules||[]).map(rn=>({id:rn.id,title:rn.name,progress:rn.progress,totalLessons:rn.total_lessons,completedLessons:rn.completed_lessons,lessons:(rn.lessons||[]).map(Xt=>{console.log("Lesson data:",Xt),console.log("Lesson video_url:",Xt.video_url),console.log("Lesson video_file:",Xt.video_file),console.log("Lesson file_url:",Xt.file_url),console.log("Lesson resources:",Xt.resources);let En=Xt.video_url;if(!En&&Xt.resources){const Ra=Xt.resources.find(li=>li.resource_type==="video"||li.file_url&&(li.file_url.includes(".mp4")||li.file_url.includes(".webm")||li.file_url.includes(".mov")||li.file_url.includes(".avi")));Ra&&(En=Ra.file_url||Ra.url)}return console.log("Final videoUrl for lesson:",Xt.id,":",En),{id:Xt.id,title:Xt.title,duration:`${Math.floor(Xt.duration_minutes/60)}:${(Xt.duration_minutes%60).toString().padStart(2,"0")}`,type:Xt.lesson_type,completed:Xt.completed,videoUrl:En,content:Xt.content,resources:Xt.resources||[]}})})),assignments:et.assignments||[],exams:et.exams||[],quizzes:et.quizzes||[],final_exam:et.final_exam||null};if(console.log("Transformed course data:",Gr),console.log("First module lessons:",(bn=(Ri=Gr.modules)==null?void 0:Ri[0])==null?void 0:bn.lessons),x(Gr),Gr.modules&&Gr.modules.length>0&&p(Gr.modules[0].id),Gr.modules&&Gr.modules.length>0&&Gr.modules[0].lessons&&Gr.modules[0].lessons.length>0){const rn=Gr.modules[0].lessons[0];console.log("Setting current lesson:",rn),console.log("Current lesson videoUrl:",rn.videoUrl),R(X({moduleId:Gr.modules[0].id,lessonId:rn.id},rn))}}catch(et){console.error("Error fetching course data:",et),((yn=et.response)==null?void 0:yn.status)===404?S("      ."):((vn=et.response)==null?void 0:vn.status)===403?S("     ."):((wn=et.response)==null?void 0:wn.status)===401?S("    ."):S("     .    .")}finally{y(!1)}}),Gt=h?{totalLessons:(h.modules||[]).reduce((Ae,Oe)=>{var Ze;return Ae+(((Ze=Oe.lessons)==null?void 0:Ze.length)||0)},0),completedLessons:(h.modules||[]).reduce((Ae,Oe)=>Ae+(Oe.completedLessons||0),0),completionPercentage:h.progress||0,totalDuration:h.duration||0,totalAssignments:(h.assignments||[]).length,totalExams:(h.exams||[]).length,totalQuizzes:(h.quizzes||[]).length,remainingLessons:(h.modules||[]).reduce((Ae,Oe)=>{var Ze;return Ae+(((Ze=Oe.lessons)==null?void 0:Ze.length)||0)},0)-(h.modules||[]).reduce((Ae,Oe)=>Ae+(Oe.completedLessons||0),0)}:{totalLessons:0,completedLessons:0,completionPercentage:0,totalDuration:0,totalAssignments:0,totalExams:0,totalQuizzes:0,remainingLessons:0};h&&(()=>{for(const Ae of h.modules||[]){const Oe=(Ae.lessons||[]).find(Ze=>!Ze.completed);if(Oe)return{module:Ae,lesson:Oe}}return null})();const Yr=Ae=>{p(d===Ae?null:Ae)},Re=(Ae,Oe)=>{const Ze=(h.modules||[]).find(st=>st.id===Ae);if(Ze){const st=(Ze.lessons||[]).find(ot=>ot.id===Oe);st&&(R(X({moduleId:Ae,lessonId:Oe},st)),T(!0),l&&q(!1))}},Nn=Ae=>{M(Ae)},oi=()=>{T(!1),G(0)},Ei=()=>$(null,null,function*(){if(!(!z||!t))try{yield An.markLessonCompleted(t,z.id),x(Ae=>{const Oe=Ae.modules.map(Ze=>{if(Ze.id===z.moduleId){const st=Ze.lessons.map(ot=>ot.id===z.id?oe(X({},ot),{completed:!0}):ot);return oe(X({},Ze),{lessons:st,completedLessons:st.filter(ot=>ot.completed).length})}return Ze});return oe(X({},Ae),{modules:Oe})}),Ue("   !","success"),yield ai(),setTimeout(()=>{ae()},2e3)}catch(Ae){console.error("Error marking lesson as completed:",Ae),Ue("    ","error")}}),ae=()=>{if(!z||!h)return;const Ae=h.modules.findIndex(Oe=>Oe.id===z.moduleId);if(Ae>=0){const Oe=h.modules[Ae],Ze=Oe.lessons.findIndex(st=>st.id===z.id);if(Ze<Oe.lessons.length-1){const st=Oe.lessons[Ze+1];Re(Oe.id,st.id)}else if(Ae<h.modules.length-1){const st=h.modules[Ae+1];if(st.lessons.length>0){const ot=st.lessons[0];Re(st.id,ot.id)}}}},Fe=()=>{if(!z||!h)return;const Ae=h.modules.findIndex(Oe=>Oe.id===z.moduleId);if(Ae>=0){const Oe=h.modules[Ae],Ze=Oe.lessons.findIndex(st=>st.id===z.id);if(Ze>0){const st=Oe.lessons[Ze-1];Re(Oe.id,st.id)}else if(Ae>0){const st=h.modules[Ae-1];if(st.lessons.length>0){const ot=st.lessons[st.lessons.length-1];Re(st.id,ot.id)}}}},Ie=Ae=>Ae?Ae.startsWith("http://")||Ae.startsWith("https://")?Ae:Ae.startsWith("/media/")||Ae.startsWith("/static/")?`${Zi.baseURL}${Ae}`:Ae.startsWith("/")?Ae:`${Zi.baseURL}/media/${Ae}`:null,Ke=Ae=>$(null,null,function*(){try{const Oe=Ae.file_url||Ae.url;if(!Oe){Ue("   ","error");return}const Ze=Ie(Oe),st=Ae.title||Ae.name||"",ot=document.createElement("a");ot.href=Ze,ot.download=st,ot.target="_blank",document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),Ue("   ","success")}catch(Oe){console.error("Error downloading resource:",Oe),Ue("    ","error")}}),tt=Ae=>{try{const Oe=Ae.file_url||Ae.url;if(!Oe){Ue("   ","error");return}const Ze=Ie(Oe),st=Ae.title||Ae.name||"",ot=st.split(".").pop().toLowerCase();if(["jpg","jpeg","png","gif","bmp","webp","svg"].includes(ot)){ii({open:!0,url:Ze,title:st});return}if(ot==="pdf"){window.open(Ze,"_blank"),Ue("   PDF   ","info");return}if(["mp4","avi","mov","wmv","flv","webm","mkv"].includes(ot)){window.open(Ze,"_blank"),Ue("     ","info");return}window.open(Ze,"_blank"),Ue("     ","info")}catch(Oe){console.error("Error previewing resource:",Oe),Ue("    ","error")}},$e=Ae=>$(null,null,function*(){if(!(!z||!t))try{yield An.trackLessonProgress(t,z.id,{content_type:"video",progress_percentage:Ae.played*100,current_time:Ae.playedSeconds,duration:W})}catch(Oe){console.error("Error tracking video progress:",Oe)}}),He=Ae=>{G(Ae.playedSeconds),(Ae.playedSeconds%10<1||Ae.played>=.95)&&$e(Ae)},at=()=>{q(!O)},Et=Ae=>{n(`/student/assignments/${Ae}/submit`)},dr=(Ae,Oe)=>{Oe!=="clickaway"&&Ne(!1)},Ue=(Ae,Oe="info")=>{kr(Ae),tr(Oe),Ne(!0)},Pe=()=>$(null,null,function*(){var Ae,Oe,Ze;try{zi(!0),console.log("Attempting to generate certificate for course:",t),console.log("Current course completion status:",_r),console.log("Current course stats:",Gt),(yield ro.generateCertificate(t)).certificate&&(Ue("   !","success"),yield ai(),setTimeout(()=>{n("/student/certificates")},2e3))}catch(st){console.error("Error generating certificate:",st);const ot=((Oe=(Ae=st.response)==null?void 0:Ae.data)==null?void 0:Oe.error)||"    ";console.log("Error details:",(Ze=st.response)==null?void 0:Ze.data),Ue(ot,"error")}finally{zi(!1)}}),qe=Ae=>{ke(Ae),kt(!0),ie("result")},xt=()=>{K(!1),ve(null),ke(null),kt(!1),ie("start")},Ve=({instructor:Ae,avatar:Oe})=>e(De,{elevation:0,sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",mb:2},children:o(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e(Tt,{src:Oe,alt:Ae,sx:{width:56,height:56,mr:2,border:"2px solid",borderColor:"primary.main"}}),o(c,{children:[e(f,{variant:"subtitle2",color:"text.secondary",children:""}),e(f,{variant:"h6",sx:{fontWeight:"bold"},children:Ae})]})]})}),si=({stats:Ae})=>Ae?o(De,{elevation:0,sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",mb:2},children:[e(f,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:" "}),o(c,{sx:{mb:2},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e(f,{variant:"body2",color:"text.secondary",children:""}),o(f,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:[Ae.completionPercentage||0,"%"]})]}),e(Sr,{variant:"determinate",value:Ae.completionPercentage||0,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #4facfe 0%, #00f2fe 100%)"}}})]}),o(le,{container:!0,spacing:1,sx:{mb:1},children:[e(le,{item:!0,xs:6,children:o(c,{sx:{display:"flex",alignItems:"center"},children:[e(c,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"success.light",display:"flex",alignItems:"center",justifyContent:"center",color:"success.dark",mr:1},children:e(yr,{sx:{fontSize:20}})}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:""}),o(f,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[Ae.completedLessons||0," "]})]})]})}),e(le,{item:!0,xs:6,children:o(c,{sx:{display:"flex",alignItems:"center"},children:[e(c,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"warning.light",display:"flex",alignItems:"center",justifyContent:"center",color:"warning.dark",mr:1},children:e(C6,{sx:{fontSize:20}})}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:""}),o(f,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[Ae.remainingLessons||0," "]})]})]})})]}),(()=>{const Oe=(_r==null?void 0:_r.is_completed)||Gt.completionPercentage===100;return console.log("Should show certificate button:",Oe),console.log("courseCompletionStatus?.is_completed:",_r==null?void 0:_r.is_completed),console.log("courseStats.completionPercentage:",Gt.completionPercentage),Oe})()?_r!=null&&_r.has_certificate?e(re,{variant:"contained",fullWidth:!0,size:"large",startIcon:e(Qo,{}),onClick:()=>n(`/student/certificates?courseId=${t}&autoOpen=true`),sx:{mt:2,borderRadius:2,textTransform:"none",fontWeight:"bold",py:1.5,background:"linear-gradient(45deg, #4caf50 0%, #8bc34a 100%)",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)","&:hover":{boxShadow:"0 6px 20px rgba(76, 175, 80, 0.4)"}},children:" "}):e(re,{variant:"contained",fullWidth:!0,size:"large",startIcon:hn?e(Qe,{size:20,color:"inherit"}):e(Qo,{}),onClick:Pe,disabled:hn,sx:{mt:2,borderRadius:2,textTransform:"none",fontWeight:"bold",py:1.5,background:"linear-gradient(45deg, #4facfe 0%, #00f2fe 100%)",boxShadow:"0 4px 15px rgba(0, 242, 254, 0.3)","&:hover":{boxShadow:"0 6px 20px rgba(0, 242, 254, 0.4)"}},children:hn?"  ...":"  "}):e(re,{variant:"outlined",fullWidth:!0,size:"large",startIcon:e(Qo,{}),disabled:!0,sx:{mt:2,borderRadius:2,textTransform:"none",fontWeight:"bold",py:1.5,opacity:.6},children:"    "})]}):o(De,{elevation:0,sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",mb:2},children:[e(f,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:" "}),e(f,{variant:"body2",color:"text.secondary",children:"  ..."})]}),Hi=Ae=>{_(Oe=>oe(X({},Oe),{[Ae]:!Oe[Ae]}))};return m?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:e(Qe,{size:60,sx:{color:"#7c4dff"}})}):v?o(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default",flexDirection:"column",gap:2},children:[e(Be,{severity:"error",sx:{mb:2},children:v}),e(re,{variant:"contained",onClick:xn,sx:{bgcolor:"#7c4dff"},children:" "})]}):t?h?o(c,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:[e(On,{}),e(Zc,{position:"sticky",color:"default",elevation:0,sx:{bgcolor:"background.paper",borderBottom:`1px solid ${a.palette.divider}`,display:{xs:"flex",md:"none"}},children:o(Jc,{children:[e(xe,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:at,sx:{mr:1},children:e(q5,{})}),e(f,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,fontWeight:"bold"},children:(z==null?void 0:z.title)||h.title})]})}),e(Xe,{maxWidth:!1,sx:{flex:1,py:{xs:2,md:4},px:{xs:1,sm:2,md:4},maxWidth:"100%",width:"100%",margin:0},children:o(c,{sx:{mb:3,display:{xs:"none",md:"block"}},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:[e(c,{sx:{display:"flex",alignItems:"center"},children:o(f,{variant:"body2",color:"text.secondary",children:[" /  / ",h.title," / ",(z==null?void 0:z.title)||" "]})}),e(re,{startIcon:e(qt,{}),onClick:()=>n(-1),sx:{borderRadius:2,px:3,py:1,bgcolor:"background.paper",boxShadow:1,"&:hover":{bgcolor:"action.hover"}},children:""})]}),o(c,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e(c,{sx:{position:"fixed",bottom:24,right:24,zIndex:1200,display:{xs:"block",md:"none"},"& .MuiFab-root":{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}}},children:e(Je,{title:O?" ":" ",children:e(iw,{color:"primary","aria-label":" ",onClick:at,children:O?e(pn,{}):e(ts,{})})})}),e(c,{sx:{width:{xs:"100%",md:j?"350px":"0"},flexShrink:0,overflow:"hidden",transition:"all 0.3s ease-in-out",position:{xs:"fixed",md:"relative"},top:{xs:64,md:0},bottom:0,right:0,zIndex:1100,height:{xs:O?"calc(100vh - 64px + 200px)":0,md:"calc(100vh + 300px)"},bgcolor:"background.paper",boxShadow:{xs:3,md:1},borderRadius:{xs:0,md:2},transform:{xs:O?"translateX(0)":"translateX(100%)",md:"none"},"&:hover":{boxShadow:{md:3}}},children:o(c,{sx:{p:{xs:2,md:2},height:"auto",minHeight:"calc(100%)",display:"flex",flexDirection:"column",overflow:"visible"},children:[e(xe,{onClick:at,sx:{display:{xs:"flex",md:"none"},position:"absolute",left:8,top:8,zIndex:1},children:e(pn,{})}),e(c,{sx:{flex:1,overflowY:"auto",pr:1,maxHeight:"none",minHeight:"calc(100% - 200px)","&::-webkit-scrollbar":{width:"4px",display:"none"},"&:hover":{"&::-webkit-scrollbar":{display:"block"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px"}},WebkitOverflowScrolling:"touch"},children:e(y9,{modules:h.modules,expandedModule:d,onModuleClick:Yr,onLessonClick:Re,currentLessonId:z==null?void 0:z.id,setActiveQuizId:E,setOpenQuiz:N,setShowQuizResult:J,showFinalExamButton:h.hasFinalExam,onFinalExamClick:()=>fe(!0),assignments:h.assignments,quizzes:h.quizzes,exams:h.exams,onAssignmentClick:Et})}),o(c,{sx:{mt:"auto",pt:2,pb:2,position:"sticky",bottom:0,borderTop:"1px solid",borderColor:"divider",bgcolor:"background.paper",zIndex:1},children:[e(Ve,{instructor:h.instructor,avatar:h.instructorAvatar}),e(c,{sx:{mt:2},children:e(si,{stats:Gt})})]})]})}),o(c,{sx:{flex:1,minWidth:0},children:[o(nt,{elevation:0,sx:{mb:3,borderRadius:2,overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid",borderColor:"divider"},children:[e(c,{sx:{position:"relative",pt:"56.25%",bgcolor:"black"},children:z?o(Rt,{children:[!1,e(p9,{ref:U,url:z==null?void 0:z.videoUrl,width:"100%",height:"100%",playing:B,onPlay:()=>T(!0),onPause:()=>T(!1),onProgress:He,onDuration:Nn,onEnded:oi,lessonData:z,style:{position:"absolute",top:0,left:0,borderRadius:a.shape.borderRadius*2,overflow:"hidden"}})]}):e(c,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:"white",bgcolor:"background.paper"},children:e(f,{children:"   "})})}),o(pt,{children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[o(c,{sx:{flex:1,mr:2},children:[e(f,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:(z==null?void 0:z.title)||"   "}),e(f,{variant:"body2",color:"text.secondary",children:(z==null?void 0:z.content)||"       "})]}),o(c,{sx:{display:"flex",gap:1},children:[e(Je,{title:"  ",children:e(xe,{onClick:()=>z&&Hi(z.id),color:C[z==null?void 0:z.id]?"primary":"default",children:C[z==null?void 0:z.id]?e(zh,{}):e(jc,{})})}),e(Je,{title:"",children:e(xe,{children:e(rd,{})})}),e(Je,{title:"",children:e(xe,{children:e(K0,{})})})]})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:3},children:[e(xe,{variant:"outlined",disabled:!z,onClick:Fe,sx:{width:48,height:48,border:"2px solid",borderColor:"primary.main",color:"primary.main","&:hover":{bgcolor:"primary.main",color:"white",transform:"scale(1.1)"},"&:disabled":{borderColor:"grey.300",color:"grey.300"},transition:"all 0.3s ease"},children:e(Li,{})}),e(re,{variant:"contained",endIcon:e(yr,{}),disabled:!z,onClick:Ei,sx:{background:"linear-gradient(45deg, #4facfe 0%, #00f2fe 100%)",boxShadow:"0 4px 15px rgba(0, 242, 254, 0.3)","&:hover":{boxShadow:"0 6px 20px rgba(0, 242, 254, 0.4)"}},children:" "}),e(xe,{variant:"outlined",disabled:!z,onClick:ae,sx:{width:48,height:48,border:"2px solid",borderColor:"primary.main",color:"primary.main","&:hover":{bgcolor:"primary.main",color:"white",transform:"scale(1.1)"},"&:disabled":{borderColor:"grey.300",color:"grey.300"},transition:"all 0.3s ease"},children:e(qt,{})})]})]})]}),e(nt,{elevation:0,sx:{mb:3,borderRadius:2,overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid",borderColor:"divider"},children:o(pt,{children:[e(f,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"  "}),e(f,{variant:"body1",paragraph:!0,children:(z==null?void 0:z.content)||"     .    ."}),(z==null?void 0:z.resources)&&z.resources.length>0&&o(c,{sx:{mt:3},children:[o(f,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2,display:"flex",alignItems:"center"},children:[e(Cc,{sx:{ml:1,color:"primary.main"}}),"  (",z.resources.length,")"]}),e(c,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:(z.resources||[]).map((Ae,Oe)=>{const Ze=Ae.title||Ae.name||` ${Oe+1}`,st=Ae.resource_type,ot=x9(Ze,st),je=b9(Ze,st);return o(De,{elevation:0,sx:{p:2,borderRadius:2,display:"flex",alignItems:"center",border:"1px solid",borderColor:"divider",width:{xs:"100%",sm:"calc(50% - 16px)",md:"calc(33.333% - 16px)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer","&:hover":{boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",transform:"translateY(-4px)",borderColor:je}},onClick:()=>tt(Ae),children:[e(c,{sx:{width:56,height:56,borderRadius:2,bgcolor:`${je}15`,display:"flex",alignItems:"center",justifyContent:"center",mr:2,flexShrink:0,border:`2px solid ${je}30`,transition:"all 0.3s ease","&:hover":{bgcolor:`${je}25`,borderColor:je,transform:"scale(1.1)"}},children:ot}),o(c,{sx:{flex:1,minWidth:0},children:[e(f,{variant:"subtitle2",sx:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"text.primary",mb:.5},children:Ze}),e(f,{variant:"caption",color:"text.secondary",sx:{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textTransform:"capitalize"},children:st||""}),Ae.description&&e(f,{variant:"caption",color:"text.secondary",sx:{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",mt:.5,fontSize:"0.7rem"},children:Ae.description})]}),o(c,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e(Je,{title:" ",children:e(xe,{size:"small",sx:{color:je,"&:hover":{bgcolor:`${je}20`,transform:"scale(1.1)"}},onClick:Nt=>{Nt.stopPropagation(),tt(Ae)},children:e(Lr,{sx:{fontSize:18}})})}),e(Je,{title:" ",children:e(xe,{size:"small",sx:{color:je,"&:hover":{bgcolor:`${je}20`,transform:"scale(1.1)"}},onClick:Nt=>{Nt.stopPropagation(),Ke(Ae)},children:e(Kn,{sx:{fontSize:18}})})})]})]},Oe)})})]})]})})]})]})]})}),e(Bn,{}),e(Au,{open:H,onClose:()=>{N(!1),J(!1),A(null)},closeAfterTransition:!0,BackdropComponent:_u,BackdropProps:{timeout:500},children:e(ki,{in:H,children:o(c,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"98vw",sm:600},maxWidth:"98vw",bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:{xs:1,sm:4},outline:"none",maxHeight:"90vh",overflowY:"auto"},children:[e(xe,{onClick:()=>{N(!1),J(!1),A(null)},sx:{position:"absolute",top:8,left:8,zIndex:10},children:e(pn,{})}),Q?e(h9,{quizId:Y,attemptId:I,onClose:()=>{N(!1),J(!1),A(null)}}):e(u9,{quizId:Y,onFinish:Ae=>{console.log("Quiz finished with attempt ID:",Ae),A(Ae),J(!0)},onClose:()=>{N(!1),J(!1),A(null)}})]})})}),e(Au,{open:ue,onClose:()=>fe(!1),closeAfterTransition:!0,BackdropComponent:_u,BackdropProps:{timeout:500},children:e(ki,{in:ue,children:o(c,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"98vw",sm:700},maxWidth:"98vw",bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:{xs:1,sm:4},outline:"none",maxHeight:"90vh",overflowY:"auto"},children:[e(xe,{onClick:()=>fe(!1),sx:{position:"absolute",top:8,left:8,zIndex:10},children:e(pn,{})}),e(f9,{onClose:()=>fe(!1),finalExamData:h==null?void 0:h.final_exam,courseId:t})]})})}),e(Au,{open:de,onClose:xt,closeAfterTransition:!0,BackdropComponent:_u,BackdropProps:{timeout:500},children:e(ki,{in:de,children:o(c,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"98vw",sm:800},maxWidth:"98vw",bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:{xs:1,sm:4},outline:"none",maxHeight:"90vh",overflowY:"auto"},children:[e(xe,{onClick:xt,sx:{position:"absolute",top:8,left:8,zIndex:10},children:e(pn,{})}),P==="start"&&e(PC,{examId:se,onStart:Ae=>{ke(Ae),ie("taking")},onClose:xt}),P==="taking"&&e(jC,{examId:se,attemptId:ge,onFinish:qe,onClose:xt}),P==="result"&&e(Km,{examId:se,attemptId:ge,onClose:xt})]})})}),e(Au,{open:qr.open,onClose:()=>ii({open:!1,url:"",title:""}),closeAfterTransition:!0,BackdropComponent:_u,BackdropProps:{timeout:500},children:e(ki,{in:qr.open,children:o(c,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95vw",sm:"80vw",md:"70vw"},height:{xs:"80vh",sm:"70vh",md:"60vh"},maxWidth:"1200px",maxHeight:"800px",bgcolor:"background.paper",borderRadius:2,boxShadow:24,outline:"none",display:"flex",flexDirection:"column"},children:[o(c,{sx:{p:2,borderBottom:"1px solid",borderColor:"divider",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(f,{variant:"h6",sx:{fontWeight:"bold",flex:1,textAlign:"center"},children:qr.title}),e(xe,{onClick:()=>ii({open:!1,url:"",title:""}),sx:{ml:2},children:e(pn,{})})]}),e(c,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",p:2,overflow:"hidden"},children:e("img",{src:Ie(qr.url),alt:qr.title,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)"},onError:Ae=>{console.error("Error loading image:",Ae),Ue("    ","error")}})}),o(c,{sx:{p:2,borderTop:"1px solid",borderColor:"divider",display:"flex",justifyContent:"center",gap:2},children:[e(re,{variant:"outlined",startIcon:e(Kn,{}),onClick:()=>{const Ae=Ie(qr.url),Oe=document.createElement("a");Oe.href=Ae,Oe.download=qr.title,Oe.target="_blank",document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),Ue("   ","success")},children:" "}),e(re,{variant:"outlined",startIcon:e(Xu,{}),onClick:()=>{const Ae=Ie(qr.url);window.open(Ae,"_blank"),Ue("     ","info")},children:"   "})]})]})})}),e(un,{open:Cr,autoHideDuration:6e3,onClose:dr,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e(Be,{onClose:dr,severity:Le,sx:{width:"100%"},children:Ft})})]}):e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:e(f,{children:"   "})}):o(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default",flexDirection:"column",gap:2},children:[e(Be,{severity:"error",sx:{mb:2},children:"   "}),e(re,{variant:"contained",onClick:()=>n("/student/my-courses"),sx:{bgcolor:"#7c4dff"},children:"  "})]})},w9={lessThanXSeconds:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xSeconds:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},halfAMinute:" ",lessThanXMinutes:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},xMinutes:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXHours:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xHours:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},xDays:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXWeeks:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xWeeks:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXMonths:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xMonths:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},aboutXYears:{one:"  ",two:" ",threeToTen:"{{count}}  ",other:"{{count}}  "},xYears:{one:" ",two:"",threeToTen:"{{count}} ",other:"{{count}} "},overXYears:{one:"  ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "},almostXYears:{one:"   ",two:"  ",threeToTen:"  {{count}} ",other:"  {{count}} "}},S9=(t,n,a)=>{const l=w9[t];let d;return typeof l=="string"?d=l:n===1?d=l.one:n===2?d=l.two:n<=10?d=l.threeToTen.replace("{{count}}",String(n)):d=l.other.replace("{{count}}",String(n)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?" "+d:" "+d:d},C9={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},k9={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},_9={full:"{{date}} ' ' {{time}}",long:"{{date}} ' ' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},A9={date:Kp({formats:C9,defaultWidth:"full"}),time:Kp({formats:k9,defaultWidth:"full"}),dateTime:Kp({formats:_9,defaultWidth:"full"})},z9={lastWeek:"eeee '  ' p",yesterday:"'  ' p",today:"'  ' p",tomorrow:"'  ' p",nextWeek:"eeee '  ' p",other:"P"},E9=t=>z9[t],R9={narrow:["",""],abbreviated:["..",".."],wide:[" "," "]},T9={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:[" "," "," "," "]},M9={narrow:["","","","","","","","","","","",""],abbreviated:["","","","","","","","","","","",""],wide:["","","","","","","","","","","",""]},I9={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},D9={narrow:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},abbreviated:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "},wide:{am:"",pm:"",morning:"",noon:"",afternoon:" ",evening:"",night:"",midnight:" "}},W9={narrow:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},abbreviated:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "},wide:{am:"",pm:"",morning:" ",noon:"",afternoon:" ",evening:" ",night:" ",midnight:" "}},$9=t=>String(t),L9={ordinalNumber:$9,era:hc({values:R9,defaultWidth:"wide"}),quarter:hc({values:T9,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hc({values:M9,defaultWidth:"wide"}),day:hc({values:I9,defaultWidth:"wide"}),dayPeriod:hc({values:D9,defaultWidth:"wide",formattingValues:W9,defaultFormattingWidth:"wide"})},O9=/^(\d+)(th|st|nd|rd)?/i,B9=/\d+/i,F9={narrow:/[]/,abbreviated:/[]\.\./,wide:/(|) /},P9={any:[//,//]},j9={narrow:/^[1234]/i,abbreviated:/[1234]/,wide:/ (|||)/},N9={any:[/1/i,/2/i,/3/i,/4/i]},H9={narrow:/^[]/,abbreviated:/^(|||||||||||)/,wide:/^(|||||||||||)/},U9={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},V9={narrow:/^[]/i,short:/^(||||||)/i,abbreviated:/^(||||||)/i,wide:/^(||||||)/i},q9={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i]},Y9={narrow:/^(|| || | | | )/,any:/^(|| || | | | )/},Q9={any:{am:/^/,pm:/^/,midnight:/ /,noon://,afternoon:/ /,morning:/ /,evening:/ /,night:/ /}},G9={ordinalNumber:n_({matchPattern:O9,parsePattern:B9,valueCallback:t=>parseInt(t,10)}),era:fc({matchPatterns:F9,defaultMatchWidth:"wide",parsePatterns:P9,defaultParseWidth:"any"}),quarter:fc({matchPatterns:j9,defaultMatchWidth:"wide",parsePatterns:N9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fc({matchPatterns:H9,defaultMatchWidth:"wide",parsePatterns:U9,defaultParseWidth:"any"}),day:fc({matchPatterns:V9,defaultMatchWidth:"wide",parsePatterns:q9,defaultParseWidth:"any"}),dayPeriod:fc({matchPatterns:Y9,defaultMatchWidth:"any",parsePatterns:Q9,defaultParseWidth:"any"})},NC={code:"ar",formatDistance:S9,formatLong:A9,formatRelative:E9,localize:L9,match:G9,options:{weekStartsOn:6,firstWeekContainsDate:1}},X9=()=>{var A,Q,J,P,ie,ue,fe,de,K,se,ve;const[t,n]=w.useState([]),[a,l]=w.useState(!0),[d,p]=w.useState(null),[h,x]=w.useState(null),[m,y]=w.useState(!1);w.useEffect(()=>{const ge=`
      @media print {
        * {
          -webkit-print-color-adjust: exact !important;
          color-adjust: exact !important;
          print-color-adjust: exact !important;
        }
        body * {
          visibility: hidden;
        }
        .certificate-print, .certificate-print * {
          visibility: visible;
        }
        .certificate-print {
          position: absolute;
          left: 0;
          top: 0;
          width: 100% !important;
          height: 100% !important;
          margin: 0 !important;
          padding: 0 !important;
          background: white !important;
          -webkit-print-color-adjust: exact !important;
          color-adjust: exact !important;
          print-color-adjust: exact !important;
        }
        .no-print {
          display: none !important;
        }
        @page {
          margin: 0;
          size: A4 landscape;
        }
      }
    `,ke=document.createElement("style");return ke.type="text/css",ke.innerText=ge,document.head.appendChild(ke),()=>{document.head.removeChild(ke)}},[]),w.useEffect(()=>{console.log("Dialog state changed:",m)},[m]),w.useEffect(()=>{console.log("Selected certificate changed:",h)},[h]);const[v,S]=w.useState("all"),[C,_]=w.useState(""),[z,R]=w.useState(0),[B,T]=w.useState(10),O=jt(),q=Fn(O.breakpoints.down("md")),j=ad(),[ee]=P6();w.useEffect(()=>{console.log("URL params:",{courseId:ee.get("courseId"),autoOpen:ee.get("autoOpen"),fullURL:j.pathname+j.search})},[ee,j]),w.useEffect(()=>{V()},[]),w.useEffect(()=>{const ge=ee.get("courseId"),ke=ee.get("autoOpen");if(console.log("URL params check:",{courseId:ge,autoOpen:ke,certificatesLength:t.length,loading:a}),ge&&ke==="true"&&t.length>0&&!a){const it=t.find(kt=>{var Cr;return kt.course_id===parseInt(ge)||((Cr=kt.course)==null?void 0:Cr.id)===parseInt(ge)});it?(console.log("Auto-opening certificate for course:",ge),console.log("Found certificate:",it),x(it),y(!0),console.log("Dialog should be open now")):(console.log("No certificate found for course:",ge),console.log("Available certificates:",t.map(kt=>({id:kt.id,course_id:kt.course_id,course:kt.course}))))}},[t,ee,a]);const V=()=>$(null,null,function*(){var ge;try{l(!0),p(null);const ke=yield ro.getMyCertificates();console.log("Fetched certificates data:",ke),ke&&ke.length>0&&(console.log("First certificate template:",ke[0].template),(ge=ke[0].template)!=null&&ge.template_file&&console.log("First certificate template file:",ke[0].template.template_file),ke.forEach((it,kt)=>{console.log(`Certificate ${kt}:`,{id:it.id,course_id:it.course_id,course:it.course,course_title:it.course_title})})),n(ke||[])}catch(ke){console.error("Error fetching certificates:",ke),p("    .    .")}finally{l(!1)}}),L=ge=>{var ke;console.log("Certificate clicked:",ge),console.log("Template data:",ge.template),(ke=ge.template)!=null&&ke.template_file&&console.log("Template file URL:",I(ge.template.template_file)),x(ge),y(!0)},k=ge=>$(null,null,function*(){try{const ke=yield ro.downloadPDF(ge);if(ke.download_url){if(ke.download_url.endsWith(".pdf")){const it=document.createElement("a");it.href=ke.download_url,it.download=`certificate-${ge}.pdf`,it.target="_blank",document.body.appendChild(it),it.click(),document.body.removeChild(it)}else{const it=t.find(kt=>kt.id===ge);it?L(it):window.open(ke.download_url,"_blank")}ke.message&&console.log(ke.message)}}catch(ke){console.error("Error downloading certificate:",ke),alert("    ")}}),G=ge=>$(null,null,function*(){try{const ke=yield ro.shareCertificate(ge);ke.success&&alert(ke.message)}catch(ke){console.error("Error sharing certificate:",ke),alert("    ")}}),W=ge=>{x(ge),y(!0),setTimeout(()=>{var kt;const ke=`
        @media print {
          .certificate-print {
            background-image: url(${I((kt=ge.template)==null?void 0:kt.template_file)}) !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            -webkit-print-color-adjust: exact !important;
            color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
        }
      `,it=document.createElement("style");it.type="text/css",it.innerText=ke,document.head.appendChild(it),window.print(),setTimeout(()=>{document.head.removeChild(it)},1e3)},500)},M=(ge,ke)=>{R(ke)},U=ge=>{T(parseInt(ge.target.value,10)),R(0)},H=ge=>{switch(ge){case"verified":return"success";case"pending":return"warning";case"failed":return"error";default:return"default"}},N=ge=>{switch(ge){case"verified":return" ";case"pending":return"  ";case"failed":return" ";default:return" "}},Y=t.filter(ge=>{var Cr;const ke=v==="all"||ge.verification_status===v,kt=(ge.course_title||ge.course_name||"").toLowerCase().includes(C.toLowerCase())||((Cr=ge.certificate_id)==null?void 0:Cr.toLowerCase().includes(C.toLowerCase()));return ke&&kt}),E=ge=>{try{return Cw(new Date(ge),"dd MMMM yyyy",{locale:NC})}catch(ke){return ge}},I=ge=>{if(console.log("getAbsoluteUrl called with:",ge),console.log("API_CONFIG.baseURL:",Zi.baseURL),!ge)return console.log("getAbsoluteUrl: No URL provided"),null;if(ge.startsWith("http"))return console.log("getAbsoluteUrl: Already absolute URL:",ge),ge;const ke=`${Zi.baseURL}${ge}`;return console.log("getAbsoluteUrl: Converted URL:",ge,"->",ke),ke};return a?o(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2,children:[e(Qe,{size:60}),e(f,{variant:"h6",color:"text.secondary",children:"  ..."})]}):d?o(Xe,{maxWidth:"md",sx:{mt:4},children:[e(Be,{severity:"error",sx:{mb:2},children:d}),e(re,{variant:"contained",onClick:V,startIcon:e(ns,{}),children:" "})]}):o(c,{sx:{p:{xs:1,md:3}},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(zt,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:""})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"        "})]})]}),o(Xe,{maxWidth:"lg",sx:{py:4},children:[o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(zt,{sx:{color:"#ff9800",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary",children:t.length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(dh,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:t.filter(ge=>ge.verification_status==="verified").length}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(Ln,{sx:{color:"#f57c00",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"warning.main",children:t.filter(ge=>ge.verification_status==="pending").length}),e(f,{variant:"caption",color:"text.secondary",children:"  "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(wa,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[o(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[t.length>0?Math.round(t.reduce((ge,ke)=>ge+(ke.final_grade||0),0)/t.length):0,"%"]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),e(De,{elevation:1,sx:{p:3,mb:3},children:o(le,{container:!0,spacing:2,alignItems:"center",children:[e(le,{item:!0,xs:12,md:6,children:o(c,{display:"flex",gap:1,flexWrap:"wrap",children:[e(_e,{label:" ",onClick:()=>S("all"),color:v==="all"?"primary":"default",variant:v==="all"?"filled":"outlined"}),e(_e,{label:"",onClick:()=>S("verified"),color:v==="verified"?"success":"default",variant:v==="verified"?"filled":"outlined"}),e(_e,{label:"  ",onClick:()=>S("pending"),color:v==="pending"?"warning":"default",variant:v==="pending"?"filled":"outlined"})]})}),e(le,{item:!0,xs:12,md:6,children:o(c,{display:"flex",gap:1,children:[o(c,{flex:1,position:"relative",children:[e(lo,{sx:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:"text.secondary"}}),e("input",{type:"text",placeholder:"  ...",value:C,onChange:ge=>_(ge.target.value),style:{width:"100%",padding:"12px 12px 12px 40px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px"}})]}),e(re,{variant:"outlined",onClick:V,startIcon:e(ns,{}),children:""})]})})]})}),Y.length===0?o(De,{elevation:1,sx:{p:8,textAlign:"center"},children:[e(zt,{sx:{fontSize:80,color:"text.secondary",mb:2}}),e(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"  "}),e(f,{variant:"body2",color:"text.secondary",children:C||v!=="all"?"      ":"     .     !"})]}):o(De,{elevation:1,sx:{overflow:"hidden"},children:[e(ni,{children:o(ei,{children:[e(ti,{children:o(or,{sx:{bgcolor:"grey.50"},children:[e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:" "}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:" "}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:" "}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:" "}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem"},children:" "}),e(be,{sx:{fontWeight:"bold",fontSize:"1rem",textAlign:"center"},children:""})]})}),e(ri,{children:Y.slice(z*B,z*B+B).map(ge=>o(or,{sx:{"&:hover":{bgcolor:"action.hover"},cursor:"pointer"},onClick:()=>L(ge),children:[e(be,{children:o(c,{display:"flex",alignItems:"center",gap:2,children:[e(Tt,{sx:{bgcolor:"primary.main",width:40,height:40},children:e(zt,{})}),o(c,{children:[e(f,{variant:"subtitle1",fontWeight:"bold",children:ge.course_title||ge.course_name||"  "}),e(f,{variant:"caption",color:"text.secondary",children:ge.student_name||" "})]})]})}),e(be,{children:e(f,{variant:"body2",fontFamily:"monospace",children:ge.certificate_id})}),e(be,{children:e(f,{variant:"body2",children:E(ge.date_issued)})}),e(be,{children:ge.final_grade?e(_e,{label:`${ge.final_grade}%`,color:ge.final_grade>=80?"success":ge.final_grade>=60?"warning":"error",size:"small"}):e(f,{variant:"body2",color:"text.secondary",children:" "})}),e(be,{children:e(_e,{label:N(ge.verification_status),color:H(ge.verification_status),size:"small",icon:ge.verification_status==="verified"?e(dh,{}):void 0})}),e(be,{children:o(c,{display:"flex",gap:1,justifyContent:"center",children:[e(Je,{title:" ",children:e(xe,{size:"small",onClick:ke=>{ke.stopPropagation(),L(ge)},color:"primary",children:e(Lr,{})})}),e(Je,{title:" PDF",children:e(xe,{size:"small",onClick:ke=>{ke.stopPropagation(),k(ge.id)},color:"success",children:e(Kn,{})})}),e(Je,{title:"",children:e(xe,{size:"small",onClick:ke=>{ke.stopPropagation(),G(ge)},color:"info",children:e(rd,{})})}),e(Je,{title:"",children:e(xe,{size:"small",onClick:ke=>{ke.stopPropagation(),W(ge)},color:"secondary",children:e(lw,{})})})]})})]},ge.id))})]})}),e(Ea,{rowsPerPageOptions:[5,10,25,50],component:"div",count:Y.length,rowsPerPage:B,page:z,onPageChange:M,onRowsPerPageChange:U,labelRowsPerPage:"   :",labelDisplayedRows:({from:ge,to:ke,count:it})=>`${ge}-${ke}  ${it}`})]}),e(wr,{open:m,onClose:()=>y(!1),maxWidth:"lg",fullWidth:!0,fullScreen:q,PaperProps:{sx:{minHeight:"80vh",maxHeight:"90vh"}},children:h&&o(Rt,{children:[e(Wr,{className:"no-print",children:e(c,{display:"flex",alignItems:"center",justifyContent:"center",children:o(c,{display:"flex",alignItems:"center",gap:2,children:[e(zt,{color:"primary"}),e(f,{variant:"h6",children:" "})]})})}),e(vr,{sx:{p:0,overflow:"auto"},children:e(c,{sx:{p:4,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"70vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:o(De,{elevation:8,className:"certificate-print",sx:{width:"100%",maxWidth:"800px",aspectRatio:"4/3",background:(A=h.template)!=null&&A.template_file?`url(${I(h.template.template_file)})`:"white",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative",overflow:"hidden",border:"none",borderRadius:2,"@media print":{background:(Q=h.template)!=null&&Q.template_file?`url(${I(h.template.template_file)})`:"white",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100vh",maxWidth:"none",aspectRatio:"none",margin:0,padding:0,boxShadow:"none",border:"none",borderRadius:0,"-webkit-print-color-adjust":"exact","color-adjust":"exact","print-color-adjust":"exact"}},children:[((J=h.template)==null?void 0:J.institution_logo)&&e(c,{sx:{position:"absolute",top:50,left:40,width:80,height:80,zIndex:10},children:e("img",{src:I(h.template.institution_logo),alt:" ",style:{width:"100%",height:"100%",objectFit:"contain"}})}),o(c,{sx:{p:4,pb:5,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",background:"transparent",position:"relative"},children:[o(c,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",maxWidth:"700px",mx:"auto",py:4},children:[(P=h.template)!=null&&P.certificate_text?e(c,{sx:{mb:4,lineHeight:2},children:h.template.certificate_text.replace("{student_name}",h.student_name||" ").replace("{course_name}",h.course_title||h.course_name||" ").replace("{completion_date}",E(h.date_issued)).replace("{institution_name}",h.template.institution_name||"  ").replace("{final_grade}",h.final_grade&&h.final_grade>0?h.final_grade:" ").replace("{course_duration}",h.course_duration_hours||" ").split(`
`).map((ge,ke)=>e(f,{variant:ge.includes(h.student_name)||ge.includes(h.course_title)?"h4":"body1",fontWeight:ge.includes(h.student_name)||ge.includes(h.course_title)?"bold":"normal",sx:{mb:ge.includes(h.student_name)||ge.includes(h.course_title)?3:1.5,fontSize:ge.includes(h.student_name)||ge.includes(h.course_title)?"2rem":"1.3rem",lineHeight:1.6,color:ge.includes(h.student_name)||ge.includes(h.course_title)?"#0e5181":"#2c3e50",textAlign:"center",fontFamily:(ge.includes(h.student_name)||ge.includes(h.course_title),'"Cairo", "Arial", sans-serif')},children:ge},ke))}):o(c,{sx:{mb:4,lineHeight:2},children:[e(f,{variant:"body1",sx:{mb:2,fontSize:"1.5rem",lineHeight:1.8,color:"#2c3e50",textAlign:"center",fontFamily:'"Cairo", "Arial", sans-serif'},children:"  "}),e(f,{variant:"h4",fontWeight:"bold",sx:{mb:3,fontSize:"2.2rem",color:"#0e5181",textAlign:"center",fontFamily:'"Cairo", "Arial", sans-serif'},children:h.student_name||" "}),e(f,{variant:"body1",sx:{mb:2,fontSize:"1.5rem",lineHeight:1.8,color:"#2c3e50",textAlign:"center",fontFamily:'"Cairo", "Arial", sans-serif'},children:"   "}),e(f,{variant:"h5",fontWeight:"bold",sx:{mb:3,fontSize:"1.8rem",color:"#0e5181",textAlign:"center",fontFamily:'"Cairo", "Arial", sans-serif'},children:h.course_title||h.course_name||" "}),o(f,{variant:"body1",sx:{mb:2,fontSize:"1.3rem",lineHeight:1.8,color:"#666",textAlign:"center",fontFamily:'"Cairo", "Arial", sans-serif'},children:[" ",E(h.date_issued)]})]}),(((ie=h.template)==null?void 0:ie.include_grade)||h.final_grade)&&h.final_grade&&h.final_grade>0&&e(c,{sx:{mb:3,mt:2},children:o(f,{variant:"h6",sx:{color:"#2e7d32",fontWeight:"bold",textAlign:"center",fontSize:"1.4rem",fontFamily:'"Cairo", "Arial", sans-serif'},children:[": ",h.final_grade,"%"]})})]}),o(c,{sx:{position:"absolute",bottom:100,left:20,right:20,display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[o(c,{sx:{textAlign:"center",flex:1},children:[e(f,{variant:"h6",fontWeight:"bold",sx:{color:"#0e5181",mb:1,fontSize:"1.1rem",fontFamily:'"Cairo", "Arial", sans-serif'},children:((ue=h.template)==null?void 0:ue.institution_name)||h.institution_name||"  "}),e(f,{variant:"body2",sx:{color:"#666",fontSize:"0.9rem",fontFamily:'"Cairo", "Arial", sans-serif'},children:((fe=h.template)==null?void 0:fe.institution_description)||"  "})]}),o(c,{sx:{textAlign:"center",flex:1},children:[e(c,{sx:{height:70,borderBottom:"2px solid #0e5181",mb:1,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(de=h.template)!=null&&de.signature_image?e(c,{component:"img",src:I(h.template.signature_image),alt:"",sx:{height:"100%",objectFit:"contain"}}):e(f,{variant:"body2",sx:{color:"#0e5181",fontStyle:"italic"},children:""})}),e(f,{variant:"body2",fontWeight:"bold",sx:{color:"#0e5181",fontSize:"0.9rem",fontFamily:'"Cairo", "Arial", sans-serif'},children:((K=h.template)==null?void 0:K.signature_name)||" "}),e(f,{variant:"caption",sx:{color:"#666",fontSize:"0.8rem",fontFamily:'"Cairo", "Arial", sans-serif'},children:((se=h.template)==null?void 0:se.signature_title)||" "})]})]})]}),o(c,{sx:{position:"absolute",bottom:70,left:60,right:120,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(f,{variant:"caption",sx:{color:"#666",fontFamily:'"Cairo", "Arial", sans-serif',fontSize:"0.8rem",fontWeight:"bold"},children:[" : ",h.certificate_id]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[h.verification_code&&o(f,{variant:"caption",sx:{color:"#666",fontFamily:'"Cairo", "Arial", sans-serif',fontSize:"0.8rem",fontWeight:"bold"},children:[" : ",h.verification_code]}),((ve=h.template)==null?void 0:ve.include_qr_code)&&h.qr_code_image&&e(c,{sx:{width:25,height:25},children:e("img",{src:h.qr_code_image,alt:"QR Code",style:{width:"100%",height:"100%",objectFit:"contain"}})})]})]})]})})}),e($r,{className:"no-print",sx:{p:2,borderTop:"1px solid #e0e0e0"},children:e(re,{onClick:()=>y(!1),children:""})})]})})]})]})},K9=()=>{const{verificationCode:t}=cr(),n=ct(),a=jt();Fn(a.breakpoints.down("md"));const[l,d]=w.useState(null),[p,h]=w.useState(!0),[x,m]=w.useState(null);w.useEffect(()=>{t&&y()},[t]);const y=()=>$(null,null,function*(){try{h(!0),m(null);const _=yield ro.verifyCertificate(t);d(_.certificate)}catch(_){console.error("Error verifying certificate:",_),m("     ")}finally{h(!1)}}),v=()=>{window.print()},S=()=>$(null,null,function*(){try{const _=yield ro.shareCertificate(l);_.success&&alert(_.message)}catch(_){console.error("Error sharing certificate:",_),alert("    ")}}),C=_=>{try{return Cw(new Date(_),"dd MMMM yyyy",{locale:NC})}catch(z){return _}};return p?o(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2,children:[e(Qe,{size:60}),e(f,{variant:"h6",color:"text.secondary",children:"   ..."})]}):x?o(Xe,{maxWidth:"md",sx:{mt:4},children:[e(Be,{severity:"error",sx:{mb:2},children:x}),e(re,{variant:"contained",onClick:()=>n("/"),startIcon:e(qt,{}),children:" "})]}):l?e(c,{sx:{minHeight:"100vh",bgcolor:"background.default",py:4},children:o(Xe,{maxWidth:"lg",children:[o(c,{sx:{mb:4,textAlign:"center"},children:[e(f,{variant:"h4",fontWeight:700,gutterBottom:!0,children:"  "}),e(f,{variant:"body1",color:"text.secondary",children:"      "})]}),e(nt,{elevation:8,sx:{mb:4,borderRadius:3,overflow:"hidden",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",border:"2px solid #e3f2fd"},children:o(pt,{sx:{p:4},children:[o(c,{sx:{textAlign:"center",mb:4},children:[e(Tt,{sx:{width:80,height:80,mx:"auto",mb:2,bgcolor:"success.main",fontSize:"2rem"},children:e(dh,{})}),e(f,{variant:"h4",fontWeight:700,color:"success.main",gutterBottom:!0,children:" "}),e(_e,{label:"    ",color:"success",icon:e(dh,{}),sx:{fontSize:"1rem",py:2,px:1}})]}),e(Vt,{sx:{my:3}}),o(le,{container:!0,spacing:4,children:[o(le,{item:!0,xs:12,md:6,children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:" "}),o(kn,{spacing:2,children:[o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:" "}),e(f,{variant:"h6",fontWeight:600,children:l.course_title||l.course_name})]}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:" "}),e(f,{variant:"h6",fontWeight:600,children:l.student_name})]}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:" "}),e(f,{variant:"h6",fontWeight:600,children:l.institution_name})]})]})]}),o(le,{item:!0,xs:12,md:6,children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:" "}),o(kn,{spacing:2,children:[o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:" "}),e(f,{variant:"h6",fontWeight:600,fontFamily:"monospace",children:l.certificate_id})]}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:" "}),e(f,{variant:"h6",fontWeight:600,children:C(l.date_issued)})]}),o(c,{children:[e(f,{variant:"body2",color:"text.secondary",children:" "}),e(f,{variant:"h6",fontWeight:600,fontFamily:"monospace",children:l.verification_code})]})]})]})]}),(l.final_grade||l.completion_percentage)&&o(Rt,{children:[e(Vt,{sx:{my:3}}),e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:" "}),o(le,{container:!0,spacing:3,children:[l.final_grade&&e(le,{item:!0,xs:12,sm:6,children:o(De,{elevation:2,sx:{p:2,textAlign:"center",background:"linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%)"},children:[e(wa,{sx:{fontSize:40,color:"success.main",mb:1}}),o(f,{variant:"h4",fontWeight:700,color:"success.main",children:[l.final_grade,"%"]}),e(f,{variant:"body2",color:"text.secondary",children:" "})]})}),e(le,{item:!0,xs:12,sm:6,children:o(De,{elevation:2,sx:{p:2,textAlign:"center",background:"linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%)"},children:[e(Ln,{sx:{fontSize:40,color:"primary.main",mb:1}}),o(f,{variant:"h4",fontWeight:700,color:"primary.main",children:[l.completion_percentage,"%"]}),e(f,{variant:"body2",color:"text.secondary",children:" "})]})})]})]}),o(c,{sx:{mt:4,display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[e(re,{variant:"contained",startIcon:e(lw,{}),onClick:v,sx:{borderRadius:2,px:3,py:1.5,background:"linear-gradient(45deg, #2196f3 0%, #21cbf3 100%)","&:hover":{background:"linear-gradient(45deg, #1976d2 0%, #1cb5e0 100%)"}},children:" "}),e(re,{variant:"outlined",startIcon:e(rd,{}),onClick:S,sx:{borderRadius:2,px:3,py:1.5,borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.dark",backgroundColor:"primary.light",color:"primary.dark"}},children:""}),e(re,{variant:"outlined",startIcon:e(qt,{}),onClick:()=>n("/"),sx:{borderRadius:2,px:3,py:1.5},children:" "})]})]})}),e(De,{elevation:2,sx:{p:3,textAlign:"center",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"},children:o(f,{variant:"body2",color:"text.secondary",children:["      ",C(new Date)," -  : ",e("strong",{children:t})]})})]})}):o(Xe,{maxWidth:"md",sx:{mt:4},children:[e(Be,{severity:"warning",sx:{mb:2},children:"    "}),e(re,{variant:"contained",onClick:()=>n("/"),startIcon:e(qt,{}),children:" "})]})},Jg=te(_e)(({status:t})=>X(X(X(X({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},t==="submitted"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),t==="graded"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),t==="pending"&&{backgroundColor:"#fff3e0",color:"#f57c00"}),t==="overdue"&&{backgroundColor:"#ffebee",color:"#d32f2f"})),Z9=()=>{var Y,E,I;const[t,n]=w.useState(0),[a,l]=w.useState(!1),[d,p]=w.useState(null),[h,x]=w.useState(!1),[m,y]=w.useState(null),[v,S]=w.useState(0),[C,_]=w.useState(10),[z,R]=w.useState([]),[B,T]=w.useState(!0),[O,q]=w.useState(null),j=ct();w.useEffect(()=>{$(null,null,function*(){T(!0),q(null);try{const Q=yield lr.getAssignments();console.log("Fetched assignments:",Q);const J=Q.results||Q||[];R(J)}catch(Q){console.error("Error fetching assignments:",Q),q("  .    .")}finally{T(!1)}})},[]);const ee={totalAssignments:z.length,submitted:z.filter(A=>A.submission_status==="submitted"||A.submission_status==="graded").length,pending:z.filter(A=>A.submission_status==="pending"||!A.submission_status).length,averageGrade:Math.round(z.filter(A=>A.grade!==null).reduce((A,Q)=>A+(Q.grade||0),0)/z.filter(A=>A.grade!==null).length)||0},V=A=>{const Q=A.submission_status,J=A.is_late;return Q==="submitted"?J?" ":"":Q==="graded"?"":Q==="pending"||!Q?"  ":A.is_overdue?" ":" "},L=A=>{p(A),l(!0)},k=A=>{j(`/student/assignments/${A}/submit`)},G=A=>$(null,null,function*(){try{const Q=yield lr.getMySubmissions({assignment:A.id});if(Q&&Q.length>0){const J=Q[0];y({assignment:A,submission:J}),x(!0)}}catch(Q){console.error("Error fetching grade:",Q)}}),W=(A,Q)=>$(null,null,function*(){try{if(!Q){console.error("No file URL provided");return}let J=Q;Q.startsWith("http")||(J=`http://localhost:8000${Q}`);const P=document.createElement("a");P.href=J,P.download=A||"assignment_file",P.target="_blank",document.body.appendChild(P),P.click(),document.body.removeChild(P),console.log("Downloading file:",A)}catch(J){console.error("Error downloading file:",J)}}),M=(A,Q)=>{S(Q)},U=A=>{_(parseInt(A.target.value,10)),S(0)},H=z.filter(A=>t===0?!0:t===1?A.submission_status==="pending"||!A.submission_status:t===2?A.submission_status==="submitted"||A.submission_status==="graded":t===3?A.is_late||A.is_overdue:!0),N=H.slice(v*C,v*C+C);return B?e(c,{className:"assignments-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e(Qe,{size:60})}):O?o(c,{className:"assignments-container",children:[e(Be,{severity:"error",sx:{mb:2},children:O}),e(re,{onClick:()=>window.location.reload(),variant:"contained",children:" "})]}):o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(Jr,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:""})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"   "})]})]}),o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(Jr,{sx:{color:"#0e5181",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary",children:ee.totalAssignments}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(eo,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:ee.submitted}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(k6,{sx:{color:"#f57c00",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"warning.main",children:ee.pending}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(co,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[o(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[ee.averageGrade,"%"]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),e(De,{className:"assignments-tabs",children:o(zn,{value:t,onChange:(A,Q)=>n(Q),children:[e(mt,{label:" "}),e(mt,{label:" "}),e(mt,{label:" "}),e(mt,{label:""})]})}),o(De,{className:"assignments-table",sx:{width:"100%",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[e(ni,{sx:{maxHeight:600},children:o(ei,{stickyHeader:!0,children:[e(ti,{children:o(or,{sx:{backgroundColor:"#f8f9fa"},children:[e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:" "}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:" "}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0",textAlign:"center"},children:""})]})}),e(ri,{children:N.map(A=>{var P,ie,ue;const J=new Date>new Date(A.due_date)&&(A.submission_status==="pending"||!A.submission_status)?"overdue":A.submission_status;return o(or,{sx:{"&:hover":{backgroundColor:"#f8f9fa"},transition:"background-color 0.2s ease"},children:[e(be,{children:o(c,{className:"table-cell-content",children:[e(f,{className:"table-cell-title",variant:"subtitle1",fontWeight:600,color:"#2c3e50",sx:{mb:.5},children:A.title}),e(f,{className:"table-cell-description",variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:A.description}),o(c,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:1},children:[A.has_questions&&e(_e,{label:`${A.questions_count||0} `,size:"small",icon:e(ar,{}),variant:"outlined",sx:{borderColor:"#0e5181",color:"#0e5181",fontSize:"0.7rem"}}),A.has_file_upload&&e(_e,{label:" ",size:"small",icon:e(Ni,{}),variant:"outlined",sx:{borderColor:"#2e7d32",color:"#2e7d32",fontSize:"0.7rem"}})]})]})}),o(be,{children:[o(c,{className:"table-cell-meta",children:[e(zt,{sx:{color:"#0e5181",fontSize:18}}),e(f,{variant:"body2",fontWeight:500,children:A.course_title||((P=A.course)==null?void 0:P.title)})]}),A.module_name||((ie=A.module)==null?void 0:ie.name)&&e(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:A.module_name||((ue=A.module)==null?void 0:ue.name)})]}),e(be,{children:e(Jg,{label:V(A),status:J,size:"small"})}),o(be,{children:[e(f,{variant:"body2",color:"text.secondary",children:new Date(A.due_date).toLocaleDateString("en-GB")}),e(f,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:new Date(A.due_date).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]}),e(be,{children:o(f,{variant:"body2",fontWeight:500,color:"#2c3e50",children:[A.points," "]})}),e(be,{children:A.submission_status==="submitted"||A.submission_status==="graded"?o(c,{className:"table-progress-container",children:[o(f,{variant:"body2",fontWeight:600,color:"success.main",sx:{mb:.5},children:[A.grade||0,"/",A.points]}),e(Sr,{className:"table-progress-bar",variant:"determinate",value:(A.grade||0)/A.points*100,sx:{height:6,borderRadius:3,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #e5978b 0%, #66bb6a 100%)"}}}),o(f,{variant:"caption",color:"text.secondary",children:[Math.round((A.grade||0)/A.points*100),"%"]})]}):e(f,{variant:"body2",color:"text.secondary",children:"  "})}),e(be,{children:o(c,{className:"table-cell-actions",children:[e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>L(A),sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(103, 58, 183, 0.1)"}},children:e(Lr,{})})}),(A.submission_status==="pending"||!A.submission_status)&&e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>k(A.id),sx:{color:"#2e7d32","&:hover":{backgroundColor:"rgba(46, 125, 50, 0.1)"}},children:e(eo,{})})}),A.assignment_file&&e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>W("assignment_file",A.assignment_file),sx:{color:"#1976d2","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:e(Kn,{})})}),(A.submission_status==="submitted"||A.submission_status==="graded")&&e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>G(A),sx:{color:"#f57c00","&:hover":{backgroundColor:"rgba(245, 124, 0, 0.1)"}},children:e(q1,{})})})]})})]},A.id)})})]})}),e(Ea,{rowsPerPageOptions:[5,10,25,50],component:"div",count:H.length,rowsPerPage:C,page:v,onPageChange:M,onRowsPerPageChange:U,labelRowsPerPage:"  :",labelDisplayedRows:({from:A,to:Q,count:J})=>`${A}-${Q}  ${J}`,sx:{backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0"}})]}),e(wr,{open:a,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden",direction:"rtl"}},children:d&&o(Rt,{children:[o(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Jr,{sx:{fontSize:28}}),e(f,{variant:"h6",fontWeight:700,children:" "})]}),e(xe,{onClick:()=>l(!1),sx:{color:"white"},children:e(_i,{})})]}),e(vr,{sx:{p:4,backgroundColor:"#f8f9fa",direction:"rtl"},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{children:[e(f,{variant:"h5",fontWeight:600,color:"primary",sx:{mb:2,textAlign:"right"},children:d.title}),e(f,{variant:"body1",sx:{color:"#666",lineHeight:1.8,textAlign:"right",backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",minHeight:80},children:d.description||"   "})]}),e(Vt,{}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,md:6,children:o(c,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(zt,{sx:{color:"#0e5181"}}),o(f,{variant:"body1",fontWeight:500,sx:{textAlign:"right"},children:[": ",d.course_title||((Y=d.course)==null?void 0:Y.title)]})]}),(d.module_name||((E=d.module)==null?void 0:E.name))&&o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(nd,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[": ",d.module_name||((I=d.module)==null?void 0:I.name)]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(wa,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[": ",d.points," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Jg,{label:V(d),status:d.submission_status||"pending",size:"small"}),e(f,{variant:"body2",sx:{textAlign:"right"},children:""})]})]})}),e(le,{item:!0,xs:12,md:6,children:o(c,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Pn,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[" : ",new Date(d.due_date).toLocaleString("ar-SA")]})]}),d.allow_late_submissions&&o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(cw,{sx:{color:"#f57c00"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:["   ( ",d.late_submission_penalty,"%)"]})]}),d.submission_date&&o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(eo,{sx:{color:"#2e7d32"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[" : ",new Date(d.submission_date).toLocaleString("ar-SA")]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(dn,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[" : ",new Date(d.created_at).toLocaleString("ar-SA")]})]})]})})]})]}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:" "}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,md:6,children:o(c,{sx:{backgroundColor:"white",p:2,borderRadius:2,border:"1px solid #e0e0e0"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(ar,{sx:{color:"#0e5181",fontSize:20}}),o(f,{variant:"body2",sx:{textAlign:"right"},children:[" : ",d.questions_count||0]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(Ni,{sx:{color:"#2e7d32",fontSize:20}}),e(f,{variant:"body2",sx:{textAlign:"right"},children:d.has_file_upload?"  ":"   "})]})]})}),e(le,{item:!0,xs:12,md:6,children:o(c,{sx:{backgroundColor:"white",p:2,borderRadius:2,border:"1px solid #e0e0e0"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(Ca,{sx:{color:"#666",fontSize:20}}),o(f,{variant:"body2",sx:{textAlign:"right"},children:[" : ",d.total_students||0]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e(eo,{sx:{color:"#2e7d32",fontSize:20}}),o(f,{variant:"body2",sx:{textAlign:"right"},children:[" : ",d.submissions_count||0]})]})]})})]})]}),(d.submission_status==="submitted"||d.submission_status==="graded")&&o(Rt,{children:[e(Vt,{}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:3},children:""}),o(c,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",textAlign:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2},children:[o(f,{variant:"h3",fontWeight:700,color:"success.main",children:[d.grade||0,"/",d.points]}),o(f,{variant:"h5",color:"text.secondary",children:["(",Math.round((d.grade||0)/d.points*100),"%)"]})]}),e(Sr,{variant:"determinate",value:(d.grade||0)/d.points*100,sx:{height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)"}}}),d.feedback&&o(Be,{severity:"info",sx:{mt:3,textAlign:"right"},children:[e(f,{variant:"body1",fontWeight:500,gutterBottom:!0,children:" :"}),e(f,{variant:"body2",children:d.feedback})]})]})]})]})]})}),o($r,{sx:{p:3,backgroundColor:"#f8f9fa",direction:"rtl"},children:[(d.submission_status==="pending"||!d.submission_status)&&e(re,{variant:"contained",onClick:()=>{l(!1),k(d.id)},sx:{borderRadius:2,px:4,py:1.5,fontWeight:700,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:" "}),e(re,{onClick:()=>l(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600},children:""})]})]})}),e(wr,{open:h,onClose:()=>x(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden"}},children:m&&o(Rt,{children:[o(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(q1,{sx:{fontSize:28}}),e(f,{variant:"h6",fontWeight:700,children:" "})]}),e(xe,{onClick:()=>x(!1),sx:{color:"white"},children:e(_i,{})})]}),e(vr,{sx:{p:4,backgroundColor:"#f8f9fa"},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"white",borderRadius:2},children:[e(Jr,{sx:{color:"#0e5181",fontSize:32}}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,children:m.assignment.title}),e(f,{variant:"body2",color:"text.secondary",children:m.assignment.course_title})]})]}),o(le,{container:!0,spacing:3,children:[o(le,{item:!0,xs:12,md:6,children:[e(f,{variant:"h6",gutterBottom:!0,children:" "}),o(Rr,{dense:!0,children:[o(ir,{children:[e(fr,{children:e(Pn,{})}),e(Ut,{primary:" ",secondary:new Date(m.submission.submitted_at).toLocaleString("en-GB")})]}),o(ir,{children:[e(fr,{children:e(Jg,{label:V(m.assignment,m.submission.is_late),status:m.submission.status,size:"small"})}),e(Ut,{primary:"",secondary:m.submission.is_late?"":"  "})]})]})]}),o(le,{item:!0,xs:12,md:6,children:[e(f,{variant:"h6",gutterBottom:!0,children:""}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[o(f,{variant:"h4",fontWeight:700,color:"success.main",children:[m.submission.grade||0,"/",m.assignment.points]}),o(f,{variant:"body1",color:"text.secondary",children:["(",Math.round((m.submission.grade||0)/m.assignment.points*100),"%)"]})]}),m.submission.feedback&&o(Be,{severity:"info",sx:{mt:2},children:[e(f,{variant:"body1",fontWeight:500,gutterBottom:!0,children:" :"}),e(f,{variant:"body2",children:m.submission.feedback})]})]})]}),m.submission.question_responses&&m.submission.question_responses.length>0&&o(Rt,{children:[e(Vt,{}),o(c,{children:[e(f,{variant:"h6",gutterBottom:!0,children:"  "}),m.submission.question_responses.map((A,Q)=>o(c,{sx:{mb:2,p:2,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0"},children:[o(f,{variant:"subtitle1",fontWeight:600,color:"primary",gutterBottom:!0,children:[" ",Q+1,": ",A.question_text||""]}),A.text_answer&&o(f,{variant:"body2",sx:{mb:1},children:[e("strong",{children:" :"})," ",A.text_answer]}),A.selected_answer_text&&o(f,{variant:"body2",sx:{mb:1},children:[e("strong",{children:" :"})," ",A.selected_answer_text]}),A.file_answer&&o(c,{sx:{mb:1},children:[e(f,{variant:"body2",fontWeight:600,children:" :"}),e(re,{variant:"text",startIcon:e(Ni,{}),onClick:()=>window.open(A.file_answer,"_blank"),size:"small",children:" "})]}),A.points_earned!==void 0&&o(f,{variant:"body2",color:"success.main",fontWeight:600,children:[" : ",A.points_earned]})]},A.id||Q))]})]})]})}),e($r,{sx:{p:3,backgroundColor:"#f8f9fa"},children:e(re,{onClick:()=>x(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600},children:""})})]})})]})},k5=te(_e)(({status:t})=>X(X(X({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},t==="active"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),t==="inactive"&&{backgroundColor:"#ffebee",color:"#d32f2f"}),t==="draft"&&{backgroundColor:"#fff3e0",color:"#f57c00"})),J9=()=>{const[t,n]=w.useState(0),[a,l]=w.useState(!1),[d,p]=w.useState(null),[h,x]=w.useState(0),[m,y]=w.useState(10),v=ct(),[S,C]=w.useState([]),[_,z]=w.useState(!0),[R,B]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{$(null,null,function*(){var H,N;z(!0);try{const Y=yield lr.getAssignments();console.log("Assignments API response:",Y);const E=Array.isArray(Y==null?void 0:Y.results)?Y.results:Array.isArray(Y)?Y:[];C(E),B({open:!0,message:`  ${E.length}  `,severity:"success"})}catch(Y){console.error("Error fetching assignments:",Y),B({open:!0,message:`  : ${((N=(H=Y==null?void 0:Y.response)==null?void 0:H.data)==null?void 0:N.detail)||Y.message}`,severity:"error"}),C([])}finally{z(!1)}})},[]);const T={totalAssignments:S.length,activeAssignments:S.filter(U=>U.is_active).length,totalSubmissions:S.reduce((U,H)=>U+H.submissions_count,0),totalGraded:S.reduce((U,H)=>U+H.graded_count,0),averageGrade:Math.round(S.filter(U=>U.average_grade>0).reduce((U,H)=>U+H.average_grade,0)/S.filter(U=>U.average_grade>0).length)},O=U=>{switch(U){case"active":return"";case"inactive":return" ";case"draft":return"";default:return" "}},q=()=>{v("/teacher/assignments/new")},j=U=>{p(U),l(!0)},ee=U=>{v(`/teacher/assignments/${U}/edit`)},V=U=>{v(`/teacher/assignments/${U}/submissions`)},L=U=>{v(`/teacher/assignments/${U}/questions`)},k=(U,H)=>{x(H)},G=U=>{y(parseInt(U.target.value,10)),x(0)},W=S.filter(U=>t===0?!0:t===1?U.is_active:t===2?!U.is_active:t===3?U.submissions_count>0:!0),M=W.slice(h*m,h*m+m);return o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(Jr,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"     "})]})]}),o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(Jr,{sx:{color:"#ff6b6b",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"error.main",children:T.totalAssignments}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(eo,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:T.activeAssignments}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(Ca,{sx:{color:"#1976d2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary.main",children:T.totalSubmissions}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(co,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[o(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[T.averageGrade,"%"]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),e(De,{className:"assignments-tabs",children:o(zn,{value:t,onChange:(U,H)=>n(H),children:[e(mt,{label:" "}),e(mt,{label:""}),e(mt,{label:""}),e(mt,{label:" "})]})}),e(c,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:e(xe,{onClick:q,sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:e(Nr,{sx:{fontSize:28}})})}),o(De,{className:"assignments-table",sx:{width:"100%",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[e(ni,{sx:{maxHeight:600},children:o(ei,{stickyHeader:!0,children:[e(ti,{children:o(or,{sx:{backgroundColor:"#f8f9fa"},children:[e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:" "}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:" "}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:" "}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:""}),e(be,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0",textAlign:"center"},children:""})]})}),e(ri,{children:M.map(U=>{const H=U.is_active?"active":"inactive",N=U.total_students>0?U.submissions_count/U.total_students*100:0;return o(or,{sx:{"&:hover":{backgroundColor:"#f8f9fa"},transition:"background-color 0.2s ease"},children:[e(be,{children:o(c,{className:"table-cell-content",children:[e(f,{className:"table-cell-title",variant:"subtitle1",fontWeight:600,color:"#2c3e50",sx:{mb:.5},children:U.title}),e(f,{className:"table-cell-description",variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:U.description})]})}),o(be,{children:[o(c,{className:"table-cell-meta",children:[e(zt,{sx:{color:"#ff6b6b",fontSize:18}}),e(f,{variant:"body2",fontWeight:500,children:U.course_title})]}),U.module_name&&e(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:U.module_name})]}),e(be,{children:e(k5,{label:O(H),status:H,size:"small"})}),e(be,{children:e(f,{variant:"body2",color:"text.secondary",children:new Date(U.due_date).toLocaleDateString("en-GB")})}),e(be,{children:o(c,{children:[o(f,{variant:"body2",fontWeight:500,children:[U.submissions_count," / ",U.total_students]}),o(f,{variant:"caption",color:"text.secondary",children:[U.graded_count,"  "]})]})}),e(be,{children:o(c,{className:"table-progress-container",children:[e(c,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:o(f,{variant:"caption",color:"text.secondary",children:[Math.round(N),"%"]})}),e(Sr,{className:"table-progress-bar",variant:"determinate",value:N,sx:{height:6,borderRadius:3,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)"}}})]})}),e(be,{children:o(f,{variant:"body2",fontWeight:500,color:"#2c3e50",children:[U.points," "]})}),e(be,{children:o(c,{className:"table-cell-actions",children:[e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>j(U),sx:{color:"#ff6b6b","&:hover":{backgroundColor:"rgba(255, 107, 107, 0.1)"}},children:e(Lr,{})})}),e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>ee(U.id),sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(103, 58, 183, 0.1)"}},children:e(Tr,{})})}),e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>V(U.id),sx:{color:"#2e7d32","&:hover":{backgroundColor:"rgba(46, 125, 50, 0.1)"}},children:e(jr,{})})}),e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>L(U.id),sx:{color:"#e5978b","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.1)"}},children:e(ar,{})})})]})})]},U.id)})})]})}),e(Ea,{rowsPerPageOptions:[5,10,25,50],component:"div",count:W.length,rowsPerPage:m,page:h,onPageChange:k,onRowsPerPageChange:G,labelRowsPerPage:"  :",labelDisplayedRows:({from:U,to:H,count:N})=>`${U}-${H}  ${N}`,sx:{backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0"}})]}),e(un,{open:R.open,autoHideDuration:4e3,onClose:()=>B(U=>oe(X({},U),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:e(Be,{onClose:()=>B(U=>oe(X({},U),{open:!1})),severity:R.severity,sx:{width:"100%"},children:R.message})}),e(wr,{open:a,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden",direction:"rtl"}},children:d&&o(Rt,{children:[o(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Jr,{sx:{fontSize:28}}),e(f,{variant:"h6",fontWeight:700,children:" "})]}),e(xe,{onClick:()=>l(!1),sx:{color:"white"},children:e(_i,{})})]}),e(vr,{sx:{p:4,backgroundColor:"#f8f9fa",direction:"rtl"},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{children:[e(f,{variant:"h5",fontWeight:600,color:"primary",sx:{mb:2,textAlign:"right"},children:d.title}),e(f,{variant:"body1",sx:{color:"#666",lineHeight:1.8,textAlign:"right",backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",minHeight:80},children:d.description||"   "})]}),e(Vt,{}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{xs:12,md:6,children:o(c,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(zt,{sx:{color:"#ff6b6b"}}),o(f,{variant:"body1",fontWeight:500,sx:{textAlign:"right"},children:[": ",d.course_title]})]}),d.module_name&&o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(nd,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[": ",d.module_name]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(wa,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[": ",d.points," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(k5,{label:O(d.is_active?"active":"inactive"),status:d.is_active?"active":"inactive",size:"small"}),e(f,{variant:"body2",sx:{textAlign:"right"},children:""})]})]})}),e(le,{xs:12,md:6,children:o(c,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Pn,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[" : ",new Date(d.due_date).toLocaleString("ar-SA")]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Ca,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[" : ",d.total_students]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(eo,{sx:{color:"#2e7d32"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[": ",d.submissions_count]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(dn,{sx:{color:"#666"}}),o(f,{variant:"body1",sx:{textAlign:"right"},children:[" : ",new Date(d.created_at).toLocaleString("ar-SA")]})]})]})})]})]}),e(Vt,{}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:3},children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{xs:12,md:3,children:o(c,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(f,{variant:"h4",fontWeight:700,color:"primary",children:d.submissions_count}),e(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:" "})]})}),e(le,{xs:12,md:3,children:o(c,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(f,{variant:"h4",fontWeight:700,color:"success.main",children:d.graded_count}),e(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:" "})]})}),e(le,{xs:12,md:3,children:o(c,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(f,{variant:"h4",fontWeight:700,color:"warning.main",children:d.submissions_count-d.graded_count}),e(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"  "})]})}),e(le,{xs:12,md:3,children:o(c,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[o(f,{variant:"h4",fontWeight:700,color:"secondary.main",children:[d.average_grade>0?d.average_grade.toFixed(1):0,"%"]}),e(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:" "})]})})]})]}),o(c,{children:[e(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:" "}),o(c,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[o(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"right"},children:[d.total_students>0?Math.round(d.submissions_count/d.total_students*100):0,"%"]}),o(f,{variant:"body2",color:"text.secondary",children:[d.submissions_count,"  ",d.total_students," "]})]}),e(Sr,{variant:"determinate",value:d.total_students>0?d.submissions_count/d.total_students*100:0,sx:{height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)"}}})]})]})]})}),o($r,{sx:{p:3,backgroundColor:"#f8f9fa",direction:"rtl"},children:[e(re,{variant:"contained",onClick:()=>{l(!1),V(d.id)},sx:{borderRadius:2,px:4,py:1.5,fontWeight:700,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:" "}),e(re,{onClick:()=>l(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600},children:""})]})]})})]})},_5=te(_e)(({status:t})=>X(X(X(X({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},t==="submitted"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),t==="graded"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),t==="late"&&{backgroundColor:"#ffebee",color:"#d32f2f"}),t==="pending"&&{backgroundColor:"#fff3e0",color:"#f57c00"})),eW=()=>{var k,G,W;const{assignmentId:t}=cr(),n=ct(),[a,l]=w.useState(0),[d,p]=w.useState(!1),[h,x]=w.useState(null),[m,y]=w.useState({grade:0,feedback:"",rubric_scores:{}}),[v,S]=w.useState(null),[C,_]=w.useState([]),[z,R]=w.useState(!0),[B,T]=w.useState(null);w.useEffect(()=>{t&&$(null,null,function*(){var U,H;R(!0),T(null);try{const N=yield lr.getAssignmentById(t);S(N);const E=(yield lr.getAssignmentSubmissions(t)).map(I=>({id:I.id,student:{id:I.user,name:I.student_name,email:I.student_email,avatar:null},submitted_at:I.submitted_at,status:I.status,grade:I.grade,feedback:I.feedback,is_late:I.is_late,answers:I.question_responses?I.question_responses.reduce((A,Q)=>(A[Q.question]=Q.text_answer||Q.selected_answer||Q.file_answer,A),{}):{},rubric_scores:{}}));_(E)}catch(N){console.error("Error fetching assignment data:",N),T(`   : ${((H=(U=N==null?void 0:N.response)==null?void 0:U.data)==null?void 0:H.detail)||N.message}`)}finally{R(!1)}})},[t]);const O={total:C.length,submitted:C.filter(M=>M.status==="submitted"||M.status==="graded").length,graded:C.filter(M=>M.status==="graded").length,late:C.filter(M=>M.is_late).length,averageGrade:Math.round(C.filter(M=>M.grade!==null).reduce((M,U)=>M+U.grade,0)/C.filter(M=>M.grade!==null).length)||0},q=(M,U)=>M==="submitted"?U?" ":"":M==="graded"?"":M==="pending"?"  ":" ",j=M=>{x(M),y({grade:M.grade||0,feedback:M.feedback||"",rubric_scores:M.rubric_scores||{}}),p(!0)},ee=()=>$(null,null,function*(){try{const M={grade:m.grade,feedback:m.feedback,status:"graded"};yield lr.gradeSubmission(h.id,M),_(U=>U.map(H=>H.id===h.id?oe(X({},H),{grade:m.grade,feedback:m.feedback,status:"graded",rubric_scores:m.rubric_scores}):H)),p(!1),console.log("Grade saved successfully")}catch(M){console.error("Error saving grade:",M)}}),V=(M,U)=>$(null,null,function*(){try{if(!U){console.error("No file URL provided");return}let H=U;U.startsWith("http")||(H=`http://localhost:8000${U}`);const N=document.createElement("a");N.href=H,N.download=M||"assignment_file",N.target="_blank",document.body.appendChild(N),N.click(),document.body.removeChild(N),console.log("Downloading file:",M)}catch(H){console.error("Error downloading file:",H)}}),L=C.filter(M=>a===0?!0:a===1?M.status==="submitted":a===2?M.status==="graded":a===3?M.is_late:!0);return z?e(c,{className:"assignments-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e(Qe,{size:60})}):B?o(c,{className:"assignments-container",children:[e(Be,{severity:"error",sx:{mb:2},children:B}),e(re,{onClick:()=>n("/teacher/assignments"),variant:"contained",children:"  "})]}):v?o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(jr,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:v.title})]})]}),e(nt,{sx:{mb:4,p:3,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:o(le,{container:!0,spacing:3,children:[o(le,{item:!0,xs:12,md:6,children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(zt,{sx:{color:"#ff6b6b"}}),e(f,{variant:"h6",fontWeight:600,children:v.course_title||((k=v.course)==null?void 0:k.title)})]}),(v.module_name||((G=v.module)==null?void 0:G.name))&&o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(nd,{sx:{color:"#666"}}),e(f,{variant:"body1",color:"text.secondary",children:v.module_name||((W=v.module)==null?void 0:W.name)})]}),e(f,{variant:"body1",sx:{color:"#666",lineHeight:1.6},children:v.description}),v.assignment_file&&o(c,{sx:{display:"flex",alignItems:"center",gap:1,mt:2},children:[e(Ni,{sx:{color:"#1976d2"}}),e(re,{variant:"outlined",size:"small",startIcon:e(Kn,{}),onClick:()=>V("assignment_file",v.assignment_file),sx:{color:"#1976d2",borderColor:"#1976d2"},children:"  "})]})]}),o(le,{item:!0,xs:12,md:6,children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Pn,{sx:{color:"#666"}}),o(f,{variant:"body1",children:[" : ",new Date(v.due_date).toLocaleString("en-GB")]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(wa,{sx:{color:"#666"}}),o(f,{variant:"body1",children:[": ",v.points," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Ca,{sx:{color:"#666"}}),o(f,{variant:"body1",children:[": ",v.submissions_count||C.length,"/",v.total_students||0]})]})]})]})}),o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(eo,{sx:{color:"#1976d2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary",children:O.submitted}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(jr,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:O.graded}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(cw,{sx:{color:"#f57c00",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"warning.main",children:O.late}),e(f,{variant:"caption",color:"text.secondary",children:""})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(co,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[o(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[O.averageGrade,"%"]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),e(De,{className:"assignments-tabs",children:o(zn,{value:a,onChange:(M,U)=>l(U),children:[e(mt,{label:" "}),e(mt,{label:" "}),e(mt,{label:" "}),e(mt,{label:""})]})}),e(ni,{component:De,sx:{mt:3,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",direction:"rtl"},children:o(ei,{children:[e(ti,{children:o(or,{sx:{backgroundColor:"#f8f9fa"},children:[e(be,{sx:{fontWeight:600,textAlign:"right"},children:""}),e(be,{sx:{fontWeight:600,textAlign:"right"},children:" "}),e(be,{sx:{fontWeight:600,textAlign:"center"},children:""}),e(be,{sx:{fontWeight:600,textAlign:"center"},children:""}),e(be,{sx:{fontWeight:600,textAlign:"center"},children:""}),e(be,{sx:{fontWeight:600,textAlign:"center"},children:""})]})}),e(ri,{children:L.map(M=>o(or,{hover:!0,children:[e(be,{sx:{textAlign:"right"},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2,flexDirection:"row-reverse"},children:[e(Tt,{sx:{backgroundColor:"#ff6b6b"},children:e(no,{})}),o(c,{children:[e(f,{variant:"body1",fontWeight:600,children:M.student.name}),e(f,{variant:"body2",color:"text.secondary",children:M.student.email})]})]})}),o(be,{sx:{textAlign:"right"},children:[e(f,{variant:"body2",children:new Date(M.submitted_at).toLocaleString("en-GB")}),M.is_late&&e(_e,{label:"",size:"small",color:"error",variant:"outlined",sx:{mt:.5}})]}),e(be,{sx:{textAlign:"center"},children:e(_5,{label:q(M.status,M.is_late),status:M.status,size:"small"})}),e(be,{sx:{textAlign:"center"},children:M.grade!==null?o(f,{variant:"body1",fontWeight:600,color:"primary",children:[M.grade,"/",v.points]}):e(f,{variant:"body2",color:"text.secondary",children:""})}),e(be,{sx:{textAlign:"center"},children:M.status==="graded"&&M.rubric_scores?e(c,{sx:{display:"flex",gap:1,justifyContent:"center"},children:Object.entries(M.rubric_scores).map(([U,H])=>e(Je,{title:`${U}: ${H}/5`,children:e(ba,{value:H,readOnly:!0,size:"small",sx:{direction:"ltr"}})},U))}):e(f,{variant:"body2",color:"text.secondary",children:""})}),e(be,{sx:{textAlign:"center"},children:o(c,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>j(M),sx:{color:"#ff6b6b"},children:e(Lr,{})})}),M.status==="submitted"&&e(Je,{title:" ",children:e(xe,{size:"small",onClick:()=>j(M),sx:{color:"#2e7d32"},children:e(jr,{})})}),M.answers&&Object.keys(M.answers).length>0&&e(Je,{title:"  ",children:e(xe,{size:"small",onClick:()=>{const U=Object.values(M.answers).filter(H=>typeof H=="string"&&H.includes("http"));U.length>0&&V("assignment_files.zip",U[0])},sx:{color:"#1976d2"},children:e(Kn,{})})})]})})]},M.id))})]})}),e(wr,{open:d,onClose:()=>p(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden",direction:"rtl"}},children:h&&o(Rt,{children:[o(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4,direction:"rtl"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(jr,{sx:{fontSize:28}}),e(f,{variant:"h6",fontWeight:700,children:"  "})]}),e(xe,{onClick:()=>p(!1),sx:{color:"white"},children:e(_i,{})})]}),e(vr,{sx:{p:4,backgroundColor:"#f8f9fa",direction:"rtl"},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:3,backgroundColor:"white",borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:[e(Tt,{sx:{backgroundColor:"#ff6b6b",width:56,height:56},children:e(no,{sx:{fontSize:28}})}),o(c,{sx:{flex:1},children:[e(f,{variant:"h6",fontWeight:600,color:"primary",children:h.student.name}),e(f,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:h.student.email}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mt:1},children:[e(_5,{label:q(h.status,h.is_late),status:h.status,size:"small"}),h.is_late&&e(_e,{label:"",size:"small",color:"error",variant:"outlined"})]})]})]}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,md:6,children:o(nt,{sx:{p:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(f,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:" "}),o(Rr,{dense:!0,sx:{p:0},children:[o(ir,{sx:{px:0,py:1},children:[e(fr,{sx:{minWidth:40},children:e(Pn,{sx:{color:"#0e5181"}})}),e(Ut,{primary:e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:" "}),secondary:e(f,{variant:"body2",color:"text.secondary",children:new Date(h.submitted_at).toLocaleString("ar-SA")})})]}),o(ir,{sx:{px:0,py:1},children:[e(fr,{sx:{minWidth:40},children:e(dn,{sx:{color:"#0e5181"}})}),e(Ut,{primary:e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:""}),secondary:e(f,{variant:"body2",color:"text.secondary",children:h.is_late?"":"  "})})]}),h.grade!==null&&o(ir,{sx:{px:0,py:1},children:[e(fr,{sx:{minWidth:40},children:e(wa,{sx:{color:"#0e5181"}})}),e(Ut,{primary:e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:" "}),secondary:o(f,{variant:"body2",color:"primary",fontWeight:600,children:[h.grade,"/",v.points]})})]})]})]})}),e(le,{item:!0,xs:12,md:6,children:o(nt,{sx:{p:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(f,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:""}),e(Rr,{dense:!0,sx:{p:0},children:v.questions&&v.questions.length>0?v.questions.map((M,U)=>{const H=h.answers[M.id];return o(ir,{sx:{flexDirection:"column",alignItems:"flex-start",px:0,py:2,borderBottom:U<v.questions.length-1?"1px solid #e0e0e0":"none"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%",justifyContent:"space-between"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ar,{sx:{color:"#0e5181"}}),o(f,{variant:"subtitle2",fontWeight:600,color:"primary",children:[" ",U+1]})]}),M.points&&e(_e,{label:`${M.points} `,size:"small",variant:"outlined",sx:{backgroundColor:"#f5f5f5"}})]}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,width:"100%"},children:M.text}),o(c,{sx:{width:"100%",pl:2},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:600},children:" :"}),H?e(c,{children:typeof H=="string"&&H.includes("http")?o(c,{sx:{display:"flex",alignItems:"center",gap:1,p:2,backgroundColor:"#f8f9fa",borderRadius:1,border:"1px solid #e0e0e0"},children:[e(Ni,{sx:{color:"#1976d2"}}),e(f,{variant:"body2",sx:{flex:1},children:" "}),e(xe,{size:"small",onClick:()=>V(`question_${U+1}_file`,H),sx:{color:"#1976d2"},children:e(Kn,{})})]}):e(f,{variant:"body2",sx:{p:2,backgroundColor:"#f8f9fa",borderRadius:1,border:"1px solid #e0e0e0",lineHeight:1.6},children:H})}):e(f,{variant:"body2",color:"error",sx:{p:2,backgroundColor:"#ffebee",borderRadius:1,border:"1px solid #ffcdd2"},children:"  "})]})]},M.id)}):e(ir,{sx:{px:0,py:2},children:e(Ut,{primary:e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:"    "}),secondary:e(f,{variant:"body2",color:"text.secondary",children:"          "})})})})]})})]}),e(Vt,{sx:{my:2}}),o(nt,{sx:{p:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[e(wa,{sx:{color:"primary.main",fontSize:28}}),e(f,{variant:"h6",sx:{color:"primary.main",fontWeight:600},children:" "})]}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,md:9,children:o(nt,{sx:{p:4,backgroundColor:"#f8f9fa",border:"1px solid #e0e0e0"},children:[e(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",mb:4},children:" "}),o(le,{container:!0,spacing:4,children:[e(le,{item:!0,xs:12,md:5,children:o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(c,{children:[o(f,{variant:"body1",gutterBottom:!0,sx:{fontWeight:600,color:"text.secondary",mb:2},children:[" ( ",v.points,")"]}),e(ze,{fullWidth:!0,type:"number",variant:"outlined",value:m.grade,onChange:M=>y(U=>oe(X({},U),{grade:Number(M.target.value)})),inputProps:{min:0,max:v.points,step:.5},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white",fontSize:"1.1rem"}}})]}),o(c,{sx:{p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[o(f,{variant:"h3",fontWeight:700,color:"primary",children:[v.points>0?Math.round(m.grade/v.points*100):0,"%"]}),e(f,{variant:"body1",color:"text.secondary",sx:{mt:1},children:" "})]})]})}),e(le,{item:!0,xs:12,md:7,children:o(c,{children:[e(f,{variant:"body1",gutterBottom:!0,sx:{fontWeight:600,color:"text.secondary",mb:2},children:" "}),e(ze,{fullWidth:!0,variant:"outlined",multiline:!0,rows:12,placeholder:"   ...",value:m.feedback,onChange:M=>y(U=>oe(X({},U),{feedback:M.target.value})),sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white",fontSize:"1rem"}}})]})})]})]})}),e(le,{item:!0,xs:12,md:3,children:o(nt,{sx:{p:2,backgroundColor:"#f8f9fa",border:"1px solid #e0e0e0"},children:[e(f,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",mb:2},children:"  "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[[{key:"accuracy",label:"  ",description:"    "},{key:"completeness",label:" ",description:"   "},{key:"clarity",label:" ",description:"    "},{key:"timeliness",label:" ",description:"   "}].map(M=>o(c,{sx:{p:2,backgroundColor:"white",borderRadius:1,border:"1px solid #e0e0e0"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e(f,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:M.label}),o(f,{variant:"body2",color:"primary",fontWeight:600,children:[m.rubric_scores[M.key]||0,"/5"]})]}),e(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:M.description}),e(ba,{value:m.rubric_scores[M.key]||0,onChange:(U,H)=>{y(N=>oe(X({},N),{rubric_scores:oe(X({},N.rubric_scores),{[M.key]:H})}))},size:"small",sx:{direction:"ltr"}})]},M.key)),o(c,{sx:{p:2,backgroundColor:"primary.main",borderRadius:1,color:"white",textAlign:"center"},children:[o(f,{variant:"h6",fontWeight:700,children:[(()=>{const M=Object.values(m.rubric_scores);return(M.length>0?M.reduce((H,N)=>H+N,0)/M.length:0).toFixed(1)})(),"/5"]}),e(f,{variant:"body2",children:"  "})]})]})]})})]}),o(c,{sx:{mt:3,p:2,backgroundColor:"#e3f2fd",borderRadius:1,border:"1px solid #bbdefb"},children:[e(f,{variant:"subtitle2",fontWeight:600,color:"primary",gutterBottom:!0,children:" :"}),o(f,{variant:"body2",color:"text.secondary",children:[": ",m.grade,"/",v.points," | : ",v.points>0?Math.round(m.grade/v.points*100):0,"% |   : ",(()=>{const M=Object.values(m.rubric_scores);return(M.length>0?M.reduce((H,N)=>H+N,0)/M.length:0).toFixed(1)})(),"/5"]})]})]})]})}),o($r,{sx:{p:3,backgroundColor:"#f8f9fa",direction:"rtl"},children:[e(re,{onClick:()=>p(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600,"&:hover":{borderColor:"#757575",color:"#757575"}},children:""}),e(re,{variant:"contained",onClick:ee,sx:{borderRadius:2,px:4,py:1.5,fontWeight:700,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:" "})]})]})})]}):o(c,{className:"assignments-container",children:[e(Be,{severity:"warning",sx:{mb:2},children:"     "}),e(re,{onClick:()=>n("/teacher/assignments"),variant:"contained",children:"  "})]})},tW=()=>{const{assignmentId:t,submissionId:n}=cr(),a=ct(),[l,d]=w.useState(""),[p,h]=w.useState(""),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,C]=w.useState(null),[_,z]=w.useState(!0),[R,B]=w.useState(null);w.useEffect(()=>{n&&t&&$(null,null,function*(){z(!0),B(null);try{const q=yield lr.getSubmissionById(n);v(q),d(q.grade||""),h(q.feedback||"");const j=yield lr.getAssignmentById(t);C(j)}catch(q){console.error("Error fetching submission data:",q),B("   .    .")}finally{z(!1)}})},[n,t]);const T=()=>$(null,null,function*(){if(!l||l<0||l>((S==null?void 0:S.points)||100)){Xp.error("   ");return}m(!0);try{const O={grade:Number(l),feedback:p,status:"graded"};yield lr.gradeSubmission(n,O),Xp.success({content:o("span",{style:{fontSize:18},children:[e(J1,{twoToneColor:"#52c41a",style:{marginLeft:8,fontSize:22}}),"   !"]}),duration:2.5,style:{direction:"rtl"}}),setTimeout(()=>{a(`/teacher/assignments/${t}/submissions`)},1500)}catch(O){console.error("Error saving grade:",O),Xp.error("    .    .")}finally{m(!1)}});return _?o("div",{className:"assignments-container creative-submit",style:{maxWidth:600,textAlign:"center"},children:[e(X6,{size:"large"}),e(vi.Text,{style:{display:"block",marginTop:16},children:"   ..."})]}):R?o("div",{className:"assignments-container creative-submit",style:{maxWidth:600},children:[e(K1,{message:"",description:R,type:"error",showIcon:!0,style:{marginBottom:16}}),e(Ns,{icon:e(Gp,{}),onClick:()=>a(`/teacher/assignments/${t}/submissions`),children:" "})]}):y?e("div",{className:"assignments-container creative-submit",style:{maxWidth:600},children:o(J6,{className:"creative-card",title:o("span",{style:{fontSize:20,fontWeight:700,color:"#5e35b1",display:"flex",alignItems:"center",gap:8},children:[e(Z6,{style:{color:"#7c4dff",fontSize:24}})," : ",y.student_name||""]}),headStyle:{background:"linear-gradient(90deg, #ede7f6 0%, #fff 100%)",borderRadius:"12px 12px 0 0"},bodyStyle:{background:"linear-gradient(120deg, #f3e5f5 0%, #fff 100%)",borderRadius:12},extra:e(Ns,{icon:e(Gp,{}),onClick:()=>a(`/teacher/assignments/${t}/submissions`),size:"small",children:""}),children:[o("p",{style:{fontSize:15,color:"#333",marginBottom:8},children:[e("b",{children:" :"})," ",new Date(y.submitted_at).toLocaleString("ar-EG")]}),e(K6,{color:y.is_late?"red":"blue",style:{fontSize:15,borderRadius:8},children:y.is_late?"":""}),S&&o("p",{style:{fontSize:15,color:"#333",marginBottom:8},children:[e("b",{children:":"})," ",S.title]}),y.submission_text&&o(Rt,{children:[o(vi.Paragraph,{style:{marginTop:16,fontSize:16,color:"#5e35b1",fontWeight:600},children:[e(zu,{style:{color:"#7c4dff",marginLeft:6}}),"  :"]}),e(vi.Paragraph,{style:{margin:"0 0 18px 0",fontSize:16,color:"#333",background:"#f8fafc",borderRadius:8,padding:12,boxShadow:"0 1px 8px 0 rgba(126,87,194,0.07)"},children:y.submission_text})]}),y.submitted_file&&o("div",{style:{marginBottom:16},children:[e(vi.Text,{strong:!0,style:{display:"block",marginBottom:8},children:" :"}),e(Ns,{type:"link",icon:e(zu,{}),onClick:()=>window.open(y.submitted_file,"_blank"),children:" "})]}),y.question_responses&&y.question_responses.length>0&&o(Rt,{children:[o(vi.Paragraph,{style:{marginTop:16,fontSize:16,color:"#5e35b1",fontWeight:600},children:[e(zu,{style:{color:"#7c4dff",marginLeft:6}}),"    :"]}),y.question_responses.map((O,q)=>(console.log(`Response ${q}:`,O),o("div",{style:{marginBottom:16,padding:12,background:"#f8fafc",borderRadius:8,border:"1px solid #e0e0e0"},children:[o(vi.Text,{strong:!0,style:{display:"block",marginBottom:8,color:"#5e35b1"},children:[" ",q+1,": ",O.question_text||""]}),O.text_answer&&o(vi.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#333"},children:[e("strong",{children:" :"})," ",O.text_answer]}),O.selected_answer&&o(vi.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#333"},children:[e("strong",{children:" :"}),O.selected_answer_text||(O.selected_answer&&typeof O.selected_answer=="object"?O.selected_answer.text:O.selected_answer)||" "]}),O.selected_answer&&typeof O.selected_answer=="object"&&o(vi.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#666",fontStyle:"italic"},children:[e("strong",{children:"  :"})," ID: ",O.selected_answer.id,", : ",O.selected_answer.text]}),O.selected_answer&&typeof O.selected_answer=="number"&&o(vi.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#666",fontStyle:"italic"},children:[e("strong",{children:"  :"})," ",O.selected_answer]}),O.file_answer&&o("div",{style:{margin:"8px 0"},children:[e(vi.Text,{strong:!0,style:{display:"block",marginBottom:4},children:" :"}),e(Ns,{type:"link",icon:e(zu,{}),onClick:()=>window.open(O.file_answer,"_blank"),size:"small",children:" "})]}),O.points_earned!==void 0&&o(vi.Text,{style:{display:"block",marginTop:8,color:"#52c41a",fontWeight:600},children:[" : ",O.points_earned]}),o("div",{style:{marginTop:8,padding:8,background:"#f0f0f0",borderRadius:4,fontSize:12,color:"#666"},children:[e("strong",{children:"Debug Info:"}),e("br",{}),"selected_answer: ",JSON.stringify(O.selected_answer),e("br",{}),"selected_answer_text: ",O.selected_answer_text,e("br",{}),"text_answer: ",O.text_answer,e("br",{}),"file_answer: ",O.file_answer]})]},O.id||q)))]}),e(Z1,{type:"number",placeholder:"",value:l,onChange:O=>d(O.target.value),style:{marginBottom:12,width:120,borderRadius:8,border:"1.5px solid #b39ddb",background:"#f3e5f5"},min:0,max:(S==null?void 0:S.points)||100}),e(Z1.TextArea,{placeholder:" ",value:p,onChange:O=>h(O.target.value),rows:3,style:{marginBottom:12,borderRadius:8,border:"1.5px solid #b39ddb",background:"#f3e5f5"}}),o(Ns,{type:"primary",loading:x,onClick:T,className:"creative-submit-btn",disabled:!l||l<0||l>((S==null?void 0:S.points)||100),children:[e(J1,{twoToneColor:"#fff",style:{marginLeft:6,fontSize:20}})," "]})]})}):o("div",{className:"assignments-container creative-submit",style:{maxWidth:600},children:[e(K1,{message:"",description:"     ",type:"warning",showIcon:!0,style:{marginBottom:16}}),e(Ns,{icon:e(Gp,{}),onClick:()=>a(`/teacher/assignments/${t}/submissions`),children:" "})]})},rW=te(nt)(({theme:t})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:"1px solid #e0e0e0","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"}})),nW=()=>{var G,W,M;const{assignmentId:t}=cr(),n=ct(),[a,l]=w.useState(0),[d,p]=w.useState({answers:{},files:{},comments:""}),[h,x]=w.useState(!1),[m,y]=w.useState(null),[v,S]=w.useState(!0),[C,_]=w.useState(null);w.useEffect(()=>{t&&$(null,null,function*(){S(!0),_(null);try{const H=yield lr.getAssignmentById(t);console.log("Fetched assignment:",H),y(H);try{(yield lr.getMySubmissions()).find(E=>E.assignment===parseInt(t))&&_("     .     .")}catch(N){console.log("Could not check existing submissions:",N)}}catch(H){console.error("Error fetching assignment:",H),_("   .    .")}finally{S(!1)}})},[t]);const z=m?new Date>new Date(m.due_date):!1,R=m?m.is_active&&(!z||m.allow_late_submissions):!1,B=(U,H)=>$(null,null,function*(){try{if(!H){console.error("No file URL provided");return}let N=H;H.startsWith("http")||(N=`http://localhost:8000${H}`);const Y=document.createElement("a");Y.href=N,Y.download=U||"assignment_file",Y.target="_blank",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),console.log("Downloading file:",U)}catch(N){console.error("Error downloading file:",N)}}),T=[{label:" ",description:"   "},{label:"  ",description:"   "},{label:" ",description:"    "},{label:" ",description:"   "}],O=()=>{l(U=>U+1)},q=()=>{l(U=>U-1)},j=(U,H)=>{p(N=>oe(X({},N),{answers:oe(X({},N.answers),{[U]:H})}))},ee=(U,H)=>{p(N=>oe(X({},N),{files:oe(X({},N.files),{[U]:H})}))},V=()=>$(null,null,function*(){var U,H;if(!C){x(!0);try{const N={assignment:t,submission_text:d.comments||"",submitted_file:d.files.main||null};if(m.has_questions&&m.questions){const E=[];m.questions.forEach(I=>{const A=d.answers[I.id],Q=d.files[I.id];if(console.log(`Processing question ${I.id} (${I.question_type}): answer=${A}, file=${Q}`),A||Q){let J=null,P=null;I.question_type==="multiple_choice"||I.question_type==="true_false"?(P=A,console.log(`Setting selected_answer for ${I.question_type}: ${P}`)):(I.question_type==="short_answer"||I.question_type==="essay")&&(J=A,console.log(`Setting text_answer for ${I.question_type}: ${J}`));const ie={question:I.id,text_answer:J,selected_answer:P,file_answer:Q||null};console.log(`Question ${I.id} (${I.question_type}):`,ie),E.push(ie)}}),E.length>0&&(N.question_responses=E)}console.log("Submitting assignment with payload:",N);const Y=yield lr.createSubmission(N);console.log("Submission response:",Y),n("/student/assignments")}catch(N){if(console.error("Error submitting assignment:",N),((U=N.response)==null?void 0:U.status)===400){const Y=N.response.data;Y.non_field_errors&&Y.non_field_errors.length>0?_(Y.non_field_errors[0]):Y.detail?_(Y.detail):_("  .    .")}else((H=N.response)==null?void 0:H.status)===500?_("   .     ."):_("    .    .")}finally{x(!1)}}}),L=U=>{switch(U){case"multiple_choice":return e(l0,{});case"true_false":return e(s0,{});case"short_answer":case"essay":return e(dw,{});case"file_upload":return e(Ni,{});default:return e(ar,{})}},k=U=>{var H;switch(U.question_type){case"multiple_choice":return o(Wt,{fullWidth:!0,children:[e(Ot,{children:"  "}),e(Bt,{value:d.answers[U.id]||"",onChange:N=>j(U.id,N.target.value),label:"  ",children:(H=U.answers)==null?void 0:H.map(N=>e(We,{value:N.id,children:N.text},N.id))})]});case"true_false":return o(Wt,{fullWidth:!0,children:[e(Ot,{children:" "}),o(Bt,{value:d.answers[U.id]||"",onChange:N=>j(U.id,N.target.value),label:" ",children:[e(We,{value:"true",children:""}),e(We,{value:"false",children:""})]})]});case"short_answer":return e(ze,{fullWidth:!0,label:" ",variant:"outlined",multiline:!0,rows:2,value:d.answers[U.id]||"",onChange:N=>j(U.id,N.target.value)});case"essay":return e(ze,{fullWidth:!0,label:"  ",variant:"outlined",multiline:!0,rows:6,value:d.answers[U.id]||"",onChange:N=>j(U.id,N.target.value)});case"file_upload":return o(c,{sx:{textAlign:"center",p:3,border:"2px dashed #e0e0e0",borderRadius:2},children:[e(Y1,{sx:{fontSize:48,color:"#666",mb:2}}),e(f,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"     "}),o(re,{variant:"outlined",component:"label",startIcon:e(Ni,{}),sx:{mt:2},children:[" ",e("input",{type:"file",hidden:!0,onChange:N=>ee(U.id,N.target.files[0]),accept:".pdf,.doc,.docx,.txt"})]}),d.files[U.id]&&o(f,{variant:"body2",color:"success.main",sx:{mt:1},children:[" : ",d.files[U.id].name]})]});default:return null}};return v?e(c,{className:"assignments-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e(Qe,{size:60})}):C?o(c,{className:"assignments-container",children:[e(Be,{severity:"error",sx:{mb:2},children:C}),e(re,{onClick:()=>n("/student/assignments"),variant:"contained",children:" "})]}):m?o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #1976d2 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(Jr,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:m.title})]})]}),e(nt,{sx:{mb:4,p:3,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:o(le,{container:!0,spacing:3,children:[o(le,{item:!0,xs:12,md:6,children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(zt,{sx:{color:"#0e5181"}}),e(f,{variant:"h6",fontWeight:600,children:m.course_title||((G=m.course)==null?void 0:G.title)})]}),(m.module_name||((W=m.module)==null?void 0:W.name))&&o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(nd,{sx:{color:"#666"}}),e(f,{variant:"body1",color:"text.secondary",children:m.module_name||((M=m.module)==null?void 0:M.name)})]}),e(f,{variant:"body1",sx:{color:"#666",lineHeight:1.6,mb:2},children:m.description})]}),o(le,{item:!0,xs:12,md:6,children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(Pn,{sx:{color:"#666"}}),o(f,{variant:"body1",children:[" : ",new Date(m.due_date).toLocaleString("en-GB")]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(wa,{sx:{color:"#666"}}),o(f,{variant:"body1",children:[": ",m.points," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[e(ar,{sx:{color:"#666"}}),o(f,{variant:"body1",children:[" : ",m.questions_count||0]})]}),m.assignment_file&&e(re,{variant:"outlined",startIcon:e(Kn,{}),onClick:()=>B("assignment_file",m.assignment_file),sx:{mt:1,color:"#1976d2",borderColor:"#1976d2"},children:"  "})]})]})}),z&&o(Be,{severity:"warning",sx:{mb:4},children:[e(f,{variant:"body1",fontWeight:600,children:"!   "}),o(f,{variant:"body2",children:["  : ",new Date(m.due_date).toLocaleString("en-GB"),m.allow_late_submissions&&` -   ${m.late_submission_penalty}%  `]})]}),e(De,{sx:{mb:4,p:3,borderRadius:3},children:e(em,{activeStep:a,orientation:"vertical",children:T.map((U,H)=>o(zc,{children:[o(Ec,{children:[e(f,{variant:"h6",fontWeight:600,children:U.label}),e(f,{variant:"body2",color:"text.secondary",children:U.description})]}),e(Rc,{children:o(c,{sx:{mb:2},children:[H===0&&o(c,{children:[e(f,{variant:"body1",paragraph:!0,children:"         ."}),e(f,{variant:"body1",paragraph:!0,children:"         ."})]}),H===1&&o(c,{children:[e(f,{variant:"h6",gutterBottom:!0,children:" "}),m.questions&&m.questions.length>0?e(Rr,{children:m.questions.map((N,Y)=>e(ir,{sx:{mb:2,p:0},children:o(rW,{sx:{width:"100%",p:3},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[L(N.question_type),o(f,{variant:"h6",fontWeight:600,children:[" ",Y+1]}),e(_e,{label:`${N.points} `,size:"small",color:"primary",variant:"outlined"}),N.is_required&&e(_e,{label:"",size:"small",color:"error",variant:"outlined"})]}),e(f,{variant:"body1",paragraph:!0,children:N.text}),N.explanation&&e(Be,{severity:"info",sx:{mb:2},children:e(f,{variant:"body2",children:N.explanation})}),k(N)]})},N.id))}):e(Be,{severity:"info",children:e(f,{variant:"body1",children:"    .         ."})})]}),H===2&&o(c,{children:[e(f,{variant:"h6",gutterBottom:!0,children:"  "}),e(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"       ."}),m.has_file_upload&&o(c,{sx:{textAlign:"center",p:3,border:"2px dashed #e0e0e0",borderRadius:2},children:[e(Y1,{sx:{fontSize:48,color:"#666",mb:2}}),e(f,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"     "}),o(re,{variant:"outlined",component:"label",startIcon:e(Ni,{}),sx:{mt:2},children:[" ",e("input",{type:"file",hidden:!0,onChange:N=>ee("main",N.target.files[0]),accept:".pdf,.doc,.docx,.txt"})]}),d.files.main&&o(f,{variant:"body2",color:"success.main",sx:{mt:1},children:[" : ",d.files.main.name]})]})]}),H===3&&o(c,{children:[e(f,{variant:"h6",gutterBottom:!0,children:" "}),e(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"    ."}),e(ze,{fullWidth:!0,label:"  ()",variant:"outlined",multiline:!0,rows:3,value:d.comments,onChange:N=>p(Y=>oe(X({},Y),{comments:N.target.value})),sx:{mt:2}})]}),o(c,{sx:{mt:2},children:[e(re,{variant:"contained",onClick:O,sx:{mr:1},children:H===T.length-1?"":""}),e(re,{disabled:H===0,onClick:q,sx:{mr:1},children:""})]})]})})]},U.label))})}),a===T.length&&o(De,{sx:{p:3,borderRadius:3,textAlign:"center"},children:[e(f,{variant:"h6",gutterBottom:!0,children:"  "}),e(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"       ."}),C&&e(Be,{severity:"error",sx:{mb:2},children:C}),o(c,{sx:{display:"flex",gap:2,justifyContent:"center",mt:3},children:[e(re,{variant:"outlined",onClick:()=>l(0),startIcon:e(_i,{}),children:" "}),e(re,{variant:"contained",onClick:V,disabled:h||!R||C,startIcon:h?e(Qe,{size:20}):e(Rh,{}),sx:{background:"linear-gradient(135deg, #0e5181 0%, #1976d2 100%)","&:hover":{background:"linear-gradient(135deg, #5e35b1 0%, #8e24aa 100%)"}},children:h?" ...":" "})]})]})]}):o(c,{className:"assignments-container",children:[e(Be,{severity:"warning",sx:{mb:2},children:"     "}),e(re,{onClick:()=>n("/student/assignments"),variant:"contained",children:" "})]})};te(nt)(({theme:t})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:"1px solid #e0e0e0","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"}}));const iW=()=>{const t=ct(),[n,a]=w.useState(0),[l,d]=w.useState({title:"",description:"",course:"",module:"",due_date:"",duration:60,points:100,allow_late_submissions:!1,late_submission_penalty:0,has_questions:!1,has_file_upload:!1,assignment_file:null,max_attempts:1,is_active:!0}),[p,h]=w.useState(!1),[x,m]=w.useState([]),[y,v]=w.useState([]),[S,C]=w.useState(!1),[_,z]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{$(null,null,function*(){try{const ee=yield An.getCourses(),L=(Array.isArray(ee==null?void 0:ee.results)?ee.results:Array.isArray(ee)?ee:(ee==null?void 0:ee.courses)||[]).map(k=>({id:k.id,title:k.title}));m(L)}catch(ee){m([])}})},[]),w.useEffect(()=>{$(null,null,function*(){const ee=l.course;if(!ee){v([]);return}C(!0);try{const V=yield mr.getModules(ee),k=(Array.isArray(V==null?void 0:V.results)?V.results:Array.isArray(V)?V:(V==null?void 0:V.modules)||[]).map(G=>({id:G.id,title:G.name||G.title||` ${G.id}`}));v(k)}catch(V){v([])}finally{C(!1)}})},[l.course]);const R=[{label:"  ",description:"   "},{label:" ",description:"  "},{label:" ",description:"  "}],B=()=>{a(j=>j+1)},T=()=>{a(j=>j-1)},O=(j,ee)=>{d(V=>oe(X({},V),{[j]:ee}))},q=()=>$(null,null,function*(){var j,ee,V;h(!0);try{if(!l.title||!l.description||!l.course||!l.due_date){z({open:!0,message:"     (    )",severity:"error"});return}const L=localStorage.getItem("token");console.log("Token exists:",!!L),console.log("User data:",localStorage.getItem("user"));const k={title:l.title,description:l.description,course:l.course,module:l.module||null,due_date:l.due_date,points:l.points,allow_late_submissions:l.allow_late_submissions,late_submission_penalty:l.late_submission_penalty,has_questions:l.has_questions,has_file_upload:l.has_file_upload,assignment_file:l.assignment_file,is_active:l.is_active};console.log("Sending payload:",k);const G=yield lr.createAssignment(k);console.log("Assignment creation response:",G);const W=G==null?void 0:G.id;if(console.log("Assignment created with ID:",W),!W){console.error("Could not get assignment ID from response:",G),z({open:!0,message:"           .",severity:"warning"}),t("/teacher/assignments");return}const M=l.assignment_file?"   ":"";z({open:!0,message:`   "${l.title}" ${M}.        .`,severity:"success"}),setTimeout(()=>{t("/teacher/assignments")},2e3)}catch(L){console.error("Error creating assignment:",L);let k="  .   .";if((j=L==null?void 0:L.response)!=null&&j.data){const G=L.response.data;G.detail?k=G.detail:G.error?k=G.error:typeof G=="object"&&(k=`  :
${Object.entries(G).map(([M,U])=>`${M}: ${Array.isArray(U)?U.join(", "):U}`).join(`
`)}`)}else L!=null&&L.message&&(k=L.message);((ee=L==null?void 0:L.response)==null?void 0:ee.status)===404?k="   API endpoint.     .":((V=L==null?void 0:L.response)==null?void 0:V.status)===500&&(k="  .    ."),z({open:!0,message:k,severity:"error"})}finally{h(!1)}});return o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(uh,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"  "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"   -    "})]})]}),e(De,{sx:{mb:4,p:3,borderRadius:3},children:e(em,{activeStep:n,orientation:"vertical",children:R.map((j,ee)=>o(zc,{children:[o(Ec,{children:[e(f,{variant:"h6",fontWeight:600,children:j.label}),e(f,{variant:"body2",color:"text.secondary",children:j.description})]}),e(Rc,{children:o(c,{sx:{mb:2},children:[ee===0&&o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e(ze,{fullWidth:!0,label:" ",variant:"outlined",value:l.title,onChange:V=>O("title",V.target.value),required:!0}),e(ze,{fullWidth:!0,label:" ",variant:"outlined",multiline:!0,rows:4,value:l.description,onChange:V=>O("description",V.target.value),required:!0}),o(Wt,{fullWidth:!0,children:[e(Ot,{children:""}),e(Bt,{value:l.course,onChange:V=>O("course",V.target.value),label:"",children:x.map(V=>e(We,{value:V.id,children:V.title},V.id))})]}),l.course&&o(Wt,{fullWidth:!0,children:[e(Ot,{children:""}),o(Bt,{value:l.module,onChange:V=>O("module",V.target.value),label:"",children:[e(We,{value:"",children:""}),y.map(V=>e(We,{value:V.id,disabled:S,children:V.title},V.id))]})]})]}),ee===1&&o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(le,{container:!0,spacing:2,children:[e(le,{xs:12,md:6,children:e(ze,{fullWidth:!0,label:"  ",type:"datetime-local",variant:"outlined",value:l.due_date,onChange:V=>O("due_date",V.target.value),InputLabelProps:{shrink:!0},required:!0})}),e(le,{xs:12,md:6,children:e(ze,{fullWidth:!0,label:" ()",type:"number",variant:"outlined",value:l.duration,onChange:V=>O("duration",Number(V.target.value)),inputProps:{min:1}})})]}),o(le,{container:!0,spacing:2,children:[e(le,{xs:12,md:6,children:e(ze,{fullWidth:!0,label:" ",type:"number",variant:"outlined",value:l.points,onChange:V=>O("points",Number(V.target.value)),inputProps:{min:1}})}),e(le,{xs:12,md:6,children:e(ze,{fullWidth:!0,label:"  ",type:"number",variant:"outlined",value:l.max_attempts,onChange:V=>O("max_attempts",Number(V.target.value)),inputProps:{min:1}})})]}),e(wt,{control:e(xr,{checked:l.allow_late_submissions,onChange:V=>O("allow_late_submissions",V.target.checked)}),label:"  "}),l.allow_late_submissions&&e(ze,{fullWidth:!0,label:"   (%)",type:"number",variant:"outlined",value:l.late_submission_penalty,onChange:V=>O("late_submission_penalty",Number(V.target.value)),inputProps:{min:0,max:100}}),e(wt,{control:e(xr,{checked:l.has_questions,onChange:V=>O("has_questions",V.target.checked)}),label:"   (  )"}),e(wt,{control:e(xr,{checked:l.has_file_upload,onChange:V=>O("has_file_upload",V.target.checked)}),label:"  "}),l.has_file_upload&&o(c,{sx:{mt:2},children:[e("input",{accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png",style:{display:"none"},id:"assignment-file-upload",type:"file",onChange:V=>{const L=V.target.files[0];L&&O("assignment_file",L)}}),e("label",{htmlFor:"assignment-file-upload",children:e(re,{variant:"outlined",component:"span",startIcon:e(Ni,{}),sx:{mb:2},children:"  "})}),l.assignment_file&&o(c,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[e(Ni,{color:"success"}),o(f,{variant:"body2",color:"success.main",children:[" : ",l.assignment_file.name]})]})]})]}),ee===2&&o(c,{children:[e(f,{variant:"h6",gutterBottom:!0,children:" "}),o(nt,{sx:{p:3,mb:3},children:[e(f,{variant:"h5",fontWeight:600,gutterBottom:!0,children:l.title||" "}),e(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:l.description||" "}),o(le,{container:!0,spacing:2,children:[o(le,{xs:12,md:6,children:[o(f,{variant:"body2",color:"text.secondary",children:[": ",l.course||" "]}),o(f,{variant:"body2",color:"text.secondary",children:[": ",l.module||" "]})]}),o(le,{xs:12,md:6,children:[o(f,{variant:"body2",color:"text.secondary",children:[" : ",l.due_date?new Date(l.due_date).toLocaleString("en-GB"):" "]}),o(f,{variant:"body2",color:"text.secondary",children:[": ",l.points," "]})]})]})]}),e(Be,{severity:"info",sx:{mb:2},children:o(f,{variant:"body2",children:[e("strong",{children:":"}),"          ."]})}),e(f,{variant:"body2",color:"text.secondary",children:"       ."})]}),o(c,{sx:{mt:2},children:[e(re,{variant:"contained",onClick:()=>ee===R.length-1?q():B(),sx:{mr:1},children:ee===R.length-1?" ":""}),e(re,{disabled:ee===0,onClick:T,sx:{mr:1},children:""})]})]})})]},j.label))})}),n===R.length&&o(De,{sx:{p:3,borderRadius:3,textAlign:"center"},children:[e(f,{variant:"h6",gutterBottom:!0,children:"  "}),e(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"       ."}),o(c,{sx:{display:"flex",gap:2,justifyContent:"center",mt:3},children:[e(re,{variant:"outlined",onClick:()=>a(0),startIcon:e(_i,{}),children:" "}),e(re,{variant:"contained",onClick:q,disabled:p,startIcon:p?e(Sr,{}):e(uh,{}),sx:{background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)","&:hover":{background:"linear-gradient(135deg, #ff5252 0%, #e64a19 100%)"}},children:p?" ...":" "})]})]}),e(un,{open:_.open,autoHideDuration:6e3,onClose:()=>z(j=>oe(X({},j),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:()=>z(j=>oe(X({},j),{open:!1})),severity:_.severity,sx:{width:"100%"},children:_.message})})]})},aW=()=>{const t=ct(),{assignmentId:n}=cr(),[a,l]=w.useState(0),[d,p]=w.useState({title:"",description:"",course:"",module:"",due_date:"",duration:60,points:100,allow_late_submissions:!1,late_submission_penalty:0,has_questions:!1,has_file_upload:!1,assignment_file:null,max_attempts:1,is_active:!0}),[h,x]=w.useState(!1),[m,y]=w.useState(null),[v,S]=w.useState([]),[C,_]=w.useState([]),[z,R]=w.useState(!1);w.useEffect(()=>{$(null,null,function*(){try{const ee=yield An.getCourses(),L=(Array.isArray(ee==null?void 0:ee.results)?ee.results:Array.isArray(ee)?ee:(ee==null?void 0:ee.courses)||[]).map(k=>({id:k.id,title:k.title}));S(L)}catch(ee){S([])}}),n&&$(null,null,function*(){try{const ee=yield lr.getAssignmentById(n);p({title:ee.title||"",description:ee.description||"",course:ee.course||"",module:ee.module||"",due_date:ee.due_date?e_(ee.due_date).format("YYYY-MM-DDTHH:mm"):"",duration:ee.duration||60,points:ee.points||100,allow_late_submissions:!!ee.allow_late_submissions,late_submission_penalty:ee.late_submission_penalty||0,has_questions:!!ee.has_questions,has_file_upload:!!ee.has_file_upload,assignment_file:null,max_attempts:ee.max_attempts||1,is_active:ee.is_active!==!1})}catch(ee){y("   ")}})},[n]),w.useEffect(()=>{$(null,null,function*(){if(!d.course){_([]);return}R(!0);try{const j=yield mr.getModules(d.course),V=(Array.isArray(j==null?void 0:j.results)?j.results:Array.isArray(j)?j:(j==null?void 0:j.modules)||[]).map(L=>({id:L.id,title:L.name||L.title||` ${L.id}`}));_(V)}catch(j){_([])}finally{R(!1)}})},[d.course]);const B=()=>l(q=>q+1),T=()=>l(q=>q-1),O=()=>$(null,null,function*(){x(!0),y(null);try{yield lr.updateAssignment(n,{title:d.title,description:d.description,course:d.course,module:d.module||null,due_date:d.due_date,points:d.points,duration:d.duration,max_attempts:d.max_attempts,allow_late_submissions:d.allow_late_submissions,late_submission_penalty:d.late_submission_penalty,has_questions:d.has_questions,has_file_upload:d.has_file_upload,assignment_file:d.assignment_file,is_active:d.is_active}),t("/teacher/assignments")}catch(q){y("  ")}finally{x(!1)}});return o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(Jr,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"   "})]})]}),o(De,{sx:{mb:4,p:3,borderRadius:3},children:[m&&e(Be,{severity:"error",sx:{mb:2},children:m}),o(em,{activeStep:a,orientation:"vertical",children:[o(zc,{children:[o(Ec,{children:[e(f,{variant:"h6",fontWeight:600,children:"  "}),e(f,{variant:"body2",color:"text.secondary",children:"   "})]}),o(Rc,{children:[o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e(ze,{fullWidth:!0,label:" ",variant:"outlined",value:d.title,onChange:q=>p(oe(X({},d),{title:q.target.value})),required:!0}),e(ze,{fullWidth:!0,label:" ",variant:"outlined",multiline:!0,rows:4,value:d.description,onChange:q=>p(oe(X({},d),{description:q.target.value})),required:!0}),o(Wt,{fullWidth:!0,children:[e(Ot,{children:""}),e(Bt,{value:d.course,onChange:q=>p(oe(X({},d),{course:q.target.value})),label:"",children:v.map(q=>e(We,{value:q.id,children:q.title},q.id))})]}),!!d.course&&o(Wt,{fullWidth:!0,children:[e(Ot,{children:""}),o(Bt,{value:d.module,onChange:q=>p(oe(X({},d),{module:q.target.value})),label:"",children:[e(We,{value:"",children:""}),C.map(q=>e(We,{value:q.id,disabled:z,children:q.title},q.id))]})]})]}),o(c,{sx:{mt:2},children:[e(re,{variant:"contained",onClick:B,sx:{mr:1},children:""}),e(re,{disabled:!0,onClick:T,sx:{mr:1},children:""})]})]})]}),o(zc,{children:[o(Ec,{children:[e(f,{variant:"h6",fontWeight:600,children:" "}),e(f,{variant:"body2",color:"text.secondary",children:"  "})]}),o(Rc,{children:[o(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:[o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,md:6,children:e(ze,{fullWidth:!0,label:"  ",type:"datetime-local",variant:"outlined",value:d.due_date,onChange:q=>p(oe(X({},d),{due_date:q.target.value})),InputLabelProps:{shrink:!0},required:!0})}),e(le,{item:!0,xs:12,md:6,children:e(ze,{fullWidth:!0,label:" ()",type:"number",variant:"outlined",value:d.duration,onChange:q=>p(oe(X({},d),{duration:Number(q.target.value)})),inputProps:{min:1}})})]}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,md:6,children:e(ze,{fullWidth:!0,label:" ",type:"number",variant:"outlined",value:d.points,onChange:q=>p(oe(X({},d),{points:Number(q.target.value)})),inputProps:{min:1}})}),e(le,{item:!0,xs:12,md:6,children:e(ze,{fullWidth:!0,label:"  ",type:"number",variant:"outlined",value:d.max_attempts,onChange:q=>p(oe(X({},d),{max_attempts:Number(q.target.value)})),inputProps:{min:1}})})]}),e(wt,{control:e(xr,{checked:d.allow_late_submissions,onChange:q=>p(oe(X({},d),{allow_late_submissions:q.target.checked}))}),label:"  "}),d.allow_late_submissions&&e(ze,{fullWidth:!0,label:"   (%)",type:"number",variant:"outlined",value:d.late_submission_penalty,onChange:q=>p(oe(X({},d),{late_submission_penalty:Number(q.target.value)})),inputProps:{min:0,max:100}}),e(wt,{control:e(xr,{checked:d.has_questions,onChange:q=>p(oe(X({},d),{has_questions:q.target.checked}))}),label:"   (  )"}),e(wt,{control:e(xr,{checked:d.has_file_upload,onChange:q=>p(oe(X({},d),{has_file_upload:q.target.checked}))}),label:"  "})]}),o(c,{sx:{mt:2},children:[e(re,{variant:"contained",onClick:B,sx:{mr:1},children:""}),e(re,{onClick:T,sx:{mr:1},children:""})]})]})]}),o(zc,{children:[o(Ec,{children:[e(f,{variant:"h6",fontWeight:600,children:" "}),e(f,{variant:"body2",color:"text.secondary",children:"  "})]}),o(Rc,{children:[o(nt,{sx:{p:3,mb:3},children:[e(f,{variant:"h5",fontWeight:600,gutterBottom:!0,children:d.title||" "}),e(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:d.description||" "}),o(le,{container:!0,spacing:2,children:[o(le,{item:!0,xs:12,md:6,children:[o(f,{variant:"body2",color:"text.secondary",children:[": ",d.course||" "]}),o(f,{variant:"body2",color:"text.secondary",children:[": ",d.module||" "]})]}),o(le,{item:!0,xs:12,md:6,children:[o(f,{variant:"body2",color:"text.secondary",children:[" : ",d.due_date||" "]}),o(f,{variant:"body2",color:"text.secondary",children:[": ",d.points," "]})]})]})]}),e(Be,{severity:"info",sx:{mb:2},children:o(f,{variant:"body2",children:[e("strong",{children:":"}),"        ."]})}),o(c,{sx:{mt:2},children:[e(re,{variant:"contained",onClick:O,disabled:h,sx:{mr:1},children:" "}),e(re,{onClick:T,sx:{mr:1},children:""})]})]})]})]})]})]})},oW=()=>{const t=ct(),{assignmentId:n}=cr(),[a,l]=w.useState(null),[d,p]=w.useState([]),[h,x]=w.useState(!0),[m,y]=w.useState({open:!1,message:"",severity:"success"}),[v,S]=w.useState(!1),[C,_]=w.useState(null),[z,R]=w.useState({text:"",question_type:"essay",points:10,explanation:"",order:1,is_required:!0,answers:[]}),B=[{value:"multiple_choice",label:"  ",icon:e(l0,{})},{value:"true_false",label:"  ",icon:e(s0,{})},{value:"short_answer",label:" ",icon:e(dw,{})},{value:"essay",label:"",icon:e(Ah,{})},{value:"file_upload",label:" ",icon:e(Ni,{})}];w.useEffect(()=>{T()},[n]);const T=()=>$(null,null,function*(){x(!0);try{const W=yield lr.getAssignmentById(n);l(W);const M=yield lr.getAssignmentQuestions(n),U=Array.isArray(M==null?void 0:M.results)?M.results:Array.isArray(M)?M:[],H=yield Promise.all(U.map(N=>$(null,null,function*(){try{const Y=yield lr.getQuestionAnswers(N.id),E=Array.isArray(Y==null?void 0:Y.results)?Y.results:Array.isArray(Y)?Y:[];return oe(X({},N),{answers:E})}catch(Y){return console.error(`Error fetching answers for question ${N.id}:`,Y),oe(X({},N),{answers:[]})}})));p(H)}catch(W){console.error("Error fetching assignment and questions:",W),y({open:!0,message:"    ",severity:"error"})}finally{x(!1)}}),O=()=>{_(null),R({text:"",question_type:"essay",points:10,explanation:"",order:d.length+1,is_required:!0,answers:[]}),S(!0)},q=W=>{_(W),R({text:W.text||"",question_type:W.question_type||"essay",points:W.points||10,explanation:W.explanation||"",order:W.order||1,is_required:W.is_required!==!1,answers:W.answers||[]}),S(!0)},j=()=>$(null,null,function*(){try{if(!z.text.trim()){y({open:!0,message:"   ",severity:"error"});return}if(C){yield lr.updateQuestion(C.id,{text:z.text,question_type:z.question_type,points:z.points,explanation:z.explanation,order:z.order,is_required:z.is_required});for(const W of z.answers)W.id?yield lr.updateAnswer(W.id,{text:W.text,is_correct:W.is_correct,explanation:W.explanation||"",order:W.order||0}):yield lr.createAnswer({question:C.id,text:W.text,is_correct:W.is_correct,explanation:W.explanation||"",order:W.order||0});y({open:!0,message:"   ",severity:"success"})}else{const W=yield lr.createQuestion({assignment:n,text:z.text,question_type:z.question_type,points:z.points,explanation:z.explanation,order:z.order,is_required:z.is_required});for(const M of z.answers)yield lr.createAnswer({question:W.id,text:M.text,is_correct:M.is_correct,explanation:M.explanation||"",order:M.order||0});y({open:!0,message:"   ",severity:"success"})}S(!1),T()}catch(W){console.error("Error saving question:",W),y({open:!0,message:"  ",severity:"error"})}}),ee=W=>$(null,null,function*(){if(window.confirm("      "))try{yield lr.deleteQuestion(W),y({open:!0,message:"   ",severity:"success"}),T()}catch(M){console.error("Error deleting question:",M),y({open:!0,message:"  ",severity:"error"})}}),V=()=>{R(W=>oe(X({},W),{answers:[...W.answers,{text:"",is_correct:!1,explanation:"",order:W.answers.length+1}]}))},L=(W,M,U)=>{R(H=>oe(X({},H),{answers:H.answers.map((N,Y)=>Y===W?oe(X({},N),{[M]:U}):N)}))},k=W=>{R(M=>oe(X({},M),{answers:M.answers.filter((U,H)=>H!==W)}))},G=W=>{const M=B.find(U=>U.value===W);return M?M.icon:e(ar,{})};return h?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(f,{children:" ..."})}):o(c,{className:"assignments-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(ar,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"  "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:(a==null?void 0:a.title)||" "})]})]}),e(c,{sx:{mb:3},children:e(re,{variant:"outlined",startIcon:e(qt,{}),onClick:()=>t("/teacher/assignments"),sx:{mb:2},children:"  "})}),o(De,{sx:{p:3,borderRadius:3},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[o(f,{variant:"h5",fontWeight:600,children:["  (",d.length,")"]}),e(re,{variant:"contained",startIcon:e(Nr,{}),onClick:O,sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)"}},children:"  "})]}),d.length===0?e(Be,{severity:"info",sx:{direction:"rtl",textAlign:"right"},children:'    .   "  "   .'}):e(Rr,{sx:{direction:"rtl"},children:d.map((W,M)=>{var U;return e(ir,{sx:{mb:2,p:0},children:o(nt,{sx:{width:"100%",p:3,direction:"rtl"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,direction:"rtl"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,direction:"rtl"},children:[G(W.question_type),o(f,{variant:"h6",fontWeight:600,sx:{textAlign:"right"},children:[" ",M+1]}),e(_e,{label:((U=B.find(H=>H.value===W.question_type))==null?void 0:U.label)||W.question_type,size:"small",variant:"outlined",sx:{mr:1}}),e(_e,{label:`${W.points} `,size:"small",color:"primary",sx:{mr:1}})]}),o(c,{sx:{display:"flex",gap:1,direction:"rtl"},children:[e(xe,{size:"small",onClick:()=>q(W),sx:{color:"#1976d2"},children:e(Tr,{})}),e(xe,{size:"small",onClick:()=>ee(W.id),sx:{color:"#d32f2f"},children:e(tn,{})})]})]}),e(f,{variant:"body1",sx:{mb:2,textAlign:"right",direction:"rtl"},children:W.text}),W.explanation&&o(f,{variant:"body2",color:"text.secondary",sx:{mb:2,textAlign:"right",direction:"rtl"},children:[e("strong",{children:":"})," ",W.explanation]}),(W.question_type==="multiple_choice"||W.question_type==="true_false")&&W.answers&&W.answers.length>0&&o(c,{sx:{mt:2,direction:"rtl"},children:[e(f,{variant:"subtitle2",fontWeight:600,sx:{mb:1,textAlign:"right"},children:":"}),e(Rr,{dense:!0,sx:{direction:"rtl"},children:W.answers.map((H,N)=>o(ir,{sx:{py:.5,direction:"rtl"},children:[e(fr,{sx:{minWidth:30,mr:1,ml:0},children:H.is_correct?e(s0,{color:"success",fontSize:"small"}):e(l0,{color:"disabled",fontSize:"small"})}),e(Ut,{primary:H.text,secondary:H.explanation,sx:{textAlign:"right",direction:"rtl"}})]},H.id))})]})]})},W.id)})})]}),o(wr,{open:v,onClose:()=>S(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(14, 81, 129, 0.1)",direction:"rtl"}},children:[e(Wr,{sx:{textAlign:"center",fontWeight:700,color:"#0e5181"},children:C?" ":"  "}),e(vr,{sx:{direction:"rtl"},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[e(ze,{fullWidth:!0,label:" ",variant:"outlined",multiline:!0,rows:3,value:z.text,onChange:W=>R(M=>oe(X({},M),{text:W.target.value})),required:!0,sx:{"& .MuiInputBase-input":{textAlign:"right",direction:"rtl"},"& .MuiInputLabel-root":{right:14,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}}}}),o(le,{container:!0,spacing:2,children:[e(le,{item:!0,xs:12,md:6,children:o(Wt,{fullWidth:!0,children:[e(Ot,{sx:{right:14,left:"auto",transformOrigin:"right"},children:" "}),e(Bt,{value:z.question_type,onChange:W=>R(M=>oe(X({},M),{question_type:W.target.value})),label:" ",sx:{"& .MuiSelect-select":{textAlign:"right",direction:"rtl"}},children:B.map(W=>e(We,{value:W.value,children:o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[W.icon,W.label]})},W.value))})]})}),e(le,{item:!0,xs:12,md:6,children:e(ze,{fullWidth:!0,label:"",type:"number",variant:"outlined",value:z.points,onChange:W=>R(M=>oe(X({},M),{points:Number(W.target.value)})),inputProps:{min:1},sx:{"& .MuiInputBase-input":{textAlign:"right",direction:"rtl"},"& .MuiInputLabel-root":{right:14,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}}}})})]}),e(ze,{fullWidth:!0,label:"  ()",variant:"outlined",multiline:!0,rows:2,value:z.explanation,onChange:W=>R(M=>oe(X({},M),{explanation:W.target.value})),sx:{"& .MuiInputBase-input":{textAlign:"right",direction:"rtl"},"& .MuiInputLabel-root":{right:14,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}}}}),e(ze,{fullWidth:!0,label:" ",type:"number",variant:"outlined",value:z.order,onChange:W=>R(M=>oe(X({},M),{order:Number(W.target.value)})),inputProps:{min:1},sx:{"& .MuiInputBase-input":{textAlign:"right",direction:"rtl"},"& .MuiInputLabel-root":{right:14,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}}}}),e(wt,{control:e(xr,{checked:z.is_required,onChange:W=>R(M=>oe(X({},M),{is_required:W.target.checked}))}),label:" ",sx:{direction:"rtl",justifyContent:"flex-end"}}),(z.question_type==="multiple_choice"||z.question_type==="true_false")&&o(Z5,{sx:{direction:"rtl"},children:[e(J5,{expandIcon:e(Eh,{}),sx:{direction:"rtl"},children:o(f,{variant:"subtitle1",fontWeight:600,sx:{textAlign:"right"},children:[" (",z.answers.length,")"]})}),e(ew,{sx:{direction:"rtl"},children:o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[z.answers.map((W,M)=>o(c,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e(ze,{fullWidth:!0,label:` ${M+1}`,variant:"outlined",size:"small",value:W.text,onChange:U=>L(M,"text",U.target.value),sx:{"& .MuiInputBase-input":{textAlign:"right",direction:"rtl"},"& .MuiInputLabel-root":{right:14,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}}}}),e(wt,{control:e(to,{checked:W.is_correct,onChange:U=>L(M,"is_correct",U.target.checked)}),label:"",sx:{direction:"rtl",justifyContent:"flex-end"}}),e(xe,{size:"small",onClick:()=>k(M),sx:{color:"#d32f2f"},children:e(tn,{})})]},M)),e(re,{variant:"outlined",startIcon:e(Nr,{}),onClick:V,size:"small",children:" "})]})})]})]})}),o($r,{sx:{direction:"rtl",justifyContent:"flex-start",flexDirection:"row-reverse"},children:[e(re,{onClick:()=>S(!1),sx:{borderColor:"#0e5181",color:"#0e5181","&:hover":{borderColor:"#e5978b",color:"#e5978b"},borderRadius:2,textTransform:"none",fontWeight:600},children:""}),e(re,{variant:"contained",onClick:j,startIcon:e(os,{}),sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)"},borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:C?" ":" "})]})]}),e(un,{open:m.open,autoHideDuration:6e3,onClose:()=>y(W=>oe(X({},W),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:()=>y(W=>oe(X({},W),{open:!1})),severity:m.severity,sx:{width:"100%"},children:m.message})})]})},Ct={getMeetings:(...n)=>$(null,[...n],function*(t={}){try{return(yield ne.get("/api/meetings/",{params:t})).data}catch(a){throw console.error("Error fetching meetings:",a),a}}),getMeeting:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/`)).data}catch(n){throw console.error("Error fetching meeting:",n),n}}),getMeetingDetails:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/meetings/${t}/`)).data}catch(n){throw console.error("Error fetching meeting details:",n),n}}),createMeeting:t=>$(null,null,function*(){try{return(yield ne.post("/api/meetings/meetings/",t)).data}catch(n){throw console.error("Error creating meeting:",n),n}}),updateMeeting:(t,n)=>$(null,null,function*(){try{return(yield ne.put(`/api/meetings/meetings/${t}/`,n)).data}catch(a){throw console.error("Error updating meeting:",a),a}}),deleteMeeting:t=>$(null,null,function*(){try{return(yield ne.delete(`/api/meetings/meetings/${t}/`)).data}catch(n){throw console.error("Error deleting meeting:",n),n}}),getMyMeetings:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/my-meetings/")).data}catch(t){throw console.error("Error fetching my meetings:",t),t}}),getUpcomingMeetings:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/upcoming/")).data}catch(t){throw console.error("Error fetching upcoming meetings:",t),t}}),searchMeetings:t=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/search/",{params:t})).data}catch(n){throw console.error("Error searching meetings:",n),n}}),getMeetingStats:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/stats/dashboard/")).data}catch(t){throw console.error("Error fetching meeting stats:",t),t}}),quickCreateMeeting:t=>$(null,null,function*(){try{return(yield ne.post("/api/meetings/quick-create/",t)).data}catch(n){throw console.error("Error quick creating meeting:",n),n}}),startLiveMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/start_live/`)).data}catch(n){throw console.error("Error starting live meeting:",n),n}}),endLiveMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/end_live/`)).data}catch(n){throw console.error("Error ending live meeting:",n),n}}),joinMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/join/`)).data}catch(n){throw console.error("Error joining meeting:",n),n}}),leaveMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/leave/`)).data}catch(n){throw console.error("Error leaving meeting:",n),n}}),markAttendance:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/mark_attendance/`)).data}catch(n){throw console.error("Error marking attendance:",n),n}}),updateParticipantAttendance:(t,n,a)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/update_attendance/`,{participant_id:n,attendance_status:a})).data}catch(l){throw console.error("Error updating participant attendance:",l),l}}),autoJoinMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/auto-join/`)).data}catch(n){throw console.error("Error auto joining meeting:",n),n}}),markAbsentParticipants:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/mark-absent/`)).data}catch(n){throw console.error("Error marking absent participants:",n),n}}),registerForMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/register/`)).data}catch(n){throw console.error("Error registering for meeting:",n),n}}),getMeetingParticipants:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/meetings/${t}/participants/`)).data}catch(n){return console.error("Error fetching meeting participants:",n),[]}}),startLiveMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/start_live/`)).data}catch(n){throw console.error("Error starting live meeting:",n),n}}),endLiveMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/end_live/`)).data}catch(n){throw console.error("Error ending live meeting:",n),n}}),getChatMessages:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/meetings/${t}/chat/`)).data}catch(n){return console.error("Error fetching chat messages:",n),[]}}),sendChatMessage:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/meetings/${t}/chat/`,{message:n})).data}catch(a){throw console.error("Error sending chat message:",a),a}}),addParticipant:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/add_participant/`,n)).data}catch(a){throw console.error("Error adding participant:",a),a}}),removeParticipant:(t,n)=>$(null,null,function*(){try{return(yield ne.delete(`/api/meetings/${t}/remove_participant/${n}/`)).data}catch(a){throw console.error("Error removing participant:",a),a}}),getMeetingChat:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/meetings/${t}/chat/`)).data}catch(n){throw console.error("Error fetching meeting chat:",n),n}}),getMeetingNotifications:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/notifications/`)).data}catch(n){throw console.error("Error fetching meeting notifications:",n),n}}),sendMeetingNotification:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/notifications/`,n)).data}catch(a){throw console.error("Error sending meeting notification:",a),a}}),getMeetingMaterials:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/materials/`)).data}catch(n){throw console.error("Error fetching meeting materials:",n),n}}),uploadMeetingMaterials:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/upload_materials/`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error uploading meeting materials:",a),a}}),downloadMeetingMaterials:(t,n)=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/download_materials/`,{params:{material_id:n},responseType:"blob"})).data}catch(a){throw console.error("Error downloading meeting materials:",a),a}}),getMeetingAttendanceReport:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/attendance_report/`)).data}catch(n){throw console.error("Error fetching meeting attendance report:",n),n}}),exportMeetingData:(t,n="pdf")=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/export/`,{params:{format:n},responseType:"blob"})).data}catch(a){throw console.error("Error exporting meeting data:",a),a}}),unregisterFromMeeting:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/unregister/`)).data}catch(n){throw console.error("Error unregistering from meeting:",n),n}}),markAttendanceWithStatus:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/mark_attendance/`,{status:n})).data}catch(a){throw console.error("Error marking attendance with status:",a),a}}),bulkMarkAttendance:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/bulk_mark_attendance/`,{attendance_data:n})).data}catch(a){throw console.error("Error bulk marking attendance:",a),a}}),getMyAttendanceStatus:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/meetings/${t}/my_attendance/`)).data}catch(n){return console.error("Error fetching my attendance status:",n),{attendance_status:"not_registered",joined_at:null,left_at:null,attendance_duration:null}}}),checkRegistrationStatus:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/meetings/${t}/check_registration/`)).data}catch(n){return console.error("Error checking registration status:",n),{is_registered:!1,meeting_id:t}}}),getAvailableMeetings:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/available-meetings/")).data}catch(t){throw console.error("Error fetching available meetings:",t),t}}),getJoinableMeetings:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/joinable-meetings/")).data}catch(t){throw console.error("Error fetching joinable meetings:",t),t}}),getTeachingMeetings:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/teaching-meetings/")).data}catch(t){throw console.error("Error fetching teaching meetings:",t),t}}),getAttendingMeetings:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/attending-meetings/")).data}catch(t){throw console.error("Error fetching attending meetings:",t),t}}),sendMeetingInvitation:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/send_invitation/`,{student_ids:n})).data}catch(a){throw console.error("Error sending meeting invitation:",a),a}}),getMeetingInvitations:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/invitations/")).data}catch(t){throw console.error("Error fetching meeting invitations:",t),t}}),acceptInvitation:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/invitations/${t}/accept/`)).data}catch(n){throw console.error("Error accepting invitation:",n),n}}),declineInvitation:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/invitations/${t}/decline/`)).data}catch(n){throw console.error("Error declining invitation:",n),n}}),getMeetingStatus:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/status/`)).data}catch(n){throw console.error("Error fetching meeting status:",n),n}}),startRecording:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/start_recording/`)).data}catch(n){throw console.error("Error starting recording:",n),n}}),stopRecording:t=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/stop_recording/`)).data}catch(n){throw console.error("Error stopping recording:",n),n}}),getMeetingRecordings:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/recordings/`)).data}catch(n){throw console.error("Error fetching meeting recordings:",n),n}}),downloadRecording:(t,n)=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/recordings/${n}/download/`,{responseType:"blob"})).data}catch(a){throw console.error("Error downloading recording:",a),a}}),getMeetingAnalytics:t=>$(null,null,function*(){try{return(yield ne.get(`/api/meetings/${t}/analytics/`)).data}catch(n){throw console.error("Error fetching meeting analytics:",n),n}}),getMeetingHistory:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/meeting-history/")).data}catch(t){throw console.error("Error fetching meeting history:",t),t}}),getMeetingCalendarEvents:()=>$(null,null,function*(){try{return(yield ne.get("/api/meetings/calendar-events/")).data}catch(t){throw console.error("Error fetching meeting calendar events:",t),t}}),syncWithCalendar:(t,n)=>$(null,null,function*(){try{return(yield ne.post(`/api/meetings/${t}/sync_calendar/`,{calendar_data:n})).data}catch(a){throw console.error("Error syncing with calendar:",a),a}})},sW=({open:t,onClose:n,meeting:a,onEdit:l,onStartLive:d,onJoinMeeting:p,onDownloadMaterial:h,onWatchRecording:x,onRefresh:m})=>{const[y,v]=w.useState(0),[S,C]=w.useState(!1),[_,z]=w.useState(!1),[R,B]=w.useState(null),[T,O]=w.useState(null),[q,j]=w.useState([]),[ee,V]=w.useState(0),[L,k]=w.useState(10);w.useEffect(()=>{t&&(a!=null&&a.id)&&(console.log("TeacherMeetingDetailsDialog useEffect triggered - fetching details for meeting:",a.id),G())},[t,a==null?void 0:a.id,a==null?void 0:a.updated_at,a==null?void 0:a.start_time,a==null?void 0:a.duration]),w.useEffect(()=>{t||(B(null),O(null))},[t]);const G=()=>$(null,null,function*(){try{z(!0),O(null),console.log("Fetching meeting details for ID:",a.id);const se=yield Ct.getMeetingDetails(a.id);console.log("Meeting details response:",se),B(se);const ve=yield Ct.getMeetingParticipants(a.id);console.log("Participants response:",ve),j(ve)}catch(se){console.error("Error fetching meeting details:",se),O("     ")}finally{z(!1)}}),W=(se,ve)=>{V(ve)},M=se=>{k(parseInt(se.target.value,10)),V(0)},U=(se,ve)=>$(null,null,function*(){try{yield Ct.updateParticipantAttendance(a.id,se,ve),j(ge=>ge.map(ke=>ke.id===se?oe(X({},ke),{attendance_status:ve}):ke)),alert(`    : ${ve==="present"?"":ve==="late"?"":""}`)}catch(ge){console.error("Error updating attendance:",ge),alert("     ")}}),H=()=>$(null,null,function*(){try{const se=yield Ct.markAbsentParticipants(a.id);alert(se.message);const ve=yield Ct.getMeetingParticipants(a.id);j(ve)}catch(se){console.error("Error marking absent participants:",se),alert("    ")}}),N=se=>$(null,null,function*(){try{yield navigator.clipboard.writeText(se),C(!0),setTimeout(()=>C(!1),2e3)}catch(ve){console.error("Failed to copy: ",ve)}}),Y=se=>{switch(se){case"upcoming":return"";case"ongoing":return"";case"completed":return"";case"cancelled":return"";default:return" "}},E=se=>{switch(se){case"upcoming":return"primary";case"ongoing":return"success";case"completed":return"default";case"cancelled":return"error";default:return"default"}},I=se=>{switch(se){case"lecture":return"";case"discussion":return"";case"workshop":return" ";case"exam":return"";default:return" "}},A=se=>{if(!se)return" ";try{return new Date(se).toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(ve){return"  "}},Q=se=>{if(!se)return" ";try{return new Date(se).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(ve){return"  "}},J=se=>{if(!se)return" ";const ve=Math.floor(se/60),ge=se%60;return ve>0?`${ve}  ${ge} `:`${ge} `};if(!a)return null;const P=R||a,ie=P.status||"upcoming",ue=q.length,fe=q.filter(se=>se.attendance_status==="present"||se.attendance_status==="late").length,de=q.filter(se=>se.attendance_status==="registered").length,K=ue>0?Math.round(fe/ue*100):0;return o(wr,{open:t,onClose:n,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{borderRadius:4,maxHeight:"90vh",overflow:"hidden",direction:"rtl"}},children:[o(Wr,{sx:{background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",py:3,px:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(cn,{sx:{fontSize:28}}),e(f,{variant:"h5",fontWeight:600,children:"  -  "})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(_e,{label:Y(ie),color:E(ie),variant:"filled",sx:{bgcolor:ie==="ongoing"?"#e5978b":ie==="upcoming"?"#2196f3":ie==="completed"?"#9e9e9e":"#f44336",color:"white",fontWeight:600}}),e(xe,{onClick:()=>{G(),m&&m()},disabled:_,sx:{color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:e(ns,{})}),e(xe,{onClick:n,sx:{color:"white"},children:e(pn,{})})]})]}),o(vr,{sx:{p:0,overflow:"auto"},children:[_&&e(c,{sx:{display:"flex",justifyContent:"center",p:4},children:e(Qe,{})}),T&&e(c,{sx:{p:4},children:e(Be,{severity:"error",action:o(re,{color:"inherit",size:"small",onClick:G,children:[e(ns,{sx:{ml:1}})," "]}),children:T})}),!_&&!T&&P&&o(c,{sx:{p:4},children:[o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e9ecef"},children:[e(f,{variant:"h4",fontWeight:700,gutterBottom:!0,color:"primary",children:P.title}),P.description&&e(f,{variant:"body1",color:"text.secondary",sx:{mt:2,lineHeight:1.8},children:P.description})]}),o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #bbdefb"},children:[o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(Pn,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:A(P.start_time)}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(dn,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[o(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[Q(P.start_time)," - ",J(P.duration)]}),e(f,{variant:"caption",color:"text.secondary",children:"  "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(cn,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:I(P.meeting_type)}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(rs,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[o(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[ue,"/",P.max_participants||" "," "]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})})]}),o(le,{container:!0,spacing:3,sx:{mt:2},children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(uh,{sx:{color:"#ff9800",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:A(P.created_at)}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(no,{sx:{color:"#e5978b",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:P.creator_name||" "}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(Ln,{sx:{color:"#1976d2",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:P.updated_at?A(P.updated_at):"  "}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(yr,{sx:{color:"#e5978b",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:P.is_active?"":" "}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})})]}),o(c,{sx:{mt:3},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:" "}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(_e,{icon:P.enable_chat?e(td,{}):e(_i,{}),label:P.enable_chat?" ":" ",color:P.enable_chat?"success":"default",variant:"outlined"}),e(_e,{icon:P.enable_screen_share?e(tm,{}):e(_i,{}),label:P.enable_screen_share?"  ":"  ",color:P.enable_screen_share?"success":"default",variant:"outlined"}),e(_e,{icon:P.enable_recording?e(ji,{}):e(_i,{}),label:P.enable_recording?" ":" ",color:P.enable_recording?"success":"default",variant:"outlined"})]})]})]}),P.zoom_link&&o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #e8f5e8 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #c8e6c9"},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"success.main",children:" "}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mt:2},children:[e(ze,{fullWidth:!0,value:P.zoom_link,InputProps:{readOnly:!0},variant:"outlined",size:"small"}),e(re,{variant:"outlined",startIcon:S?e(Yo,{}):e(Th,{}),onClick:()=>N(P.zoom_link),color:S?"success":"primary",children:S?" ":" "})]})]}),o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #fff3e0 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #ffcc02"},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"warning.main",children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[e(f,{variant:"h4",fontWeight:700,color:"primary",children:ue}),e(f,{variant:"body2",color:"text.secondary",children:" "})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[e(f,{variant:"h4",fontWeight:700,color:"success.main",children:fe}),e(f,{variant:"body2",color:"text.secondary",children:""})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[e(f,{variant:"h4",fontWeight:700,color:"warning.main",children:de}),e(f,{variant:"body2",color:"text.secondary",children:""})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[o(f,{variant:"h4",fontWeight:700,color:"info.main",children:[K,"%"]}),e(f,{variant:"body2",color:"text.secondary",children:" "})]})})]}),e(Sr,{variant:"determinate",value:K,sx:{mt:2,height:8,borderRadius:4}})]}),o(De,{elevation:0,sx:{p:4,background:"linear-gradient(135deg, #f3e5f5 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e1bee7"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e(f,{variant:"h6",fontWeight:600,color:"secondary.main",children:" "}),e(re,{variant:"outlined",color:"error",size:"small",onClick:H,startIcon:e(pn,{}),children:" "})]}),q.length>0?o(ni,{component:De,elevation:0,sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:[o(ei,{children:[e(ti,{children:o(or,{sx:{bgcolor:"grey.50"},children:[e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:" "}),e(be,{sx:{fontWeight:600},children:""})]})}),e(ri,{children:q.slice(ee*L,ee*L+L).map((se,ve)=>{var ge;return o(or,{hover:!0,children:[e(be,{children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Tt,{src:se.user_image,sx:{width:40,height:40},children:((ge=se.user_name)==null?void 0:ge.charAt(0))||"U"}),o(c,{children:[e(f,{variant:"body2",fontWeight:500,children:se.user_name||"  "}),e(f,{variant:"caption",color:"text.secondary",children:se.user_email})]})]})}),e(be,{align:"center",children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:se.attendance_status==="present"?e(Yo,{fontSize:"large",sx:{color:"success.main"}}):e(c,{sx:{width:24,height:24}})})}),e(be,{align:"center",children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:se.attendance_status==="late"?e(Ln,{fontSize:"large",sx:{color:"warning.main"}}):e(c,{sx:{width:24,height:24}})})}),e(be,{align:"center",children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:se.attendance_status==="absent"?e(pn,{fontSize:"large",sx:{color:"error.main"}}):e(c,{sx:{width:24,height:24}})})}),e(be,{children:e(_e,{label:se.attendance_status==="present"?"":se.attendance_status==="late"?"":se.attendance_status==="absent"?"":se.attendance_status==="registered"?"":" ",color:se.attendance_status==="present"?"success":se.attendance_status==="late"?"warning":se.attendance_status==="absent"?"error":se.attendance_status==="registered"?"primary":"default",size:"small",variant:"outlined"})}),e(be,{children:e(f,{variant:"body2",color:"text.secondary",children:se.joined_at?Q(se.joined_at):"  "})}),e(be,{children:o(c,{sx:{display:"flex",gap:1},children:[e(Je,{title:" ",children:e(xe,{size:"small",color:"success",onClick:()=>U(se.id,"present"),children:e(Yo,{})})}),e(Je,{title:" ",children:e(xe,{size:"small",color:"warning",onClick:()=>U(se.id,"late"),children:e(Ln,{})})}),e(Je,{title:" ",children:e(xe,{size:"small",color:"error",onClick:()=>U(se.id,"absent"),children:e(pn,{})})})]})})]},se.id||ve)})})]}),e(Ea,{rowsPerPageOptions:[5,10,25],component:"div",count:q.length,rowsPerPage:L,page:ee,onPageChange:W,onRowsPerPageChange:M,labelRowsPerPage:"   :",labelDisplayedRows:({from:se,to:ve,count:ge})=>`${se}-${ve}  ${ge}`})]}):o(c,{sx:{textAlign:"center",py:4},children:[e(rs,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"  "}),e(f,{variant:"body2",color:"text.secondary",children:"        "})]})]})]})]}),o($r,{sx:{p:3,gap:2,justifyContent:"flex-start",direction:"rtl"},children:[ie==="upcoming"&&l&&e(re,{variant:"outlined",color:"primary",onClick:()=>l(P),startIcon:e(Tr,{}),children:" "}),ie==="ongoing"&&d&&e(re,{variant:"contained",color:"success",onClick:()=>d(P.id),startIcon:e(Oi,{}),children:"  "}),P.zoom_link&&ie==="ongoing"&&p&&e(re,{variant:"contained",color:"primary",onClick:()=>p(P),startIcon:e(cn,{}),children:" "}),e(re,{variant:"outlined",onClick:n,children:""})]})]})},lW=te(nt)(({theme:t,status:n})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:n==="ongoing"?"2px solid #e5978b":"1px solid #e0e0e0","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},background:n==="ongoing"?"linear-gradient(135deg, #f8fff8 0%, #ffffff 100%)":"#ffffff"})),A5=te(_e)(({status:t})=>X(X(X(X({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},t==="upcoming"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),t==="ongoing"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),t==="completed"&&{backgroundColor:"#f3e5f5",color:"#7b1fa2"}),t==="cancelled"&&{backgroundColor:"#ffebee",color:"#d32f2f"})),cW=()=>{const[t,n]=w.useState(0),[a,l]=w.useState(!1),[d,p]=w.useState(!1),[h,x]=w.useState(null),[m,y]=w.useState([]),[v,S]=w.useState(!0),[C,_]=w.useState(null),[z,R]=w.useState({open:!1,message:"",severity:"success"}),[B,T]=w.useState({title:"",description:"",meeting_type:"NORMAL",start_time:"",duration:60,zoom_link:"",max_participants:20,enable_screen_share:!0,enable_chat:!0,enable_recording:!1});w.useEffect(()=>{O();const P=setInterval(()=>{m.some(ue=>Y(ue)==="ongoing")&&(console.log("Auto-refreshing meetings due to ongoing meetings..."),O())},3e4);return()=>clearInterval(P)},[]);const O=()=>$(null,null,function*(){try{S(!0),console.log("Fetching meetings...");const P=yield Ct.getMyMeetings();console.log("API Response:",P);let ie=[];P!=null&&P.meetings?ie=P.meetings:P!=null&&P.results?ie=P.results:Array.isArray(P)?ie=P:ie=[],console.log("Processed meetings data:",ie);const ue=Array.isArray(ie)?ie:[];if(y(ue),h){const fe=ue.find(de=>de.id===h.id);fe&&(console.log("Updating selectedMeeting with fresh data:",fe),x(fe))}_(null)}catch(P){console.error("Error fetching meetings:",P),_("    "),y([])}finally{S(!1)}}),q=()=>{var ie,ue;const P=[];return(ie=B.title)!=null&&ie.trim()||P.push("  "),B.start_time?new Date(B.start_time)<=new Date&&P.push("       "):P.push("   "),(!B.duration||B.duration<15)&&P.push("    15   "),B.duration>480&&P.push("     8 "),B.meeting_type==="ZOOM"&&!((ue=B.zoom_link)!=null&&ue.trim())&&P.push("    "),(B.max_participants<1||B.max_participants>200)&&P.push("      1  200"),P},j=()=>$(null,null,function*(){var ie,ue;const P=q();if(P.length>0){R({open:!0,message:P.join(`
`),severity:"error"});return}try{S(!0),yield Ct.createMeeting(B),R({open:!0,message:"   ",severity:"success"}),l(!1),k(),O()}catch(fe){console.error("Error creating meeting:",fe),R({open:!0,message:((ue=(ie=fe.response)==null?void 0:ie.data)==null?void 0:ue.message)||"    ",severity:"error"})}finally{S(!1)}}),ee=P=>$(null,null,function*(){var ue,fe;const ie=q();if(ie.length>0){R({open:!0,message:ie.join(`
`),severity:"error"});return}try{S(!0);const de=yield Ct.updateMeeting(P,B);R({open:!0,message:"   ",severity:"success"}),l(!1),k(),h&&h.id===P&&(console.log("Updating selectedMeeting after edit:",de),x(K=>oe(X(X({},K),de),{updated_at:new Date().toISOString()}))),O()}catch(de){console.error("Error updating meeting:",de),R({open:!0,message:((fe=(ue=de.response)==null?void 0:ue.data)==null?void 0:fe.message)||"    ",severity:"error"})}finally{S(!1)}}),V=P=>$(null,null,function*(){var ie,ue;if(window.confirm("      "))try{S(!0),yield Ct.deleteMeeting(P),R({open:!0,message:"   ",severity:"success"}),O()}catch(fe){console.error("Error deleting meeting:",fe),R({open:!0,message:((ue=(ie=fe.response)==null?void 0:ie.data)==null?void 0:ue.message)||"    ",severity:"error"})}finally{S(!1)}}),L=P=>$(null,null,function*(){var ie,ue;try{S(!0);const fe=yield Ct.startLiveMeeting(P);R({open:!0,message:"    ",severity:"success"}),O(),window.open(`/teacher/meetings/live/${P}`,"_blank")}catch(fe){console.error("Error starting live meeting:",fe),R({open:!0,message:((ue=(ie=fe.response)==null?void 0:ie.data)==null?void 0:ue.message)||"     ",severity:"error"})}finally{S(!1)}}),k=()=>{const P=new Date;P.setHours(P.getHours()+1),P.setMinutes(0),P.setSeconds(0),T({title:"",description:"",meeting_type:"NORMAL",start_time:(ue=>{const fe=ue.getFullYear(),de=String(ue.getMonth()+1).padStart(2,"0"),K=String(ue.getDate()).padStart(2,"0"),se=String(ue.getHours()).padStart(2,"0"),ve=String(ue.getMinutes()).padStart(2,"0");return`${fe}-${de}-${K}T${se}:${ve}`})(P),duration:60,zoom_link:"",max_participants:20,enable_screen_share:!0,enable_chat:!0,enable_recording:!1})},G=(P,ie)=>{T(ue=>oe(X({},ue),{[P]:ie}))},W=P=>{console.log("openEditDialog called with meeting:",P);const ue=(fe=>{if(!fe)return"";try{const de=new Date(fe);if(isNaN(de.getTime()))return console.error("Invalid date:",fe),"";const K=de.getFullYear(),se=String(de.getMonth()+1).padStart(2,"0"),ve=String(de.getDate()).padStart(2,"0"),ge=String(de.getHours()).padStart(2,"0"),ke=String(de.getMinutes()).padStart(2,"0"),it=`${K}-${se}-${ve}T${ge}:${ke}`;return console.log("Formatted date:",it,"from original:",fe),it}catch(de){return console.error("Error formatting date:",de,"dateString:",fe),""}})(P.start_time);console.log("Formatted start_time:",ue),console.log("Meeting duration:",P.duration),T({title:P.title||"",description:P.description||"",meeting_type:P.meeting_type||"NORMAL",start_time:ue,duration:P.duration||60,zoom_link:P.zoom_link||"",max_participants:P.max_participants||10,enable_screen_share:P.enable_screen_share||!1,enable_chat:P.enable_chat||!1,enable_recording:P.enable_recording||!1}),x(P),l(!0)},M=()=>{R(oe(X({},z),{open:!1}))},U=()=>{k(),x(null),l(!0)},H=P=>{x(P),p(!0)},N=P=>{L(P)},Y=P=>{const ie=new Date,ue=new Date(P.start_time);let fe=60;if(typeof P.duration=="string"){const K=P.duration.split(":");K.length===3&&(fe=parseInt(K[0])*60+parseInt(K[1]))}else typeof P.duration=="number"&&(fe=P.duration);const de=new Date(ue.getTime()+fe*6e4);return P.status==="cancelled"?"cancelled":ie>=ue&&ie<=de?"ongoing":ie>de?"completed":"upcoming"},E=P=>{switch(P){case"upcoming":return"";case"ongoing":return" ";case"completed":return"";case"cancelled":return"";default:return" "}},I=P=>{switch(P){case"ZOOM":return" ";case"LIVE":return" ";case"NORMAL":return" ";default:return" "}},A=P=>{if(!P)return" ";try{const ie=new Date(P);return isNaN(ie.getTime())?(console.error("Invalid date in formatDate:",P),"  "):(console.log("Formatting date:",P,"to:",ie),ie.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"}))}catch(ie){return console.error("Error formatting date:",ie,"dateString:",P),"  "}},Q=P=>{if(!P)return" ";try{const ie=new Date(P);return isNaN(ie.getTime())?(console.error("Invalid date in formatTime:",P),"  "):(console.log("Formatting time:",P,"to:",ie),ie.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}))}catch(ie){return console.error("Error formatting time:",ie,"dateString:",P),"  "}};console.log("Current meetings state:",m),console.log("Meetings type:",typeof m),console.log("Is meetings array:",Array.isArray(m));const J=Array.isArray(m)?m.filter(P=>t===0?!0:t===1?Y(P)==="upcoming":t===2?Y(P)==="ongoing":t===3?Y(P)==="completed":!0):[];return o(c,{className:"meetings-container",children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(cn,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"  "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"    "})]})]}),e(c,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:e(xe,{onClick:U,sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:e(Nr,{sx:{fontSize:28}})})}),e(c,{sx:{mb:3},children:o(zn,{value:t,onChange:(P,ie)=>n(ie),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{color:"#ff6b6b"},"& .MuiTabs-indicator":{backgroundColor:"#ff6b6b"}},children:[e(mt,{label:`  (${J.length})`}),e(mt,{label:` (${m.filter(P=>Y(P)==="upcoming").length})`}),e(mt,{label:`  (${m.filter(P=>Y(P)==="ongoing").length})`}),e(mt,{label:` (${m.filter(P=>Y(P)==="completed").length})`})]})}),v&&(!Array.isArray(m)||m.length===0)&&o(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[e(Qe,{size:60}),e(f,{sx:{ml:2},children:"  ..."})]}),C&&e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:o(Be,{severity:"error",sx:{maxWidth:600},children:[C,e(re,{onClick:O,sx:{ml:2},variant:"outlined",size:"small",children:" "})]})}),!v&&(!Array.isArray(m)||m.length===0)&&!C&&o(c,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",py:8,textAlign:"center"},children:[e(cn,{sx:{fontSize:80,color:"text.secondary",mb:2}}),e(f,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"   "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"      "}),e(re,{variant:"contained",onClick:U,startIcon:e(Nr,{}),sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:2,textTransform:"none",fontWeight:600,px:4,py:1.5},children:"  "})]}),e(le,{container:!0,spacing:3,children:J.map(P=>{const ie=Y(P);return e(le,{item:!0,xs:12,sm:6,md:4,lg:3,children:e(lW,{status:ie,children:o(pt,{sx:{p:3},children:[o(c,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[e(f,{variant:"h6",fontWeight:700,sx:{color:"primary.main",lineHeight:1.3,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:P.title}),e(A5,{label:E(ie),status:ie,size:"small"})]}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:3,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:P.description}),o(c,{sx:{mb:3},children:[o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(Pn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),e(f,{variant:"body2",color:"text.secondary",children:A(P.start_time)})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(dn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[Q(P.start_time)," - ",P.duration," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(Ca,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[": ",P.participants_count||0," / ",P.max_participants]})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(cn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[" : ",I(P.meeting_type)]})]}),P.zoom_link&&o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(uw,{sx:{fontSize:16,color:"text.secondary",mr:1}}),e(f,{variant:"body2",color:"primary",sx:{textDecoration:"underline",cursor:"pointer"},children:"  "})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(Ln,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[" : ",A(P.created_at)]})]})]}),o(c,{sx:{mt:"auto"},children:[o(c,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[e(A5,{label:E(ie),status:ie}),P.enable_chat&&e(_e,{label:" ",size:"small",sx:{backgroundColor:"#e8f5e8",color:"#2e7d32",fontSize:"0.7rem",fontWeight:600,borderRadius:1.5,"& .MuiChip-label":{px:1}}}),P.enable_screen_share&&e(_e,{label:" ",size:"small",sx:{backgroundColor:"#fff3e0",color:"#f57c00",fontSize:"0.7rem",fontWeight:600,borderRadius:1.5,"& .MuiChip-label":{px:1}}}),P.enable_recording&&e(_e,{label:" ",size:"small",sx:{backgroundColor:"#f3e5f5",color:"#7b1fa2",fontSize:"0.7rem",fontWeight:600,borderRadius:1.5,"& .MuiChip-label":{px:1}}})]}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(re,{size:"small",variant:"outlined",onClick:()=>H(P),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:""}),ie==="upcoming"&&e(re,{size:"small",variant:"outlined",onClick:()=>W(P),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content","&:hover":{backgroundColor:"rgba(33, 150, 243, 0.08)"}},children:""}),ie==="ongoing"&&e(re,{size:"small",variant:"contained",color:"success",onClick:()=>N(P.id),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content","&:hover":{backgroundColor:"#2e7d32"}},children:" "}),ie==="upcoming"&&e(re,{size:"small",variant:"outlined",color:"error",onClick:()=>V(P.id),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)"}},children:""})]})]})]})})},P.id)})}),o(wr,{open:a,onClose:()=>{l(!1),h&&x(P=>oe(X({},P),{updated_at:new Date().toISOString()}))},maxWidth:"md",fullWidth:!0,children:[o(Wr,{sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",alignItems:"center",gap:2},children:[e(cn,{}),h?" ":"  "]}),e(vr,{sx:{pt:3},children:o(c,{sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"}},children:[e(ze,{fullWidth:!0,label:"  *",value:B.title,onChange:P=>G("title",P.target.value),required:!0,sx:{gridColumn:{xs:"1",md:"1 / -1"}}}),e(ze,{fullWidth:!0,label:" ",multiline:!0,rows:3,value:B.description,onChange:P=>G("description",P.target.value),sx:{gridColumn:{xs:"1",md:"1 / -1"}}}),o(Wt,{fullWidth:!0,children:[e(Ot,{children:"  *"}),o(Bt,{value:B.meeting_type,onChange:P=>G("meeting_type",P.target.value),required:!0,children:[e(We,{value:"ZOOM",children:" "}),e(We,{value:"LIVE",children:" "}),e(We,{value:"NORMAL",children:" "})]})]}),e(ze,{fullWidth:!0,label:"  ",type:"number",value:B.max_participants,onChange:P=>G("max_participants",parseInt(P.target.value)),inputProps:{min:1,max:200},helperText:" : 1  : 200"}),e(ze,{fullWidth:!0,label:"   *",type:"datetime-local",value:B.start_time,onChange:P=>G("start_time",P.target.value),InputLabelProps:{shrink:!0},required:!0,helperText:"    "}),e(ze,{fullWidth:!0,label:" () *",type:"number",value:B.duration,onChange:P=>G("duration",parseInt(P.target.value)),inputProps:{min:15,max:480},helperText:" : 15   : 8 ",required:!0}),e(ze,{fullWidth:!0,label:"  ()",value:B.zoom_link,onChange:P=>G("zoom_link",P.target.value),helperText:"   ",sx:{gridColumn:{xs:"1",md:"1 / -1"}}})]})}),o($r,{sx:{p:3,gap:2},children:[e(re,{onClick:()=>l(!1),disabled:v,variant:"outlined",sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:""}),e(re,{onClick:h?()=>ee(h.id):j,disabled:v,variant:"contained",sx:{borderRadius:2,textTransform:"none",fontWeight:600,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:v?o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Qe,{size:16,color:"inherit"})," ..."]}):h?" ":" "})]})]}),e(sW,{open:d,onClose:()=>p(!1),meeting:h,onEdit:P=>{console.log("Edit button clicked for meeting:",P),W(P),p(!1)},onRefresh:()=>{h&&x(P=>oe(X({},P),{updated_at:new Date().toISOString()}))},onStartLive:P=>{L(P),p(!1)},onJoinMeeting:P=>{P.zoom_link&&window.open(P.zoom_link,"_blank")}}),e(un,{open:z.open,autoHideDuration:6e3,onClose:M,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:M,severity:z.severity,sx:{width:"100%"},children:z.message})}),v&&e(c,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:9999},children:e(Sr,{})})]})},dW=({open:t,onClose:n,meeting:a,userRole:l="student",onEdit:d,onStartLive:p,onJoinMeeting:h,onDownloadMaterial:x,onWatchRecording:m,onRefresh:y})=>{const[v,S]=w.useState(0),[C,_]=w.useState(!1),[z,R]=w.useState(!1),[B,T]=w.useState(null),[O,q]=w.useState(null),[j,ee]=w.useState(0),[V,L]=w.useState(10);w.useEffect(()=>{t&&(a!=null&&a.id)&&(console.log("MeetingDetailsDialog useEffect triggered - fetching details for meeting:",a.id),k())},[t,a==null?void 0:a.id,a==null?void 0:a.updated_at,a==null?void 0:a.start_time,a==null?void 0:a.duration]),w.useEffect(()=>{t||(T(null),q(null))},[t]);const k=()=>$(null,null,function*(){try{R(!0),q(null),console.log("Fetching meeting details for ID:",a.id);const K=yield Ct.getMeetingDetails(a.id);console.log("Meeting details response:",K),T(K);try{console.log("Fetching participants for meeting:",a.id);const se=yield Ct.getMeetingParticipants(a.id);console.log("Participants response:",se),T(ve=>oe(X({},ve),{participants:se}))}catch(se){console.error("Error fetching participants:",se)}}catch(K){console.error("Error fetching meeting details:",K),q("     "),T(a)}finally{R(!1)}}),G=(K,se)=>{ee(se)},W=K=>{L(parseInt(K.target.value,10)),ee(0)};if(!a)return null;const M=B||a;console.log("MeetingDetailsDialog - meeting prop:",a),console.log("MeetingDetailsDialog - meetingDetails state:",B),console.log("MeetingDetailsDialog - final meetingData:",M);const U=()=>{M.zoom_link&&(navigator.clipboard.writeText(M.zoom_link),_(!0),setTimeout(()=>_(!1),2e3))},H=K=>{if(!K)return" ";try{const se=new Date(K);return isNaN(se.getTime())?(console.error("Invalid date in formatDate:",K),"  "):(console.log("Formatting date:",K,"to:",se),se.toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric",calendar:"gregory"}))}catch(se){return console.error("Error formatting date:",se,"dateString:",K),"  "}},N=K=>{if(!K)return" ";try{const se=new Date(K);return isNaN(se.getTime())?(console.error("Invalid date in formatTime:",K),"  "):(console.log("Formatting time:",K,"to:",se),se.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0}))}catch(se){return console.error("Error formatting time:",se,"dateString:",K),"  "}},Y=K=>{if(!K)return" ";const se=Math.floor(K/60),ve=K%60;return se>0?`${se}  ${ve>0?` ${ve} `:""}`:`${K} `},E=K=>{if(!K.start_time)return"unknown";const se=new Date,ve=new Date(K.start_time),ge=new Date(ve.getTime()+(K.duration||60)*6e4);return se<ve?"upcoming":se>=ve&&se<=ge?"ongoing":"completed"},I=K=>{switch(K){case"upcoming":return"";case"ongoing":return" ";case"completed":return"";case"cancelled":return"";default:return" "}},A=K=>{switch(K){case"upcoming":return"primary";case"ongoing":return"success";case"completed":return"default";case"cancelled":return"error";default:return"default"}},Q=K=>{switch(K){case"ZOOM":return" ";case"LIVE":return" ";case"NORMAL":return" ";default:return" "}},J=E(M),P=M.participants||[],ie=P.length,ue=P.filter(K=>K.attendance_status==="attending").length,fe=P.filter(K=>K.attendance_status==="registered").length,de=ie>0?Math.round(ue/ie*100):0;return o(wr,{open:t,onClose:n,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{borderRadius:4,maxHeight:"90vh",overflow:"hidden",direction:"rtl"}},children:[o(Wr,{sx:{background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",py:3,px:4},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(cn,{sx:{fontSize:28}}),e(f,{variant:"h5",fontWeight:600,children:" "})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(_e,{label:I(J),color:A(J),variant:"filled",sx:{bgcolor:J==="ongoing"?"#e5978b":J==="upcoming"?"#2196f3":J==="completed"?"#9e9e9e":"#f44336",color:"white",fontWeight:600}}),e(xe,{onClick:()=>{k(),y&&y()},disabled:z,sx:{color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:e(ns,{})}),e(xe,{onClick:n,sx:{color:"white"},children:e(pn,{})})]})]}),e(vr,{sx:{p:0,overflow:"auto",direction:"rtl","&::-webkit-scrollbar":{width:"14px"},"&::-webkit-scrollbar-track":{background:"linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"8px",margin:"6px",border:"1px solid #dee2e6"},"&::-webkit-scrollbar-thumb":{background:"linear-gradient(180deg, #667eea 0%, #0e5181 100%)",borderRadius:"8px",border:"2px solid #f8f9fa",boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{background:"linear-gradient(180deg, #5a6fd8 0%, #0a3d5f 100%)",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}},"&::-webkit-scrollbar-corner":{background:"#f8f9fa"},scrollbarWidth:"thin",scrollbarColor:"#667eea #f8f9fa",scrollBehavior:"smooth"},children:z?o(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:4},children:[e(Qe,{}),e(f,{sx:{mr:2},children:"   ..."})]}):O?e(c,{sx:{p:4},children:e(Be,{severity:"error",action:o(re,{color:"inherit",size:"small",onClick:k,children:[e(ns,{sx:{ml:1}})," "]}),children:O})}):e(c,{sx:{p:0},children:o(c,{sx:{p:4},children:[o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e9ecef"},children:[e(f,{variant:"h4",fontWeight:700,gutterBottom:!0,color:"primary",sx:{mb:2},children:M.title}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3,lineHeight:1.6},children:M.description}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(Pn,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[o(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[H(M.start_time),M.updated_at&&o(f,{variant:"caption",display:"block",color:"success.main",children:[": ",H(M.updated_at)]})]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(dn,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[o(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[N(M.start_time)," - ",Y(M.duration),M.updated_at&&o(f,{variant:"caption",display:"block",color:"success.main",children:[": ",N(M.updated_at)]})]}),e(f,{variant:"caption",color:"text.secondary",children:"  "})]})]})}),l==="instructor"&&o(Rt,{children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(cn,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:Q(M.meeting_type)}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(rs,{sx:{color:"#667eea",ml:2,fontSize:24}}),o(c,{children:[o(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[ie,"/",M.max_participants||" "," "]}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})})]})]}),l==="instructor"&&o(le,{container:!0,spacing:3,sx:{mt:2},children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(uh,{sx:{color:"#ff9800",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:H(M.created_at)}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(no,{sx:{color:"#e5978b",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:M.creator_name||" "}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(Ln,{sx:{color:"#1976d2",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:M.updated_at?H(M.updated_at):"  "}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[e(yr,{sx:{color:"#e5978b",ml:2,fontSize:24}}),o(c,{children:[e(f,{variant:"body2",fontWeight:600,color:"text.primary",children:M.is_active?"":" "}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})})]}),l==="instructor"&&o(c,{sx:{mt:3},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:" "}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(_e,{icon:M.enable_chat?e(td,{}):e(_i,{}),label:M.enable_chat?" ":" ",color:M.enable_chat?"success":"default",variant:"outlined"}),e(_e,{icon:M.enable_screen_share?e(tm,{}):e(_i,{}),label:M.enable_screen_share?"  ":"  ",color:M.enable_screen_share?"success":"default",variant:"outlined"}),e(_e,{icon:M.enable_recording?e(ji,{}):e(_i,{}),label:M.enable_recording?" ":" ",color:M.enable_recording?"success":"default",variant:"outlined"})]})]})]}),M.zoom_link&&o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #e8f5e8 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #c8e6c9"},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"success.main",children:" "}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e(ze,{fullWidth:!0,value:M.zoom_link,InputProps:{readOnly:!0},sx:{flexGrow:1}}),e(re,{variant:"contained",color:"primary",onClick:U,startIcon:e(Th,{}),children:C?" !":" "}),e(re,{variant:"contained",color:"success",onClick:()=>h&&h(M),startIcon:e(Oi,{}),children:" "})]})]}),l==="instructor"&&o(De,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #fff3e0 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #ffcc02"},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"warning.main",children:" "}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[e(f,{variant:"h4",fontWeight:700,color:"primary",children:ie}),e(f,{variant:"body2",color:"text.secondary",children:" "})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[e(f,{variant:"h4",fontWeight:700,color:"success.main",children:ue}),e(f,{variant:"body2",color:"text.secondary",children:""})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[e(f,{variant:"h4",fontWeight:700,color:"warning.main",children:fe}),e(f,{variant:"body2",color:"text.secondary",children:""})]})}),e(le,{item:!0,xs:12,sm:6,md:3,children:o(c,{sx:{textAlign:"center",p:2},children:[o(f,{variant:"h4",fontWeight:700,color:"info.main",children:[de,"%"]}),e(f,{variant:"body2",color:"text.secondary",children:" "})]})})]}),e(Sr,{variant:"determinate",value:de,sx:{mt:2,height:8,borderRadius:4}})]}),o(De,{elevation:0,sx:{p:4,background:"linear-gradient(135deg, #f3e5f5 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e1bee7"},children:[e(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:e(f,{variant:"h6",fontWeight:600,color:"secondary.main",children:" "})}),l==="instructor"?P.length>0?o(ni,{component:De,elevation:0,sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:[o(ei,{children:[e(ti,{children:o(or,{sx:{bgcolor:"grey.50"},children:[e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:""}),e(be,{sx:{fontWeight:600},children:" "})]})}),e(ri,{children:P.slice(j*V,j*V+V).map((K,se)=>{var ve;return o(or,{hover:!0,children:[e(be,{children:o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(Tt,{src:K.user_image,sx:{width:40,height:40},children:((ve=K.user_name)==null?void 0:ve.charAt(0))||"U"}),o(c,{children:[e(f,{variant:"body2",fontWeight:500,children:K.user_name||"  "}),e(f,{variant:"caption",color:"text.secondary",children:K.user_email})]})]})}),e(be,{align:"center",children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:K.attendance_status==="present"?e(Yo,{fontSize:"large",sx:{color:"success.main"}}):e(c,{sx:{width:24,height:24}})})}),e(be,{align:"center",children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:K.attendance_status==="late"?e(Ln,{fontSize:"large",sx:{color:"warning.main"}}):e(c,{sx:{width:24,height:24}})})}),e(be,{align:"center",children:e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:K.attendance_status==="absent"?e(pn,{fontSize:"large",sx:{color:"error.main"}}):e(c,{sx:{width:24,height:24}})})}),e(be,{children:e(_e,{label:K.attendance_status==="present"?"":K.attendance_status==="late"?"":K.attendance_status==="absent"?"":K.attendance_status==="registered"?"":" ",color:K.attendance_status==="present"?"success":K.attendance_status==="late"?"warning":K.attendance_status==="absent"?"error":K.attendance_status==="registered"?"primary":"default",size:"small",variant:"outlined"})}),e(be,{children:e(f,{variant:"body2",color:"text.secondary",children:K.joined_at?N(K.joined_at):"  "})})]},K.id||se)})})]}),e(Ea,{rowsPerPageOptions:[5,10,25],component:"div",count:P.length,rowsPerPage:V,page:j,onPageChange:G,onRowsPerPageChange:W,labelRowsPerPage:"   :",labelDisplayedRows:({from:K,to:se,count:ve})=>`${K}-${se}  ${ve}`})]}):e(f,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",py:4},children:"    "}):o(c,{sx:{p:3,bgcolor:"grey.50",borderRadius:2},children:[o(f,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e(yr,{color:"primary"})," "]}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body1",fontWeight:500,children:" :"}),e(_e,{label:"  ",color:"success",variant:"filled",icon:e(yr,{})})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(f,{variant:"body1",fontWeight:500,children:" :"}),e(f,{variant:"body2",color:"text.secondary",children:new Date().toLocaleString("ar-EG")})]}),e(Be,{severity:"info",sx:{mt:2},children:"       .     ."})]})]})]})]})})}),o($r,{sx:{p:3,gap:2,justifyContent:"flex-start",direction:"rtl"},children:[l==="teacher"&&J==="upcoming"&&d&&e(re,{variant:"outlined",color:"primary",onClick:()=>d(M),startIcon:e(Tr,{}),children:" "}),l==="teacher"&&J==="ongoing"&&p&&e(re,{variant:"contained",color:"success",onClick:()=>p(M.id),startIcon:e(Oi,{}),children:"  "}),M.zoom_link&&J==="ongoing"&&h&&l==="student"&&e(re,{variant:"contained",color:"primary",onClick:()=>h(M),startIcon:e(cn,{}),children:" "}),M.zoom_link&&J==="ongoing"&&h&&l==="instructor"&&e(re,{variant:"contained",color:"primary",onClick:()=>h(M),startIcon:e(cn,{}),children:" "}),e(re,{variant:"outlined",onClick:n,children:""})]})]})},uW=te(nt)(({theme:t,status:n})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:n==="ongoing"?"2px solid #e5978b":"1px solid #e0e0e0","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},background:n==="ongoing"?"linear-gradient(135deg, #f8fff8 0%, #ffffff 100%)":"#ffffff"})),z5=te(_e)(({status:t})=>X(X(X(X({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},t==="upcoming"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),t==="ongoing"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),t==="completed"&&{backgroundColor:"#f3e5f5",color:"#7b1fa2"}),t==="cancelled"&&{backgroundColor:"#ffebee",color:"#d32f2f"})),hW=()=>{const[t,n]=w.useState(0),[a,l]=w.useState(!1),[d,p]=w.useState(null),[h,x]=w.useState([]),[m,y]=w.useState(!0),[v,S]=w.useState(null),[C,_]=w.useState({open:!1,message:"",severity:"success"}),[z,R]=w.useState({}),[B,T]=w.useState({});w.useEffect(()=>{O();const A=setInterval(()=>{h.some(J=>G(J)==="ongoing")&&(console.log("Auto-refreshing meetings due to ongoing meetings..."),O())},3e4);return()=>clearInterval(A)},[t]);const O=()=>$(null,null,function*(){try{y(!0),console.log("Fetching meetings for tab:",t);let A;switch(t){case 0:A=yield Ct.getAvailableMeetings();break;case 1:A=yield Ct.getAttendingMeetings();break;case 2:try{A=yield Ct.getJoinableMeetings()}catch(J){console.log("Could not fetch joinable meetings, trying available meetings instead:",J);const P=yield Ct.getAvailableMeetings();P!=null&&P.meetings?A={meetings:P.meetings.filter(ue=>G(ue)==="ongoing")}:A={meetings:[]}}break;case 3:A=yield Ct.getMeetingHistory();break;default:A=yield Ct.getAvailableMeetings()}console.log("API Response:",A);let Q=[];A!=null&&A.meetings?Q=A.meetings:A!=null&&A.results?Q=A.results:Array.isArray(A)?Q=A:Q=[],console.log("Processed meetings data:",Q),x(Array.isArray(Q)?Q:[]),yield q(Q),S(null)}catch(A){console.error("Error fetching meetings:",A),S("    "),x([])}finally{y(!1)}}),q=A=>$(null,null,function*(){const Q={},J={};for(const P of A)if(!(!P||!P.id))try{if(Q[P.id]=P.user_is_registered||!1,J[P.id]="not_registered",P.user_is_registered===void 0)try{const ie=yield Ct.checkRegistrationStatus(P.id);Q[P.id]=ie.is_registered||!1}catch(ie){console.log(`Could not fetch registration status for meeting ${P.id}:`,ie),Q[P.id]=!1}if(Q[P.id])try{const ie=yield Ct.getMyAttendanceStatus(P.id);J[P.id]=ie.attendance_status||"not_registered"}catch(ie){console.log(`Could not fetch attendance status for meeting ${P.id}:`,ie),J[P.id]="not_registered"}}catch(ie){console.error(`Error processing meeting ${P.id}:`,ie),Q[P.id]=P.user_is_registered||!1,J[P.id]="not_registered"}R(Q),T(J)}),j=A=>$(null,null,function*(){var Q,J;try{y(!0),yield Ct.registerForMeeting(A),_({open:!0,message:"    ",severity:"success"}),R(P=>oe(X({},P),{[A]:!0})),O()}catch(P){console.error("Error registering for meeting:",P),_({open:!0,message:((J=(Q=P.response)==null?void 0:Q.data)==null?void 0:J.message)||"    ",severity:"error"})}finally{y(!1)}}),ee=A=>$(null,null,function*(){var Q,J;try{y(!0),yield Ct.unregisterFromMeeting(A),_({open:!0,message:"     ",severity:"success"}),R(P=>oe(X({},P),{[A]:!1})),O()}catch(P){console.error("Error unregistering from meeting:",P),_({open:!0,message:((J=(Q=P.response)==null?void 0:Q.data)==null?void 0:J.message)||"    ",severity:"error"})}finally{y(!1)}}),V=A=>$(null,null,function*(){var Q,J;try{y(!0),yield Ct.markAttendance(A),_({open:!0,message:"   ",severity:"success"}),T(P=>oe(X({},P),{[A]:"present"})),O()}catch(P){console.error("Error marking attendance:",P),_({open:!0,message:((J=(Q=P.response)==null?void 0:Q.data)==null?void 0:J.message)||"    ",severity:"error"})}finally{y(!1)}}),L=()=>{_(oe(X({},C),{open:!1}))},k=A=>{p(A),l(!0)},G=A=>{if(A.status&&["upcoming","ongoing","completed","cancelled"].includes(A.status))return A.status;if(!A.start_time)return"upcoming";const Q=new Date,J=new Date(A.start_time);let P=60;if(typeof A.duration=="string"){const ue=A.duration.split(":");ue.length===3?P=parseInt(ue[0])*60+parseInt(ue[1]):ue.length===2&&(P=parseInt(ue[0]))}else typeof A.duration=="number"?P=A.duration:A.duration&&typeof A.duration=="object"&&(P=A.duration.total_seconds?Math.floor(A.duration.total_seconds/60):60);const ie=new Date(J.getTime()+P*6e4);return A.status==="cancelled"?"cancelled":Q>=J&&Q<=ie?"ongoing":Q>ie?"completed":"upcoming"},W=A=>{switch(A){case"upcoming":return"";case"ongoing":return" ";case"completed":return"";case"cancelled":return"";default:return" "}},M=A=>{switch(A){case"ZOOM":return" ";case"LIVE":return" ";case"NORMAL":return" ";default:return" "}},U=A=>{switch(A){case"present":return"";case"absent":return"";case"late":return"";case"registered":return"";case"not_registered":return" ";default:return" "}},H=A=>{switch(A){case"present":return"success";case"absent":return"error";case"late":return"warning";case"registered":return"primary";case"not_registered":return"default";default:return"default"}},N=A=>{if(!A)return" ";try{const Q=new Date(A);return isNaN(Q.getTime())?"  ":Q.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"})}catch(Q){return console.error("Error formatting date:",Q),"  "}},Y=A=>{if(!A)return" ";try{const Q=new Date(A);return isNaN(Q.getTime())?"  ":Q.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}catch(Q){return console.error("Error formatting time:",Q),"  "}},E=A=>{if(!A)return" ";if(typeof A=="string"){const Q=A.split(":");if(Q.length===3){const J=parseInt(Q[0]),P=parseInt(Q[1]);return J>0?`${J}  ${P} `:`${P} `}return A}else if(typeof A=="number"){const Q=Math.floor(A/60),J=A%60;return Q>0?`${Q}  ${J} `:`${J} `}return" "},I=Array.isArray(h)?h.filter(A=>{if(!A||!A.id)return!1;const Q=G(A);return t===0?!0:t===1?z[A.id]||!1:t===2?Q==="ongoing":t===3?Q==="completed":!0}):[];return o(c,{className:"meetings-container",children:[e(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:e(c,{sx:{position:"relative",zIndex:2},children:o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(cn,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "}),e(xe,{onClick:O,disabled:m,sx:{color:"white",ml:"auto","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:e(ns,{})})]})})}),e(c,{sx:{mb:3},children:o(zn,{value:t,onChange:(A,Q)=>n(Q),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{color:"#e5978b"},"& .MuiTabs-indicator":{backgroundColor:"#e5978b"}},children:[e(mt,{label:`  (${h.filter(A=>A&&A.id&&!z[A.id]).length||0})`}),e(mt,{label:`  (${h.filter(A=>A&&A.id&&z[A.id]).length||0})`}),e(mt,{label:`   (${h.filter(A=>A&&A.id&&G(A)==="ongoing").length||0})`}),e(mt,{label:`  (${h.filter(A=>A&&A.id&&G(A)==="completed").length||0})`})]})}),m&&(!Array.isArray(h)||h.length===0)&&o(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[e(Qe,{size:60}),e(f,{sx:{ml:2},children:"  ..."})]}),v&&e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:o(Be,{severity:"error",sx:{maxWidth:600},children:[v,e(re,{onClick:O,sx:{ml:2},variant:"outlined",size:"small",children:" "})]})}),!m&&(!Array.isArray(h)||h.length===0)&&!v&&o(c,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",py:8,textAlign:"center"},children:[e(cn,{sx:{fontSize:80,color:"text.secondary",mb:2}}),e(f,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"   "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"       "})]}),e(le,{container:!0,spacing:3,children:I.map(A=>{var ie;if(!A||!A.id)return null;const Q=G(A),J=z[A.id]||!1,P=B[A.id]||"not_registered";return e(le,{item:!0,xs:12,sm:6,md:4,lg:3,children:e(uW,{status:Q,children:o(pt,{sx:{p:3},children:[o(c,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[e(f,{variant:"h6",fontWeight:700,sx:{color:"primary.main",lineHeight:1.3,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:A.title||"  "}),e(z5,{label:W(Q),status:Q,size:"small"})]}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:3,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:A.description||"   "}),o(c,{sx:{mb:3},children:[o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(Pn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),e(f,{variant:"body2",color:"text.secondary",children:A.start_time?N(A.start_time):" "})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(dn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[A.start_time?Y(A.start_time):" "," - ",E(A.duration)]})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(Ca,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[": ",A.participants_count||0," / ",A.max_participants||50]})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(cn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[" : ",M(A.meeting_type||"NORMAL")]})]}),o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(no,{sx:{fontSize:16,color:"text.secondary",mr:1}}),o(f,{variant:"body2",color:"text.secondary",children:[": ",A.creator_name||((ie=A.creator)==null?void 0:ie.name)||" "]})]}),A.zoom_link&&o(c,{sx:{display:"flex",alignItems:"center",mb:1},children:[e(uw,{sx:{fontSize:16,color:"text.secondary",mr:1}}),e(f,{variant:"body2",color:"primary",sx:{textDecoration:"underline",cursor:"pointer"},onClick:()=>window.open(A.zoom_link,"_blank"),children:"  "})]})]}),o(c,{sx:{mt:"auto"},children:[o(c,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[e(z5,{label:W(Q),status:Q,size:"small"}),e(_e,{label:U(P),color:H(P),size:"small",sx:{fontSize:"0.7rem"}}),J&&A.id&&e(_e,{label:"",color:"success",size:"small",sx:{fontSize:"0.7rem"}})]}),o(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(re,{size:"small",variant:"outlined",onClick:()=>k(A),disabled:!A||!A.id,sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:""}),!J&&Q==="upcoming"&&A.id&&e(re,{size:"small",variant:"contained",color:"primary",onClick:()=>j(A.id),startIcon:e(_6,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:" "}),J&&Q==="upcoming"&&A.id&&e(re,{size:"small",variant:"outlined",color:"error",onClick:()=>ee(A.id),startIcon:e(A6,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:" "}),J&&Q==="ongoing"&&A.id&&o(Rt,{children:[e(re,{size:"small",variant:"contained",color:"success",onClick:()=>{window.open(`/student/meetings/live/${A.id}`,"_blank")},startIcon:e(Oi,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:" "}),P!=="present"&&A.id&&e(re,{size:"small",variant:"contained",color:"primary",onClick:()=>V(A.id),startIcon:e(yr,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:" "})]}),!J&&Q==="ongoing"&&A.id&&e(re,{size:"small",variant:"contained",color:"success",onClick:()=>{window.open(`/student/meetings/live/${A.id}`,"_blank")},startIcon:e(Oi,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:" "})]})]})]})})},A.id)})}),e(dW,{open:a,onClose:()=>l(!1),meeting:d,userRole:"student",onJoinMeeting:A=>{A.zoom_link&&window.open(A.zoom_link,"_blank")},onRefresh:()=>{O()}}),e(un,{open:C.open,autoHideDuration:6e3,onClose:L,anchorOrigin:{vertical:"top",horizontal:"center"},children:e(Be,{onClose:L,severity:C.severity,sx:{width:"100%"},children:C.message})}),m&&e(c,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:9999},children:e(Sr,{})})]})},E5=te(c)(({theme:t})=>({position:"relative",borderRadius:12,overflow:"hidden",background:"#000","&:hover .controls-overlay":{opacity:1}})),fW=te(c)(({theme:t})=>({position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",padding:t.spacing(2),opacity:0,transition:"opacity 0.3s ease"})),pW=te(c)(({theme:t,isOwn:n})=>({display:"flex",flexDirection:n?"row-reverse":"row",marginBottom:t.spacing(1),"& .message-content":{maxWidth:"70%",padding:t.spacing(1,2),borderRadius:16,background:n?"#0e5181":"#f5f5f5",color:n?"#fff":"#333",margin:t.spacing(0,1)}})),gW=()=>{const{meetingId:t}=cr(),n=ct(),[a,l]=w.useState(!0),[d,p]=w.useState(!0),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[C,_]=w.useState(!1),[z,R]=w.useState(!1),[B,T]=w.useState(!1),[O,q]=w.useState(!1),[j,ee]=w.useState(""),[V,L]=w.useState(0),[k,G]=w.useState(null),[W,M]=w.useState(!0),[U,H]=w.useState(null),[N,Y]=w.useState([]),[E,I]=w.useState([]),[A,Q]=w.useState(!1),[J,P]=w.useState(null);w.useEffect(()=>{const Le=localStorage.getItem("user");if(Le)try{const tr=JSON.parse(Le);P(tr)}catch(tr){console.error("Error parsing user from localStorage:",tr)}},[]),w.useEffect(()=>{t&&$(null,null,function*(){try{M(!0),console.log("Fetching meeting details for ID:",t);const tr=yield Ct.getMeetingDetails(t);console.log("Meeting details response:",tr),G(tr),H(null)}catch(tr){console.error("Error fetching meeting details:",tr),H("     ")}finally{M(!1)}})},[t]);const[ie,ue]=w.useState(0);w.useEffect(()=>{const Le=setInterval(()=>{ue(tr=>tr+1)},1e3);return()=>clearInterval(Le)},[]);const fe=Le=>{const tr=Math.floor(Le/3600),_r=Math.floor(Le%3600/60),jn=Le%60;return`${tr.toString().padStart(2,"0")}:${_r.toString().padStart(2,"0")}:${jn.toString().padStart(2,"0")}`},de=()=>$(null,null,function*(){if(j.trim())try{console.log("Sending message:",j);const Le=yield Ct.sendChatMessage(t,j);console.log("Message sent successfully:",Le),ee(""),Ft()}catch(Le){console.error("Error sending message:",Le),alert("    ")}}),K=Le=>{Le.key==="Enter"&&!Le.shiftKey&&(Le.preventDefault(),de())},se=()=>l(!a),ve=()=>p(!d),ge=()=>x(!h),ke=()=>y(!m),it=()=>S(!v),kt=()=>_(!C),Cr=()=>$(null,null,function*(){try{console.log("Starting live meeting:",t),yield Ct.startLiveMeeting(t),console.log("Successfully started live meeting"),Q(!0)}catch(Le){console.error("Error starting live meeting:",Le),alert("     ")}}),Ne=()=>$(null,null,function*(){try{console.log("Fetching participants for meeting:",t);const Le=yield Ct.getMeetingParticipants(t);console.log("Participants response:",Le),Le&&Array.isArray(Le)?(Y(Le),console.log("Set participants from API:",Le.length)):(console.log("No participants found or invalid response"),Y([]))}catch(Le){console.error("Error fetching participants:",Le),Y([])}}),Ft=()=>$(null,null,function*(){try{console.log("Fetching chat messages for meeting:",t);const Le=yield Ct.getChatMessages(t);console.log("Chat messages response:",Le),Le&&Array.isArray(Le)?(I(Le),console.log("Set chat messages from API:",Le.length)):(console.log("No chat messages found or invalid response"),I([]))}catch(Le){console.error("Error fetching chat messages:",Le),I([])}});w.useEffect(()=>{if(k){console.log("Meeting info loaded, starting data fetch..."),Ne(),Ft();const Le=setInterval(()=>{console.log("Refreshing participants..."),Ne()},1e4),tr=setInterval(()=>{console.log("Refreshing chat..."),Ft()},5e3);return()=>{console.log("Cleaning up intervals..."),clearInterval(Le),clearInterval(tr)}}},[k]),w.useEffect(()=>{k&&!A&&Cr()},[k]);const kr=()=>$(null,null,function*(){try{console.log("Ending live meeting:",t),yield Ct.endLiveMeeting(t),console.log("Successfully ended meeting")}catch(Le){console.error("Error ending meeting:",Le),alert("    ")}finally{n("/teacher/meetings")}});return W?e(c,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:o(c,{sx:{textAlign:"center"},children:[e(Qe,{size:60,sx:{color:"#0e5181",mb:2}}),e(f,{variant:"h6",children:"  ..."})]})}):U&&!k?e(c,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:o(c,{sx:{textAlign:"center"},children:[e(f,{variant:"h6",color:"error",sx:{mb:2},children:U}),e(re,{variant:"contained",onClick:()=>n("/teacher/meetings"),sx:{bgcolor:"#0e5181"},children:"  "})]})}):o(c,{sx:{height:"100vh",display:"flex",flexDirection:"column",bgcolor:"#1a1a1a"},children:[e(Zc,{position:"static",sx:{bgcolor:"#2d2d2d",boxShadow:"none"},children:o(Jc,{sx:{justifyContent:"space-between"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(f,{variant:"h6",fontWeight:600,children:(k==null?void 0:k.title)||""}),e(_e,{label:"",color:"error",size:"small",sx:{fontWeight:600}})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(f,{variant:"body2",color:"text.secondary",children:fe(ie)}),e(xe,{color:"inherit",onClick:()=>q(!0),children:e(ed,{})}),e(re,{variant:"contained",color:"error",startIcon:e(Q1,{}),onClick:kr,sx:{bgcolor:"#d32f2f","&:hover":{bgcolor:"#b71c1c"},textTransform:"none",fontWeight:600},children:" "})]})]})}),o(c,{sx:{flex:1,display:"flex",overflow:"hidden"},children:[o(c,{sx:{flex:1,p:2,display:"flex",flexDirection:"column"},children:[o(E5,{sx:{flex:1,mb:2},children:[e(c,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #333 30%, #555 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:o(c,{sx:{textAlign:"center",color:"#fff"},children:[e(hh,{sx:{fontSize:80,mb:2,opacity:.5}}),e(f,{variant:"h6",children:" "}),e(f,{variant:"body2",sx:{opacity:.7},children:d?" ":" "})]})}),e(fW,{className:"controls-overlay",children:o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(f,{variant:"body2",color:"#fff",children:[N.length," "]}),e(c,{sx:{display:"flex",gap:1},children:e(xe,{size:"small",sx:{color:"#fff",bgcolor:"rgba(0,0,0,0.3)"},onClick:it,children:v?e(hw,{}):e(fw,{})})})]})})]}),e(le,{container:!0,spacing:1,sx:{height:120},children:N.slice(0,6).map(Le=>e(le,{item:!0,xs:2,children:e(E5,{sx:{height:"100%"},children:o(c,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #444 30%, #666 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e(Tt,{sx:{width:40,height:40},children:Le.user_name?Le.user_name.charAt(0):"?"}),e(c,{sx:{position:"absolute",bottom:4,left:4,display:"flex",gap:.5},children:Le.attendance_status==="absent"&&e(Tc,{sx:{fontSize:16,color:"#fff",bgcolor:"rgba(0,0,0,0.5)",borderRadius:1}})}),e(f,{variant:"caption",sx:{position:"absolute",bottom:4,right:4,color:"#fff",fontSize:"0.7rem"},children:Le.user_name||""})]})})},Le.id))})]}),o(c,{sx:{width:320,display:"flex",flexDirection:"column"},children:[e(De,{sx:{borderRadius:0},children:o(zn,{value:V,onChange:(Le,tr)=>L(tr),sx:{"& .MuiTab-root":{minWidth:"auto",flex:1}},children:[e(mt,{icon:e(td,{}),label:"",onClick:()=>R(!0)}),e(mt,{icon:e(Ca,{}),label:` (${N.length})`,onClick:()=>T(!0)})]})}),V===0&&o(c,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[o(c,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[e(f,{variant:"subtitle1",fontWeight:600,children:""}),o(f,{variant:"body2",color:"text.secondary",children:[N.length," "]})]}),e(c,{sx:{flex:1,overflowY:"auto",p:2},children:E.length>0?E.map(Le=>o(pW,{isOwn:Le.user===(J==null?void 0:J.id),children:[e(Tt,{sx:{width:32,height:32,fontSize:"0.8rem"},children:Le.user_name?Le.user_name.charAt(0):"?"}),o(c,{className:"message-content",children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e(f,{variant:"body2",fontWeight:600,children:Le.user_name||""}),Le.is_teacher&&e(_e,{label:"",size:"small",color:"primary",sx:{height:16,fontSize:"0.6rem"}})]}),e(f,{variant:"body2",children:Le.message}),e(f,{variant:"caption",sx:{opacity:.7},children:Le.created_at_formatted||""})]})]},Le.id)):o(c,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:[e(f,{variant:"body2",children:"   "}),e(f,{variant:"caption",children:"  "})]})}),o(c,{sx:{p:2,borderTop:"1px solid #e0e0e0"},children:[o(c,{sx:{display:"flex",gap:1,mb:1},children:[e(xe,{size:"small",children:e(Z0,{})}),e(xe,{size:"small",children:e(pw,{})})]}),e(ze,{fullWidth:!0,multiline:!0,maxRows:3,placeholder:" ...",value:j,onChange:Le=>ee(Le.target.value),onKeyPress:K,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e(re,{variant:"contained",size:"small",endIcon:e(Rh,{}),onClick:de,sx:{mt:1,borderRadius:2},disabled:!j.trim(),children:""})]})]}),V===1&&o(c,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[o(c,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[e(f,{variant:"subtitle1",fontWeight:600,children:""}),o(f,{variant:"body2",color:"text.secondary",children:[N.length,"  ",(k==null?void 0:k.max_participants)||20]})]}),e(Rr,{sx:{flex:1,overflowY:"auto"},children:N.length>0?N.map(Le=>o(ir,{sx:{py:1},children:[e(gw,{children:e(Tt,{sx:{width:40,height:40},children:Le.user_name?Le.user_name.charAt(0):"?"})}),e(Ut,{primary:o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(f,{variant:"body2",fontWeight:600,children:Le.user_name||""}),Le.is_teacher&&e(_e,{label:"",size:"small",color:"primary"}),Le.attendance_status==="attending"&&e(_e,{label:"",size:"small",color:"success"})]}),secondary:o(c,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[o(f,{variant:"caption",color:"text.secondary",children:["  ",Le.join_time_formatted||""]}),e(c,{sx:{display:"flex",gap:.5},children:Le.attendance_status==="absent"&&e(Tc,{sx:{fontSize:16,color:"#666"}})})]})})]},Le.id)):e(c,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:e(f,{variant:"body2",children:"   "})})})]})]})]}),e(c,{sx:{p:2,bgcolor:"#2d2d2d",display:"flex",justifyContent:"center",alignItems:"center"},children:o(c,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e(xe,{onClick:se,sx:{bgcolor:a?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:a?"#45a049":"#d32f2f"}},children:a?e(mw,{}):e(Tc,{})}),e(xe,{onClick:ve,sx:{bgcolor:d?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:d?"#45a049":"#d32f2f"}},children:d?e(hh,{}):e(xw,{})}),e(xe,{onClick:ge,sx:{bgcolor:h?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:h?"#f57c00":"#555"}},children:h?e(z6,{}):e(tm,{})}),e(xe,{onClick:ke,sx:{bgcolor:m?"#f44336":"#666",color:"#fff","&:hover":{bgcolor:m?"#d32f2f":"#555"}},children:m?e(Q1,{}):e(E6,{})}),e(xe,{onClick:kt,sx:{bgcolor:C?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:C?"#f57c00":"#555"}},children:C?e(bw,{}):e(yw,{})}),e(Vt,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"#555"}}),e(re,{variant:"contained",color:"error",startIcon:e(pn,{}),onClick:kr,sx:{borderRadius:2},children:" "})]})}),o(wr,{open:O,onClose:()=>q(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e(Wr,{sx:{textAlign:"center",fontWeight:600},children:" "}),e(vr,{children:o(le,{container:!0,spacing:3,sx:{mt:1},children:[o(le,{item:!0,xs:12,children:[e(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[o(f,{variant:"body2",children:[e("strong",{children:" :"})," ",k==null?void 0:k.id]}),o(f,{variant:"body2",children:[e("strong",{children:":"})," ",fe(ie)]}),o(f,{variant:"body2",children:[e("strong",{children:":"})," ",N.length,"/",(k==null?void 0:k.max_participants)||20]})]})]}),o(le,{item:!0,xs:12,children:[e(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:" "}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ze,{fullWidth:!0,value:`${window.location.origin}/student/meetings/live/${k==null?void 0:k.id}`,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e(xe,{size:"small",onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/student/meetings/live/${k==null?void 0:k.id}`),sx:{color:"#0e5181"},children:e(Th,{})})]})]})]})}),e($r,{sx:{p:3},children:e(re,{onClick:()=>q(!1),sx:{borderRadius:2},children:""})})]})]})},R5=te(c)(({theme:t})=>({position:"relative",borderRadius:12,overflow:"hidden",background:"#000","&:hover .controls-overlay":{opacity:1}})),mW=te(c)(({theme:t})=>({position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",padding:t.spacing(2),opacity:0,transition:"opacity 0.3s ease"})),xW=te(c)(({theme:t,isOwn:n})=>({display:"flex",flexDirection:n?"row-reverse":"row",marginBottom:t.spacing(1),"& .message-content":{maxWidth:"70%",padding:t.spacing(1,2),borderRadius:16,background:n?"#0e5181":"#f5f5f5",color:n?"#fff":"#333",margin:t.spacing(0,1)}})),bW=()=>{const{meetingId:t}=cr(),n=ct(),[a,l]=w.useState(!0),[d,p]=w.useState(!0),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[C,_]=w.useState(!1),[z,R]=w.useState(""),[B,T]=w.useState(0),[O,q]=w.useState(!1),[j,ee]=w.useState(null),[V,L]=w.useState(!0),[k,G]=w.useState(null),[W,M]=w.useState([]),[U,H]=w.useState([]),[N,Y]=w.useState(!1),[E,I]=w.useState(null),[A,Q]=w.useState(null);w.useEffect(()=>{const Ne=localStorage.getItem("user");if(Ne)try{const Ft=JSON.parse(Ne);I(Ft)}catch(Ft){console.error("Error parsing user from localStorage:",Ft)}},[]),w.useEffect(()=>{t&&$(null,null,function*(){try{L(!0),console.log("Fetching meeting details for ID:",t);const Ft=yield Ct.getMeetingDetails(t);console.log("Meeting details response:",Ft),ee(Ft),G(null);try{console.log("Attempting auto join meeting:",t);const kr=yield Ct.autoJoinMeeting(t);console.log("Successfully auto joined meeting:",kr),Y(!0),kr.already_attended?(Q("   "),console.log("   ")):kr.attendance_status==="present"?(Q("   - "),console.log("   - ")):kr.attendance_status==="late"&&(Q("   - "),console.log("   - ")),setTimeout(()=>{Q(null)},5e3)}catch(kr){console.error("Error auto joining meeting:",kr);try{console.log("Auto join failed, trying to register first..."),yield Ct.registerForMeeting(t),console.log("Successfully registered for meeting");const Le=yield Ct.autoJoinMeeting(t);console.log("Successfully auto joined meeting after registration:",Le),Y(!0)}catch(Le){console.error("Error registering/auto joining meeting:",Le),alert("    ")}}}catch(Ft){console.error("Error fetching meeting details:",Ft),G("     ")}finally{L(!1)}})},[t]);const[J,P]=w.useState(0);w.useEffect(()=>{const Ne=setInterval(()=>{P(Ft=>Ft+1)},1e3);return()=>clearInterval(Ne)},[]);const ie=Ne=>{const Ft=Math.floor(Ne/3600),kr=Math.floor(Ne%3600/60),Le=Ne%60;return`${Ft.toString().padStart(2,"0")}:${kr.toString().padStart(2,"0")}:${Le.toString().padStart(2,"0")}`},ue=()=>$(null,null,function*(){if(z.trim())try{console.log("Sending message:",z);const Ne=yield Ct.sendChatMessage(t,z);console.log("Message sent successfully:",Ne),R(""),kt()}catch(Ne){console.error("Error sending message:",Ne),alert("    ")}}),fe=Ne=>{Ne.key==="Enter"&&!Ne.shiftKey&&(Ne.preventDefault(),ue())},de=()=>l(!a),K=()=>p(!d),se=()=>y(!m),ve=()=>x(!h),ge=()=>q(!O),ke=()=>$(null,null,function*(){try{console.log("Marking attendance for meeting:",t),yield Ct.markAttendance(t),console.log("Successfully marked attendance")}catch(Ne){console.error("Error marking attendance:",Ne),console.log("Continuing without marking attendance")}});w.useEffect(()=>{N&&setTimeout(()=>{ke()},2e3)},[N]);const it=()=>$(null,null,function*(){try{console.log("Fetching participants for meeting:",t);const Ne=yield Ct.getMeetingParticipants(t);console.log("Participants response:",Ne),Ne&&Array.isArray(Ne)?(M(Ne),console.log("Set participants from API:",Ne.length)):(console.log("No participants found or invalid response"),M([]))}catch(Ne){console.error("Error fetching participants:",Ne),M([])}}),kt=()=>$(null,null,function*(){try{console.log("Fetching chat messages for meeting:",t);const Ne=yield Ct.getChatMessages(t);console.log("Chat messages response:",Ne),Ne&&Array.isArray(Ne)?(H(Ne),console.log("Set chat messages from API:",Ne.length)):(console.log("No chat messages found or invalid response"),H([]))}catch(Ne){console.error("Error fetching chat messages:",Ne),H([])}});w.useEffect(()=>{if(j&&N){console.log("Meeting info loaded, starting data fetch..."),it(),kt();const Ne=setInterval(()=>{console.log("Refreshing participants..."),it()},1e4),Ft=setInterval(()=>{console.log("Refreshing chat..."),kt()},5e3);return()=>{console.log("Cleaning up intervals..."),clearInterval(Ne),clearInterval(Ft)}}},[j,N]);const Cr=()=>$(null,null,function*(){try{console.log("Leaving meeting:",t),yield Ct.leaveMeeting(t),console.log("Successfully left meeting")}catch(Ne){console.error("Error leaving meeting:",Ne),alert("    ")}finally{n("/student/meetings")}});return V?e(c,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:o(c,{sx:{textAlign:"center"},children:[e(Qe,{size:60,sx:{color:"#0e5181",mb:2}}),e(f,{variant:"h6",children:"  ..."})]})}):k&&!j?e(c,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:o(c,{sx:{textAlign:"center"},children:[e(f,{variant:"h6",color:"error",sx:{mb:2},children:k}),e(re,{variant:"contained",onClick:()=>n("/student/meetings"),sx:{bgcolor:"#0e5181"},children:"  "})]})}):o(c,{sx:{height:"100vh",display:"flex",flexDirection:"column",bgcolor:"#1a1a1a"},children:[A&&e(Be,{severity:"success",sx:{position:"fixed",top:20,left:"50%",transform:"translateX(-50%)",zIndex:9999,minWidth:300,textAlign:"center"},onClose:()=>Q(null),children:A}),e(Zc,{position:"static",sx:{bgcolor:"#2d2d2d",boxShadow:"none"},children:o(Jc,{sx:{justifyContent:"space-between"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(f,{variant:"h6",fontWeight:600,children:(j==null?void 0:j.title)||""}),e(_e,{label:"",color:"error",size:"small",sx:{fontWeight:600}})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(f,{variant:"body2",color:"text.secondary",children:ie(J)}),e(xe,{color:"inherit",onClick:()=>_(!0),children:e(ed,{})}),e(xe,{color:"inherit",children:e(K0,{})})]})]})}),o(c,{sx:{flex:1,display:"flex",overflow:"hidden"},children:[o(c,{sx:{flex:1,p:2,display:"flex",flexDirection:"column"},children:[o(R5,{sx:{flex:1,mb:2},children:[e(c,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #333 30%, #555 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:o(c,{sx:{textAlign:"center",color:"#fff"},children:[e(hh,{sx:{fontSize:80,mb:2,opacity:.5}}),e(f,{variant:"h6",children:(j==null?void 0:j.creator_name)||""}),e(f,{variant:"body2",sx:{opacity:.7},children:d?" ":" "})]})}),e(mW,{className:"controls-overlay",children:o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(f,{variant:"body2",color:"#fff",children:[W.length," "]}),e(c,{sx:{display:"flex",gap:1},children:e(xe,{size:"small",sx:{color:"#fff",bgcolor:"rgba(0,0,0,0.3)"},onClick:se,children:m?e(hw,{}):e(fw,{})})})]})})]}),e(le,{container:!0,spacing:1,sx:{height:120},children:W.slice(0,6).map(Ne=>e(le,{item:!0,xs:2,children:e(R5,{sx:{height:"100%"},children:o(c,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #444 30%, #666 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e(Tt,{sx:{width:40,height:40},children:Ne.user_name?Ne.user_name.charAt(0):"?"}),e(c,{sx:{position:"absolute",bottom:4,left:4,display:"flex",gap:.5},children:Ne.attendance_status==="absent"&&e(Tc,{sx:{fontSize:16,color:"#fff",bgcolor:"rgba(0,0,0,0.5)",borderRadius:1}})}),e(f,{variant:"caption",sx:{position:"absolute",bottom:4,right:4,color:"#fff",fontSize:"0.7rem"},children:Ne.user_name||""})]})})},Ne.id))})]}),o(c,{sx:{width:320,display:"flex",flexDirection:"column"},children:[e(De,{sx:{borderRadius:0},children:o(zn,{value:B,onChange:(Ne,Ft)=>T(Ft),sx:{"& .MuiTab-root":{minWidth:"auto",flex:1}},children:[e(mt,{icon:e(td,{}),label:"",onClick:()=>S(!0)}),e(mt,{icon:e(zt,{}),label:"",onClick:()=>S(!1)})]})}),B===0&&o(c,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[o(c,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[e(f,{variant:"subtitle1",fontWeight:600,children:""}),o(f,{variant:"body2",color:"text.secondary",children:[W.length," "]})]}),e(c,{sx:{flex:1,overflowY:"auto",p:2},children:U.length>0?U.map(Ne=>o(xW,{isOwn:Ne.user===(E==null?void 0:E.id),children:[e(Tt,{sx:{width:32,height:32,fontSize:"0.8rem"},children:Ne.user_name?Ne.user_name.charAt(0):"?"}),o(c,{className:"message-content",children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e(f,{variant:"body2",fontWeight:600,children:Ne.user_name||""}),Ne.is_teacher&&e(_e,{label:"",size:"small",color:"primary",sx:{height:16,fontSize:"0.6rem"}})]}),e(f,{variant:"body2",children:Ne.message}),e(f,{variant:"caption",sx:{opacity:.7},children:Ne.created_at_formatted||""})]})]},Ne.id)):o(c,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:[e(f,{variant:"body2",children:"   "}),e(f,{variant:"caption",children:"  "})]})}),o(c,{sx:{p:2,borderTop:"1px solid #e0e0e0"},children:[o(c,{sx:{display:"flex",gap:1,mb:1},children:[e(xe,{size:"small",children:e(Z0,{})}),e(xe,{size:"small",children:e(pw,{})})]}),e(ze,{fullWidth:!0,multiline:!0,maxRows:3,placeholder:" ...",value:z,onChange:Ne=>R(Ne.target.value),onKeyPress:fe,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e(re,{variant:"contained",size:"small",endIcon:e(Rh,{}),onClick:ue,sx:{mt:1,borderRadius:2},disabled:!z.trim(),children:""})]})]}),B===1&&o(c,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[o(c,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[e(f,{variant:"subtitle1",fontWeight:600,children:" "}),e(f,{variant:"body2",color:"text.secondary",children:j!=null&&j.materials?"1  ":"   "})]}),e(Rr,{sx:{flex:1,overflowY:"auto"},children:j!=null&&j.materials?o(ir,{sx:{py:1},children:[e(gw,{children:e(Tt,{sx:{width:40,height:40,bgcolor:"#0e5181"},children:e(nd,{})})}),e(Ut,{primary:" ",secondary:e(c,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:e(f,{variant:"caption",color:"text.secondary",children:" "})})}),e(xe,{size:"small",onClick:()=>window.open(j.materials,"_blank"),sx:{color:"#0e5181"},children:e(Kn,{})})]}):e(c,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:e(f,{variant:"body2",children:"   "})})})]})]})]}),e(c,{sx:{p:2,bgcolor:"#2d2d2d",display:"flex",justifyContent:"center",alignItems:"center"},children:o(c,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e(xe,{onClick:de,sx:{bgcolor:a?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:a?"#45a049":"#d32f2f"}},children:a?e(mw,{}):e(Tc,{})}),e(xe,{onClick:K,sx:{bgcolor:d?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:d?"#45a049":"#d32f2f"}},children:d?e(hh,{}):e(xw,{})}),e(xe,{onClick:ge,sx:{bgcolor:O?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:O?"#f57c00":"#555"}},children:e(R6,{})}),e(xe,{onClick:ve,sx:{bgcolor:h?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:h?"#f57c00":"#555"}},children:h?e(bw,{}):e(yw,{})}),e(Vt,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"#555"}}),e(re,{variant:"contained",color:"error",startIcon:e(pn,{}),onClick:Cr,sx:{borderRadius:2},children:" "})]})}),o(wr,{open:C,onClose:()=>_(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e(Wr,{sx:{textAlign:"center",fontWeight:600},children:" "}),e(vr,{children:o(le,{container:!0,spacing:3,sx:{mt:1},children:[o(le,{item:!0,xs:12,children:[e(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:" "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:1},children:[o(f,{variant:"body2",children:[e("strong",{children:":"})," ",(j==null?void 0:j.title)||""]}),o(f,{variant:"body2",children:[e("strong",{children:":"})," ",(j==null?void 0:j.creator_name)||" "]}),o(f,{variant:"body2",children:[e("strong",{children:":"})," ",ie(J)]}),o(f,{variant:"body2",children:[e("strong",{children:":"})," ",W.length,"/",(j==null?void 0:j.max_participants)||20]})]})]}),o(le,{item:!0,xs:12,children:[e(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:" "}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(ze,{fullWidth:!0,value:`${window.location.origin}/student/meetings/live/${(j==null?void 0:j.id)||t}`,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e(xe,{size:"small",onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/student/meetings/live/${(j==null?void 0:j.id)||t}`),sx:{color:"#0e5181"},children:e(Th,{})})]})]}),o(le,{item:!0,xs:12,children:[e(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"  "}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(f,{variant:"body2",children:""}),e(re,{variant:a?"contained":"outlined",size:"small",onClick:de,sx:{borderRadius:2},children:a?"":""})]}),o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(f,{variant:"body2",children:""}),e(re,{variant:d?"contained":"outlined",size:"small",onClick:K,sx:{borderRadius:2},children:d?"":""})]})]})]})]})}),e($r,{sx:{p:3},children:e(re,{onClick:()=>_(!1),sx:{borderRadius:2},children:""})})]})]})},yW=yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,HC=yt`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`,vW=yt`
  0% { box-shadow: 0 0 0 0 rgba(25, 118, 210, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(25, 118, 210, 0); }
  100% { box-shadow: 0 0 0 0 rgba(25, 118, 210, 0); }
`,T5=te(c)(({theme:t})=>({background:"linear-gradient(135deg, #0e5181 0%, #1a5f8a 50%, #0a3d62 100%)",color:"white",padding:t.spacing(8,0,4),textAlign:"center",position:"relative",overflow:"hidden",minHeight:"60vh",display:"flex",alignItems:"center","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"200%",height:"200%",background:`radial-gradient(circle, ${pe("#ffffff",.1)} 0%, transparent 70%)`,transform:"translate(-50%, -50%)",animation:`${yW} 6s ease-in-out infinite`}})),wW=te(nt)(({theme:t})=>({height:"100%",display:"flex",flexDirection:"row",borderRadius:20,overflow:"hidden",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(25, 118, 210, 0.1)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:`${HC} 3s ease-in-out infinite`},"&:hover":{transform:"translateY(-8px) rotateX(2deg)",boxShadow:"0 20px 40px rgba(25, 118, 210, 0.15)","& .article-image":{transform:"scale(1.1) rotate(2deg)"},"& .read-more":{transform:"translateX(8px)"},"& .card-content":{transform:"translateX(-4px)"}}})),SW=te(_e)(({theme:t,category:n})=>X(X(X(X(X(X({fontWeight:800,borderRadius:"25px",fontSize:"0.65rem",height:28,textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backdropFilter:"blur(10px)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px) scale(1.05)",boxShadow:"0 6px 16px rgba(0,0,0,0.2)"}},n===" "&&{background:"linear-gradient(135deg, #4CAF50, #66BB6A)",color:"white"}),n===" "&&{background:"linear-gradient(135deg, #2196F3, #42A5F5)",color:"white"}),n===""&&{background:"linear-gradient(135deg, #FF9800, #FFB74D)",color:"white"}),n===" "&&{background:"linear-gradient(135deg, #9C27B0, #BA68C8)",color:"white"}),n===" "&&{background:"linear-gradient(135deg, #F44336, #EF5350)",color:"white"}),n===" "&&{background:"linear-gradient(135deg, #607D8B, #90A4AE)",color:"white"})),CW=te(ze)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:25,backgroundColor:pe("#ffffff",.95),backdropFilter:"blur(10px)",fontSize:"1.1rem","&:hover fieldset":{borderColor:"#0e5181"},"&.Mui-focused fieldset":{borderColor:"#0e5181",borderWidth:2}}})),kW=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:20,background:`linear-gradient(135deg, ${pe("#ffffff",.95)}, ${pe("#f8f9ff",.95)})`,backdropFilter:"blur(20px)",boxShadow:`0 8px 32px ${pe("#1976d2",.08)}`,border:`1px solid ${pe("#1976d2",.1)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:`${HC} 3s ease-in-out infinite`}})),M5=te(xe)(({theme:t,variant:n})=>X(X({width:40,height:40,borderRadius:"14px",transition:"all 0.3s ease"},n==="like"&&{backgroundColor:pe("#1976d2",.1),color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white",transform:"scale(1.1)"}}),n==="bookmark"&&{backgroundColor:pe("#42a5f5",.1),color:"#42a5f5","&:hover":{backgroundColor:"#42a5f5",color:"white",transform:"scale(1.1)"}})),_W=te(c)(({theme:t,category:n})=>({display:"flex",alignItems:"center",gap:10,cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",fontWeight:700,fontSize:"0.85rem",color:"#1976d2",padding:"8px 16px",borderRadius:"25px",background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(66, 165, 245, 0.1))",border:"1px solid rgba(25, 118, 210, 0.2)","& .arrow-circle":X(X(X(X(X(X({width:28,height:28,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},n===" "&&{background:"linear-gradient(135deg, #4CAF50, #66BB6A)"}),n===" "&&{background:"linear-gradient(135deg, #2196F3, #42A5F5)"}),n===""&&{background:"linear-gradient(135deg, #FF9800, #FFB74D)"}),n===" "&&{background:"linear-gradient(135deg, #9C27B0, #BA68C8)"}),n===" "&&{background:"linear-gradient(135deg, #F44336, #EF5350)"}),n===" "&&{background:"linear-gradient(135deg, #607D8B, #90A4AE)"}),"&:hover":{background:"linear-gradient(135deg, rgba(25, 118, 210, 0.15), rgba(66, 165, 245, 0.15))",transform:"translateY(-2px)",boxShadow:"0 8px 20px rgba(25, 118, 210, 0.2)","& .arrow-circle":{transform:"scale(1.15) rotate(15deg)",boxShadow:"0 6px 16px rgba(0,0,0,0.25)"}}})),AW=()=>{jt();const t=ct(),[n,a]=w.useState([]),[l,d]=w.useState(!0),[p,h]=w.useState(""),[x,m]=w.useState("all"),[y,v]=w.useState("latest"),[S,C]=w.useState(1),[_,z]=w.useState(1),[R,B]=w.useState(new Set),[T,O]=w.useState(new Set);w.useEffect(()=>{$(null,null,function*(){try{d(!0),console.log("Fetching articles from API...");const E=yield Fr.getArticles({page:S,page_size:6,search:p,status:"published",ordering:y==="latest"?"-created_at":y==="oldest"?"created_at":y==="popular"?"-views_count":"-created_at"});console.log("Articles API response:",E);let I=[],A=0;Array.isArray(E)?(I=E,A=E.length):E.results?(I=E.results,A=E.count||E.results.length):E.data?(I=E.data,A=E.total||E.data.length):(I=[],A=0);const Q=I.map(J=>{var P,ie,ue,fe,de;return{id:J.id,title:J.title||"",summary:J.summary||"",content:J.content||"",author:{name:J.author_name||((P=J.author)==null?void 0:P.name)||((ie=J.author)==null?void 0:ie.first_name)||"  ",avatar:((ue=J.author)==null?void 0:ue.image_profile)||((fe=J.author)==null?void 0:fe.avatar)||`https://via.placeholder.com/40x40/1976d2/ffffff?text=${(J.author_name||((de=J.author)==null?void 0:de.name)||"A").charAt(0)}`},category:J.category||"",tags:J.tags?J.tags.map(K=>K.name||K):[],image:J.image?J.image.startsWith("http")?J.image:`http://localhost:8000${J.image}`:"https://via.placeholder.com/400x250/1976d2/ffffff?text=No+Image",published_at:J.published_at||J.created_at,reading_time:J.reading_time||5,views_count:J.views_count||0,likes_count:J.likes_count||0,comments_count:J.comments_count||0,featured:J.featured||!1,rating:4.5}});a(Q),z(Math.ceil(A/6)),d(!1)}catch(E){console.error("Error fetching articles:",E),d(!1)}})},[S,p,x,y]);const q=[{value:"all",label:""},{value:" ",label:" "},{value:" ",label:" "},{value:"",label:""},{value:" ",label:" "},{value:" ",label:" "},{value:" ",label:" "}],j=[{value:"latest",label:""},{value:"oldest",label:""},{value:"popular",label:" "},{value:"rating",label:" "}],ee=Y=>{h(Y.target.value),C(1)},V=Y=>{m(Y.target.value),C(1)},L=Y=>{v(Y.target.value),C(1)},k=(Y,E)=>{C(E)},G=Y=>{B(E=>{const I=new Set(E);return I.has(Y)?I.delete(Y):I.add(Y),I})},W=Y=>{O(E=>{const I=new Set(E);return I.has(Y)?I.delete(Y):I.add(Y),I})},H=[...n.filter(Y=>{const E=Y.title.toLowerCase().includes(p.toLowerCase())||Y.summary.toLowerCase().includes(p.toLowerCase()),I=x==="all"||Y.category===x;return E&&I})].sort((Y,E)=>{switch(y){case"latest":return new Date(E.published_at)-new Date(Y.published_at);case"oldest":return new Date(Y.published_at)-new Date(E.published_at);case"popular":return E.views_count-Y.views_count;case"rating":return E.rating-Y.rating;default:return 0}}).slice((S-1)*6,S*6),N=Y=>e(It.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},whileHover:{scale:1.02},children:o(wW,{sx:{height:{xs:"180px",sm:"240px",md:"280px"},cursor:"pointer",flexDirection:{xs:"column",sm:"row"}},onClick:()=>t(`/articles/${Y.slug||Y.id}`),children:[o(c,{sx:{position:"relative",overflow:"hidden",width:{xs:"140px",sm:"180px",md:"220px"},minWidth:{xs:"140px",sm:"180px",md:"220px"},height:"100%"},children:[e(q0,{component:"img",height:"100%",width:"100%",image:Y.image,alt:Y.title,className:"article-image",sx:{objectFit:"cover",transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:{xs:"20px 20px 0 0",sm:"0 20px 20px 0"}},onError:E=>{E.target.src="https://via.placeholder.com/200x180/1976d2/ffffff?text=No+Image"}}),e(c,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), transparent)",borderRadius:{xs:"20px 20px 0 0",sm:"0 20px 20px 0"}}})]}),o(pt,{sx:{flexGrow:1,p:{xs:2,sm:3},display:"flex",flexDirection:"column",gap:{xs:1,sm:1.5},className:"card-content",position:"relative"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e(SW,{label:Y.category,size:"small",category:Y.category}),o(c,{sx:{display:"flex",gap:.5},children:[e(Je,{title:T.has(Y.id)?" ":"",children:e(M5,{variant:"like",onClick:E=>{E.stopPropagation(),W(Y.id)},sx:{backgroundColor:T.has(Y.id)?"#1976d2":pe("#1976d2",.1),color:T.has(Y.id)?"white":"#1976d2","&:hover":{backgroundColor:T.has(Y.id)?"#1565c0":"#1976d2",color:"white"}},children:T.has(Y.id)?e(ya,{sx:{fontSize:20}}):e(lh,{sx:{fontSize:20}})})}),e(Je,{title:R.has(Y.id)?" ":"",children:e(M5,{variant:"bookmark",onClick:E=>{E.stopPropagation(),G(Y.id)},sx:{backgroundColor:R.has(Y.id)?"#42a5f5":pe("#42a5f5",.1),color:R.has(Y.id)?"white":"#42a5f5","&:hover":{backgroundColor:R.has(Y.id)?"#1976d2":"#42a5f5",color:"white"}},children:R.has(Y.id)?e(zh,{sx:{fontSize:20}}):e(jc,{sx:{fontSize:20}})})})]})]}),e(f,{variant:"h6",component:"h3",sx:{fontWeight:800,lineHeight:1.2,color:"#1a1a1a",fontSize:{xs:"1.1rem",sm:"1.2rem"},mb:1,display:"-webkit-box",WebkitLineClamp:{xs:3,sm:4},WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:Y.title}),e(f,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.4,fontSize:{xs:"0.9rem",sm:"1rem"},mb:2,color:"#666",display:"-webkit-box",WebkitLineClamp:{xs:3,sm:4},WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:Y.summary}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[o(_W,{category:Y.category,className:"read-more",children:[" ",e(c,{className:"arrow-circle",children:e(Li,{sx:{fontSize:14,color:"white"}})})]}),o(c,{sx:{display:"flex",gap:{xs:1,sm:1.5},alignItems:"center",flexWrap:"wrap"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:.5,backgroundColor:"rgba(25, 118, 210, 0.1)",padding:"4px 8px",borderRadius:"12px"},children:[e(Ln,{sx:{fontSize:12,color:"#1976d2"}}),o(f,{variant:"caption",sx:{fontWeight:600,color:"#1976d2",fontSize:"0.65rem"},children:[Y.reading_time," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5,backgroundColor:"rgba(76, 175, 80, 0.1)",padding:"4px 8px",borderRadius:"12px"},children:[e(Lr,{sx:{fontSize:12,color:"#4CAF50"}}),e(f,{variant:"caption",sx:{fontWeight:600,color:"#4CAF50",fontSize:"0.65rem"},children:Y.views_count.toLocaleString()})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5,backgroundColor:"rgba(244, 67, 54, 0.1)",padding:"4px 8px",borderRadius:"12px"},children:[e(ya,{sx:{fontSize:12,color:"#F44336"}}),e(f,{variant:"caption",sx:{fontWeight:600,color:"#F44336",fontSize:"0.65rem"},children:(Y.likes_count+(T.has(Y.id)?1:0)).toLocaleString()})]})]})]})]})]})});return l?o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e(On,{}),o(c,{component:"main",sx:{flex:1},children:[e(T5,{children:o(Xe,{children:[e(gt,{variant:"text",width:300,height:80,sx:{mx:"auto",mb:3}}),e(gt,{variant:"text",width:500,height:30,sx:{mx:"auto",mb:4}}),e(gt,{variant:"rectangular",width:400,height:50,sx:{mx:"auto",borderRadius:"25px"}})]})}),e(Xe,{sx:{py:4},children:e(le,{container:!0,spacing:3,children:[1,2,3,4,5,6].map(Y=>e(le,{item:!0,xs:12,lg:6,children:o(c,{sx:{display:"flex",height:280,borderRadius:3,overflow:"hidden"},children:[e(gt,{variant:"rectangular",width:250,height:"100%"}),o(c,{sx:{flex:1,p:2,position:"relative"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e(gt,{variant:"rectangular",width:80,height:24,sx:{borderRadius:1}}),o(c,{sx:{display:"flex",gap:.5},children:[e(gt,{variant:"circular",width:40,height:40}),e(gt,{variant:"circular",width:40,height:40})]})]}),e(gt,{variant:"text",width:"40%",sx:{mb:1}}),e(gt,{variant:"text",sx:{mb:1}}),e(gt,{variant:"text",width:"80%",sx:{mb:2}}),e(gt,{variant:"text",width:"60%"}),o(c,{sx:{display:"flex",gap:1,mt:"auto"},children:[e(gt,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}}),e(gt,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}}),e(gt,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}})]})]})]})},Y))})})]}),e(Bn,{})]}):o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e(On,{}),o(c,{component:"main",sx:{flex:1},children:[e(T5,{children:e(Xe,{children:o(It.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},style:{position:"relative",zIndex:2},children:[e(f,{variant:"h3",component:"h1",sx:{fontWeight:800,mb:3,color:"#ffffff",fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},lineHeight:1.2,textShadow:"0 4px 20px rgba(0,0,0,0.4)"},children:""}),e(f,{variant:"body1",sx:{opacity:.95,mb:4,fontWeight:400,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.2rem"},maxWidth:"600px",mx:"auto",textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:"       "}),e(It.div,{whileHover:{scale:1.02},whileTap:{scale:.98},style:{width:"100%",maxWidth:"400px",margin:"0 auto"},children:e(c,{sx:{position:"relative",maxWidth:"500px",mx:"auto","&::before":{content:'""',position:"absolute",top:"-3px",left:"-3px",right:"-3px",bottom:"-3px",background:"linear-gradient(45deg, #0e5181, #1a5f8a, #0a3d62)",borderRadius:"28px",zIndex:-1,opacity:.4,animation:`${vW} 3s ease-in-out infinite`}},children:e(CW,{placeholder:"  ...",value:p,onChange:ee,InputProps:{startAdornment:e(Vr,{position:"start",children:e(lo,{sx:{color:"#0e5181",ml:1,fontSize:"1.2rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})})},sx:{maxWidth:500,width:"100%",backgroundColor:"rgba(255, 255, 255, 0.98)",borderRadius:"25px",backdropFilter:"blur(15px)",boxShadow:"0 12px 40px rgba(0, 0, 0, 0.15)","& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none",boxShadow:"0 0 0 3px rgba(14, 81, 129, 0.6)"},paddingRight:"15px"},"& .MuiInputBase-input":{padding:"12px 15px",fontSize:"1rem","&::placeholder":{opacity:.7,color:"#666"}}}})})})]})})}),o(Xe,{sx:{py:8},children:[e(kW,{sx:{mb:6},children:o(c,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[o(f,{variant:"h6",sx:{fontWeight:700,mr:2,color:"#1976d2",display:"flex",alignItems:"center",gap:1},children:[e(co,{})," :"]}),o(Wt,{sx:{minWidth:150},children:[e(Ot,{children:""}),e(Bt,{value:x,onChange:V,label:"",size:"small",children:q.map(Y=>e(We,{value:Y.value,children:Y.label},Y.value))})]}),o(Wt,{sx:{minWidth:150},children:[e(Ot,{children:""}),e(Bt,{value:y,onChange:L,label:"",size:"small",children:j.map(Y=>e(We,{value:Y.value,children:Y.label},Y.value))})]})]})}),H.length>0?o(c,{children:[e(le,{container:!0,spacing:3,children:H.map(Y=>e(le,{item:!0,xs:12,lg:6,children:N(Y)},Y.id))}),_>1&&e(c,{sx:{display:"flex",justifyContent:"center",mt:6},children:e(T6,{count:_,page:S,onChange:k,color:"primary",size:"large",sx:{"& .MuiPaginationItem-root":{borderRadius:2,fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{background:"linear-gradient(45deg, #1976d2, #42a5f5)",color:"white",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"}}})})]}):e(c,{sx:{textAlign:"center",py:8},children:o(It.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[o(f,{variant:"h6",color:"text.secondary",sx:{mb:2},children:["   ",p&&`  "${p}"`]}),e(re,{variant:"outlined",onClick:()=>{h(""),m("all")},sx:{borderRadius:2,borderColor:"#1976d2",color:"#1976d2","&:hover":{borderColor:"#1565c0",backgroundColor:pe("#1976d2",.08)}},children:"  "})]})})]})]}),e(Bn,{})]})},I5=te(c)(({theme:t})=>({background:"linear-gradient(135deg, #0e5181 0%, #0a3d5f 50%, #0e5181 100%)",color:"white",padding:t.spacing(4,0,3),position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.15"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.4},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%)",transform:"translate(-50%, -50%)"},"& .animated-bg":{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.15) 50%, transparent 70%)",backgroundSize:"200% 200%",zIndex:1},"& .content":{position:"relative",zIndex:2},"& .stats-item":{display:"flex",alignItems:"center",gap:.5,padding:"6px 10px",borderRadius:"16px",backgroundColor:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.25)",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}}})),zW=te(c)(({theme:t})=>({width:"70%",height:500,borderRadius:t.spacing(3),position:"relative",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(66, 165, 245, 0.1))",border:"2px solid rgba(25, 118, 210, 0.2)",[t.breakpoints.down("lg")]:{width:"85%",height:450},[t.breakpoints.down("md")]:{width:"90%",height:400},[t.breakpoints.down("sm")]:{width:"100%",height:350},"& img":{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",borderRadius:t.spacing(3),transition:"transform 0.4s ease"},"&:hover img":{transform:"scale(1.05)"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(66, 165, 245, 0.1))",borderRadius:t.spacing(3),zIndex:1},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",borderRadius:`${t.spacing(3)} ${t.spacing(3)} 0 0`,zIndex:2}})),Yu=te(nt)(({theme:t})=>({borderRadius:t.spacing(3),border:"1px solid rgba(25, 118, 210, 0.1)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 255, 0.95))",backdropFilter:"blur(20px)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:"shimmer 3s ease-in-out infinite"},"@keyframes shimmer":{"0%":{backgroundPosition:"-200% 0"},"100%":{backgroundPosition:"200% 0"}},"&:hover":{boxShadow:"0 20px 40px rgba(25, 118, 210, 0.15)",transform:"translateY(-8px) rotateX(2deg)"}})),EW=te(De)(({theme:t})=>({padding:t.spacing(3),marginBottom:t.spacing(2),borderRadius:t.spacing(2),border:`1px solid ${t.palette.divider}`,transition:"all 0.3s ease",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 255, 0.95))",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #1976d2, #42a5f5)"},"&:hover":{boxShadow:"0 8px 32px rgba(25, 118, 210, 0.15)",transform:"translateY(-4px)",border:"1px solid rgba(25, 118, 210, 0.2)"}})),RW=te(De)(({theme:t})=>({padding:t.spacing(3),marginBottom:t.spacing(3),borderRadius:t.spacing(2),background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 255, 0.95))",backdropFilter:"blur(10px)",border:"1px solid rgba(25, 118, 210, 0.1)",boxShadow:"0 4px 20px rgba(25, 118, 210, 0.08)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:"shimmer 3s ease-in-out infinite"},"@keyframes shimmer":{"0%":{backgroundPosition:"-200% 0"},"100%":{backgroundPosition:"200% 0"}}})),TW=()=>{var Q,J,P,ie,ue,fe;const t=jt(),n=ct(),{slug:a}=cr();Fn(t.breakpoints.down("lg"));const{isAuthenticated:l}=uo(),[d,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[C,_]=w.useState(""),[z,R]=w.useState([]),[B,T]=w.useState(null),[O,q]=w.useState(""),[j,ee]=w.useState(!1),[V,L]=w.useState([]),[k,G]=w.useState(null),[W,M]=w.useState([]);w.useEffect(()=>{a&&$(null,null,function*(){var K,se,ve,ge,ke,it,kt,Cr,Ne,Ft,kr,Le,tr,_r,jn,hn,zi,qr,ii,ai,xn,Gt,Yr;try{x(!0),console.log("Fetching article with slug:",a);let Re;try{Re=yield Fr.getArticleBySlug(a)}catch(Ie){const Ke=parseInt(a);if(!isNaN(Ke))Re=yield Fr.getArticle(Ke);else throw Ie}console.log("Article API response:",Re);const Nn=Re.author||Re.author_id||Re.created_by||Re.user,oi=Re.author_name||((K=Re.author)==null?void 0:K.name)||((se=Re.author)==null?void 0:se.first_name)||((ve=Re.author)==null?void 0:ve.last_name)||Re.created_by_name||Re.user_name||"  ",Ei=Re.author_avatar||((ge=Re.author)==null?void 0:ge.avatar)||((ke=Re.author)==null?void 0:ke.image_profile)||Re.created_by_avatar||Re.user_avatar||`https://via.placeholder.com/120x120/1976d2/ffffff?text=${oi.charAt(0)}`;console.log("Extracted author info:",{authorId:Nn,authorName:oi,authorAvatar:Ei}),console.log("Full author response:",Re.author),console.log("Author name from response:",Re.author_name);const ae={id:Re.id,title:Re.title||"",slug:Re.slug||a,content:Re.content||"",summary:Re.summary||"",author:{id:Nn,name:oi||((kt=(it=Re.author)==null?void 0:it.profile)==null?void 0:kt.name)||((Cr=Re.author)==null?void 0:Cr.first_name)||((Ne=Re.author)==null?void 0:Ne.username)||"  ",avatar:Ei,bio:Re.author_bio||((Ft=Re.author)==null?void 0:Ft.shortBio)||((kr=Re.author)==null?void 0:kr.bio)||Re.created_by_bio||Re.user_bio||"     ",specialization:Re.author_specialization||((Le=Re.author)==null?void 0:Le.status)||Re.created_by_specialization||Re.user_specialization||"",experience:Re.author_experience||((tr=Re.author)==null?void 0:tr.experience)||Re.created_by_experience||Re.user_experience||"  ",courses_count:Re.author_courses_count||((_r=Re.author)==null?void 0:_r.courses_count)||Re.created_by_courses_count||Re.user_courses_count||0,students_count:Re.author_students_count||((jn=Re.author)==null?void 0:jn.students_count)||Re.created_by_students_count||Re.user_students_count||0,rating:Re.author_rating||((hn=Re.author)==null?void 0:hn.rating)||Re.created_by_rating||Re.user_rating||4.5,social_links:Re.author_social_links||((zi=Re.author)==null?void 0:zi.social_links)||Re.created_by_social_links||Re.user_social_links||{linkedin:((qr=Re.author)==null?void 0:qr.linkedin)||"",twitter:((ii=Re.author)==null?void 0:ii.twitter)||"",facebook:((ai=Re.author)==null?void 0:ai.facebook)||"",instagram:((xn=Re.author)==null?void 0:xn.instagram)||"",github:((Gt=Re.author)==null?void 0:Gt.github)||"",youtube:((Yr=Re.author)==null?void 0:Yr.youtube)||""}},category:Re.category||Re.category_name||"",category_id:Re.category_id,tags:Re.tags?Array.isArray(Re.tags)?Re.tags.map(Ie=>Ie.name||Ie):[Re.tags]:[],image:Re.image?Re.image.startsWith("http")?Re.image:`http://localhost:8000${Re.image}`:"https://via.placeholder.com/1200x600/1976d2/ffffff?text=No+Image",published_at:Re.published_at||Re.created_at,reading_time:Re.reading_time||5,views_count:Re.views_count||0,likes_count:Re.likes_count||0,comments_count:Re.comments_count||0,featured:Re.featured||!1,rating:Re.rating||4.5,meta_description:Re.meta_description||"",meta_keywords:Re.meta_keywords||""};console.log("Transformed article data:",ae),console.log("Article image URL:",ae.image),p(ae),$(null,null,function*(){try{if(l)try{const[$e,He]=yield Promise.all([Fr.checkArticleLike(Re.id),Fr.checkArticleBookmark(Re.id)]);S($e.liked||!1),y(He.bookmarked||!1),console.log("User interaction state:",{liked:$e.liked,bookmarked:He.bookmarked})}catch($e){console.error("Error fetching user interaction state:",$e),S(!1),y(!1)}try{const $e=yield Fr.getArticleComments(Re.id);console.log("Comments API response:",$e);let He=[];Array.isArray($e)?He=$e.map(at=>{var Et,dr,Ue,Pe;return{id:at.id,author:at.author_name||((Et=at.user)==null?void 0:Et.username)||"",avatar:((Ue=(dr=at.user)==null?void 0:dr.profile)==null?void 0:Ue.avatar)||`https://via.placeholder.com/40x40/6C63FF/ffffff?text=${(at.author_name||((Pe=at.user)==null?void 0:Pe.username)||"").charAt(0)}`,content:at.content||"",created_at:at.created_at,likes:at.likes_count||0,replies:at.replies||[],is_approved:at.is_approved!==!1}}):$e&&typeof $e=="object"&&$e.results&&(He=$e.results.map(at=>{var Et,dr,Ue,Pe;return{id:at.id,author:at.author_name||((Et=at.user)==null?void 0:Et.username)||"",avatar:((Ue=(dr=at.user)==null?void 0:dr.profile)==null?void 0:Ue.avatar)||`https://via.placeholder.com/40x40/6C63FF/ffffff?text=${(at.author_name||((Pe=at.user)==null?void 0:Pe.username)||"").charAt(0)}`,content:at.content||"",created_at:at.created_at,likes:at.likes_count||0,replies:at.replies||[],is_approved:at.is_approved!==!1}})),He=He.filter(at=>at.is_approved!==!1),He.length,R(He),console.log("Final transformed comments:",He)}catch($e){console.error("Error fetching comments:",$e),R([])}const Ie=yield Fr.getRelatedArticles(Re.id,Re.category||Re.category_name,3);console.log("Related articles API response:",Ie);const Ke=Array.isArray(Ie)?Ie.map($e=>({id:$e.id,title:$e.title,slug:$e.slug,category:$e.category||$e.category_name,reading_time:$e.reading_time||5,image:$e.image?$e.image.startsWith("http")?$e.image:`http://localhost:8000${$e.image}`:null})):[];L(Ke);const tt=Re.author||Re.author_id||Re.created_by||Re.user;if(tt){console.log("Attempting to fetch author profile for ID:",tt);try{const $e=yield Fr.getAuthorProfile(tt);console.log("Author profile response:",$e),$e?(G($e),console.log("Author profile loaded successfully:",$e)):console.log("No author profile found, using default data")}catch($e){console.error("Error fetching author profile:",$e),console.log("Using default author data")}}else console.log("No author ID found in article response");try{const $e=yield Fr.getArticleTags();M($e)}catch($e){console.error("Error fetching article tags:",$e)}}catch(Ie){console.error("Error fetching additional data:",Ie)}}),x(!1)}catch(Re){console.error("Error fetching article:",Re),x(!1)}})},[a]);const U=()=>$(null,null,function*(){if(d)try{m?yield Fr.removeBookmark(d.id):yield Fr.bookmarkArticle(d.id),y(!m)}catch(de){console.error("Error toggling bookmark:",de),alert("    .    .")}}),H=()=>$(null,null,function*(){if(d)try{v?(yield Fr.unlikeArticle(d.id),p(de=>oe(X({},de),{likes_count:Math.max(0,de.likes_count-1)}))):(yield Fr.likeArticle(d.id),p(de=>oe(X({},de),{likes_count:de.likes_count+1}))),S(!v)}catch(de){console.error("Error toggling like:",de),alert("    .    .")}}),N=()=>{navigator.share?navigator.share({title:d==null?void 0:d.title,text:d==null?void 0:d.summary,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("    "))},Y=de=>$(null,null,function*(){if(de.preventDefault(),C.trim()&&d&&!j)try{ee(!0);const K=yield Fr.createArticleComment(d.id,{content:C});console.log("Comment created:",K);const se={id:K.id,author:K.author_name||" ",avatar:`https://via.placeholder.com/40x40/4A6CF7/ffffff?text=${(K.author_name||"").charAt(0)}`,content:K.content,created_at:K.created_at,likes:K.likes_count||0,replies:[]};R([se,...z]),_(""),p(ve=>oe(X({},ve),{comments_count:ve.comments_count+1}))}catch(K){console.error("Error creating comment:",K),alert("    .    .")}finally{ee(!1)}}),E=de=>$(null,null,function*(){if(O.trim()&&!j)try{ee(!0);const K=yield Fr.createArticleComment(d.id,{content:O,parent:de});console.log("Reply created:",K);const se={id:K.id,author:K.author_name||" ",avatar:`https://via.placeholder.com/40x40/4A6CF7/ffffff?text=${(K.author_name||"").charAt(0)}`,content:K.content,created_at:K.created_at,likes:K.likes_count||0};R(ve=>ve.map(ge=>ge.id===de?oe(X({},ge),{replies:[...ge.replies||[],se]}):ge)),q(""),T(null),p(ve=>oe(X({},ve),{comments_count:ve.comments_count+1}))}catch(K){console.error("Error creating reply:",K),alert("    .    .")}finally{ee(!1)}}),I=de=>$(null,null,function*(){try{console.log("Liking comment:",de),R(K=>K.map(se=>se.id===de?oe(X({},se),{likes:se.likes+1,liked:!0}):se))}catch(K){console.error("Error liking comment:",K)}}),A=de=>new Date(de).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"});return h?o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e(On,{}),o(c,{component:"main",sx:{flex:1},children:[o(I5,{children:[e("div",{className:"animated-bg"}),o(Xe,{className:"content",children:[e(gt,{variant:"text",width:600,height:60,sx:{mb:2}}),e(gt,{variant:"text",width:400,height:40}),o(c,{sx:{display:"flex",gap:2,mt:2},children:[e(gt,{variant:"circular",width:48,height:48}),o(c,{children:[e(gt,{variant:"text",width:120,height:20}),e(gt,{variant:"text",width:80,height:16})]}),e(gt,{variant:"text",width:100,height:20}),e(gt,{variant:"text",width:100,height:20}),e(gt,{variant:"text",width:100,height:20}),e(gt,{variant:"text",width:100,height:20})]})]})]}),e(Xe,{sx:{py:4},children:o(le,{container:!0,spacing:4,children:[o(le,{item:!0,xs:12,lg:8,children:[e(gt,{variant:"rectangular",height:400,sx:{mb:2,borderRadius:2}}),e(gt,{variant:"text",sx:{mb:1}}),e(gt,{variant:"text",sx:{mb:1}}),e(gt,{variant:"text",width:"60%"})]}),o(le,{item:!0,xs:12,lg:4,children:[e(gt,{variant:"rectangular",height:200,sx:{borderRadius:2,mb:2}}),e(gt,{variant:"rectangular",height:300,sx:{borderRadius:2}})]})]})})]}),e(Bn,{})]}):d?o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e(On,{}),o(c,{component:"main",sx:{flex:1},children:[o(I5,{children:[e("div",{className:"animated-bg"}),e(Xe,{className:"content",children:o(It.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[o(K5,{sx:{mb:3,color:"white"},children:[e(va,{color:"inherit",href:"/articles",sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:""}),e(f,{color:"inherit",children:d.category}),e(f,{color:"inherit",children:d.title})]}),e(f,{variant:"h3",component:"h1",sx:{fontWeight:800,mb:2,lineHeight:1.2},children:d.title}),e(f,{variant:"body1",sx:{opacity:.9,mb:3,lineHeight:1.5,fontSize:"1.1rem"},children:d.summary}),o(c,{sx:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},children:[o(c,{className:"stats-item",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"8px 12px",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.6)"}},children:[e(Tt,{src:d.author.avatar,sx:{width:36,height:36,border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:(d.author.name||"").charAt(0)}),o(c,{sx:{ml:1},children:[e(f,{variant:"body2",sx:{fontWeight:700,fontSize:"0.95rem"},children:d.author.name||"  "}),e(f,{variant:"caption",sx:{opacity:.9,fontWeight:500,backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"1px 6px",borderRadius:"8px",display:"inline-block",fontSize:"0.75rem"},children:A(d.published_at)})]})]}),o(c,{className:"stats-item",children:[e(Lr,{sx:{fontSize:16}}),o(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[d.views_count.toLocaleString()," "]})]}),o(c,{className:"stats-item",children:[e(Ln,{sx:{fontSize:16}}),o(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[d.reading_time,"  "]})]}),o(c,{className:"stats-item",children:[e(ya,{sx:{fontSize:16}}),o(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[d.likes_count.toLocaleString()," "]})]}),o(c,{className:"stats-item",children:[e(Ks,{sx:{fontSize:16}}),o(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[d.comments_count.toLocaleString()," "]})]})]})]})})]}),e(Xe,{sx:{py:6},children:o(le,{container:!0,spacing:4,sx:{position:"relative",flexDirection:{xs:"column-reverse",lg:"row"},minHeight:"100%"},children:[e(le,{item:!0,sx:{width:{xs:"100%",lg:"calc(100% - 396px)"},mr:{lg:"416px"},order:{xs:1,lg:2}},children:o(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e(zW,{sx:{mb:4,height:"400px",width:"100%"},children:e("img",{src:d.image,alt:d.title,onError:de=>{console.error("Image failed to load:",d.image),de.target.src="https://via.placeholder.com/800x400/4A6CF7/ffffff?text=No+Image"},onLoad:()=>{console.log("Image loaded successfully:",d.image)},style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",borderRadius:"16px"}})}),e(De,{sx:{p:3,mb:4,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:o(c,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[e(re,{variant:"outlined",startIcon:e(qt,{}),onClick:()=>n("/articles"),sx:{borderRadius:2},children:" "}),e(c,{sx:{flexGrow:1}}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mr:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(ya,{sx:{fontSize:18,color:"primary.main"}}),e(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:d.likes_count.toLocaleString()})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(Ks,{sx:{fontSize:18,color:"primary.main"}}),e(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:d.comments_count.toLocaleString()})]})]}),e(Je,{title:"",children:e(xe,{onClick:H,color:v?"primary":"default",sx:{border:"1px solid",borderColor:"divider",backgroundColor:v?"primary.main":"transparent",color:v?"white":"inherit","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.1)"}},children:v?e(ya,{}):e(lh,{})})}),e(Je,{title:"",children:e(xe,{onClick:U,color:m?"primary":"default",sx:{border:"1px solid",borderColor:"divider",backgroundColor:m?"primary.main":"transparent",color:m?"white":"inherit","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.1)"}},children:m?e(zh,{}):e(jc,{})})}),e(Je,{title:"",children:e(xe,{onClick:N,sx:{border:"1px solid",borderColor:"divider","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.1)"}},children:e(rd,{})})})]})}),e(Yu,{sx:{mb:4},children:e(pt,{sx:{p:4},children:e("div",{dangerouslySetInnerHTML:{__html:d.content},style:{lineHeight:1.8,fontSize:"1.1rem",color:t.palette.text.primary}})})}),o(c,{sx:{mb:4},children:[o(f,{variant:"h6",sx:{mb:2,fontWeight:600,display:"flex",alignItems:"center"},children:[e(rm,{sx:{mr:1,color:"primary.main"}}),""]}),e(c,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:d.tags&&d.tags.length>0?d.tags.map((de,K)=>e(_e,{label:typeof de=="string"?de:de.name||de,variant:"outlined",color:"primary",sx:{fontWeight:500,"&:hover":{backgroundColor:"primary.main",color:"white",transform:"translateY(-2px)"}}},K)):e(f,{variant:"body2",color:"text.secondary",children:"    "})})]}),o(c,{children:[o(f,{variant:"h5",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[e(Ks,{sx:{mr:1.5,fontSize:28}})," (",z.length,")"]}),!1,l?o(RW,{children:[e(f,{variant:"h6",sx:{mb:2,fontWeight:600,color:"text.primary"},children:" "}),o("form",{onSubmit:Y,children:[e(ze,{fullWidth:!0,multiline:!0,rows:4,placeholder:"  ...",value:C,onChange:de=>_(de.target.value),disabled:j,sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover fieldset":{borderColor:"primary.main"}}}}),e(c,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:e(re,{type:"submit",variant:"contained",disabled:!C.trim()||j,endIcon:j?null:e(Rh,{}),sx:{borderRadius:2,px:3,py:1,fontWeight:600,"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},"&:disabled":{opacity:.7}},children:j?" ...":" "})})]})]}):o(c,{sx:{p:3,backgroundColor:"rgba(25, 118, 210, 0.05)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.1)",textAlign:"center"},children:[e(f,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main"},children:"  "}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"     "}),e(re,{variant:"contained",onClick:()=>n("/login"),sx:{borderRadius:2},children:" "})]}),e(c,{sx:{display:"flex",flexDirection:"column",gap:3},children:z.length>0?z.map(de=>o(EW,{children:[o(c,{sx:{display:"flex",gap:2,mb:2},children:[e(Tt,{src:de.avatar,sx:{width:48,height:48,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(de.author||"").charAt(0)}),o(c,{sx:{flex:1},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e(f,{variant:"subtitle1",sx:{fontWeight:600,color:"text.primary"},children:de.author}),e(f,{variant:"caption",color:"text.secondary",sx:{backgroundColor:"grey.100",px:1,py:.25,borderRadius:1,fontSize:"0.75rem"},children:A(de.created_at)})]}),e(f,{variant:"body1",sx:{lineHeight:1.6,color:"text.secondary",mb:2},children:de.content})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(xe,{size:"small",onClick:()=>I(de.id),sx:{color:de.liked?"primary.main":"text.secondary","&:hover":{color:"primary.main",transform:"scale(1.1)"}},children:de.liked?e(ya,{fontSize:"small"}):e(lh,{fontSize:"small"})}),o(f,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:[de.likes," "]}),e(re,{size:"small",onClick:()=>T(B===de.id?null:de.id),sx:{color:"primary.main",textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)"}},children:B===de.id?" ":""})]}),B===de.id&&o(c,{sx:{mt:2,p:2,backgroundColor:"rgba(25, 118, 210, 0.05)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.1)"},children:[o(f,{variant:"body2",sx:{mb:1,fontWeight:600,color:"primary.main"},children:["  ",de.author]}),e(ze,{fullWidth:!0,multiline:!0,rows:3,placeholder:"  ...",value:O,onChange:K=>q(K.target.value),disabled:j,sx:{mb:2}}),o(c,{sx:{display:"flex",gap:1},children:[e(re,{size:"small",variant:"contained",onClick:()=>E(de.id),disabled:!O.trim()||j,sx:{borderRadius:1},children:j?" ...":" "}),e(re,{size:"small",variant:"outlined",onClick:()=>{T(null),q("")},sx:{borderRadius:1},children:""})]})]}),de.replies&&de.replies.length>0&&o(c,{sx:{mt:2,ml:4},children:[o(f,{variant:"body2",sx:{mb:2,fontWeight:600,color:"text.secondary"},children:[" (",de.replies.length,")"]}),de.replies.map(K=>o(c,{sx:{display:"flex",gap:2,mb:2,p:2,backgroundColor:"rgba(0,0,0,0.02)",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:[e(Tt,{src:K.avatar,sx:{width:32,height:32,fontSize:"0.8rem"},children:(K.author||"").charAt(0)}),o(c,{sx:{flex:1},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e(f,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:K.author}),e(f,{variant:"caption",color:"text.secondary",children:A(K.created_at)})]}),e(f,{variant:"body2",sx:{lineHeight:1.5,color:"text.secondary"},children:K.content})]})]},K.id))]})]},de.id)):o(c,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:[e(Ks,{sx:{fontSize:48,mb:2,opacity:.5}}),e(f,{variant:"h6",sx:{mb:1},children:"   "}),e(f,{variant:"body2",children:"      !"})]})})]})]})}),e(le,{item:!0,sx:{width:{xs:"100%",lg:"380px"},position:{xs:"static",lg:"absolute"},right:{lg:"16px"},top:{lg:"-40px"},zIndex:10,order:{xs:2,lg:1}},children:o(It.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e(Yu,{sx:{mb:3},children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[e(no,{sx:{mr:1.5,fontSize:28}})," "]}),o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e(Tt,{src:(k==null?void 0:k.image_profile)||(k==null?void 0:k.avatar)||(k==null?void 0:k.profile_image)||(k==null?void 0:k.image)||d.author.avatar,sx:{width:100,height:100,mb:2,border:"4px solid rgba(25, 118, 210, 0.2)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.3)"},children:((k==null?void 0:k.name)||(k==null?void 0:k.user_first_name)||(k==null?void 0:k.user_last_name)||(k==null?void 0:k.user_username)||d.author.name||"").charAt(0)}),e(f,{variant:"h5",sx:{fontWeight:700,mb:1,textAlign:"center"},children:(k==null?void 0:k.name)||`${(k==null?void 0:k.user_first_name)||""} ${(k==null?void 0:k.user_last_name)||""}`.trim()||(k==null?void 0:k.user_username)||d.author.name||"  "}),e(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mb:2,lineHeight:1.6},children:(k==null?void 0:k.shortBio)||(k==null?void 0:k.bio)||(k==null?void 0:k.biography)||(k==null?void 0:k.description)||(k==null?void 0:k.about)||d.author.bio}),((k==null?void 0:k.user_email)||(k==null?void 0:k.email))&&o(c,{sx:{backgroundColor:"rgba(25, 118, 210, 0.05)",borderRadius:2,p:2,mb:2,width:"100%",textAlign:"center",border:"1px solid rgba(25, 118, 210, 0.1)"},children:[e(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main",mb:.5},children:" "}),e(f,{variant:"body2",color:"text.secondary",children:(k==null?void 0:k.user_email)||(k==null?void 0:k.email)})]}),(k==null?void 0:k.user_id)&&o(c,{sx:{backgroundColor:"rgba(76, 175, 80, 0.05)",borderRadius:2,p:2,mb:2,width:"100%",textAlign:"center",border:"1px solid rgba(76, 175, 80, 0.1)"},children:[e(f,{variant:"body2",sx:{fontWeight:600,color:"success.main",mb:.5},children:" "}),o(f,{variant:"body2",color:"text.secondary",children:["#",k==null?void 0:k.user_id]})]}),o(c,{sx:{backgroundColor:"rgba(25, 118, 210, 0.1)",borderRadius:2,p:2,mb:2,width:"100%",textAlign:"center"},children:[e(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main",mb:.5},children:""}),e(f,{variant:"body2",color:"text.secondary",children:(k==null?void 0:k.status)||(k==null?void 0:k.specialization)||(k==null?void 0:k.subject)||(k==null?void 0:k.field)||d.author.specialization})]}),o(c,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,width:"100%",mb:3},children:[o(c,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(76, 175, 80, 0.1)",borderRadius:2},children:[e(f,{variant:"h6",sx:{fontWeight:700,color:"success.main"},children:(k==null?void 0:k.experience)||(k==null?void 0:k.experience_years)||(k==null?void 0:k.teaching_experience)||(k==null?void 0:k.years_of_experience)||d.author.experience}),e(f,{variant:"caption",color:"text.secondary",children:""})]}),o(c,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(255, 152, 0, 0.1)",borderRadius:2},children:[e(f,{variant:"h6",sx:{fontWeight:700,color:"warning.main"},children:(k==null?void 0:k.courses_count)||(k==null?void 0:k.total_courses)||(k==null?void 0:k.courses_created)||(k==null?void 0:k.number_of_courses)||d.author.courses_count}),e(f,{variant:"caption",color:"text.secondary",children:""})]}),o(c,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(156, 39, 176, 0.1)",borderRadius:2},children:[e(f,{variant:"h6",sx:{fontWeight:700,color:"secondary.main"},children:((k==null?void 0:k.students_count)||(k==null?void 0:k.total_students)||(k==null?void 0:k.students_enrolled)||(k==null?void 0:k.number_of_students)||d.author.students_count||0).toLocaleString()}),e(f,{variant:"caption",color:"text.secondary",children:""})]}),o(c,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:2},children:[o(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[e(Pi,{sx:{color:"warning.main",fontSize:16}}),e(f,{variant:"h6",sx:{fontWeight:700,color:"warning.main"},children:(k==null?void 0:k.rating)||(k==null?void 0:k.average_rating)||(k==null?void 0:k.teacher_rating)||(k==null?void 0:k.overall_rating)||d.author.rating||4.5})]}),e(f,{variant:"caption",color:"text.secondary",children:""})]})]}),o(c,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[((k==null?void 0:k.linkedin)||((Q=d.author.social_links)==null?void 0:Q.linkedin))&&e(xe,{size:"small",onClick:()=>{var de;return window.open((k==null?void 0:k.linkedin)||((de=d.author.social_links)==null?void 0:de.linkedin),"_blank")},sx:{backgroundColor:"rgba(25, 118, 210, 0.1)",color:"primary.main","&:hover":{backgroundColor:"primary.main",color:"white"}},children:e(c,{component:"span",sx:{fontSize:16},children:"in"})}),((k==null?void 0:k.twitter)||((J=d.author.social_links)==null?void 0:J.twitter))&&e(xe,{size:"small",onClick:()=>{var de;return window.open((k==null?void 0:k.twitter)||((de=d.author.social_links)==null?void 0:de.twitter),"_blank")},sx:{backgroundColor:"rgba(29, 161, 242, 0.1)",color:"#1DA1F2","&:hover":{backgroundColor:"#1DA1F2",color:"white"}},children:e(c,{component:"span",sx:{fontSize:16},children:""})}),((k==null?void 0:k.facebook)||((P=d.author.social_links)==null?void 0:P.facebook))&&e(xe,{size:"small",onClick:()=>{var de;return window.open((k==null?void 0:k.facebook)||((de=d.author.social_links)==null?void 0:de.facebook),"_blank")},sx:{backgroundColor:"rgba(66, 103, 178, 0.1)",color:"#4267B2","&:hover":{backgroundColor:"#4267B2",color:"white"}},children:e(c,{component:"span",sx:{fontSize:16},children:"f"})}),((k==null?void 0:k.instagram)||((ie=d.author.social_links)==null?void 0:ie.instagram))&&e(xe,{size:"small",onClick:()=>{var de;return window.open((k==null?void 0:k.instagram)||((de=d.author.social_links)==null?void 0:de.instagram),"_blank")},sx:{backgroundColor:"rgba(225, 48, 108, 0.1)",color:"#E1306C","&:hover":{backgroundColor:"#E1306C",color:"white"}},children:e(c,{component:"span",sx:{fontSize:16},children:""})}),((k==null?void 0:k.github)||((ue=d.author.social_links)==null?void 0:ue.github))&&e(xe,{size:"small",onClick:()=>{var de;return window.open((k==null?void 0:k.github)||((de=d.author.social_links)==null?void 0:de.github),"_blank")},sx:{backgroundColor:"rgba(36, 41, 46, 0.1)",color:"#24292E","&:hover":{backgroundColor:"#24292E",color:"white"}},children:e(c,{component:"span",sx:{fontSize:16},children:""})}),((k==null?void 0:k.youtube)||((fe=d.author.social_links)==null?void 0:fe.youtube))&&e(xe,{size:"small",onClick:()=>{var de;return window.open((k==null?void 0:k.youtube)||((de=d.author.social_links)==null?void 0:de.youtube),"_blank")},sx:{backgroundColor:"rgba(255, 0, 0, 0.1)",color:"#FF0000","&:hover":{backgroundColor:"#FF0000",color:"white"}},children:e(c,{component:"span",sx:{fontSize:16},children:""})})]})]})]})}),e(Yu,{sx:{mb:3},children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[e(co,{sx:{mr:1.5,fontSize:28}})," "]}),o(c,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mb:3},children:[o(c,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(76, 175, 80, 0.1)",borderRadius:2,border:"1px solid rgba(76, 175, 80, 0.2)"},children:[e(ya,{sx:{fontSize:24,color:"success.main",mb:1}}),e(f,{variant:"h6",sx:{fontWeight:700,color:"success.main"},children:d.likes_count.toLocaleString()}),e(f,{variant:"caption",color:"text.secondary",children:""})]}),o(c,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(25, 118, 210, 0.1)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.2)"},children:[e(Ks,{sx:{fontSize:24,color:"primary.main",mb:1}}),e(f,{variant:"h6",sx:{fontWeight:700,color:"primary.main"},children:d.comments_count.toLocaleString()}),e(f,{variant:"caption",color:"text.secondary",children:""})]}),o(c,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(255, 152, 0, 0.1)",borderRadius:2,border:"1px solid rgba(255, 152, 0, 0.2)"},children:[e(Lr,{sx:{fontSize:24,color:"warning.main",mb:1}}),e(f,{variant:"h6",sx:{fontWeight:700,color:"warning.main"},children:d.views_count.toLocaleString()}),e(f,{variant:"caption",color:"text.secondary",children:""})]}),o(c,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(156, 39, 176, 0.1)",borderRadius:2,border:"1px solid rgba(156, 39, 176, 0.2)"},children:[e(Ln,{sx:{fontSize:24,color:"secondary.main",mb:1}}),e(f,{variant:"h6",sx:{fontWeight:700,color:"secondary.main"},children:d.reading_time}),e(f,{variant:"caption",color:"text.secondary",children:""})]})]})]})}),e(Yu,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[e(en,{sx:{mr:1.5,fontSize:28}}),"  "]}),e(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:V&&V.length>0?V.map(de=>o(c,{onClick:()=>n(`/articles/${de.slug}`),sx:{display:"flex",gap:2,cursor:"pointer",p:2,borderRadius:3,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(25, 118, 210, 0.1)",backgroundColor:"rgba(25, 118, 210, 0.02)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)",transform:"translateX(-8px) scale(1.02)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.2)",border:"1px solid rgba(25, 118, 210, 0.3)"}},children:[o(c,{sx:{width:70,height:70,borderRadius:3,background:de.image?"transparent":"linear-gradient(135deg, #1976d2, #42a5f5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.8rem",fontWeight:700,boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",flexShrink:0,overflow:"hidden"},children:[de.image?e("img",{src:de.image,alt:de.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:K=>{K.target.style.display="none",K.target.nextSibling.style.display="flex"}}):null,e(c,{sx:{display:de.image?"none":"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1976d2, #42a5f5)"},children:(de.category||"").split(" ")[0]})]}),o(c,{sx:{flex:1},children:[e(f,{variant:"body2",sx:{fontWeight:700,lineHeight:1.3,mb:1,color:"text.primary"},children:de.title}),o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Ln,{sx:{fontSize:14,color:"text.secondary"}}),o(f,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:[de.reading_time,"  "]})]}),e(f,{variant:"caption",sx:{color:"primary.main",fontWeight:600,backgroundColor:"rgba(25, 118, 210, 0.1)",px:1,py:.25,borderRadius:1,display:"inline-block",mt:.5},children:de.category||""})]})]},de.id)):e(c,{sx:{textAlign:"center",py:3,color:"text.secondary"},children:e(f,{variant:"body2",children:"      "})})})]})})]})})]})})]}),e(Bn,{})]}):o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e(On,{}),e(c,{component:"main",sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:o(c,{sx:{textAlign:"center",py:8},children:[e(f,{variant:"h4",color:"text.secondary",sx:{mb:2},children:"  "}),e(re,{variant:"contained",onClick:()=>n("/articles"),children:"  "})]})}),e(Bn,{})]})};yt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`;yt`
  0% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(103, 58, 183, 0); }
  100% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0); }
`;const MW=yt`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`;yt`
  0% { transform: translateX(-100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
`;const IW=te(nt)(({theme:t})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:"#ffffff",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)",border:"none",transition:"all 0.3s ease",position:"relative",minHeight:"450px",width:"100%","& .image-container":{width:"100%",height:"200px",overflow:"hidden",position:"relative"},"& .article-image":{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",transition:"transform 0.4s ease",borderRadius:"12px 12px 0 0"},"&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.12)","& .article-image":{transform:"scale(1.05)"},"& .action-buttons":{opacity:1}},"& .action-buttons":{opacity:.8,transition:"opacity 0.3s ease"}})),D5=te(_e)(({theme:t,status:n})=>X(X(X({fontWeight:700,borderRadius:"20px",backdropFilter:"blur(10px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"0.7rem",height:24,textTransform:"uppercase",letterSpacing:"0.5px"},n==="published"&&{backgroundColor:"#2e7d32",color:"white","&:hover":{backgroundColor:"#1b5e20",transform:"translateY(-1px)"}}),n==="draft"&&{backgroundColor:"#ed6c02",color:"white","&:hover":{backgroundColor:"#e65100",transform:"translateY(-1px)"}}),n==="archived"&&{backgroundColor:"#757575",color:"white","&:hover":{backgroundColor:"#616161",transform:"translateY(-1px)"}})),Qu=te(_e)(({theme:t,active:n})=>oe(X({fontWeight:600,borderRadius:"20px",transition:"all 0.3s ease",height:32},n&&{background:"linear-gradient(45deg, #1976d2, #42a5f5)",color:"white",boxShadow:`0 4px 12px ${pe("#1976d2",.3)}`,transform:"translateY(-2px)"}),{"&:hover":{transform:n?"translateY(-2px)":"translateY(-1px)",boxShadow:n?`0 6px 16px ${pe("#1976d2",.4)}`:`0 4px 12px ${pe("#1976d2",.2)}`}})),DW=te(ze)(({theme:t})=>({"& .MuiOutlinedInput-root":{borderRadius:20,backgroundColor:pe("#ffffff",.95),backdropFilter:"blur(10px)","&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2",borderWidth:2}}}));te(De)(({theme:t})=>({padding:t.spacing(2.5),borderRadius:16,background:`linear-gradient(135deg, ${pe("#1976d2",.08)}, ${pe("#42a5f5",.08)})`,border:`1px solid ${pe("#1976d2",.15)}`,backdropFilter:"blur(10px)",transition:"all 0.3s ease",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #1976d2, #42a5f5)"},"&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${pe("#1976d2",.2)}`}}));const e0=te(xe)(({theme:t,variant:n})=>X(X(X({width:32,height:32,borderRadius:"8px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",backdropFilter:"blur(10px)"},n==="edit"&&{backgroundColor:"#1976d2",color:"white","&:hover":{backgroundColor:"#1565c0",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"}}),n==="delete"&&{backgroundColor:"#d32f2f",color:"white","&:hover":{backgroundColor:"#c62828",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(211, 47, 47, 0.3)"}}),n==="view"&&{backgroundColor:"#e5978b",color:"white","&:hover":{backgroundColor:"#388e3c",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)"}})),WW=te(c)(({theme:t})=>({background:`linear-gradient(135deg, ${pe("#ffffff",.95)}, ${pe("#f8f9ff",.95)})`,borderRadius:24,padding:t.spacing(4),marginBottom:t.spacing(4),boxShadow:`0 8px 32px ${pe("#1976d2",.08)}`,border:`1px solid ${pe("#1976d2",.1)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:`${MW} 3s ease-in-out infinite`}})),$W=()=>{jt();const t=ct(),[n,a]=w.useState([]),[l,d]=w.useState(!0),[p,h]=w.useState(""),[x,m]=w.useState("all"),[y,v]=w.useState("created_at"),[S,C]=w.useState("grid"),[_,z]=w.useState(null),[R,B]=w.useState(!1),[T,O]=w.useState(0),[q,j]=w.useState(1),[ee,V]=w.useState(10),[L,k]=w.useState(0),[G,W]=w.useState(null);w.useEffect(()=>{$(null,null,function*(){try{d(!0),console.log("Fetching articles...");const fe=yield Fr.getArticles({page:q,page_size:ee,search:p,status:T===0?"published":T===1?"draft":"archived",ordering:y==="newest"?"-created_at":y==="oldest"?"created_at":"-views_count"});console.log("Articles response:",fe);let de=[],K=0;Array.isArray(fe)?(de=fe,K=fe.length):fe.results?(de=fe.results,K=fe.count||fe.results.length):fe.data?(de=fe.data,K=fe.total||fe.data.length):(de=[],K=0);const se=de.map(ve=>({id:ve.id,title:ve.title||"",summary:ve.summary||"",status:ve.status||"draft",views_count:ve.views_count||0,created_at:ve.created_at,updated_at:ve.updated_at,published_at:ve.published_at,featured:ve.featured||!1,tags:ve.tags?ve.tags.map(ge=>ge.name||ge):[],image:ve.image?ve.image.startsWith("http")?ve.image:`http://localhost:8000${ve.image}`:null,reading_time:ve.reading_time||5,likes_count:ve.likes_count||0,comments_count:ve.comments_count||0,category:ve.category||""}));a(se),k(K),d(!1)}catch(fe){console.error("Error fetching articles:",fe),W("    .    ."),d(!1)}})},[q,ee,p,T,y]);const M=ue=>{h(ue.target.value)},U=ue=>{m(ue)},H=ue=>{t(`/teacher/articles/${ue.id}/edit`)},N=ue=>{z(ue),B(!0)},Y=ue=>{console.log("  :",ue.title),t(`/articles/${ue.slug||ue.id}`)},E=()=>$(null,null,function*(){try{console.log("Deleting article:",_.id),yield Fr.deleteArticle(_.id),a(ue=>ue.filter(fe=>fe.id!==_.id)),B(!1),z(null),console.log("Article deleted successfully")}catch(ue){console.error("Error deleting article:",ue),W("    .    .")}}),A=[...n.filter(ue=>{const fe=ue.title.toLowerCase().includes(p.toLowerCase())||ue.summary.toLowerCase().includes(p.toLowerCase()),de=x==="all"||ue.status===x;return fe&&de})].sort((ue,fe)=>{switch(y){case"created_at":return new Date(fe.created_at)-new Date(ue.created_at);case"updated_at":return new Date(fe.updated_at)-new Date(ue.updated_at);case"title":return ue.title.localeCompare(fe.title);case"views":return fe.views_count-ue.views_count;default:return 0}}),Q=ue=>new Date(ue).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}),P=(()=>{const ue=n.length,fe=n.filter(ve=>ve.status==="published").length,de=n.filter(ve=>ve.status==="draft").length,K=n.filter(ve=>ve.status==="archived").length,se=n.reduce((ve,ge)=>ve+ge.views_count,0);return{total:ue,published:fe,draft:de,archived:K,totalViews:se}})(),ie=ue=>e(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.02},whileTap:{scale:.98},layout:!0,style:{width:"100%"},children:o(IW,{sx:{height:"100%",cursor:"pointer",width:"100%"},onClick:()=>Y(ue),children:[o(c,{sx:{position:"relative",overflow:"hidden"},children:[e(c,{className:"image-container",sx:{position:"relative",width:"100%",height:"200px",overflow:"hidden"},children:e("img",{src:ue.image||"https://via.placeholder.com/400x200/4A6CF7/ffffff?text=No+Image",alt:ue.title,className:"article-image",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",transition:"transform 0.4s ease",borderRadius:"12px 12px 0 0"},onError:fe=>{console.error("Image failed to load:",ue.image),fe.target.src="https://via.placeholder.com/400x200/4A6CF7/ffffff?text=Image+Error"},onLoad:()=>{console.log("Article image loaded successfully:",ue.image)}})}),o(c,{className:"action-buttons",sx:{position:"absolute",top:8,right:8,display:"flex",flexDirection:"column",gap:.5,opacity:1,zIndex:3},children:[e(Je,{title:" ",placement:"left",children:e(e0,{variant:"view",onClick:fe=>{fe.stopPropagation(),Y(ue)},size:"small",sx:{backgroundColor:"#e5978b",color:"white","&:hover":{backgroundColor:"#388e3c",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)"}},children:e(Xu,{sx:{fontSize:16}})})}),e(Je,{title:" ",placement:"left",children:e(e0,{variant:"edit",onClick:fe=>{fe.stopPropagation(),H(ue)},size:"small",children:e(Tr,{sx:{fontSize:16}})})}),e(Je,{title:" ",placement:"left",children:e(e0,{variant:"delete",onClick:fe=>{fe.stopPropagation(),N(ue)},size:"small",children:e(tn,{sx:{fontSize:16}})})})]}),ue.featured&&e(c,{sx:{position:"absolute",top:8,left:8,zIndex:2},children:o(c,{sx:{background:"linear-gradient(45deg, #FFD700, #FFA500)",borderRadius:"6px",px:.6,py:.2,display:"flex",alignItems:"center",gap:.2,boxShadow:"0 2px 6px rgba(255, 215, 0, 0.4)"},children:[e(Pi,{sx:{fontSize:10,color:"white"}}),e(f,{variant:"caption",sx:{color:"white",fontWeight:600,fontSize:"0.55rem"},children:""})]})}),e(c,{sx:{position:"absolute",bottom:8,left:8,zIndex:2},children:e(D5,{label:ue.status==="published"?"":ue.status==="draft"?"":"",status:ue.status,size:"small"})})]}),o(pt,{className:"card-content",sx:{flexGrow:1,p:3,display:"flex",flexDirection:"column",gap:2,minHeight:"250px"},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(D5,{label:ue.status==="published"?"":ue.status==="draft"?"":"",status:ue.status,size:"small"}),e(f,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:Q(ue.updated_at)})]}),e(Je,{title:" ",children:e(xe,{size:"small",onClick:fe=>{fe.stopPropagation(),Y(ue)},sx:{width:28,height:28,backgroundColor:"rgba(76, 175, 80, 0.1)",color:"#e5978b","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.2)",transform:"scale(1.1)"}},children:e(Xu,{sx:{fontSize:14}})})})]}),e(f,{variant:"h6",component:"h3",sx:{fontWeight:700,lineHeight:1.3,minHeight:"2.4em",maxHeight:"2.4em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:"#333",fontSize:"1.1rem",mb:2},children:ue.title}),e(f,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.5,minHeight:"3.6em",maxHeight:"3.6em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"0.85rem",mb:3,color:"#666"},children:ue.summary}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:[o(c,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(re,{variant:"contained",size:"small",startIcon:e(Xu,{}),onClick:fe=>{fe.stopPropagation(),Y(ue)},sx:{borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,backgroundColor:"#e5978b",color:"white",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.3)","&:hover":{backgroundColor:"#388e3c",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.4)"}},children:" "}),e(re,{variant:"outlined",size:"small",startIcon:e(Tr,{}),onClick:fe=>{fe.stopPropagation(),H(ue)},sx:{borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{borderColor:"#1565c0",backgroundColor:"rgba(25, 118, 210, 0.08)",transform:"translateY(-1px)"}},children:""})]}),o(c,{sx:{display:"flex",gap:1.5,alignItems:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(Ln,{sx:{fontSize:14,color:"#999"}}),o(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:[ue.reading_time," "]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(Lr,{sx:{fontSize:14,color:"#999"}}),e(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:ue.views_count.toLocaleString()})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(ya,{sx:{fontSize:14,color:"#999"}}),e(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:ue.likes_count.toLocaleString()})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e(Ks,{sx:{fontSize:14,color:"#999"}}),e(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:ue.comments_count.toLocaleString()})]})]})]})]})]})});return l?o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(en,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"     "})]})]}),e(Xe,{sx:{py:4},children:e(le,{container:!0,spacing:3,children:[1,2,3,4,5,6].map(ue=>o(le,{item:!0,xs:12,md:6,children:[e(gt,{variant:"rectangular",height:200,sx:{borderRadius:3,mb:2}}),e(gt,{variant:"text",height:24,sx:{mb:1}}),e(gt,{variant:"text",height:20,width:"60%",sx:{mb:1}}),e(gt,{variant:"text",height:20,width:"40%"})]},ue))})})]}):o(c,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[o(c,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[e(c,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),e(c,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),o(c,{sx:{position:"relative",zIndex:2},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e(en,{sx:{fontSize:32,color:"white"}}),e(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:" "})]}),e(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"     "})]})]}),o(Xe,{sx:{py:3},children:[e(c,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:e(xe,{onClick:()=>t("/teacher/articles/create"),sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:e(Nr,{sx:{fontSize:28}})})}),o(c,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(en,{sx:{color:"#1976d2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"primary",children:P.total}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(M6,{sx:{color:"#2e7d32",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"success.main",children:P.published}),e(f,{variant:"caption",color:"text.secondary",children:""})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(nm,{sx:{color:"#f57c00",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"warning.main",children:P.draft}),e(f,{variant:"caption",color:"text.secondary",children:""})]})]}),o(c,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e(Lr,{sx:{color:"#7b1fa2",fontSize:24}}),o(c,{children:[e(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:P.totalViews.toLocaleString()}),e(f,{variant:"caption",color:"text.secondary",children:" "})]})]})]}),o(WW,{children:[o(c,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center",mb:2},children:[e(f,{variant:"h6",sx:{fontWeight:600,mr:2,color:"primary.main"},children:" :"}),e(DW,{placeholder:"  ...",value:p,onChange:M,InputProps:{startAdornment:e(Vr,{position:"start",children:e(lo,{})})},sx:{minWidth:280,flexGrow:1}}),o(c,{sx:{display:"flex",gap:1},children:[e(Qu,{label:"",onClick:()=>U("all"),active:x==="all"}),e(Qu,{label:"",onClick:()=>U("published"),active:x==="published"}),e(Qu,{label:"",onClick:()=>U("draft"),active:x==="draft"}),e(Qu,{label:"",onClick:()=>U("archived"),active:x==="archived"})]})]}),e(Vt,{sx:{my:2}}),o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o(f,{variant:"body2",color:"text.secondary",children:[A.length,"  ",p&&`  "${p}"`]}),o(c,{sx:{display:"flex",gap:1},children:[e(Je,{title:" ",children:e(xe,{onClick:()=>C("grid"),color:S==="grid"?"primary":"default",children:e(o0,{})})}),e(Je,{title:" ",children:e(xe,{onClick:()=>C("list"),color:S==="list"?"primary":"default",children:e(I6,{})})})]})]})]}),A.length>0?e(c,{children:e(fT,{children:e(le,{container:!0,spacing:3,sx:{width:"100%"},children:A.map(ue=>e(le,{item:!0,xs:12,md:6,sx:{display:"flex"},children:ie(ue)},ue.id))})})}):e(c,{sx:{textAlign:"center",py:8},children:o(It.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[o(f,{variant:"h6",color:"text.secondary",sx:{mb:2},children:["   ",p&&`  "${p}"`]}),e(re,{variant:"contained",startIcon:e(Nr,{}),onClick:()=>t("/teacher/articles/create"),sx:{borderRadius:2,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"  "})]})})]}),o(wr,{open:R,onClose:()=>B(!1),PaperProps:{sx:{borderRadius:3,minWidth:400}},children:[e(Wr,{sx:{textAlign:"center",fontWeight:600,color:"#d32f2f",borderBottom:"1px solid #eee",pb:2},children:"   "}),o(vr,{sx:{pt:3},children:[e(f,{sx:{textAlign:"center",mb:2},children:"     :"}),o(f,{sx:{fontWeight:600,textAlign:"center",color:"primary.main",mb:2,p:2,backgroundColor:"rgba(25, 118, 210, 0.08)",borderRadius:2},children:['"',_==null?void 0:_.title,'"']}),e(f,{sx:{textAlign:"center",color:"error.main",fontSize:"0.9rem",fontWeight:500},children:"      !"})]}),o($r,{sx:{p:3,pt:1},children:[e(re,{onClick:()=>B(!1),variant:"outlined",sx:{borderRadius:2},children:""}),e(re,{onClick:E,color:"error",variant:"contained",sx:{borderRadius:2,px:3,fontWeight:600},children:" "})]})]})]})},Gs=te(nt)(({theme:t})=>({marginBottom:t.spacing(3),border:`1px solid ${pe(t.palette.divider,.1)}`,borderRadius:t.spacing(2),transition:"all 0.3s ease-in-out","&:hover":{borderColor:t.palette.primary.main,boxShadow:t.shadows[4]}})),LW=te(c)(({theme:t,hasImage:n})=>({border:`2px dashed ${n?t.palette.primary.main:t.palette.grey[300]}`,borderRadius:t.spacing(2),padding:t.spacing(4),textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:n?pe(t.palette.primary.main,.05):t.palette.grey[50],"&:hover":{borderColor:t.palette.primary.main,backgroundColor:pe(t.palette.primary.main,.1)}})),OW=()=>{const t=jt(),n=ct(),[a,l]=w.useState(!1),[d,p]=w.useState(!1),[h,x]=w.useState({}),[m,y]=w.useState({title:"",slug:"",content:"",summary:"",tags:[],status:"draft",featured:!1,allow_comments:!0,meta_description:"",meta_keywords:"",image:null,imagePreview:null}),[v,S]=w.useState(""),C=L=>{const{name:k,value:G,type:W,checked:M}=L.target;if(y(U=>oe(X({},U),{[k]:W==="checkbox"?M:G})),h[k]&&x(U=>oe(X({},U),{[k]:""})),k==="title"){const U=O(G);y(H=>oe(X({},H),{slug:U}))}},_=L=>{const k=L.target.files[0];if(k){if(k.size>5*1024*1024){x(W=>oe(X({},W),{image:"       5 "}));return}const G=new FileReader;G.onload=W=>{y(M=>oe(X({},M),{image:k,imagePreview:W.target.result}))},G.readAsDataURL(k),h.image&&x(W=>oe(X({},W),{image:""}))}},z=()=>{y(L=>oe(X({},L),{image:null,imagePreview:null}))},R=()=>{v.trim()&&!m.tags.includes(v.trim())&&(y(L=>oe(X({},L),{tags:[...L.tags,v.trim()]})),S(""))},B=L=>{y(k=>oe(X({},k),{tags:k.tags.filter(G=>G!==L)}))},T=L=>{L.key==="Enter"&&(L.preventDefault(),R())},O=L=>L.toLowerCase().replace(/[^\u0600-\u06FF\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"),q=()=>{const L={};return m.title.trim()||(L.title=" "),m.content.trim()||(L.content=" "),m.summary.trim()||(L.summary=" "),m.summary.length>200&&(L.summary="      200 "),x(L),Object.keys(L).length===0},j=(L,k="draft")=>$(null,null,function*(){var G;if(L.preventDefault(),!!q()){p(!0);try{const W=oe(X({},m),{status:k,content:m.content||"",summary:m.summary||"",meta_description:m.meta_description||"",meta_keywords:m.meta_keywords||"",featured:m.featured||!1,allow_comments:m.allow_comments!==!1,tags:m.tags||[]});delete W.imagePreview,console.log("Sending article data:",W);const M=yield Fr.createArticle(W);console.log("Article created successfully:",M),n("/teacher/articles")}catch(W){if(console.error("Error saving article:",W),(G=W.response)!=null&&G.data){const M=W.response.data,U={};Object.keys(M).forEach(H=>{Array.isArray(M[H])?U[H]=M[H][0]:U[H]=M[H]}),x(U)}else x(M=>oe(X({},M),{general:"    .    ."}))}finally{p(!1)}}}),ee=L=>{j(L,"draft")},V=L=>{j(L,"published")};return a?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e(Qe,{})}):o(c,{sx:{p:3},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[o(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:t.palette.primary.main,display:"flex",alignItems:"center"},children:[e(en,{sx:{mr:1}}),"  "]}),e(re,{variant:"outlined",startIcon:e(qt,{}),onClick:()=>n("/teacher/articles"),sx:{borderRadius:2},children:" "})]}),e("form",{onSubmit:j,children:o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,lg:8,children:o(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e(Gs,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e(en,{sx:{mr:1,color:"primary.main"}})," "]}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:" ",name:"title",value:m.title,onChange:C,error:!!h.title,helperText:h.title,sx:{mb:2}})}),e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:"  (Slug)",name:"slug",value:m.slug,onChange:C,error:!!h.slug,helperText:h.slug||"    "})}),e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:" ",name:"summary",value:m.summary,onChange:C,multiline:!0,rows:3,error:!!h.summary,helperText:h.summary||`${m.summary.length}/200`,inputProps:{maxLength:200}})})]})]})}),e(Gs,{children:o(pt,{sx:{p:3},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:" "}),e(ze,{fullWidth:!0,label:" ",name:"content",value:m.content,onChange:C,multiline:!0,rows:12,error:!!h.content,helperText:h.content,sx:{"& .MuiOutlinedInput-root":{fontFamily:"inherit"}}})]})}),e(Gs,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e(rm,{sx:{mr:1,color:"primary.main"}}),""]}),e(c,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:m.tags.map(L=>e(_e,{label:L,onDelete:()=>B(L),color:"primary",variant:"outlined",sx:{fontWeight:500}},L))}),o(c,{sx:{display:"flex",gap:1},children:[e(ze,{label:"  ",value:v,onChange:L=>S(L.target.value),onKeyPress:T,sx:{flexGrow:1}}),e(re,{variant:"outlined",onClick:R,disabled:!v.trim(),sx:{borderRadius:2},children:""})]})]})})]})}),e(le,{item:!0,xs:12,lg:4,children:o(It.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e(Gs,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e(ka,{sx:{mr:1,color:"primary.main"}})," "]}),m.imagePreview?o(c,{sx:{position:"relative",mb:2},children:[e("img",{src:m.imagePreview,alt:"Preview",style:{width:"100%",height:200,objectFit:"cover",borderRadius:t.spacing(1)}}),e(xe,{onClick:z,sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:e(tn,{})})]}):o(LW,{hasImage:!1,children:[e("input",{type:"file",accept:"image/*",onChange:_,style:{display:"none"},id:"image-upload"}),e("label",{htmlFor:"image-upload",children:o(c,{sx:{cursor:"pointer"},children:[e(ka,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e(f,{variant:"body2",color:"text.secondary",children:"     "}),e(f,{variant:"caption",color:"text.secondary",children:" : 5 "})]})})]}),h.image&&e(Be,{severity:"error",sx:{mt:2},children:h.image})]})}),e(Gs,{children:o(pt,{sx:{p:3},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:""}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(Wt,{fullWidth:!0,children:[e(Ot,{children:" "}),o(Bt,{name:"status",value:m.status,onChange:C,label:" ",children:[e(We,{value:"draft",children:""}),e(We,{value:"published",children:""})]})]}),e(wt,{control:e(xr,{name:"featured",checked:m.featured,onChange:C,color:"primary"}),label:" "}),e(wt,{control:e(xr,{name:"allow_comments",checked:m.allow_comments,onChange:C,color:"primary"}),label:" "})]})]})}),e(Gs,{children:o(pt,{sx:{p:3},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:" SEO"}),e(ze,{fullWidth:!0,label:"Meta Description",name:"meta_description",value:m.meta_description,onChange:C,multiline:!0,rows:2,sx:{mb:2}}),e(ze,{fullWidth:!0,label:"Meta Keywords",name:"meta_keywords",value:m.meta_keywords,onChange:C,multiline:!0,rows:2})]})}),o(De,{sx:{p:3,borderRadius:2},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:""}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(re,{type:"submit",variant:"contained",startIcon:e(vw,{}),onClick:V,disabled:d,sx:{background:"linear-gradient(45deg, #0288d1 30%, #0e5181 90%)",borderRadius:2,py:1.5,fontWeight:600},children:d?e(Qe,{size:20,color:"inherit"}):" "}),e(re,{type:"submit",variant:"outlined",startIcon:e(nm,{}),onClick:ee,disabled:d,sx:{borderRadius:2,py:1.5,fontWeight:600},children:d?e(Qe,{size:20}):" "})]})]})]})})]})}),h.general&&e(Be,{severity:"error",sx:{mt:2},children:h.general})]})},Xs=te(nt)(({theme:t})=>({marginBottom:t.spacing(3),border:`1px solid ${pe(t.palette.divider,.1)}`,borderRadius:t.spacing(2),transition:"all 0.3s ease-in-out","&:hover":{borderColor:t.palette.primary.main,boxShadow:t.shadows[4]}})),BW=te(c)(({theme:t,hasImage:n})=>({border:`2px dashed ${n?t.palette.primary.main:t.palette.grey[300]}`,borderRadius:t.spacing(2),padding:t.spacing(4),textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:n?pe(t.palette.primary.main,.05):t.palette.grey[50],"&:hover":{borderColor:t.palette.primary.main,backgroundColor:pe(t.palette.primary.main,.1)}})),FW=()=>{const t=jt(),n=ct(),{id:a}=cr(),[l,d]=w.useState(!0),[p,h]=w.useState(!1),[x,m]=w.useState({}),[y,v]=w.useState({title:"",slug:"",content:"",summary:"",tags:[],status:"draft",featured:!1,allow_comments:!0,meta_description:"",meta_keywords:"",image:null,imagePreview:null}),[S,C]=w.useState("");w.useEffect(()=>{a&&$(null,null,function*(){try{console.log("Fetching article with ID:",a);const G=yield Fr.getArticle(a);console.log("Article data received:",G);const W={id:G.id,title:G.title||"",slug:G.slug||"",content:G.content||"",summary:G.summary||"",tags:G.tags?G.tags.map(M=>M.name||M):[],status:G.status||"draft",featured:G.featured||!1,allow_comments:G.allow_comments!==!1,meta_description:G.meta_description||"",meta_keywords:G.meta_keywords||"",image:null,imagePreview:G.image?G.image.startsWith("http")?G.image:`http://localhost:8000${G.image}`:null};v(W),d(!1)}catch(G){console.error("Error fetching article:",G),m(W=>oe(X({},W),{general:"    .    ."})),d(!1)}})},[a]);const _=k=>{const{name:G,value:W,type:M,checked:U}=k.target;if(v(H=>oe(X({},H),{[G]:M==="checkbox"?U:W})),x[G]&&m(H=>oe(X({},H),{[G]:""})),G==="title"){const H=q(W);v(N=>oe(X({},N),{slug:H}))}},z=k=>{const G=k.target.files[0];if(G){if(G.size>5*1024*1024){m(M=>oe(X({},M),{image:"       5 "}));return}const W=new FileReader;W.onload=M=>{v(U=>oe(X({},U),{image:G,imagePreview:M.target.result}))},W.readAsDataURL(G),x.image&&m(M=>oe(X({},M),{image:""}))}},R=()=>{v(k=>oe(X({},k),{image:null,imagePreview:null}))},B=()=>{S.trim()&&!y.tags.includes(S.trim())&&(v(k=>oe(X({},k),{tags:[...k.tags,S.trim()]})),C(""))},T=k=>{v(G=>oe(X({},G),{tags:G.tags.filter(W=>W!==k)}))},O=k=>{k.key==="Enter"&&(k.preventDefault(),B())},q=k=>k.toLowerCase().replace(/[^\u0600-\u06FF\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"),j=()=>{const k={};return y.title.trim()||(k.title=" "),y.content.trim()||(k.content=" "),y.summary.trim()||(k.summary=" "),y.summary.length>200&&(k.summary="      200 "),m(k),Object.keys(k).length===0},ee=(k,G="draft")=>$(null,null,function*(){var W;if(k.preventDefault(),!!j()){h(!0);try{const M=oe(X({},y),{status:G,content:y.content||"",summary:y.summary||"",meta_description:y.meta_description||"",meta_keywords:y.meta_keywords||"",featured:y.featured||!1,allow_comments:y.allow_comments!==!1,tags:y.tags||[]});delete M.imagePreview,console.log("Sending updated article data:",M);const U=yield Fr.updateArticle(a,M);console.log("Article updated successfully:",U),n("/teacher/articles")}catch(M){if(console.error("Error updating article:",M),(W=M.response)!=null&&W.data){const U=M.response.data,H={};Object.keys(U).forEach(N=>{Array.isArray(U[N])?H[N]=U[N][0]:H[N]=U[N]}),m(H)}else m(U=>oe(X({},U),{general:"    .    ."}))}finally{h(!1)}}}),V=k=>{ee(k,"draft")},L=k=>{ee(k,"published")};return l?o(c,{sx:{p:3},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e(gt,{variant:"text",width:300,height:40}),e(gt,{variant:"rectangular",width:150,height:40})]}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,lg:8,children:[1,2,3].map(k=>e(gt,{variant:"rectangular",height:200,sx:{mb:2,borderRadius:2}},k))}),e(le,{item:!0,xs:12,lg:4,children:[1,2,3].map(k=>e(gt,{variant:"rectangular",height:150,sx:{mb:2,borderRadius:2}},k))})]})]}):o(c,{sx:{p:3},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[o(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:t.palette.primary.main,display:"flex",alignItems:"center"},children:[e(en,{sx:{mr:1}})," "]}),e(re,{variant:"outlined",startIcon:e(qt,{}),onClick:()=>n("/teacher/articles"),sx:{borderRadius:2},children:" "})]}),e("form",{onSubmit:ee,children:o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,lg:8,children:o(It.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e(Xs,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e(en,{sx:{mr:1,color:"primary.main"}})," "]}),o(le,{container:!0,spacing:3,children:[e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:" ",name:"title",value:y.title,onChange:_,error:!!x.title,helperText:x.title,sx:{mb:2}})}),e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:"  (Slug)",name:"slug",value:y.slug,onChange:_,error:!!x.slug,helperText:x.slug||"    "})}),e(le,{item:!0,xs:12,children:e(ze,{fullWidth:!0,label:" ",name:"summary",value:y.summary,onChange:_,multiline:!0,rows:3,error:!!x.summary,helperText:x.summary||`${y.summary.length}/200`,inputProps:{maxLength:200}})})]})]})}),e(Xs,{children:o(pt,{sx:{p:3},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:" "}),e(ze,{fullWidth:!0,label:" ",name:"content",value:y.content,onChange:_,multiline:!0,rows:12,error:!!x.content,helperText:x.content,sx:{"& .MuiOutlinedInput-root":{fontFamily:"inherit"}}})]})}),e(Xs,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e(rm,{sx:{mr:1,color:"primary.main"}}),""]}),e(c,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:y.tags.map(k=>e(_e,{label:k,onDelete:()=>T(k),color:"primary",variant:"outlined",sx:{fontWeight:500}},k))}),o(c,{sx:{display:"flex",gap:1},children:[e(ze,{label:"  ",value:S,onChange:k=>C(k.target.value),onKeyPress:O,sx:{flexGrow:1}}),e(re,{variant:"outlined",onClick:B,disabled:!S.trim(),sx:{borderRadius:2},children:""})]})]})})]})}),e(le,{item:!0,xs:12,lg:4,children:o(It.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e(Xs,{children:o(pt,{sx:{p:3},children:[o(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[e(ka,{sx:{mr:1,color:"primary.main"}})," "]}),y.imagePreview?o(c,{sx:{position:"relative",mb:2},children:[e("img",{src:y.imagePreview||"https://via.placeholder.com/400x250/4A6CF7/ffffff?text=No+Image",alt:"Preview",style:{width:"100%",height:200,objectFit:"cover",borderRadius:t.spacing(1)},onError:k=>{k.target.src="https://via.placeholder.com/400x250/4A6CF7/ffffff?text=Image+Error"}}),e(xe,{onClick:R,sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:e(tn,{})})]}):o(BW,{hasImage:!1,children:[e("input",{type:"file",accept:"image/*",onChange:z,style:{display:"none"},id:"image-upload"}),e("label",{htmlFor:"image-upload",children:o(c,{sx:{cursor:"pointer"},children:[e(ka,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e(f,{variant:"body2",color:"text.secondary",children:"     "}),e(f,{variant:"caption",color:"text.secondary",children:" : 5 "})]})})]}),x.image&&e(Be,{severity:"error",sx:{mt:2},children:x.image})]})}),e(Xs,{children:o(pt,{sx:{p:3},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:""}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[o(Wt,{fullWidth:!0,children:[e(Ot,{children:" "}),o(Bt,{name:"status",value:y.status,onChange:_,label:" ",children:[e(We,{value:"draft",children:""}),e(We,{value:"published",children:""})]})]}),e(wt,{control:e(xr,{name:"featured",checked:y.featured,onChange:_,color:"primary"}),label:" "}),e(wt,{control:e(xr,{name:"allow_comments",checked:y.allow_comments,onChange:_,color:"primary"}),label:" "})]})]})}),e(Xs,{children:o(pt,{sx:{p:3},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:" SEO"}),e(ze,{fullWidth:!0,label:"Meta Description",name:"meta_description",value:y.meta_description,onChange:_,multiline:!0,rows:2,sx:{mb:2}}),e(ze,{fullWidth:!0,label:"Meta Keywords",name:"meta_keywords",value:y.meta_keywords,onChange:_,multiline:!0,rows:2})]})}),o(De,{sx:{p:3,borderRadius:2},children:[e(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:""}),o(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(re,{type:"submit",variant:"contained",startIcon:e(vw,{}),onClick:L,disabled:p,sx:{background:"linear-gradient(45deg, #0288d1 30%, #0e5181 90%)",borderRadius:2,py:1.5,fontWeight:600},children:p?e(Qe,{size:20,color:"inherit"}):" "}),e(re,{type:"submit",variant:"outlined",startIcon:e(nm,{}),onClick:V,disabled:p,sx:{borderRadius:2,py:1.5,fontWeight:600},children:p?e(Qe,{size:20}):" "})]})]})]})})]})}),x.general&&e(Be,{severity:"error",sx:{mt:2},children:x.general})]})},W5=te(nt)(({theme:t})=>({borderRadius:t.shape.borderRadius*2,boxShadow:`0 8px 32px ${pe(t.palette.common.black,.1)}`,border:`1px solid ${pe(t.palette.primary.main,.1)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:`0 12px 40px ${pe(t.palette.common.black,.15)}`}})),PW=te(re)(({theme:t})=>({width:"100%",padding:t.spacing(2,4),fontSize:"1.1rem",fontWeight:700,borderRadius:t.shape.borderRadius*3,textTransform:"none",background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.primary.dark} 100%)`,boxShadow:`0 8px 24px ${pe(t.palette.primary.main,.3)}`,"&:hover":{transform:"translateY(-2px)",boxShadow:`0 12px 32px ${pe(t.palette.primary.main,.4)}`}})),jW=()=>{const t=ct(),{isAuthenticated:n,loading:a}=uo(),[l,d]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(!1);w.useEffect(()=>{if(!a){if(!n){t("/login",{state:{from:"/cart"}});return}y()}},[n,a,t]);const y=()=>$(null,null,function*(){try{h(!0);const _=yield No.getCart();d(_.items||[])}catch(_){console.error("Error loading cart:",_)}finally{h(!1)}}),v=_=>$(null,null,function*(){try{yield No.removeFromCart(_),d(z=>z.filter(R=>R.id!==_))}catch(z){console.error("Error removing from cart:",z),alert("      ")}}),S=()=>l.reduce((_,z)=>{const R=z.course.discount_price||z.course.price;return _+parseFloat(R)},0),C=()=>$(null,null,function*(){if(!n){t("/login",{state:{from:"/cart"}});return}if(l.length===0){alert(" .      .");return}try{m(!0);const{url:_}=yield nS.createMoyasarPayment();window.location.href=_}catch(_){console.error("Payment error:",_),alert("     ")}finally{m(!1)}});return a||p?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e(Qe,{size:60})}):o(c,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e(On,{}),o(Xe,{maxWidth:"lg",sx:{py:4,flex:1},children:[o(c,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[e(xe,{onClick:()=>t(-1),sx:{color:"primary.main"},children:e(qt,{})}),o(f,{variant:"h4",component:"h1",fontWeight:700,sx:{display:"flex",alignItems:"center",gap:1},children:[e(qo,{color:"primary"})," "]})]}),l.length===0?o(c,{sx:{textAlign:"center",py:8},children:[e(qo,{sx:{fontSize:80,color:"text.secondary",mb:2}}),e(f,{variant:"h5",gutterBottom:!0,children:" "}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"       "}),e(re,{variant:"contained",size:"large",onClick:()=>t("/courses"),sx:{borderRadius:3,px:4,py:1.5},children:" "})]}):o(le,{container:!0,spacing:4,children:[e(le,{xs:12,lg:8,children:e(W5,{children:o(pt,{children:[o(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e(qo,{color:"primary"}),"  (",l.length,")"]}),l.map(_=>o(c,{sx:{display:"flex",alignItems:"center",p:2,mb:2,border:"1px solid",borderColor:"divider",borderRadius:2},children:[e(Tt,{src:_.course.image,alt:_.course.title,sx:{width:80,height:80,mr:2}}),o(c,{sx:{flex:1,mr:2},children:[e(f,{variant:"h6",fontWeight:600,gutterBottom:!0,children:_.course.title}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:1},children:_.course.instructor}),o(c,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(_e,{label:_.course.level,size:"small",color:"primary",variant:"outlined"}),e(f,{variant:"body2",color:"text.secondary",children:_.course.duration})]})]}),o(c,{sx:{textAlign:"left",mr:2},children:[o(f,{variant:"h6",color:"primary",fontWeight:700,children:[parseFloat(_.course.discount_price||_.course.price).toFixed(2)," ."]}),_.course.discount_price&&o(f,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:[parseFloat(_.course.price).toFixed(2)," ."]})]}),e(xe,{color:"error",onClick:()=>v(_.id),sx:{ml:1},children:e(tn,{})})]},_.course.id))]})})}),e(le,{xs:12,lg:4,children:e(W5,{children:o(pt,{children:[o(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e(c0,{color:"primary"})," "]}),o(c,{sx:{mb:3},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e(f,{variant:"body1",children:" :"}),e(f,{variant:"body1",fontWeight:600,children:l.length})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e(f,{variant:"body1",children:" :"}),o(f,{variant:"body1",fontWeight:600,children:[S().toFixed(2)," ."]})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e(f,{variant:"body1",children:" (15%):"}),o(f,{variant:"body1",fontWeight:600,children:[(S()*.15).toFixed(2)," ."]})]}),e(Vt,{sx:{my:2}}),o(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e(f,{variant:"h6",fontWeight:700,children:" :"}),o(f,{variant:"h6",color:"primary",fontWeight:700,children:[(S()*1.15).toFixed(2)," ."]})]})]}),e(PW,{variant:"contained",onClick:C,startIcon:x?e(Qe,{size:20,color:"inherit"}):e(ah,{}),disabled:l.length===0||x,children:x?" ...":" "}),e(re,{variant:"outlined",fullWidth:!0,sx:{mt:2,borderRadius:3,py:1.5},onClick:()=>t("/courses"),children:"   "})]})})})]})]}),e(Bn,{})]})},$5=te(nt)(({theme:t})=>({borderRadius:t.shape.borderRadius*3,background:`linear-gradient(135deg, ${pe(t.palette.background.paper,.9)} 0%, ${pe(t.palette.background.default,.9)} 100%)`,backdropFilter:"blur(10px)",border:`1px solid ${pe("#1976d2",.1)}`,boxShadow:`0 8px 32px ${pe(t.palette.common.black,.08)}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-8px)",boxShadow:`0 20px 60px ${pe(t.palette.common.black,.12)}`}})),NW=te(re)(({theme:t})=>({width:"100%",padding:t.spacing(2.5,4),fontSize:"1.2rem",fontWeight:700,borderRadius:t.shape.borderRadius*4,textTransform:"none",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:`0 8px 32px ${pe("#1976d2",.3)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(90deg, transparent, ${pe(t.palette.common.white,.2)}, transparent)`,transition:"left 0.5s"},"&:hover":{transform:"translateY(-3px)",boxShadow:`0 16px 48px ${pe("#1976d2",.4)}`,"&::before":{left:"100%"}}})),HW=te(De)(({theme:t})=>({padding:t.spacing(3),borderRadius:t.shape.borderRadius*2,background:`linear-gradient(135deg, ${pe("#42a5f5",.05)} 0%, ${pe("#1976d2",.02)} 100%)`,border:`1px solid ${pe("#1976d2",.1)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #f50057)"}})),L5=te(c)(({theme:t})=>({display:"flex",alignItems:"center",gap:t.spacing(1),padding:t.spacing(1,2),borderRadius:t.shape.borderRadius*2,background:pe("#2e7d32",.1),border:`1px solid ${pe("#2e7d32",.2)}`,color:"#2e7d32",fontSize:"0.875rem",fontWeight:500})),UW=()=>{const{courseId:t}=cr(),n=ct(),{isAuthenticated:a,loading:l}=uo(),[d,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(!1);w.useEffect(()=>{if(!l){if(!a){n("/login",{state:{from:`/payment/${t}`}});return}v()}},[t,a,l,n]);const v=()=>$(null,null,function*(){try{x(!0);const _=yield gn.getCourseById(t);p(_)}catch(_){console.error("Error loading course:",_),alert("     ")}finally{x(!1)}}),S=()=>$(null,null,function*(){var _,z;if(!a){n("/login",{state:{from:`/payment/${t}`}});return}try{y(!0);const{url:R}=yield nS.createCoursePayment(t);window.location.href=R}catch(R){console.error("Payment error:",R),(z=(_=R.response)==null?void 0:_.data)!=null&&z.detail?alert(R.response.data.detail):alert("     ")}finally{y(!1)}}),C=()=>{if(!d)return 0;const _=d.discount_price||d.price,z=parseFloat(_),R=z*.15;return z+R};return l||h?e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e(Qe,{size:60})}):a?d?o(c,{sx:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e(On,{}),o(Xe,{maxWidth:"lg",sx:{py:6,flex:1},children:[o(c,{sx:{mb:6,display:"flex",alignItems:"center",gap:2},children:[e(xe,{onClick:()=>n(-1),sx:{color:"#1976d2",background:pe("#fff",.8),backdropFilter:"blur(10px)","&:hover":{background:pe("#fff",.9),transform:"scale(1.1)"}},children:e(qt,{})}),o(f,{variant:"h3",component:"h1",fontWeight:800,sx:{display:"flex",alignItems:"center",gap:2,background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:[e(ah,{sx:{fontSize:40}})," "]})]}),o(le,{container:!0,spacing:4,children:[e(le,{xs:12,lg:8,children:e($5,{children:o(pt,{children:[o(f,{variant:"h5",gutterBottom:!0,sx:{mb:4,display:"flex",alignItems:"center",gap:2,fontWeight:700,color:"#1976d2"},children:[e(c0,{sx:{fontSize:28}})," "]}),e(HW,{elevation:0,children:o(c,{sx:{display:"flex",alignItems:"flex-start",gap:3},children:[e(Tt,{src:d.image,alt:d.title,sx:{width:120,height:120,border:"4px solid",borderColor:"#1976d2",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"}}),o(c,{sx:{flex:1},children:[e(f,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{mb:2},children:d.title}),e(f,{variant:"body1",color:"text.secondary",sx:{mb:2,fontSize:"1.1rem"},children:d.instructor}),o(c,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:3},children:[e(_e,{label:d.level,color:"primary",variant:"filled",sx:{fontWeight:600}}),o(L5,{children:[e(dn,{fontSize:"small"}),d.duration]}),o(L5,{children:[e(rs,{fontSize:"small"}),d.total_enrollments||0," "]})]})]}),o(c,{sx:{textAlign:"center",minWidth:120},children:[e(f,{variant:"h4",color:"primary",fontWeight:800,sx:{mb:1},children:parseFloat(d.discount_price||d.price).toFixed(2)}),e(f,{variant:"body2",color:"text.secondary",sx:{mb:1},children:" "}),d.discount_price&&o(f,{variant:"body2",color:"error.main",sx:{textDecoration:"line-through",fontWeight:600},children:[parseFloat(d.price).toFixed(2)," ."]})]})]})}),o(Be,{severity:"info",sx:{mt:4,borderRadius:3,background:pe("#e3f2fd",.8),border:"1px solid",borderColor:"#42a5f5"},children:[e(D6,{sx:{mr:1,color:"#1976d2"}}),e(f,{variant:"body1",fontWeight:600,children:"      Moyasar"})]})]})})}),e(le,{xs:12,lg:4,children:e(c,{sx:{position:"sticky",top:24},children:e($5,{children:o(pt,{children:[o(f,{variant:"h5",gutterBottom:!0,sx:{mb:4,display:"flex",alignItems:"center",gap:2,fontWeight:700,color:"#1976d2"},children:[e(c0,{sx:{fontSize:28}})," "]}),o(c,{sx:{mb:4},children:[o(c,{sx:{display:"flex",justifyContent:"space-between",mb:2,p:2,borderRadius:2,background:pe("#1976d2",.05)},children:[e(f,{variant:"body1",fontWeight:600,children:" :"}),o(f,{variant:"body1",fontWeight:700,color:"primary",children:[parseFloat(d.discount_price||d.price).toFixed(2)," ."]})]}),d.discount_price&&o(c,{sx:{display:"flex",justifyContent:"space-between",mb:2,p:1.5,borderRadius:2,background:pe("#2e7d32",.1)},children:[e(f,{variant:"body2",color:"success.main",fontWeight:600,children:":"}),o(f,{variant:"body2",color:"success.main",fontWeight:700,children:[(parseFloat(d.price)-parseFloat(d.discount_price)).toFixed(2)," ."]})]}),o(c,{sx:{display:"flex",justifyContent:"space-between",mb:2,p:2,borderRadius:2,background:pe("#ed6c02",.05)},children:[e(f,{variant:"body1",fontWeight:600,children:" (15%):"}),o(f,{variant:"body1",fontWeight:700,color:"warning.main",children:[(parseFloat(d.discount_price||d.price)*.15).toFixed(2)," ."]})]}),e(Vt,{sx:{my:3,borderWidth:2}}),o(c,{sx:{display:"flex",justifyContent:"space-between",p:3,borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",color:"white"},children:[e(f,{variant:"h6",fontWeight:700,children:" :"}),o(f,{variant:"h5",fontWeight:800,children:[C().toFixed(2)," ."]})]})]}),e(NW,{variant:"contained",onClick:S,disabled:m,startIcon:m?e(Qe,{size:20,color:"inherit"}):e(ah,{}),children:m?" ...":"  "}),e(re,{variant:"outlined",fullWidth:!0,sx:{mt:3,borderRadius:3,py:1.5,borderWidth:2,fontWeight:600,"&:hover":{borderWidth:2,transform:"translateY(-2px)"}},onClick:()=>n("/courses"),children:" "}),o(c,{sx:{mt:4,p:3,borderRadius:3,background:"linear-gradient(135deg, #e5978b 0%, #45a049 100%)",color:"white",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="20" height="20" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="10" cy="10" r="1"/%3E%3C/g%3E%3C/svg%3E")',opacity:.3}},children:[o(f,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2,fontWeight:700},children:[e(yr,{})," "]}),o(c,{sx:{position:"relative",zIndex:1},children:[o(f,{variant:"body2",sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:[e(Pi,{fontSize:"small"}),"   "]}),o(f,{variant:"body2",sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:[e(Pi,{fontSize:"small"}),"  "]}),o(f,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[e(Pi,{fontSize:"small"}),"    30 "]})]})]})]})})})})]})]}),e(Bn,{})]}):o(Xe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[e(Be,{severity:"error",sx:{mb:4},children:e(f,{variant:"h6",gutterBottom:!0,children:"  "})}),e(re,{variant:"contained",onClick:()=>n("/courses"),startIcon:e(qt,{}),sx:{borderRadius:3,px:4,py:1.5},children:" "})]}):e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:e(Qe,{size:60})})},O5=W6({key:"muirtl",stylisPlugins:[t_,Dw],prepend:!0});console.log("App component is being loaded...");const Sc=({children:t,allowedRoles:n=[]})=>{const{isAuthenticated:a,user:l,loading:d,getUserRole:p}=uo(),h=ad();if(console.log("ProtectedRoute - isAuthenticated:",a),console.log("ProtectedRoute - user:",l),console.log("ProtectedRoute - allowedRoles:",n),console.log("ProtectedRoute - current path:",h.pathname),d)return console.log("ProtectedRoute - Loading auth state..."),e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e(Qe,{})});if(!a)return console.log("ProtectedRoute - Not authenticated, redirecting to login"),e(cl,{to:"/login",state:{from:h},replace:!0});if(n.length>0){const x=p();if(console.log("ProtectedRoute - User role:",x),!n.some(y=>y==="teacher"&&x==="instructor"||y==="instructor"&&x==="teacher"?!0:y===x))return console.log(`ProtectedRoute - User role ${x} not in allowed roles:`,n),e(cl,{to:"/unauthorized",replace:!0})}return console.log("ProtectedRoute - Access granted"),t},B5=({children:t})=>{const{isAuthenticated:n,loading:a,getUserRole:l}=uo();if(a)return e(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e(Qe,{})});if(n){const d=l();let p="/student/dashboard";return(d==="instructor"||d==="teacher")&&(p="/teacher/dashboard"),e(cl,{to:p,replace:!0})}return t},VW=()=>{const[t,n]=w.useState(!1),[a,l]=w.useState(!1),d=()=>{l(!a),localStorage.setItem("darkMode",!a)};w.useEffect(()=>{const h=localStorage.getItem("darkMode")==="true";l(h)},[]);const p=w.useMemo(()=>V0(oe(X({},Sg),{palette:oe(X({},Sg.palette),{mode:a?"dark":"light",background:oe(X({},Sg.palette.background),{default:a?"#121212":"#F8FAFF",paper:a?"#1E1E1E":"#FFFFFF"})})})),[a]);return w.useEffect(()=>(console.log("App component mounted"),n(!0),()=>{console.log("App component unmounting")}),[]),console.log("App component rendering..."),t?e(sm,{children:e(G1,{value:O5,children:e($6,{injectFirst:!0,children:o(d0,{theme:p,children:[e(ww,{}),e(L6,{styles:MA}),e($4,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"left"},autoHideDuration:4e3,style:{direction:"rtl"},classes:{containerRoot:"snackbar-container"},dense:!0,children:e("div",{className:"App",dir:"rtl",style:{fontFamily:"Tajawal, sans-serif"},children:o(Qp,{children:[e(Ye,{path:"/login",element:e(B5,{children:e(aE,{})})}),e(Ye,{path:"/register",element:e(B5,{children:e(hE,{})})}),e(Ye,{path:"/",element:e(Kz,{})}),e(Ye,{path:"/unauthorized",element:e(e9,{})}),e(Ye,{path:"/courses",element:e(sD,{})}),e(Ye,{path:"/courses/:id",element:e(wD,{})}),e(Ye,{path:"/articles",element:e(AW,{})}),e(Ye,{path:"/articles/:slug",element:e(TW,{})}),e(Ye,{path:"/certificates/verify/:verificationCode",element:e(K9,{})}),e(Ye,{path:"/cart",element:e(jW,{})}),e(Ye,{path:"/payment/:courseId",element:e(UW,{})}),e(Ye,{path:"/student/*",element:e(Sc,{allowedRoles:["student"],children:e(kg,{toggleDarkMode:d,isDarkMode:a,children:o(Qp,{children:[e(Ye,{index:!0,element:e(S5,{})}),e(Ye,{path:"dashboard",element:e(S5,{})}),e(Ye,{path:"courses",element:e(y5,{})}),e(Ye,{path:"my-courses",element:e(y5,{})}),e(Ye,{path:"my-courses/:courseId/exam",element:e(PC,{})}),e(Ye,{path:"my-courses/:courseId/exam/taking",element:e(jC,{})}),e(Ye,{path:"my-courses/:courseId/exam/result",element:e(Km,{})}),e(Ye,{path:"assignments",element:e(Z9,{})}),e(Ye,{path:"assignments/:assignmentId/submit",element:e(nW,{})}),e(Ye,{path:"certificates",element:e(X9,{})}),e(Ye,{path:"meetings",element:e(hW,{})}),e(Ye,{path:"meetings/live/:meetingId",element:e(bW,{})}),e(Ye,{path:"settings",element:e(Zg,{})})]})})})}),e(Ye,{path:"/student/courses/:id",element:e(Sc,{allowedRoles:["student"],children:e(v9,{})})}),e(Ye,{path:"/teacher/*",element:e(Sc,{allowedRoles:["teacher","instructor"],children:e(kg,{toggleDarkMode:d,isDarkMode:a,children:o(Qp,{children:[e(Ye,{index:!0,element:e(C5,{})}),e(Ye,{path:"dashboard",element:e(C5,{})}),e(Ye,{path:"courses",element:e("div",{children:" "})}),e(Ye,{path:"my-courses",element:e(GD,{})}),e(Ye,{path:"courses/new",element:e(zD,{})}),e(Ye,{path:"courses/:id/edit",element:e(MD,{})}),e(Ye,{path:"courses/:courseId/units",element:e(LD,{})}),e(Ye,{path:"courses/:courseId/units/new",element:e(WD,{})}),e(Ye,{path:"courses/:courseId/units/:unitId",element:e(ND,{})}),e(Ye,{path:"courses/:courseId/units/:unitId/edit",element:e(FD,{})}),e(Ye,{path:"courses/:courseId/units/:unitId/lessons",element:e(qD,{})}),e(Ye,{path:"courses/:courseId/units/:unitId/lessons/create",element:e(x5,{})}),e(Ye,{path:"courses/:courseId/units/:unitId/lessons/:lessonId/edit",element:e(x5,{isEdit:!0})}),e(Ye,{path:"courses/:courseId/units/:unitId/lessons/:lessonId",element:e(Xm,{})}),e(Ye,{path:"assignments",element:e(J9,{})}),e(Ye,{path:"assignments/new",element:e(iW,{})}),e(Ye,{path:"assignments/:assignmentId/edit",element:e(aW,{})}),e(Ye,{path:"assignments/:assignmentId/questions",element:e(oW,{})}),e(Ye,{path:"assignments/:assignmentId/submissions",element:e(eW,{})}),e(Ye,{path:"assignments/:assignmentId/submissions/:submissionId",element:e(tW,{})}),e(Ye,{path:"students",element:e("div",{children:""})}),e(Ye,{path:"reports",element:e("div",{children:""})}),e(Ye,{path:"settings",element:e(Zg,{})}),e(Ye,{path:"quizzes",element:e(r9,{})}),e(Ye,{path:"quizzes/create",element:e(v5,{})}),e(Ye,{path:"quizzes/:quizId/edit",element:e(v5,{})}),e(Ye,{path:"quizzes/:quizId",element:e(a9,{})}),e(Ye,{path:"exams",element:e(o9,{})}),e(Ye,{path:"exams/create",element:e(w5,{})}),e(Ye,{path:"exams/:examId",element:e(s9,{})}),e(Ye,{path:"exams/:examId/edit",element:e(w5,{isEdit:!0})}),e(Ye,{path:"meetings",element:e(cW,{})}),e(Ye,{path:"meetings/live/:meetingId",element:e(gW,{})}),e(Ye,{path:"articles",element:e($W,{})}),e(Ye,{path:"articles/create",element:e(OW,{})}),e(Ye,{path:"articles/:id/edit",element:e(FW,{})})]})})})}),e(Ye,{path:"/profile",element:e(Sc,{children:e(kg,{children:e(Zg,{})})})}),e(Ye,{path:"/dashboard",element:e(Sc,{children:e(t9,{})})}),e(Ye,{path:"/dashboard/student",element:e(cl,{to:"/student/dashboard",replace:!0})}),e(Ye,{path:"/dashboard/teacher",element:e(cl,{to:"/teacher/dashboard",replace:!0})}),e(Ye,{path:"*",element:e(JD,{})})]})})})]})})})}):(console.log("App not yet initialized, showing loading state"),e(G1,{value:O5,children:e(d0,{theme:p,children:e("div",{dir:"rtl",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:p.palette.background.default,fontFamily:"Tajawal, sans-serif",direction:"rtl"},children:e("div",{children:"  ..."})})})}))},qW=()=>e(TA,{children:e(VW,{})});class YW extends w.Component{constructor(a){super(a);yi(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,l){console.error("ErrorBoundary caught an error:",a,l),this.setState({error:a,errorInfo:l})}render(){return this.state.hasError?o(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center",backgroundColor:"#f8f8f8"},children:[e(f,{variant:"h4",color:"error",gutterBottom:!0,children:"Something went wrong"}),e(f,{variant:"body1",paragraph:!0,children:"We're sorry for the inconvenience. An error has occurred."}),!1,e(re,{variant:"contained",color:"primary",onClick:this.handleReload,sx:{mt:3},children:"Reload Page"})]}):this.props.children}}const QW=()=>{try{const t=localStorage.getItem("darkMode");return t!==null?t==="true":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch(t){return console.error("Error loading dark mode preference:",t),!1}},GW={isDarkMode:QW(),isMobileMenuOpen:!1,isNotificationsOpen:!1,activeTab:0},UC=rS({name:"ui",initialState:GW,reducers:{toggleDarkMode:t=>{const n=!t.isDarkMode;t.isDarkMode=n;try{localStorage.setItem("darkMode",n)}catch(a){console.error("Error saving dark mode preference:",a)}},setDarkMode:(t,n)=>{t.isDarkMode=n.payload;try{localStorage.setItem("darkMode",n.payload)}catch(a){console.error("Error saving dark mode preference:",a)}},toggleMobileMenu:t=>{t.isMobileMenuOpen=!t.isMobileMenuOpen},closeMobileMenu:t=>{t.isMobileMenuOpen=!1},toggleNotifications:t=>{t.isNotificationsOpen=!t.isNotificationsOpen},closeNotifications:t=>{t.isNotificationsOpen=!1},setActiveTab:(t,n)=>{t.activeTab=n.payload}}}),{toggleDarkMode:l7,setDarkMode:c7,toggleMobileMenu:d7,closeMobileMenu:u7,toggleNotifications:h7,closeNotifications:f7,setActiveTab:p7}=UC.actions,XW=UC.reducer,KW=sA({reducer:{auth:RA,ui:XW},devTools:!1}),ZW=V0({direction:"rtl",palette:{primary:{main:"#8E44AD",light:"#9B59B6",dark:"#7D3C98",contrastText:"#fff"},secondary:{main:"#2C3E50",light:"#34495E",dark:"#1F2D3D",contrastText:"#fff"},accent:{main:"#E74C3C",light:"#EC7063",dark:"#C0392B",contrastText:"#fff"},error:{main:"#E74C3C",light:"#EC7063",dark:"#C0392B"},warning:{main:"#F39C12",light:"#F4B350",dark:"#D68910"},info:{main:"#3498DB",light:"#5DADE2",dark:"#2E86C1"},success:{main:"#27AE60",light:"#58D68D",dark:"#1E8449"},background:{default:"#F8F9FA",paper:"#FFFFFF"},text:{primary:"#2C3E50",secondary:"#566573",disabled:"#95A5A6"}},typography:{fontFamily:["Tajawal","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h1:{fontSize:"2.5rem",fontWeight:500},h2:{fontSize:"2rem",fontWeight:500},h3:{fontSize:"1.75rem",fontWeight:500},h4:{fontSize:"1.5rem",fontWeight:500},h5:{fontSize:"1.25rem",fontWeight:500},h6:{fontSize:"1rem",fontWeight:500}},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500}}},MuiCard:{styleOverrides:{root:{boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}}}}}});console.log("Application is starting...");const F5=document.getElementById("root");F5?(console.log("Root element found, rendering application..."),c_.createRoot(F5).render(e(bt.StrictMode,{children:e(YW,{children:e(k_,{store:KW,children:o(d0,{theme:ZW,children:[e(ww,{}),e(j6,{children:e(sm,{children:e(qW,{})})})]})})})}))):console.error("Failed to find the root element")});export default JW();
