var Dk=Object.defineProperty,Ik=Object.defineProperties;var Wk=Object.getOwnPropertyDescriptors;var pu=Object.getOwnPropertySymbols;var uy=Object.prototype.hasOwnProperty,hy=Object.prototype.propertyIsEnumerable;var Op=Math.pow,$p=(e,n,a)=>n in e?Dk(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,q=(e,n)=>{for(var a in n||(n={}))uy.call(n,a)&&$p(e,a,n[a]);if(pu)for(var a of pu(n))hy.call(n,a)&&$p(e,a,n[a]);return e},ae=(e,n)=>Ik(e,Wk(n));var un=(e,n)=>{var a={};for(var l in e)uy.call(e,l)&&n.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&pu)for(var l of pu(e))n.indexOf(l)<0&&hy.call(e,l)&&(a[l]=e[l]);return a};var $k=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var ri=(e,n,a)=>$p(e,typeof n!="symbol"?n+"":n,a);var $=(e,n,a)=>new Promise((l,u)=>{var p=m=>{try{x(a.next(m))}catch(y){u(y)}},h=m=>{try{x(a.throw(m))}catch(y){u(y)}},x=m=>m.done?l(m.value):Promise.resolve(m.value).then(p,h);x((a=a.apply(e,n)).next())});import{h as Sw,j as An,E as Cw,d as kw,e as R0,B as d,A as _t,T as f,D as Pt,L as rc,f as Rr,g as ir,i as Bo,k as Fr,l as Ok,m as Vc,n as Gs,P as We,I as _w,o as xe,N as fy,S as Uc,H as ch,p as Vu,C as Aw,q as rn,V as nn,r as bt,Q as nr,s as Yr,t as Qr,u as ht,v as oe,w as te,M as Dc,x as Me,y as Vt,z as Ri,F as nl,G as Qe,K as zw,J as Ke,O as Vi,R as Do,U as Lk,W as Bk,X as py,Y as jr,Z as Rw,$ as fa,a0 as Gt,a1 as se,a2 as Ew,a3 as Pk,a4 as jk,a5 as dh,a6 as uh,a7 as Nk,a8 as Tw,a9 as Fk,aa as Je,ab as hh,ac as st,ad as gy,ae as Hk,af as Ic,ag as ua,ah as Xs,ai as Vk,aj as bn,ak as ji,al as ft,am as Mw,an as Be,ao as E0,ap as T0,aq as Uk,ar as M0,as as Ui,at as si,au as qc,av as Ou,aw as ya,ax as qk,ay as bc,az as _e,aA as Pr,aB as Dw,aC as Uu,aD as Ir,aE as Iw,aF as Lp,aG as xr,aH as At,aI as kt,aJ as Ai,aK as my,aL as qa,aM as Rt,aN as Et,aO as Ww,aP as Ce,aQ as he,aR as dt,aS as Yk,aT as xy,aU as by,aV as Qk,aW as yc,aX as Gk,aY as on,aZ as fn,a_ as zr,a$ as $w,b0 as fh,b1 as ph,b2 as Xk,b3 as Po,b4 as yy,b5 as Kk,b6 as nc,b7 as hr,b8 as qu,b9 as br,ba as yr,bb as zn,bc as li,bd as Zk,be as Yu,bf as Jk,bg as vy,bh as D0,bi as Fg,bj as ha,bk as Qu,bl as Ow,bm as Lw,bn as gh,bo as Bw,bp as wy,bq as e6,br as Pw,bs as Nn,bt as Ua,bu as Vo,bv as Hr,bw as jo,bx as Ks,by as Xe,bz as vr,bA as Bs,bB as jw,bC as Lu,bD as ui,bE as hi,bF as Jt,bG as ye,bH as fi,bI as I0,bJ as pi,bK as Xa,bL as sn,bM as Wr,bN as $r,bO as an,bP as Nw,bQ as t6,bR as r6,bS as Fw,bT as W0,bU as Sy,bV as Hw,bW as n6,bX as i6,bY as Vw,bZ as $0,b_ as Uw,b$ as qw,c0 as a6,c1 as Ci,c2 as Hg,c3 as Nr,c4 as pa,c5 as Tn,c6 as o6,c7 as Gu,c8 as Wc,c9 as Yw,ca as Cy,cb as s6,cc as ky,cd as _y,ce as l6,cf as c6,cg as d6,ch as u6,ci as h6,cj as f6,ck as No,cl as Bp,cm as p6,cn as g6,co as zi,cp as Ay,cq as ci,cr as Yc,cs as Qw,ct as O0,cu as vc,cv as wc,cw as Sc,cx as zy,cy as mh,cz as Gw,cA as Vg,cB as Ug,cC as Xu,cD as xh,cE as L0,cF as bh,cG as Xw,cH as m6,cI as x6,cJ as Ry,cK as Ku,cL as Kw,cM as Zw,cN as Cc,cO as Jw,cP as e5,cQ as t5,cR as r5,cS as b6,cT as y6,cU as n5,cV as i5,cW as v6,cX as w6,cY as Ls,cZ as B0,c_ as S6,c$ as P0,d0 as C6,d1 as Pp,d2 as a5,d3 as qg,d4 as k6,d5 as _6,d6 as Yg,d7 as Ey,d8 as A6,d9 as o5,da as z6}from"./mui-D1abUI6w.js";import{e as s5,f as R6,g as Qc,r as w,a as ut,c as E6,u as nt,h as yh,N as T6,L as Qt,i as er,j as Zs,k as jp,l as He,B as M6}from"./react-DSVV38br.js";import{K as D6,S as I6,R as Qg,M as W6,c as $6,C as Ty,D as O6,I as L6,s as B6,a as P6,b as j6,T as ni,A as My,d as Np,B as zs,e as N6,f as gu,g as Dy,h as Iy,i as F6,j as H6,k as Fp,l as V6,p as U6}from"./antd-DlDiEIS9.js";import{a as q6,b as Hp,c as ic,d as ac,e as Y6,f as Q6}from"./utils-dN33gA_h.js";var V7=$k(L=>{(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function a(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(u){if(u.ep)return;u.ep=!0;const p=a(u);fetch(u.href,p)}})();var Bt=An.Fragment,t=function(n,a,l){return Sw.call(a,"css")?An.jsx(Cw,kw(n,a),l):An.jsx(n,a,l)},s=function(n,a,l){return Sw.call(a,"css")?An.jsxs(Cw,kw(n,a),l):An.jsxs(n,a,l)},Vp={exports:{}},oc={},Up={exports:{}},qp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function G6(){return Wy||(Wy=1,function(e){function n(M,O){var C=M.length;M.push(O);e:for(;0<C;){var X=C-1>>>1,Z=M[X];if(0<u(Z,O))M[X]=O,M[C]=Z,C=X;else break e}}function a(M){return M.length===0?null:M[0]}function l(M){if(M.length===0)return null;var O=M[0],C=M.pop();if(C!==O){M[0]=C;e:for(var X=0,Z=M.length,j=Z>>>1;X<j;){var re=2*(X+1)-1,de=M[re],fe=re+1,ce=M[fe];if(0>u(de,C))fe<Z&&0>u(ce,de)?(M[X]=ce,M[fe]=C,X=fe):(M[X]=de,M[re]=C,X=re);else if(fe<Z&&0>u(ce,C))M[X]=ce,M[fe]=C,X=fe;else break e}}return O}function u(M,O){var C=M.sortIndex-O.sortIndex;return C!==0?C:M.id-O.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var h=Date,x=h.now();e.unstable_now=function(){return h.now()-x}}var m=[],y=[],v=1,S=null,_=3,k=!1,E=!1,R=!1,W=!1,T=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate!="undefined"?setImmediate:null;function G(M){for(var O=a(y);O!==null;){if(O.callback===null)l(y);else if(O.startTime<=M)l(y),O.sortIndex=O.expirationTime,n(m,O);else break;O=a(y)}}function J(M){if(R=!1,G(M),!E)if(a(m)!==null)E=!0,H||(H=!0,I());else{var O=a(y);O!==null&&Q(J,O.startTime-M)}}var H=!1,U=-1,A=5,V=-1;function Y(){return W?!0:!(e.unstable_now()-V<A)}function P(){if(W=!1,H){var M=e.unstable_now();V=M;var O=!0;try{e:{E=!1,R&&(R=!1,z(U),U=-1),k=!0;var C=_;try{t:{for(G(M),S=a(m);S!==null&&!(S.expirationTime>M&&Y());){var X=S.callback;if(typeof X=="function"){S.callback=null,_=S.priorityLevel;var Z=X(S.expirationTime<=M);if(M=e.unstable_now(),typeof Z=="function"){S.callback=Z,G(M),O=!0;break t}S===a(m)&&l(m),G(M)}else l(m);S=a(m)}if(S!==null)O=!0;else{var j=a(y);j!==null&&Q(J,j.startTime-M),O=!1}}break e}finally{S=null,_=C,k=!1}O=void 0}}finally{O?I():H=!1}}}var I;if(typeof N=="function")I=function(){N(P)};else if(typeof MessageChannel!="undefined"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=P,I=function(){F.postMessage(null)}}else I=function(){T(P,0)};function Q(M,O){U=T(function(){M(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(M){switch(_){case 1:case 2:case 3:var O=3;break;default:O=_}var C=_;_=O;try{return M()}finally{_=C}},e.unstable_requestPaint=function(){W=!0},e.unstable_runWithPriority=function(M,O){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var C=_;_=M;try{return O()}finally{_=C}},e.unstable_scheduleCallback=function(M,O,C){var X=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?X+C:X):C=X,M){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=C+Z,M={id:v++,callback:O,priorityLevel:M,startTime:C,expirationTime:Z,sortIndex:-1},C>X?(M.sortIndex=C,n(y,M),a(m)===null&&M===a(y)&&(R?(z(U),U=-1):R=!0,Q(J,C-X))):(M.sortIndex=Z,n(m,M),E||k||(E=!0,H||(H=!0,I()))),M},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(M){var O=_;return function(){var C=_;_=O;try{return M.apply(this,arguments)}finally{_=C}}}}(qp)),qp}var $y;function X6(){return $y||($y=1,Up.exports=G6()),Up.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function K6(){if(Oy)return oc;Oy=1;var e=X6(),n=s5(),a=R6();function l(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function p(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function h(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function x(r){if(p(r)!==r)throw Error(l(188))}function m(r){var i=r.alternate;if(!i){if(i=p(r),i===null)throw Error(l(188));return i!==r?null:r}for(var o=r,c=i;;){var g=o.return;if(g===null)break;var b=g.alternate;if(b===null){if(c=g.return,c!==null){o=c;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===o)return x(g),r;if(b===c)return x(g),i;b=b.sibling}throw Error(l(188))}if(o.return!==c.return)o=g,c=b;else{for(var D=!1,K=g.child;K;){if(K===o){D=!0,o=g,c=b;break}if(K===c){D=!0,c=g,o=b;break}K=K.sibling}if(!D){for(K=b.child;K;){if(K===o){D=!0,o=b,c=g;break}if(K===c){D=!0,c=b,o=g;break}K=K.sibling}if(!D)throw Error(l(189))}}if(o.alternate!==c)throw Error(l(190))}if(o.tag!==3)throw Error(l(188));return o.stateNode.current===o?r:i}function y(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=y(r),i!==null)return i;r=r.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),N=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function I(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var B=Symbol.for("react.client.reference");function F(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===B?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case W:return"Profiler";case R:return"StrictMode";case J:return"Suspense";case H:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case N:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case G:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return i=r.displayName||null,i!==null?i:F(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return F(r(i))}catch(o){}}return null}var Q=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C={pending:!1,data:null,method:null,action:null},X=[],Z=-1;function j(r){return{current:r}}function re(r){0>Z||(r.current=X[Z],X[Z]=null,Z--)}function de(r,i){Z++,X[Z]=r.current,r.current=i}var fe=j(null),ce=j(null),ie=j(null),ge=j(null);function Ae(r,i){switch(de(ie,i),de(ce,r),de(fe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?P1(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=P1(i),r=j1(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(fe),de(fe,r)}function tt(){re(fe),re(ce),re(ie)}function yt(r){r.memoizedState!==null&&de(ge,r);var i=fe.current,o=j1(i,r.type);i!==o&&(de(ce,r),de(fe,o))}function wr(r){ce.current===r&&(re(fe),re(ce)),ge.current===r&&(re(ge),Kl._currentValue=C)}var fr=Object.prototype.hasOwnProperty,ln=e.unstable_scheduleCallback,Le=e.unstable_cancelCallback,Tt=e.unstable_shouldYield,or=e.unstable_requestPaint,De=e.unstable_now,Ut=e.unstable_getCurrentPriorityLevel,Mn=e.unstable_ImmediatePriority,Dn=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,gi=e.unstable_LowPriority,pn=e.unstable_IdlePriority,Ei=e.log,Ti=e.unstable_setDisableYieldValue,yn=null,Ie=null;function Ve(r){if(typeof Ei=="function"&&Ti(r),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(yn,r)}catch(i){}}var Se=Math.clz32?Math.clz32:ne,pt=Math.log,Zt=Math.LN2;function ne(r){return r>>>=0,r===0?32:31-(pt(r)/Zt|0)|0}var $e=256,Oe=4194304;function je(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ze(r,i,o){var c=r.pendingLanes;if(c===0)return 0;var g=0,b=r.suspendedLanes,D=r.pingedLanes;r=r.warmLanes;var K=c&134217727;return K!==0?(c=K&~b,c!==0?g=je(c):(D&=K,D!==0?g=je(D):o||(o=K&~r,o!==0&&(g=je(o))))):(K=c&~b,K!==0?g=je(K):D!==0?g=je(D):o||(o=c&~r,o!==0&&(g=je(o)))),g===0?0:i!==0&&i!==g&&(i&b)===0&&(b=g&-g,o=i&-i,b>=o||b===32&&(o&4194048)!==0)?i:g}function Fe(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function ke(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lt(){var r=$e;return $e<<=1,($e&4194048)===0&&($e=256),r}function Ye(){var r=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),r}function It(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function tr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Te(r,i,o,c,g,b){var D=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var K=r.entanglements,le=r.expirationTimes,be=r.hiddenUpdates;for(o=D&~o;0<o;){var ze=31-Se(o),Ee=1<<ze;K[ze]=0,le[ze]=-1;var ve=be[ze];if(ve!==null)for(be[ze]=null,ze=0;ze<ve.length;ze++){var we=ve[ze];we!==null&&(we.lane&=-536870913)}o&=~Ee}c!==0&&Ue(r,c,0),b!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=b&~(D&~i))}function Ue(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var c=31-Se(i);r.entangledLanes|=i,r.entanglements[c]=r.entanglements[c]|1073741824|o&4194090}function ct(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var c=31-Se(o),g=1<<c;g&i|r[c]&i&&(r[c]|=i),o&=~g}}function Pe(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Sr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Mi(){var r=O.p;return r!==0?r:(r=window.event,r===void 0?32:ay(r.type))}function va(r,i){var o=O.p;try{return O.p=r,i()}finally{O.p=o}}var Gr=Math.random().toString(36).slice(2),sr="__reactFiber$"+Gr,Or="__reactProps$"+Gr,qt="__reactContainer$"+Gr,Ne="__reactEvents$"+Gr,lr="__reactListeners$"+Gr,vn="__reactHandles$"+Gr,$t="__reactResources$"+Gr,Di="__reactMarker$"+Gr;function qi(r){delete r[sr],delete r[Or],delete r[Ne],delete r[lr],delete r[vn]}function Vn(r){var i=r[sr];if(i)return i;for(var o=r.parentNode;o;){if(i=o[qt]||o[sr]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=V1(r);r!==null;){if(o=r[sr])return o;r=V1(r)}return i}r=o,o=r.parentNode}return null}function In(r){if(r=r[sr]||r[qt]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function mi(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(l(33))}function Un(r){var i=r[$t];return i||(i=r[$t]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Cr(r){r[Di]=!0}var sl=new Set,ll={};function Ii(r,i){Yi(r,i),Yi(r+"Capture",i)}function Yi(r,i){for(ll[r]=i,r=0;r<i.length;r++)sl.add(i[r])}var id=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},Wi={};function ad(r){return fr.call(Wi,r)?!0:fr.call(ot,r)?!1:id.test(r)?Wi[r]=!0:(ot[r]=!0,!1)}function Ja(r,i,o){if(ad(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function eo(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function qn(r,i,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+c)}}var qo,cl;function Yo(r){if(qo===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);qo=i&&i[1]||"",cl=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qo+r+cl}var Eh=!1;function Th(r,i){if(!r||Eh)return"";Eh=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(we){var ve=we}Reflect.construct(r,[],Ee)}else{try{Ee.call()}catch(we){ve=we}r.call(Ee.prototype)}}else{try{throw Error()}catch(we){ve=we}(Ee=r())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(we){if(we&&ve&&typeof we.stack=="string")return[we.stack,ve.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=c.DetermineComponentFrameRoot(),D=b[0],K=b[1];if(D&&K){var le=D.split(`
`),be=K.split(`
`);for(g=c=0;c<le.length&&!le[c].includes("DetermineComponentFrameRoot");)c++;for(;g<be.length&&!be[g].includes("DetermineComponentFrameRoot");)g++;if(c===le.length||g===be.length)for(c=le.length-1,g=be.length-1;1<=c&&0<=g&&le[c]!==be[g];)g--;for(;1<=c&&0<=g;c--,g--)if(le[c]!==be[g]){if(c!==1||g!==1)do if(c--,g--,0>g||le[c]!==be[g]){var ze=`
`+le[c].replace(" at new "," at ");return r.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",r.displayName)),ze}while(1<=c&&0<=g);break}}}finally{Eh=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Yo(o):""}function AC(r){switch(r.tag){case 26:case 27:case 5:return Yo(r.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 15:return Th(r.type,!1);case 11:return Th(r.type.render,!1);case 1:return Th(r.type,!0);case 31:return Yo("Activity");default:return""}}function Im(r){try{var i="";do i+=AC(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Yn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Wm(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zC(r){var i=Wm(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),c=""+r[i];if(!r.hasOwnProperty(i)&&typeof o!="undefined"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,b=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(D){c=""+D,b.call(this,D)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(D){c=""+D},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function od(r){r._valueTracker||(r._valueTracker=zC(r))}function $m(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return r&&(c=Wm(r)?r.checked?"true":"false":r.value),r=c,r!==o?(i.setValue(r),!0):!1}function sd(r){if(r=r||(typeof document!="undefined"?document:void 0),typeof r=="undefined")return null;try{return r.activeElement||r.body}catch(i){return r.body}}var RC=/[\n"\\]/g;function Qn(r){return r.replace(RC,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Mh(r,i,o,c,g,b,D,K){r.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.type=D:r.removeAttribute("type"),i!=null?D==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Yn(i)):r.value!==""+Yn(i)&&(r.value=""+Yn(i)):D!=="submit"&&D!=="reset"||r.removeAttribute("value"),i!=null?Dh(r,D,Yn(i)):o!=null?Dh(r,D,Yn(o)):c!=null&&r.removeAttribute("value"),g==null&&b!=null&&(r.defaultChecked=!!b),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?r.name=""+Yn(K):r.removeAttribute("name")}function Om(r,i,o,c,g,b,D,K){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),i!=null||o!=null){if(!(b!=="submit"&&b!=="reset"||i!=null))return;o=o!=null?""+Yn(o):"",i=i!=null?""+Yn(i):o,K||i===r.value||(r.value=i),r.defaultValue=i}c=c!=null?c:g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=K?r.checked:!!c,r.defaultChecked=!!c,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.name=D)}function Dh(r,i,o){i==="number"&&sd(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Qo(r,i,o,c){if(r=r.options,i){i={};for(var g=0;g<o.length;g++)i["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=i.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&c&&(r[o].defaultSelected=!0)}else{for(o=""+Yn(o),i=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,c&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function Lm(r,i,o){if(i!=null&&(i=""+Yn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Yn(o):""}function Bm(r,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(l(92));if(Q(c)){if(1<c.length)throw Error(l(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Yn(i),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c)}function Go(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var EC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pm(r,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":c?r.setProperty(i,o):typeof o!="number"||o===0||EC.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function jm(r,i,o){if(i!=null&&typeof i!="object")throw Error(l(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var g in i)c=i[g],i.hasOwnProperty(g)&&o[g]!==c&&Pm(r,g,c)}else for(var b in i)i.hasOwnProperty(b)&&Pm(r,b,i[b])}function Ih(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),MC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ld(r){return MC.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Wh=null;function $h(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xo=null,Ko=null;function Nm(r){var i=In(r);if(i&&(r=i.stateNode)){var o=r[Or]||null;e:switch(r=i.stateNode,i.type){case"input":if(Mh(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Qn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==r&&c.form===r.form){var g=c[Or]||null;if(!g)throw Error(l(90));Mh(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===r.form&&$m(c)}break e;case"textarea":Lm(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Qo(r,!!o.multiple,i,!1)}}}var Oh=!1;function Fm(r,i,o){if(Oh)return r(i,o);Oh=!0;try{var c=r(i);return c}finally{if(Oh=!1,(Xo!==null||Ko!==null)&&(Yd(),Xo&&(i=Xo,r=Ko,Ko=Xo=null,Nm(i),r)))for(i=0;i<r.length;i++)Nm(r[i])}}function dl(r,i){var o=r.stateNode;if(o===null)return null;var c=o[Or]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(l(231,i,typeof o));return o}var Qi=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Lh=!1;if(Qi)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch(r){Lh=!1}var wa=null,Bh=null,cd=null;function Hm(){if(cd)return cd;var r,i=Bh,o=i.length,c,g="value"in wa?wa.value:wa.textContent,b=g.length;for(r=0;r<o&&i[r]===g[r];r++);var D=o-r;for(c=1;c<=D&&i[o-c]===g[b-c];c++);return cd=g.slice(r,1<c?1-c:void 0)}function dd(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ud(){return!0}function Vm(){return!1}function wn(r){function i(o,c,g,b,D){this._reactName=o,this._targetInst=g,this.type=c,this.nativeEvent=b,this.target=D,this.currentTarget=null;for(var K in r)r.hasOwnProperty(K)&&(o=r[K],this[K]=o?o(b):b[K]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ud:Vm,this.isPropagationStopped=Vm,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ud)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ud)},persist:function(){},isPersistent:ud}),i}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=wn(to),hl=v({},to,{view:0,detail:0}),DC=wn(hl),Ph,jh,fl,fd=v({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fl&&(fl&&r.type==="mousemove"?(Ph=r.screenX-fl.screenX,jh=r.screenY-fl.screenY):jh=Ph=0,fl=r),Ph)},movementY:function(r){return"movementY"in r?r.movementY:jh}}),Um=wn(fd),IC=v({},fd,{dataTransfer:0}),WC=wn(IC),$C=v({},hl,{relatedTarget:0}),Nh=wn($C),OC=v({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),LC=wn(OC),BC=v({},to,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),PC=wn(BC),jC=v({},to,{data:0}),qm=wn(jC),NC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VC(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=HC[r])?!!i[r]:!1}function Fh(){return VC}var UC=v({},hl,{key:function(r){if(r.key){var i=NC[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=dd(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?FC[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fh,charCode:function(r){return r.type==="keypress"?dd(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dd(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),qC=wn(UC),YC=v({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ym=wn(YC),QC=v({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fh}),GC=wn(QC),XC=v({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),KC=wn(XC),ZC=v({},fd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),JC=wn(ZC),e3=v({},to,{newState:0,oldState:0}),t3=wn(e3),r3=[9,13,27,32],Hh=Qi&&"CompositionEvent"in window,pl=null;Qi&&"documentMode"in document&&(pl=document.documentMode);var n3=Qi&&"TextEvent"in window&&!pl,Qm=Qi&&(!Hh||pl&&8<pl&&11>=pl),Gm=" ",Xm=!1;function Km(r,i){switch(r){case"keyup":return r3.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zo=!1;function i3(r,i){switch(r){case"compositionend":return Zm(i);case"keypress":return i.which!==32?null:(Xm=!0,Gm);case"textInput":return r=i.data,r===Gm&&Xm?null:r;default:return null}}function a3(r,i){if(Zo)return r==="compositionend"||!Hh&&Km(r,i)?(r=Hm(),cd=Bh=wa=null,Zo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Qm&&i.locale!=="ko"?null:i.data;default:return null}}var o3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!o3[r.type]:i==="textarea"}function ex(r,i,o,c){Xo?Ko?Ko.push(c):Ko=[c]:Xo=c,i=Jd(i,"onChange"),0<i.length&&(o=new hd("onChange","change",null,o,c),r.push({event:o,listeners:i}))}var gl=null,ml=null;function s3(r){W1(r,0)}function pd(r){var i=mi(r);if($m(i))return r}function tx(r,i){if(r==="change")return i}var rx=!1;if(Qi){var Vh;if(Qi){var Uh="oninput"in document;if(!Uh){var nx=document.createElement("div");nx.setAttribute("oninput","return;"),Uh=typeof nx.oninput=="function"}Vh=Uh}else Vh=!1;rx=Vh&&(!document.documentMode||9<document.documentMode)}function ix(){gl&&(gl.detachEvent("onpropertychange",ax),ml=gl=null)}function ax(r){if(r.propertyName==="value"&&pd(ml)){var i=[];ex(i,ml,r,$h(r)),Fm(s3,i)}}function l3(r,i,o){r==="focusin"?(ix(),gl=i,ml=o,gl.attachEvent("onpropertychange",ax)):r==="focusout"&&ix()}function c3(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pd(ml)}function d3(r,i){if(r==="click")return pd(i)}function u3(r,i){if(r==="input"||r==="change")return pd(i)}function h3(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Wn=typeof Object.is=="function"?Object.is:h3;function xl(r,i){if(Wn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var g=o[c];if(!fr.call(i,g)||!Wn(r[g],i[g]))return!1}return!0}function ox(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function sx(r,i){var o=ox(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=i&&c>=i)return{node:o,offset:i-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ox(o)}}function lx(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?lx(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function cx(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=sd(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch(c){o=!1}if(o)r=i.contentWindow;else break;i=sd(r.document)}return i}function qh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var f3=Qi&&"documentMode"in document&&11>=document.documentMode,Jo=null,Yh=null,bl=null,Qh=!1;function dx(r,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Qh||Jo==null||Jo!==sd(c)||(c=Jo,"selectionStart"in c&&qh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bl&&xl(bl,c)||(bl=c,c=Jd(Yh,"onSelect"),0<c.length&&(i=new hd("onSelect","select",null,i,o),r.push({event:i,listeners:c}),i.target=Jo)))}function ro(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var es={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionrun:ro("Transition","TransitionRun"),transitionstart:ro("Transition","TransitionStart"),transitioncancel:ro("Transition","TransitionCancel"),transitionend:ro("Transition","TransitionEnd")},Gh={},ux={};Qi&&(ux=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function no(r){if(Gh[r])return Gh[r];if(!es[r])return r;var i=es[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in ux)return Gh[r]=i[o];return r}var hx=no("animationend"),fx=no("animationiteration"),px=no("animationstart"),p3=no("transitionrun"),g3=no("transitionstart"),m3=no("transitioncancel"),gx=no("transitionend"),mx=new Map,Xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xh.push("scrollEnd");function xi(r,i){mx.set(r,i),Ii(i,[r])}var xx=new WeakMap;function Gn(r,i){if(typeof r=="object"&&r!==null){var o=xx.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Im(i)},xx.set(r,i),i)}return{value:r,source:i,stack:Im(i)}}var Xn=[],ts=0,Kh=0;function gd(){for(var r=ts,i=Kh=ts=0;i<r;){var o=Xn[i];Xn[i++]=null;var c=Xn[i];Xn[i++]=null;var g=Xn[i];Xn[i++]=null;var b=Xn[i];if(Xn[i++]=null,c!==null&&g!==null){var D=c.pending;D===null?g.next=g:(g.next=D.next,D.next=g),c.pending=g}b!==0&&bx(o,g,b)}}function md(r,i,o,c){Xn[ts++]=r,Xn[ts++]=i,Xn[ts++]=o,Xn[ts++]=c,Kh|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Zh(r,i,o,c){return md(r,i,o,c),xd(r)}function rs(r,i){return md(r,null,null,i),xd(r)}function bx(r,i,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var g=!1,b=r.return;b!==null;)b.childLanes|=o,c=b.alternate,c!==null&&(c.childLanes|=o),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(g=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,g&&i!==null&&(g=31-Se(o),r=b.hiddenUpdates,c=r[g],c===null?r[g]=[i]:c.push(i),i.lane=o|536870912),b):null}function xd(r){if(50<Hl)throw Hl=0,ap=null,Error(l(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ns={};function x3(r,i,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(r,i,o,c){return new x3(r,i,o,c)}function Jh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gi(r,i){var o=r.alternate;return o===null?(o=$n(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function yx(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function bd(r,i,o,c,g,b){var D=0;if(c=r,typeof r=="function")Jh(r)&&(D=1);else if(typeof r=="string")D=yk(r,o,fe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=$n(31,o,i,g),r.elementType=V,r.lanes=b,r;case E:return io(o.children,g,b,i);case R:D=8,g|=24;break;case W:return r=$n(12,o,i,g|2),r.elementType=W,r.lanes=b,r;case J:return r=$n(13,o,i,g),r.elementType=J,r.lanes=b,r;case H:return r=$n(19,o,i,g),r.elementType=H,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case T:case N:D=10;break e;case z:D=9;break e;case G:D=11;break e;case U:D=14;break e;case A:D=16,c=null;break e}D=29,o=Error(l(130,r===null?"null":typeof r,"")),c=null}return i=$n(D,o,i,g),i.elementType=r,i.type=c,i.lanes=b,i}function io(r,i,o,c){return r=$n(7,r,c,i),r.lanes=o,r}function ef(r,i,o){return r=$n(6,r,null,i),r.lanes=o,r}function tf(r,i,o){return i=$n(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var is=[],as=0,yd=null,vd=0,Kn=[],Zn=0,ao=null,Xi=1,Ki="";function oo(r,i){is[as++]=vd,is[as++]=yd,yd=r,vd=i}function vx(r,i,o){Kn[Zn++]=Xi,Kn[Zn++]=Ki,Kn[Zn++]=ao,ao=r;var c=Xi;r=Ki;var g=32-Se(c)-1;c&=~(1<<g),o+=1;var b=32-Se(i)+g;if(30<b){var D=g-g%5;b=(c&(1<<D)-1).toString(32),c>>=D,g-=D,Xi=1<<32-Se(i)+g|o<<g|c,Ki=b+r}else Xi=1<<b|o<<g|c,Ki=r}function rf(r){r.return!==null&&(oo(r,1),vx(r,1,0))}function nf(r){for(;r===yd;)yd=is[--as],is[as]=null,vd=is[--as],is[as]=null;for(;r===ao;)ao=Kn[--Zn],Kn[Zn]=null,Ki=Kn[--Zn],Kn[Zn]=null,Xi=Kn[--Zn],Kn[Zn]=null}var gn=null,pr=null,Mt=!1,so=null,$i=!1,af=Error(l(519));function lo(r){var i=Error(l(418,""));throw wl(Gn(i,r)),af}function wx(r){var i=r.stateNode,o=r.type,c=r.memoizedProps;switch(i[sr]=r,i[Or]=c,o){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(o=0;o<Ul.length;o++)wt(Ul[o],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":wt("invalid",i),Om(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),od(i);break;case"select":wt("invalid",i);break;case"textarea":wt("invalid",i),Bm(i,c.value,c.defaultValue,c.children),od(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||B1(i.textContent,o)?(c.popover!=null&&(wt("beforetoggle",i),wt("toggle",i)),c.onScroll!=null&&wt("scroll",i),c.onScrollEnd!=null&&wt("scrollend",i),c.onClick!=null&&(i.onclick=eu),i=!0):i=!1,i||lo(r)}function Sx(r){for(gn=r.return;gn;)switch(gn.tag){case 5:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:gn=gn.return}}function yl(r){if(r!==gn)return!1;if(!Mt)return Sx(r),Mt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||wp(r.type,r.memoizedProps)),o=!o),o&&pr&&lo(r),Sx(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(l(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){pr=yi(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}pr=null}}else i===27?(i=pr,La(r.type)?(r=_p,_p=null,pr=r):pr=i):pr=gn?yi(r.stateNode.nextSibling):null;return!0}function vl(){pr=gn=null,Mt=!1}function Cx(){var r=so;return r!==null&&(kn===null?kn=r:kn.push.apply(kn,r),so=null),r}function wl(r){so===null?so=[r]:so.push(r)}var of=j(null),co=null,Zi=null;function Sa(r,i,o){de(of,i._currentValue),i._currentValue=o}function Ji(r){r._currentValue=of.current,re(of)}function sf(r,i,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),r===o)break;r=r.return}}function lf(r,i,o,c){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var b=g.dependencies;if(b!==null){var D=g.child;b=b.firstContext;e:for(;b!==null;){var K=b;b=g;for(var le=0;le<i.length;le++)if(K.context===i[le]){b.lanes|=o,K=b.alternate,K!==null&&(K.lanes|=o),sf(b.return,o,r),c||(D=null);break e}b=K.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(l(341));D.lanes|=o,b=D.alternate,b!==null&&(b.lanes|=o),sf(D,o,r),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===r){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function Sl(r,i,o,c){r=null;for(var g=i,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(l(387));if(D=D.memoizedProps,D!==null){var K=g.type;Wn(g.pendingProps.value,D.value)||(r!==null?r.push(K):r=[K])}}else if(g===ge.current){if(D=g.alternate,D===null)throw Error(l(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Kl):r=[Kl])}g=g.return}r!==null&&lf(i,r,o,c),i.flags|=262144}function wd(r){for(r=r.firstContext;r!==null;){if(!Wn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function uo(r){co=r,Zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function dn(r){return kx(co,r)}function Sd(r,i){return co===null&&uo(r),kx(r,i)}function kx(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Zi===null){if(r===null)throw Error(l(308));Zi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Zi=Zi.next=i;return o}var b3=typeof AbortController!="undefined"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},y3=e.unstable_scheduleCallback,v3=e.unstable_NormalPriority,Lr={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new b3,data:new Map,refCount:0}}function Cl(r){r.refCount--,r.refCount===0&&y3(v3,function(){r.controller.abort()})}var kl=null,df=0,os=0,ss=null;function w3(r,i){if(kl===null){var o=kl=[];df=0,os=hp(),ss={status:"pending",value:void 0,then:function(c){o.push(c)}}}return df++,i.then(_x,_x),i}function _x(){if(--df===0&&kl!==null){ss!==null&&(ss.status="fulfilled");var r=kl;kl=null,os=0,ss=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function S3(r,i){var o=[],c={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){c.status="fulfilled",c.value=i;for(var g=0;g<o.length;g++)(0,o[g])(i)},function(g){for(c.status="rejected",c.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),c}var Ax=M.S;M.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&w3(r,i),Ax!==null&&Ax(r,i)};var ho=j(null);function uf(){var r=ho.current;return r!==null?r:Xt.pooledCache}function Cd(r,i){i===null?de(ho,ho.current):de(ho,i.pool)}function zx(){var r=uf();return r===null?null:{parent:Lr._currentValue,pool:r}}var _l=Error(l(460)),Rx=Error(l(474)),kd=Error(l(542)),hf={then:function(){}};function Ex(r){return r=r.status,r==="fulfilled"||r==="rejected"}function _d(){}function Tx(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(_d,_d),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Dx(r),r;default:if(typeof i.status=="string")i.then(_d,_d);else{if(r=Xt,r!==null&&100<r.shellSuspendCounter)throw Error(l(482));r=i,r.status="pending",r.then(function(c){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=c}},function(c){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Dx(r),r}throw Al=i,_l}}var Al=null;function Mx(){if(Al===null)throw Error(l(459));var r=Al;return Al=null,r}function Dx(r){if(r===_l||r===kd)throw Error(l(483))}var Ca=!1;function ff(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ka(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function _a(r,i,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Ot&2)!==0){var g=c.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),c.pending=i,i=xd(r),bx(r,null,o),i}return md(r,c,i,o),xd(r)}function zl(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=r.pendingLanes,o|=c,i.lanes=o,ct(r,o)}}function gf(r,i){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var g=null,b=null;if(o=o.firstBaseUpdate,o!==null){do{var D={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};b===null?g=b=D:b=b.next=D,o=o.next}while(o!==null);b===null?g=b=i:b=b.next=i}else g=b=i;o={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var mf=!1;function Rl(){if(mf){var r=ss;if(r!==null)throw r}}function El(r,i,o,c){mf=!1;var g=r.updateQueue;Ca=!1;var b=g.firstBaseUpdate,D=g.lastBaseUpdate,K=g.shared.pending;if(K!==null){g.shared.pending=null;var le=K,be=le.next;le.next=null,D===null?b=be:D.next=be,D=le;var ze=r.alternate;ze!==null&&(ze=ze.updateQueue,K=ze.lastBaseUpdate,K!==D&&(K===null?ze.firstBaseUpdate=be:K.next=be,ze.lastBaseUpdate=le))}if(b!==null){var Ee=g.baseState;D=0,ze=be=le=null,K=b;do{var ve=K.lane&-536870913,we=ve!==K.lane;if(we?(Ct&ve)===ve:(c&ve)===ve){ve!==0&&ve===os&&(mf=!0),ze!==null&&(ze=ze.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var it=r,et=K;ve=i;var Ft=o;switch(et.tag){case 1:if(it=et.payload,typeof it=="function"){Ee=it.call(Ft,Ee,ve);break e}Ee=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=et.payload,ve=typeof it=="function"?it.call(Ft,Ee,ve):it,ve==null)break e;Ee=v({},Ee,ve);break e;case 2:Ca=!0}}ve=K.callback,ve!==null&&(r.flags|=64,we&&(r.flags|=8192),we=g.callbacks,we===null?g.callbacks=[ve]:we.push(ve))}else we={lane:ve,tag:K.tag,payload:K.payload,callback:K.callback,next:null},ze===null?(be=ze=we,le=Ee):ze=ze.next=we,D|=ve;if(K=K.next,K===null){if(K=g.shared.pending,K===null)break;we=K,K=we.next,we.next=null,g.lastBaseUpdate=we,g.shared.pending=null}}while(!0);ze===null&&(le=Ee),g.baseState=le,g.firstBaseUpdate=be,g.lastBaseUpdate=ze,b===null&&(g.shared.lanes=0),Ia|=D,r.lanes=D,r.memoizedState=Ee}}function Ix(r,i){if(typeof r!="function")throw Error(l(191,r));r.call(i)}function Wx(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Ix(o[r],i)}var ls=j(null),Ad=j(0);function $x(r,i){r=oa,de(Ad,r),de(ls,i),oa=r|i.baseLanes}function xf(){de(Ad,oa),de(ls,ls.current)}function bf(){oa=Ad.current,re(ls),re(Ad)}var Aa=0,gt=null,jt=null,Er=null,zd=!1,cs=!1,fo=!1,Rd=0,Tl=0,ds=null,C3=0;function kr(){throw Error(l(321))}function yf(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Wn(r[o],i[o]))return!1;return!0}function vf(r,i,o,c,g,b){return Aa=b,gt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=r===null||r.memoizedState===null?bb:yb,fo=!1,b=o(c,g),fo=!1,cs&&(b=Lx(i,o,c,g)),Ox(r),b}function Ox(r){M.H=Wd;var i=jt!==null&&jt.next!==null;if(Aa=0,Er=jt=gt=null,zd=!1,Tl=0,ds=null,i)throw Error(l(300));r===null||Vr||(r=r.dependencies,r!==null&&wd(r)&&(Vr=!0))}function Lx(r,i,o,c){gt=r;var g=0;do{if(cs&&(ds=null),Tl=0,cs=!1,25<=g)throw Error(l(301));if(g+=1,Er=jt=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}M.H=T3,b=i(o,c)}while(cs);return b}function k3(){var r=M.H,i=r.useState()[0];return i=typeof i.then=="function"?Ml(i):i,r=r.useState()[0],(jt!==null?jt.memoizedState:null)!==r&&(gt.flags|=1024),i}function wf(){var r=Rd!==0;return Rd=0,r}function Sf(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Cf(r){if(zd){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zd=!1}Aa=0,Er=jt=gt=null,cs=!1,Tl=Rd=0,ds=null}function Sn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?gt.memoizedState=Er=r:Er=Er.next=r,Er}function Tr(){if(jt===null){var r=gt.alternate;r=r!==null?r.memoizedState:null}else r=jt.next;var i=Er===null?gt.memoizedState:Er.next;if(i!==null)Er=i,jt=r;else{if(r===null)throw gt.alternate===null?Error(l(467)):Error(l(310));jt=r,r={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Er===null?gt.memoizedState=Er=r:Er=Er.next=r}return Er}function kf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(r){var i=Tl;return Tl+=1,ds===null&&(ds=[]),r=Tx(ds,r,i),i=gt,(Er===null?i.memoizedState:Er.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?bb:yb),r}function Ed(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ml(r);if(r.$$typeof===N)return dn(r)}throw Error(l(438,String(r)))}function _f(r){var i=null,o=gt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=gt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=kf(),gt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),c=0;c<r;c++)o[c]=Y;return i.index++,o}function ea(r,i){return typeof i=="function"?i(r):i}function Td(r){var i=Tr();return Af(i,jt,r)}function Af(r,i,o){var c=r.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=o;var g=r.baseQueue,b=c.pending;if(b!==null){if(g!==null){var D=g.next;g.next=b.next,b.next=D}i.baseQueue=g=b,c.pending=null}if(b=r.baseState,g===null)r.memoizedState=b;else{i=g.next;var K=D=null,le=null,be=i,ze=!1;do{var Ee=be.lane&-536870913;if(Ee!==be.lane?(Ct&Ee)===Ee:(Aa&Ee)===Ee){var ve=be.revertLane;if(ve===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),Ee===os&&(ze=!0);else if((Aa&ve)===ve){be=be.next,ve===os&&(ze=!0);continue}else Ee={lane:0,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},le===null?(K=le=Ee,D=b):le=le.next=Ee,gt.lanes|=ve,Ia|=ve;Ee=be.action,fo&&o(b,Ee),b=be.hasEagerState?be.eagerState:o(b,Ee)}else ve={lane:Ee,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},le===null?(K=le=ve,D=b):le=le.next=ve,gt.lanes|=Ee,Ia|=Ee;be=be.next}while(be!==null&&be!==i);if(le===null?D=b:le.next=K,!Wn(b,r.memoizedState)&&(Vr=!0,ze&&(o=ss,o!==null)))throw o;r.memoizedState=b,r.baseState=D,r.baseQueue=le,c.lastRenderedState=b}return g===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function zf(r){var i=Tr(),o=i.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var c=o.dispatch,g=o.pending,b=i.memoizedState;if(g!==null){o.pending=null;var D=g=g.next;do b=r(b,D.action),D=D.next;while(D!==g);Wn(b,i.memoizedState)||(Vr=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),o.lastRenderedState=b}return[b,c]}function Bx(r,i,o){var c=gt,g=Tr(),b=Mt;if(b){if(o===void 0)throw Error(l(407));o=o()}else o=i();var D=!Wn((jt||g).memoizedState,o);D&&(g.memoizedState=o,Vr=!0),g=g.queue;var K=Nx.bind(null,c,g,r);if(Dl(2048,8,K,[r]),g.getSnapshot!==i||D||Er!==null&&Er.memoizedState.tag&1){if(c.flags|=2048,us(9,Md(),jx.bind(null,c,g,o,i),null),Xt===null)throw Error(l(349));b||(Aa&124)!==0||Px(c,i,o)}return o}function Px(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=gt.updateQueue,i===null?(i=kf(),gt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function jx(r,i,o,c){i.value=o,i.getSnapshot=c,Fx(i)&&Hx(r)}function Nx(r,i,o){return o(function(){Fx(i)&&Hx(r)})}function Fx(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Wn(r,o)}catch(c){return!0}}function Hx(r){var i=rs(r,2);i!==null&&jn(i,r,2)}function Rf(r){var i=Sn();if(typeof r=="function"){var o=r;if(r=o(),fo){Ve(!0);try{o()}finally{Ve(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:r},i}function Vx(r,i,o,c){return r.baseState=o,Af(r,jt,typeof c=="function"?c:ea)}function _3(r,i,o,c,g){if(Id(r))throw Error(l(485));if(r=i.action,r!==null){var b={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){b.listeners.push(D)}};M.T!==null?o(!0):b.isTransition=!1,c(b),o=i.pending,o===null?(b.next=i.pending=b,Ux(i,b)):(b.next=o.next,i.pending=o.next=b)}}function Ux(r,i){var o=i.action,c=i.payload,g=r.state;if(i.isTransition){var b=M.T,D={};M.T=D;try{var K=o(g,c),le=M.S;le!==null&&le(D,K),qx(r,i,K)}catch(be){Ef(r,i,be)}finally{M.T=b}}else try{b=o(g,c),qx(r,i,b)}catch(be){Ef(r,i,be)}}function qx(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Yx(r,i,c)},function(c){return Ef(r,i,c)}):Yx(r,i,o)}function Yx(r,i,o){i.status="fulfilled",i.value=o,Qx(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Ux(r,o)))}function Ef(r,i,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,Qx(i),i=i.next;while(i!==c)}r.action=null}function Qx(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Gx(r,i){return i}function Xx(r,i){if(Mt){var o=Xt.formState;if(o!==null){e:{var c=gt;if(Mt){if(pr){t:{for(var g=pr,b=$i;g.nodeType!==8;){if(!b){g=null;break t}if(g=yi(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){pr=yi(g.nextSibling),c=g.data==="F!";break e}}lo(c)}c=!1}c&&(i=o[0])}}return o=Sn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gx,lastRenderedState:i},o.queue=c,o=gb.bind(null,gt,c),c.dispatch=o,c=Rf(!1),b=Wf.bind(null,gt,!1,c.queue),c=Sn(),g={state:i,dispatch:null,action:r,pending:null},c.queue=g,o=_3.bind(null,gt,g,b,o),g.dispatch=o,c.memoizedState=r,[i,o,!1]}function Kx(r){var i=Tr();return Zx(i,jt,r)}function Zx(r,i,o){if(i=Af(r,i,Gx)[0],r=Td(ea)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Ml(i)}catch(D){throw D===_l?kd:D}else c=i;i=Tr();var g=i.queue,b=g.dispatch;return o!==i.memoizedState&&(gt.flags|=2048,us(9,Md(),A3.bind(null,g,o),null)),[c,b,r]}function A3(r,i){r.action=i}function Jx(r){var i=Tr(),o=jt;if(o!==null)return Zx(i,o,r);Tr(),i=i.memoizedState,o=Tr();var c=o.queue.dispatch;return o.memoizedState=r,[i,c,!1]}function us(r,i,o,c){return r={tag:r,create:o,deps:c,inst:i,next:null},i=gt.updateQueue,i===null&&(i=kf(),gt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,i.lastEffect=r),r}function Md(){return{destroy:void 0,resource:void 0}}function eb(){return Tr().memoizedState}function Dd(r,i,o,c){var g=Sn();c=c===void 0?null:c,gt.flags|=r,g.memoizedState=us(1|i,Md(),o,c)}function Dl(r,i,o,c){var g=Tr();c=c===void 0?null:c;var b=g.memoizedState.inst;jt!==null&&c!==null&&yf(c,jt.memoizedState.deps)?g.memoizedState=us(i,b,o,c):(gt.flags|=r,g.memoizedState=us(1|i,b,o,c))}function tb(r,i){Dd(8390656,8,r,i)}function rb(r,i){Dl(2048,8,r,i)}function nb(r,i){return Dl(4,2,r,i)}function ib(r,i){return Dl(4,4,r,i)}function ab(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function ob(r,i,o){o=o!=null?o.concat([r]):null,Dl(4,4,ab.bind(null,i,r),o)}function Tf(){}function sb(r,i){var o=Tr();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&yf(i,c[1])?c[0]:(o.memoizedState=[r,i],r)}function lb(r,i){var o=Tr();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&yf(i,c[1]))return c[0];if(c=r(),fo){Ve(!0);try{r()}finally{Ve(!1)}}return o.memoizedState=[c,i],c}function Mf(r,i,o){return o===void 0||(Aa&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=u1(),gt.lanes|=r,Ia|=r,o)}function cb(r,i,o,c){return Wn(o,i)?o:ls.current!==null?(r=Mf(r,o,c),Wn(r,i)||(Vr=!0),r):(Aa&42)===0?(Vr=!0,r.memoizedState=o):(r=u1(),gt.lanes|=r,Ia|=r,i)}function db(r,i,o,c,g){var b=O.p;O.p=b!==0&&8>b?b:8;var D=M.T,K={};M.T=K,Wf(r,!1,i,o);try{var le=g(),be=M.S;if(be!==null&&be(K,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var ze=S3(le,c);Il(r,i,ze,Pn(r))}else Il(r,i,c,Pn(r))}catch(Ee){Il(r,i,{then:function(){},status:"rejected",reason:Ee},Pn())}finally{O.p=b,M.T=D}}function z3(){}function Df(r,i,o,c){if(r.tag!==5)throw Error(l(476));var g=ub(r).queue;db(r,g,i,C,o===null?z3:function(){return hb(r),o(c)})}function ub(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:C},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function hb(r){var i=ub(r).next.queue;Il(r,i,{},Pn())}function If(){return dn(Kl)}function fb(){return Tr().memoizedState}function pb(){return Tr().memoizedState}function R3(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Pn();r=ka(o);var c=_a(i,r,o);c!==null&&(jn(c,i,o),zl(c,i,o)),i={cache:cf()},r.payload=i;return}i=i.return}}function E3(r,i,o){var c=Pn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Id(r)?mb(i,o):(o=Zh(r,i,o,c),o!==null&&(jn(o,r,c),xb(o,i,c)))}function gb(r,i,o){var c=Pn();Il(r,i,o,c)}function Il(r,i,o,c){var g={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Id(r))mb(i,g);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var D=i.lastRenderedState,K=b(D,o);if(g.hasEagerState=!0,g.eagerState=K,Wn(K,D))return md(r,i,g,0),Xt===null&&gd(),!1}catch(le){}finally{}if(o=Zh(r,i,g,c),o!==null)return jn(o,r,c),xb(o,i,c),!0}return!1}function Wf(r,i,o,c){if(c={lane:2,revertLane:hp(),action:c,hasEagerState:!1,eagerState:null,next:null},Id(r)){if(i)throw Error(l(479))}else i=Zh(r,o,c,2),i!==null&&jn(i,r,2)}function Id(r){var i=r.alternate;return r===gt||i!==null&&i===gt}function mb(r,i){cs=zd=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function xb(r,i,o){if((o&4194048)!==0){var c=i.lanes;c&=r.pendingLanes,o|=c,i.lanes=o,ct(r,o)}}var Wd={readContext:dn,use:Ed,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useInsertionEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useSyncExternalStore:kr,useId:kr,useHostTransitionStatus:kr,useFormState:kr,useActionState:kr,useOptimistic:kr,useMemoCache:kr,useCacheRefresh:kr},bb={readContext:dn,use:Ed,useCallback:function(r,i){return Sn().memoizedState=[r,i===void 0?null:i],r},useContext:dn,useEffect:tb,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Dd(4194308,4,ab.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Dd(4194308,4,r,i)},useInsertionEffect:function(r,i){Dd(4,2,r,i)},useMemo:function(r,i){var o=Sn();i=i===void 0?null:i;var c=r();if(fo){Ve(!0);try{r()}finally{Ve(!1)}}return o.memoizedState=[c,i],c},useReducer:function(r,i,o){var c=Sn();if(o!==void 0){var g=o(i);if(fo){Ve(!0);try{o(i)}finally{Ve(!1)}}}else g=i;return c.memoizedState=c.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},c.queue=r,r=r.dispatch=E3.bind(null,gt,r),[c.memoizedState,r]},useRef:function(r){var i=Sn();return r={current:r},i.memoizedState=r},useState:function(r){r=Rf(r);var i=r.queue,o=gb.bind(null,gt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Tf,useDeferredValue:function(r,i){var o=Sn();return Mf(o,r,i)},useTransition:function(){var r=Rf(!1);return r=db.bind(null,gt,r.queue,!0,!1),Sn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var c=gt,g=Sn();if(Mt){if(o===void 0)throw Error(l(407));o=o()}else{if(o=i(),Xt===null)throw Error(l(349));(Ct&124)!==0||Px(c,i,o)}g.memoizedState=o;var b={value:o,getSnapshot:i};return g.queue=b,tb(Nx.bind(null,c,b,r),[r]),c.flags|=2048,us(9,Md(),jx.bind(null,c,b,o,i),null),o},useId:function(){var r=Sn(),i=Xt.identifierPrefix;if(Mt){var o=Ki,c=Xi;o=(c&~(1<<32-Se(c)-1)).toString(32)+o,i="«"+i+"R"+o,o=Rd++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=C3++,i="«"+i+"r"+o.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:If,useFormState:Xx,useActionState:Xx,useOptimistic:function(r){var i=Sn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Wf.bind(null,gt,!0,o),o.dispatch=i,[r,i]},useMemoCache:_f,useCacheRefresh:function(){return Sn().memoizedState=R3.bind(null,gt)}},yb={readContext:dn,use:Ed,useCallback:sb,useContext:dn,useEffect:rb,useImperativeHandle:ob,useInsertionEffect:nb,useLayoutEffect:ib,useMemo:lb,useReducer:Td,useRef:eb,useState:function(){return Td(ea)},useDebugValue:Tf,useDeferredValue:function(r,i){var o=Tr();return cb(o,jt.memoizedState,r,i)},useTransition:function(){var r=Td(ea)[0],i=Tr().memoizedState;return[typeof r=="boolean"?r:Ml(r),i]},useSyncExternalStore:Bx,useId:fb,useHostTransitionStatus:If,useFormState:Kx,useActionState:Kx,useOptimistic:function(r,i){var o=Tr();return Vx(o,jt,r,i)},useMemoCache:_f,useCacheRefresh:pb},T3={readContext:dn,use:Ed,useCallback:sb,useContext:dn,useEffect:rb,useImperativeHandle:ob,useInsertionEffect:nb,useLayoutEffect:ib,useMemo:lb,useReducer:zf,useRef:eb,useState:function(){return zf(ea)},useDebugValue:Tf,useDeferredValue:function(r,i){var o=Tr();return jt===null?Mf(o,r,i):cb(o,jt.memoizedState,r,i)},useTransition:function(){var r=zf(ea)[0],i=Tr().memoizedState;return[typeof r=="boolean"?r:Ml(r),i]},useSyncExternalStore:Bx,useId:fb,useHostTransitionStatus:If,useFormState:Jx,useActionState:Jx,useOptimistic:function(r,i){var o=Tr();return jt!==null?Vx(o,jt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:_f,useCacheRefresh:pb},hs=null,Wl=0;function $d(r){var i=Wl;return Wl+=1,hs===null&&(hs=[]),Tx(hs,r,i)}function $l(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Od(r,i){throw i.$$typeof===S?Error(l(525)):(r=Object.prototype.toString.call(i),Error(l(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function vb(r){var i=r._init;return i(r._payload)}function wb(r){function i(pe,ue){if(r){var me=pe.deletions;me===null?(pe.deletions=[ue],pe.flags|=16):me.push(ue)}}function o(pe,ue){if(!r)return null;for(;ue!==null;)i(pe,ue),ue=ue.sibling;return null}function c(pe){for(var ue=new Map;pe!==null;)pe.key!==null?ue.set(pe.key,pe):ue.set(pe.index,pe),pe=pe.sibling;return ue}function g(pe,ue){return pe=Gi(pe,ue),pe.index=0,pe.sibling=null,pe}function b(pe,ue,me){return pe.index=me,r?(me=pe.alternate,me!==null?(me=me.index,me<ue?(pe.flags|=67108866,ue):me):(pe.flags|=67108866,ue)):(pe.flags|=1048576,ue)}function D(pe){return r&&pe.alternate===null&&(pe.flags|=67108866),pe}function K(pe,ue,me,Re){return ue===null||ue.tag!==6?(ue=ef(me,pe.mode,Re),ue.return=pe,ue):(ue=g(ue,me),ue.return=pe,ue)}function le(pe,ue,me,Re){var qe=me.type;return qe===E?ze(pe,ue,me.props.children,Re,me.key):ue!==null&&(ue.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&vb(qe)===ue.type)?(ue=g(ue,me.props),$l(ue,me),ue.return=pe,ue):(ue=bd(me.type,me.key,me.props,null,pe.mode,Re),$l(ue,me),ue.return=pe,ue)}function be(pe,ue,me,Re){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==me.containerInfo||ue.stateNode.implementation!==me.implementation?(ue=tf(me,pe.mode,Re),ue.return=pe,ue):(ue=g(ue,me.children||[]),ue.return=pe,ue)}function ze(pe,ue,me,Re,qe){return ue===null||ue.tag!==7?(ue=io(me,pe.mode,Re,qe),ue.return=pe,ue):(ue=g(ue,me),ue.return=pe,ue)}function Ee(pe,ue,me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=ef(""+ue,pe.mode,me),ue.return=pe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case _:return me=bd(ue.type,ue.key,ue.props,null,pe.mode,me),$l(me,ue),me.return=pe,me;case k:return ue=tf(ue,pe.mode,me),ue.return=pe,ue;case A:var Re=ue._init;return ue=Re(ue._payload),Ee(pe,ue,me)}if(Q(ue)||I(ue))return ue=io(ue,pe.mode,me,null),ue.return=pe,ue;if(typeof ue.then=="function")return Ee(pe,$d(ue),me);if(ue.$$typeof===N)return Ee(pe,Sd(pe,ue),me);Od(pe,ue)}return null}function ve(pe,ue,me,Re){var qe=ue!==null?ue.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return qe!==null?null:K(pe,ue,""+me,Re);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _:return me.key===qe?le(pe,ue,me,Re):null;case k:return me.key===qe?be(pe,ue,me,Re):null;case A:return qe=me._init,me=qe(me._payload),ve(pe,ue,me,Re)}if(Q(me)||I(me))return qe!==null?null:ze(pe,ue,me,Re,null);if(typeof me.then=="function")return ve(pe,ue,$d(me),Re);if(me.$$typeof===N)return ve(pe,ue,Sd(pe,me),Re);Od(pe,me)}return null}function we(pe,ue,me,Re,qe){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return pe=pe.get(me)||null,K(ue,pe,""+Re,qe);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case _:return pe=pe.get(Re.key===null?me:Re.key)||null,le(ue,pe,Re,qe);case k:return pe=pe.get(Re.key===null?me:Re.key)||null,be(ue,pe,Re,qe);case A:var mt=Re._init;return Re=mt(Re._payload),we(pe,ue,me,Re,qe)}if(Q(Re)||I(Re))return pe=pe.get(me)||null,ze(ue,pe,Re,qe,null);if(typeof Re.then=="function")return we(pe,ue,me,$d(Re),qe);if(Re.$$typeof===N)return we(pe,ue,me,Sd(ue,Re),qe);Od(ue,Re)}return null}function it(pe,ue,me,Re){for(var qe=null,mt=null,Ge=ue,rt=ue=0,qr=null;Ge!==null&&rt<me.length;rt++){Ge.index>rt?(qr=Ge,Ge=null):qr=Ge.sibling;var zt=ve(pe,Ge,me[rt],Re);if(zt===null){Ge===null&&(Ge=qr);break}r&&Ge&&zt.alternate===null&&i(pe,Ge),ue=b(zt,ue,rt),mt===null?qe=zt:mt.sibling=zt,mt=zt,Ge=qr}if(rt===me.length)return o(pe,Ge),Mt&&oo(pe,rt),qe;if(Ge===null){for(;rt<me.length;rt++)Ge=Ee(pe,me[rt],Re),Ge!==null&&(ue=b(Ge,ue,rt),mt===null?qe=Ge:mt.sibling=Ge,mt=Ge);return Mt&&oo(pe,rt),qe}for(Ge=c(Ge);rt<me.length;rt++)qr=we(Ge,pe,rt,me[rt],Re),qr!==null&&(r&&qr.alternate!==null&&Ge.delete(qr.key===null?rt:qr.key),ue=b(qr,ue,rt),mt===null?qe=qr:mt.sibling=qr,mt=qr);return r&&Ge.forEach(function(Fa){return i(pe,Fa)}),Mt&&oo(pe,rt),qe}function et(pe,ue,me,Re){if(me==null)throw Error(l(151));for(var qe=null,mt=null,Ge=ue,rt=ue=0,qr=null,zt=me.next();Ge!==null&&!zt.done;rt++,zt=me.next()){Ge.index>rt?(qr=Ge,Ge=null):qr=Ge.sibling;var Fa=ve(pe,Ge,zt.value,Re);if(Fa===null){Ge===null&&(Ge=qr);break}r&&Ge&&Fa.alternate===null&&i(pe,Ge),ue=b(Fa,ue,rt),mt===null?qe=Fa:mt.sibling=Fa,mt=Fa,Ge=qr}if(zt.done)return o(pe,Ge),Mt&&oo(pe,rt),qe;if(Ge===null){for(;!zt.done;rt++,zt=me.next())zt=Ee(pe,zt.value,Re),zt!==null&&(ue=b(zt,ue,rt),mt===null?qe=zt:mt.sibling=zt,mt=zt);return Mt&&oo(pe,rt),qe}for(Ge=c(Ge);!zt.done;rt++,zt=me.next())zt=we(Ge,pe,rt,zt.value,Re),zt!==null&&(r&&zt.alternate!==null&&Ge.delete(zt.key===null?rt:zt.key),ue=b(zt,ue,rt),mt===null?qe=zt:mt.sibling=zt,mt=zt);return r&&Ge.forEach(function(Mk){return i(pe,Mk)}),Mt&&oo(pe,rt),qe}function Ft(pe,ue,me,Re){if(typeof me=="object"&&me!==null&&me.type===E&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case _:e:{for(var qe=me.key;ue!==null;){if(ue.key===qe){if(qe=me.type,qe===E){if(ue.tag===7){o(pe,ue.sibling),Re=g(ue,me.props.children),Re.return=pe,pe=Re;break e}}else if(ue.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&vb(qe)===ue.type){o(pe,ue.sibling),Re=g(ue,me.props),$l(Re,me),Re.return=pe,pe=Re;break e}o(pe,ue);break}else i(pe,ue);ue=ue.sibling}me.type===E?(Re=io(me.props.children,pe.mode,Re,me.key),Re.return=pe,pe=Re):(Re=bd(me.type,me.key,me.props,null,pe.mode,Re),$l(Re,me),Re.return=pe,pe=Re)}return D(pe);case k:e:{for(qe=me.key;ue!==null;){if(ue.key===qe)if(ue.tag===4&&ue.stateNode.containerInfo===me.containerInfo&&ue.stateNode.implementation===me.implementation){o(pe,ue.sibling),Re=g(ue,me.children||[]),Re.return=pe,pe=Re;break e}else{o(pe,ue);break}else i(pe,ue);ue=ue.sibling}Re=tf(me,pe.mode,Re),Re.return=pe,pe=Re}return D(pe);case A:return qe=me._init,me=qe(me._payload),Ft(pe,ue,me,Re)}if(Q(me))return it(pe,ue,me,Re);if(I(me)){if(qe=I(me),typeof qe!="function")throw Error(l(150));return me=qe.call(me),et(pe,ue,me,Re)}if(typeof me.then=="function")return Ft(pe,ue,$d(me),Re);if(me.$$typeof===N)return Ft(pe,ue,Sd(pe,me),Re);Od(pe,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ue!==null&&ue.tag===6?(o(pe,ue.sibling),Re=g(ue,me),Re.return=pe,pe=Re):(o(pe,ue),Re=ef(me,pe.mode,Re),Re.return=pe,pe=Re),D(pe)):o(pe,ue)}return function(pe,ue,me,Re){try{Wl=0;var qe=Ft(pe,ue,me,Re);return hs=null,qe}catch(Ge){if(Ge===_l||Ge===kd)throw Ge;var mt=$n(29,Ge,null,pe.mode);return mt.lanes=Re,mt.return=pe,mt}finally{}}}var fs=wb(!0),Sb=wb(!1),Jn=j(null),Oi=null;function za(r){var i=r.alternate;de(Br,Br.current&1),de(Jn,r),Oi===null&&(i===null||ls.current!==null||i.memoizedState!==null)&&(Oi=r)}function Cb(r){if(r.tag===22){if(de(Br,Br.current),de(Jn,r),Oi===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Oi=r)}}else Ra()}function Ra(){de(Br,Br.current),de(Jn,Jn.current)}function ta(r){re(Jn),Oi===r&&(Oi=null),re(Br)}var Br=j(0);function Ld(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||kp(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function $f(r,i,o,c){i=r.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Of={enqueueSetState:function(r,i,o){r=r._reactInternals;var c=Pn(),g=ka(c);g.payload=i,o!=null&&(g.callback=o),i=_a(r,g,c),i!==null&&(jn(i,r,c),zl(i,r,c))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var c=Pn(),g=ka(c);g.tag=1,g.payload=i,o!=null&&(g.callback=o),i=_a(r,g,c),i!==null&&(jn(i,r,c),zl(i,r,c))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Pn(),c=ka(o);c.tag=2,i!=null&&(c.callback=i),i=_a(r,c,o),i!==null&&(jn(i,r,o),zl(i,r,o))}};function kb(r,i,o,c,g,b,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,b,D):i.prototype&&i.prototype.isPureReactComponent?!xl(o,c)||!xl(g,b):!0}function _b(r,i,o,c){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==r&&Of.enqueueReplaceState(i,i.state,null)}function po(r,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(r=r.defaultProps){o===i&&(o=v({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Bd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Ab(r){Bd(r)}function zb(r){console.error(r)}function Rb(r){Bd(r)}function Pd(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Eb(r,i,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Lf(r,i,o){return o=ka(o),o.tag=3,o.payload={element:null},o.callback=function(){Pd(r,i)},o}function Tb(r){return r=ka(r),r.tag=3,r}function Mb(r,i,o,c){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var b=c.value;r.payload=function(){return g(b)},r.callback=function(){Eb(i,o,c)}}var D=o.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(r.callback=function(){Eb(i,o,c),typeof g!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var K=c.stack;this.componentDidCatch(c.value,{componentStack:K!==null?K:""})})}function M3(r,i,o,c,g){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Sl(i,o,g,!0),o=Jn.current,o!==null){switch(o.tag){case 13:return Oi===null?sp():o.alternate===null&&gr===0&&(gr=3),o.flags&=-257,o.flags|=65536,o.lanes=g,c===hf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),cp(r,c,g)),!1;case 22:return o.flags|=65536,c===hf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),cp(r,c,g)),!1}throw Error(l(435,o.tag))}return cp(r,c,g),sp(),!1}if(Mt)return i=Jn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,c!==af&&(r=Error(l(422),{cause:c}),wl(Gn(r,o)))):(c!==af&&(i=Error(l(423),{cause:c}),wl(Gn(i,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,c=Gn(c,o),g=Lf(r.stateNode,c,g),gf(r,g),gr!==4&&(gr=2)),!1;var b=Error(l(520),{cause:c});if(b=Gn(b,o),Fl===null?Fl=[b]:Fl.push(b),gr!==4&&(gr=2),i===null)return!0;c=Gn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=Lf(o.stateNode,c,r),gf(o,r),!1;case 1:if(i=o.type,b=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wa===null||!Wa.has(b))))return o.flags|=65536,g&=-g,o.lanes|=g,g=Tb(g),Mb(g,r,o,c),gf(o,g),!1}o=o.return}while(o!==null);return!1}var Db=Error(l(461)),Vr=!1;function Xr(r,i,o,c){i.child=r===null?Sb(i,null,o,c):fs(i,r.child,o,c)}function Ib(r,i,o,c,g){o=o.render;var b=i.ref;if("ref"in c){var D={};for(var K in c)K!=="ref"&&(D[K]=c[K])}else D=c;return uo(i),c=vf(r,i,o,D,b,g),K=wf(),r!==null&&!Vr?(Sf(r,i,g),ra(r,i,g)):(Mt&&K&&rf(i),i.flags|=1,Xr(r,i,c,g),i.child)}function Wb(r,i,o,c,g){if(r===null){var b=o.type;return typeof b=="function"&&!Jh(b)&&b.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=b,$b(r,i,b,c,g)):(r=bd(o.type,null,c,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(b=r.child,!Uf(r,g)){var D=b.memoizedProps;if(o=o.compare,o=o!==null?o:xl,o(D,c)&&r.ref===i.ref)return ra(r,i,g)}return i.flags|=1,r=Gi(b,c),r.ref=i.ref,r.return=i,i.child=r}function $b(r,i,o,c,g){if(r!==null){var b=r.memoizedProps;if(xl(b,c)&&r.ref===i.ref)if(Vr=!1,i.pendingProps=c=b,Uf(r,g))(r.flags&131072)!==0&&(Vr=!0);else return i.lanes=r.lanes,ra(r,i,g)}return Bf(r,i,o,c,g)}function Ob(r,i,o){var c=i.pendingProps,g=c.children,b=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=b!==null?b.baseLanes|o:o,r!==null){for(g=i.child=r.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;i.childLanes=b&~c}else i.childLanes=0,i.child=null;return Lb(r,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Cd(i,b!==null?b.cachePool:null),b!==null?$x(i,b):xf(),Cb(i);else return i.lanes=i.childLanes=536870912,Lb(r,i,b!==null?b.baseLanes|o:o,o)}else b!==null?(Cd(i,b.cachePool),$x(i,b),Ra(),i.memoizedState=null):(r!==null&&Cd(i,null),xf(),Ra());return Xr(r,i,g,o),i.child}function Lb(r,i,o,c){var g=uf();return g=g===null?null:{parent:Lr._currentValue,pool:g},i.memoizedState={baseLanes:o,cachePool:g},r!==null&&Cd(i,null),xf(),Cb(i),r!==null&&Sl(r,i,c,!0),null}function jd(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(l(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Bf(r,i,o,c,g){return uo(i),o=vf(r,i,o,c,void 0,g),c=wf(),r!==null&&!Vr?(Sf(r,i,g),ra(r,i,g)):(Mt&&c&&rf(i),i.flags|=1,Xr(r,i,o,g),i.child)}function Bb(r,i,o,c,g,b){return uo(i),i.updateQueue=null,o=Lx(i,c,o,g),Ox(r),c=wf(),r!==null&&!Vr?(Sf(r,i,b),ra(r,i,b)):(Mt&&c&&rf(i),i.flags|=1,Xr(r,i,o,b),i.child)}function Pb(r,i,o,c,g){if(uo(i),i.stateNode===null){var b=ns,D=o.contextType;typeof D=="object"&&D!==null&&(b=dn(D)),b=new o(c,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Of,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=c,b.state=i.memoizedState,b.refs={},ff(i),D=o.contextType,b.context=typeof D=="object"&&D!==null?dn(D):ns,b.state=i.memoizedState,D=o.getDerivedStateFromProps,typeof D=="function"&&($f(i,o,D,c),b.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(D=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),D!==b.state&&Of.enqueueReplaceState(b,b.state,null),El(i,c,b,g),Rl(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(r===null){b=i.stateNode;var K=i.memoizedProps,le=po(o,K);b.props=le;var be=b.context,ze=o.contextType;D=ns,typeof ze=="object"&&ze!==null&&(D=dn(ze));var Ee=o.getDerivedStateFromProps;ze=typeof Ee=="function"||typeof b.getSnapshotBeforeUpdate=="function",K=i.pendingProps!==K,ze||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(K||be!==D)&&_b(i,b,c,D),Ca=!1;var ve=i.memoizedState;b.state=ve,El(i,c,b,g),Rl(),be=i.memoizedState,K||ve!==be||Ca?(typeof Ee=="function"&&($f(i,o,Ee,c),be=i.memoizedState),(le=Ca||kb(i,o,le,c,ve,be,D))?(ze||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=be),b.props=c,b.state=be,b.context=D,c=le):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{b=i.stateNode,pf(r,i),D=i.memoizedProps,ze=po(o,D),b.props=ze,Ee=i.pendingProps,ve=b.context,be=o.contextType,le=ns,typeof be=="object"&&be!==null&&(le=dn(be)),K=o.getDerivedStateFromProps,(be=typeof K=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D!==Ee||ve!==le)&&_b(i,b,c,le),Ca=!1,ve=i.memoizedState,b.state=ve,El(i,c,b,g),Rl();var we=i.memoizedState;D!==Ee||ve!==we||Ca||r!==null&&r.dependencies!==null&&wd(r.dependencies)?(typeof K=="function"&&($f(i,o,K,c),we=i.memoizedState),(ze=Ca||kb(i,o,ze,c,ve,we,le)||r!==null&&r.dependencies!==null&&wd(r.dependencies))?(be||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,we,le),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,we,le)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||D===r.memoizedProps&&ve===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&ve===r.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=we),b.props=c,b.state=we,b.context=le,c=ze):(typeof b.componentDidUpdate!="function"||D===r.memoizedProps&&ve===r.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&ve===r.memoizedState||(i.flags|=1024),c=!1)}return b=c,jd(r,i),c=(i.flags&128)!==0,b||c?(b=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,r!==null&&c?(i.child=fs(i,r.child,null,g),i.child=fs(i,null,o,g)):Xr(r,i,o,g),i.memoizedState=b.state,r=i.child):r=ra(r,i,g),r}function jb(r,i,o,c){return vl(),i.flags|=256,Xr(r,i,o,c),i.child}var Pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jf(r){return{baseLanes:r,cachePool:zx()}}function Nf(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=ei),r}function Nb(r,i,o){var c=i.pendingProps,g=!1,b=(i.flags&128)!==0,D;if((D=b)||(D=r!==null&&r.memoizedState===null?!1:(Br.current&2)!==0),D&&(g=!0,i.flags&=-129),D=(i.flags&32)!==0,i.flags&=-33,r===null){if(Mt){if(g?za(i):Ra(),Mt){var K=pr,le;if(le=K){e:{for(le=K,K=$i;le.nodeType!==8;){if(!K){K=null;break e}if(le=yi(le.nextSibling),le===null){K=null;break e}}K=le}K!==null?(i.memoizedState={dehydrated:K,treeContext:ao!==null?{id:Xi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},le=$n(18,null,null,0),le.stateNode=K,le.return=i,i.child=le,gn=i,pr=null,le=!0):le=!1}le||lo(i)}if(K=i.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return kp(K)?i.lanes=32:i.lanes=536870912,null;ta(i)}return K=c.children,c=c.fallback,g?(Ra(),g=i.mode,K=Nd({mode:"hidden",children:K},g),c=io(c,g,o,null),K.return=i,c.return=i,K.sibling=c,i.child=K,g=i.child,g.memoizedState=jf(o),g.childLanes=Nf(r,D,o),i.memoizedState=Pf,c):(za(i),Ff(i,K))}if(le=r.memoizedState,le!==null&&(K=le.dehydrated,K!==null)){if(b)i.flags&256?(za(i),i.flags&=-257,i=Hf(r,i,o)):i.memoizedState!==null?(Ra(),i.child=r.child,i.flags|=128,i=null):(Ra(),g=c.fallback,K=i.mode,c=Nd({mode:"visible",children:c.children},K),g=io(g,K,o,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,fs(i,r.child,null,o),c=i.child,c.memoizedState=jf(o),c.childLanes=Nf(r,D,o),i.memoizedState=Pf,i=g);else if(za(i),kp(K)){if(D=K.nextSibling&&K.nextSibling.dataset,D)var be=D.dgst;D=be,c=Error(l(419)),c.stack="",c.digest=D,wl({value:c,source:null,stack:null}),i=Hf(r,i,o)}else if(Vr||Sl(r,i,o,!1),D=(o&r.childLanes)!==0,Vr||D){if(D=Xt,D!==null&&(c=o&-o,c=(c&42)!==0?1:Pe(c),c=(c&(D.suspendedLanes|o))!==0?0:c,c!==0&&c!==le.retryLane))throw le.retryLane=c,rs(r,c),jn(D,r,c),Db;K.data==="$?"||sp(),i=Hf(r,i,o)}else K.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=le.treeContext,pr=yi(K.nextSibling),gn=i,Mt=!0,so=null,$i=!1,r!==null&&(Kn[Zn++]=Xi,Kn[Zn++]=Ki,Kn[Zn++]=ao,Xi=r.id,Ki=r.overflow,ao=i),i=Ff(i,c.children),i.flags|=4096);return i}return g?(Ra(),g=c.fallback,K=i.mode,le=r.child,be=le.sibling,c=Gi(le,{mode:"hidden",children:c.children}),c.subtreeFlags=le.subtreeFlags&65011712,be!==null?g=Gi(be,g):(g=io(g,K,o,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,K=r.child.memoizedState,K===null?K=jf(o):(le=K.cachePool,le!==null?(be=Lr._currentValue,le=le.parent!==be?{parent:be,pool:be}:le):le=zx(),K={baseLanes:K.baseLanes|o,cachePool:le}),g.memoizedState=K,g.childLanes=Nf(r,D,o),i.memoizedState=Pf,c):(za(i),o=r.child,r=o.sibling,o=Gi(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,r!==null&&(D=i.deletions,D===null?(i.deletions=[r],i.flags|=16):D.push(r)),i.child=o,i.memoizedState=null,o)}function Ff(r,i){return i=Nd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Nd(r,i){return r=$n(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Hf(r,i,o){return fs(i,r.child,null,o),r=Ff(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Fb(r,i,o){r.lanes|=i;var c=r.alternate;c!==null&&(c.lanes|=i),sf(r.return,i,o)}function Vf(r,i,o,c,g){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:g}:(b.isBackwards=i,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=g)}function Hb(r,i,o){var c=i.pendingProps,g=c.revealOrder,b=c.tail;if(Xr(r,i,c.children,o),c=Br.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Fb(r,o,i);else if(r.tag===19)Fb(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(de(Br,c),g){case"forwards":for(o=i.child,g=null;o!==null;)r=o.alternate,r!==null&&Ld(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=i.child,i.child=null):(g=o.sibling,o.sibling=null),Vf(i,!1,g,o,b);break;case"backwards":for(o=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&Ld(r)===null){i.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}Vf(i,!0,o,null,b);break;case"together":Vf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ra(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ia|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Sl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(l(153));if(i.child!==null){for(r=i.child,o=Gi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Gi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Uf(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&wd(r)))}function D3(r,i,o){switch(i.tag){case 3:Ae(i,i.stateNode.containerInfo),Sa(i,Lr,r.memoizedState.cache),vl();break;case 27:case 5:yt(i);break;case 4:Ae(i,i.stateNode.containerInfo);break;case 10:Sa(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(za(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Nb(r,i,o):(za(i),r=ra(r,i,o),r!==null?r.sibling:null);za(i);break;case 19:var g=(r.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Sl(r,i,o,!1),c=(o&i.childLanes)!==0),g){if(c)return Hb(r,i,o);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),de(Br,Br.current),c)break;return null;case 22:case 23:return i.lanes=0,Ob(r,i,o);case 24:Sa(i,Lr,r.memoizedState.cache)}return ra(r,i,o)}function Vb(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)Vr=!0;else{if(!Uf(r,o)&&(i.flags&128)===0)return Vr=!1,D3(r,i,o);Vr=(r.flags&131072)!==0}else Vr=!1,Mt&&(i.flags&1048576)!==0&&vx(i,vd,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var c=i.elementType,g=c._init;if(c=g(c._payload),i.type=c,typeof c=="function")Jh(c)?(r=po(c,r),i.tag=1,i=Pb(null,i,c,r,o)):(i.tag=0,i=Bf(null,i,c,r,o));else{if(c!=null){if(g=c.$$typeof,g===G){i.tag=11,i=Ib(null,i,c,r,o);break e}else if(g===U){i.tag=14,i=Wb(null,i,c,r,o);break e}}throw i=F(c)||c,Error(l(306,i,""))}}return i;case 0:return Bf(r,i,i.type,i.pendingProps,o);case 1:return c=i.type,g=po(c,i.pendingProps),Pb(r,i,c,g,o);case 3:e:{if(Ae(i,i.stateNode.containerInfo),r===null)throw Error(l(387));c=i.pendingProps;var b=i.memoizedState;g=b.element,pf(r,i),El(i,c,null,o);var D=i.memoizedState;if(c=D.cache,Sa(i,Lr,c),c!==b.cache&&lf(i,[Lr],o,!0),Rl(),c=D.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:D.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=jb(r,i,c,o);break e}else if(c!==g){g=Gn(Error(l(424)),i),wl(g),i=jb(r,i,c,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(pr=yi(r.firstChild),gn=i,Mt=!0,so=null,$i=!0,o=Sb(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(vl(),c===g){i=ra(r,i,o);break e}Xr(r,i,c,o)}i=i.child}return i;case 26:return jd(r,i),r===null?(o=Q1(i.type,null,i.pendingProps,null))?i.memoizedState=o:Mt||(o=i.type,r=i.pendingProps,c=tu(ie.current).createElement(o),c[sr]=i,c[Or]=r,Zr(c,o,r),Cr(c),i.stateNode=c):i.memoizedState=Q1(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return yt(i),r===null&&Mt&&(c=i.stateNode=U1(i.type,i.pendingProps,ie.current),gn=i,$i=!0,g=pr,La(i.type)?(_p=g,pr=yi(c.firstChild)):pr=g),Xr(r,i,i.pendingProps.children,o),jd(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Mt&&((g=c=pr)&&(c=ok(c,i.type,i.pendingProps,$i),c!==null?(i.stateNode=c,gn=i,pr=yi(c.firstChild),$i=!1,g=!0):g=!1),g||lo(i)),yt(i),g=i.type,b=i.pendingProps,D=r!==null?r.memoizedProps:null,c=b.children,wp(g,b)?c=null:D!==null&&wp(g,D)&&(i.flags|=32),i.memoizedState!==null&&(g=vf(r,i,k3,null,null,o),Kl._currentValue=g),jd(r,i),Xr(r,i,c,o),i.child;case 6:return r===null&&Mt&&((r=o=pr)&&(o=sk(o,i.pendingProps,$i),o!==null?(i.stateNode=o,gn=i,pr=null,r=!0):r=!1),r||lo(i)),null;case 13:return Nb(r,i,o);case 4:return Ae(i,i.stateNode.containerInfo),c=i.pendingProps,r===null?i.child=fs(i,null,c,o):Xr(r,i,c,o),i.child;case 11:return Ib(r,i,i.type,i.pendingProps,o);case 7:return Xr(r,i,i.pendingProps,o),i.child;case 8:return Xr(r,i,i.pendingProps.children,o),i.child;case 12:return Xr(r,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Sa(i,i.type,c.value),Xr(r,i,c.children,o),i.child;case 9:return g=i.type._context,c=i.pendingProps.children,uo(i),g=dn(g),c=c(g),i.flags|=1,Xr(r,i,c,o),i.child;case 14:return Wb(r,i,i.type,i.pendingProps,o);case 15:return $b(r,i,i.type,i.pendingProps,o);case 19:return Hb(r,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},r===null?(o=Nd(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Gi(r.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Ob(r,i,o);case 24:return uo(i),c=dn(Lr),r===null?(g=uf(),g===null&&(g=Xt,b=cf(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=o),g=b),i.memoizedState={parent:c,cache:g},ff(i),Sa(i,Lr,g)):((r.lanes&o)!==0&&(pf(r,i),El(i,null,null,o),Rl()),g=r.memoizedState,b=i.memoizedState,g.parent!==c?(g={parent:c,cache:c},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Sa(i,Lr,c)):(c=b.cache,Sa(i,Lr,c),c!==g.cache&&lf(i,[Lr],o,!0))),Xr(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function na(r){r.flags|=4}function Ub(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!J1(i)){if(i=Jn.current,i!==null&&((Ct&4194048)===Ct?Oi!==null:(Ct&62914560)!==Ct&&(Ct&536870912)===0||i!==Oi))throw Al=hf,Rx;r.flags|=8192}}function Fd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ye():536870912,r.lanes|=i,xs|=i)}function Ol(r,i){if(!Mt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function cr(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(i)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=c,r.childLanes=o,i}function I3(r,i,o){var c=i.pendingProps;switch(nf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(i),null;case 1:return cr(i),null;case 3:return o=i.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Ji(Lr),tt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(yl(i)?na(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cx())),cr(i),null;case 26:return o=i.memoizedState,r===null?(na(i),o!==null?(cr(i),Ub(i,o)):(cr(i),i.flags&=-16777217)):o?o!==r.memoizedState?(na(i),cr(i),Ub(i,o)):(cr(i),i.flags&=-16777217):(r.memoizedProps!==c&&na(i),cr(i),i.flags&=-16777217),null;case 27:wr(i),o=ie.current;var g=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==c&&na(i);else{if(!c){if(i.stateNode===null)throw Error(l(166));return cr(i),null}r=fe.current,yl(i)?wx(i):(r=U1(g,c,o),i.stateNode=r,na(i))}return cr(i),null;case 5:if(wr(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==c&&na(i);else{if(!c){if(i.stateNode===null)throw Error(l(166));return cr(i),null}if(r=fe.current,yl(i))wx(i);else{switch(g=tu(ie.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?g.createElement("select",{is:c.is}):g.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?g.createElement(o,{is:c.is}):g.createElement(o)}}r[sr]=i,r[Or]=c;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=r;e:switch(Zr(r,o,c),o){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&na(i)}}return cr(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==c&&na(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(l(166));if(r=ie.current,yl(i)){if(r=i.stateNode,o=i.memoizedProps,c=null,g=gn,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}r[sr]=i,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||B1(r.nodeValue,o)),r||lo(i)}else r=tu(r).createTextNode(c),r[sr]=i,i.stateNode=r}return cr(i),null;case 13:if(c=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=yl(i),c!==null&&c.dehydrated!==null){if(r===null){if(!g)throw Error(l(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(l(317));g[sr]=i}else vl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;cr(i),g=!1}else g=Cx(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(ta(i),i):(ta(i),null)}if(ta(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,r=r!==null&&r.memoizedState!==null,o){c=i.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool);var b=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==g&&(c.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Fd(i,i.updateQueue),cr(i),null;case 4:return tt(),r===null&&mp(i.stateNode.containerInfo),cr(i),null;case 10:return Ji(i.type),cr(i),null;case 19:if(re(Br),g=i.memoizedState,g===null)return cr(i),null;if(c=(i.flags&128)!==0,b=g.rendering,b===null)if(c)Ol(g,!1);else{if(gr!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(b=Ld(r),b!==null){for(i.flags|=128,Ol(g,!1),r=b.updateQueue,i.updateQueue=r,Fd(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)yx(o,r),o=o.sibling;return de(Br,Br.current&1|2),i.child}r=r.sibling}g.tail!==null&&De()>Ud&&(i.flags|=128,c=!0,Ol(g,!1),i.lanes=4194304)}else{if(!c)if(r=Ld(b),r!==null){if(i.flags|=128,c=!0,r=r.updateQueue,i.updateQueue=r,Fd(i,r),Ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Mt)return cr(i),null}else 2*De()-g.renderingStartTime>Ud&&o!==536870912&&(i.flags|=128,c=!0,Ol(g,!1),i.lanes=4194304);g.isBackwards?(b.sibling=i.child,i.child=b):(r=g.last,r!==null?r.sibling=b:i.child=b,g.last=b)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=De(),i.sibling=null,r=Br.current,de(Br,c?r&1|2:r&1),i):(cr(i),null);case 22:case 23:return ta(i),bf(),c=i.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(cr(i),i.subtreeFlags&6&&(i.flags|=8192)):cr(i),o=i.updateQueue,o!==null&&Fd(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),r!==null&&re(ho),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ji(Lr),cr(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function W3(r,i){switch(nf(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ji(Lr),tt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return wr(i),null;case 13:if(ta(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(l(340));vl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return re(Br),null;case 4:return tt(),null;case 10:return Ji(i.type),null;case 22:case 23:return ta(i),bf(),r!==null&&re(ho),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ji(Lr),null;case 25:return null;default:return null}}function qb(r,i){switch(nf(i),i.tag){case 3:Ji(Lr),tt();break;case 26:case 27:case 5:wr(i);break;case 4:tt();break;case 13:ta(i);break;case 19:re(Br);break;case 10:Ji(i.type);break;case 22:case 23:ta(i),bf(),r!==null&&re(ho);break;case 24:Ji(Lr)}}function Ll(r,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var g=c.next;o=g;do{if((o.tag&r)===r){c=void 0;var b=o.create,D=o.inst;c=b(),D.destroy=c}o=o.next}while(o!==g)}}catch(K){Yt(i,i.return,K)}}function Ea(r,i,o){try{var c=i.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var b=g.next;c=b;do{if((c.tag&r)===r){var D=c.inst,K=D.destroy;if(K!==void 0){D.destroy=void 0,g=i;var le=o,be=K;try{be()}catch(ze){Yt(g,le,ze)}}}c=c.next}while(c!==b)}}catch(ze){Yt(i,i.return,ze)}}function Yb(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{Wx(i,o)}catch(c){Yt(r,r.return,c)}}}function Qb(r,i,o){o.props=po(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){Yt(r,i,c)}}function Bl(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(g){Yt(r,i,g)}}function Li(r,i){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(g){Yt(r,i,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){Yt(r,i,g)}else o.current=null}function Gb(r){var i=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(g){Yt(r,r.return,g)}}function qf(r,i,o){try{var c=r.stateNode;tk(c,r.type,o,i),c[Or]=i}catch(g){Yt(r,r.return,g)}}function Xb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&La(r.type)||r.tag===4}function Yf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Xb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&La(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qf(r,i,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=eu));else if(c!==4&&(c===27&&La(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Qf(r,i,o),r=r.sibling;r!==null;)Qf(r,i,o),r=r.sibling}function Hd(r,i,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(c!==4&&(c===27&&La(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Hd(r,i,o),r=r.sibling;r!==null;)Hd(r,i,o),r=r.sibling}function Kb(r){var i=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Zr(i,c,o),i[sr]=r,i[Or]=o}catch(b){Yt(r,r.return,b)}}var ia=!1,_r=!1,Gf=!1,Zb=typeof WeakSet=="function"?WeakSet:Set,Ur=null;function $3(r,i){if(r=r.containerInfo,yp=su,r=cx(r),qh(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var g=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{o.nodeType,b.nodeType}catch(et){o=null;break e}var D=0,K=-1,le=-1,be=0,ze=0,Ee=r,ve=null;t:for(;;){for(var we;Ee!==o||g!==0&&Ee.nodeType!==3||(K=D+g),Ee!==b||c!==0&&Ee.nodeType!==3||(le=D+c),Ee.nodeType===3&&(D+=Ee.nodeValue.length),(we=Ee.firstChild)!==null;)ve=Ee,Ee=we;for(;;){if(Ee===r)break t;if(ve===o&&++be===g&&(K=D),ve===b&&++ze===c&&(le=D),(we=Ee.nextSibling)!==null)break;Ee=ve,ve=Ee.parentNode}Ee=we}o=K===-1||le===-1?null:{start:K,end:le}}else o=null}o=o||{start:0,end:0}}else o=null;for(vp={focusedElem:r,selectionRange:o},su=!1,Ur=i;Ur!==null;)if(i=Ur,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Ur=r;else for(;Ur!==null;){switch(i=Ur,b=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,o=i,g=b.memoizedProps,b=b.memoizedState,c=o.stateNode;try{var it=po(o.type,g,o.elementType===o.type);r=c.getSnapshotBeforeUpdate(it,b),c.__reactInternalSnapshotBeforeUpdate=r}catch(et){Yt(o,o.return,et)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Cp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(l(163))}if(r=i.sibling,r!==null){r.return=i.return,Ur=r;break}Ur=i.return}}function Jb(r,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ta(r,o),c&4&&Ll(5,o);break;case 1:if(Ta(r,o),c&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(D){Yt(o,o.return,D)}else{var g=po(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(g,i,r.__reactInternalSnapshotBeforeUpdate)}catch(D){Yt(o,o.return,D)}}c&64&&Yb(o),c&512&&Bl(o,o.return);break;case 3:if(Ta(r,o),c&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Wx(r,i)}catch(D){Yt(o,o.return,D)}}break;case 27:i===null&&c&4&&Kb(o);case 26:case 5:Ta(r,o),i===null&&c&4&&Gb(o),c&512&&Bl(o,o.return);break;case 12:Ta(r,o);break;case 13:Ta(r,o),c&4&&r1(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=V3.bind(null,o),lk(r,o))));break;case 22:if(c=o.memoizedState!==null||ia,!c){i=i!==null&&i.memoizedState!==null||_r,g=ia;var b=_r;ia=c,(_r=i)&&!b?Ma(r,o,(o.subtreeFlags&8772)!==0):Ta(r,o),ia=g,_r=b}break;case 30:break;default:Ta(r,o)}}function e1(r){var i=r.alternate;i!==null&&(r.alternate=null,e1(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&qi(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var rr=null,Cn=!1;function aa(r,i,o){for(o=o.child;o!==null;)t1(r,i,o),o=o.sibling}function t1(r,i,o){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(yn,o)}catch(b){}switch(o.tag){case 26:_r||Li(o,i),aa(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:_r||Li(o,i);var c=rr,g=Cn;La(o.type)&&(rr=o.stateNode,Cn=!1),aa(r,i,o),Yl(o.stateNode),rr=c,Cn=g;break;case 5:_r||Li(o,i);case 6:if(c=rr,g=Cn,rr=null,aa(r,i,o),rr=c,Cn=g,rr!==null)if(Cn)try{(rr.nodeType===9?rr.body:rr.nodeName==="HTML"?rr.ownerDocument.body:rr).removeChild(o.stateNode)}catch(b){Yt(o,i,b)}else try{rr.removeChild(o.stateNode)}catch(b){Yt(o,i,b)}break;case 18:rr!==null&&(Cn?(r=rr,H1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),tc(r)):H1(rr,o.stateNode));break;case 4:c=rr,g=Cn,rr=o.stateNode.containerInfo,Cn=!0,aa(r,i,o),rr=c,Cn=g;break;case 0:case 11:case 14:case 15:_r||Ea(2,o,i),_r||Ea(4,o,i),aa(r,i,o);break;case 1:_r||(Li(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Qb(o,i,c)),aa(r,i,o);break;case 21:aa(r,i,o);break;case 22:_r=(c=_r)||o.memoizedState!==null,aa(r,i,o),_r=c;break;default:aa(r,i,o)}}function r1(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{tc(r)}catch(o){Yt(i,i.return,o)}}function O3(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Zb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Zb),i;default:throw Error(l(435,r.tag))}}function Xf(r,i){var o=O3(r);i.forEach(function(c){var g=U3.bind(null,r,c);o.has(c)||(o.add(c),c.then(g,g))})}function On(r,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var g=o[c],b=r,D=i,K=D;e:for(;K!==null;){switch(K.tag){case 27:if(La(K.type)){rr=K.stateNode,Cn=!1;break e}break;case 5:rr=K.stateNode,Cn=!1;break e;case 3:case 4:rr=K.stateNode.containerInfo,Cn=!0;break e}K=K.return}if(rr===null)throw Error(l(160));t1(b,D,g),rr=null,Cn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)n1(i,r),i=i.sibling}var bi=null;function n1(r,i){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:On(i,r),Ln(r),c&4&&(Ea(3,r,r.return),Ll(3,r),Ea(5,r,r.return));break;case 1:On(i,r),Ln(r),c&512&&(_r||o===null||Li(o,o.return)),c&64&&ia&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var g=bi;if(On(i,r),Ln(r),c&512&&(_r||o===null||Li(o,o.return)),c&4){var b=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Di]||b[sr]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(c),g.head.insertBefore(b,g.querySelector("head > title"))),Zr(b,c,o),b[sr]=r,Cr(b),c=b;break e;case"link":var D=K1("link","href",g).get(c+(o.href||""));if(D){for(var K=0;K<D.length;K++)if(b=D[K],b.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&b.getAttribute("rel")===(o.rel==null?null:o.rel)&&b.getAttribute("title")===(o.title==null?null:o.title)&&b.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){D.splice(K,1);break t}}b=g.createElement(c),Zr(b,c,o),g.head.appendChild(b);break;case"meta":if(D=K1("meta","content",g).get(c+(o.content||""))){for(K=0;K<D.length;K++)if(b=D[K],b.getAttribute("content")===(o.content==null?null:""+o.content)&&b.getAttribute("name")===(o.name==null?null:o.name)&&b.getAttribute("property")===(o.property==null?null:o.property)&&b.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&b.getAttribute("charset")===(o.charSet==null?null:o.charSet)){D.splice(K,1);break t}}b=g.createElement(c),Zr(b,c,o),g.head.appendChild(b);break;default:throw Error(l(468,c))}b[sr]=r,Cr(b),c=b}r.stateNode=c}else Z1(g,r.type,r.stateNode);else r.stateNode=X1(g,c,r.memoizedProps);else b!==c?(b===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):b.count--,c===null?Z1(g,r.type,r.stateNode):X1(g,c,r.memoizedProps)):c===null&&r.stateNode!==null&&qf(r,r.memoizedProps,o.memoizedProps)}break;case 27:On(i,r),Ln(r),c&512&&(_r||o===null||Li(o,o.return)),o!==null&&c&4&&qf(r,r.memoizedProps,o.memoizedProps);break;case 5:if(On(i,r),Ln(r),c&512&&(_r||o===null||Li(o,o.return)),r.flags&32){g=r.stateNode;try{Go(g,"")}catch(we){Yt(r,r.return,we)}}c&4&&r.stateNode!=null&&(g=r.memoizedProps,qf(r,g,o!==null?o.memoizedProps:g)),c&1024&&(Gf=!0);break;case 6:if(On(i,r),Ln(r),c&4){if(r.stateNode===null)throw Error(l(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(we){Yt(r,r.return,we)}}break;case 3:if(iu=null,g=bi,bi=ru(i.containerInfo),On(i,r),bi=g,Ln(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{tc(i.containerInfo)}catch(we){Yt(r,r.return,we)}Gf&&(Gf=!1,i1(r));break;case 4:c=bi,bi=ru(r.stateNode.containerInfo),On(i,r),Ln(r),bi=c;break;case 12:On(i,r),Ln(r);break;case 13:On(i,r),Ln(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(rp=De()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Xf(r,c)));break;case 22:g=r.memoizedState!==null;var le=o!==null&&o.memoizedState!==null,be=ia,ze=_r;if(ia=be||g,_r=ze||le,On(i,r),_r=ze,ia=be,Ln(r),c&8192)e:for(i=r.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(o===null||le||ia||_r||go(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){le=o=i;try{if(b=le.stateNode,g)D=b.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{K=le.stateNode;var Ee=le.memoizedProps.style,ve=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;K.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(we){Yt(le,le.return,we)}}}else if(i.tag===6){if(o===null){le=i;try{le.stateNode.nodeValue=g?"":le.memoizedProps}catch(we){Yt(le,le.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Xf(r,o))));break;case 19:On(i,r),Ln(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Xf(r,c)));break;case 30:break;case 21:break;default:On(i,r),Ln(r)}}function Ln(r){var i=r.flags;if(i&2){try{for(var o,c=r.return;c!==null;){if(Xb(c)){o=c;break}c=c.return}if(o==null)throw Error(l(160));switch(o.tag){case 27:var g=o.stateNode,b=Yf(r);Hd(r,b,g);break;case 5:var D=o.stateNode;o.flags&32&&(Go(D,""),o.flags&=-33);var K=Yf(r);Hd(r,K,D);break;case 3:case 4:var le=o.stateNode.containerInfo,be=Yf(r);Qf(r,be,le);break;default:throw Error(l(161))}}catch(ze){Yt(r,r.return,ze)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function i1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;i1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Ta(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Jb(r,i.alternate,i),i=i.sibling}function go(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ea(4,i,i.return),go(i);break;case 1:Li(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Qb(i,i.return,o),go(i);break;case 27:Yl(i.stateNode);case 26:case 5:Li(i,i.return),go(i);break;case 22:i.memoizedState===null&&go(i);break;case 30:go(i);break;default:go(i)}r=r.sibling}}function Ma(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,g=r,b=i,D=b.flags;switch(b.tag){case 0:case 11:case 15:Ma(g,b,o),Ll(4,b);break;case 1:if(Ma(g,b,o),c=b,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(be){Yt(c,c.return,be)}if(c=b,g=c.updateQueue,g!==null){var K=c.stateNode;try{var le=g.shared.hiddenCallbacks;if(le!==null)for(g.shared.hiddenCallbacks=null,g=0;g<le.length;g++)Ix(le[g],K)}catch(be){Yt(c,c.return,be)}}o&&D&64&&Yb(b),Bl(b,b.return);break;case 27:Kb(b);case 26:case 5:Ma(g,b,o),o&&c===null&&D&4&&Gb(b),Bl(b,b.return);break;case 12:Ma(g,b,o);break;case 13:Ma(g,b,o),o&&D&4&&r1(g,b);break;case 22:b.memoizedState===null&&Ma(g,b,o),Bl(b,b.return);break;case 30:break;default:Ma(g,b,o)}i=i.sibling}}function Kf(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Cl(o))}function Zf(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Cl(r))}function Bi(r,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a1(r,i,o,c),i=i.sibling}function a1(r,i,o,c){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Bi(r,i,o,c),g&2048&&Ll(9,i);break;case 1:Bi(r,i,o,c);break;case 3:Bi(r,i,o,c),g&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Cl(r)));break;case 12:if(g&2048){Bi(r,i,o,c),r=i.stateNode;try{var b=i.memoizedProps,D=b.id,K=b.onPostCommit;typeof K=="function"&&K(D,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(le){Yt(i,i.return,le)}}else Bi(r,i,o,c);break;case 13:Bi(r,i,o,c);break;case 23:break;case 22:b=i.stateNode,D=i.alternate,i.memoizedState!==null?b._visibility&2?Bi(r,i,o,c):Pl(r,i):b._visibility&2?Bi(r,i,o,c):(b._visibility|=2,ps(r,i,o,c,(i.subtreeFlags&10256)!==0)),g&2048&&Kf(D,i);break;case 24:Bi(r,i,o,c),g&2048&&Zf(i.alternate,i);break;default:Bi(r,i,o,c)}}function ps(r,i,o,c,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var b=r,D=i,K=o,le=c,be=D.flags;switch(D.tag){case 0:case 11:case 15:ps(b,D,K,le,g),Ll(8,D);break;case 23:break;case 22:var ze=D.stateNode;D.memoizedState!==null?ze._visibility&2?ps(b,D,K,le,g):Pl(b,D):(ze._visibility|=2,ps(b,D,K,le,g)),g&&be&2048&&Kf(D.alternate,D);break;case 24:ps(b,D,K,le,g),g&&be&2048&&Zf(D.alternate,D);break;default:ps(b,D,K,le,g)}i=i.sibling}}function Pl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,c=i,g=c.flags;switch(c.tag){case 22:Pl(o,c),g&2048&&Kf(c.alternate,c);break;case 24:Pl(o,c),g&2048&&Zf(c.alternate,c);break;default:Pl(o,c)}i=i.sibling}}var jl=8192;function gs(r){if(r.subtreeFlags&jl)for(r=r.child;r!==null;)o1(r),r=r.sibling}function o1(r){switch(r.tag){case 26:gs(r),r.flags&jl&&r.memoizedState!==null&&wk(bi,r.memoizedState,r.memoizedProps);break;case 5:gs(r);break;case 3:case 4:var i=bi;bi=ru(r.stateNode.containerInfo),gs(r),bi=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=jl,jl=16777216,gs(r),jl=i):gs(r));break;default:gs(r)}}function s1(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Nl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Ur=c,c1(c,r)}s1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)l1(r),r=r.sibling}function l1(r){switch(r.tag){case 0:case 11:case 15:Nl(r),r.flags&2048&&Ea(9,r,r.return);break;case 3:Nl(r);break;case 12:Nl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Vd(r)):Nl(r);break;default:Nl(r)}}function Vd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Ur=c,c1(c,r)}s1(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ea(8,i,i.return),Vd(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Vd(i));break;default:Vd(i)}r=r.sibling}}function c1(r,i){for(;Ur!==null;){var o=Ur;switch(o.tag){case 0:case 11:case 15:Ea(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Cl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Ur=c;else e:for(o=r;Ur!==null;){c=Ur;var g=c.sibling,b=c.return;if(e1(c),c===o){Ur=null;break e}if(g!==null){g.return=b,Ur=g;break e}Ur=b}}}var L3={getCacheForType:function(r){var i=dn(Lr),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},B3=typeof WeakMap=="function"?WeakMap:Map,Ot=0,Xt=null,vt=null,Ct=0,Lt=0,Bn=null,Da=!1,ms=!1,Jf=!1,oa=0,gr=0,Ia=0,mo=0,ep=0,ei=0,xs=0,Fl=null,kn=null,tp=!1,rp=0,Ud=1/0,qd=null,Wa=null,Kr=0,$a=null,bs=null,ys=0,np=0,ip=null,d1=null,Hl=0,ap=null;function Pn(){if((Ot&2)!==0&&Ct!==0)return Ct&-Ct;if(M.T!==null){var r=os;return r!==0?r:hp()}return Mi()}function u1(){ei===0&&(ei=(Ct&536870912)===0||Mt?lt():536870912);var r=Jn.current;return r!==null&&(r.flags|=32),ei}function jn(r,i,o){(r===Xt&&(Lt===2||Lt===9)||r.cancelPendingCommit!==null)&&(vs(r,0),Oa(r,Ct,ei,!1)),tr(r,o),((Ot&2)===0||r!==Xt)&&(r===Xt&&((Ot&2)===0&&(mo|=o),gr===4&&Oa(r,Ct,ei,!1)),Pi(r))}function h1(r,i,o){if((Ot&6)!==0)throw Error(l(327));var c=!o&&(i&124)===0&&(i&r.expiredLanes)===0||Fe(r,i),g=c?N3(r,i):lp(r,i,!0),b=c;do{if(g===0){ms&&!c&&Oa(r,i,0,!1);break}else{if(o=r.current.alternate,b&&!P3(o)){g=lp(r,i,!1),b=!1;continue}if(g===2){if(b=i,r.errorRecoveryDisabledLanes&b)var D=0;else D=r.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){i=D;e:{var K=r;g=Fl;var le=K.current.memoizedState.isDehydrated;if(le&&(vs(K,D).flags|=256),D=lp(K,D,!1),D!==2){if(Jf&&!le){K.errorRecoveryDisabledLanes|=b,mo|=b,g=4;break e}b=kn,kn=g,b!==null&&(kn===null?kn=b:kn.push.apply(kn,b))}g=D}if(b=!1,g!==2)continue}}if(g===1){vs(r,0),Oa(r,i,0,!0);break}e:{switch(c=r,b=g,b){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:Oa(c,i,ei,!Da);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(g=rp+300-De(),10<g)){if(Oa(c,i,ei,!Da),Ze(c,0,!0)!==0)break e;c.timeoutHandle=N1(f1.bind(null,c,o,kn,qd,tp,i,ei,mo,xs,Da,b,2,-0,0),g);break e}f1(c,o,kn,qd,tp,i,ei,mo,xs,Da,b,0,-0,0)}}break}while(!0);Pi(r)}function f1(r,i,o,c,g,b,D,K,le,be,ze,Ee,ve,we){if(r.timeoutHandle=-1,Ee=i.subtreeFlags,(Ee&8192||(Ee&16785408)===16785408)&&(Xl={stylesheets:null,count:0,unsuspend:vk},o1(i),Ee=Sk(),Ee!==null)){r.cancelPendingCommit=Ee(v1.bind(null,r,i,b,o,c,g,D,K,le,ze,1,ve,we)),Oa(r,b,D,!be);return}v1(r,i,b,o,c,g,D,K,le)}function P3(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var g=o[c],b=g.getSnapshot;g=g.value;try{if(!Wn(b(),g))return!1}catch(D){return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Oa(r,i,o,c){i&=~ep,i&=~mo,r.suspendedLanes|=i,r.pingedLanes&=~i,c&&(r.warmLanes|=i),c=r.expirationTimes;for(var g=i;0<g;){var b=31-Se(g),D=1<<b;c[b]=-1,g&=~D}o!==0&&Ue(r,o,i)}function Yd(){return(Ot&6)===0?(Vl(0),!1):!0}function op(){if(vt!==null){if(Lt===0)var r=vt.return;else r=vt,Zi=co=null,Cf(r),hs=null,Wl=0,r=vt;for(;r!==null;)qb(r.alternate,r),r=r.return;vt=null}}function vs(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,nk(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),op(),Xt=r,vt=o=Gi(r.current,null),Ct=i,Lt=0,Bn=null,Da=!1,ms=Fe(r,i),Jf=!1,xs=ei=ep=mo=Ia=gr=0,kn=Fl=null,tp=!1,(i&8)!==0&&(i|=i&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=i;0<c;){var g=31-Se(c),b=1<<g;i|=r[g],c&=~b}return oa=i,gd(),o}function p1(r,i){gt=null,M.H=Wd,i===_l||i===kd?(i=Mx(),Lt=3):i===Rx?(i=Mx(),Lt=4):Lt=i===Db?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bn=i,vt===null&&(gr=1,Pd(r,Gn(i,r.current)))}function g1(){var r=M.H;return M.H=Wd,r===null?Wd:r}function m1(){var r=M.A;return M.A=L3,r}function sp(){gr=4,Da||(Ct&4194048)!==Ct&&Jn.current!==null||(ms=!0),(Ia&134217727)===0&&(mo&134217727)===0||Xt===null||Oa(Xt,Ct,ei,!1)}function lp(r,i,o){var c=Ot;Ot|=2;var g=g1(),b=m1();(Xt!==r||Ct!==i)&&(qd=null,vs(r,i)),i=!1;var D=gr;e:do try{if(Lt!==0&&vt!==null){var K=vt,le=Bn;switch(Lt){case 8:op(),D=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(i=!0);var be=Lt;if(Lt=0,Bn=null,ws(r,K,le,be),o&&ms){D=0;break e}break;default:be=Lt,Lt=0,Bn=null,ws(r,K,le,be)}}j3(),D=gr;break}catch(ze){p1(r,ze)}while(!0);return i&&r.shellSuspendCounter++,Zi=co=null,Ot=c,M.H=g,M.A=b,vt===null&&(Xt=null,Ct=0,gd()),D}function j3(){for(;vt!==null;)x1(vt)}function N3(r,i){var o=Ot;Ot|=2;var c=g1(),g=m1();Xt!==r||Ct!==i?(qd=null,Ud=De()+500,vs(r,i)):ms=Fe(r,i);e:do try{if(Lt!==0&&vt!==null){i=vt;var b=Bn;t:switch(Lt){case 1:Lt=0,Bn=null,ws(r,i,b,1);break;case 2:case 9:if(Ex(b)){Lt=0,Bn=null,b1(i);break}i=function(){Lt!==2&&Lt!==9||Xt!==r||(Lt=7),Pi(r)},b.then(i,i);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:Ex(b)?(Lt=0,Bn=null,b1(i)):(Lt=0,Bn=null,ws(r,i,b,7));break;case 5:var D=null;switch(vt.tag){case 26:D=vt.memoizedState;case 5:case 27:var K=vt;if(!D||J1(D)){Lt=0,Bn=null;var le=K.sibling;if(le!==null)vt=le;else{var be=K.return;be!==null?(vt=be,Qd(be)):vt=null}break t}}Lt=0,Bn=null,ws(r,i,b,5);break;case 6:Lt=0,Bn=null,ws(r,i,b,6);break;case 8:op(),gr=6;break e;default:throw Error(l(462))}}F3();break}catch(ze){p1(r,ze)}while(!0);return Zi=co=null,M.H=c,M.A=g,Ot=o,vt!==null?0:(Xt=null,Ct=0,gd(),gr)}function F3(){for(;vt!==null&&!Tt();)x1(vt)}function x1(r){var i=Vb(r.alternate,r,oa);r.memoizedProps=r.pendingProps,i===null?Qd(r):vt=i}function b1(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=Bb(o,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=Bb(o,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:Cf(i);default:qb(o,i),i=vt=yx(i,oa),i=Vb(o,i,oa)}r.memoizedProps=r.pendingProps,i===null?Qd(r):vt=i}function ws(r,i,o,c){Zi=co=null,Cf(i),hs=null,Wl=0;var g=i.return;try{if(M3(r,g,i,o,Ct)){gr=1,Pd(r,Gn(o,r.current)),vt=null;return}}catch(b){if(g!==null)throw vt=g,b;gr=1,Pd(r,Gn(o,r.current)),vt=null;return}i.flags&32768?(Mt||c===1?r=!0:ms||(Ct&536870912)!==0?r=!1:(Da=r=!0,(c===2||c===9||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),y1(i,r)):Qd(i)}function Qd(r){var i=r;do{if((i.flags&32768)!==0){y1(i,Da);return}r=i.return;var o=I3(i.alternate,i,oa);if(o!==null){vt=o;return}if(i=i.sibling,i!==null){vt=i;return}vt=i=r}while(i!==null);gr===0&&(gr=5)}function y1(r,i){do{var o=W3(r.alternate,r);if(o!==null){o.flags&=32767,vt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){vt=r;return}vt=r=o}while(r!==null);gr=6,vt=null}function v1(r,i,o,c,g,b,D,K,le){r.cancelPendingCommit=null;do Gd();while(Kr!==0);if((Ot&6)!==0)throw Error(l(327));if(i!==null){if(i===r.current)throw Error(l(177));if(b=i.lanes|i.childLanes,b|=Kh,Te(r,o,b,D,K,le),r===Xt&&(vt=Xt=null,Ct=0),bs=i,$a=r,ys=o,np=b,ip=g,d1=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,q3(cn,function(){return _1(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=M.T,M.T=null,g=O.p,O.p=2,D=Ot,Ot|=4;try{$3(r,i,o)}finally{Ot=D,O.p=g,M.T=c}}Kr=1,w1(),S1(),C1()}}function w1(){if(Kr===1){Kr=0;var r=$a,i=bs,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var c=O.p;O.p=2;var g=Ot;Ot|=4;try{n1(i,r);var b=vp,D=cx(r.containerInfo),K=b.focusedElem,le=b.selectionRange;if(D!==K&&K&&K.ownerDocument&&lx(K.ownerDocument.documentElement,K)){if(le!==null&&qh(K)){var be=le.start,ze=le.end;if(ze===void 0&&(ze=be),"selectionStart"in K)K.selectionStart=be,K.selectionEnd=Math.min(ze,K.value.length);else{var Ee=K.ownerDocument||document,ve=Ee&&Ee.defaultView||window;if(ve.getSelection){var we=ve.getSelection(),it=K.textContent.length,et=Math.min(le.start,it),Ft=le.end===void 0?et:Math.min(le.end,it);!we.extend&&et>Ft&&(D=Ft,Ft=et,et=D);var pe=sx(K,et),ue=sx(K,Ft);if(pe&&ue&&(we.rangeCount!==1||we.anchorNode!==pe.node||we.anchorOffset!==pe.offset||we.focusNode!==ue.node||we.focusOffset!==ue.offset)){var me=Ee.createRange();me.setStart(pe.node,pe.offset),we.removeAllRanges(),et>Ft?(we.addRange(me),we.extend(ue.node,ue.offset)):(me.setEnd(ue.node,ue.offset),we.addRange(me))}}}}for(Ee=[],we=K;we=we.parentNode;)we.nodeType===1&&Ee.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Ee.length;K++){var Re=Ee[K];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}su=!!yp,vp=yp=null}finally{Ot=g,O.p=c,M.T=o}}r.current=i,Kr=2}}function S1(){if(Kr===2){Kr=0;var r=$a,i=bs,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var c=O.p;O.p=2;var g=Ot;Ot|=4;try{Jb(r,i.alternate,i)}finally{Ot=g,O.p=c,M.T=o}}Kr=3}}function C1(){if(Kr===4||Kr===3){Kr=0,or();var r=$a,i=bs,o=ys,c=d1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kr=5:(Kr=0,bs=$a=null,k1(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Wa=null),Sr(o),i=i.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(yn,i,void 0,(i.current.flags&128)===128)}catch(le){}if(c!==null){i=M.T,g=O.p,O.p=2,M.T=null;try{for(var b=r.onRecoverableError,D=0;D<c.length;D++){var K=c[D];b(K.value,{componentStack:K.stack})}}finally{M.T=i,O.p=g}}(ys&3)!==0&&Gd(),Pi(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===ap?Hl++:(Hl=0,ap=r):Hl=0,Vl(0)}}function k1(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Cl(i)))}function Gd(r){return w1(),S1(),C1(),_1()}function _1(){if(Kr!==5)return!1;var r=$a,i=np;np=0;var o=Sr(ys),c=M.T,g=O.p;try{O.p=32>o?32:o,M.T=null,o=ip,ip=null;var b=$a,D=ys;if(Kr=0,bs=$a=null,ys=0,(Ot&6)!==0)throw Error(l(331));var K=Ot;if(Ot|=4,l1(b.current),a1(b,b.current,D,o),Ot=K,Vl(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(yn,b)}catch(le){}return!0}finally{O.p=g,M.T=c,k1(r,i)}}function A1(r,i,o){i=Gn(o,i),i=Lf(r.stateNode,i,2),r=_a(r,i,2),r!==null&&(tr(r,2),Pi(r))}function Yt(r,i,o){if(r.tag===3)A1(r,r,o);else for(;i!==null;){if(i.tag===3){A1(i,r,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wa===null||!Wa.has(c))){r=Gn(o,r),o=Tb(2),c=_a(i,o,2),c!==null&&(Mb(o,c,i,r),tr(c,2),Pi(c));break}}i=i.return}}function cp(r,i,o){var c=r.pingCache;if(c===null){c=r.pingCache=new B3;var g=new Set;c.set(i,g)}else g=c.get(i),g===void 0&&(g=new Set,c.set(i,g));g.has(o)||(Jf=!0,g.add(o),r=H3.bind(null,r,i,o),i.then(r,r))}function H3(r,i,o){var c=r.pingCache;c!==null&&c.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Xt===r&&(Ct&o)===o&&(gr===4||gr===3&&(Ct&62914560)===Ct&&300>De()-rp?(Ot&2)===0&&vs(r,0):ep|=o,xs===Ct&&(xs=0)),Pi(r)}function z1(r,i){i===0&&(i=Ye()),r=rs(r,i),r!==null&&(tr(r,i),Pi(r))}function V3(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),z1(r,o)}function U3(r,i){var o=0;switch(r.tag){case 13:var c=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(l(314))}c!==null&&c.delete(i),z1(r,o)}function q3(r,i){return ln(r,i)}var Xd=null,Ss=null,dp=!1,Kd=!1,up=!1,xo=0;function Pi(r){r!==Ss&&r.next===null&&(Ss===null?Xd=Ss=r:Ss=Ss.next=r),Kd=!0,dp||(dp=!0,Q3())}function Vl(r,i){if(!up&&Kd){up=!0;do for(var o=!1,c=Xd;c!==null;){if(r!==0){var g=c.pendingLanes;if(g===0)var b=0;else{var D=c.suspendedLanes,K=c.pingedLanes;b=(1<<31-Se(42|r)+1)-1,b&=g&~(D&~K),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(o=!0,M1(c,b))}else b=Ct,b=Ze(c,c===Xt?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(b&3)===0||Fe(c,b)||(o=!0,M1(c,b));c=c.next}while(o);up=!1}}function Y3(){R1()}function R1(){Kd=dp=!1;var r=0;xo!==0&&(rk()&&(r=xo),xo=0);for(var i=De(),o=null,c=Xd;c!==null;){var g=c.next,b=E1(c,i);b===0?(c.next=null,o===null?Xd=g:o.next=g,g===null&&(Ss=o)):(o=c,(r!==0||(b&3)!==0)&&(Kd=!0)),c=g}Vl(r)}function E1(r,i){for(var o=r.suspendedLanes,c=r.pingedLanes,g=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var D=31-Se(b),K=1<<D,le=g[D];le===-1?((K&o)===0||(K&c)!==0)&&(g[D]=ke(K,i)):le<=i&&(r.expiredLanes|=K),b&=~K}if(i=Xt,o=Ct,o=Ze(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===i&&(Lt===2||Lt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Le(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Fe(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(c!==null&&Le(c),Sr(o)){case 2:case 8:o=Dn;break;case 32:o=cn;break;case 268435456:o=pn;break;default:o=cn}return c=T1.bind(null,r),o=ln(o,c),r.callbackPriority=i,r.callbackNode=o,i}return c!==null&&c!==null&&Le(c),r.callbackPriority=2,r.callbackNode=null,2}function T1(r,i){if(Kr!==0&&Kr!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Gd()&&r.callbackNode!==o)return null;var c=Ct;return c=Ze(r,r===Xt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(h1(r,c,i),E1(r,De()),r.callbackNode!=null&&r.callbackNode===o?T1.bind(null,r):null)}function M1(r,i){if(Gd())return null;h1(r,i,!0)}function Q3(){ik(function(){(Ot&6)!==0?ln(Mn,Y3):R1()})}function hp(){return xo===0&&(xo=lt()),xo}function D1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ld(""+r)}function I1(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function G3(r,i,o,c,g){if(i==="submit"&&o&&o.stateNode===g){var b=D1((g[Or]||null).action),D=c.submitter;D&&(i=(i=D[Or]||null)?D1(i.formAction):D.getAttribute("formAction"),i!==null&&(b=i,D=null));var K=new hd("action","action",null,c,g);r.push({event:K,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(xo!==0){var le=D?I1(g,D):new FormData(g);Df(o,{pending:!0,data:le,method:g.method,action:b},null,le)}}else typeof b=="function"&&(K.preventDefault(),le=D?I1(g,D):new FormData(g),Df(o,{pending:!0,data:le,method:g.method,action:b},b,le))},currentTarget:g}]})}}for(var fp=0;fp<Xh.length;fp++){var pp=Xh[fp],X3=pp.toLowerCase(),K3=pp[0].toUpperCase()+pp.slice(1);xi(X3,"on"+K3)}xi(hx,"onAnimationEnd"),xi(fx,"onAnimationIteration"),xi(px,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(p3,"onTransitionRun"),xi(g3,"onTransitionStart"),xi(m3,"onTransitionCancel"),xi(gx,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function W1(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],g=c.event;c=c.listeners;e:{var b=void 0;if(i)for(var D=c.length-1;0<=D;D--){var K=c[D],le=K.instance,be=K.currentTarget;if(K=K.listener,le!==b&&g.isPropagationStopped())break e;b=K,g.currentTarget=be;try{b(g)}catch(ze){Bd(ze)}g.currentTarget=null,b=le}else for(D=0;D<c.length;D++){if(K=c[D],le=K.instance,be=K.currentTarget,K=K.listener,le!==b&&g.isPropagationStopped())break e;b=K,g.currentTarget=be;try{b(g)}catch(ze){Bd(ze)}g.currentTarget=null,b=le}}}}function wt(r,i){var o=i[Ne];o===void 0&&(o=i[Ne]=new Set);var c=r+"__bubble";o.has(c)||($1(i,r,2,!1),o.add(c))}function gp(r,i,o){var c=0;i&&(c|=4),$1(o,r,c,i)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function mp(r){if(!r[Zd]){r[Zd]=!0,sl.forEach(function(o){o!=="selectionchange"&&(Z3.has(o)||gp(o,!1,r),gp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Zd]||(i[Zd]=!0,gp("selectionchange",!1,i))}}function $1(r,i,o,c){switch(ay(i)){case 2:var g=_k;break;case 8:g=Ak;break;default:g=Tp}o=g.bind(null,i,o,r),g=void 0,!Lh||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),c?g!==void 0?r.addEventListener(i,o,{capture:!0,passive:g}):r.addEventListener(i,o,!0):g!==void 0?r.addEventListener(i,o,{passive:g}):r.addEventListener(i,o,!1)}function xp(r,i,o,c,g){var b=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var D=c.tag;if(D===3||D===4){var K=c.stateNode.containerInfo;if(K===g)break;if(D===4)for(D=c.return;D!==null;){var le=D.tag;if((le===3||le===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;K!==null;){if(D=Vn(K),D===null)return;if(le=D.tag,le===5||le===6||le===26||le===27){c=b=D;continue e}K=K.parentNode}}c=c.return}Fm(function(){var be=b,ze=$h(o),Ee=[];e:{var ve=mx.get(r);if(ve!==void 0){var we=hd,it=r;switch(r){case"keypress":if(dd(o)===0)break e;case"keydown":case"keyup":we=qC;break;case"focusin":it="focus",we=Nh;break;case"focusout":it="blur",we=Nh;break;case"beforeblur":case"afterblur":we=Nh;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=WC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=GC;break;case hx:case fx:case px:we=LC;break;case gx:we=KC;break;case"scroll":case"scrollend":we=DC;break;case"wheel":we=JC;break;case"copy":case"cut":case"paste":we=PC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Ym;break;case"toggle":case"beforetoggle":we=t3}var et=(i&4)!==0,Ft=!et&&(r==="scroll"||r==="scrollend"),pe=et?ve!==null?ve+"Capture":null:ve;et=[];for(var ue=be,me;ue!==null;){var Re=ue;if(me=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||me===null||pe===null||(Re=dl(ue,pe),Re!=null&&et.push(ql(ue,Re,me))),Ft)break;ue=ue.return}0<et.length&&(ve=new we(ve,it,null,o,ze),Ee.push({event:ve,listeners:et}))}}if((i&7)===0){e:{if(ve=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",ve&&o!==Wh&&(it=o.relatedTarget||o.fromElement)&&(Vn(it)||it[qt]))break e;if((we||ve)&&(ve=ze.window===ze?ze:(ve=ze.ownerDocument)?ve.defaultView||ve.parentWindow:window,we?(it=o.relatedTarget||o.toElement,we=be,it=it?Vn(it):null,it!==null&&(Ft=p(it),et=it.tag,it!==Ft||et!==5&&et!==27&&et!==6)&&(it=null)):(we=null,it=be),we!==it)){if(et=Um,Re="onMouseLeave",pe="onMouseEnter",ue="mouse",(r==="pointerout"||r==="pointerover")&&(et=Ym,Re="onPointerLeave",pe="onPointerEnter",ue="pointer"),Ft=we==null?ve:mi(we),me=it==null?ve:mi(it),ve=new et(Re,ue+"leave",we,o,ze),ve.target=Ft,ve.relatedTarget=me,Re=null,Vn(ze)===be&&(et=new et(pe,ue+"enter",it,o,ze),et.target=me,et.relatedTarget=Ft,Re=et),Ft=Re,we&&it)t:{for(et=we,pe=it,ue=0,me=et;me;me=Cs(me))ue++;for(me=0,Re=pe;Re;Re=Cs(Re))me++;for(;0<ue-me;)et=Cs(et),ue--;for(;0<me-ue;)pe=Cs(pe),me--;for(;ue--;){if(et===pe||pe!==null&&et===pe.alternate)break t;et=Cs(et),pe=Cs(pe)}et=null}else et=null;we!==null&&O1(Ee,ve,we,et,!1),it!==null&&Ft!==null&&O1(Ee,Ft,it,et,!0)}}e:{if(ve=be?mi(be):window,we=ve.nodeName&&ve.nodeName.toLowerCase(),we==="select"||we==="input"&&ve.type==="file")var qe=tx;else if(Jm(ve))if(rx)qe=u3;else{qe=c3;var mt=l3}else we=ve.nodeName,!we||we.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?be&&Ih(be.elementType)&&(qe=tx):qe=d3;if(qe&&(qe=qe(r,be))){ex(Ee,qe,o,ze);break e}mt&&mt(r,ve,be),r==="focusout"&&be&&ve.type==="number"&&be.memoizedProps.value!=null&&Dh(ve,"number",ve.value)}switch(mt=be?mi(be):window,r){case"focusin":(Jm(mt)||mt.contentEditable==="true")&&(Jo=mt,Yh=be,bl=null);break;case"focusout":bl=Yh=Jo=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,dx(Ee,o,ze);break;case"selectionchange":if(f3)break;case"keydown":case"keyup":dx(Ee,o,ze)}var Ge;if(Hh)e:{switch(r){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Zo?Km(r,o)&&(rt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(rt="onCompositionStart");rt&&(Qm&&o.locale!=="ko"&&(Zo||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Zo&&(Ge=Hm()):(wa=ze,Bh="value"in wa?wa.value:wa.textContent,Zo=!0)),mt=Jd(be,rt),0<mt.length&&(rt=new qm(rt,r,null,o,ze),Ee.push({event:rt,listeners:mt}),Ge?rt.data=Ge:(Ge=Zm(o),Ge!==null&&(rt.data=Ge)))),(Ge=n3?i3(r,o):a3(r,o))&&(rt=Jd(be,"onBeforeInput"),0<rt.length&&(mt=new qm("onBeforeInput","beforeinput",null,o,ze),Ee.push({event:mt,listeners:rt}),mt.data=Ge)),G3(Ee,r,be,o,ze)}W1(Ee,i)})}function ql(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Jd(r,i){for(var o=i+"Capture",c=[];r!==null;){var g=r,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=dl(r,o),g!=null&&c.unshift(ql(r,g,b)),g=dl(r,i),g!=null&&c.push(ql(r,g,b))),r.tag===3)return c;r=r.return}return[]}function Cs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function O1(r,i,o,c,g){for(var b=i._reactName,D=[];o!==null&&o!==c;){var K=o,le=K.alternate,be=K.stateNode;if(K=K.tag,le!==null&&le===c)break;K!==5&&K!==26&&K!==27||be===null||(le=be,g?(be=dl(o,b),be!=null&&D.unshift(ql(o,be,le))):g||(be=dl(o,b),be!=null&&D.push(ql(o,be,le)))),o=o.return}D.length!==0&&r.push({event:i,listeners:D})}var J3=/\r\n?/g,ek=/\u0000|\uFFFD/g;function L1(r){return(typeof r=="string"?r:""+r).replace(J3,`
`).replace(ek,"")}function B1(r,i){return i=L1(i),L1(r)===i}function eu(){}function Nt(r,i,o,c,g,b){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Go(r,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Go(r,""+c);break;case"className":eo(r,"class",c);break;case"tabIndex":eo(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":eo(r,o,c);break;case"style":jm(r,c,b);break;case"data":if(i!=="object"){eo(r,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=ld(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(o==="formAction"?(i!=="input"&&Nt(r,i,"name",g.name,g,null),Nt(r,i,"formEncType",g.formEncType,g,null),Nt(r,i,"formMethod",g.formMethod,g,null),Nt(r,i,"formTarget",g.formTarget,g,null)):(Nt(r,i,"encType",g.encType,g,null),Nt(r,i,"method",g.method,g,null),Nt(r,i,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=ld(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=eu);break;case"onScroll":c!=null&&wt("scroll",r);break;case"onScrollEnd":c!=null&&wt("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(o=c.__html,o!=null){if(g.children!=null)throw Error(l(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=ld(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":wt("beforetoggle",r),wt("toggle",r),Ja(r,"popover",c);break;case"xlinkActuate":qn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ja(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=TC.get(o)||o,Ja(r,o,c))}}function bp(r,i,o,c,g,b){switch(o){case"style":jm(r,c,b);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(o=c.__html,o!=null){if(g.children!=null)throw Error(l(60));r.innerHTML=o}}break;case"children":typeof c=="string"?Go(r,c):(typeof c=="number"||typeof c=="bigint")&&Go(r,""+c);break;case"onScroll":c!=null&&wt("scroll",r);break;case"onScrollEnd":c!=null&&wt("scrollend",r);break;case"onClick":c!=null&&(r.onclick=eu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),i=o.slice(2,g?o.length-7:void 0),b=r[Or]||null,b=b!=null?b[o]:null,typeof b=="function"&&r.removeEventListener(i,b,g),typeof c=="function")){typeof b!="function"&&b!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,c,g);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Ja(r,o,c)}}}function Zr(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",r),wt("load",r);var c=!1,g=!1,b;for(b in o)if(o.hasOwnProperty(b)){var D=o[b];if(D!=null)switch(b){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:Nt(r,i,b,D,o,null)}}g&&Nt(r,i,"srcSet",o.srcSet,o,null),c&&Nt(r,i,"src",o.src,o,null);return;case"input":wt("invalid",r);var K=b=D=g=null,le=null,be=null;for(c in o)if(o.hasOwnProperty(c)){var ze=o[c];if(ze!=null)switch(c){case"name":g=ze;break;case"type":D=ze;break;case"checked":le=ze;break;case"defaultChecked":be=ze;break;case"value":b=ze;break;case"defaultValue":K=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(l(137,i));break;default:Nt(r,i,c,ze,o,null)}}Om(r,b,K,le,be,D,g,!1),od(r);return;case"select":wt("invalid",r),c=D=b=null;for(g in o)if(o.hasOwnProperty(g)&&(K=o[g],K!=null))switch(g){case"value":b=K;break;case"defaultValue":D=K;break;case"multiple":c=K;default:Nt(r,i,g,K,o,null)}i=b,o=D,r.multiple=!!c,i!=null?Qo(r,!!c,i,!1):o!=null&&Qo(r,!!c,o,!0);return;case"textarea":wt("invalid",r),b=g=c=null;for(D in o)if(o.hasOwnProperty(D)&&(K=o[D],K!=null))switch(D){case"value":c=K;break;case"defaultValue":g=K;break;case"children":b=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(l(91));break;default:Nt(r,i,D,K,o,null)}Bm(r,c,g,b),od(r);return;case"option":for(le in o)if(o.hasOwnProperty(le)&&(c=o[le],c!=null))switch(le){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Nt(r,i,le,c,o,null)}return;case"dialog":wt("beforetoggle",r),wt("toggle",r),wt("cancel",r),wt("close",r);break;case"iframe":case"object":wt("load",r);break;case"video":case"audio":for(c=0;c<Ul.length;c++)wt(Ul[c],r);break;case"image":wt("error",r),wt("load",r);break;case"details":wt("toggle",r);break;case"embed":case"source":case"link":wt("error",r),wt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in o)if(o.hasOwnProperty(be)&&(c=o[be],c!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:Nt(r,i,be,c,o,null)}return;default:if(Ih(i)){for(ze in o)o.hasOwnProperty(ze)&&(c=o[ze],c!==void 0&&bp(r,i,ze,c,o,void 0));return}}for(K in o)o.hasOwnProperty(K)&&(c=o[K],c!=null&&Nt(r,i,K,c,o,null))}function tk(r,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,D=null,K=null,le=null,be=null,ze=null;for(we in o){var Ee=o[we];if(o.hasOwnProperty(we)&&Ee!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":le=Ee;default:c.hasOwnProperty(we)||Nt(r,i,we,null,c,Ee)}}for(var ve in c){var we=c[ve];if(Ee=o[ve],c.hasOwnProperty(ve)&&(we!=null||Ee!=null))switch(ve){case"type":b=we;break;case"name":g=we;break;case"checked":be=we;break;case"defaultChecked":ze=we;break;case"value":D=we;break;case"defaultValue":K=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(l(137,i));break;default:we!==Ee&&Nt(r,i,ve,we,c,Ee)}}Mh(r,D,K,le,be,ze,b,g);return;case"select":we=D=K=ve=null;for(b in o)if(le=o[b],o.hasOwnProperty(b)&&le!=null)switch(b){case"value":break;case"multiple":we=le;default:c.hasOwnProperty(b)||Nt(r,i,b,null,c,le)}for(g in c)if(b=c[g],le=o[g],c.hasOwnProperty(g)&&(b!=null||le!=null))switch(g){case"value":ve=b;break;case"defaultValue":K=b;break;case"multiple":D=b;default:b!==le&&Nt(r,i,g,b,c,le)}i=K,o=D,c=we,ve!=null?Qo(r,!!o,ve,!1):!!c!=!!o&&(i!=null?Qo(r,!!o,i,!0):Qo(r,!!o,o?[]:"",!1));return;case"textarea":we=ve=null;for(K in o)if(g=o[K],o.hasOwnProperty(K)&&g!=null&&!c.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:Nt(r,i,K,null,c,g)}for(D in c)if(g=c[D],b=o[D],c.hasOwnProperty(D)&&(g!=null||b!=null))switch(D){case"value":ve=g;break;case"defaultValue":we=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(l(91));break;default:g!==b&&Nt(r,i,D,g,c,b)}Lm(r,ve,we);return;case"option":for(var it in o)if(ve=o[it],o.hasOwnProperty(it)&&ve!=null&&!c.hasOwnProperty(it))switch(it){case"selected":r.selected=!1;break;default:Nt(r,i,it,null,c,ve)}for(le in c)if(ve=c[le],we=o[le],c.hasOwnProperty(le)&&ve!==we&&(ve!=null||we!=null))switch(le){case"selected":r.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:Nt(r,i,le,ve,c,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in o)ve=o[et],o.hasOwnProperty(et)&&ve!=null&&!c.hasOwnProperty(et)&&Nt(r,i,et,null,c,ve);for(be in c)if(ve=c[be],we=o[be],c.hasOwnProperty(be)&&ve!==we&&(ve!=null||we!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(l(137,i));break;default:Nt(r,i,be,ve,c,we)}return;default:if(Ih(i)){for(var Ft in o)ve=o[Ft],o.hasOwnProperty(Ft)&&ve!==void 0&&!c.hasOwnProperty(Ft)&&bp(r,i,Ft,void 0,c,ve);for(ze in c)ve=c[ze],we=o[ze],!c.hasOwnProperty(ze)||ve===we||ve===void 0&&we===void 0||bp(r,i,ze,ve,c,we);return}}for(var pe in o)ve=o[pe],o.hasOwnProperty(pe)&&ve!=null&&!c.hasOwnProperty(pe)&&Nt(r,i,pe,null,c,ve);for(Ee in c)ve=c[Ee],we=o[Ee],!c.hasOwnProperty(Ee)||ve===we||ve==null&&we==null||Nt(r,i,Ee,ve,c,we)}var yp=null,vp=null;function tu(r){return r.nodeType===9?r:r.ownerDocument}function P1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j1(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function wp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sp=null;function rk(){var r=window.event;return r&&r.type==="popstate"?r===Sp?!1:(Sp=r,!0):(Sp=null,!1)}var N1=typeof setTimeout=="function"?setTimeout:void 0,nk=typeof clearTimeout=="function"?clearTimeout:void 0,F1=typeof Promise=="function"?Promise:void 0,ik=typeof queueMicrotask=="function"?queueMicrotask:typeof F1!="undefined"?function(r){return F1.resolve(null).then(r).catch(ak)}:N1;function ak(r){setTimeout(function(){throw r})}function La(r){return r==="head"}function H1(r,i){var o=i,c=0,g=0;do{var b=o.nextSibling;if(r.removeChild(o),b&&b.nodeType===8)if(o=b.data,o==="/$"){if(0<c&&8>c){o=c;var D=r.ownerDocument;if(o&1&&Yl(D.documentElement),o&2&&Yl(D.body),o&4)for(o=D.head,Yl(o),D=o.firstChild;D;){var K=D.nextSibling,le=D.nodeName;D[Di]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&D.rel.toLowerCase()==="stylesheet"||o.removeChild(D),D=K}}if(g===0){r.removeChild(b),tc(i);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:c=o.charCodeAt(0)-48;else c=0;o=b}while(o);tc(i)}function Cp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cp(o),qi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function ok(r,i,o,c){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Di])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=yi(r.nextSibling),r===null)break}return null}function sk(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=yi(r.nextSibling),r===null))return null;return r}function kp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function lk(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function yi(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var _p=null;function V1(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function U1(r,i,o){switch(i=tu(o),r){case"html":if(r=i.documentElement,!r)throw Error(l(452));return r;case"head":if(r=i.head,!r)throw Error(l(453));return r;case"body":if(r=i.body,!r)throw Error(l(454));return r;default:throw Error(l(451))}}function Yl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);qi(r)}var ti=new Map,q1=new Set;function ru(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var sa=O.d;O.d={f:ck,r:dk,D:uk,C:hk,L:fk,m:pk,X:mk,S:gk,M:xk};function ck(){var r=sa.f(),i=Yd();return r||i}function dk(r){var i=In(r);i!==null&&i.tag===5&&i.type==="form"?hb(i):sa.r(r)}var ks=typeof document=="undefined"?null:document;function Y1(r,i,o){var c=ks;if(c&&typeof i=="string"&&i){var g=Qn(i);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),q1.has(g)||(q1.add(g),r={rel:r,crossOrigin:o,href:i},c.querySelector(g)===null&&(i=c.createElement("link"),Zr(i,"link",r),Cr(i),c.head.appendChild(i)))}}function uk(r){sa.D(r),Y1("dns-prefetch",r,null)}function hk(r,i){sa.C(r,i),Y1("preconnect",r,i)}function fk(r,i,o){sa.L(r,i,o);var c=ks;if(c&&r&&i){var g='link[rel="preload"][as="'+Qn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Qn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Qn(o.imageSizes)+'"]')):g+='[href="'+Qn(r)+'"]';var b=g;switch(i){case"style":b=_s(r);break;case"script":b=As(r)}ti.has(b)||(r=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),ti.set(b,r),c.querySelector(g)!==null||i==="style"&&c.querySelector(Ql(b))||i==="script"&&c.querySelector(Gl(b))||(i=c.createElement("link"),Zr(i,"link",r),Cr(i),c.head.appendChild(i)))}}function pk(r,i){sa.m(r,i);var o=ks;if(o&&r){var c=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Qn(c)+'"][href="'+Qn(r)+'"]',b=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=As(r)}if(!ti.has(b)&&(r=v({rel:"modulepreload",href:r},i),ti.set(b,r),o.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gl(b)))return}c=o.createElement("link"),Zr(c,"link",r),Cr(c),o.head.appendChild(c)}}}function gk(r,i,o){sa.S(r,i,o);var c=ks;if(c&&r){var g=Un(c).hoistableStyles,b=_s(r);i=i||"default";var D=g.get(b);if(!D){var K={loading:0,preload:null};if(D=c.querySelector(Ql(b)))K.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":i},o),(o=ti.get(b))&&Ap(r,o);var le=D=c.createElement("link");Cr(le),Zr(le,"link",r),le._p=new Promise(function(be,ze){le.onload=be,le.onerror=ze}),le.addEventListener("load",function(){K.loading|=1}),le.addEventListener("error",function(){K.loading|=2}),K.loading|=4,nu(D,i,c)}D={type:"stylesheet",instance:D,count:1,state:K},g.set(b,D)}}}function mk(r,i){sa.X(r,i);var o=ks;if(o&&r){var c=Un(o).hoistableScripts,g=As(r),b=c.get(g);b||(b=o.querySelector(Gl(g)),b||(r=v({src:r,async:!0},i),(i=ti.get(g))&&zp(r,i),b=o.createElement("script"),Cr(b),Zr(b,"link",r),o.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(g,b))}}function xk(r,i){sa.M(r,i);var o=ks;if(o&&r){var c=Un(o).hoistableScripts,g=As(r),b=c.get(g);b||(b=o.querySelector(Gl(g)),b||(r=v({src:r,async:!0,type:"module"},i),(i=ti.get(g))&&zp(r,i),b=o.createElement("script"),Cr(b),Zr(b,"link",r),o.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(g,b))}}function Q1(r,i,o,c){var g=(g=ie.current)?ru(g):null;if(!g)throw Error(l(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=_s(o.href),o=Un(g).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=_s(o.href);var b=Un(g).hoistableStyles,D=b.get(r);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,D),(b=g.querySelector(Ql(r)))&&!b._p&&(D.instance=b,D.state.loading=5),ti.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ti.set(r,o),b||bk(g,r,o,D.state))),i&&c===null)throw Error(l(528,""));return D}if(i&&c!==null)throw Error(l(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=As(o),o=Un(g).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,r))}}function _s(r){return'href="'+Qn(r)+'"'}function Ql(r){return'link[rel="stylesheet"]['+r+"]"}function G1(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function bk(r,i,o,c){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=r.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Zr(i,"link",o),Cr(i),r.head.appendChild(i))}function As(r){return'[src="'+Qn(r)+'"]'}function Gl(r){return"script[async]"+r}function X1(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=r.querySelector('style[data-href~="'+Qn(o.href)+'"]');if(c)return i.instance=c,Cr(c),c;var g=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Cr(c),Zr(c,"style",g),nu(c,o.precedence,r),i.instance=c;case"stylesheet":g=_s(o.href);var b=r.querySelector(Ql(g));if(b)return i.state.loading|=4,i.instance=b,Cr(b),b;c=G1(o),(g=ti.get(g))&&Ap(c,g),b=(r.ownerDocument||r).createElement("link"),Cr(b);var D=b;return D._p=new Promise(function(K,le){D.onload=K,D.onerror=le}),Zr(b,"link",c),i.state.loading|=4,nu(b,o.precedence,r),i.instance=b;case"script":return b=As(o.src),(g=r.querySelector(Gl(b)))?(i.instance=g,Cr(g),g):(c=o,(g=ti.get(b))&&(c=v({},o),zp(c,g)),r=r.ownerDocument||r,g=r.createElement("script"),Cr(g),Zr(g,"link",c),r.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,nu(c,o.precedence,r));return i.instance}function nu(r,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,b=g,D=0;D<c.length;D++){var K=c[D];if(K.dataset.precedence===i)b=K;else if(b!==g)break}b?b.parentNode.insertBefore(r,b.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Ap(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function zp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var iu=null;function K1(r,i,o){if(iu===null){var c=new Map,g=iu=new Map;g.set(o,c)}else g=iu,c=g.get(o),c||(c=new Map,g.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var b=o[g];if(!(b[Di]||b[sr]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var D=b.getAttribute(i)||"";D=r+D;var K=c.get(D);K?K.push(b):c.set(D,[b])}}return c}function Z1(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function yk(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function J1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Xl=null;function vk(){}function wk(r,i,o){if(Xl===null)throw Error(l(475));var c=Xl;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=_s(o.href),b=r.querySelector(Ql(g));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=au.bind(c),r.then(c,c)),i.state.loading|=4,i.instance=b,Cr(b);return}b=r.ownerDocument||r,o=G1(o),(g=ti.get(g))&&Ap(o,g),b=b.createElement("link"),Cr(b);var D=b;D._p=new Promise(function(K,le){D.onload=K,D.onerror=le}),Zr(b,"link",o),i.instance=b}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=au.bind(c),r.addEventListener("load",i),r.addEventListener("error",i))}}function Sk(){if(Xl===null)throw Error(l(475));var r=Xl;return r.stylesheets&&r.count===0&&Rp(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Rp(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function au(){if(this.count--,this.count===0){if(this.stylesheets)Rp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ou=null;function Rp(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ou=new Map,i.forEach(Ck,r),ou=null,au.call(r))}function Ck(r,i){if(!(i.state.loading&4)){var o=ou.get(r);if(o)var c=o.get(null);else{o=new Map,ou.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var D=g[b];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(o.set(D.dataset.precedence,D),c=D)}c&&o.set(null,c)}g=i.instance,D=g.getAttribute("data-precedence"),b=o.get(D)||c,b===c&&o.set(null,g),o.set(D,g),this.count++,c=au.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),b?b.parentNode.insertBefore(g,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),i.state.loading|=4}}var Kl={$$typeof:N,Provider:null,Consumer:null,_currentValue:C,_currentValue2:C,_threadCount:0};function kk(r,i,o,c,g,b,D,K){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=It(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.hiddenUpdates=It(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function ey(r,i,o,c,g,b,D,K,le,be,ze,Ee){return r=new kk(r,i,o,D,K,le,be,Ee),i=1,b===!0&&(i|=24),b=$n(3,null,null,i),r.current=b,b.stateNode=r,i=cf(),i.refCount++,r.pooledCache=i,i.refCount++,b.memoizedState={element:c,isDehydrated:o,cache:i},ff(b),r}function ty(r){return r?(r=ns,r):ns}function ry(r,i,o,c,g,b){g=ty(g),c.context===null?c.context=g:c.pendingContext=g,c=ka(i),c.payload={element:o},b=b===void 0?null:b,b!==null&&(c.callback=b),o=_a(r,c,i),o!==null&&(jn(o,r,i),zl(o,r,i))}function ny(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Ep(r,i){ny(r,i),(r=r.alternate)&&ny(r,i)}function iy(r){if(r.tag===13){var i=rs(r,67108864);i!==null&&jn(i,r,67108864),Ep(r,67108864)}}var su=!0;function _k(r,i,o,c){var g=M.T;M.T=null;var b=O.p;try{O.p=2,Tp(r,i,o,c)}finally{O.p=b,M.T=g}}function Ak(r,i,o,c){var g=M.T;M.T=null;var b=O.p;try{O.p=8,Tp(r,i,o,c)}finally{O.p=b,M.T=g}}function Tp(r,i,o,c){if(su){var g=Mp(c);if(g===null)xp(r,i,c,lu,o),oy(r,c);else if(Rk(g,r,i,o,c))c.stopPropagation();else if(oy(r,c),i&4&&-1<zk.indexOf(r)){for(;g!==null;){var b=In(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var D=je(b.pendingLanes);if(D!==0){var K=b;for(K.pendingLanes|=2,K.entangledLanes|=2;D;){var le=1<<31-Se(D);K.entanglements[1]|=le,D&=~le}Pi(b),(Ot&6)===0&&(Ud=De()+500,Vl(0))}}break;case 13:K=rs(b,2),K!==null&&jn(K,b,2),Yd(),Ep(b,2)}if(b=Mp(c),b===null&&xp(r,i,c,lu,o),b===g)break;g=b}g!==null&&c.stopPropagation()}else xp(r,i,c,null,o)}}function Mp(r){return r=$h(r),Dp(r)}var lu=null;function Dp(r){if(lu=null,r=Vn(r),r!==null){var i=p(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=h(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return lu=r,null}function ay(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case Mn:return 2;case Dn:return 8;case cn:case gi:return 32;case pn:return 268435456;default:return 32}default:return 32}}var Ip=!1,Ba=null,Pa=null,ja=null,Zl=new Map,Jl=new Map,Na=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oy(r,i){switch(r){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":Zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(i.pointerId)}}function ec(r,i,o,c,g,b){return r===null||r.nativeEvent!==b?(r={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:b,targetContainers:[g]},i!==null&&(i=In(i),i!==null&&iy(i)),r):(r.eventSystemFlags|=c,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function Rk(r,i,o,c,g){switch(i){case"focusin":return Ba=ec(Ba,r,i,o,c,g),!0;case"dragenter":return Pa=ec(Pa,r,i,o,c,g),!0;case"mouseover":return ja=ec(ja,r,i,o,c,g),!0;case"pointerover":var b=g.pointerId;return Zl.set(b,ec(Zl.get(b)||null,r,i,o,c,g)),!0;case"gotpointercapture":return b=g.pointerId,Jl.set(b,ec(Jl.get(b)||null,r,i,o,c,g)),!0}return!1}function sy(r){var i=Vn(r.target);if(i!==null){var o=p(i);if(o!==null){if(i=o.tag,i===13){if(i=h(o),i!==null){r.blockedOn=i,va(r.priority,function(){if(o.tag===13){var c=Pn();c=Pe(c);var g=rs(o,c);g!==null&&jn(g,o,c),Ep(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function cu(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Mp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);Wh=c,o.target.dispatchEvent(c),Wh=null}else return i=In(o),i!==null&&iy(i),r.blockedOn=o,!1;i.shift()}return!0}function ly(r,i,o){cu(r)&&o.delete(i)}function Ek(){Ip=!1,Ba!==null&&cu(Ba)&&(Ba=null),Pa!==null&&cu(Pa)&&(Pa=null),ja!==null&&cu(ja)&&(ja=null),Zl.forEach(ly),Jl.forEach(ly)}function du(r,i){r.blockedOn===i&&(r.blockedOn=null,Ip||(Ip=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ek)))}var uu=null;function cy(r){uu!==r&&(uu=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uu===r&&(uu=null);for(var i=0;i<r.length;i+=3){var o=r[i],c=r[i+1],g=r[i+2];if(typeof c!="function"){if(Dp(c||o)===null)continue;break}var b=In(o);b!==null&&(r.splice(i,3),i-=3,Df(b,{pending:!0,data:g,method:o.method,action:c},c,g))}}))}function tc(r){function i(le){return du(le,r)}Ba!==null&&du(Ba,r),Pa!==null&&du(Pa,r),ja!==null&&du(ja,r),Zl.forEach(i),Jl.forEach(i);for(var o=0;o<Na.length;o++){var c=Na[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<Na.length&&(o=Na[0],o.blockedOn===null);)sy(o),o.blockedOn===null&&Na.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var g=o[c],b=o[c+1],D=g[Or]||null;if(typeof b=="function")D||cy(o);else if(D){var K=null;if(b&&b.hasAttribute("formAction")){if(g=b,D=b[Or]||null)K=D.formAction;else if(Dp(g)!==null)continue}else K=D.action;typeof K=="function"?o[c+1]=K:(o.splice(c,3),c-=3),cy(o)}}}function Wp(r){this._internalRoot=r}hu.prototype.render=Wp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(l(409));var o=i.current,c=Pn();ry(o,c,r,i,null,null)},hu.prototype.unmount=Wp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ry(r.current,2,null,r,null,null),Yd(),i[qt]=null}};function hu(r){this._internalRoot=r}hu.prototype.unstable_scheduleHydration=function(r){if(r){var i=Mi();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Na.length&&i!==0&&i<Na[o].priority;o++);Na.splice(o,0,r),o===0&&sy(r)}};var dy=n.version;if(dy!=="19.1.0")throw Error(l(527,dy,"19.1.0"));O.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(l(188)):(r=Object.keys(r).join(","),Error(l(268,r)));return r=m(i),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var Tk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{yn=fu.inject(Tk),Ie=fu}catch(r){}}return oc.createRoot=function(r,i){if(!u(r))throw Error(l(299));var o=!1,c="",g=Ab,b=zb,D=Rb,K=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(D=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(K=i.unstable_transitionCallbacks)),i=ey(r,1,!1,null,null,o,c,g,b,D,K,null),r[qt]=i.current,mp(r),new Wp(i)},oc.hydrateRoot=function(r,i,o){if(!u(r))throw Error(l(299));var c=!1,g="",b=Ab,D=zb,K=Rb,le=null,be=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(D=o.onCaughtError),o.onRecoverableError!==void 0&&(K=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(le=o.unstable_transitionCallbacks),o.formState!==void 0&&(be=o.formState)),i=ey(r,1,!0,i,o!=null?o:null,c,g,b,D,K,le,be),i.context=ty(null),o=i.current,c=Pn(),c=Pe(c),g=ka(c),g.callback=null,_a(o,g,c),o=c,i.current.lanes=o,tr(i,o),Pi(i),r[qt]=i.current,mp(r),new hu(i)},oc.version="19.1.0",oc}var Ly;function Z6(){if(Ly)return Vp.exports;Ly=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Vp.exports=K6(),Vp.exports}var J6=Z6();const e8=Qc(J6);var Yp={exports:{}},Qp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function t8(){if(By)return Qp;By=1;var e=s5();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var a=typeof Object.is=="function"?Object.is:n,l=e.useSyncExternalStore,u=e.useRef,p=e.useEffect,h=e.useMemo,x=e.useDebugValue;return Qp.useSyncExternalStoreWithSelector=function(m,y,v,S,_){var k=u(null);if(k.current===null){var E={hasValue:!1,value:null};k.current=E}else E=k.current;k=h(function(){function W(J){if(!T){if(T=!0,z=J,J=S(J),_!==void 0&&E.hasValue){var H=E.value;if(_(H,J))return N=H}return N=J}if(H=N,a(z,J))return H;var U=S(J);return _!==void 0&&_(H,U)?(z=J,H):(z=J,N=U)}var T=!1,z,N,G=v===void 0?null:v;return[function(){return W(y())},G===null?void 0:function(){return W(G())}]},[y,v,S,_]);var R=l(m,k[0],k[1]);return p(function(){E.hasValue=!0,E.value=R},[R]),x(R),R},Qp}var Py;function r8(){return Py||(Py=1,Yp.exports=t8()),Yp.exports}var n8=r8();function i8(e){e()}function a8(){let e=null,n=null;return{clear(){e=null,n=null},notify(){i8(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let l=e;for(;l;)a.push(l),l=l.next;return a},subscribe(a){let l=!0;const u=n={callback:a,next:null,prev:n};return u.prev?u.prev.next=u:e=u,function(){!l||e===null||(l=!1,u.next?u.next.prev=u.prev:n=u.prev,u.prev?u.prev.next=u.next:e=u.next)}}}}var jy={notify(){},get:()=>[]};function o8(e,n){let a,l=jy,u=0,p=!1;function h(R){v();const W=l.subscribe(R);let T=!1;return()=>{T||(T=!0,W(),S())}}function x(){l.notify()}function m(){E.onStateChange&&E.onStateChange()}function y(){return p}function v(){u++,a||(a=e.subscribe(m),l=a8())}function S(){u--,a&&u===0&&(a(),a=void 0,l.clear(),l=jy)}function _(){p||(p=!0,v())}function k(){p&&(p=!1,S())}const E={addNestedSub:h,notifyNestedSubs:x,handleChangeWrapper:m,isSubscribed:y,trySubscribe:_,tryUnsubscribe:k,getListeners:()=>l};return E}var s8=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",l8=s8(),c8=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",d8=c8(),u8=()=>l8||d8?w.useLayoutEffect:w.useEffect,h8=u8(),Gp=Symbol.for("react-redux-context"),Xp=typeof globalThis!="undefined"?globalThis:{};function f8(){var a;if(!w.createContext)return{};const e=(a=Xp[Gp])!=null?a:Xp[Gp]=new Map;let n=e.get(w.createContext);return n||(n=w.createContext(null),e.set(w.createContext,n)),n}var Ya=f8();function p8(e){const{children:n,context:a,serverState:l,store:u}=e,p=w.useMemo(()=>{const m=o8(u);return{store:u,subscription:m,getServerState:l?()=>l:void 0}},[u,l]),h=w.useMemo(()=>u.getState(),[u]);h8(()=>{const{subscription:m}=p;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),h!==u.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[p,h]);const x=a||Ya;return w.createElement(x.Provider,{value:p},n)}var g8=p8;function j0(e=Ya){return function(){return w.useContext(e)}}var l5=j0();function c5(e=Ya){const n=e===Ya?l5:j0(e),a=()=>{const{store:l}=n();return l};return Object.assign(a,{withTypes:()=>a}),a}var m8=c5();function x8(e=Ya){const n=e===Ya?m8:c5(e),a=()=>n().dispatch;return Object.assign(a,{withTypes:()=>a}),a}var Gc=x8(),b8=(e,n)=>e===n;function y8(e=Ya){const n=e===Ya?l5:j0(e),a=(l,u={})=>{const{equalityFn:p=b8}=typeof u=="function"?{equalityFn:u}:u,h=n(),{store:x,subscription:m,getServerState:y}=h;w.useRef(!0);const v=w.useCallback({[l.name](_){return l(_)}}[l.name],[l]),S=n8.useSyncExternalStoreWithSelector(m.addNestedSub,x.getState,y||x.getState,v,p);return w.useDebugValue(S),S};return Object.assign(a,{withTypes:()=>a}),a}var N0=y8(),Kp,Ny;function v8(){if(Ny)return Kp;Ny=1;var e=typeof Element!="undefined",n=typeof Map=="function",a=typeof Set=="function",l=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function u(p,h){if(p===h)return!0;if(p&&h&&typeof p=="object"&&typeof h=="object"){if(p.constructor!==h.constructor)return!1;var x,m,y;if(Array.isArray(p)){if(x=p.length,x!=h.length)return!1;for(m=x;m--!==0;)if(!u(p[m],h[m]))return!1;return!0}var v;if(n&&p instanceof Map&&h instanceof Map){if(p.size!==h.size)return!1;for(v=p.entries();!(m=v.next()).done;)if(!h.has(m.value[0]))return!1;for(v=p.entries();!(m=v.next()).done;)if(!u(m.value[1],h.get(m.value[0])))return!1;return!0}if(a&&p instanceof Set&&h instanceof Set){if(p.size!==h.size)return!1;for(v=p.entries();!(m=v.next()).done;)if(!h.has(m.value[0]))return!1;return!0}if(l&&ArrayBuffer.isView(p)&&ArrayBuffer.isView(h)){if(x=p.length,x!=h.length)return!1;for(m=x;m--!==0;)if(p[m]!==h[m])return!1;return!0}if(p.constructor===RegExp)return p.source===h.source&&p.flags===h.flags;if(p.valueOf!==Object.prototype.valueOf&&typeof p.valueOf=="function"&&typeof h.valueOf=="function")return p.valueOf()===h.valueOf();if(p.toString!==Object.prototype.toString&&typeof p.toString=="function"&&typeof h.toString=="function")return p.toString()===h.toString();if(y=Object.keys(p),x=y.length,x!==Object.keys(h).length)return!1;for(m=x;m--!==0;)if(!Object.prototype.hasOwnProperty.call(h,y[m]))return!1;if(e&&p instanceof Element)return!1;for(m=x;m--!==0;)if(!((y[m]==="_owner"||y[m]==="__v"||y[m]==="__o")&&p.$$typeof)&&!u(p[y[m]],h[y[m]]))return!1;return!0}return p!==p&&h!==h}return Kp=function(h,x){try{return u(h,x)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},Kp}var w8=v8();const S8=Qc(w8);var Zp,Fy;function C8(){if(Fy)return Zp;Fy=1;var e=function(n,a,l,u,p,h,x,m){if(!n){var y;if(a===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=[l,u,p,h,x,m],S=0;y=new Error(a.replace(/%s/g,function(){return v[S++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}};return Zp=e,Zp}var k8=C8();const Hy=Qc(k8);var Jp,Vy;function _8(){return Vy||(Vy=1,Jp=function(n,a,l,u){var p=l?l.call(u,n,a):void 0;if(p!==void 0)return!!p;if(n===a)return!0;if(typeof n!="object"||!n||typeof a!="object"||!a)return!1;var h=Object.keys(n),x=Object.keys(a);if(h.length!==x.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(a),y=0;y<h.length;y++){var v=h[y];if(!m(v))return!1;var S=n[v],_=a[v];if(p=l?l.call(u,S,_,v):void 0,p===!1||p===void 0&&S!==_)return!1}return!0}),Jp}var A8=_8();const z8=Qc(A8);var d5=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(d5||{}),eg={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Uy=Object.values(d5),F0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},R8=Object.entries(F0).reduce((e,[n,a])=>(e[a]=n,e),{}),ki="data-rh",Us={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},qs=(e,n)=>{for(let a=e.length-1;a>=0;a-=1){const l=e[a];if(Object.prototype.hasOwnProperty.call(l,n))return l[n]}return null},E8=e=>{let n=qs(e,"title");const a=qs(e,Us.TITLE_TEMPLATE);if(Array.isArray(n)&&(n=n.join("")),a&&n)return a.replace(/%s/g,()=>n);const l=qs(e,Us.DEFAULT_TITLE);return n||l||void 0},T8=e=>qs(e,Us.ON_CHANGE_CLIENT_STATE)||(()=>{}),tg=(e,n)=>n.filter(a=>typeof a[e]!="undefined").map(a=>a[e]).reduce((a,l)=>q(q({},a),l),{}),M8=(e,n)=>n.filter(a=>typeof a.base!="undefined").map(a=>a.base).reverse().reduce((a,l)=>{if(!a.length){const u=Object.keys(l);for(let p=0;p<u.length;p+=1){const x=u[p].toLowerCase();if(e.indexOf(x)!==-1&&l[x])return a.concat(l)}}return a},[]),D8=e=>console&&typeof console.warn=="function"&&console.warn(e),sc=(e,n,a)=>{const l={};return a.filter(u=>Array.isArray(u[e])?!0:(typeof u[e]!="undefined"&&D8(`Helmet: ${e} should be of type "Array". Instead found type "${typeof u[e]}"`),!1)).map(u=>u[e]).reverse().reduce((u,p)=>{const h={};p.filter(m=>{let y;const v=Object.keys(m);for(let _=0;_<v.length;_+=1){const k=v[_],E=k.toLowerCase();n.indexOf(E)!==-1&&!(y==="rel"&&m[y].toLowerCase()==="canonical")&&!(E==="rel"&&m[E].toLowerCase()==="stylesheet")&&(y=E),n.indexOf(k)!==-1&&(k==="innerHTML"||k==="cssText"||k==="itemprop")&&(y=k)}if(!y||!m[y])return!1;const S=m[y].toLowerCase();return l[y]||(l[y]={}),h[y]||(h[y]={}),l[y][S]?!1:(h[y][S]=!0,!0)}).reverse().forEach(m=>u.push(m));const x=Object.keys(h);for(let m=0;m<x.length;m+=1){const y=x[m],v=q(q({},l[y]),h[y]);l[y]=v}return u},[]).reverse()},I8=(e,n)=>{if(Array.isArray(e)&&e.length){for(let a=0;a<e.length;a+=1)if(e[a][n])return!0}return!1},W8=e=>({baseTag:M8(["href"],e),bodyAttributes:tg("bodyAttributes",e),defer:qs(e,Us.DEFER),encode:qs(e,Us.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:tg("htmlAttributes",e),linkTags:sc("link",["rel","href"],e),metaTags:sc("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:sc("noscript",["innerHTML"],e),onChangeClientState:T8(e),scriptTags:sc("script",["src","innerHTML"],e),styleTags:sc("style",["cssText"],e),title:E8(e),titleAttributes:tg("titleAttributes",e),prioritizeSeoTags:I8(e,Us.PRIORITIZE_SEO_TAGS)}),u5=e=>Array.isArray(e)?e.join(""):e,$8=(e,n)=>{const a=Object.keys(e);for(let l=0;l<a.length;l+=1)if(n[a[l]]&&n[a[l]].includes(e[a[l]]))return!0;return!1},rg=(e,n)=>Array.isArray(e)?e.reduce((a,l)=>($8(l,n)?a.priority.push(l):a.default.push(l),a),{priority:[],default:[]}):{default:e,priority:[]},qy=(e,n)=>ae(q({},e),{[n]:void 0}),O8=["noscript","script","style"],Gg=(e,n=!0)=>n===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),h5=e=>Object.keys(e).reduce((n,a)=>{const l=typeof e[a]!="undefined"?`${a}="${e[a]}"`:`${a}`;return n?`${n} ${l}`:l},""),L8=(e,n,a,l)=>{const u=h5(a),p=u5(n);return u?`<${e} ${ki}="true" ${u}>${Gg(p,l)}</${e}>`:`<${e} ${ki}="true">${Gg(p,l)}</${e}>`},B8=(e,n,a=!0)=>n.reduce((l,u)=>{const p=u,h=Object.keys(p).filter(y=>!(y==="innerHTML"||y==="cssText")).reduce((y,v)=>{const S=typeof p[v]=="undefined"?v:`${v}="${Gg(p[v],a)}"`;return y?`${y} ${S}`:S},""),x=p.innerHTML||p.cssText||"",m=O8.indexOf(e)===-1;return`${l}<${e} ${ki}="true" ${h}${m?"/>":`>${x}</${e}>`}`},""),f5=(e,n={})=>Object.keys(e).reduce((a,l)=>{const u=F0[l];return a[u||l]=e[l],a},n),P8=(e,n,a)=>{const l={key:n,[ki]:!0},u=f5(a,l);return[ut.createElement("title",u,n)]},Bu=(e,n)=>n.map((a,l)=>{const u={key:l,[ki]:!0};return Object.keys(a).forEach(p=>{const x=F0[p]||p;if(x==="innerHTML"||x==="cssText"){const m=a.innerHTML||a.cssText;u.dangerouslySetInnerHTML={__html:m}}else u[x]=a[p]}),ut.createElement(e,u)}),oi=(e,n,a=!0)=>{switch(e){case"title":return{toComponent:()=>P8(e,n.title,n.titleAttributes),toString:()=>L8(e,n.title,n.titleAttributes,a)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>f5(n),toString:()=>h5(n)};default:return{toComponent:()=>Bu(e,n),toString:()=>B8(e,n,a)}}},j8=({metaTags:e,linkTags:n,scriptTags:a,encode:l})=>{const u=rg(e,eg.meta),p=rg(n,eg.link),h=rg(a,eg.script);return{priorityMethods:{toComponent:()=>[...Bu("meta",u.priority),...Bu("link",p.priority),...Bu("script",h.priority)],toString:()=>`${oi("meta",u.priority,l)} ${oi("link",p.priority,l)} ${oi("script",h.priority,l)}`},metaTags:u.default,linkTags:p.default,scriptTags:h.default}},N8=e=>{const{baseTag:n,bodyAttributes:a,encode:l=!0,htmlAttributes:u,noscriptTags:p,styleTags:h,title:x="",titleAttributes:m,prioritizeSeoTags:y}=e;let{linkTags:v,metaTags:S,scriptTags:_}=e,k={toComponent:()=>{},toString:()=>""};return y&&({priorityMethods:k,linkTags:v,metaTags:S,scriptTags:_}=j8(e)),{priority:k,base:oi("base",n,l),bodyAttributes:oi("bodyAttributes",a,l),htmlAttributes:oi("htmlAttributes",u,l),link:oi("link",v,l),meta:oi("meta",S,l),noscript:oi("noscript",p,l),script:oi("script",_,l),style:oi("style",h,l),title:oi("title",{title:x,titleAttributes:m},l)}},Xg=N8,mu=[],p5=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Kg=class{constructor(e,n){ri(this,"instances",[]);ri(this,"canUseDOM",p5);ri(this,"context");ri(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?mu:this.instances,add:e=>{(this.canUseDOM?mu:this.instances).push(e)},remove:e=>{const n=(this.canUseDOM?mu:this.instances).indexOf(e);(this.canUseDOM?mu:this.instances).splice(n,1)}}});this.context=e,this.canUseDOM=n||!1,n||(e.helmet=Xg({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},F8={},g5=ut.createContext(F8),Mo,H0=(Mo=class extends w.Component{constructor(a){super(a);ri(this,"helmetData");this.helmetData=new Kg(this.props.context||{},Mo.canUseDOM)}render(){return ut.createElement(g5.Provider,{value:this.helmetData.value},this.props.children)}},ri(Mo,"canUseDOM",p5),Mo),Rs=(e,n)=>{const a=document.head||document.querySelector("head"),l=a.querySelectorAll(`${e}[${ki}]`),u=[].slice.call(l),p=[];let h;return n&&n.length&&n.forEach(x=>{const m=document.createElement(e);for(const y in x)if(Object.prototype.hasOwnProperty.call(x,y))if(y==="innerHTML")m.innerHTML=x.innerHTML;else if(y==="cssText")m.styleSheet?m.styleSheet.cssText=x.cssText:m.appendChild(document.createTextNode(x.cssText));else{const v=y,S=typeof x[v]=="undefined"?"":x[v];m.setAttribute(y,S)}m.setAttribute(ki,"true"),u.some((y,v)=>(h=v,m.isEqualNode(y)))?u.splice(h,1):p.push(m)}),u.forEach(x=>{var m;return(m=x.parentNode)==null?void 0:m.removeChild(x)}),p.forEach(x=>a.appendChild(x)),{oldTags:u,newTags:p}},Zg=(e,n)=>{const a=document.getElementsByTagName(e)[0];if(!a)return;const l=a.getAttribute(ki),u=l?l.split(","):[],p=[...u],h=Object.keys(n);for(const x of h){const m=n[x]||"";a.getAttribute(x)!==m&&a.setAttribute(x,m),u.indexOf(x)===-1&&u.push(x);const y=p.indexOf(x);y!==-1&&p.splice(y,1)}for(let x=p.length-1;x>=0;x-=1)a.removeAttribute(p[x]);u.length===p.length?a.removeAttribute(ki):a.getAttribute(ki)!==h.join(",")&&a.setAttribute(ki,h.join(","))},H8=(e,n)=>{typeof e!="undefined"&&document.title!==e&&(document.title=u5(e)),Zg("title",n)},Yy=(e,n)=>{const{baseTag:a,bodyAttributes:l,htmlAttributes:u,linkTags:p,metaTags:h,noscriptTags:x,onChangeClientState:m,scriptTags:y,styleTags:v,title:S,titleAttributes:_}=e;Zg("body",l),Zg("html",u),H8(S,_);const k={baseTag:Rs("base",a),linkTags:Rs("link",p),metaTags:Rs("meta",h),noscriptTags:Rs("noscript",x),scriptTags:Rs("script",y),styleTags:Rs("style",v)},E={},R={};Object.keys(k).forEach(W=>{const{newTags:T,oldTags:z}=k[W];T.length&&(E[W]=T),z.length&&(R[W]=k[W].oldTags)}),n&&n(),m(e,E,R)},lc=null,V8=e=>{lc&&cancelAnimationFrame(lc),e.defer?lc=requestAnimationFrame(()=>{Yy(e,()=>{lc=null})}):(Yy(e),lc=null)},U8=V8,Qy=class extends w.Component{constructor(){super(...arguments);ri(this,"rendered",!1)}shouldComponentUpdate(n){return!z8(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:a}=this.props.context;let l=null;const u=W8(n.get().map(p=>{const h=q({},p.props);return delete h.context,h}));H0.canUseDOM?U8(u):Xg&&(l=Xg(u)),a(l)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},Ng,q8=(Ng=class extends w.Component{shouldComponentUpdate(e){return!S8(qy(this.props,"helmetData"),qy(e,"helmetData"))}mapNestedChildrenToProps(e,n){if(!n)return null;switch(e.type){case"script":case"noscript":return{innerHTML:n};case"style":return{cssText:n};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,n,a,l){return ae(q({},n),{[e.type]:[...n[e.type]||[],q(q({},a),this.mapNestedChildrenToProps(e,l))]})}mapObjectTypeChildren(e,n,a,l){switch(e.type){case"title":return ae(q({},n),{[e.type]:l,titleAttributes:q({},a)});case"body":return ae(q({},n),{bodyAttributes:q({},a)});case"html":return ae(q({},n),{htmlAttributes:q({},a)});default:return ae(q({},n),{[e.type]:q({},a)})}}mapArrayTypeChildrenToProps(e,n){let a=q({},n);return Object.keys(e).forEach(l=>{a=ae(q({},a),{[l]:e[l]})}),a}warnOnInvalidChildren(e,n){return Hy(Uy.some(a=>e.type===a),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Uy.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),Hy(!n||typeof n=="string"||Array.isArray(n)&&!n.some(a=>typeof a!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,n){let a={};return ut.Children.forEach(e,l=>{if(!l||!l.props)return;const m=l.props,{children:u}=m,p=un(m,["children"]),h=Object.keys(p).reduce((y,v)=>(y[R8[v]||v]=p[v],y),{});let{type:x}=l;switch(typeof x=="symbol"?x=x.toString():this.warnOnInvalidChildren(l,u),x){case"Symbol(react.fragment)":n=this.mapChildrenToProps(u,n);break;case"link":case"meta":case"noscript":case"script":case"style":a=this.flattenArrayTypeChildren(l,a,h,u);break;default:n=this.mapObjectTypeChildren(l,n,h,u);break}}),this.mapArrayTypeChildrenToProps(a,n)}render(){const u=this.props,{children:e}=u,n=un(u,["children"]);let a=q({},n),{helmetData:l}=n;if(e&&(a=this.mapChildrenToProps(e,a)),l&&!(l instanceof Kg)){const p=l;l=new Kg(p.context,!0),delete a.helmetData}return l?ut.createElement(Qy,ae(q({},a),{context:l.value})):ut.createElement(g5.Consumer,null,p=>ut.createElement(Qy,ae(q({},a),{context:p})))}},ri(Ng,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Ng),xu={exports:{}};/*!
 * CSSJanus. https://www.mediawiki.org/wiki/CSSJanus
 *
 * Copyright 2014 Trevor Parscal
 * Copyright 2010 Roan Kattouw
 * Copyright 2008 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gy;function Y8(){return Gy||(Gy=1,function(e,n){var a;function l(p,h){var x=[],m=0;function y(S){return x.push(S),h}function v(){return x[m++]}return{tokenize:function(S){return S.replace(p,y)},detokenize:function(S){return S.replace(new RegExp("("+h+")","g"),v)}}}function u(){var p="`TMP`",h="`TMPLTR`",x="`TMPRTL`",m="`NOFLIP_SINGLE`",y="`NOFLIP_CLASS`",v="`COMMENT`",S="[^\\u0020-\\u007e]",_="(?:(?:\\\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)",k="(?:[0-9]*\\.[0-9]+|[0-9]+)",E="(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)",R="direction\\s*:\\s*",W="[!#$%&*-~]",T=`['"]?\\s*`,z="(^|[^a-zA-Z])",N="[^\\}]*?",G="\\/\\*\\!?\\s*@noflip\\s*\\*\\/",J="\\/\\*[^*]*\\*+([^\\/*][^*]*\\*+)*\\/",H="(?:"+_+"|\\\\[^\\r\\n\\f0-9a-f])",U="(?:[_a-z]|"+S+"|"+H+")",A="(?:[_a-z0-9-]|"+S+"|"+H+")",V="-?"+U+A+"*",Y=k+"(?:\\s*"+E+"|"+V+")?",P="((?:-?"+Y+")|(?:inherit|auto))",I="(?:-?"+k+"(?:\\s*"+E+")?)",B="(?:\\+|\\-|\\*|\\/)",F="(?:\\(|\\)|\\t| )",Q="(?:"+F+"|"+I+"|"+B+"){3,}",M="(?:calc\\((?:"+Q+")\\))",O="((?:-?"+Y+")|(?:inherit|auto)|"+M+")",C="((?:margin|padding|border-width)\\s*:\\s*)",X="((?:-color|border-style)\\s*:\\s*)",Z="(#?"+A+"+|(?:rgba?|hsla?)\\([ \\d.,%-]+\\))",j="(?:"+W+"|"+S+"|"+H+")*?",re="(?![a-zA-Z])",de="(?!("+A+`|\\r?\\n|\\s|#|\\:|\\.|\\,|\\+|>|~|\\(|\\)|\\[|\\]|=|\\*=|~=|\\^=|'[^']*'|"[^"]*"|`+v+")*?{)",fe="(?!"+j+T+"\\))",ce="(?="+j+T+"\\))",ie="(\\s*(?:!important\\s*)?[;}])",ge=/`TMP`/g,Ae=/`TMPLTR`/g,tt=/`TMPRTL`/g,yt=new RegExp(J,"gi"),wr=new RegExp("("+G+de+"[^;}]+;?)","gi"),fr=new RegExp("("+G+N+"})","gi"),ln=new RegExp("("+R+")ltr","gi"),Le=new RegExp("("+R+")rtl","gi"),Tt=new RegExp(z+"(left)"+re+fe+de,"gi"),or=new RegExp(z+"(right)"+re+fe+de,"gi"),De=new RegExp(z+"(left)"+ce,"gi"),Ut=new RegExp(z+"(right)"+ce,"gi"),Mn=/(:dir\( *)ltr( *\))/g,Dn=/(:dir\( *)rtl( *\))/g,cn=new RegExp(z+"(ltr)"+ce,"gi"),gi=new RegExp(z+"(rtl)"+ce,"gi"),pn=new RegExp(z+"([ns]?)e-resize","gi"),Ei=new RegExp(z+"([ns]?)w-resize","gi"),Ti=new RegExp(C+O+"(\\s+)"+O+"(\\s+)"+O+"(\\s+)"+O+ie,"gi"),yn=new RegExp(X+Z+"(\\s+)"+Z+"(\\s+)"+Z+"(\\s+)"+Z+ie,"gi"),Ie=new RegExp("(background(?:-position)?\\s*:\\s*(?:[^:;}\\s]+\\s+)*?)("+Y+")","gi"),Ve=new RegExp("(background-position-x\\s*:\\s*)(-?"+k+"%)","gi"),Se=new RegExp("(border-radius\\s*:\\s*)"+P+"(?:(?:\\s+"+P+")(?:\\s+"+P+")?(?:\\s+"+P+")?)?(?:(?:(?:\\s*\\/\\s*)"+P+")(?:\\s+"+P+")?(?:\\s+"+P+")?(?:\\s+"+P+")?)?"+ie,"gi"),pt=new RegExp("(box-shadow\\s*:\\s*(?:inset\\s*)?)"+P,"gi"),Zt=new RegExp("(text-shadow\\s*:\\s*)"+P+"(\\s*)"+Z,"gi"),ne=new RegExp("(text-shadow\\s*:\\s*)"+Z+"(\\s*)"+P,"gi"),$e=new RegExp("(text-shadow\\s*:\\s*)"+P,"gi"),Oe=new RegExp("(transform\\s*:[^;}]*)(translateX\\s*\\(\\s*)"+P+"(\\s*\\))","gi"),je=new RegExp("(transform\\s*:[^;}]*)(translate\\s*\\(\\s*)"+P+"((?:\\s*,\\s*"+P+"){0,2}\\s*\\))","gi");function Ze(Te,Ue,ct){var Pe,Sr;return ct.slice(-1)==="%"&&(Pe=ct.indexOf("."),Pe!==-1?(Sr=ct.length-Pe-2,ct=100-parseFloat(ct),ct=ct.toFixed(Sr)+"%"):ct=100-parseFloat(ct)+"%"),Ue+ct}function Fe(Te){switch(Te.length){case 4:Te=[Te[1],Te[0],Te[3],Te[2]];break;case 3:Te=[Te[1],Te[0],Te[1],Te[2]];break;case 2:Te=[Te[1],Te[0]];break;case 1:Te=[Te[0]];break}return Te.join(" ")}function ke(Te,Ue){var ct,Pe=[].slice.call(arguments),Sr=Pe.slice(2,6).filter(function(Gr){return Gr}),Mi=Pe.slice(6,10).filter(function(Gr){return Gr}),va=Pe[10]||"";return Mi.length?ct=Fe(Sr)+" / "+Fe(Mi):ct=Fe(Sr),Ue+ct+va}function lt(Te){return parseFloat(Te)===0?Te:Te[0]==="-"?Te.slice(1):"-"+Te}function Ye(Te,Ue,ct){return Ue+lt(ct)}function It(Te,Ue,ct,Pe,Sr){return Ue+ct+lt(Pe)+Sr}function tr(Te,Ue,ct,Pe,Sr){return Ue+ct+Pe+lt(Sr)}return{transform:function(Te,Ue){var ct=new l(wr,m),Pe=new l(fr,y),Sr=new l(yt,v);return Te=Sr.tokenize(Pe.tokenize(ct.tokenize(Te.replace("`","%60")))),Ue.transformDirInUrl&&(Te=Te.replace(Mn,"$1"+h+"$2").replace(Dn,"$1"+x+"$2").replace(cn,"$1"+p).replace(gi,"$1ltr").replace(ge,"rtl").replace(Ae,"ltr").replace(tt,"rtl")),Ue.transformEdgeInUrl&&(Te=Te.replace(De,"$1"+p).replace(Ut,"$1left").replace(ge,"right")),Te=Te.replace(ln,"$1"+p).replace(Le,"$1ltr").replace(ge,"rtl").replace(Tt,"$1"+p).replace(or,"$1left").replace(ge,"right").replace(pn,"$1$2"+p).replace(Ei,"$1$2e-resize").replace(ge,"w-resize").replace(Se,ke).replace(pt,Ye).replace(Zt,tr).replace(ne,tr).replace($e,Ye).replace(Oe,It).replace(je,It).replace(Ti,"$1$2$3$8$5$6$7$4$9").replace(yn,"$1$2$3$8$5$6$7$4$9").replace(Ie,Ze).replace(Ve,Ze),Te=ct.detokenize(Pe.detokenize(Sr.detokenize(Te))),Te}}}a=new u,e.exports?n.transform=function(p,h,x){var m;return typeof h=="object"?m=h:(m={},typeof h=="boolean"&&(m.transformDirInUrl=h),typeof x=="boolean"&&(m.transformEdgeInUrl=x)),a.transform(p,m)}:typeof window!="undefined"&&(window.cssjanus=a)}(xu,xu.exports)),xu.exports}var Q8=Y8();const G8=Qc(Q8);function m5(e,n,a){switch(e.type){case L6:case O6:case Ty:return e.return=e.return||e.value;case Qg:e.value=Array.isArray(e.props)?e.props.join(","):e.props,Array.isArray(e.children)&&e.children.forEach(function(u){u.type===Ty&&(u.children=u.value)})}var l=B6(Array.prototype.concat(e.children),m5);return P6(l)?e.return=e.value+"{"+l+"}":""}function x5(e,n,a,l){if(e.type===D6||e.type===I6||e.type===Qg&&(!e.parent||e.parent.type===W6||e.parent.type===Qg)){var u=G8.transform(m5(e));e.children=u?$6(u)[0].children:[],e.return=""}}Object.defineProperty(x5,"name",{value:"stylisRTLPlugin"});function b5(e){var n,a,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(a=b5(e[n]))&&(l&&(l+=" "),l+=a);else for(n in e)e[n]&&(l&&(l+=" "),l+=n);return l}function Uo(){for(var e,n,a=0,l="";a<arguments.length;)(e=arguments[a++])&&(n=b5(e))&&(l&&(l+=" "),l+=n);return l}let X8={data:""},K8=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||X8,Z8=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,J8=/\/\*[^]*?\*\/|  +/g,Xy=/\n+/g,Ao=(e,n)=>{let a="",l="",u="";for(let p in e){let h=e[p];p[0]=="@"?p[1]=="i"?a=p+" "+h+";":l+=p[1]=="f"?Ao(h,p):p+"{"+Ao(h,p[1]=="k"?"":n)+"}":typeof h=="object"?l+=Ao(h,n?n.replace(/([^,])+/g,x=>p.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,x):x?x+" "+m:m)):p):h!=null&&(p=/^--/.test(p)?p:p.replace(/[A-Z]/g,"-$&").toLowerCase(),u+=Ao.p?Ao.p(p,h):p+":"+h+";")}return a+(n&&u?n+"{"+u+"}":u)+l},la={},y5=e=>{if(typeof e=="object"){let n="";for(let a in e)n+=a+y5(e[a]);return n}return e},e4=(e,n,a,l,u)=>{let p=y5(e),h=la[p]||(la[p]=(m=>{let y=0,v=11;for(;y<m.length;)v=101*v+m.charCodeAt(y++)>>>0;return"go"+v})(p));if(!la[h]){let m=p!==e?e:(y=>{let v,S,_=[{}];for(;v=Z8.exec(y.replace(J8,""));)v[4]?_.shift():v[3]?(S=v[3].replace(Xy," ").trim(),_.unshift(_[0][S]=_[0][S]||{})):_[0][v[1]]=v[2].replace(Xy," ").trim();return _[0]})(e);la[h]=Ao(u?{["@keyframes "+h]:m}:m,a?"":"."+h)}let x=a&&la.g?la.g:null;return a&&(la.g=la[h]),((m,y,v,S)=>{S?y.data=y.data.replace(S,m):y.data.indexOf(m)===-1&&(y.data=v?m+y.data:y.data+m)})(la[h],n,l,x),h},t4=(e,n,a)=>e.reduce((l,u,p)=>{let h=n[p];if(h&&h.call){let x=h(a),m=x&&x.props&&x.props.className||/^go/.test(x)&&x;h=m?"."+m:x&&typeof x=="object"?x.props?"":Ao(x,""):x===!1?"":x}return l+u+(h==null?"":h)},"");function V0(e){let n=this||{},a=e.call?e(n.p):e;return e4(a.unshift?a.raw?t4(a,[].slice.call(arguments,1),n.p):a.reduce((l,u)=>Object.assign(l,u&&u.call?u(n.p):u),{}):a,K8(n.target),n.g,n.o,n.k)}V0.bind({g:1});V0.bind({k:1});function r4(e,n){for(var a=0;a<n.length;a++){var l=n[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function v5(e,n,a){return n&&r4(e.prototype,n),e}function Ht(){return Ht=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},Ht.apply(this,arguments)}function w5(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}function Xc(e,n){if(e==null)return{};var a={},l=Object.keys(e),u,p;for(p=0;p<l.length;p++)u=l[p],!(n.indexOf(u)>=0)&&(a[u]=e[u]);return a}function Ky(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Zy=function(){return""},n4=ut.createContext({enqueueSnackbar:Zy,closeSnackbar:Zy}),Co={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},Jy=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},U0=function(n){return""+Jy(n.vertical)+Jy(n.horizontal)},bu=function(n){return!!n||n===0},yu="unmounted",Es="exited",Ts="entering",cc="entered",e2="exiting",q0=function(e){w5(n,e);function n(l){var u;u=e.call(this,l)||this;var p=l.appear,h;return u.appearStatus=null,l.in?p?(h=Es,u.appearStatus=Ts):h=cc:l.unmountOnExit||l.mountOnEnter?h=yu:h=Es,u.state={status:h},u.nextCallback=null,u}n.getDerivedStateFromProps=function(u,p){var h=u.in;return h&&p.status===yu?{status:Es}:null};var a=n.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(u){var p=null;if(u!==this.props){var h=this.state.status;this.props.in?h!==Ts&&h!==cc&&(p=Ts):(h===Ts||h===cc)&&(p=e2)}this.updateStatus(!1,p)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var u=this.props.timeout,p=u,h=u;return u!=null&&typeof u!="number"&&typeof u!="string"&&(h=u.exit,p=u.enter),{exit:h,enter:p}},a.updateStatus=function(u,p){u===void 0&&(u=!1),p!==null?(this.cancelNextCallback(),p===Ts?this.performEnter(u):this.performExit()):this.props.unmountOnExit&&this.state.status===Es&&this.setState({status:yu})},a.performEnter=function(u){var p=this,h=this.props.enter,x=u,m=this.getTimeouts();if(!u&&!h){this.safeSetState({status:cc},function(){p.props.onEntered&&p.props.onEntered(p.node,x)});return}this.props.onEnter&&this.props.onEnter(this.node,x),this.safeSetState({status:Ts},function(){p.props.onEntering&&p.props.onEntering(p.node,x),p.onTransitionEnd(m.enter,function(){p.safeSetState({status:cc},function(){p.props.onEntered&&p.props.onEntered(p.node,x)})})})},a.performExit=function(){var u=this,p=this.props.exit,h=this.getTimeouts();if(!p){this.safeSetState({status:Es},function(){u.props.onExited&&u.props.onExited(u.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:e2},function(){u.props.onExiting&&u.props.onExiting(u.node),u.onTransitionEnd(h.exit,function(){u.safeSetState({status:Es},function(){u.props.onExited&&u.props.onExited(u.node)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(u,p){p=this.setNextCallback(p),this.setState(u,p)},a.setNextCallback=function(u){var p=this,h=!0;return this.nextCallback=function(){h&&(h=!1,p.nextCallback=null,u())},this.nextCallback.cancel=function(){h=!1},this.nextCallback},a.onTransitionEnd=function(u,p){this.setNextCallback(p);var h=u==null&&!this.props.addEndListener;if(!this.node||h){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),u!=null&&setTimeout(this.nextCallback,u)},a.render=function(){var u=this.state.status;if(u===yu)return null;var p=this.props,h=p.children,x=Xc(p,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return h(u,x)},v5(n,[{key:"node",get:function(){var u,p=(u=this.props.nodeRef)===null||u===void 0?void 0:u.current;if(!p)throw new Error("notistack - Custom snackbar is not refForwarding");return p}}]),n}(ut.Component);function Ms(){}q0.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ms,onEntering:Ms,onEntered:Ms,onExit:Ms,onExiting:Ms,onExited:Ms};function t2(e,n){typeof e=="function"?e(n):e&&(e.current=n)}function Jg(e,n){return w.useMemo(function(){return e==null&&n==null?null:function(a){t2(e,a),t2(n,a)}},[e,n])}function Zu(e){var n=e.timeout,a=e.style,l=a===void 0?{}:a,u=e.mode;return{duration:typeof n=="object"?n[u]||0:n,easing:l.transitionTimingFunction,delay:l.transitionDelay}}var e0={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},S5=function(n){n.scrollTop=n.scrollTop},r2=function(n){return Math.round(n)+"ms"};function Ps(e,n){e===void 0&&(e=["all"]);var a=n||{},l=a.duration,u=l===void 0?300:l,p=a.easing,h=p===void 0?e0.easeInOut:p,x=a.delay,m=x===void 0?0:x,y=Array.isArray(e)?e:[e];return y.map(function(v){var S=typeof u=="string"?u:r2(u),_=typeof m=="string"?m:r2(m);return v+" "+S+" "+h+" "+_}).join(",")}function i4(e){return e&&e.ownerDocument||document}function C5(e){var n=i4(e);return n.defaultView||window}function a4(e,n){n===void 0&&(n=166);var a;function l(){for(var u=this,p=arguments.length,h=new Array(p),x=0;x<p;x++)h[x]=arguments[x];var m=function(){e.apply(u,h)};clearTimeout(a),a=setTimeout(m,n)}return l.clear=function(){clearTimeout(a)},l}function o4(e,n){var a=n.getBoundingClientRect(),l=C5(n),u;if(n.fakeTransform)u=n.fakeTransform;else{var p=l.getComputedStyle(n);u=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}var h=0,x=0;if(u&&u!=="none"&&typeof u=="string"){var m=u.split("(")[1].split(")")[0].split(",");h=parseInt(m[4],10),x=parseInt(m[5],10)}switch(e){case"left":return"translateX("+(l.innerWidth+h-a.left)+"px)";case"right":return"translateX(-"+(a.left+a.width-h)+"px)";case"up":return"translateY("+(l.innerHeight+x-a.top)+"px)";default:return"translateY(-"+(a.top+a.height-x)+"px)"}}function vu(e,n){if(n){var a=o4(e,n);a&&(n.style.webkitTransform=a,n.style.transform=a)}}var k5=w.forwardRef(function(e,n){var a=e.children,l=e.direction,u=l===void 0?"down":l,p=e.in,h=e.style,x=e.timeout,m=x===void 0?0:x,y=e.onEnter,v=e.onEntered,S=e.onExit,_=e.onExited,k=Xc(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),E=w.useRef(null),R=Jg(a.ref,E),W=Jg(R,n),T=function(U,A){vu(u,U),S5(U),y&&y(U,A)},z=function(U){var A=(h==null?void 0:h.transitionTimingFunction)||e0.easeOut,V=Zu({timeout:m,mode:"enter",style:Ht({},h,{transitionTimingFunction:A})});U.style.webkitTransition=Ps("-webkit-transform",V),U.style.transition=Ps("transform",V),U.style.webkitTransform="none",U.style.transform="none"},N=function(U){var A=(h==null?void 0:h.transitionTimingFunction)||e0.sharp,V=Zu({timeout:m,mode:"exit",style:Ht({},h,{transitionTimingFunction:A})});U.style.webkitTransition=Ps("-webkit-transform",V),U.style.transition=Ps("transform",V),vu(u,U),S&&S(U)},G=function(U){U.style.webkitTransition="",U.style.transition="",_&&_(U)},J=w.useCallback(function(){E.current&&vu(u,E.current)},[u]);return w.useEffect(function(){if(!(p||u==="down"||u==="right")){var H=a4(function(){E.current&&vu(u,E.current)}),U=C5(E.current);return U.addEventListener("resize",H),function(){H.clear(),U.removeEventListener("resize",H)}}},[u,p]),w.useEffect(function(){p||J()},[p,J]),w.createElement(q0,Object.assign({appear:!0,nodeRef:E,onEnter:T,onEntered:v,onEntering:z,onExit:N,onExited:G,in:p,timeout:m},k),function(H,U){return w.cloneElement(a,Ht({ref:W,style:Ht({visibility:H==="exited"&&!p?"hidden":void 0},h,{},a.props.style)},U))})});k5.displayName="Slide";var vh=function(n){return ut.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},n))},s4=function(){return ut.createElement(vh,null,ut.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},l4=function(){return ut.createElement(vh,null,ut.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},c4=function(){return ut.createElement(vh,null,ut.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},d4=function(){return ut.createElement(vh,null,ut.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},u4={default:void 0,success:ut.createElement(s4,null),warning:ut.createElement(l4,null),error:ut.createElement(c4,null),info:ut.createElement(d4,null)},Io={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:u4,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:k5,transitionDuration:{enter:225,exit:195}},h4=function(n,a){var l=function(p){return typeof p=="number"||p===null};return l(n)?n:l(a)?a:Io.autoHideDuration},f4=function(n,a){var l=function(p,h){return h.some(function(x){return typeof p===x})};return l(n,["string","number"])?n:l(n,["object"])?Ht({},Io.transitionDuration,{},l(a,["object"])&&a,{},n):l(a,["string","number"])?a:l(a,["object"])?Ht({},Io.transitionDuration,{},a):Io.transitionDuration},p4=function(n,a){return function(l,u){return u===void 0&&(u=!1),u?Ht({},Io[l],{},a[l],{},n[l]):l==="autoHideDuration"?h4(n.autoHideDuration,a.autoHideDuration):l==="transitionDuration"?f4(n.transitionDuration,a.transitionDuration):n[l]||a[l]||Io[l]}};function Kc(e){return Object.entries(e).reduce(function(n,a){var l,u=a[0],p=a[1];return Ht({},n,(l={},l[u]=V0(p),l))},{})}var Js={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(n){return"notistack-MuiContent-"+n}},n2=Kc({root:{height:0},entered:{height:"auto"}}),ng="0px",ig=175,_5=w.forwardRef(function(e,n){var a=e.children,l=e.in,u=e.onExited,p=w.useRef(null),h=w.useRef(null),x=Jg(n,h),m=function(){return p.current?p.current.clientHeight:0},y=function(R){R.style.height=ng},v=function(R){var W=m(),T=Zu({timeout:ig,mode:"enter"}),z=T.duration,N=T.easing;R.style.transitionDuration=typeof z=="string"?z:z+"ms",R.style.height=W+"px",R.style.transitionTimingFunction=N||""},S=function(R){R.style.height="auto"},_=function(R){R.style.height=m()+"px"},k=function(R){S5(R);var W=Zu({timeout:ig,mode:"exit"}),T=W.duration,z=W.easing;R.style.transitionDuration=typeof T=="string"?T:T+"ms",R.style.height=ng,R.style.transitionTimingFunction=z||""};return w.createElement(q0,{in:l,unmountOnExit:!0,onEnter:y,onEntered:S,onEntering:v,onExit:_,onExited:u,onExiting:k,nodeRef:h,timeout:ig},function(E,R){return w.createElement("div",Object.assign({ref:x,className:Uo(n2.root,E==="entered"&&n2.entered),style:Ht({pointerEvents:"all",overflow:"hidden",minHeight:ng,transition:Ps("height")},E==="entered"&&{overflow:"visible"},{},E==="exited"&&!l&&{visibility:"hidden"})},R),w.createElement("div",{ref:p,className:Js.CollapseWrapper,style:{display:"flex",width:"100%"}},a))})});_5.displayName="Collapse";var i2={right:"left",left:"right",bottom:"up",top:"down"},g4=function(n){return n.horizontal!=="center"?i2[n.horizontal]:i2[n.vertical]},m4=function(n){return"anchorOrigin"+U0(n)},x4=function(n){n===void 0&&(n={});var a={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(n).filter(function(l){return!a[l]}).reduce(function(l,u){var p;return Ht({},l,(p={},p[u]=n[u],p))},{})},b4=function(){};function kc(e,n){return e.reduce(function(a,l){return l==null?a:function(){for(var p=arguments.length,h=new Array(p),x=0;x<p;x++)h[x]=arguments[x];var m=[].concat(h);n&&m.indexOf(n)===-1&&m.push(n),a.apply(this,m),l.apply(this,m)}},b4)}var y4=typeof window!="undefined"?w.useLayoutEffect:w.useEffect;function a2(e){var n=w.useRef(e);return y4(function(){n.current=e}),w.useCallback(function(){return n.current.apply(void 0,arguments)},[])}var A5=w.forwardRef(function(e,n){var a=e.children,l=e.className,u=e.autoHideDuration,p=e.disableWindowBlurListener,h=p===void 0?!1:p,x=e.onClose,m=e.id,y=e.open,v=e.SnackbarProps,S=v===void 0?{}:v,_=w.useRef(),k=a2(function(){x&&x.apply(void 0,arguments)}),E=a2(function(N){!x||N==null||(_.current&&clearTimeout(_.current),_.current=setTimeout(function(){k(null,"timeout",m)},N))});w.useEffect(function(){return y&&E(u),function(){_.current&&clearTimeout(_.current)}},[y,u,E]);var R=function(){_.current&&clearTimeout(_.current)},W=w.useCallback(function(){u!=null&&E(u*.5)},[u,E]),T=function(G){S.onMouseEnter&&S.onMouseEnter(G),R()},z=function(G){S.onMouseLeave&&S.onMouseLeave(G),W()};return w.useEffect(function(){if(!h&&y)return window.addEventListener("focus",W),window.addEventListener("blur",R),function(){window.removeEventListener("focus",W),window.removeEventListener("blur",R)}},[h,W,y]),w.createElement("div",Object.assign({ref:n},S,{className:Uo(Js.Snackbar,l),onMouseEnter:T,onMouseLeave:z}),a)});A5.displayName="Snackbar";var ag,v4=Kc({root:(ag={display:"flex",flexWrap:"wrap",flexGrow:1},ag[Co.upSm]={flexGrow:"initial",minWidth:"288px"},ag)}),z5=w.forwardRef(function(e,n){var a=e.className,l=Xc(e,["className"]);return ut.createElement("div",Object.assign({ref:n,className:Uo(v4.root,a)},l))});z5.displayName="SnackbarContent";var dc=Kc({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),o2="notistack-snackbar",R5=w.forwardRef(function(e,n){var a=e.id,l=e.message,u=e.action,p=e.iconVariant,h=e.variant,x=e.hideIconVariant,m=e.style,y=e.className,v=p[h],S=u;return typeof S=="function"&&(S=S(a)),ut.createElement(z5,{ref:n,role:"alert","aria-describedby":o2,style:m,className:Uo(Js.MuiContent,Js.MuiContentVariant(h),dc.root,dc[h],y,!x&&v&&dc.lessPadding)},ut.createElement("div",{id:o2,className:dc.message},x?null:v,l),S&&ut.createElement("div",{className:dc.action},S))});R5.displayName="MaterialDesignContent";var w4=w.memo(R5),S4=Kc({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),C4=function(n){var a=w.useRef(),l=w.useState(!0),u=l[0],p=l[1],h=kc([n.snack.onClose,n.onClose]),x=function(){n.snack.requestClose&&h(null,"instructed",n.snack.id)},m=w.useCallback(function(){a.current=setTimeout(function(){p(function(V){return!V})},125)},[]);w.useEffect(function(){return function(){a.current&&clearTimeout(a.current)}},[]);var y=n.snack,v=n.classes,S=n.Component,_=S===void 0?w4:S,k=w.useMemo(function(){return x4(v)},[v]),E=y.open,R=y.SnackbarProps,W=y.TransitionComponent,T=y.TransitionProps,z=y.transitionDuration,N=y.disableWindowBlurListener,G=y.content,J=Xc(y,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),H=Ht({direction:g4(J.anchorOrigin),timeout:z},T),U=G;typeof U=="function"&&(U=U(J.id,J.message));var A=["onEnter","onEntered","onExit","onExited"].reduce(function(V,Y){var P;return Ht({},V,(P={},P[Y]=kc([n.snack[Y],n[Y]],J.id),P))},{});return ut.createElement(_5,{in:u,onExited:A.onExited},ut.createElement(A5,{open:E,id:J.id,disableWindowBlurListener:N,autoHideDuration:J.autoHideDuration,className:Uo(S4.wrappedRoot,k.root,k[m4(J.anchorOrigin)]),SnackbarProps:R,onClose:h},ut.createElement(W,Object.assign({},H,{appear:!0,in:E,onExit:A.onExit,onExited:m,onEnter:A.onEnter,onEntered:kc([A.onEntered,x],J.id)}),U||ut.createElement(_,Object.assign({},J)))))},uc,og,wu,Su,sg,ca={view:{default:20},snackbar:{default:6,dense:2}},s2="."+Js.CollapseWrapper,lg=16,Cu=Kc({root:(uc={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Ps(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},uc[s2]={padding:ca.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},uc.maxWidth="calc(100% - "+ca.view.default*2+"px)",uc[Co.downXs]={width:"100%",maxWidth:"calc(100% - "+lg*2+"px)"},uc),rootDense:(og={},og[s2]={padding:ca.snackbar.dense+"px 0px"},og),top:{top:ca.view.default-ca.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:ca.view.default-ca.snackbar.default+"px",flexDirection:"column-reverse"},left:(wu={left:ca.view.default+"px"},wu[Co.upSm]={alignItems:"flex-start"},wu[Co.downXs]={left:lg+"px"},wu),right:(Su={right:ca.view.default+"px"},Su[Co.upSm]={alignItems:"flex-end"},Su[Co.downXs]={right:lg+"px"},Su),center:(sg={left:"50%",transform:"translateX(-50%)"},sg[Co.upSm]={alignItems:"center"},sg)}),k4=function(n){var a=n.classes,l=a===void 0?{}:a,u=n.anchorOrigin,p=n.dense,h=n.children,x=Uo(Js.SnackbarContainer,Cu[u.vertical],Cu[u.horizontal],Cu.root,l.containerRoot,l["containerAnchorOrigin"+U0(u)],p&&Cu.rootDense);return ut.createElement("div",{className:x},h)},_4=w.memo(k4),l2=function(n){var a=typeof n=="string"||w.isValidElement(n);return!a},A4=function(e){w5(n,e);function n(l){var u;return u=e.call(this,l)||this,u.enqueueSnackbar=function(p,h){if(h===void 0&&(h={}),p==null)throw new Error("enqueueSnackbar called with invalid argument");var x=l2(p)?p:h,m=l2(p)?p.message:p,y=x.key,v=x.preventDuplicate,S=Xc(x,["key","preventDuplicate"]),_=bu(y),k=_?y:new Date().getTime()+Math.random(),E=p4(S,u.props),R=Ht({id:k},S,{message:m,open:!0,entered:!1,requestClose:!1,persist:E("persist"),action:E("action"),content:E("content"),variant:E("variant"),anchorOrigin:E("anchorOrigin"),disableWindowBlurListener:E("disableWindowBlurListener"),autoHideDuration:E("autoHideDuration"),hideIconVariant:E("hideIconVariant"),TransitionComponent:E("TransitionComponent"),transitionDuration:E("transitionDuration"),TransitionProps:E("TransitionProps",!0),iconVariant:E("iconVariant",!0),style:E("style",!0),SnackbarProps:E("SnackbarProps",!0),className:Uo(u.props.className,S.className)});return R.persist&&(R.autoHideDuration=void 0),u.setState(function(W){if(v===void 0&&u.props.preventDuplicate||v){var T=function(J){return _?J.id===k:J.message===m},z=W.queue.findIndex(T)>-1,N=W.snacks.findIndex(T)>-1;if(z||N)return W}return u.handleDisplaySnack(Ht({},W,{queue:[].concat(W.queue,[R])}))}),k},u.handleDisplaySnack=function(p){var h=p.snacks;return h.length>=u.maxSnack?u.handleDismissOldest(p):u.processQueue(p)},u.processQueue=function(p){var h=p.queue,x=p.snacks;return h.length>0?Ht({},p,{snacks:[].concat(x,[h[0]]),queue:h.slice(1,h.length)}):p},u.handleDismissOldest=function(p){if(p.snacks.some(function(v){return!v.open||v.requestClose}))return p;var h=!1,x=!1,m=p.snacks.reduce(function(v,S){return v+(S.open&&S.persist?1:0)},0);m===u.maxSnack&&(x=!0);var y=p.snacks.map(function(v){return!h&&(!v.persist||x)?(h=!0,v.entered?(v.onClose&&v.onClose(null,"maxsnack",v.id),u.props.onClose&&u.props.onClose(null,"maxsnack",v.id),Ht({},v,{open:!1})):Ht({},v,{requestClose:!0})):Ht({},v)});return Ht({},p,{snacks:y})},u.handleEnteredSnack=function(p,h,x){if(!bu(x))throw new Error("handleEnteredSnack Cannot be called with undefined key");u.setState(function(m){var y=m.snacks;return{snacks:y.map(function(v){return v.id===x?Ht({},v,{entered:!0}):Ht({},v)})}})},u.handleCloseSnack=function(p,h,x){u.props.onClose&&u.props.onClose(p,h,x);var m=x===void 0;u.setState(function(y){var v=y.snacks,S=y.queue;return{snacks:v.map(function(_){return!m&&_.id!==x?Ht({},_):_.entered?Ht({},_,{open:!1}):Ht({},_,{requestClose:!0})}),queue:S.filter(function(_){return _.id!==x})}})},u.closeSnackbar=function(p){var h=u.state.snacks.find(function(x){return x.id===p});bu(p)&&h&&h.onClose&&h.onClose(null,"instructed",p),u.handleCloseSnack(null,"instructed",p)},u.handleExitedSnack=function(p,h){if(!bu(h))throw new Error("handleExitedSnack Cannot be called with undefined key");u.setState(function(x){var m=u.processQueue(Ht({},x,{snacks:x.snacks.filter(function(y){return y.id!==h})}));return m.queue.length===0?m:u.handleDismissOldest(m)})},u.enqueueSnackbar,u.closeSnackbar,u.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:u.enqueueSnackbar.bind(Ky(u)),closeSnackbar:u.closeSnackbar.bind(Ky(u))}},u}var a=n.prototype;return a.render=function(){var u=this,p=this.state.contextValue,h=this.props,x=h.domRoot,m=h.children,y=h.dense,v=y===void 0?!1:y,S=h.Components,_=S===void 0?{}:S,k=h.classes,E=this.state.snacks.reduce(function(W,T){var z,N=U0(T.anchorOrigin),G=W[N]||[];return Ht({},W,(z={},z[N]=[].concat(G,[T]),z))},{}),R=Object.keys(E).map(function(W){var T=E[W],z=T[0];return ut.createElement(_4,{key:W,dense:v,anchorOrigin:z.anchorOrigin,classes:k},T.map(function(N){return ut.createElement(C4,{key:N.id,snack:N,classes:k,Component:_[N.variant],onClose:u.handleCloseSnack,onEnter:u.props.onEnter,onExit:u.props.onExit,onExited:kc([u.handleExitedSnack,u.props.onExited],N.id),onEntered:kc([u.handleEnteredSnack,u.props.onEntered],N.id)})}))});return ut.createElement(n4.Provider,{value:p},m,x?E6.createPortal(R,x):R)},v5(n,[{key:"maxSnack",get:function(){return this.props.maxSnack||Io.maxSnack}}]),n}(w.Component);function Jr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var z4=typeof Symbol=="function"&&Symbol.observable||"@@observable",c2=z4,cg=()=>Math.random().toString(36).substring(7).split("").join("."),R4={INIT:`@@redux/INIT${cg()}`,REPLACE:`@@redux/REPLACE${cg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cg()}`},Ju=R4;function Y0(e){if(typeof e!="object"||e===null)return!1;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n||Object.getPrototypeOf(e)===null}function E5(e,n,a){if(typeof e!="function")throw new Error(Jr(2));if(typeof n=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Jr(0));if(typeof n=="function"&&typeof a=="undefined"&&(a=n,n=void 0),typeof a!="undefined"){if(typeof a!="function")throw new Error(Jr(1));return a(E5)(e,n)}let l=e,u=n,p=new Map,h=p,x=0,m=!1;function y(){h===p&&(h=new Map,p.forEach((W,T)=>{h.set(T,W)}))}function v(){if(m)throw new Error(Jr(3));return u}function S(W){if(typeof W!="function")throw new Error(Jr(4));if(m)throw new Error(Jr(5));let T=!0;y();const z=x++;return h.set(z,W),function(){if(T){if(m)throw new Error(Jr(6));T=!1,y(),h.delete(z),p=null}}}function _(W){if(!Y0(W))throw new Error(Jr(7));if(typeof W.type=="undefined")throw new Error(Jr(8));if(typeof W.type!="string")throw new Error(Jr(17));if(m)throw new Error(Jr(9));try{m=!0,u=l(u,W)}finally{m=!1}return(p=h).forEach(z=>{z()}),W}function k(W){if(typeof W!="function")throw new Error(Jr(10));l=W,_({type:Ju.REPLACE})}function E(){const W=S;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Jr(11));function z(){const G=T;G.next&&G.next(v())}return z(),{unsubscribe:W(z)}},[c2](){return this}}}return _({type:Ju.INIT}),{dispatch:_,subscribe:S,getState:v,replaceReducer:k,[c2]:E}}function E4(e){Object.keys(e).forEach(n=>{const a=e[n];if(typeof a(void 0,{type:Ju.INIT})=="undefined")throw new Error(Jr(12));if(typeof a(void 0,{type:Ju.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Jr(13))})}function T4(e){const n=Object.keys(e),a={};for(let p=0;p<n.length;p++){const h=n[p];typeof e[h]=="function"&&(a[h]=e[h])}const l=Object.keys(a);let u;try{E4(a)}catch(p){u=p}return function(h={},x){if(u)throw u;let m=!1;const y={};for(let v=0;v<l.length;v++){const S=l[v],_=a[S],k=h[S],E=_(k,x);if(typeof E=="undefined")throw x&&x.type,new Error(Jr(14));y[S]=E,m=m||E!==k}return m=m||l.length!==Object.keys(h).length,m?y:h}}function eh(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,a)=>(...l)=>n(a(...l)))}function M4(...e){return n=>(a,l)=>{const u=n(a,l);let p=()=>{throw new Error(Jr(15))};const h={getState:u.getState,dispatch:(m,...y)=>p(m,...y)},x=e.map(m=>m(h));return p=eh(...x)(u.dispatch),ae(q({},u),{dispatch:p})}}function D4(e){return Y0(e)&&"type"in e&&typeof e.type=="string"}var T5=Symbol.for("immer-nothing"),d2=Symbol.for("immer-draftable"),Fn=Symbol.for("immer-state");function Si(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var el=Object.getPrototypeOf;function Fo(e){return!!e&&!!e[Fn]}function ma(e){var n;return e?M5(e)||Array.isArray(e)||!!e[d2]||!!((n=e.constructor)!=null&&n[d2])||Sh(e)||Ch(e):!1}var I4=Object.prototype.constructor.toString();function M5(e){if(!e||typeof e!="object")return!1;const n=el(e);if(n===null)return!0;const a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object?!0:typeof a=="function"&&Function.toString.call(a)===I4}function th(e,n){wh(e)===0?Reflect.ownKeys(e).forEach(a=>{n(a,e[a],e)}):e.forEach((a,l)=>n(l,a,e))}function wh(e){const n=e[Fn];return n?n.type_:Array.isArray(e)?1:Sh(e)?2:Ch(e)?3:0}function t0(e,n){return wh(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function D5(e,n,a){const l=wh(e);l===2?e.set(n,a):l===3?e.add(a):e[n]=a}function W4(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function Sh(e){return e instanceof Map}function Ch(e){return e instanceof Set}function ko(e){return e.copy_||e.base_}function r0(e,n){if(Sh(e))return new Map(e);if(Ch(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=M5(e);if(n===!0||n==="class_only"&&!a){const l=Object.getOwnPropertyDescriptors(e);delete l[Fn];let u=Reflect.ownKeys(l);for(let p=0;p<u.length;p++){const h=u[p],x=l[h];x.writable===!1&&(x.writable=!0,x.configurable=!0),(x.get||x.set)&&(l[h]={configurable:!0,writable:!0,enumerable:x.enumerable,value:e[h]})}return Object.create(el(e),l)}else{const l=el(e);if(l!==null&&a)return q({},e);const u=Object.create(l);return Object.assign(u,e)}}function Q0(e,n=!1){return kh(e)||Fo(e)||!ma(e)||(wh(e)>1&&(e.set=e.add=e.clear=e.delete=$4),Object.freeze(e),n&&Object.entries(e).forEach(([a,l])=>Q0(l,!0))),e}function $4(){Si(2)}function kh(e){return Object.isFrozen(e)}var O4={};function Ho(e){const n=O4[e];return n||Si(0,e),n}var $c;function I5(){return $c}function L4(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function u2(e,n){n&&(Ho("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function n0(e){i0(e),e.drafts_.forEach(B4),e.drafts_=null}function i0(e){e===$c&&($c=e.parent_)}function h2(e){return $c=L4($c,e)}function B4(e){const n=e[Fn];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function f2(e,n){n.unfinalizedDrafts_=n.drafts_.length;const a=n.drafts_[0];return e!==void 0&&e!==a?(a[Fn].modified_&&(n0(n),Si(4)),ma(e)&&(e=rh(n,e),n.parent_||nh(n,e)),n.patches_&&Ho("Patches").generateReplacementPatches_(a[Fn].base_,e,n.patches_,n.inversePatches_)):e=rh(n,a,[]),n0(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==T5?e:void 0}function rh(e,n,a){if(kh(n))return n;const l=n[Fn];if(!l)return th(n,(u,p)=>p2(e,l,n,u,p,a)),n;if(l.scope_!==e)return n;if(!l.modified_)return nh(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const u=l.copy_;let p=u,h=!1;l.type_===3&&(p=new Set(u),u.clear(),h=!0),th(p,(x,m)=>p2(e,l,u,x,m,a,h)),nh(e,u,!1),a&&e.patches_&&Ho("Patches").generatePatches_(l,a,e.patches_,e.inversePatches_)}return l.copy_}function p2(e,n,a,l,u,p,h){if(Fo(u)){const x=p&&n&&n.type_!==3&&!t0(n.assigned_,l)?p.concat(l):void 0,m=rh(e,u,x);if(D5(a,l,m),Fo(m))e.canAutoFreeze_=!1;else return}else h&&a.add(u);if(ma(u)&&!kh(u)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;rh(e,u),(!n||!n.scope_.parent_)&&typeof l!="symbol"&&Object.prototype.propertyIsEnumerable.call(a,l)&&nh(e,u)}}function nh(e,n,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Q0(n,a)}function P4(e,n){const a=Array.isArray(e),l={type_:a?1:0,scope_:n?n.scope_:I5(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=l,p=G0;a&&(u=[l],p=Oc);const{revoke:h,proxy:x}=Proxy.revocable(u,p);return l.draft_=x,l.revoke_=h,x}var G0={get(e,n){if(n===Fn)return e;const a=ko(e);if(!t0(a,n))return j4(e,a,n);const l=a[n];return e.finalized_||!ma(l)?l:l===dg(e.base_,n)?(ug(e),e.copy_[n]=o0(l,e)):l},has(e,n){return n in ko(e)},ownKeys(e){return Reflect.ownKeys(ko(e))},set(e,n,a){const l=W5(ko(e),n);if(l!=null&&l.set)return l.set.call(e.draft_,a),!0;if(!e.modified_){const u=dg(ko(e),n),p=u==null?void 0:u[Fn];if(p&&p.base_===a)return e.copy_[n]=a,e.assigned_[n]=!1,!0;if(W4(a,u)&&(a!==void 0||t0(e.base_,n)))return!0;ug(e),a0(e)}return e.copy_[n]===a&&(a!==void 0||n in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=a,e.assigned_[n]=!0),!0},deleteProperty(e,n){return dg(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,ug(e),a0(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const a=ko(e),l=Reflect.getOwnPropertyDescriptor(a,n);return l&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:l.enumerable,value:a[n]}},defineProperty(){Si(11)},getPrototypeOf(e){return el(e.base_)},setPrototypeOf(){Si(12)}},Oc={};th(G0,(e,n)=>{Oc[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Oc.deleteProperty=function(e,n){return Oc.set.call(this,e,n,void 0)};Oc.set=function(e,n,a){return G0.set.call(this,e[0],n,a,e[0])};function dg(e,n){const a=e[Fn];return(a?ko(a):e)[n]}function j4(e,n,a){var u;const l=W5(n,a);return l?"value"in l?l.value:(u=l.get)==null?void 0:u.call(e.draft_):void 0}function W5(e,n){if(!(n in e))return;let a=el(e);for(;a;){const l=Object.getOwnPropertyDescriptor(a,n);if(l)return l;a=el(a)}}function a0(e){e.modified_||(e.modified_=!0,e.parent_&&a0(e.parent_))}function ug(e){e.copy_||(e.copy_=r0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var N4=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,a,l)=>{if(typeof n=="function"&&typeof a!="function"){const p=a;a=n;const h=this;return function(m=p,...y){return h.produce(m,v=>a.call(this,v,...y))}}typeof a!="function"&&Si(6),l!==void 0&&typeof l!="function"&&Si(7);let u;if(ma(n)){const p=h2(this),h=o0(n,void 0);let x=!0;try{u=a(h),x=!1}finally{x?n0(p):i0(p)}return u2(p,l),f2(u,p)}else if(!n||typeof n!="object"){if(u=a(n),u===void 0&&(u=n),u===T5&&(u=void 0),this.autoFreeze_&&Q0(u,!0),l){const p=[],h=[];Ho("Patches").generateReplacementPatches_(n,u,p,h),l(p,h)}return u}else Si(1,n)},this.produceWithPatches=(n,a)=>{if(typeof n=="function")return(h,...x)=>this.produceWithPatches(h,m=>n(m,...x));let l,u;return[this.produce(n,a,(h,x)=>{l=h,u=x}),l,u]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ma(e)||Si(8),Fo(e)&&(e=F4(e));const n=h2(this),a=o0(e,void 0);return a[Fn].isManual_=!0,i0(n),a}finishDraft(e,n){const a=e&&e[Fn];(!a||!a.isManual_)&&Si(9);const{scope_:l}=a;return u2(l,n),f2(void 0,l)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let a;for(a=n.length-1;a>=0;a--){const u=n[a];if(u.path.length===0&&u.op==="replace"){e=u.value;break}}a>-1&&(n=n.slice(a+1));const l=Ho("Patches").applyPatches_;return Fo(e)?l(e,n):this.produce(e,u=>l(u,n))}};function o0(e,n){const a=Sh(e)?Ho("MapSet").proxyMap_(e,n):Ch(e)?Ho("MapSet").proxySet_(e,n):P4(e,n);return(n?n.scope_:I5()).drafts_.push(a),a}function F4(e){return Fo(e)||Si(10,e),$5(e)}function $5(e){if(!ma(e)||kh(e))return e;const n=e[Fn];let a;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,a=r0(e,n.scope_.immer_.useStrictShallowCopy_)}else a=r0(e,!0);return th(a,(l,u)=>{D5(a,l,$5(u))}),n&&(n.finalized_=!1),a}var Hn=new N4,O5=Hn.produce;Hn.produceWithPatches.bind(Hn);Hn.setAutoFreeze.bind(Hn);Hn.setUseStrictShallowCopy.bind(Hn);Hn.applyPatches.bind(Hn);Hn.createDraft.bind(Hn);Hn.finishDraft.bind(Hn);function L5(e){return({dispatch:a,getState:l})=>u=>p=>typeof p=="function"?p(a,l,e):u(p)}var H4=L5(),V4=L5,U4=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?eh:eh.apply(null,arguments)},q4=e=>e&&typeof e.match=="function";function _c(e,n){function a(...l){if(n){let u=n(...l);if(!u)throw new Error(ga(0));return q(q({type:e,payload:u.payload},"meta"in u&&{meta:u.meta}),"error"in u&&{error:u.error})}return{type:e,payload:l[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=l=>D4(l)&&l.type===e,a}var B5=class mc extends Array{constructor(...n){super(...n),Object.setPrototypeOf(this,mc.prototype)}static get[Symbol.species](){return mc}concat(...n){return super.concat.apply(this,n)}prepend(...n){return n.length===1&&Array.isArray(n[0])?new mc(...n[0].concat(this)):new mc(...n.concat(this))}};function g2(e){return ma(e)?O5(e,()=>{}):e}function ku(e,n,a){return e.has(n)?e.get(n):e.set(n,a(n)).get(n)}function Y4(e){return typeof e=="boolean"}var Q4=()=>function(n){const{thunk:a=!0,immutableCheck:l=!0,serializableCheck:u=!0,actionCreatorCheck:p=!0}=n!=null?n:{};let h=new B5;return a&&(Y4(a)?h.push(H4):h.push(V4(a.extraArgument))),h},G4="RTK_autoBatch",m2=e=>n=>{setTimeout(n,e)},X4=(e={type:"raf"})=>n=>(...a)=>{const l=n(...a);let u=!0,p=!1,h=!1;const x=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:m2(10):e.type==="callback"?e.queueNotification:m2(e.timeout),y=()=>{h=!1,p&&(p=!1,x.forEach(v=>v()))};return Object.assign({},l,{subscribe(v){const S=()=>u&&v(),_=l.subscribe(S);return x.add(v),()=>{_(),x.delete(v)}},dispatch(v){var S;try{return u=!((S=v==null?void 0:v.meta)!=null&&S[G4]),p=!u,p&&(h||(h=!0,m(y))),l.dispatch(v)}finally{u=!0}}})},K4=e=>function(a){const{autoBatch:l=!0}=a!=null?a:{};let u=new B5(e);return l&&u.push(X4(typeof l=="object"?l:void 0)),u};function Z4(e){const n=Q4(),{reducer:a=void 0,middleware:l,devTools:u=!0,preloadedState:p=void 0,enhancers:h=void 0}=e||{};let x;if(typeof a=="function")x=a;else if(Y0(a))x=T4(a);else throw new Error(ga(1));let m;typeof l=="function"?m=l(n):m=n();let y=eh;u&&(y=U4(q({trace:!1},typeof u=="object"&&u)));const v=M4(...m),S=K4(v);let _=typeof h=="function"?h(S):S();const k=y(..._);return E5(x,p,k)}function P5(e){const n={},a=[];let l;const u={addCase(p,h){const x=typeof p=="string"?p:p.type;if(!x)throw new Error(ga(28));if(x in n)throw new Error(ga(29));return n[x]=h,u},addMatcher(p,h){return a.push({matcher:p,reducer:h}),u},addDefaultCase(p){return l=p,u}};return e(u),[n,a,l]}function J4(e){return typeof e=="function"}function e_(e,n){let[a,l,u]=P5(n),p;if(J4(e))p=()=>g2(e());else{const x=g2(e);p=()=>x}function h(x=p(),m){let y=[a[m.type],...l.filter(({matcher:v})=>v(m)).map(({reducer:v})=>v)];return y.filter(v=>!!v).length===0&&(y=[u]),y.reduce((v,S)=>{if(S)if(Fo(v)){const k=S(v,m);return k===void 0?v:k}else{if(ma(v))return O5(v,_=>S(_,m));{const _=S(v,m);if(_===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return v},x)}return h.getInitialState=p,h}var t_=(e,n)=>q4(e)?e.match(n):e(n);function r_(...e){return n=>e.some(a=>t_(a,n))}var n_="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",i_=(e=21)=>{let n="",a=e;for(;a--;)n+=n_[Math.random()*64|0];return n},a_=["name","message","stack","code"],hg=class{constructor(e,n){ri(this,"_type");this.payload=e,this.meta=n}},x2=class{constructor(e,n){ri(this,"_type");this.payload=e,this.meta=n}},o_=e=>{if(typeof e=="object"&&e!==null){const n={};for(const a of a_)typeof e[a]=="string"&&(n[a]=e[a]);return n}return{message:String(e)}},b2="External signal was aborted",Zc=(()=>{function e(n,a,l){const u=_c(n+"/fulfilled",(m,y,v,S)=>({payload:m,meta:ae(q({},S||{}),{arg:v,requestId:y,requestStatus:"fulfilled"})})),p=_c(n+"/pending",(m,y,v)=>({payload:void 0,meta:ae(q({},v||{}),{arg:y,requestId:m,requestStatus:"pending"})})),h=_c(n+"/rejected",(m,y,v,S,_)=>({payload:S,error:(l&&l.serializeError||o_)(m||"Rejected"),meta:ae(q({},_||{}),{arg:v,requestId:y,rejectedWithValue:!!S,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"})}));function x(m,{signal:y}={}){return(v,S,_)=>{const k=l!=null&&l.idGenerator?l.idGenerator(m):i_(),E=new AbortController;let R,W;function T(N){W=N,E.abort()}y&&(y.aborted?T(b2):y.addEventListener("abort",()=>T(b2),{once:!0}));const z=function(){return $(this,null,function*(){var J,H;let N;try{let U=(J=l==null?void 0:l.condition)==null?void 0:J.call(l,m,{getState:S,extra:_});if(l_(U)&&(U=yield U),U===!1||E.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((V,Y)=>{R=()=>{Y({name:"AbortError",message:W||"Aborted"})},E.signal.addEventListener("abort",R)});v(p(k,m,(H=l==null?void 0:l.getPendingMeta)==null?void 0:H.call(l,{requestId:k,arg:m},{getState:S,extra:_}))),N=yield Promise.race([A,Promise.resolve(a(m,{dispatch:v,getState:S,extra:_,requestId:k,signal:E.signal,abort:T,rejectWithValue:(V,Y)=>new hg(V,Y),fulfillWithValue:(V,Y)=>new x2(V,Y)})).then(V=>{if(V instanceof hg)throw V;return V instanceof x2?u(V.payload,k,m,V.meta):u(V,k,m)})])}catch(U){N=U instanceof hg?h(null,k,m,U.payload,U.meta):h(U,k,m)}finally{R&&E.signal.removeEventListener("abort",R)}return l&&!l.dispatchConditionRejection&&h.match(N)&&N.meta.condition||v(N),N})}();return Object.assign(z,{abort:T,requestId:k,arg:m,unwrap(){return z.then(s_)}})}}return Object.assign(x,{pending:p,rejected:h,fulfilled:u,settled:r_(h,u),typePrefix:n})}return e.withTypes=()=>e,e})();function s_(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function l_(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var c_=Symbol.for("rtk-slice-createasyncthunk");function d_(e,n){return`${e}/${n}`}function u_({creators:e}={}){var a;const n=(a=e==null?void 0:e.asyncThunk)==null?void 0:a[c_];return function(u){const{name:p,reducerPath:h=p}=u;if(!p)throw new Error(ga(11));const x=(typeof u.reducers=="function"?u.reducers(f_()):u.reducers)||{},m=Object.keys(x),y={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(G,J){const H=typeof G=="string"?G:G.type;if(!H)throw new Error(ga(12));if(H in y.sliceCaseReducersByType)throw new Error(ga(13));return y.sliceCaseReducersByType[H]=J,v},addMatcher(G,J){return y.sliceMatchers.push({matcher:G,reducer:J}),v},exposeAction(G,J){return y.actionCreators[G]=J,v},exposeCaseReducer(G,J){return y.sliceCaseReducersByName[G]=J,v}};m.forEach(G=>{const J=x[G],H={reducerName:G,type:d_(p,G),createNotation:typeof u.reducers=="function"};g_(J)?x_(H,J,v,n):p_(H,J,v)});function S(){const[G={},J=[],H=void 0]=typeof u.extraReducers=="function"?P5(u.extraReducers):[u.extraReducers],U=q(q({},G),y.sliceCaseReducersByType);return e_(u.initialState,A=>{for(let V in U)A.addCase(V,U[V]);for(let V of y.sliceMatchers)A.addMatcher(V.matcher,V.reducer);for(let V of J)A.addMatcher(V.matcher,V.reducer);H&&A.addDefaultCase(H)})}const _=G=>G,k=new Map,E=new WeakMap;let R;function W(G,J){return R||(R=S()),R(G,J)}function T(){return R||(R=S()),R.getInitialState()}function z(G,J=!1){function H(A){let V=A[G];return typeof V=="undefined"&&J&&(V=ku(E,H,T)),V}function U(A=_){const V=ku(k,J,()=>new WeakMap);return ku(V,A,()=>{var P;const Y={};for(const[I,B]of Object.entries((P=u.selectors)!=null?P:{}))Y[I]=h_(B,A,()=>ku(E,A,T),J);return Y})}return{reducerPath:G,getSelectors:U,get selectors(){return U(H)},selectSlice:H}}const N=ae(q({name:p,reducer:W,actions:y.actionCreators,caseReducers:y.sliceCaseReducersByName,getInitialState:T},z(h)),{injectInto(G,U={}){var A=U,{reducerPath:J}=A,H=un(A,["reducerPath"]);const V=J!=null?J:h;return G.inject({reducerPath:V,reducer:W},H),q(q({},N),z(V,!0))}});return N}}function h_(e,n,a,l){function u(p,...h){let x=n(p);return typeof x=="undefined"&&l&&(x=a()),e(x,...h)}return u.unwrapped=e,u}var j5=u_();function f_(){function e(n,a){return q({_reducerDefinitionType:"asyncThunk",payloadCreator:n},a)}return e.withTypes=()=>e,{reducer(n){return Object.assign({[n.name](...a){return n(...a)}}[n.name],{_reducerDefinitionType:"reducer"})},preparedReducer(n,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:n,reducer:a}},asyncThunk:e}}function p_({type:e,reducerName:n,createNotation:a},l,u){let p,h;if("reducer"in l){if(a&&!m_(l))throw new Error(ga(17));p=l.reducer,h=l.prepare}else p=l;u.addCase(e,p).exposeCaseReducer(n,p).exposeAction(n,h?_c(e,h):_c(e))}function g_(e){return e._reducerDefinitionType==="asyncThunk"}function m_(e){return e._reducerDefinitionType==="reducerWithPrepare"}function x_({type:e,reducerName:n},a,l,u){if(!u)throw new Error(ga(18));const{payloadCreator:p,fulfilled:h,pending:x,rejected:m,settled:y,options:v}=a,S=u(e,p,v);l.exposeAction(n,S),h&&l.addCase(S.fulfilled,h),x&&l.addCase(S.pending,x),m&&l.addCase(S.rejected,m),y&&l.addMatcher(S.settled,y),l.exposeCaseReducer(n,{fulfilled:h||_u,pending:x||_u,rejected:m||_u,settled:y||_u})}function _u(){}function ga(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}console.log("Environment variables:",{VITE_API_BASE_URL:void 0,MODE:"production",DEV:!1});const b_={baseURL:"http://127.0.0.1:8000",timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"},retry:{retries:3,retryDelay:1e3}},ee=q6.create(b_);ee.interceptors.request.use(e=>{const n=localStorage.getItem("token");return console.log("Request interceptor - Token exists:",!!n),console.log("Request URL:",e.url),console.log("Request method:",e.method),e.url&&e.url.includes("/reviews/create/")&&e.method==="post"&&(console.log("=== REQUEST INTERCEPTOR DEBUG ==="),console.log("Review creation request detected"),console.log("Request data:",e.data),console.log("Request headers:",e.headers),console.log("==================================")),n?(e.headers.Authorization=`Bearer ${n}`,console.log("Authorization header added")):console.log("No token found in localStorage"),e},e=>(console.log("Request interceptor error:",e),Promise.reject(e)));ee.interceptors.response.use(e=>(console.log("Response interceptor - Success:",e.status,e.config.url),e),e=>{var n,a,l,u;return console.log("Response interceptor - Error:",(n=e.response)==null?void 0:n.status,(a=e.response)==null?void 0:a.data,(l=e.config)==null?void 0:l.url),((u=e.response)==null?void 0:u.status)===401&&(console.log("Unauthorized access - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),window.location.href="/login"),Promise.reject(e)});const Jc={login:e=>$(null,null,function*(){return(yield ee.post("/api/auth/login/",e)).data}),register:e=>$(null,null,function*(){return(yield ee.post("/api/auth/register/",e)).data}),logout:()=>$(null,null,function*(){return(yield ee.post("/api/auth/logout/")).data}),getProfile:()=>$(null,null,function*(){return(yield ee.get("/api/auth/profile/")).data}),updateProfile:e=>$(null,null,function*(){return(yield ee.put("/api/auth/profile/update/",e)).data}),changePassword:e=>$(null,null,function*(){return(yield ee.post("/api/auth/change-password/",e)).data}),checkEmail:e=>$(null,null,function*(){return(yield ee.get(`/api/auth/check-email/?email=${e}`)).data})},xn={getCourses:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get("/api/courses/courses/",{params:e})).data}),getPublicCourses:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/courses/public/",{params:e})).data}catch(a){throw console.error("Error fetching public courses:",a),a}}),getCourse:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/`)).data}catch(n){throw console.error("Error fetching course:",n),n}}),createCourse:e=>$(null,null,function*(){var a;const n=new FormData;Object.keys(e).forEach(l=>{l==="tags"&&Array.isArray(e[l])?e[l].forEach(u=>n.append("tags",u)):l==="image"&&e[l]instanceof File?n.append("image",e[l]):l==="syllabus_pdf"&&e[l]instanceof File?n.append("syllabus_pdf",e[l]):l==="materials_pdf"&&e[l]instanceof File?n.append("materials_pdf",e[l]):e[l]!==null&&e[l]!==void 0&&n.append(l,e[l])});try{return(yield ee.post("/api/courses/courses/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){if(console.error("Error in createCourse API call:",l),((a=l.response)==null?void 0:a.status)===500)try{const p=(yield ee.get("/api/courses/courses/")).data,x=(Array.isArray(p)?p:p.results?p.results:p.data?p.data:[]).find(m=>m.title===e.title&&m.subtitle===e.subtitle);if(x)return x}catch(u){console.error("Error fetching courses to verify creation:",u)}throw l}}),updateCourse:(e,n)=>$(null,null,function*(){const a=new FormData;Object.keys(n).forEach(l=>{l==="tags"&&Array.isArray(n[l])?n[l].forEach(u=>a.append("tags",u)):l==="image"&&n[l]instanceof File?a.append("image",n[l]):l==="syllabus_pdf"&&n[l]instanceof File?a.append("syllabus_pdf",n[l]):l==="materials_pdf"&&n[l]instanceof File?a.append("materials_pdf",n[l]):n[l]!==null&&n[l]!==void 0&&n[l]!==""&&a.append(l,n[l])});try{return(yield ee.patch(`/api/courses/courses/${e}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw console.error("Error in updateCourse API call:",l),l}}),deleteCourse:e=>$(null,null,function*(){return(yield ee.delete(`/api/courses/courses/${e}/`)).data}),getCategories:()=>$(null,null,function*(){try{const n=(yield ee.get("/api/courses/categories/")).data;return Array.isArray(n)?n:n.results?n.results:n.data?n.data:[]}catch(e){return console.error("Error fetching categories:",e),[]}}),getTags:()=>$(null,null,function*(){return(yield ee.get("/api/courses/tags/")).data}),searchCourses:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get("/api/courses/search/",{params:e})).data}),getFeaturedCourses:()=>$(null,null,function*(){return(yield ee.get("/api/courses/featured/")).data}),getPopularCourses:()=>$(null,null,function*(){return(yield ee.get("/api/courses/popular/")).data}),getRecentCourses:()=>$(null,null,function*(){return(yield ee.get("/api/courses/recent/")).data}),enrollInCourse:e=>$(null,null,function*(){return(yield ee.post(`/api/courses/courses/${e}/enroll/`)).data}),unenrollFromCourse:e=>$(null,null,function*(){return(yield ee.post(`/api/courses/courses/${e}/unenroll/`)).data}),getDashboardStats:()=>$(null,null,function*(){return(yield ee.get("/api/courses/dashboard/stats/")).data}),getMyEnrolledCourses:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/my-enrolled-courses/")).data}catch(e){throw console.error("Error fetching enrolled courses:",e),e}}),getCourseTrackingData:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/course-tracking/${e}/`)).data}catch(n){throw console.error("Error fetching course tracking data:",n),n}}),getQuizData:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/quiz/${e}/`)).data}catch(n){throw console.error("Error fetching quiz data:",n),n}}),submitQuizAttempt:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/assignments/quiz/${e}/submit/`,{answers:n})).data}catch(a){throw console.error("Error submitting quiz attempt:",a),a}}),markLessonCompleted:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/content/progress/course/${e}/complete/`,{lesson_id:n})).data}catch(a){throw console.error("Error marking lesson as completed:",a),a}}),trackLessonProgress:(e,n,a)=>$(null,null,function*(){try{return(yield ee.post(`/api/content/progress/course/${e}/track/`,q({lesson_id:n},a))).data}catch(l){throw console.error("Error tracking lesson progress:",l),l}}),updateModuleProgress:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/content/modules/${e}/mark_progress/`,n)).data}catch(a){throw console.error("Error updating module progress:",a),a}}),getLessonDetails:e=>$(null,null,function*(){try{return(yield ee.get(`/api/content/lessons/${e}/`)).data}catch(n){throw console.error("Error fetching lesson details:",n),n}}),downloadResource:e=>$(null,null,function*(){try{return(yield ee.get(`/api/content/resources/${e}/download/`,{responseType:"blob"})).data}catch(n){throw console.error("Error downloading resource:",n),n}})},N5={createMoyasarPayment:()=>$(null,null,function*(){return(yield ee.post("/api/store/payment/moyasar/create/")).data}),createCoursePayment:e=>$(null,null,function*(){return(yield ee.post(`/api/store/payment/moyasar/course/${e}/create/`)).data})},Mr={getArticles:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/articles/articles/",{params:e})).data}catch(a){throw console.error("Error fetching articles:",a),a}}),getArticle:e=>$(null,null,function*(){try{return(yield ee.get(`/api/articles/articles/${e}/`)).data}catch(n){throw console.error("Error fetching article:",n),n}}),getArticleBySlug:e=>$(null,null,function*(){try{const n=yield ee.get(`/api/articles/articles/?slug=${e}`);if(n.data&&n.data.results&&n.data.results.length>0)return n.data.results[0];if(Array.isArray(n.data)&&n.data.length>0)return n.data[0];throw new Error("Article not found")}catch(n){throw console.error("Error fetching article by slug:",n),n}}),createArticle:e=>$(null,null,function*(){const n=new FormData;Object.keys(e).forEach(a=>{a==="tags"&&Array.isArray(e[a])?e[a].forEach(l=>n.append("tags",l)):a==="image"&&e[a]instanceof File?n.append("image",e[a]):e[a]!==null&&e[a]!==void 0&&e[a]!==""&&n.append(a,e[a])});try{return(yield ee.post("/api/articles/articles/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error in createArticle API call:",a),a}}),updateArticle:(e,n)=>$(null,null,function*(){const a=new FormData;Object.keys(n).forEach(l=>{l==="tags"&&Array.isArray(n[l])?n[l].forEach(u=>a.append("tags",u)):l==="image"&&n[l]instanceof File?a.append("image",n[l]):n[l]!==null&&n[l]!==void 0&&n[l]!==""&&a.append(l,n[l])});try{return(yield ee.patch(`/api/articles/articles/${e}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw console.error("Error in updateArticle API call:",l),l}}),deleteArticle:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/articles/articles/${e}/`)).data}catch(n){throw console.error("Error deleting article:",n),n}}),getFeaturedArticles:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/featured/")).data}catch(e){throw console.error("Error fetching featured articles:",e),e}}),getRecentArticles:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/recent/")).data}catch(e){throw console.error("Error fetching recent articles:",e),e}}),getPopularArticles:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/popular/")).data}catch(e){throw console.error("Error fetching popular articles:",e),e}}),getRelatedArticles:(e,n=null,a=3)=>$(null,null,function*(){try{let l=`/api/articles/articles/?limit=${a}`;n&&(l+=`&category=${n}`),e&&(l+=`&exclude=${e}`);const u=yield ee.get(l);return u.data.results||u.data||[]}catch(l){return console.error("Error fetching related articles:",l),[]}}),getArticleTags:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/tags/")).data}catch(e){return console.error("Error fetching article tags:",e),[]}}),getAuthorProfile:e=>$(null,null,function*(){var n;try{console.log("Fetching author profile for ID:",e);let a;const l=[`/api/users/${e}/`,`/api/users/${e}/profile/`,`/api/profiles/${e}/`,`/api/users/profiles/${e}/`,`/api/instructors/${e}/`,`/api/teachers/${e}/`];for(const p of l)try{console.log(`Trying endpoint: ${p}`),a=yield ee.get(p),console.log(`Success with endpoint: ${p}`);break}catch(h){console.log(`Failed with endpoint: ${p}`,(n=h.response)==null?void 0:n.status);continue}if(!a)return console.error("All endpoints failed for author profile"),null;console.log("Author profile response:",a.data);let u=a.data;return a.data.profile&&(u=ae(q({},a.data.profile),{user:a.data,user_id:a.data.id,user_email:a.data.email,user_first_name:a.data.first_name,user_last_name:a.data.last_name,user_username:a.data.username})),a.data.user&&(u=ae(q({},a.data),{user_id:a.data.user.id,user_email:a.data.user.email,user_first_name:a.data.user.first_name,user_last_name:a.data.user.last_name,user_username:a.data.user.username})),u}catch(a){return console.error("Error fetching author profile:",a),null}}),getTeacherProfile:e=>$(null,null,function*(){try{console.log("Fetching teacher profile for ID:",e);const n=yield ee.get(`/api/teachers/${e}/`);return console.log("Teacher profile response:",n.data),n.data}catch(n){return console.error("Error fetching teacher profile:",n),null}}),searchArticles:e=>$(null,null,function*(){try{return(yield ee.get("/api/articles/search/",{params:{q:e}})).data}catch(n){throw console.error("Error searching articles:",n),n}}),getArticleCategories:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/categories/")).data}catch(e){return console.error("Error fetching article categories:",e),[]}}),getArticleComments:e=>$(null,null,function*(){try{console.log("Fetching comments for article:",e);const n=yield ee.get(`/api/articles/comments/?article=${e}`);return console.log("Comments API response:",n),n.data}catch(n){return console.error("Error fetching article comments:",n),[]}}),createArticleComment:(e,n)=>$(null,null,function*(){try{console.log("Creating comment for article:",e,"with data:",n);const a=yield ee.post("/api/articles/comments/",q({article:e},n));return console.log("Comment created successfully:",a.data),a.data}catch(a){throw console.error("Error creating article comment:",a),a}}),likeArticle:e=>$(null,null,function*(){try{return(yield ee.post(`/api/articles/articles/${e}/likes/`)).data}catch(n){throw console.error("Error liking article:",n),n}}),unlikeArticle:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/articles/articles/${e}/likes/unlike/`)).data}catch(n){throw console.error("Error unliking article:",n),n}}),bookmarkArticle:(e,n=null)=>$(null,null,function*(){try{return(yield ee.post(`/api/articles/articles/${e}/bookmarks/`,{notes:n})).data}catch(a){throw console.error("Error bookmarking article:",a),a}}),removeBookmark:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/articles/articles/${e}/bookmarks/remove_bookmark/`)).data}catch(n){throw console.error("Error removing bookmark:",n),n}}),rateArticle:(e,n,a=null)=>$(null,null,function*(){try{return(yield ee.post(`/api/articles/articles/${e}/ratings/`,{rating:n,comment:a})).data}catch(l){throw console.error("Error rating article:",l),l}}),getUserBookmarks:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/my/bookmarks/")).data}catch(e){throw console.error("Error fetching user bookmarks:",e),e}}),getUserRatings:()=>$(null,null,function*(){try{return(yield ee.get("/api/articles/my/ratings/")).data}catch(e){throw console.error("Error fetching user ratings:",e),e}}),checkArticleLike:e=>$(null,null,function*(){try{return(yield ee.get(`/api/articles/articles/${e}/likes/check_like/`)).data}catch(n){throw console.error("Error checking article like:",n),n}}),checkArticleBookmark:e=>$(null,null,function*(){try{return(yield ee.get(`/api/articles/articles/${e}/bookmarks/check_bookmark/`)).data}catch(n){throw console.error("Error checking article bookmark:",n),n}}),getArticleRatingStats:e=>$(null,null,function*(){try{return(yield ee.get(`/api/articles/articles/${e}/ratings/stats/`)).data}catch(n){throw console.error("Error fetching article rating stats:",n),n}})},Ys=Zc("auth/register",(a,l)=>$(null,[a,l],function*(e,{rejectWithValue:n}){var u,p,h,x;try{const m=yield Jc.register(e);return m.success?(localStorage.setItem("token",m.token),localStorage.setItem("user",JSON.stringify(m.user)),{user:m.user,profile:m.profile,user_details:m.user_details,token:m.token}):n(m.error||"Registration failed")}catch(m){const y=((p=(u=m.response)==null?void 0:u.data)==null?void 0:p.error)||((x=(h=m.response)==null?void 0:h.data)==null?void 0:x.details)||m.message||"Registration failed";return n(y)}})),Wo=Zc("auth/login",(a,l)=>$(null,[a,l],function*(e,{rejectWithValue:n}){var u,p,h,x,m;try{const y=yield Jc.login(e);return y.user?(localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),{user:y.user,profile:y.profile,user_details:y.user_details,token:y.token}):n(y.error||"Login failed")}catch(y){const v=((h=(p=(u=y.response)==null?void 0:u.data)==null?void 0:p.non_field_errors)==null?void 0:h[0])||((m=(x=y.response)==null?void 0:x.data)==null?void 0:m.error)||y.message||"Login failed";return n(v)}})),Qs=Zc("auth/logout",(a,l)=>$(null,[a,l],function*(e,{rejectWithValue:n}){try{return yield Jc.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),null}catch(u){return localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),n(u.message||"Logout failed")}})),Pu=Zc("auth/getProfile",(a,l)=>$(null,[a,l],function*(e,{rejectWithValue:n}){try{return yield Jc.getProfile()}catch(u){return n(u.message||"Failed to get profile")}})),fg=Zc("auth/updateProfile",(a,l)=>$(null,[a,l],function*(e,{rejectWithValue:n}){var u,p,h,x;try{return yield Jc.updateProfile(e)}catch(m){const y=((p=(u=m.response)==null?void 0:u.data)==null?void 0:p.error)||((x=(h=m.response)==null?void 0:h.data)==null?void 0:x.details)||m.message||"Profile update failed";return n(y)}})),y_={user:null,profile:null,user_details:null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),loading:!1,error:null},F5=j5({name:"auth",initialState:y_,reducers:{clearError:e=>{e.error=null},setUser:(e,n)=>{e.user=n.payload,e.isAuthenticated=!!n.payload}},extraReducers:e=>{e.addCase(Wo.pending,n=>{n.loading=!0,n.error=null}).addCase(Wo.fulfilled,(n,a)=>{n.loading=!1,n.isAuthenticated=!0,n.user=a.payload.user,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.token=a.payload.token,n.error=null}).addCase(Wo.rejected,(n,a)=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=a.payload||"فشل تسجيل الدخول"}).addCase(Ys.pending,n=>{n.loading=!0,n.error=null}).addCase(Ys.fulfilled,(n,a)=>{n.loading=!1,n.isAuthenticated=!0,n.user=a.payload.user,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.token=a.payload.token,n.error=null}).addCase(Ys.rejected,(n,a)=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=a.payload||"فشل إنشاء الحساب"}).addCase(Qs.pending,n=>{n.loading=!0}).addCase(Qs.fulfilled,n=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=null}).addCase(Qs.rejected,(n,a)=>{n.loading=!1,n.isAuthenticated=!1,n.user=null,n.profile=null,n.user_details=null,n.token=null,n.error=a.payload||"فشل تسجيل الخروج"}).addCase(Pu.pending,n=>{n.loading=!0}).addCase(Pu.fulfilled,(n,a)=>{n.loading=!1,n.user=a.payload.user,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.error=null}).addCase(Pu.rejected,(n,a)=>{n.loading=!1,n.error=a.payload||"فشل في جلب الملف الشخصي"}).addCase(fg.pending,n=>{n.loading=!0}).addCase(fg.fulfilled,(n,a)=>{n.loading=!1,n.profile=a.payload.profile,n.user_details=a.payload.user_details,n.error=null}).addCase(fg.rejected,(n,a)=>{n.loading=!1,n.error=a.payload||"فشل في تحديث الملف الشخصي"})}}),{clearError:X7,setUser:K7}=F5.actions,v_=F5.reducer,H5=w.createContext(),w_=({children:e})=>{const n=Gc(),{user:a,profile:l,user_details:u,isAuthenticated:p,loading:h}=N0(E=>E.auth),x=nt();w.useEffect(()=>{$(null,null,function*(){try{const R=localStorage.getItem("token"),W=localStorage.getItem("user");if(R&&W&&(!a||!l))try{yield n(Pu())}catch(T){console.error("Error getting profile:",T),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole")}}catch(R){console.error("Error initializing auth:",R)}})},[n,a,l]);const m=w.useCallback(E=>$(null,null,function*(){try{return yield n(Wo(E))}catch(R){throw console.error("Login error:",R),R}}),[n]),y=w.useCallback(()=>$(null,null,function*(){try{yield n(Qs()),x("/login")}catch(E){console.error("Logout error:",E),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),x("/login")}}),[n,x]),v=w.useCallback(E=>{var W,T;if(!l)return!1;const R=((W=l.status)==null?void 0:W.toLowerCase())||((T=u==null?void 0:u.type)==null?void 0:T.toLowerCase());return R===E||R==="admin"},[l,u]),S=w.useCallback(E=>{var W,T;if(!l)return!1;const R=((W=l.status)==null?void 0:W.toLowerCase())||((T=u==null?void 0:u.type)==null?void 0:T.toLowerCase());return E.includes(R)||R==="admin"},[l,u]),_=w.useCallback(()=>{var E,R;return l?((E=l.status)==null?void 0:E.toLowerCase())||((R=u==null?void 0:u.type)==null?void 0:R.toLowerCase())||"student":"guest"},[l,u]),k={user:a,profile:l,user_details:u,isAuthenticated:p,loading:h,login:m,logout:y,hasRole:v,hasAnyRole:S,getUserRole:_,updateUser:E=>{console.warn("updateUser is not implemented. Use Redux actions instead.")}};return t(H5.Provider,{value:k,children:e})},Ka=()=>{const e=w.useContext(H5);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},pg=R0({direction:"rtl",palette:{primary:{main:"#0288d1",light:"#7D9AFC",dark:"#0288d1",contrastText:"#ffffff"},secondary:{main:"#0e5181",light:"#968FFF",dark:"#4D44B5",contrastText:"#ffffff"},success:{main:"#00C853",light:"#5EFC82",dark:"#009624"},warning:{main:"#FFAB00",light:"#FFD54F",dark:"#FF8F00"},error:{main:"#FF3D00",light:"#FF6E40",dark:"#DD2C00"},background:{default:"#F8FAFF",paper:"#ffffff"},text:{primary:"#1A1A1A",secondary:"#666666",disabled:"#B3B3B3"},grey:{50:"#FAFAFA",100:"#F5F5F5",200:"#EEEEEE",300:"#E0E0E0",400:"#BDBDBD",500:"#9E9E9E",600:"#757575",700:"#616161",800:"#424242",900:"#212121"}},typography:{fontFamily:'"Tajawal", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:800,fontSize:"3.5rem",lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontWeight:700,fontSize:"2.5rem",lineHeight:1.2,letterSpacing:"-0.01em"},h3:{fontWeight:600,fontSize:"2rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.3},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.4},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.4},subtitle1:{fontSize:"1rem",lineHeight:1.5,fontWeight:500},subtitle2:{fontSize:"0.875rem",lineHeight:1.5,fontWeight:500},body1:{fontSize:"1rem",lineHeight:1.75},body2:{fontSize:"0.875rem",lineHeight:1.75},button:{textTransform:"none",fontWeight:600,letterSpacing:"0.01em"},caption:{fontSize:"0.75rem",lineHeight:1.66},overline:{fontSize:"0.75rem",lineHeight:2.66,letterSpacing:"0.08333em",textTransform:"uppercase"}},shape:{borderRadius:12},components:{MuiCssBaseline:{styleOverrides:{"html, body":{scrollBehavior:"smooth"},a:{textDecoration:"none",color:"inherit"},".MuiContainer-root":{paddingLeft:"24px",paddingRight:"24px","@media (min-width: 600px)":{paddingLeft:"32px",paddingRight:"32px"}}}},MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",boxShadow:"none",textTransform:"none",fontWeight:600,fontSize:"0.9375rem",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.12)",transform:"translateY(-2px)"},"&.MuiButton-contained":{"&:hover":{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}},"&.MuiButton-outlined":{borderWidth:"2px","&:hover":{borderWidth:"2px"}}},contained:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)","&.MuiButton-containedPrimary":{background:"linear-gradient(90deg, #0288d1 0%, #0e5181 100%)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",transform:"translateY(-4px)"}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.05)",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)"}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,"& fieldset":{borderColor:"#E0E0E0"},"&:hover fieldset":{borderColor:"#BDBDBD"},"&.Mui-focused fieldset":{borderColor:"#0288d1",boxShadow:"0 0 0 3px rgba(74, 108, 247, 0.1)"}}}}},MuiChip:{styleOverrides:{root:{borderRadius:6,fontWeight:500},colorPrimary:{backgroundColor:"rgba(74, 108, 247, 0.1)",color:"#0288d1"},colorSecondary:{backgroundColor:"rgba(108, 99, 255, 0.1)",color:"#0e5181"}}}},customShadows:{small:"0 2px 8px rgba(0, 0, 0, 0.08)",medium:"0 4px 16px rgba(0, 0, 0, 0.1)",large:"0 8px 24px rgba(0, 0, 0, 0.12)",primary:"0 8px 24px rgba(74, 108, 247, 0.2)",secondary:"0 8px 24px rgba(108, 99, 255, 0.2)"}}),S_={".text-ellipsis":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".text-gradient":{background:"linear-gradient(90deg, #0288d1 0%, #0e5181 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},".glass-effect":{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},".smooth-transition":{transition:"all 0.3s ease"}},Ac="/assets/profile-DRkKlqcl.jpg",gg=270,C_=[{text:"الرئيسية",icon:t(ch,{}),path:"/",exact:!0},{text:"لوحة التحكم",icon:t(Vu,{}),path:"/teacher/dashboard"},{text:"كورساتي",icon:t(Aw,{}),path:"/teacher/my-courses"},{text:"الواجبات",icon:t(rn,{}),path:"/teacher/assignments"},{text:"الكويزات",icon:t(nr,{}),path:"/teacher/quizzes"},{text:"الامتحانات",icon:t(Yr,{}),path:"/teacher/exams"},{text:"المحاضرات",icon:t(nn,{}),path:"/teacher/meetings"},{text:"المقالات",icon:t(Qr,{}),path:"/teacher/articles"},{text:"الإعدادات",icon:t(Uc,{}),path:"/teacher/settings"}],k_=[{text:"الرئيسية",icon:t(ch,{}),path:"/",exact:!0},{text:"لوحة التحكم",icon:t(Vu,{}),path:"/student/dashboard"},{text:"كورساتي",icon:t(Aw,{}),path:"/student/my-courses"},{text:"واجباتي",icon:t(rn,{}),path:"/student/assignments"},{text:"محاضراتي",icon:t(nn,{}),path:"/student/meetings"},{text:"شهاداتي",icon:t(bt,{}),path:"/student/certificates"},{text:"الإعدادات",icon:t(Uc,{}),path:"/student/settings"}],mg=({children:e,toggleDarkMode:n,isDarkMode:a})=>{const l=yh(),u=nt(),p=Gc(),{getUserRole:h,user:x}=Ka(),[m,y]=w.useState(null),[v,S]=w.useState(null),_=w.useRef(null),k=w.useRef(null),E=[{id:1,text:"لديك واجب جديد في مادة الرياضيات",time:"منذ 10 دقائق",read:!1},{id:2,text:"تم إضافة درجات الاختبار النصفي",time:"منذ ساعة",read:!1},{id:3,text:"محاضرة جديدة متاحة",time:"منذ يوم",read:!0}],R=E.filter(P=>!P.read).length,T=x?{name:x.first_name&&x.last_name?`${x.first_name} ${x.last_name}`:x.username||"مستخدم",email:x.email||"",avatar:x.profile_picture||Ac,role:h()==="instructor"?"مدرس":"طالب",description:x.bio||(h()==="instructor"?"مدرس في المنصة":"طالب في المنصة")}:{name:"مستخدم",email:"",avatar:Ac,role:"طالب",description:"طالب في المنصة"},z=P=>{y(P.currentTarget)},N=P=>{S(P.currentTarget)},G=()=>{y(null),S(null)},J=()=>{p(Qs()),u("/login"),G()};w.useEffect(()=>{const P=I=>{_.current&&!_.current.contains(I.target)&&y(null),k.current&&!k.current.contains(I.target)&&S(null)};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]);const H=h(),A=(()=>{switch(H){case"instructor":case"teacher":return C_;case"student":default:return k_}})(),V=(P,I=!1)=>I?l.pathname===P:l.pathname.startsWith(P)&&P!=="/",Y=s(d,{sx:{height:"100%",background:"rgba(255,255,255,0.95)",borderRadius:"24px 0 0 24px",boxShadow:"0 8px 32px 0 rgba(31,38,135,0.10)",p:2,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},children:[s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3,background:"rgba(14,81,129,0.05)",borderRadius:3,p:2,boxShadow:"0 2px 8px 0 rgba(14,81,129,0.07)"},children:[t(_t,{src:T.avatar,alt:T.name,sx:{width:90,height:90,mb:1,border:"3px solid #e5978b",boxShadow:"0 2px 8px 0 rgba(14,81,129,0.09)"}}),t(f,{fontWeight:700,children:T.name}),t(f,{variant:"caption",color:"text.secondary",children:T.description})]}),t(Pt,{sx:{width:"100%",mb:2}}),t(Fr,{sx:{width:"100%"},children:A.map(P=>{const I=V(P.path,P.exact);return t(T6,{to:P.path,style:{textDecoration:"none",color:"inherit",display:"block",marginBottom:"8px",borderRadius:"8px",background:I?"linear-gradient(90deg, rgba(14,81,129,0.1) 0%, #fff 100%)":"none",boxShadow:I?"0 2px 8px 0 rgba(14,81,129,0.10)":"none"},children:s(rc,{sx:{borderRadius:2,color:I?"#0e5181":"#757575","&:hover":{background:"linear-gradient(90deg, rgba(14,81,129,0.05) 0%, #fff 100%)",color:"#0e5181"}},children:[t(Rr,{sx:{minWidth:36,color:I?"#0e5181":"#bdbdbd",fontSize:24},children:P.icon}),t(ir,{primary:P.text,sx:{fontWeight:600}}),P.badge&&t(Bo,{badgeContent:P.badge,color:"secondary",sx:{position:"absolute",left:16}})]})},P.text)})})]});return s(d,{sx:{display:"flex",height:"100vh",width:"100%",background:"#f6f7fb",direction:"rtl",overflow:"hidden","& *":{"&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.02)"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)",borderRadius:"4px",border:"2px solid transparent",backgroundClip:"padding-box","&:hover":{backgroundColor:"rgba(0,0,0,0.15)"}}}},children:[t(d,{sx:{width:gg,flexShrink:0,position:"relative",height:"100%",overflowY:"auto",overflowX:"hidden","&:hover":{"&::-webkit-scrollbar-thumb":{backgroundColor:"#a8a8a8"}}},children:t(Ok,{variant:"permanent",anchor:"right",sx:{width:gg,flexShrink:0,"& .MuiDrawer-paper":{width:gg,boxSizing:"border-box",border:"none",background:"transparent",boxShadow:"none",position:"relative",height:"100%",overflow:"visible"}},children:Y})}),s(d,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",width:"100%","& > *:first-child":{flexShrink:0},"& > *:last-child":{flexGrow:1,overflowY:"auto",overflowX:"hidden",p:4,pt:2,maxWidth:"100%","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.1)","&:hover":{backgroundColor:"rgba(0,0,0,0.15)"}}}},children:[t(d,{sx:{position:"relative",zIndex:1e3},children:t(Vc,{position:"static",elevation:0,sx:{background:"rgba(255,255,255,0.85)",boxShadow:"0 2px 10px 0 rgba(14,81,129,0.04)",mb:3,borderRadius:3},children:s(Gs,{sx:{justifyContent:"space-between"},children:[t(We,{component:"form",sx:{p:"2px 8px",display:"flex",alignItems:"center",width:250,background:"#fff",borderRadius:2,boxShadow:0},children:t(_w,{sx:{ml:1,flex:1},placeholder:"بحث...",inputProps:{"aria-label":"بحث"}})}),s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(d,{ref:k,sx:{position:"relative"},children:[t(xe,{color:"inherit",sx:{bgcolor:v?"rgba(14,81,129,0.1)":"rgba(229,151,139,0.1)",p:1.2},onClick:N,children:t(Bo,{badgeContent:R,color:"error",children:t(fy,{})})}),v&&s(We,{sx:{position:"absolute",top:"100%",left:0,width:350,maxHeight:400,overflowY:"auto",borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",zIndex:9999,p:2,background:"#ffffff",border:"1px solid #e0e0e0",mt:1},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:1},children:[t(f,{variant:"subtitle1",fontWeight:600,children:"الإشعارات"}),t(f,{variant:"caption",color:"primary",sx:{cursor:"pointer"},children:"تمييز الكل كمقروء"})]}),t(Pt,{}),t(Fr,{sx:{p:0},children:E.map(P=>t(rc,{sx:{borderRadius:1,mb:.5,bgcolor:P.read?"transparent":"rgba(14,81,129,0.05)","&:hover":{bgcolor:"rgba(229,151,139,0.05)"}},children:s(d,{sx:{width:"100%"},children:[t(f,{variant:"body2",sx:{fontWeight:P.read?400:600},children:P.text}),t(f,{variant:"caption",color:"text.secondary",children:P.time})]})},P.id))}),t(d,{sx:{textAlign:"center",mt:1},children:t(f,{variant:"body2",color:"primary",sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"عرض الكل"})})]})]}),s(d,{ref:_,sx:{position:"relative"},children:[t(xe,{onClick:z,sx:{p:0,"&:hover":{opacity:.8}},children:t(_t,{src:T.avatar,alt:T.name,sx:{width:40,height:40,border:"2px solid #e5978b",cursor:"pointer",transition:"all 0.2s","&:hover":{transform:"scale(1.05)",boxShadow:"0 2px 8px rgba(14,81,129,0.3)"}}})}),m&&s(We,{sx:{position:"absolute",top:"100%",left:0,width:250,borderRadius:2,boxShadow:"0 8px 32px rgba(0,0,0,0.3)",zIndex:9999,overflow:"hidden",background:"#ffffff",border:"1px solid #e0e0e0",mt:1},children:[s(d,{sx:{p:2,textAlign:"center",borderBottom:"1px solid #f0f0f0"},children:[t(_t,{src:T.avatar,alt:T.name,sx:{width:64,height:64,mb:1,mx:"auto",border:"2px solid #e5978b"}}),t(f,{variant:"subtitle1",fontWeight:600,children:T.name}),t(f,{variant:"body2",color:"text.secondary",children:T.role}),t(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:T.email})]}),s(Fr,{sx:{p:0},children:[s(rc,{sx:{"&:hover":{bgcolor:"rgba(14,81,129,0.05)"}},children:[t(Rr,{sx:{minWidth:36},children:t(Uc,{fontSize:"small"})}),t(ir,{primary:"إعدادات الحساب"})]}),s(rc,{sx:{"&:hover":{bgcolor:"rgba(14,81,129,0.05)"}},children:[t(Rr,{sx:{minWidth:36},children:t(fy,{fontSize:"small"})}),t(ir,{primary:"الإشعارات"})]}),t(Pt,{}),s(rc,{onClick:J,sx:{color:"#f44336","&:hover":{bgcolor:"#ffebee"}},children:[t(Rr,{sx:{minWidth:36,color:"inherit"},children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t("polyline",{points:"16 17 21 12 16 7"}),t("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})}),t(ir,{primary:"تسجيل الخروج"})]})]})]})]})]})]})})}),t(d,{component:"main",sx:{flexGrow:1,p:0,pt:0,width:"100%"},children:e})]})]})},s0="/assets/logo-yfPAesN4.png",__=ht`
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
`,A_=oe(Vc,{shouldForwardProp:e=>e!=="scrolled"})(({theme:e,scrolled:n})=>({backgroundColor:n?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.98)",backdropFilter:n?"blur(5px)":"blur(10px)",WebkitBackdropFilter:n?"blur(5px)":"blur(10px)",boxShadow:n?"0 1px 5px rgba(0, 0, 0, 0.05)":"0 2px 10px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out",padding:"8px 0",borderBottom:n?"1px solid rgba(14, 81, 129, 0.4)":"1px solid rgba(14, 81, 129, 0.3)",animation:`${__} 0.5s ease-out`,"&.MuiAppBar-root":{zIndex:e.zIndex.drawer+1}})),z_=oe(te)(({theme:e})=>({background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",color:"white",borderRadius:"25px",padding:"10px 25px",fontWeight:"600",textTransform:"none",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)"}})),y2=oe("div")(({theme:e})=>({position:"relative",borderRadius:"25px",backgroundColor:"rgba(14, 81, 129, 0.1)","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.15)"},marginRight:e.spacing(2),marginLeft:e.spacing(2),width:"100%",maxWidth:"400px",[e.breakpoints.down("sm")]:{margin:"10px 0",width:"100%"}})),v2=oe("div")(({theme:e})=>({padding:e.spacing(0,2),height:"100%",position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#0e5181",pointerEvents:"none"})),w2=oe(_w)(({theme:e})=>({color:"#0e5181",width:"100%","& .MuiInputBase-input":{padding:"12px 20px 12px 50px",width:"100%","&::placeholder":{color:"rgba(14, 81, 129, 0.7)",opacity:1}}})),S2=oe(te)(({theme:e})=>({color:"#0e5181",margin:e.spacing(0,.5),fontWeight:"500",fontSize:"1rem",textTransform:"none",position:"relative",padding:"8px 12px",borderRadius:"8px",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)",transform:"translateY(-2px)"},"&.active":{color:"#e5978b",fontWeight:"600"},"& .MuiButton-endIcon":{marginRight:4,marginLeft:-4,"& svg":{transition:"transform 0.2s"}},'&[aria-expanded="true"]':{"& .MuiButton-endIcon svg":{transform:"rotate(180deg)"}}})),C2=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",textDecoration:"none",marginRight:"30px","&:hover":{"& img":{transform:"scale(1.05)"}},[e.breakpoints.down("sm")]:{marginRight:"15px"}})),k2=oe("img")({height:"52px",transition:"transform 0.3s ease","@media (max-width: 600px)":{height:"44px"}}),_2=oe(f)(({theme:e})=>({fontWeight:700,fontSize:"1.4rem",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginRight:"12px",lineHeight:1.2,[e.breakpoints.down("sm")]:{fontSize:"1.2rem"}}));oe(Dc)({"& .MuiPaper-root":{backgroundColor:"#1A1A2E",color:"#FFFFFF",marginTop:"10px",minWidth:"200px",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)","& .MuiDivider-root":{borderColor:"rgba(255, 255, 255, 0.1)"}}});oe(Me)({padding:"10px 20px","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"},"& .MuiSvgIcon-root":{marginLeft:"10px",color:"#0e5181"}});oe(Bo)({"& .MuiBadge-badge":{backgroundColor:"#e5978b",color:"#FFFFFF",border:"2px solid #1A1A2E"}});const Rn=()=>{const[e,n]=w.useState(null),[a,l]=w.useState(!1),[u,p]=w.useState(!1),[h,x]=w.useState([]),[m,y]=w.useState(!0),v=nt(),S=yh(),_=Gc(),k=Vt(),E=Ri(k.breakpoints.down("md")),{user:R,isAuthenticated:W}=N0(I=>I.auth),[T,z]=w.useState(""),[N,G]=w.useState({});w.useEffect(()=>{$(null,null,function*(){try{y(!0);const B=yield xn.getCategories();x(B)}catch(B){console.error("Error fetching categories:",B),x([{id:1,name:"الدورات",slug:"courses",courses_count:0},{id:2,name:"التدريب الإلكتروني",slug:"e-learning",courses_count:0},{id:3,name:"الدبلومات",slug:"diplomas",courses_count:0}])}finally{y(!1)}})},[]);const J=[{text:"الرئيسية",path:"/",icon:t(ch,{})},{text:"الأقسام",path:"#",icon:t(nl,{}),dropdown:h.map(I=>({text:I.courses_count?`${I.name} (${I.courses_count})`:I.name,path:`/courses?category=${I.slug}`}))},{text:"منصتنا",path:"#",icon:t(bt,{}),dropdown:[{text:"عن المنصة",path:"/about",icon:"🏢"},{text:"المدونة",path:"/articles",icon:"📝"},{text:"اتصل بنا",path:"/contact",icon:"📞"}]},{text:"لوحة التحكم",path:"/dashboard",icon:t(Vu,{}),auth:!0}];w.useEffect(()=>{const I=()=>{const B=window.scrollY>50;B!==u&&p(B)};return window.addEventListener("scroll",I),()=>window.removeEventListener("scroll",I)},[u]);const H=I=>{n(I.currentTarget)},U=()=>{n(null)},A=(I,B)=>{G(F=>ae(q({},F),{[B]:I.currentTarget}))},V=I=>{G(B=>ae(q({},B),{[I]:null}))},Y=()=>{_(Qs()),v("/login"),U()},P=I=>{I.preventDefault(),T.trim()&&(v(`/courses?search=${encodeURIComponent(T)}`),z(""))};return s(Bt,{children:[t(A_,{position:"fixed",scrolled:u,children:t(Qe,{maxWidth:"xl",children:s(Gs,{disableGutters:!0,children:[t(d,{sx:{display:"flex",alignItems:"center",flexGrow:{xs:1,md:0}},children:s(C2,{component:Qt,to:"/",children:[t(k2,{src:s0,alt:"شعار المنصة"}),!E&&t(_2,{variant:"h6"})]})}),t(d,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},ml:4,"& > *:not(:last-child)":{mr:1}},children:J.map(I=>{if(I.auth&&!W)return null;if(I.dropdown){const B=!!N[I.text];return s("div",{children:[t(S2,{"aria-controls":B?I.text:void 0,"aria-haspopup":"true","aria-expanded":B?"true":void 0,onClick:F=>A(F,I.text),endIcon:t(zw,{}),className:S.pathname.startsWith(I.path)?"active":"",children:I.text}),t(Dc,{id:I.text,anchorEl:N[I.text],open:B,onClose:()=>V(I.text),MenuListProps:{"aria-labelledby":I.text},PaperProps:{style:{backgroundColor:"#FFFFFF",color:"#333333",marginTop:"10px",minWidth:"300px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid rgba(14, 81, 129, 0.1)"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:m?t(d,{display:"flex",justifyContent:"center",p:2,children:t(Ke,{size:20,sx:{color:"#0e5181"}})}):I.dropdown.length>0?t(d,{sx:{p:2.5},children:I.dropdown.map((F,Q)=>{const M=[{bg:"#FFF5F5",icon:"#e5978b"},{bg:"#F0F8FF",icon:"#0e5181"},{bg:"#FFF8F0",icon:"#e5978b"},{bg:"#F0F0FF",icon:"#0e5181"},{bg:"#FFFFF0",icon:"#e5978b"},{bg:"#F5F0FF",icon:"#0e5181"},{bg:"#F0FFF0",icon:"#e5978b"},{bg:"#FFF0F5",icon:"#0e5181"},{bg:"#F0FFFF",icon:"#e5978b"}],O=Q%M.length;return s(d,{component:Qt,to:F.path,onClick:()=>V(I.text),sx:{display:"flex",alignItems:"center",p:2,mb:1,borderRadius:"12px",backgroundColor:M[O].bg,textDecoration:"none",transition:"all 0.3s ease",cursor:"pointer",border:"2px solid transparent","&:hover":{backgroundColor:`${M[O].bg}DD`,borderColor:M[O].icon,transform:"translateX(6px)",boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},"&:last-child":{mb:0}},children:[t(d,{sx:{width:"28px",height:"28px",borderRadius:"8px",backgroundColor:M[O].icon,display:"flex",alignItems:"center",justifyContent:"center",mr:2,color:"white",flexShrink:0,position:"relative",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:s(d,{component:"svg",viewBox:"0 0 24 24",sx:{width:"18px",height:"18px",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"},children:[t("path",{d:"M3 21L21 3"}),t("path",{d:"M9 3L21 15"}),t("path",{d:"M15 9L21 15"}),t("path",{d:"M3 21L9 15"}),t("path",{d:"M9 15L15 9"}),t("path",{d:"M15 9L21 3"}),t("path",{d:"M21 3L24 6L21 9"}),t("path",{d:"M3 21L6 24"})]})}),t(f,{variant:"body2",sx:{color:"#333333",fontWeight:600,fontSize:"0.95rem",flexGrow:1,lineHeight:1.4},children:F.text})]},F.path)})}):t(Me,{disabled:!0,sx:{color:"rgba(14, 81, 129, 0.5)"},children:"لا توجد أقسام متاحة"})})]},I.text)}return t(S2,{component:Qt,to:I.path,className:S.pathname===I.path?"active":"",children:I.text},I.path)})}),t(d,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},maxWidth:"500px",mx:3},children:t("form",{onSubmit:P,style:{width:"100%"},children:s(y2,{children:[t(v2,{children:t(Vi,{})}),t(w2,{placeholder:"ابحث عن دورة...",inputProps:{"aria-label":"search"},value:T,onChange:I=>z(I.target.value)})]})})}),t(d,{sx:{display:"flex",alignItems:"center",ml:"auto"},children:W?s(Bt,{children:[t(xe,{size:"large","aria-label":"shopping cart",color:"inherit",component:Qt,to:"/cart",sx:{backgroundColor:"rgba(14, 81, 129, 0.1)",marginLeft:1,color:"#0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.2)",color:"#e5978b"}},children:t(Bo,{badgeContent:0,color:"error",children:t(Do,{})})}),t(xe,{size:"large","aria-label":"show notifications",color:"inherit",sx:{backgroundColor:"rgba(14, 81, 129, 0.1)",marginLeft:1,color:"#0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.2)",color:"#e5978b"}},children:t(Bo,{badgeContent:3,color:"error",children:t(Lk,{})})}),t(xe,{onClick:H,size:"small",sx:{ml:2,p:0,"&:hover":{"& .MuiAvatar-root":{transform:"scale(1.1)",boxShadow:"0 0 0 2px #0e5181"}}},children:t(_t,{alt:(R==null?void 0:R.name)||"User",src:R==null?void 0:R.avatar,sx:{width:40,height:40,transition:"all 0.3s ease",border:"2px solid #0e5181"}})}),s(Dc,{anchorEl:e,open:!!e,onClose:U,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[s(d,{px:2,py:1,children:[t(f,{variant:"subtitle1",fontWeight:600,sx:{color:"#0e5181"},children:(R==null?void 0:R.name)||"المستخدم"}),t(f,{variant:"body2",sx:{color:"#666666"},children:(R==null?void 0:R.email)||"user@example.com"})]}),t(Pt,{}),s(Me,{onClick:()=>{v("/profile"),U()},sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"}},children:[t(Bk,{sx:{ml:1,color:"#0e5181"}}),"الملف الشخصي"]}),s(Me,{onClick:()=>{v("/dashboard"),U()},sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"}},children:[t(Vu,{sx:{ml:1,color:"#0e5181"}}),"لوحة التحكم"]}),t(Pt,{}),s(Me,{onClick:Y,sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"}},children:[t(py,{sx:{ml:1,color:"#0e5181"}}),"تسجيل الخروج"]})]})]}):s(jr,{direction:"row",spacing:2,alignItems:"center",children:[t(te,{component:Qt,to:"/login",color:"inherit",sx:{fontWeight:500,color:"#0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)",color:"#e5978b"}},children:"تسجيل الدخول"}),t(z_,{component:Qt,to:"/register",variant:"contained",children:"إنشاء حساب"})]})}),t(d,{sx:{display:{xs:"flex",md:"none"},mr:1},children:t(xe,{size:"large","aria-label":"show menu",onClick:()=>l(!0),color:"inherit",sx:{backgroundColor:"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:t(Rw,{})})})]})})}),a&&s(d,{sx:{position:"fixed",top:0,right:0,width:"80%",maxWidth:"300px",height:"100vh",backgroundColor:"#1A1A2E",zIndex:1300,boxShadow:"-5px 0 30px rgba(0, 0, 0, 0.3)",padding:"20px",overflowY:"auto",transform:a?"translateX(0)":"translateX(100%)",transition:"transform 0.3s ease-in-out"},children:[s(d,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[s(C2,{component:Qt,to:"/",onClick:()=>l(!1),children:[t(k2,{src:s0,alt:"شعار المنصة"}),t(_2,{variant:"h6",children:"أكاديمية التطوير"})]}),t(xe,{onClick:()=>l(!1),sx:{color:"#FFFFFF"},children:t(d,{component:"span",sx:{fontSize:"1.5rem"},children:"×"})})]}),t(d,{mb:3,children:t("form",{onSubmit:P,children:s(y2,{children:[t(v2,{children:t(Vi,{})}),t(w2,{placeholder:"ابحث عن دورة...",inputProps:{"aria-label":"search"},value:T,onChange:I=>z(I.target.value)})]})})}),s(d,{children:[J.map(I=>(!I.auth||W)&&s("div",{children:[t(te,{component:Qt,to:I.path,fullWidth:!0,startIcon:I.icon,sx:{justifyContent:"flex-start",color:S.pathname===I.path?"#0e5181":"#FFFFFF",mb:1,borderRadius:"8px",padding:"10px 15px","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"}},onClick:()=>l(!1),children:I.text}),I.dropdown&&I.text==="الأقسام"&&t(d,{ml:2,mt:1,children:m?t(d,{display:"flex",justifyContent:"center",p:1,children:t(Ke,{size:16,sx:{color:"#0e5181"}})}):I.dropdown.length>0?I.dropdown.map(B=>t(te,{component:Qt,to:B.path,fullWidth:!0,size:"small",sx:{justifyContent:"flex-start",color:"rgba(255, 255, 255, 0.8)",mb:.5,borderRadius:"6px",padding:"6px 12px",fontSize:"0.9rem","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)",color:"#0e5181"}},onClick:()=>l(!1),children:B.text},B.path)):t(f,{variant:"body2",color:"rgba(255, 255, 255, 0.5)",sx:{px:2,py:1},children:"لا توجد أقسام متاحة"})})]},I.path)),W&&t(te,{component:Qt,to:"/cart",fullWidth:!0,startIcon:t(Do,{}),sx:{justifyContent:"flex-start",color:S.pathname==="/cart"?"#0e5181":"#FFFFFF",mb:1,borderRadius:"8px",padding:"10px 15px","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.1)"}},onClick:()=>l(!1),children:"سلة التسوق"})]}),t(d,{mt:3,children:W?t(te,{fullWidth:!0,variant:"contained",onClick:Y,startIcon:t(py,{}),sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{opacity:.9}},children:"تسجيل الخروج"}):s(Bt,{children:[t(te,{fullWidth:!0,variant:"outlined",component:Qt,to:"/login",sx:{color:"#FFFFFF",borderColor:"rgba(255, 255, 255, 0.2)",mb:1,"&:hover":{borderColor:"#0e5181",backgroundColor:"rgba(14, 81, 129, 0.1)"}},onClick:()=>l(!1),children:"تسجيل الدخول"}),t(te,{fullWidth:!0,variant:"contained",component:Qt,to:"/register",sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{opacity:.9}},onClick:()=>l(!1),children:"إنشاء حساب"})]})})]}),a&&t(d,{onClick:()=>l(!1),sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1200}}),t(Gs,{})]})},R_=oe(d)(({theme:e})=>({backgroundColor:"#FFFFFF",color:"#0e5181",padding:e.spacing(8,0,0),position:"relative",overflow:"hidden",borderTop:"2px solid rgba(14, 81, 129, 0.1)","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.02) 0%, rgba(229, 151, 139, 0.02) 100%)",zIndex:0},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      radial-gradient(circle at 20% 20%, rgba(14, 81, 129, 0.03) 1px, transparent 1px),
      radial-gradient(circle at 80% 80%, rgba(229, 151, 139, 0.03) 1px, transparent 1px),
      radial-gradient(circle at 40% 60%, rgba(14, 81, 129, 0.02) 1px, transparent 1px)
    `,backgroundSize:"50px 50px, 50px 50px, 50px 50px",backgroundPosition:"0 0, 25px 25px, 12px 30px",zIndex:0}})),E_=oe(f)(({theme:e})=>({fontWeight:700,color:"#0e5181",marginBottom:e.spacing(3),position:"relative",fontSize:"1.2rem",paddingBottom:e.spacing(1),"&:after":{content:'""',position:"absolute",right:0,bottom:0,width:50,height:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3}})),A2=oe(fa)(({theme:e})=>({display:"flex",alignItems:"center",color:"#333333",marginBottom:e.spacing(1.5),textDecoration:"none",transition:"all 0.3s ease",fontSize:"0.95rem",fontWeight:"500","&:hover":{color:"#e5978b",paddingRight:e.spacing(1),fontWeight:"600","& .arrow-icon":{opacity:1,transform:"translateX(0)"}}})),z2=oe(Gt)({fontSize:"1rem",marginRight:8,opacity:0,transform:"translateX(-5px)",transition:"all 0.3s ease"});oe(d)(({theme:e})=>({display:"flex",alignItems:"flex-start",marginBottom:e.spacing(2),"& .MuiSvgIcon-root":{marginLeft:e.spacing(1),color:"#0e5181",marginTop:4,fontSize:"1.2rem"},"& .contact-text":{color:"#333333",fontWeight:"500",fontSize:"0.95rem"}}));const T_=oe(xe)(({theme:e})=>({backgroundColor:"rgba(14, 81, 129, 0.15)",color:"#0e5181",margin:e.spacing(0,1,1,0),transition:"all 0.3s ease",border:"2px solid rgba(14, 81, 129, 0.2)","&:hover":{backgroundColor:"#e5978b",color:"#FFFFFF",borderColor:"#e5978b",transform:"translateY(-3px)",boxShadow:"0 5px 15px rgba(229, 151, 139, 0.4)"}})),En=()=>{const e=Vt(),n=Ri(e.breakpoints.down("md")),a=[{icon:t(Ew,{}),text:"+966 12 345 6789"},{icon:t(Pk,{}),text:"info@academy.edu.sa"},{icon:t(jk,{}),text:"المملكة العربية السعودية"}],l=[{text:"من نحن",to:"/about-us"},{text:"سياسة الخصوصية",to:"/privacy-policy"},{text:"سياسة الاستبدال والاسترجاع",to:"/return-policy"},{text:"الشروط والأحكام",to:"/terms"},{text:"حقوق الملكية الفكرية",to:"/intellectual-property"}],u=[{icon:t(dh,{}),url:"https://facebook.com"},{icon:t(uh,{}),url:"https://twitter.com"},{icon:t(Nk,{}),url:"https://instagram.com"},{icon:t(Tw,{}),url:"https://linkedin.com"},{icon:t(Fk,{}),url:"https://youtube.com"}],p=new Date().getFullYear();return s(Bt,{children:[t(d,{sx:{position:"relative",width:"100%",height:"60px",overflow:"hidden",zIndex:1},children:s("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",style:{width:"100%",height:"100%"},children:[t("path",{d:"M0,120V73.71c47.79-22.2,103.59-32.17,158-28,70.36,5.37,136.33,33.31,206.8,37.5C438.64,87.57,512.34,66.33,583,47.95c69.27-18,138.3-24.88,209.4-13.08,36.15,6,69.85,17.84,104.45,29.34C989.49,95,1113,134.29,1200,67.53V120Z",opacity:".25",fill:"#0e5181"}),t("path",{d:"M0,120V104.19C13,83.08,27.64,63.14,47.69,47.95,99.41,8.73,165,9,224.58,28.42c31.15,10.15,60.09,26.07,89.67,39.8,40.92,19,84.73,46,130.83,49.67,36.26,2.85,70.9-9.42,98.6-31.56,31.77-25.39,62.32-62,103.63-73,40.44-10.46,81.35,6.69,119.13,24.28s75.16,39,116.92,43.05c59.73,5.85,113.28-22.88,168.9-38.84,30.2-8.66,59-6.17,87.09,7.5,22.43,10.89,48,26.93,60.65,49.24V120Z",opacity:".5",fill:"#0e5181"}),t("path",{d:"M0,120V114.37C149.93,61,314.09,48.68,475.83,77.43c43,7.64,84.23,20.12,127.61,26.46,59,8.63,112.48-12.24,165.56-35.4C827.93,42.78,886,24.76,951.2,30c86.53,7,172.46,45.71,248.8,84.81V120Z",fill:"#0e5181"})]})}),t(R_,{component:"footer",children:s(Qe,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:[s(d,{sx:{backgroundColor:"rgba(14, 81, 129, 0.08)",borderRadius:2,p:3,mb:4,display:"flex",flexDirection:n?"column":"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2,border:"1px solid rgba(14, 81, 129, 0.15)"},children:[t(f,{variant:"subtitle2",sx:{color:"#0e5181",fontWeight:600},children:"تواصل معنا"}),t(d,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:a.map((h,x)=>s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(d,{sx:{color:"#0e5181"},children:h.icon}),t(f,{variant:"body2",sx:{color:"#333333",fontSize:"0.85rem",fontWeight:"500"},children:h.text})]},x))})]}),s(se,{container:!0,spacing:n?4:6,children:[t(se,{item:!0,xs:12,md:4,children:s(d,{mb:2,children:[s(d,{display:"flex",alignItems:"center",mb:3,children:[t("img",{src:s0,alt:"شعار المعهد",style:{height:50}}),t(f,{variant:"h6",sx:{color:"#0e5181",fontWeight:700,mr:1},children:"معهد التطوير المهني العالي للتدريب"})]}),s(f,{variant:"body2",sx:{color:"#333333",lineHeight:1.8,mb:3,fontWeight:"500"},children:["معنا تحقق أهدافك التدريبية باحترافية وجودة، حيث يعد التطوير المهني اليوم ميزة أساسية لاختيار وترقية الموظفين.",t("br",{}),"أوقات العمل 8 ص - 12 ص"]}),t(d,{mt:2,children:u.map((h,x)=>t(T_,{component:"a",href:h.url,target:"_blank",rel:"noopener noreferrer",children:h.icon},x))})]})}),s(se,{item:!0,xs:12,sm:8,md:4,children:[t(E_,{children:"روابط مهمة"}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:6,children:l.slice(0,Math.ceil(l.length/2)).map((h,x)=>t(d,{mb:1.5,children:s(A2,{component:Qt,to:h.to,underline:"none",children:[t(z2,{className:"arrow-icon"}),h.text]})},x))}),t(se,{item:!0,xs:6,children:l.slice(Math.ceil(l.length/2)).map((h,x)=>t(d,{mb:1.5,children:s(A2,{component:Qt,to:h.to,underline:"none",children:[t(z2,{className:"arrow-icon"}),h.text]})},x))})]})]})]}),t(d,{sx:{mt:2,pt:1.5,pb:1.5,borderTop:"1px solid rgba(14, 81, 129, 0.1)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative","&:before":{content:'""',position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"100vw",height:"100%",background:"linear-gradient(135deg, rgba(14, 81, 129, 0.03) 0%, rgba(229, 151, 139, 0.03) 100%)",zIndex:-1},"&:after":{content:'""',position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"100vw",height:"100%",background:`
                  radial-gradient(circle at 20% 20%, rgba(14, 81, 129, 0.02) 1px, transparent 1px),
                  radial-gradient(circle at 80% 80%, rgba(229, 151, 139, 0.02) 1px, transparent 1px)
                `,backgroundSize:"40px 40px, 40px 40px",backgroundPosition:"0 0, 20px 20px",zIndex:-1}},children:s(f,{variant:"body2",sx:{color:"#0e5181",textAlign:"center",fontWeight:"500",fontSize:"0.85rem"},children:["© ",p," جميع الحقوق محفوظة لأكاديمية التطوير"]})})]})})]})},M_="/assets/img-CAm4Qt0V.png";ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`;const D_=ht`
  0% { transform: translateX(-50px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
`,I_=ht`
  0% { transform: translateX(50px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
`,W_=ht`
  0% { transform: translateY(30px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
`;ht`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`;ht`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`;ht`
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(10px); }
`;ht`
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
`;const $_=oe("section")(({theme:e})=>({position:"relative",color:"#333",padding:"60px 0",overflow:"hidden",minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#fff","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"#ffffff",zIndex:0},[e.breakpoints.down("md")]:{padding:"40px 0",minHeight:"60vh"}})),O_=oe(Qe)(({theme:e})=>({position:"relative",zIndex:3,display:"flex",alignItems:"center",height:"100%",[e.breakpoints.down("md")]:{flexDirection:"column",textAlign:"center"}})),L_=oe(d)(({theme:e})=>({flex:1,position:"relative",height:"500px",display:"flex",alignItems:"center",justifyContent:"center",animation:`${D_} 1s ease-out`,[e.breakpoints.down("md")]:{height:"300px",marginBottom:e.spacing(4)}})),B_=oe(d)(({theme:e})=>({flex:1,padding:e.spacing(0,4),animation:`${I_} 1s ease-out 0.3s both`,[e.breakpoints.down("md")]:{padding:e.spacing(0,2)}}));oe(f)(({theme:e})=>({fontWeight:900,marginBottom:e.spacing(3),fontSize:"3.5rem",lineHeight:1.1,color:"#0e5181",textShadow:"0 2px 10px rgba(14, 81, 129, 0.2)",[e.breakpoints.down("md")]:{fontSize:"2.5rem"},[e.breakpoints.down("sm")]:{fontSize:"2rem"}}));oe(f)(({theme:e})=>({fontSize:"1.3rem",marginBottom:e.spacing(4),color:"#333",fontWeight:400,lineHeight:1.6,[e.breakpoints.down("sm")]:{fontSize:"1.1rem"}}));oe(te)(({theme:e})=>({padding:e.spacing(1.5,4),fontSize:"1.1rem",fontWeight:700,borderRadius:"50px",textTransform:"none",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",border:"none",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)",position:"relative",overflow:"hidden",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",animation:`${W_} 1s ease-out 0.6s both`,"&:hover":{background:"linear-gradient(135deg, #0a3d5f 0%, #d17a6f 100%)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.4)",transform:"translateY(-3px)"},"&:active":{transform:"translateY(-1px)"}}));oe(d)(({theme:e,variant:n,top:a,left:l,size:u,delay:p=0,rotation:h=0})=>({position:"absolute",top:`${a}%`,left:`${l}%`,width:u,height:u,borderRadius:n==="organic"?"60% 40% 30% 70% / 60% 30% 70% 40%":"50%",background:n==="gradient"?"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)":n==="light"?"#f0f8ff":n==="striped"?"repeating-linear-gradient(45deg, #0e5181, #0e5181 5px, #e5978b 5px, #e5978b 10px)":"#0e5181",opacity:n==="light"?.6:.8,transform:`rotate(${h}deg)`,zIndex:1,"&:hover":{transform:`scale(1.1) rotate(${h+10}deg)`,opacity:1}}));oe(d)(({theme:e,top:n,left:a,width:l,height:u,delay:p=0,rotation:h=45})=>({position:"absolute",top:`${n}%`,left:`${a}%`,width:l,height:u,background:"linear-gradient(45deg, #0e5181 0%, #e5978b 100%)",transform:`rotate(${h}deg)`,opacity:.7,zIndex:1}));oe(d)(({theme:e,top:n,left:a,rows:l=3,cols:u=4,delay:p=0,color:h="#FFB6C1"})=>({position:"absolute",top:`${n}%`,left:`${a}%`,display:"grid",gridTemplateRows:`repeat(${l}, 8px)`,gridTemplateColumns:`repeat(${u}, 8px)`,gap:"4px",zIndex:1,"& .dot":{width:"8px",height:"8px",borderRadius:"50%",background:h,opacity:.8}}));oe(d)(({theme:e,top:n,left:a,rows:l=4,cols:u=5,delay:p=0,color:h="#DDA0DD"})=>({position:"absolute",top:`${n}%`,left:`${a}%`,display:"grid",gridTemplateRows:`repeat(${l}, 6px)`,gridTemplateColumns:`repeat(${u}, 6px)`,gap:"3px",zIndex:1,"& .circle":{width:"6px",height:"6px",borderRadius:"50%",background:h,opacity:.8}}));oe(d)(({theme:e,start:n,end:a,delay:l=0})=>({position:"absolute",top:`${n.top}%`,left:`${n.left}%`,width:`${Math.sqrt(Math.pow(a.left-n.left,2)+Math.pow(a.top-n.top,2))}px`,height:"2px",background:"repeating-linear-gradient(to right, #e5978b 0, #e5978b 4px, transparent 4px, transparent 8px)",transform:`rotate(${Math.atan2(a.top-n.top,a.left-n.left)*180/Math.PI}deg)`,transformOrigin:"0 0",zIndex:1,opacity:.6}));const P_=oe(d)(({theme:e})=>({position:"relative",width:"650px",height:"750px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2,[e.breakpoints.down("md")]:{width:"450px",height:"550px"},[e.breakpoints.down("sm")]:{width:"320px",height:"420px"}})),j_=oe("img")(({theme:e})=>({width:"100%",height:"100%",objectFit:"contain",filter:"drop-shadow(0 10px 30px rgba(14, 81, 129, 0.3))",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",filter:"drop-shadow(0 15px 40px rgba(14, 81, 129, 0.5))"}}));oe(d)(({theme:e,top:n,left:a,size:l=40,delay:u=0,iconType:p="default"})=>({position:"absolute",top:`${n}%`,left:`${a}%`,width:l,height:l,display:"flex",alignItems:"center",justifyContent:"center",color:"#0e5181",fontSize:`${l*.6}px`,zIndex:2,"&:hover":{transform:"scale(1.2)",color:"#e5978b"}}));oe(d)(({theme:e,top:n,left:a,size:l=4,delay:u=0,color:p="#0e5181"})=>({position:"absolute",top:`${n}%`,left:`${a}%`,width:l,height:l,borderRadius:"50%",background:p,opacity:.6,zIndex:1}));const N_=()=>{Vt();const[e,n]=w.useState([]),[a,l]=w.useState(!0);return w.useEffect(()=>{$(null,null,function*(){var p,h,x;try{console.log("Fetching banners from API..."),console.log("API base URL:",ee.defaults.baseURL),console.log("Full URL:",`${ee.defaults.baseURL}/api/extras/banners/active/`);const m=yield ee.get("/api/extras/banners/active/");console.log("API Response:",m.data);const y=m.data.results||m.data;console.log("Banners data:",y),console.log("Banners data length:",Array.isArray(y)?y.length:"Not an array"),Array.isArray(y)&&y.length>0&&console.log("First banner details:",{id:y[0].id,title:y[0].title,description:y[0].description,image_url:y[0].image_url});const v=y.map(S=>({id:S.id,title:S.title,subtitle:S.description||"",image:S.image_url}));console.log("Transformed slides:",v),n(v)}catch(m){console.error("Error fetching banners:",m),console.error("Error details:",((p=m.response)==null?void 0:p.data)||m.message),console.error("Error status:",(h=m.response)==null?void 0:h.status),console.error("Error config:",m.config),console.error("Error headers:",(x=m.response)==null?void 0:x.headers),n([])}finally{l(!1)}})},[]),e.length>0&&q({},e[0]),s($_,{children:[s(O_,{maxWidth:"lg",children:[s(B_,{children:[s(d,{sx:{mb:4},children:[t(f,{variant:"h1",sx:{fontSize:{xs:"2.5rem",md:"3.2rem",lg:"3.8rem"},fontWeight:800,color:"#0e5181",textAlign:"right",lineHeight:1.1,mb:2,position:"relative","&::after":{content:'""',position:"absolute",bottom:"-8px",right:0,width:"60px",height:"4px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:"2px"}},children:"معهد التطوير المهني"}),t(f,{variant:"h2",sx:{fontSize:{xs:"1.8rem",md:"2.2rem",lg:"2.5rem"},fontWeight:600,color:"#e5978b",textAlign:"right",mb:2,opacity:.9},children:"العالي للتدريب"}),s(d,{sx:{display:"inline-flex",alignItems:"center",backgroundColor:"rgba(14, 81, 129, 0.08)",border:"1px solid rgba(14, 81, 129, 0.15)",borderRadius:"20px",padding:"6px 16px",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent)",transition:"left 0.6s ease"},"&:hover::before":{left:"100%"}},children:[t(d,{sx:{width:"6px",height:"6px",backgroundColor:"#0e5181",borderRadius:"50%",mr:1,animation:"pulse 2s infinite","@keyframes pulse":{"0%":{opacity:1,transform:"scale(1)"},"50%":{opacity:.6,transform:"scale(1.1)"},"100%":{opacity:1,transform:"scale(1)"}}}}),t(f,{variant:"body2",sx:{color:"#0e5181",fontWeight:600,fontSize:"0.85rem"},children:"منصة تعليمية متطورة"})]})]}),s(d,{sx:{position:"relative",mt:4,maxWidth:"500px",width:"100%"},children:[s(d,{sx:{position:"relative",display:"flex",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"50px",border:"2px solid rgba(14, 81, 129, 0.2)",boxShadow:"0 8px 32px rgba(14, 81, 129, 0.15)",backdropFilter:"blur(10px)",transition:"all 0.3s ease","&:hover":{borderColor:"rgba(14, 81, 129, 0.4)",boxShadow:"0 12px 40px rgba(14, 81, 129, 0.25)",transform:"translateY(-2px)"},"&:focus-within":{borderColor:"#0e5181",boxShadow:"0 0 0 3px rgba(14, 81, 129, 0.1)"}},children:[t(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"50px",height:"50px",color:"#0e5181",fontSize:"1.2rem"},children:"🔍"}),t("input",{type:"text",placeholder:"ابحث عن الدورات التدريبية...",style:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:"1rem",color:"#333",padding:"15px 0",fontFamily:"inherit"}}),t(d,{component:"button",sx:{backgroundColor:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",border:"none",borderRadius:"50px",padding:"12px 24px",margin:"8px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.3)"},"&:active":{transform:"scale(0.95)"}},children:"بحث"})]}),t(d,{sx:{position:"absolute",top:"-20px",right:"20px",width:"40px",height:"40px",background:"linear-gradient(135deg, #e5978b 0%, #ff6b6b 100%)",borderRadius:"50%",opacity:.8,animation:"float 3s ease-in-out infinite","@keyframes float":{"0%, 100%":{transform:"translateY(0px)"},"50%":{transform:"translateY(-10px)"}}}}),t(d,{sx:{position:"absolute",bottom:"-15px",left:"30px",width:"25px",height:"25px",background:"linear-gradient(135deg, #0e5181 0%, #87CEEB 100%)",borderRadius:"50%",opacity:.6,animation:"float 2s ease-in-out infinite reverse","@keyframes float":{"0%, 100%":{transform:"translateY(0px)"},"50%":{transform:"translateY(-10px)"}}}})]})]}),t(L_,{children:s(P_,{children:[t(j_,{src:M_,alt:"Student giving thumbs up",onError:u=>{u.target.style.display="none",u.target.nextSibling.style.display="flex"}}),t(d,{sx:{display:"none",width:"120px",height:"120px",borderRadius:"50%",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",alignItems:"center",justifyContent:"center",fontSize:"3rem",color:"white",boxShadow:"0 10px 30px rgba(14, 81, 129, 0.3)"},children:"😊"})]})})]}),t(d,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"60px",overflow:"hidden",zIndex:1},children:s("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",style:{width:"100%",height:"100%"},children:[t("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",fill:"#0e5181"}),t("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.46,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",fill:"#0e5181"}),t("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",fill:"#0e5181"})]})})]})},tn={getCourses:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/courses/public/",{params:e})).data}catch(a){throw console.error("Error fetching courses:",a),a}}),getCourseById:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/`)).data}catch(n){throw console.error("Error fetching course by ID:",n),n}}),getCourse:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/`)).data}catch(n){throw console.error("Error fetching course:",n),n}}),searchCourses:(a,...l)=>$(null,[a,...l],function*(e,n={}){try{return(yield ee.get("/api/courses/search/",{params:q({query:e},n)})).data}catch(u){throw console.error("Error searching courses:",u),u}}),getFeaturedCourses:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/featured/")).data}catch(e){throw console.error("Error fetching featured courses:",e),e}}),getPopularCourses:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/popular/")).data}catch(e){throw console.error("Error fetching popular courses:",e),e}}),getRecentCourses:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/recent/")).data}catch(e){throw console.error("Error fetching recent courses:",e),e}}),getCategories:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/categories/")).data}catch(e){throw console.error("Error fetching categories:",e),e}}),getTags:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/tags/")).data}catch(e){throw console.error("Error fetching tags:",e),e}}),enrollInCourse:e=>$(null,null,function*(){try{return(yield ee.post(`/api/courses/courses/${e}/enroll/`)).data}catch(n){throw console.error("Error enrolling in course:",n),n}}),unenrollFromCourse:e=>$(null,null,function*(){try{return(yield ee.post(`/api/courses/courses/${e}/unenroll/`)).data}catch(n){throw console.error("Error unenrolling from course:",n),n}}),getCourseModules:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/modules/`)).data}catch(n){throw console.error("Error fetching course modules:",n),n}}),getMyCourses:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/courses/my_courses/")).data}catch(e){throw console.error("Error fetching my courses:",e),e}}),getDashboardStats:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/dashboard/stats/")).data}catch(e){throw console.error("Error fetching dashboard stats:",e),e}}),getGeneralStats:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/general/stats/")).data}catch(e){throw console.error("Error fetching general stats:",e),e}}),getRelatedCourses:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/related/`)).data}catch(n){throw console.error("Error fetching related courses:",n),n}}),getCourseCollections:()=>$(null,null,function*(){try{return(yield ee.get("/api/extras/collections/with_courses/")).data}catch(e){throw console.error("Error fetching course collections:",e),e}}),getPromotionalBanners:()=>$(null,null,function*(){try{return(yield ee.get("/api/extras/banners/promotional/")).data}catch(e){throw console.error("Error fetching promotional banners:",e),e}}),getCourseReviews:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/reviews/`)).data}catch(n){throw console.error("Error fetching course reviews:",n),n}}),addCourseReview:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/courses/courses/${e}/reviews/`,n)).data}catch(a){throw console.error("Error adding course review:",a),a}}),getCourseProgress:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/progress/`)).data}catch(n){throw console.error("Error fetching course progress:",n),n}})},Ro={getCart:()=>$(null,null,function*(){try{return(yield ee.get("/api/store/cart/")).data}catch(e){throw console.error("Error fetching cart:",e),e}}),addToCart:e=>$(null,null,function*(){try{return(yield ee.post("/api/store/cart/items/",{course_id:e})).data}catch(n){throw console.error("Error adding to cart:",n),n}}),removeFromCart:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/store/cart/items/${e}/`)).data}catch(n){throw console.error("Error removing from cart:",n),n}}),updateCartItem:(e,n)=>$(null,null,function*(){try{return(yield ee.patch(`/api/store/cart/items/${e}/`,{quantity:n})).data}catch(a){throw console.error("Error updating cart item:",a),a}}),clearCart:()=>$(null,null,function*(){try{return(yield ee.delete("/api/store/cart/")).data}catch(e){throw console.error("Error clearing cart:",e),e}})},Au=oe(d)(({theme:e})=>({position:"relative",padding:e.spacing(12,0),overflow:"hidden",direction:"rtl",background:"#ffffff",[e.breakpoints.down("md")]:{padding:e.spacing(8,0)},[e.breakpoints.down("sm")]:{padding:e.spacing(6,0)}}));oe(d)(({theme:e,position:n="top"})=>({position:"relative",width:"100%",height:n==="top"?"120px":"100px",background:n==="top"?"linear-gradient(135deg, #0e5181 0%, #e5978b 50%, #0e5181 100%)":"linear-gradient(135deg, #e5978b 0%, #0e5181 50%, #e5978b 100%)",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 2px, transparent 2px),
      radial-gradient(circle at 80% 70%, rgba(255,255,255,0.1) 2px, transparent 2px),
      radial-gradient(circle at 40% 80%, rgba(255,255,255,0.1) 2px, transparent 2px),
      radial-gradient(circle at 90% 20%, rgba(255,255,255,0.1) 2px, transparent 2px)
    `,backgroundSize:"60px 60px, 60px 60px, 60px 60px, 60px 60px",backgroundPosition:"0 0, 30px 30px, 15px 45px, 45px 15px",animation:n==="top"?"float 6s ease-in-out infinite":"float 6s ease-in-out infinite reverse"},"&:after":{content:'""',position:"absolute",top:n==="top"?"0":"auto",bottom:n==="top"?"auto":"0",left:"0",right:"0",height:"4px",background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%)",animation:"shimmer 2s ease-in-out infinite"},"@keyframes float":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)"},"50%":{transform:"translateY(-10px) rotate(1deg)"}},"@keyframes shimmer":{"0%, 100%":{opacity:.3},"50%":{opacity:.8}},[e.breakpoints.down("md")]:{height:n==="top"?"100px":"80px"},[e.breakpoints.down("sm")]:{height:n==="top"?"80px":"60px"}}));oe(d)(({theme:e})=>({position:"relative",zIndex:2,textAlign:"center",color:"#fff","& .banner-title":{fontSize:"1.5rem",fontWeight:700,marginBottom:"8px",textShadow:"0 2px 4px rgba(0,0,0,0.2)",[e.breakpoints.down("md")]:{fontSize:"1.25rem"},[e.breakpoints.down("sm")]:{fontSize:"1.1rem"}},"& .banner-subtitle":{fontSize:"1rem",fontWeight:500,opacity:.9,[e.breakpoints.down("md")]:{fontSize:"0.9rem"},[e.breakpoints.down("sm")]:{fontSize:"0.8rem"}}}));oe(d)(({theme:e,position:n="top"})=>({position:"absolute",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"1.2rem",animation:n==="top"?"floatIcon 4s ease-in-out infinite":"floatIcon 4s ease-in-out infinite reverse","&:nth-child(1)":{top:"20%",left:"15%",animationDelay:"0s"},"&:nth-child(2)":{top:"60%",right:"20%",animationDelay:"1s"},"&:nth-child(3)":{bottom:"30%",left:"25%",animationDelay:"2s"},"@keyframes floatIcon":{"0%, 100%":{transform:"translateY(0px) scale(1)"},"50%":{transform:"translateY(-8px) scale(1.1)"}},[e.breakpoints.down("md")]:{width:"32px",height:"32px",fontSize:"1rem"},[e.breakpoints.down("sm")]:{width:"28px",height:"28px",fontSize:"0.9rem"}}));const F_=oe(d)(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:e.spacing(4),padding:e.spacing(0,2)})),H_=oe(f)(({theme:e})=>({fontWeight:800,position:"relative",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:"2rem",marginBottom:e.spacing(1),"&:after":{content:'""',position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:"80px",height:"4px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:"2px"},[e.breakpoints.down("sm")]:{fontSize:"1.6rem"}})),R2=oe(xe)(({theme:e})=>({backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(14, 81, 129, 0.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",color:"#0e5181",width:"48px",height:"48px","&:hover":{backgroundColor:"#0e5181",color:"#fff",transform:"scale(1.1)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.3)"},"&.Mui-disabled":{opacity:.5},[e.breakpoints.down("md")]:{width:"40px",height:"40px"}})),V_=oe(d)(({theme:e})=>({display:"flex",gap:e.spacing(2.5),transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",[e.breakpoints.down("md")]:{gap:e.spacing(2)}})),U_=oe(Je)(({theme:e})=>({width:"100%",borderRadius:e.shape.borderRadius,overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease, border 0.3s ease",position:"relative","&:hover":{transform:"translateY(-8px)",boxShadow:e.shadows[8],border:"2px solid rgba(14, 81, 129, 0.3)"},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 50%, #0e5181 100%)",zIndex:2},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,border:"1px solid rgba(14, 81, 129, 0.1)",borderRadius:e.shape.borderRadius,pointerEvents:"none",zIndex:1},"& .creative-corner":{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",borderTop:"2px solid #0e5181",borderRight:"2px solid #0e5181",borderTopRightRadius:"8px",zIndex:3},"& .creative-corner-2":{position:"absolute",bottom:"8px",left:"8px",width:"20px",height:"20px",borderBottom:"2px solid #e5978b",borderLeft:"2px solid #e5978b",borderBottomLeftRadius:"8px",zIndex:3},"& .floating-dots":{position:"absolute",top:"15px",left:"15px",zIndex:3,"& .dot":{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"rgba(14, 81, 129, 0.4)",marginBottom:"4px",animation:"float 3s ease-in-out infinite","&:nth-child(2)":{animationDelay:"0.5s",backgroundColor:"rgba(229, 151, 139, 0.4)"},"&:nth-child(3)":{animationDelay:"1s",backgroundColor:"rgba(14, 81, 129, 0.3)"}}},"@keyframes float":{"0%, 100%":{transform:"translateY(0px)",opacity:.4},"50%":{transform:"translateY(-6px)",opacity:.8}}})),q_=oe(d)(({theme:e})=>({position:"absolute",top:12,left:12,backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,padding:e.spacing(.5,1.5),borderRadius:e.shape.borderRadius,fontSize:"0.75rem",fontWeight:600,zIndex:1})),Y_=oe(hh)({position:"relative",paddingTop:"56.25%","&:hover .play-button":{opacity:1,transform:"scale(1.1)"}}),Q_=oe(d)(({theme:e})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(255, 255, 255, 0.9)",width:60,height:60,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",opacity:0,transition:"all 0.3s ease","&:hover":{backgroundColor:e.palette.primary.main,"& .MuiSvgIcon-root":{color:e.palette.primary.contrastText}}})),G_=oe(st)(({theme:e})=>({padding:e.spacing(2),"& .MuiRating-root":{direction:"ltr"}})),X_=oe(f)(({theme:e})=>({color:"#0e5181",fontSize:"0.75rem",fontWeight:600,marginBottom:e.spacing(.5)})),K_=oe(f)({display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",minHeight:"3.6em",lineHeight:"1.2"});oe(f)(({theme:e})=>({color:e.palette.text.secondary,fontSize:"0.875rem",marginBottom:e.spacing(1)}));const Z_=oe(d)({display:"flex",alignItems:"center",gap:"8px",marginTop:"8px"}),J_=oe(f)(({theme:e})=>({color:"#0e5181",fontWeight:700,fontSize:"1.25rem"})),eA=oe(f)(({theme:e})=>({color:e.palette.text.disabled,textDecoration:"line-through",fontSize:"0.875rem"}));oe(f)(({theme:e})=>({color:e.palette.text.secondary,fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"4px"}));const tA=oe(d)(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",gap:e.spacing(1),marginTop:e.spacing(3),direction:"rtl","& .indicator-dot":{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"rgba(14, 81, 129, 0.3)",cursor:"pointer",transition:"all 0.3s ease","&.active":{backgroundColor:"#0e5181",transform:"scale(1.2)"},"&:hover":{backgroundColor:"rgba(14, 81, 129, 0.6)"}}})),rA=oe(d)(({theme:e})=>({position:"relative",width:"100vw",height:"200px",margin:e.spacing(8,0),marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",borderRadius:0,overflow:"hidden",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:e.shadows[8]},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.8) 0%, rgba(229, 151, 139, 0.8) 100%)",zIndex:1},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      radial-gradient(circle at 20% 30%, rgba(255,255,255,0.1) 2px, transparent 2px),
      radial-gradient(circle at 80% 70%, rgba(255,255,255,0.1) 2px, transparent 2px),
      radial-gradient(circle at 40% 80%, rgba(255,255,255,0.1) 2px, transparent 2px)
    `,backgroundSize:"40px 40px, 40px 40px, 40px 40px",backgroundPosition:"0 0, 20px 20px, 10px 30px",animation:"float 8s ease-in-out infinite",zIndex:2},"@keyframes float":{"0%, 100%":{transform:"translateY(0px) rotate(0deg)"},"50%":{transform:"translateY(-5px) rotate(0.5deg)"}},[e.breakpoints.down("md")]:{height:"160px",margin:e.spacing(6,0),marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)"},[e.breakpoints.down("sm")]:{height:"140px",margin:e.spacing(5,0),marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)"}})),nA=oe("img")({width:"100%",height:"100%",objectFit:"cover",position:"absolute",top:0,left:0,zIndex:0}),iA=oe(d)(({theme:e})=>({position:"relative",zIndex:3,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",color:"#fff",padding:e.spacing(3),"& .banner-title":{fontSize:"1.8rem",fontWeight:700,marginBottom:e.spacing(1),textShadow:"0 2px 4px rgba(0,0,0,0.3)",[e.breakpoints.down("md")]:{fontSize:"1.5rem"},[e.breakpoints.down("sm")]:{fontSize:"1.3rem"}},"& .banner-description":{fontSize:"1rem",fontWeight:500,opacity:.9,textShadow:"0 1px 2px rgba(0,0,0,0.3)",[e.breakpoints.down("md")]:{fontSize:"0.9rem"},[e.breakpoints.down("sm")]:{fontSize:"0.8rem"}}})),aA=oe(d)(({theme:e})=>({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,"& .floating-element":{position:"absolute",width:"30px",height:"30px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"1rem",animation:"floatElement 6s ease-in-out infinite","&:nth-child(1)":{top:"15%",left:"10%",animationDelay:"0s"},"&:nth-child(2)":{top:"25%",right:"15%",animationDelay:"2s"},"&:nth-child(3)":{bottom:"20%",left:"20%",animationDelay:"4s"},"@keyframes floatElement":{"0%, 100%":{transform:"translateY(0px) scale(1)"},"50%":{transform:"translateY(-10px) scale(1.1)"}}},[e.breakpoints.down("md")]:{"& .floating-element":{width:"24px",height:"24px",fontSize:"0.8rem"}},[e.breakpoints.down("sm")]:{"& .floating-element":{width:"20px",height:"20px",fontSize:"0.7rem"}}})),oA=()=>{const e=Vt();Ri(e.breakpoints.down("sm")),Ri(e.breakpoints.between("sm","lg"));const[n,a]=w.useState([]),[l,u]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState({}),[S,_]=w.useState(4);if(w.useEffect(()=>{const T=()=>{window.innerWidth<768?_(1):window.innerWidth<1024?_(2):window.innerWidth<1200?_(3):_(4)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),w.useEffect(()=>{if(n.length>0){const T={};n.forEach(z=>{T[z.id]=0}),v(T)}},[n]),w.useEffect(()=>{$(null,null,function*(){try{h(!0);const[z,N]=yield Promise.all([tn.getCourseCollections(),tn.getPromotionalBanners()]);a(z),u(N)}catch(z){console.error("Error fetching data:",z),m("حدث خطأ في تحميل البيانات")}finally{h(!1)}})},[]),p)return t(Au,{children:t(Qe,{maxWidth:"lg",children:[1,2,3].map(T=>s(d,{sx:{mb:6},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[s(d,{children:[t(d,{sx:{width:200,height:32,bgcolor:"grey.300",borderRadius:1,mb:1}}),t(d,{sx:{width:300,height:20,bgcolor:"grey.200",borderRadius:1}})]}),t(d,{sx:{width:100,height:36,bgcolor:"grey.300",borderRadius:1}})]}),t(d,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(auto-fill, minmax(280px, 1fr))",sm:"repeat(auto-fill, minmax(300px, 1fr))",md:"repeat(auto-fill, minmax(320px, 1fr))",lg:"repeat(auto-fill, minmax(350px, 1fr))"},gap:3},children:[1,2,3,4].map(z=>s(d,{sx:{bgcolor:"grey.100",borderRadius:2,height:400,display:"flex",flexDirection:"column"},children:[t(d,{sx:{height:200,bgcolor:"grey.300",borderRadius:"8px 8px 0 0"}}),s(d,{sx:{p:2,flex:1,display:"flex",flexDirection:"column",gap:1},children:[t(d,{sx:{width:"60%",height:16,bgcolor:"grey.300",borderRadius:1}}),t(d,{sx:{width:"90%",height:20,bgcolor:"grey.300",borderRadius:1}}),t(d,{sx:{width:"70%",height:16,bgcolor:"grey.200",borderRadius:1}}),t(d,{sx:{width:"40%",height:16,bgcolor:"grey.200",borderRadius:1}})]})]},z))})]},T))})});if(x)return t(Au,{children:t(Qe,{maxWidth:"lg",children:s(d,{sx:{textAlign:"center",py:8,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t(f,{variant:"h5",color:"error.main",sx:{mb:2},children:"حدث خطأ في تحميل المجموعات"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:x}),t(te,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),sx:{borderRadius:"8px",textTransform:"none"},children:"إعادة المحاولة"})]})})});const k=T=>{v(z=>{const N=n.find(J=>J.id===T);if(!N||!N.courses)return z;const G=Math.max(0,N.courses.length-S);return ae(q({},z),{[T]:Math.min(z[T]+1,G)})})},E=T=>{v(z=>ae(q({},z),{[T]:Math.max(0,z[T]-1)}))},R=(T,z)=>{v(N=>ae(q({},N),{[T]:z}))},W=(T,z)=>!T||!T.is_active?null:s(rA,{onClick:()=>{T.url&&window.open(T.url,"_blank")},children:[T.image_url&&t(nA,{src:T.image_url,alt:T.title,onError:N=>{N.target.style.display="none"}}),s(iA,{children:[t(f,{variant:"h4",className:"banner-title",children:T.title}),T.description&&t(f,{variant:"body1",className:"banner-description",children:T.description})]}),s(aA,{children:[t(d,{className:"floating-element",children:"🎯"}),t(d,{className:"floating-element",children:"✨"}),t(d,{className:"floating-element",children:"🚀"})]})]},`banner-${T.id}-${z}`);return!n||n.length===0?t(Au,{children:t(Qe,{maxWidth:"lg",children:s(d,{sx:{textAlign:"center",py:8,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t(f,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"لا توجد مجموعات متاحة حالياً"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"سيتم إضافة مجموعات جديدة قريباً"}),t(te,{variant:"outlined",color:"primary",component:Qt,to:"/courses",sx:{borderRadius:"8px",textTransform:"none"},children:"تصفح جميع الدورات"})]})})}):t(Au,{children:s(Qe,{maxWidth:"lg",children:[n.map((T,z)=>s(d,{children:[z>0&&l.length>0&&W(l[(z-1)%l.length],z-1),s(d,{sx:{mb:6},children:[s(F_,{children:[s(d,{children:[t(H_,{variant:"h4",component:"h2",children:T.name}),T.description&&t(f,{variant:"body1",color:"text.secondary",sx:{mt:2,fontSize:"0.9rem",lineHeight:1.6},children:T.description})]}),t(te,{variant:"outlined",component:Qt,to:`/courses?collection=${T.slug}`,endIcon:t(gy,{}),sx:{borderRadius:"12px",textTransform:"none",fontWeight:600,px:3,py:1.5,border:"1.5px solid #0e5181",color:"#0e5181",background:"linear-gradient(90deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",color:"#fff",transform:"translateY(-2px)",boxShadow:"0 6px 12px rgba(14, 81, 129, 0.2)",borderColor:"transparent"},"&:active":{transform:"translateY(0)",boxShadow:"0 2px 4px rgba(14, 81, 129, 0.1)"},"& .MuiButton-endIcon":{transition:"transform 0.3s ease"},"&:hover .MuiButton-endIcon":{transform:"translateX(4px)"}},children:"عرض الكل"})]}),T.courses&&T.courses.length>0?s(d,{sx:{position:"relative",overflow:"hidden",width:"100%",margin:"0 auto"},children:[y[T.id]>0&&t(R2,{onClick:()=>E(T.id),sx:{position:"absolute",left:e.spacing(2),top:"50%",transform:"translateY(-50%)",zIndex:10},children:t(Hk,{})}),y[T.id]<Math.max(0,T.courses.length-S)&&t(R2,{onClick:()=>k(T.id),sx:{position:"absolute",right:e.spacing(2),top:"50%",transform:"translateY(-50%)",zIndex:10},children:t(gy,{})}),t(V_,{sx:{transform:`translateX(${y[T.id]*(S===1?100:S===2?304:S===3?344:374)}px)`,[e.breakpoints.down("sm")]:{transform:`translateX(${y[T.id]*100}%)`}},children:T.courses.map(N=>{var G;return t(d,{sx:{flex:`0 0 ${S===1?"100%":S===2?"280px":S===3?"320px":"350px"}`,width:S===1?"100%":S===2?"280px":S===3?"320px":"350px"},children:s(U_,{component:Qt,to:`/courses/${N.id}`,sx:{textDecoration:"none",color:"inherit"},children:[s(d,{sx:{position:"relative"},children:[t(Y_,{image:N.image_url||"https://via.placeholder.com/300x180",title:N.title,children:t(Q_,{className:"play-button",children:t(Ic,{fontSize:"large",color:"primary"})})}),N.discount_price&&N.price&&N.discount_price!==N.price&&s(q_,{children:[Math.round((1-parseFloat(N.discount_price)/parseFloat(N.price))*100),"% خصم"]})]}),s(G_,{sx:{p:1.5},children:[t(X_,{sx:{mb:.8,fontSize:"0.7rem",fontWeight:600,color:"#0e5181",opacity:.8},children:N.category_name||"بدون تصنيف"}),t(K_,{variant:"subtitle1",component:"h3",sx:{color:"#0e5181",fontWeight:700,fontSize:"0.95rem",mb:1,lineHeight:1.2,minHeight:"2.2em"},children:N.title}),s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:.8},children:[t(d,{sx:{width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"0.7rem",fontWeight:700},children:N.instructors&&N.instructors.length>0&&((G=N.instructors[0].name)==null?void 0:G.charAt(0))||"م"}),t(f,{variant:"caption",sx:{color:"text.secondary",fontWeight:500,fontSize:"0.75rem"},children:N.instructors&&N.instructors.length>0?N.instructors[0].name:"مدرب غير محدد"})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(ua,{value:N.rating||0,precision:.1,readOnly:!0,size:"small",sx:{"& .MuiRating-icon":{fontSize:"0.8rem"},"& .MuiRating-iconFilled":{color:"#ffc107"}}}),s(f,{variant:"caption",sx:{color:"#ffc107",fontWeight:600,fontSize:"0.7rem"},children:["(",N.rating||0,")"]})]})]}),s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1.2,pb:1,borderBottom:"1px solid rgba(14, 81, 129, 0.1)"},children:[s(f,{variant:"caption",sx:{color:"#0e5181",fontSize:"0.7rem",fontWeight:600},children:[N.lessons_count||0," درس"]}),s(f,{variant:"caption",sx:{color:"#e5978b",fontSize:"0.7rem",fontWeight:600},children:[N.enrolled_count||0," طالب"]}),t(f,{variant:"caption",sx:{color:"#0e5181",fontWeight:600,fontSize:"0.7rem",bgcolor:"rgba(14, 81, 129, 0.08)",px:1,py:.3,borderRadius:"8px"},children:N.level==="beginner"?"مبتدئ":N.level==="intermediate"?"متوسط":N.level==="advanced"?"متقدم":"مبتدئ"})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(Z_,{children:[t(J_,{sx:{color:"#e5978b",fontWeight:700,fontSize:"1rem"},children:N.is_free?"مجاني":`${N.discount_price||N.price} ر.س`}),N.discount_price&&N.price&&N.discount_price!==N.price&&t(eA,{sx:{fontSize:"0.75rem"},children:`${N.price} ر.س`})]}),t(xe,{size:"small",sx:{color:"#0e5181","&:hover":{color:"#e5978b",backgroundColor:"rgba(14, 81, 129, 0.08)"},transition:"all 0.3s ease"},children:t(Xs,{fontSize:"small"})})]})]})]})},N.id)})}),T.courses&&T.courses.length>S&&t(tA,{children:Array.from({length:Math.ceil(T.courses.length/S)},(N,G)=>t(d,{className:"indicator-dot",onClick:()=>R(T.id,G),sx:{backgroundColor:G===y[T.id]?"#0e5181":"rgba(14, 81, 129, 0.3)",transform:G===y[T.id]?"scale(1.2)":"scale(1)",cursor:"pointer"}},G))})]}):s(d,{sx:{textAlign:"center",py:6,bgcolor:"grey.50",borderRadius:2,border:"1px dashed",borderColor:"grey.300"},children:[t(f,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"لا توجد دورات في هذه المجموعة حالياً"}),t(f,{variant:"body2",color:"text.secondary",children:"سيتم إضافة دورات جديدة قريباً"})]})]})]},T.id)),n.length>0&&l.length>0&&W(l[n.length%l.length],n.length)]})})},xg=[{id:1,name:"أحمد محمد",role:"مطور ويب",avatar:"https://randomuser.me/api/portraits/men/1.jpg",content:"الدورات المقدمة ممتازة وسهلة الفهم. ساعدتني في تطوير مهاراتي البرمجية بشكل كبير.",rating:5,bgColor:"#0e5181"},{id:2,name:"سارة أحمد",role:"مصممة واجهات",avatar:"https://randomuser.me/api/portraits/women/1.jpg",content:"تجربة تعليمية رائعة مع معهد التطوير المهني. المحتوى منظم والمدربون محترفون للغاية.",rating:5,bgColor:"#e5978b"},{id:3,name:"خالد عبدالله",role:"محلل بيانات",avatar:"https://randomuser.me/api/portraits/men/2.jpg",content:"استفدت كثيراً من دورات تحليل البيانات. أنصح الجميع بالانضمام إلى هذا المعهد المتميز.",rating:4,bgColor:"#0e5181"},{id:4,name:"نورة سعيد",role:"مسوقة رقمية",avatar:"https://randomuser.me/api/portraits/women/2.jpg",content:"دورات التسويق الرقمي غنية بالمعلومات العملية والتطبيقية. شكراً لفريق العمل الرائع.",rating:5,bgColor:"#e5978b"},{id:5,name:"محمد علي",role:"مطور تطبيقات",avatar:"https://randomuser.me/api/portraits/men/3.jpg",content:"المحتوى المقدم حديث ومتوافق مع أحدث التقنيات. أنصح بهذا المعهد لكل من يريد تطوير مهاراته التقنية.",rating:4,bgColor:"#0e5181"}];ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-15px); }
  100% { transform: translateY(0px); }
`;const sA=oe(d)(({theme:e})=>({padding:e.spacing(0,0,4,0),position:"relative",overflow:"hidden",background:"#ffffff",[e.breakpoints.down("md")]:{padding:e.spacing(0,0,3,0)},[e.breakpoints.down("sm")]:{padding:e.spacing(0,0,2,0)},"&:before":{content:'""',position:"absolute",width:"400px",height:"400px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(14, 81, 129, 0.03) 0%, rgba(229, 151, 139, 0.03) 100%)",top:"-200px",right:"-200px",zIndex:0},"&:after":{content:'""',position:"absolute",width:"300px",height:"300px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(229, 151, 139, 0.02) 0%, rgba(14, 81, 129, 0.02) 100%)",bottom:"-150px",left:"-150px",zIndex:0}})),lA=oe(d)(({theme:e})=>({textAlign:"center",marginBottom:e.spacing(2),position:"relative",zIndex:1,[e.breakpoints.down("sm")]:{marginBottom:e.spacing(1)}})),cA=oe(f)(({theme:e})=>({fontWeight:800,marginBottom:e.spacing(2),position:"relative",display:"inline-block",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:"2rem",[e.breakpoints.down("sm")]:{fontSize:"1.5rem"},"&:after":{content:'""',position:"absolute",right:"50%",bottom:-8,transform:"translateX(50%)",width:50,height:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:2}})),dA=oe(f)(({theme:e})=>({color:e.palette.text.secondary,maxWidth:700,margin:"0 auto",fontSize:"1.1rem",lineHeight:1.8,[e.breakpoints.down("sm")]:{fontSize:"1rem"}})),uA=oe(Vk)(({theme:e})=>({position:"absolute",right:e.spacing(2),bottom:e.spacing(2),color:"rgba(0, 0, 0, 0.03)",fontSize:"6rem",zIndex:0,transform:"scaleX(-1)"}));oe(f)(({theme:e})=>({fontWeight:700,marginBottom:2,color:e.palette.text.primary,fontSize:"1.1rem"}));const hA=oe(f)(({theme:e})=>({marginBottom:e.spacing(4),position:"relative",paddingRight:e.spacing(5),fontSize:"1.1rem",lineHeight:1.9,color:e.palette.text.secondary,"&:before":{content:'"“"',position:"absolute",right:0,top:-15,fontSize:"5rem",lineHeight:1,color:"rgba(74, 108, 247, 0.1)",fontFamily:"Georgia, serif",zIndex:-1}}));oe(d)(({theme:e})=>({display:"flex",alignItems:"center",marginTop:"auto",paddingTop:e.spacing(2),borderTop:"1px solid rgba(0, 0, 0, 0.05)"}));oe(_t,{shouldForwardProp:e=>e!=="bgColor"})(({theme:e,bgColor:n})=>({width:60,height:60,marginRight:e.spacing(2),border:"3px solid #fff",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)"},backgroundColor:n||e.palette.primary.main}));oe(d)({display:"flex",flexDirection:"column"});oe(f)(({theme:e})=>({color:e.palette.text.secondary,fontSize:"0.9rem",opacity:.8}));oe(d)(({theme:e,rating:n})=>({display:"inline-flex",alignItems:"center",marginTop:e.spacing(1),"& .MuiSvgIcon-root":{fontSize:"1.2rem",color:"#FFD700"}}));const V5=oe("button")(({theme:e,disabled:n})=>({position:"absolute",top:"50%",transform:"translateY(-50%)",width:48,height:48,borderRadius:"50%",backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:n?"not-allowed":"pointer",opacity:n?.5:1,transition:"all 0.3s ease","&:hover:not(:disabled)":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,borderColor:e.palette.primary.main},"&:focus":{outline:"none",boxShadow:`0 0 0 3px ${e.palette.primary.light}`}}));oe(V5)(({theme:e})=>({right:-24,[e.breakpoints.down("md")]:{right:-16}}));oe(V5)(({theme:e})=>({left:-24,[e.breakpoints.down("md")]:{left:-16}}));const fA=oe(d,{shouldForwardProp:e=>e!=="bgColor"&&e!=="isActive"})(({theme:e,bgColor:n,isActive:a})=>({backgroundColor:"#fff",borderRadius:"14px",padding:e.spacing(2,2),boxShadow:"0 6px 20px rgba(0, 0, 0, 0.05)",width:"calc(50% - 16px)",maxWidth:"calc(50% - 16px)",minHeight:"160px",flex:"0 0 auto",margin:e.spacing(0,1),display:"flex",flexDirection:"column",position:"relative",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(0, 0, 0, 0.05)",overflow:"hidden",zIndex:a?2:1,opacity:a?1:.8,transform:a?"scale(1.02)":"scale(0.98)","&:hover":{transform:a?"scale(1.05)":"scale(1.02)",boxShadow:"0 12px 35px rgba(0, 0, 0, 0.1)",opacity:1},"&:before":{content:'""',position:"absolute",top:0,right:0,width:"100%",height:"3px",background:n||e.palette.primary.main,zIndex:2,transition:"all 0.3s ease"},[e.breakpoints.down("lg")]:{width:"calc(50% - 16px)",maxWidth:"calc(50% - 16px)",minHeight:"140px",margin:e.spacing(0,1)},[e.breakpoints.down("sm")]:{width:"calc(100% - 16px)",maxWidth:"calc(100% - 16px)",minHeight:"120px",margin:e.spacing(0,.5),padding:e.spacing(1.5,1.5)},[e.breakpoints.down("xs")]:{width:"calc(100% - 12px)",maxWidth:"calc(100% - 12px)",margin:e.spacing(0,.25),padding:e.spacing(1.5,1)}})),pA=()=>{const e=Vt(),n=Ri(e.breakpoints.down("sm")),a=ut.useRef(null),[l,u]=w.useState(0),[p,h]=w.useState(!1),x=m=>{if(!a.current||p)return;h(!0);const y=a.current,v=y.querySelectorAll("[data-testimonial-card]");if(m>=0&&m<v.length){const S=v[m],_=y.offsetWidth,k=S.offsetWidth,E=S.offsetLeft-(_-k)/2;y.scrollTo({left:E,behavior:"smooth"}),u(m),setTimeout(()=>{h(!1)},800)}};return w.useEffect(()=>{if(n)return;const m=setInterval(()=>{const y=(l+1)%xg.length;x(y)},5e3);return()=>clearInterval(m)},[l,n]),t(sA,{children:s(Qe,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:[s(lA,{children:[t(cA,{variant:"h2",component:"h2",children:"آراء طلابنا"}),t(dA,{children:"اكتشف ما يقوله طلابنا عن تجربتهم مع منصتنا التعليمية"})]}),s(d,{sx:{position:"relative",width:"100%",overflow:"hidden",padding:e.spacing(3,0,6),"&:hover .nav-button":{opacity:1}},children:[t(d,{ref:a,sx:{display:"flex",overflowX:"auto",scrollBehavior:"smooth",scrollSnapType:"x mandatory",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"},padding:e.spacing(4,0),margin:e.spacing(0,"auto"),maxWidth:"1400px",width:"100%","& > *":{scrollSnapAlign:"center"},[e.breakpoints.down("sm")]:{padding:e.spacing(3,0),scrollPadding:"0 24px"}},children:xg.map((m,y)=>s(fA,{"data-testimonial-card":!0,bgColor:m.bgColor,isActive:l===y,"data-aos":"fade-up","data-aos-delay":y*100,onClick:()=>x(y),children:[t(hA,{children:m.content}),t(uA,{}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto",pt:2,borderTop:"1px solid rgba(0, 0, 0, 0.05)"},children:[t(f,{variant:"body2",sx:{fontWeight:600,color:"text.primary",fontSize:"0.9rem"},children:m.name}),t(f,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.8rem"},children:new Date().toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"})})]})]},m.id))}),t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,mt:4},children:xg.map((m,y)=>t(d,{onClick:()=>x(y),sx:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:y===l?"#0e5181":"rgba(14, 81, 129, 0.3)",cursor:"pointer",transition:"all 0.3s ease","&:hover":{backgroundColor:y===l?"#0e5181":"rgba(14, 81, 129, 0.6)",transform:"scale(1.2)"}}},y))})]})]})})},gA=ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,mA=oe(d)(({theme:e})=>({padding:e.spacing(6,0),background:"#ffffff",position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",width:"400px",height:"400px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(14, 81, 129, 0.03) 0%, rgba(229, 151, 139, 0.03) 100%)",top:"-200px",right:"-200px",zIndex:0},"&:after":{content:'""',position:"absolute",width:"300px",height:"300px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(229, 151, 139, 0.02) 0%, rgba(14, 81, 129, 0.02) 100%)",bottom:"-150px",left:"-150px",zIndex:0},"& .creative-pattern":{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:.03,zIndex:0,backgroundImage:`
      radial-gradient(circle at 20% 30%, #0e5181 1px, transparent 1px),
      radial-gradient(circle at 80% 70%, #e5978b 1px, transparent 1px),
      radial-gradient(circle at 40% 80%, #0e5181 1px, transparent 1px),
      radial-gradient(circle at 90% 20%, #e5978b 1px, transparent 1px),
      linear-gradient(45deg, transparent 49.5%, rgba(14, 81, 129, 0.08) 50%, transparent 50.5%),
      linear-gradient(-45deg, transparent 49.5%, rgba(229, 151, 139, 0.08) 50%, transparent 50.5%)
    `,backgroundSize:"120px 120px, 120px 120px, 120px 120px, 120px 120px, 200px 200px, 200px 200px",backgroundPosition:"0 0, 60px 60px, 30px 90px, 90px 30px, 0 0, 0 0"},[e.breakpoints.down("md")]:{padding:e.spacing(8,0)}})),xA=oe(f)(({theme:e})=>({fontWeight:800,textAlign:"center",marginBottom:e.spacing(1),background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:"2.5rem",position:"relative","&:after":{content:'""',position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:"80px",height:"4px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:"2px"},[e.breakpoints.down("sm")]:{fontSize:"2rem"}})),bA=oe(f)(({theme:e})=>({textAlign:"center",color:e.palette.text.secondary,maxWidth:"700px",margin:"0 auto",marginBottom:e.spacing(6),fontSize:"1.1rem",[e.breakpoints.down("sm")]:{fontSize:"1rem",padding:e.spacing(0,2)}})),yA=oe(bn)(({theme:e})=>({marginBottom:e.spacing(6),"& .MuiTabs-flexContainer":{justifyContent:"center",gap:e.spacing(1),background:"rgba(255, 255, 255, 0.7)",padding:e.spacing(1.5,2),borderRadius:"50px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",maxWidth:"fit-content",margin:"0 auto"},"& .MuiTab-root":{textTransform:"none",fontWeight:700,fontSize:"1rem",color:e.palette.text.secondary,minWidth:"auto",padding:e.spacing(1,3),borderRadius:"50px",transition:"all 0.3s ease","&:hover":{color:"#0e5181",transform:"translateY(-2px)"},"&.Mui-selected":{color:"#fff",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.3)"}},"& .MuiTabs-indicator":{display:"none"},[e.breakpoints.down("sm")]:{"& .MuiTabs-flexContainer":{padding:e.spacing(1)},"& .MuiTab-root":{fontSize:"0.85rem",padding:e.spacing(.5,1.5)}}})),vA=oe(Je,{shouldForwardProp:e=>e!=="delay"})(({theme:e,delay:n=0})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.03)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",position:"relative",cursor:"pointer","&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.08)","& .card-hover-effect":{opacity:1,transform:"scale(1.03)"},"& .course-image":{transform:"scale(1.05)"},"& .course-stats":{opacity:1,transform:"translateY(0)"}},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"5px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",zIndex:2},animation:`${gA} 6s ease-in-out infinite`,animationDelay:`${n*.2}s`,opacity:1})),wA=oe(d)(({theme:e})=>({position:"relative",height:{xs:"160px",sm:"180px",md:"200px"},overflow:"hidden",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","& .course-image":{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.4s ease"}})),bg=oe(d)(({theme:e,variant:n="primary"})=>q(q(q({position:"absolute",top:"12px",right:"12px",padding:"4px 12px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:600,zIndex:3},n==="free"&&{background:"linear-gradient(90deg, #e5978b 0%, #d18a7a 100%)",color:"#fff"}),n==="featured"&&{background:"linear-gradient(90deg, #ffc107 0%, #ff9800 100%)",color:"#fff"}),n==="new"&&{background:"linear-gradient(90deg, #e5978b 0%, #45a049 100%)",color:"#fff"}));oe(d)(({theme:e,bgcolor:n})=>({padding:e.spacing(2.5,3),background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"#fff",display:"flex",alignItems:"center",position:"relative",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%)"},"& .MuiSvgIcon-root":{marginLeft:e.spacing(1.5),fontSize:"2.2rem",position:"relative",zIndex:1,background:"rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"8px"},"& h3":{position:"relative",zIndex:1,margin:0,fontWeight:700,fontSize:"1.1rem"}}));const SA=oe(st)(({theme:e})=>({padding:{xs:e.spacing(2),sm:e.spacing(3)},position:"relative",zIndex:1,background:"#fff",borderRadius:"0 0 20px 20px",flex:1,display:"flex",flexDirection:"column","& h3":{marginTop:0,marginBottom:e.spacing(1.5),color:e.palette.text.primary,fontWeight:700,fontSize:{xs:"1.1rem",sm:"1.25rem"},lineHeight:1.4,minHeight:{xs:"2.5rem",sm:"3rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},"& p":{color:e.palette.text.secondary,marginBottom:e.spacing(2),minHeight:{xs:"60px",sm:"72px"},lineHeight:1.7,fontSize:{xs:"0.9rem",sm:"0.95rem"},display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},"& ul":{paddingRight:"20px",margin:"12px 0","& li":{marginBottom:"8px",position:"relative",paddingRight:"24px","&:before":{content:'""',position:"absolute",right:0,top:"8px",width:"8px",height:"8px",borderRadius:"50%",background:"#0e5181"}}}})),CA=oe(d)(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(0,3,3,3),marginTop:"auto","& .MuiButton-root":{textTransform:"none",fontWeight:500,letterSpacing:"0.3px",padding:"10px 24px",borderRadius:"12px",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)",position:"relative",overflow:"hidden",backgroundColor:"transparent",color:"#0e5181",border:"1.5px solid #0e5181","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.04)",transform:"translateY(-2px)",boxShadow:"0 6px 12px rgba(14, 81, 129, 0.1)",borderColor:"#0e5181"},"&:active":{transform:"translateY(0)",boxShadow:"0 2px 4px rgba(14, 81, 129, 0.1)"},"& .MuiButton-endIcon":{transition:"transform 0.3s ease",marginRight:e.spacing(.5),marginLeft:0},"&:hover .MuiButton-endIcon":{transform:"translateX(-4px)"},"& span":{position:"relative",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem"}},"& .MuiTypography-body2":{display:"flex",alignItems:"center",gap:"6px",color:e.palette.text.secondary,fontSize:"0.85rem","& svg":{color:"#0e5181",fontSize:"1rem"}}})),kA=e=>{const p=e,{children:n,value:a,index:l}=p,u=un(p,["children","value","index"]);return t("div",ae(q({role:"tabpanel",hidden:a!==l,id:`tabpanel-${l}`,"aria-labelledby":`tab-${l}`},u),{children:a===l&&t(d,{sx:{pt:3},children:n})}))},_A=oe(d)(({theme:e})=>({position:"relative",width:"100%",overflow:"hidden",padding:e.spacing(0,1),direction:"rtl","& .slider-track":{display:"flex",transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",gap:e.spacing(3),flexDirection:"row-reverse",[e.breakpoints.down("sm")]:{gap:e.spacing(2)}},"& .slider-item":{flex:"0 0 300px",width:"300px",direction:"ltr",[e.breakpoints.down("md")]:{flex:"0 0 280px",width:"280px"},[e.breakpoints.down("sm")]:{flex:"0 0 100%",width:"100%"}}})),E2=oe(xe)(({theme:e,direction:n})=>ae(q(q({position:"absolute",top:"50%",transform:"translateY(-50%)",zIndex:10,background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"50%",width:"48px",height:"48px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(14, 81, 129, 0.1)",color:"#0e5181","&:hover":{background:"#0e5181",color:"#fff",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.3)"}},n==="left"&&{right:e.spacing(2)}),n==="right"&&{left:e.spacing(2)}),{[e.breakpoints.down("md")]:q(q({width:"40px",height:"40px"},n==="left"&&{right:e.spacing(1)}),n==="right"&&{left:e.spacing(1)})})),AA=oe(d)(({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",gap:e.spacing(1),marginTop:e.spacing(3),direction:"rtl","& .indicator-dot":{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"rgba(14, 81, 129, 0.3)",cursor:"pointer",transition:"all 0.3s ease","&.active":{backgroundColor:"#0e5181",transform:"scale(1.2)"},"&:hover":{backgroundColor:"rgba(14, 81, 129, 0.6)"}}})),zA=()=>{const e=Vt();Ri(e.breakpoints.down("md"));const[n,a]=w.useState(0),[l,u]=w.useState([]),[p,h]=w.useState([]),[x,m]=w.useState(!0),[y,v]=w.useState(null),S=nt(),_=(V,Y)=>{a(Y),G(0),l[Y]&&E(l[Y].id)},k=()=>$(null,null,function*(){try{m(!0);const V=yield xn.getCategories();u(V),V.length>0&&(yield E(V[0].id))}catch(V){console.error("Error loading categories:",V),v("حدث خطأ في تحميل التصنيفات")}finally{m(!1)}}),E=V=>$(null,null,function*(){try{m(!0);const Y=yield xn.getPublicCourses({category:V});h(Array.isArray(Y)?Y:Y.results||Y.data||[])}catch(Y){console.error("Error loading courses:",Y),v("حدث خطأ في تحميل الدورات"),h([])}finally{m(!1)}});w.useEffect(()=>{k()},[]);const R=V=>{const Y=(V==null?void 0:V.toLowerCase())||"";return Y.includes("دورة")||Y.includes("course")?t(bt,{}):Y.includes("تدريب")||Y.includes("training")?t(Mw,{}):Y.includes("دبلوم")||Y.includes("diploma")?t(nl,{}):t(bt,{})},W=V=>{S(`/courses/${V}`)},[T,z]=w.useState(3),[N,G]=w.useState(0);w.useEffect(()=>{const V=()=>{window.innerWidth<768?z(1):window.innerWidth<1024?z(2):z(3)};return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const J=()=>{G(V=>Math.min(V+1,Math.max(0,p.length-T)))},H=()=>{G(V=>Math.max(0,V-1))},U=V=>{G(V)},A=()=>{if(x)return s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:6,gap:2},children:[t(Ke,{sx:{color:"#0e5181"}}),t(f,{variant:"body1",color:"text.secondary",children:"جاري تحميل الدورات..."})]});if(y)return s(d,{sx:{py:4,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t(Be,{severity:"error",sx:{maxWidth:"600px",width:"100%","& .MuiAlert-message":{textAlign:"center"}},children:y}),t(te,{variant:"outlined",onClick:()=>{v(null),k()},sx:{color:"#0e5181",borderColor:"#0e5181"},children:"إعادة المحاولة"})]});if(p.length===0)return s(d,{sx:{textAlign:"center",py:6,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t(d,{sx:{width:"80px",height:"80px",borderRadius:"50%",bgcolor:"rgba(14, 81, 129, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:t(bt,{sx:{fontSize:"2rem",color:"#0e5181"}})}),t(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"لا توجد دورات متاحة في هذا التصنيف حالياً"}),t(f,{variant:"body2",color:"text.secondary",children:"سيتم إضافة دورات جديدة قريباً"})]});const V=Math.max(0,p.length-T),Y=N<V,P=N>0,I=Math.ceil(p.length/T);return s(_A,{children:[P&&s(E2,{direction:"left",onClick:H,children:[t(E0,{})," "]}),Y&&s(E2,{direction:"right",onClick:J,children:[t(T0,{})," "]}),t(d,{className:"slider-track",sx:{transform:`translateX(${N*(T===1?100:T===2?304:324)}px)`,[e.breakpoints.down("sm")]:{transform:`translateX(${N*100}%)`}},children:p.map((B,F)=>{var Q,M,O;return t(d,{className:"slider-item",children:t(Uk,{in:!0,timeout:F*200,children:t(d,{children:s(vA,{delay:F,onClick:()=>W(B.id),children:[s(wA,{children:[t("img",{src:B.image_url||"/src/assets/images/bannar.jpeg",alt:B.title,className:"course-image",onError:C=>{C.target.src="/src/assets/images/bannar.jpeg"}}),B.is_free&&t(bg,{variant:"free",children:"مجاني"}),B.is_featured&&t(bg,{variant:"featured",children:"مميز"}),B.is_certified&&t(bg,{variant:"new",children:"معتمد"})]}),s(SA,{children:[t(f,{variant:"h6",component:"h3",children:B.title}),B.instructors&&B.instructors.length>0&&s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1.5,p:1,bgcolor:"rgba(14, 81, 129, 0.05)",borderRadius:"8px"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(d,{sx:{width:"24px",height:"24px",borderRadius:"50%",bgcolor:"#0e5181",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"0.7rem",fontWeight:600},children:((M=(Q=B.instructors[0])==null?void 0:Q.name)==null?void 0:M.charAt(0))||"م"}),t(f,{variant:"caption",sx:{color:"text.secondary",fontWeight:500},children:((O=B.instructors[0])==null?void 0:O.name)||"مدرب غير محدد"})]}),t(xe,{size:"small",onClick:C=>{C.stopPropagation(),W(B.id)},sx:{width:"28px",height:"28px",bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"#fff",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:t(M0,{sx:{fontSize:"1rem"}})})]})]}),t(CA,{})]})})})},B.id)})}),p.length>T&&t(AA,{children:Array.from({length:I},(B,F)=>t(d,{className:`indicator-dot ${N===F?"active":""}`,onClick:()=>U(F)},F))})]})};return s(mA,{children:[t(d,{className:"creative-pattern"}),s(Qe,{maxWidth:"lg",children:[s(d,{sx:{position:"relative",zIndex:1,mb:8},children:[t(xA,{variant:"h2",component:"h2","data-aos":"fade-up","data-aos-delay":"100",children:"أساليب تعليمية مبتكرة"}),t(bA,{"data-aos":"fade-up","data-aos-delay":"200",sx:{mt:4},children:"اكتشف طرق تعلم جديدة ومبتكرة تناسب احتياجاتك وتواكب متطلبات سوق العمل"})]}),t(d,{sx:{position:"relative",zIndex:1},children:t(ji,{in:!0,timeout:500,children:t(d,{children:x&&l.length===0?s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:6,gap:2},children:[t(Ke,{sx:{color:"#0e5181"}}),t(f,{variant:"body1",color:"text.secondary",children:"جاري تحميل التصنيفات..."})]}):s(Bt,{children:[t(yA,{value:n,onChange:_,variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,"aria-label":"learning methods tabs","data-aos":"fade-up","data-aos-delay":"300",children:l.map((V,Y)=>t(ft,{label:s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[R(V.name),t("span",{children:V.name}),V.courses_count>0&&t(d,{sx:{bgcolor:"rgba(255, 255, 255, 0.2)",color:"#fff",px:1,py:.2,borderRadius:"10px",fontSize:"0.7rem",fontWeight:600,minWidth:"20px",textAlign:"center"},children:V.courses_count})]}),iconPosition:"start"},V.id))}),t(d,{mt:2,children:t(kA,{value:n,index:n,children:A()})})]})})})})]})]})},U5=ht`
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-8px) rotate(1deg); }
`,X0=ht`
  0%, 100% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.05); opacity: 1; }
`,RA=ht`
  0% { transform: translateX(-100px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
`,EA=oe(d)(({theme:e})=>({position:"relative",padding:e.spacing(4,0),background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",overflow:"hidden","&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`
      radial-gradient(circle at 20% 30%, rgba(14, 81, 129, 0.03) 2px, transparent 2px),
      radial-gradient(circle at 80% 70%, rgba(229, 151, 139, 0.03) 2px, transparent 2px),
      radial-gradient(circle at 40% 80%, rgba(14, 81, 129, 0.02) 2px, transparent 2px)
    `,backgroundSize:"60px 60px, 60px 60px, 60px 60px",backgroundPosition:"0 0, 30px 30px, 15px 45px",animation:`${U5} 8s ease-in-out infinite`},"&:after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent 0%, #0e5181 50%, transparent 100%)",animation:`${X0} 3s ease-in-out infinite`}})),TA=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",gap:e.spacing(1),position:"relative",zIndex:2,padding:e.spacing(2,0),[e.breakpoints.down("md")]:{gap:e.spacing(.5)},[e.breakpoints.down("sm")]:{flexDirection:"column",gap:e.spacing(2)}})),MA=oe(d)(({theme:e,delay:n=0})=>({display:"flex",alignItems:"center",justifyContent:"center",gap:e.spacing(1.5),padding:e.spacing(2,2),background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",borderRadius:"20px",border:"1px solid rgba(14, 81, 129, 0.15)",transition:"all 0.3s ease",animation:`${RA} 0.6s ease-out ${n*.1}s both`,position:"relative",minWidth:"180px","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.2)",background:"rgba(255, 255, 255, 0.95)"},[e.breakpoints.down("md")]:{minWidth:"160px",padding:e.spacing(1.8,1.5),gap:e.spacing(1.2)},[e.breakpoints.down("sm")]:{minWidth:"140px",padding:e.spacing(1.5,1.2),gap:e.spacing(1)}})),DA=oe(d)(({theme:e,color:n="#0e5181"})=>({width:"40px",height:"40px",borderRadius:"12px",background:`linear-gradient(135deg, ${n} 0%, ${n}dd 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"1.2rem",boxShadow:`0 4px 12px ${n}30`,animation:`${X0} 2s ease-in-out infinite`,[e.breakpoints.down("sm")]:{width:"32px",height:"32px",fontSize:"1rem"}})),IA=oe(d)(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",minWidth:0})),WA=oe(f)(({theme:e})=>({fontSize:"1.5rem",fontWeight:800,color:"#0e5181",lineHeight:1,marginBottom:"2px",[e.breakpoints.down("sm")]:{fontSize:"1.2rem"}})),$A=oe(f)(({theme:e})=>({fontSize:"0.8rem",fontWeight:600,color:e.palette.text.secondary,lineHeight:1.2,textAlign:"right",[e.breakpoints.down("sm")]:{fontSize:"0.7rem"}})),OA=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",height:"3px",width:"60px",background:"linear-gradient(90deg, rgba(14, 81, 129, 0.3) 0%, rgba(14, 81, 129, 0.1) 100%)",borderRadius:"2px","&:before":{content:'""',position:"absolute",width:"10px",height:"10px",borderRadius:"50%",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 2px 8px rgba(14, 81, 129, 0.3)",animation:`${X0} 2s ease-in-out infinite`},[e.breakpoints.down("md")]:{width:"50px",height:"2px","&:before":{width:"8px",height:"8px"}},[e.breakpoints.down("sm")]:{display:"none"}})),LA=oe(d)(({theme:e})=>({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,"& .floating-element":{position:"absolute",width:"20px",height:"20px",borderRadius:"50%",background:"rgba(14, 81, 129, 0.1)",animation:`${U5} 6s ease-in-out infinite`,"&:nth-child(1)":{top:"20%",left:"10%",animationDelay:"0s"},"&:nth-child(2)":{top:"60%",right:"15%",animationDelay:"2s"},"&:nth-child(3)":{bottom:"30%",left:"20%",animationDelay:"4s"}}})),BA=()=>{const e=Vt();Ri(e.breakpoints.down("sm"));const[n,a]=w.useState(!1);w.useEffect(()=>{const u=setTimeout(()=>{a(!0)},100);return()=>clearTimeout(u)},[]);const l=[{icon:t(Ui,{}),number:"10K+",label:"طالب مسجل",color:"#0e5181",delay:0},{icon:t(bt,{}),number:"500+",label:"دورة متاحة",color:"#e5978b",delay:1},{icon:t(si,{}),number:"4.9",label:"تقييم الطلاب",color:"#ffc107",delay:2},{icon:t(qc,{}),number:"95%",label:"معدل النجاح",color:"#4caf50",delay:3},{icon:t(Ou,{}),number:"50+",label:"شريك تعليمي",color:"#9c27b0",delay:4},{icon:t(ya,{}),number:"99%",label:"رضا العملاء",color:"#ff5722",delay:5}];return s(EA,{children:[s(LA,{children:[t(d,{className:"floating-element"}),t(d,{className:"floating-element"}),t(d,{className:"floating-element"})]}),t(Qe,{maxWidth:"lg",children:t(TA,{children:l.map((u,p)=>s(ut.Fragment,{children:[s(MA,{delay:u.delay,children:[t(DA,{color:u.color,children:u.icon}),s(IA,{children:[t(WA,{children:u.number}),t($A,{children:u.label})]})]}),p<l.length-1&&t(OA,{})]},p))})})]})},PA=()=>s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[s(q8,{children:[t("title",{children:"الرئيسية | منصة معهد التطوير المهني العالي للتدريب"}),t("meta",{name:"description",content:"منصة معهد التطوير المهني العالي للتدريب - منصة تعليمية متكاملة تقدم دورات تدريبية احترافية في مختلف المجالات."}),t("meta",{name:"keywords",content:"تعليم عن بعد, دورات تدريبية, تعلم اونلاين, شهادات معتمدة, تطوير مهني"})]}),t(Rn,{}),s(d,{component:"main",sx:{flex:1},children:[t(d,{component:"section",id:"home",children:t(N_,{})}),t(d,{component:"section",id:"learning-methods",children:t(zA,{})}),t(d,{component:"section",id:"stats-separator",children:t(BA,{})}),t(d,{component:"section",id:"course-collections",sx:{bgcolor:"background.default"},children:t(oA,{})}),t(d,{component:"section",id:"testimonials",sx:{bgcolor:"background.default"},children:t(pA,{})})]}),t(En,{})]}),T2=ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,jA=ht`
  0% { box-shadow: 0 0 0 0 rgba(98,0,238,0.4); }
  70% { box-shadow: 0 0 0 10px rgba(98,0,238,0); }
  100% { box-shadow: 0 0 0 0 rgba(98,0,238,0); }
`,NA=oe(Qe)(({theme:e})=>({minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:e.spacing(3)})),FA=oe(We)(({theme:e})=>({display:"flex",flexDirection:"row",overflow:"hidden",maxWidth:1e3,width:"100%",borderRadius:e.shape.borderRadius*3,boxShadow:e.shadows[10],position:"relative",zIndex:1,"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #6200ee 0%, #03dac6 100%)",zIndex:-1,transform:"skewY(-5deg)",opacity:.1}})),HA=oe(d)(({theme:e})=>({flex:1,padding:e.spacing(8,4),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #6200ee 0%, #3700b3 100%)",color:e.palette.common.white,textAlign:"center",[e.breakpoints.down("md")]:{display:"none"}})),VA=oe(d)(({theme:e})=>({flex:1,padding:e.spacing(6,5),display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:e.palette.background.paper,[e.breakpoints.down("md")]:{padding:e.spacing(4,3)}})),UA=oe(_t)(({theme:e})=>({margin:e.spacing(1,"auto",3,"auto"),backgroundColor:e.palette.primary.main,width:70,height:70,display:"flex",alignItems:"center",justifyContent:"center",animation:`${jA} 2s infinite`})),qA=oe(te)(({theme:e})=>({margin:e.spacing(3,0,2),padding:e.spacing(1.5),borderRadius:50,fontWeight:600,letterSpacing:.5,textTransform:"none",fontSize:"1rem",boxShadow:"0 4px 14px 0 rgba(98, 0, 238, 0.2)","&:hover":{boxShadow:"0 6px 20px 0 rgba(98, 0, 238, 0.3)",transform:"translateY(-2px)"},transition:"all 0.3s ease"})),yg=oe(xe)(({theme:e})=>({border:`1px solid ${e.palette.divider}`,margin:e.spacing(0,1),"&:hover":{backgroundColor:e.palette.action.hover}})),M2=oe("div")(({theme:e})=>({position:"absolute",color:"rgba(255, 255, 255, 0.05)",fontSize:"10rem",zIndex:0,"&:nth-of-type(1)":{top:"10%",left:"10%",animation:`${T2} 6s ease-in-out infinite`},"&:nth-of-type(2)":{bottom:"10%",right:"10%",animation:`${T2} 7s ease-in-out infinite`,animationDelay:"0.5s"}})),YA=()=>{const[e,n]=w.useState(!1),[a,l]=w.useState({email:"",password:""}),[u,p]=w.useState({}),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(""),{loading:_,error:k}=N0(J=>J.auth),E=Gc(),R=nt(),W=Vt();w.useEffect(()=>(y(!0),()=>y(!1)),[]);const T=J=>{const{name:H,value:U}=J.target;l(ae(q({},a),{[H]:U})),(u[H]||v)&&(p(ae(q({},u),{[H]:""})),S(""))},z=()=>{const J={};return a.email||(J.email="البريد الإلكتروني مطلوب"),a.password||(J.password="كلمة المرور مطلوبة"),p(J),S(""),Object.keys(J).length===0},N=J=>$(null,null,function*(){var H,U,A,V,Y,P;if(J.preventDefault(),!!z()){x(!0),S("");try{const I=yield E(Wo(a));if(Wo.fulfilled.match(I)){const B=((A=(U=(H=I.payload)==null?void 0:H.profile)==null?void 0:U.status)==null?void 0:A.toLowerCase())||((P=(Y=(V=I.payload)==null?void 0:V.user_details)==null?void 0:Y.type)==null?void 0:P.toLowerCase())||"student";R(B==="admin"||B==="instructor"?"/teacher/dashboard":"/student/dashboard")}else if(Wo.rejected.match(I)){const B=I.error||"حدث خطأ أثناء تسجيل الدخول. يرجى المحاولة مرة أخرى.";S(B)}}catch(I){console.error("Login error:",I),S("حدث خطأ أثناء تسجيل الدخول. يرجى المحاولة مرة أخرى.")}finally{m&&x(!1)}}}),G=J=>{console.log(`Logging in with ${J}`)};return t(ji,{in:!0,timeout:800,children:t(NA,{maxWidth:!1,children:s(FA,{elevation:3,children:[s(HA,{children:[t(M2,{children:t(bt,{fontSize:"inherit"})}),t(M2,{children:t(qk,{fontSize:"inherit"})}),s(d,{sx:{position:"relative",zIndex:1},children:[t(f,{variant:"h3",sx:{fontWeight:700,mb:2},children:"مرحباً بعودتك!"}),t(f,{variant:"body1",sx:{opacity:.9,mb:4,maxWidth:"80%",mx:"auto"},children:"استمر في رحلة التعلم معنا. تصفح دوراتك، تتبع تقدمك، وحقق أهدافك."}),s(d,{sx:{mt:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[t(f,{variant:"body2",sx:{mb:2},children:"ليس لديك حساب؟"}),t(te,{component:Qt,to:"/register",variant:"outlined",color:"inherit",sx:{borderColor:"rgba(255, 255, 255, 0.5)",color:"white","&:hover":{borderColor:"white",backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"إنشاء حساب"})]})]})]}),s(VA,{children:[s(d,{sx:{textAlign:"center",mb:4},children:[t(UA,{children:t(bc,{})}),t(f,{component:"h1",variant:"h4",sx:{fontWeight:700,mb:1,color:W.palette.primary.main}}),t(f,{variant:"body2",color:"text.secondary",children:"أدخل بيانات الاعتماد الخاصة بك للوصول إلى حسابك"})]}),(k||v)&&t(ji,{in:!0,children:t(Be,{severity:"error",sx:{mb:3,width:"100%",direction:"rtl",textAlign:"right"},children:v||k})}),s(d,{component:"form",onSubmit:N,sx:{width:"100%"},children:[t(_e,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"البريد الإلكتروني",name:"email",autoComplete:"email",autoFocus:!0,value:a.email,onChange:T,error:!!u.email,helperText:u.email,disabled:_,InputProps:{startAdornment:t(Pr,{position:"start",children:t(Dw,{color:u.email?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:W.palette.divider},"&:hover fieldset":{borderColor:W.palette.primary.main},"&.Mui-focused fieldset":{borderColor:W.palette.primary.main,boxShadow:`0 0 0 2px ${W.palette.primary.light}`}}}}),t(_e,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"كلمة المرور",type:e?"text":"password",id:"password",autoComplete:"current-password",value:a.password,onChange:T,error:!!u.password,helperText:u.password,disabled:_,InputProps:{startAdornment:t(Pr,{position:"start",children:t(bc,{color:u.password?"error":"action"})}),endAdornment:t(Pr,{position:"end",children:t(xe,{"aria-label":"تبديل رؤية كلمة المرور",onClick:()=>n(!e),edge:"end",size:"small",sx:{color:W.palette.text.secondary,"&:hover":{color:W.palette.primary.main,backgroundColor:"transparent"}},children:e?t(Uu,{}):t(Ir,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:W.palette.divider},"&:hover fieldset":{borderColor:W.palette.primary.main},"&.Mui-focused fieldset":{borderColor:W.palette.primary.main,boxShadow:`0 0 0 2px ${W.palette.primary.light}`}}}}),t(d,{sx:{display:"flex",justifyContent:"flex-end",mt:1,mb:2},children:t(fa,{component:Qt,to:"/forgot-password",variant:"body2",sx:{textDecoration:"none",color:W.palette.text.secondary,"&:hover":{color:W.palette.primary.main}},children:"نسيت كلمة المرور؟"})}),t(qA,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:h,sx:{background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"}},children:h?t(Ke,{size:24,color:"inherit"}):t(d,{sx:{display:"flex",alignItems:"center"},children:t("span",{children:"تسجيل الدخول"})})}),s(d,{sx:{my:3,display:"flex",alignItems:"center"},children:[t(Pt,{sx:{flexGrow:1}}),t(f,{variant:"body2",color:"text.secondary",sx:{px:2},children:"أو تابع باستخدام"}),t(Pt,{sx:{flexGrow:1}})]}),s(d,{sx:{display:"flex",justifyContent:"center",gap:2,mb:3},children:[t(yg,{onClick:()=>G("google"),"aria-label":"Google",children:t(Iw,{color:"error"})}),t(yg,{onClick:()=>G("facebook"),"aria-label":"Facebook",children:t(dh,{color:"primary"})}),t(yg,{onClick:()=>G("twitter"),"aria-label":"Twitter",children:t(uh,{color:"info"})})]})]})]})]})})})},D2=ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,q5=ht`
  0% { box-shadow: 0 0 0 0 rgba(98,0,238,0.4); }
  70% { box-shadow: 0 0 0 10px rgba(98,0,238,0); }
  100% { box-shadow: 0 0 0 0 rgba(98,0,238,0); }
`;oe(Qe)(({theme:e})=>({minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",padding:e.spacing(3)}));const QA=oe(We)(({theme:e})=>({display:"flex",flexDirection:"row",overflow:"hidden",maxWidth:1100,width:"100%",borderRadius:e.shape.borderRadius*3,boxShadow:e.shadows[10],position:"relative",zIndex:1,"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #6200ee 0%, #03dac6 100%)",zIndex:-1,transform:"skewY(-5deg)",opacity:.1}})),GA=oe(d)(({theme:e})=>({flex:1,padding:e.spacing(8,4),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"linear-gradient(135deg, #6200ee 0%, #3700b3 100%)",color:e.palette.common.white,textAlign:"center",[e.breakpoints.down("md")]:{display:"none"}})),XA=oe(d)(({theme:e})=>({flex:1.5,padding:e.spacing(6,5),display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:e.palette.background.paper,overflowY:"auto",maxHeight:"90vh",[e.breakpoints.down("md")]:{padding:e.spacing(4,3)}})),KA=oe(_t)(({theme:e})=>({margin:e.spacing(1),backgroundColor:e.palette.primary.main,width:70,height:70,marginBottom:e.spacing(2),animation:`${q5} 2s infinite`}));oe(te)(({theme:e})=>({margin:e.spacing(3,0,2),padding:e.spacing(1.5),borderRadius:50,fontWeight:600,letterSpacing:.5,textTransform:"none",fontSize:"1rem",boxShadow:"0 4px 14px 0 rgba(98, 0, 238, 0.2)","&:hover":{boxShadow:"0 6px 20px 0 rgba(98, 0, 238, 0.3)",transform:"translateY(-2px)"},transition:"all 0.3s ease"}));const vg=oe(xe)(({theme:e})=>({border:`1px solid ${e.palette.divider}`,margin:e.spacing(0,1),"&:hover":{backgroundColor:e.palette.action.hover}})),I2=oe("div")(({theme:e})=>({position:"absolute",color:"rgba(255, 255, 255, 0.05)",fontSize:"10rem",zIndex:0,"&:nth-of-type(1)":{top:"10%",left:"10%",animation:`${D2} 6s ease-in-out infinite`},"&:nth-of-type(2)":{bottom:"10%",right:"10%",animation:`${D2} 7s ease-in-out infinite`,animationDelay:"0.5s"}})),ZA=oe(d,{shouldForwardProp:e=>e!=="active"})(({theme:e,active:n})=>({width:32,height:32,borderRadius:"50%",backgroundColor:n?e.palette.primary.main:e.palette.grey[300],color:n?"#fff":e.palette.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",marginRight:8,fontWeight:600,fontSize:"0.875rem",transition:"all 0.3s ease"})),JA=oe(f,{shouldForwardProp:e=>e!=="active"})(({theme:e,active:n})=>({color:n?e.palette.text.primary:e.palette.text.secondary,fontWeight:n?600:400,fontSize:"0.875rem",transition:"all 0.3s ease"})),ez=()=>{const[e,n]=w.useState(!1),[a,l]=w.useState(!1),[u,p]=w.useState(1),[h,x]=w.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",userType:"Student",acceptTerms:!1,organizationName:"",bio:"",website:""}),[m,y]=w.useState({}),[v,S]=w.useState(!1),[_,k]=w.useState(""),[E,R]=w.useState(!1),W=Gc(),T=nt(),z=Vt();w.useEffect(()=>(R(!0),()=>R(!1)),[]);const N=I=>{const{name:B,value:F,checked:Q,type:M}=I.target,O=M==="checkbox"?Q:F;x(C=>ae(q({},C),{[B]:O})),m[B]&&y(C=>ae(q({},C),{[B]:""})),_&&k("")},G=()=>{H(u)&&p(I=>Math.min(I+1,3))},J=()=>{p(I=>Math.max(I-1,1))},H=I=>{const B={},F=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return I===1?(h.firstName.trim()||(B.firstName="الاسم الأول مطلوب"),h.lastName.trim()||(B.lastName="الاسم الأخير مطلوب"),h.email?F.test(h.email)||(B.email="الرجاء إدخال بريد إلكتروني صحيح"):B.email="البريد الإلكتروني مطلوب",h.phone||(B.phone="رقم الهاتف مطلوب")):I===2?(h.password?h.password.length<8&&(B.password="يجب أن تتكون كلمة المرور من 8 أحرف على الأقل"):B.password="كلمة المرور مطلوبة",h.confirmPassword?h.password!==h.confirmPassword&&(B.confirmPassword="كلمتا المرور غير متطابقتين"):B.confirmPassword="يرجى تأكيد كلمة المرور",h.userType==="Organization"&&!h.organizationName&&(B.organizationName="اسم المؤسسة مطلوب")):I===3&&(h.acceptTerms||(B.acceptTerms="يجب الموافقة على الشروط والأحكام")),y(B),Object.keys(B).length===0},U=()=>{const I=H(1),B=H(2),F=H(3);return I?B?F||p(3):p(2):p(1),I&&B&&F},A=I=>$(null,null,function*(){var B,F,Q;if(I.preventDefault(),!!U()){S(!0),k("");try{const M=q({email:h.email,password:h.password,confirm_password:h.confirmPassword,name:`${h.firstName} ${h.lastName}`,phone:h.phone||"",status:h.userType==="Instructor"?"Instructor":"Student"},h.userType==="Instructor"&&{bio:h.bio||"",qualification:h.qualification||""}),O=yield W(Ys(M));if(Ys.fulfilled.match(O)){const C=((Q=(F=(B=O.payload)==null?void 0:B.profile)==null?void 0:F.status)==null?void 0:Q.toLowerCase())||"student";T(C==="instructor"?"/teacher/dashboard":"/student/dashboard")}else if(Ys.rejected.match(O)){const C=O.error||"فشل في إنشاء الحساب. يرجى المحاولة مرة أخرى.";k(C)}}catch(M){console.error("Registration failed:",M),k(M.message||"فشل في إنشاء الحساب. يرجى المحاولة مرة أخرى."),window.scrollTo({top:0,behavior:"smooth"})}finally{E&&S(!1)}}}),V=I=>{console.log(`Logging in with ${I}`)},Y=()=>s(d,{sx:{width:"100%",mb:4},children:[t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:2},children:[1,2,3].map(I=>s(ut.Fragment,{children:[s(d,{sx:{display:"flex",alignItems:"center"},children:[t(ZA,{active:u>=I,children:u>I?t(xr,{fontSize:"small"}):I}),t(JA,{active:u>=I,children:I===1?"Account":I===2?"Password":"Finish"})]}),I<3&&t(d,{sx:{width:40,height:2,backgroundColor:u>I?z.palette.primary.main:z.palette.grey[300],mx:1,transition:"all 0.3s ease"}})]},I))}),t(d,{sx:{width:"100%",height:4,backgroundColor:z.palette.grey[200],borderRadius:2,overflow:"hidden"},children:t(d,{sx:{width:`${u/3*100}%`,height:"100%",backgroundColor:z.palette.primary.main,transition:"width 0.3s ease"}})})]}),P=I=>{switch(I){case 1:return t(ji,{in:!0,timeout:300,children:s(d,{children:[t(f,{variant:"h6",sx:{mb:3,color:z.palette.text.primary,fontWeight:600},children:"معلومات الشخصية"}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,sm:6,children:t(_e,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"الاسم الأول",autoFocus:!0,value:h.firstName,onChange:N,error:!!m.firstName,helperText:m.firstName,disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(qa,{color:m.firstName?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{required:!0,fullWidth:!0,id:"lastName",label:"الاسم الأخير",name:"lastName",autoComplete:"family-name",value:h.lastName,onChange:N,error:!!m.lastName,helperText:m.lastName,disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(qa,{color:m.lastName?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}})})]}),t(_e,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"البريد الإلكتروني",name:"email",autoComplete:"email",value:h.email,onChange:N,error:!!m.email,helperText:m.email,disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(Dw,{color:m.email?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),t(_e,{margin:"normal",required:!0,fullWidth:!0,id:"phone",label:"رقم الهاتف",name:"phone",autoComplete:"tel",value:h.phone,onChange:N,error:!!m.phone,helperText:m.phone,disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(Ew,{color:m.phone?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),s(At,{fullWidth:!0,margin:"normal",error:!!m.userType,sx:{mb:3},children:[t(Rt,{id:"user-type-label",children:"أنا"}),s(Et,{labelId:"user-type-label",id:"userType",name:"userType",value:h.userType,label:"أنا",onChange:N,disabled:v,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[t(Me,{value:"Student",children:s(d,{sx:{display:"flex",alignItems:"center"},children:[t(bt,{sx:{mr:1,color:"text.secondary"}}),t("span",{children:"طالب"})]})}),t(Me,{value:"Instructor",children:s(d,{sx:{display:"flex",alignItems:"center"},children:[t(Lp,{sx:{mr:1,color:"text.secondary"}}),t("span",{children:"مدرس"})]})}),t(Me,{value:"Organization",children:s(d,{sx:{display:"flex",alignItems:"center"},children:[t(Ou,{sx:{mr:1,color:"text.secondary"}}),t("span",{children:"مؤسسة"})]})})]}),m.userType&&t(my,{children:m.userType})]}),h.userType==="Organization"&&t(_e,{margin:"normal",required:!0,fullWidth:!0,id:"organizationName",label:"اسم المؤسسة",placeholder:"أدخل اسم المؤسسة",name:"organizationName",value:h.organizationName,onChange:N,error:!!m.organizationName,helperText:m.organizationName,disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(Ou,{color:m.organizationName?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),h.userType==="Instructor"&&t(_e,{margin:"normal",fullWidth:!0,multiline:!0,rows:3,id:"bio",label:"نبذة قصيرة",name:"bio",value:h.bio,onChange:N,error:!!m.bio,helperText:m.bio||"أخبرنا المزيد عن نفسك وخبراتك",disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",sx:{alignSelf:"flex-start",mt:1},children:t(Ww,{color:m.bio?"error":"action"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,alignItems:"flex-start"}}}),t(d,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:t(te,{variant:"contained",onClick:G,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"}},children:"Continue"})})]})});case 2:return t(ji,{in:!0,timeout:300,children:s(d,{children:[t(f,{variant:"h6",sx:{mb:3,color:z.palette.text.primary,fontWeight:600},children:"إنشاء كلمة مرور"}),t(_e,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"كلمة المرور",type:e?"text":"password",id:"password",autoComplete:"new-password",value:h.password,onChange:N,error:!!m.password,helperText:m.password||"استخدم 8 أحرف أو أكثر مع مزيج من الحروف والأرقام والرموز",disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(bc,{color:m.password?"error":"action"})}),endAdornment:t(Pr,{position:"end",children:t(xe,{"aria-label":"تبديل رؤية كلمة المرور",onClick:()=>n(!e),edge:"end",size:"small",sx:{color:z.palette.text.secondary,"&:hover":{color:z.palette.primary.main,backgroundColor:"transparent"}},children:e?t(Uu,{}):t(Ir,{})})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2}}}),t(_e,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"تأكيد كلمة المرور",type:a?"text":"password",id:"confirmPassword",value:h.confirmPassword,onChange:N,error:!!m.confirmPassword,helperText:m.confirmPassword,disabled:v,InputProps:{startAdornment:t(Pr,{position:"start",children:t(bc,{color:m.confirmPassword?"error":"action"})}),endAdornment:t(Pr,{position:"end",children:t(xe,{"aria-label":"تبديل رؤية تأكيد كلمة المرور",onClick:()=>l(!a),edge:"end",size:"small",sx:{color:z.palette.text.secondary,"&:hover":{color:z.palette.primary.main,backgroundColor:"transparent"}},children:a?t(Uu,{}):t(Ir,{})})})},sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),s(d,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[t(te,{variant:"outlined",onClick:J,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,borderColor:z.palette.primary.main,color:z.palette.primary.main,"&:hover":{borderColor:z.palette.primary.dark,backgroundColor:"rgba(98, 0, 238, 0.04)"}},children:"Back"}),t(te,{variant:"contained",onClick:G,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"}},children:"Continue"})]})]})});case 3:return t(ji,{in:!0,timeout:300,children:s(d,{children:[s(d,{sx:{textAlign:"center",mb:4},children:[t(xr,{sx:{fontSize:60,color:z.palette.success.main,mb:2,animation:`${q5} 2s infinite`}}),t(f,{variant:"h6",sx:{mb:2,color:z.palette.text.primary,fontWeight:600},children:"أنت على وشك الانتهاء!"}),t(f,{variant:"body2",color:"text.secondary",children:"يرجى مراجعة معلوماتك وقبول الشروط والأحكام لإكمال تسجيلك."})]}),s(We,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${z.palette.divider}`,borderRadius:2},children:[t(f,{variant:"subtitle2",color:"text.secondary",sx:{mb:2,textTransform:"uppercase",letterSpacing:1},children:"معلومات الحساب"}),s(d,{sx:{mb:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"الاسم الكامل"}),t(f,{variant:"body1",children:`${h.firstName} ${h.lastName}`})]}),s(d,{sx:{mb:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"البريد الإلكتروني"}),t(f,{variant:"body1",children:h.email})]}),s(d,{sx:{mb:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"رقم الهاتف"}),t(f,{variant:"body1",children:h.phone})]}),s(d,{children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"نوع الحساب"}),s(d,{sx:{display:"flex",alignItems:"center",mt:.5},children:[h.userType==="Student"&&t(bt,{color:"primary",sx:{mr:1}}),h.userType==="Instructor"&&t(Lp,{color:"primary",sx:{mr:1}}),h.userType==="Organization"&&t(Ou,{color:"primary",sx:{mr:1}}),t(f,{variant:"body1",children:h.userType})]})]}),h.userType==="Organization"&&h.organizationName&&s(d,{sx:{mt:2,pt:2,borderTop:`1px solid ${z.palette.divider}`},children:[t(f,{variant:"subtitle2",color:"text.secondary",sx:{mb:2,textTransform:"uppercase",letterSpacing:1},children:"تفاصيل المؤسسة"}),s(d,{sx:{mb:1},children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"اسم المؤسسة"}),t(f,{variant:"body1",children:h.organizationName})]})]}),h.userType==="Instructor"&&h.bio&&s(d,{sx:{mt:2,pt:2,borderTop:`1px solid ${z.palette.divider}`},children:[t(f,{variant:"subtitle2",color:"text.secondary",sx:{mb:2,textTransform:"uppercase",letterSpacing:1},children:"نبذة عن المدرس"}),t(f,{variant:"body2",children:h.bio})]})]}),s(At,{required:!0,error:!!m.acceptTerms,component:"fieldset",variant:"standard",sx:{width:"100%",mb:3},children:[t(kt,{control:t(Ai,{checked:h.acceptTerms,onChange:N,name:"acceptTerms",color:"primary",disabled:v}),label:s(f,{variant:"body2",children:["أوافق على"," ",t(fa,{href:"/terms",target:"_blank",rel:"noopener",sx:{textDecoration:"none"},children:"شروط الخدمة"})," ","و"," ",t(fa,{href:"/privacy",target:"_blank",rel:"noopener",sx:{textDecoration:"none"},children:"سياسة الخصوصية"})]})}),m.acceptTerms&&t(my,{children:m.acceptTerms})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[t(te,{variant:"outlined",onClick:J,disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,borderColor:z.palette.primary.main,color:z.palette.primary.main,"&:hover":{borderColor:z.palette.primary.dark,backgroundColor:"rgba(98, 0, 238, 0.04)"}},children:"Back"}),t(te,{type:"submit",variant:"contained",disabled:v,sx:{borderRadius:50,px:4,py:1,textTransform:"none",fontWeight:600,background:"linear-gradient(45deg, #6200ee 0%, #7c4dff 100%)","&:hover":{background:"linear-gradient(45deg, #7c4dff 0%, #6200ee 100%)"},"&.Mui-disabled":{background:z.palette.grey[300],color:z.palette.grey[500]}},children:v?t(Ke,{size:24,color:"inherit"}):"إنشاء حساب"})]})]})});default:return null}};return t(Qe,{component:"main",maxWidth:"lg",sx:{py:4},children:s(QA,{children:[s(GA,{children:[t(I2,{children:t(bt,{sx:{fontSize:"inherit"}})}),t(I2,{children:t(Lp,{sx:{fontSize:"inherit"}})}),s(d,{sx:{position:"relative",zIndex:1,textAlign:"center",px:4},children:[t(f,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:700,letterSpacing:"0.5px"},children:"انضم إلى مجتمعنا التعليمي"}),t(f,{variant:"body1",sx:{mb:4,opacity:.9,lineHeight:1.7},children:"أنشئ حسابك واحصل على الوصول إلى آلاف الدورات والمعلمين والمؤسسات."}),t(d,{sx:{width:"100%",maxWidth:300,mx:"auto",mb:4},children:t("img",{src:"/images/register-illustration.svg",alt:"Learning illustration",style:{width:"100%",height:"auto"},onError:I=>{I.target.onerror=null,I.target.style.display="none"}})}),t(f,{variant:"body2",sx:{opacity:.8,mb:2},children:"هل لديك حساب بالفعل؟"}),t(te,{component:Qt,to:"/login",variant:"outlined",color:"inherit",sx:{borderRadius:50,px:4,py:1,fontWeight:600,borderWidth:2,"&:hover":{borderWidth:2,backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:"تسجيل الدخول"})]})]}),t(XA,{children:s(d,{sx:{width:"100%",maxWidth:500,mx:"auto"},children:[s(d,{sx:{textAlign:"center",mb:4},children:[t(KA,{children:t(bc,{})}),t(f,{component:"h1",variant:"h5",sx:{fontWeight:700,color:z.palette.primary.main},children:"إنشاء حساب"}),s(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["الخطوة ",u," من 3"]})]}),_&&t(Be,{severity:"error",sx:{mb:3,borderRadius:2},children:_}),s(d,{component:"form",onSubmit:A,noValidate:!0,sx:{mt:1},children:[Y(),P(u)]}),s(d,{sx:{mt:4,textAlign:"center"},children:[t(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"أو سجل باستخدام"}),s(d,{sx:{display:"flex",justifyContent:"center",gap:2},children:[t(vg,{"aria-label":"Google",onClick:()=>V("google"),sx:{"&:hover":{color:"#DB4437"}},children:t(Iw,{})}),t(vg,{"aria-label":"Facebook",onClick:()=>V("facebook"),sx:{"&:hover":{color:"#4267B2"}},children:t(dh,{})}),t(vg,{"aria-label":"Twitter",onClick:()=>V("twitter"),sx:{"&:hover":{color:"#1DA1F2"}},children:t(uh,{})})]})]}),t(d,{sx:{mt:4,textAlign:"center"},children:s(f,{variant:"body2",color:"text.secondary",children:["By creating an account, you agree to our"," ",t(fa,{href:"/terms",target:"_blank",rel:"noopener",color:"primary",children:"Terms of Service"})," ","and"," ",t(fa,{href:"/privacy",target:"_blank",rel:"noopener",color:"primary",children:"Privacy Policy"}),"."]})})]})})]})})},K0=w.createContext({});function Z0(e){const n=w.useRef(null);return n.current===null&&(n.current=e()),n.current}const J0=typeof window!="undefined",Y5=J0?w.useLayoutEffect:w.useEffect,_h=w.createContext(null);function em(e,n){e.indexOf(n)===-1&&e.push(n)}function tm(e,n){const a=e.indexOf(n);a>-1&&e.splice(a,1)}const xa=(e,n,a)=>a>n?n:a<e?e:a;let rm=()=>{};const ba={},Q5=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function G5(e){return typeof e=="object"&&e!==null}const X5=e=>/^0[^.\s]+$/u.test(e);function nm(e){let n;return()=>(n===void 0&&(n=e()),n)}const di=e=>e,tz=(e,n)=>a=>n(e(a)),ed=(...e)=>e.reduce(tz),Lc=(e,n,a)=>{const l=n-e;return l===0?1:(a-e)/l};class im{constructor(){this.subscriptions=[]}add(n){return em(this.subscriptions,n),()=>tm(this.subscriptions,n)}notify(n,a,l){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](n,a,l);else for(let p=0;p<u;p++){const h=this.subscriptions[p];h&&h(n,a,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ni=e=>e*1e3,Fi=e=>e/1e3;function K5(e,n){return n?e*(1e3/n):0}const Z5=(e,n,a)=>(((1-3*a+3*n)*e+(3*a-6*n))*e+3*n)*e,rz=1e-7,nz=12;function iz(e,n,a,l,u){let p,h,x=0;do h=n+(a-n)/2,p=Z5(h,l,u)-e,p>0?a=h:n=h;while(Math.abs(p)>rz&&++x<nz);return h}function td(e,n,a,l){if(e===n&&a===l)return di;const u=p=>iz(p,0,1,e,a);return p=>p===0||p===1?p:Z5(u(p),n,l)}const J5=e=>n=>n<=.5?e(2*n)/2:(2-e(2*(1-n)))/2,eS=e=>n=>1-e(1-n),tS=td(.33,1.53,.69,.99),am=eS(tS),rS=J5(am),nS=e=>(e*=2)<1?.5*am(e):.5*(2-Math.pow(2,-10*(e-1))),om=e=>1-Math.sin(Math.acos(e)),iS=eS(om),aS=J5(om),az=td(.42,0,1,1),oz=td(0,0,.58,1),oS=td(.42,0,.58,1),sz=e=>Array.isArray(e)&&typeof e[0]!="number",sS=e=>Array.isArray(e)&&typeof e[0]=="number",lz={linear:di,easeIn:az,easeInOut:oS,easeOut:oz,circIn:om,circInOut:aS,circOut:iS,backIn:am,backInOut:rS,backOut:tS,anticipate:nS},cz=e=>typeof e=="string",W2=e=>{if(sS(e)){rm(e.length===4);const[n,a,l,u]=e;return td(n,a,l,u)}else if(cz(e))return lz[e];return e},zu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],$2={value:null};function dz(e,n){let a=new Set,l=new Set,u=!1,p=!1;const h=new WeakSet;let x={delta:0,timestamp:0,isProcessing:!1},m=0;function y(S){h.has(S)&&(v.schedule(S),e()),m++,S(x)}const v={schedule:(S,_=!1,k=!1)=>{const R=k&&u?a:l;return _&&h.add(S),R.has(S)||R.add(S),S},cancel:S=>{l.delete(S),h.delete(S)},process:S=>{if(x=S,u){p=!0;return}u=!0,[a,l]=[l,a],a.forEach(y),n&&$2.value&&$2.value.frameloop[n].push(m),m=0,a.clear(),u=!1,p&&(p=!1,v.process(S))}};return v}const uz=40;function lS(e,n){let a=!1,l=!0;const u={delta:0,timestamp:0,isProcessing:!1},p=()=>a=!0,h=zu.reduce((N,G)=>(N[G]=dz(p,n?G:void 0),N),{}),{setup:x,read:m,resolveKeyframes:y,preUpdate:v,update:S,preRender:_,render:k,postRender:E}=h,R=()=>{const N=ba.useManualTiming?u.timestamp:performance.now();a=!1,ba.useManualTiming||(u.delta=l?1e3/60:Math.max(Math.min(N-u.timestamp,uz),1)),u.timestamp=N,u.isProcessing=!0,x.process(u),m.process(u),y.process(u),v.process(u),S.process(u),_.process(u),k.process(u),E.process(u),u.isProcessing=!1,a&&n&&(l=!1,e(R))},W=()=>{a=!0,l=!0,u.isProcessing||e(R)};return{schedule:zu.reduce((N,G)=>{const J=h[G];return N[G]=(H,U=!1,A=!1)=>(a||W(),J.schedule(H,U,A)),N},{}),cancel:N=>{for(let G=0;G<zu.length;G++)h[zu[G]].cancel(N)},state:u,steps:h}}const{schedule:ar,cancel:Qa,state:en,steps:wg}=lS(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:di,!0);let ju;function hz(){ju=void 0}const _n={now:()=>(ju===void 0&&_n.set(en.isProcessing||ba.useManualTiming?en.timestamp:performance.now()),ju),set:e=>{ju=e,queueMicrotask(hz)}},cS=e=>n=>typeof n=="string"&&n.startsWith(e),sm=cS("--"),fz=cS("var(--"),lm=e=>fz(e)?pz.test(e.split("/*")[0].trim()):!1,pz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,il={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Bc=ae(q({},il),{transform:e=>xa(0,1,e)}),Ru=ae(q({},il),{default:1}),zc=e=>Math.round(e*1e5)/1e5,cm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gz(e){return e==null}const mz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dm=(e,n)=>a=>!!(typeof a=="string"&&mz.test(a)&&a.startsWith(e)||n&&!gz(a)&&Object.prototype.hasOwnProperty.call(a,n)),dS=(e,n,a)=>l=>{if(typeof l!="string")return l;const[u,p,h,x]=l.match(cm);return{[e]:parseFloat(u),[n]:parseFloat(p),[a]:parseFloat(h),alpha:x!==void 0?parseFloat(x):1}},xz=e=>xa(0,255,e),Sg=ae(q({},il),{transform:e=>Math.round(xz(e))}),Eo={test:dm("rgb","red"),parse:dS("red","green","blue"),transform:({red:e,green:n,blue:a,alpha:l=1})=>"rgba("+Sg.transform(e)+", "+Sg.transform(n)+", "+Sg.transform(a)+", "+zc(Bc.transform(l))+")"};function bz(e){let n="",a="",l="",u="";return e.length>5?(n=e.substring(1,3),a=e.substring(3,5),l=e.substring(5,7),u=e.substring(7,9)):(n=e.substring(1,2),a=e.substring(2,3),l=e.substring(3,4),u=e.substring(4,5),n+=n,a+=a,l+=l,u+=u),{red:parseInt(n,16),green:parseInt(a,16),blue:parseInt(l,16),alpha:u?parseInt(u,16)/255:1}}const l0={test:dm("#"),parse:bz,transform:Eo.transform},rd=e=>({test:n=>typeof n=="string"&&n.endsWith(e)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${e}`}),Va=rd("deg"),Hi=rd("%"),at=rd("px"),yz=rd("vh"),vz=rd("vw"),O2=ae(q({},Hi),{parse:e=>Hi.parse(e)/100,transform:e=>Hi.transform(e*100)}),js={test:dm("hsl","hue"),parse:dS("hue","saturation","lightness"),transform:({hue:e,saturation:n,lightness:a,alpha:l=1})=>"hsla("+Math.round(e)+", "+Hi.transform(zc(n))+", "+Hi.transform(zc(a))+", "+zc(Bc.transform(l))+")"},Dr={test:e=>Eo.test(e)||l0.test(e)||js.test(e),parse:e=>Eo.test(e)?Eo.parse(e):js.test(e)?js.parse(e):l0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Eo.transform(e):js.transform(e),getAnimatableNone:e=>{const n=Dr.parse(e);return n.alpha=0,Dr.transform(n)}},wz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Sz(e){var n,a;return isNaN(e)&&typeof e=="string"&&(((n=e.match(cm))==null?void 0:n.length)||0)+(((a=e.match(wz))==null?void 0:a.length)||0)>0}const uS="number",hS="color",Cz="var",kz="var(",L2="${}",_z=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Pc(e){const n=e.toString(),a=[],l={color:[],number:[],var:[]},u=[];let p=0;const x=n.replace(_z,m=>(Dr.test(m)?(l.color.push(p),u.push(hS),a.push(Dr.parse(m))):m.startsWith(kz)?(l.var.push(p),u.push(Cz),a.push(m)):(l.number.push(p),u.push(uS),a.push(parseFloat(m))),++p,L2)).split(L2);return{values:a,split:x,indexes:l,types:u}}function fS(e){return Pc(e).values}function pS(e){const{split:n,types:a}=Pc(e),l=n.length;return u=>{let p="";for(let h=0;h<l;h++)if(p+=n[h],u[h]!==void 0){const x=a[h];x===uS?p+=zc(u[h]):x===hS?p+=Dr.transform(u[h]):p+=u[h]}return p}}const Az=e=>typeof e=="number"?0:Dr.test(e)?Dr.getAnimatableNone(e):e;function zz(e){const n=fS(e);return pS(e)(n.map(Az))}const Ga={test:Sz,parse:fS,createTransformer:pS,getAnimatableNone:zz};function Cg(e,n,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+(n-e)*6*a:a<1/2?n:a<2/3?e+(n-e)*(2/3-a)*6:e}function Rz({hue:e,saturation:n,lightness:a,alpha:l}){e/=360,n/=100,a/=100;let u=0,p=0,h=0;if(!n)u=p=h=a;else{const x=a<.5?a*(1+n):a+n-a*n,m=2*a-x;u=Cg(m,x,e+1/3),p=Cg(m,x,e),h=Cg(m,x,e-1/3)}return{red:Math.round(u*255),green:Math.round(p*255),blue:Math.round(h*255),alpha:l}}function ih(e,n){return a=>a>0?n:e}const ur=(e,n,a)=>e+(n-e)*a,kg=(e,n,a)=>{const l=e*e,u=a*(n*n-l)+l;return u<0?0:Math.sqrt(u)},Ez=[l0,Eo,js],Tz=e=>Ez.find(n=>n.test(e));function B2(e){const n=Tz(e);if(!n)return!1;let a=n.parse(e);return n===js&&(a=Rz(a)),a}const P2=(e,n)=>{const a=B2(e),l=B2(n);if(!a||!l)return ih(e,n);const u=q({},a);return p=>(u.red=kg(a.red,l.red,p),u.green=kg(a.green,l.green,p),u.blue=kg(a.blue,l.blue,p),u.alpha=ur(a.alpha,l.alpha,p),Eo.transform(u))},c0=new Set(["none","hidden"]);function Mz(e,n){return c0.has(e)?a=>a<=0?e:n:a=>a>=1?n:e}function Dz(e,n){return a=>ur(e,n,a)}function um(e){return typeof e=="number"?Dz:typeof e=="string"?lm(e)?ih:Dr.test(e)?P2:$z:Array.isArray(e)?gS:typeof e=="object"?Dr.test(e)?P2:Iz:ih}function gS(e,n){const a=[...e],l=a.length,u=e.map((p,h)=>um(p)(p,n[h]));return p=>{for(let h=0;h<l;h++)a[h]=u[h](p);return a}}function Iz(e,n){const a=q(q({},e),n),l={};for(const u in a)e[u]!==void 0&&n[u]!==void 0&&(l[u]=um(e[u])(e[u],n[u]));return u=>{for(const p in l)a[p]=l[p](u);return a}}function Wz(e,n){var u;const a=[],l={color:0,var:0,number:0};for(let p=0;p<n.values.length;p++){const h=n.types[p],x=e.indexes[h][l[h]],m=(u=e.values[x])!=null?u:0;a[p]=m,l[h]++}return a}const $z=(e,n)=>{const a=Ga.createTransformer(n),l=Pc(e),u=Pc(n);return l.indexes.var.length===u.indexes.var.length&&l.indexes.color.length===u.indexes.color.length&&l.indexes.number.length>=u.indexes.number.length?c0.has(e)&&!u.values.length||c0.has(n)&&!l.values.length?Mz(e,n):ed(gS(Wz(l,u),u.values),a):ih(e,n)};function mS(e,n,a){return typeof e=="number"&&typeof n=="number"&&typeof a=="number"?ur(e,n,a):um(e)(e,n)}const Oz=e=>{const n=({timestamp:a})=>e(a);return{start:(a=!0)=>ar.update(n,a),stop:()=>Qa(n),now:()=>en.isProcessing?en.timestamp:_n.now()}},xS=(e,n,a=10)=>{let l="";const u=Math.max(Math.round(n/a),2);for(let p=0;p<u;p++)l+=Math.round(e(p/(u-1))*1e4)/1e4+", ";return`linear(${l.substring(0,l.length-2)})`},ah=2e4;function hm(e){let n=0;const a=50;let l=e.next(n);for(;!l.done&&n<ah;)n+=a,l=e.next(n);return n>=ah?1/0:n}function Lz(e,n=100,a){const l=a(ae(q({},e),{keyframes:[0,n]})),u=Math.min(hm(l),ah);return{type:"keyframes",ease:p=>l.next(u*p).value/n,duration:Fi(u)}}const Bz=5;function bS(e,n,a){const l=Math.max(n-Bz,0);return K5(a-e(l),n-l)}const mr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_g=.001;function Pz({duration:e=mr.duration,bounce:n=mr.bounce,velocity:a=mr.velocity,mass:l=mr.mass}){let u,p,h=1-n;h=xa(mr.minDamping,mr.maxDamping,h),e=xa(mr.minDuration,mr.maxDuration,Fi(e)),h<1?(u=y=>{const v=y*h,S=v*e,_=v-a,k=d0(y,h),E=Math.exp(-S);return _g-_/k*E},p=y=>{const S=y*h*e,_=S*a+a,k=Math.pow(h,2)*Math.pow(y,2)*e,E=Math.exp(-S),R=d0(Math.pow(y,2),h);return(-u(y)+_g>0?-1:1)*((_-k)*E)/R}):(u=y=>{const v=Math.exp(-y*e),S=(y-a)*e+1;return-_g+v*S},p=y=>{const v=Math.exp(-y*e),S=(a-y)*(e*e);return v*S});const x=5/e,m=Nz(u,p,x);if(e=Ni(e),isNaN(m))return{stiffness:mr.stiffness,damping:mr.damping,duration:e};{const y=Math.pow(m,2)*l;return{stiffness:y,damping:h*2*Math.sqrt(l*y),duration:e}}}const jz=12;function Nz(e,n,a){let l=a;for(let u=1;u<jz;u++)l=l-e(l)/n(l);return l}function d0(e,n){return e*Math.sqrt(1-n*n)}const Fz=["duration","bounce"],Hz=["stiffness","damping","mass"];function j2(e,n){return n.some(a=>e[a]!==void 0)}function Vz(e){let n=q({velocity:mr.velocity,stiffness:mr.stiffness,damping:mr.damping,mass:mr.mass,isResolvedFromDuration:!1},e);if(!j2(e,Hz)&&j2(e,Fz))if(e.visualDuration){const a=e.visualDuration,l=2*Math.PI/(a*1.2),u=l*l,p=2*xa(.05,1,1-(e.bounce||0))*Math.sqrt(u);n=ae(q({},n),{mass:mr.mass,stiffness:u,damping:p})}else{const a=Pz(e);n=ae(q(q({},n),a),{mass:mr.mass}),n.isResolvedFromDuration=!0}return n}function oh(e=mr.visualDuration,n=mr.bounce){const a=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:n}:e;let{restSpeed:l,restDelta:u}=a;const p=a.keyframes[0],h=a.keyframes[a.keyframes.length-1],x={done:!1,value:p},{stiffness:m,damping:y,mass:v,duration:S,velocity:_,isResolvedFromDuration:k}=Vz(ae(q({},a),{velocity:-Fi(a.velocity||0)})),E=_||0,R=y/(2*Math.sqrt(m*v)),W=h-p,T=Fi(Math.sqrt(m/v)),z=Math.abs(W)<5;l||(l=z?mr.restSpeed.granular:mr.restSpeed.default),u||(u=z?mr.restDelta.granular:mr.restDelta.default);let N;if(R<1){const J=d0(T,R);N=H=>{const U=Math.exp(-R*T*H);return h-U*((E+R*T*W)/J*Math.sin(J*H)+W*Math.cos(J*H))}}else if(R===1)N=J=>h-Math.exp(-T*J)*(W+(E+T*W)*J);else{const J=T*Math.sqrt(R*R-1);N=H=>{const U=Math.exp(-R*T*H),A=Math.min(J*H,300);return h-U*((E+R*T*W)*Math.sinh(A)+J*W*Math.cosh(A))/J}}const G={calculatedDuration:k&&S||null,next:J=>{const H=N(J);if(k)x.done=J>=S;else{let U=J===0?E:0;R<1&&(U=J===0?Ni(E):bS(N,J,H));const A=Math.abs(U)<=l,V=Math.abs(h-H)<=u;x.done=A&&V}return x.value=x.done?h:H,x},toString:()=>{const J=Math.min(hm(G),ah),H=xS(U=>G.next(J*U).value,J,30);return J+"ms "+H},toTransition:()=>{}};return G}oh.applyToOptions=e=>{const n=Lz(e,100,oh);return e.ease=n.ease,e.duration=Ni(n.duration),e.type="keyframes",e};function u0({keyframes:e,velocity:n=0,power:a=.8,timeConstant:l=325,bounceDamping:u=10,bounceStiffness:p=500,modifyTarget:h,min:x,max:m,restDelta:y=.5,restSpeed:v}){const S=e[0],_={done:!1,value:S},k=A=>x!==void 0&&A<x||m!==void 0&&A>m,E=A=>x===void 0?m:m===void 0||Math.abs(x-A)<Math.abs(m-A)?x:m;let R=a*n;const W=S+R,T=h===void 0?W:h(W);T!==W&&(R=T-S);const z=A=>-R*Math.exp(-A/l),N=A=>T+z(A),G=A=>{const V=z(A),Y=N(A);_.done=Math.abs(V)<=y,_.value=_.done?T:Y};let J,H;const U=A=>{k(_.value)&&(J=A,H=oh({keyframes:[_.value,E(_.value)],velocity:bS(N,A,_.value),damping:u,stiffness:p,restDelta:y,restSpeed:v}))};return U(0),{calculatedDuration:null,next:A=>{let V=!1;return!H&&J===void 0&&(V=!0,G(A),U(A)),J!==void 0&&A>=J?H.next(A-J):(!V&&G(A),_)}}}function Uz(e,n,a){const l=[],u=a||ba.mix||mS,p=e.length-1;for(let h=0;h<p;h++){let x=u(e[h],e[h+1]);if(n){const m=Array.isArray(n)?n[h]||di:n;x=ed(m,x)}l.push(x)}return l}function qz(e,n,{clamp:a=!0,ease:l,mixer:u}={}){const p=e.length;if(rm(p===n.length),p===1)return()=>n[0];if(p===2&&n[0]===n[1])return()=>n[1];const h=e[0]===e[1];e[0]>e[p-1]&&(e=[...e].reverse(),n=[...n].reverse());const x=Uz(n,l,u),m=x.length,y=v=>{if(h&&v<e[0])return n[0];let S=0;if(m>1)for(;S<e.length-2&&!(v<e[S+1]);S++);const _=Lc(e[S],e[S+1],v);return x[S](_)};return a?v=>y(xa(e[0],e[p-1],v)):y}function Yz(e,n){const a=e[e.length-1];for(let l=1;l<=n;l++){const u=Lc(0,n,l);e.push(ur(a,1,u))}}function Qz(e){const n=[0];return Yz(n,e.length-1),n}function Gz(e,n){return e.map(a=>a*n)}function Xz(e,n){return e.map(()=>n||oS).splice(0,e.length-1)}function Rc({duration:e=300,keyframes:n,times:a,ease:l="easeInOut"}){const u=sz(l)?l.map(W2):W2(l),p={done:!1,value:n[0]},h=Gz(a&&a.length===n.length?a:Qz(n),e),x=qz(h,n,{ease:Array.isArray(u)?u:Xz(n,u)});return{calculatedDuration:e,next:m=>(p.value=x(m),p.done=m>=e,p)}}const Kz=e=>e!==null;function fm(e,{repeat:n,repeatType:a="loop"},l,u=1){const p=e.filter(Kz),x=u<0||n&&a!=="loop"&&n%2===1?0:p.length-1;return!x||l===void 0?p[x]:l}const Zz={decay:u0,inertia:u0,tween:Rc,keyframes:Rc,spring:oh};function yS(e){typeof e.type=="string"&&(e.type=Zz[e.type])}class pm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,a){return this.finished.then(n,a)}}const Jz=e=>e/100;class gm extends pm{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var l,u;const{motionValue:a}=this.options;a&&a.updatedAt!==_n.now()&&this.tick(_n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(u=(l=this.options).onStop)==null||u.call(l))},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;yS(n);const{type:a=Rc,repeat:l=0,repeatDelay:u=0,repeatType:p,velocity:h=0}=n;let{keyframes:x}=n;const m=a||Rc;m!==Rc&&typeof x[0]!="number"&&(this.mixKeyframes=ed(Jz,mS(x[0],x[1])),x=[0,100]);const y=m(ae(q({},n),{keyframes:x}));p==="mirror"&&(this.mirroredGenerator=m(ae(q({},n),{keyframes:[...x].reverse(),velocity:-h}))),y.calculatedDuration===null&&(y.calculatedDuration=hm(y));const{calculatedDuration:v}=y;this.calculatedDuration=v,this.resolvedDuration=v+u,this.totalDuration=this.resolvedDuration*(l+1)-u,this.generator=y}updateTime(n){const a=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(n,a=!1){const{generator:l,totalDuration:u,mixKeyframes:p,mirroredGenerator:h,resolvedDuration:x,calculatedDuration:m}=this;if(this.startTime===null)return l.next(0);const{delay:y=0,keyframes:v,repeat:S,repeatType:_,repeatDelay:k,type:E,onUpdate:R,finalKeyframe:W}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-u/this.speed,this.startTime)),a?this.currentTime=n:this.updateTime(n);const T=this.currentTime-y*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?T<0:T>u;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let N=this.currentTime,G=l;if(S){const A=Math.min(this.currentTime,u)/x;let V=Math.floor(A),Y=A%1;!Y&&A>=1&&(Y=1),Y===1&&V--,V=Math.min(V,S+1),!!(V%2)&&(_==="reverse"?(Y=1-Y,k&&(Y-=k/x)):_==="mirror"&&(G=h)),N=xa(0,1,Y)*x}const J=z?{done:!1,value:v[0]}:G.next(N);p&&(J.value=p(J.value));let{done:H}=J;!z&&m!==null&&(H=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const U=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return U&&E!==u0&&(J.value=fm(v,this.options,W,this.speed)),R&&R(J.value),U&&this.finish(),J}then(n,a){return this.finished.then(n,a)}get duration(){return Fi(this.calculatedDuration)}get time(){return Fi(this.currentTime)}set time(n){var a;n=Ni(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(_n.now());const a=this.playbackSpeed!==n;this.playbackSpeed=n,a&&(this.time=Fi(this.currentTime))}play(){var u,p;if(this.isStopped)return;const{driver:n=Oz,startTime:a}=this.options;this.driver||(this.driver=n(h=>this.tick(h))),(p=(u=this.options).onPlay)==null||p.call(u);const l=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=l):this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime||(this.startTime=a!=null?a:l),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var n,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(n=this.options).onComplete)==null||a.call(n)}cancel(){var n,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(n=this.options).onCancel)==null||a.call(n)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),n.observe(this)}}function eR(e){var n;for(let a=1;a<e.length;a++)(n=e[a])!=null||(e[a]=e[a-1])}const To=e=>e*180/Math.PI,h0=e=>{const n=To(Math.atan2(e[1],e[0]));return f0(n)},tR={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:h0,rotateZ:h0,skewX:e=>To(Math.atan(e[1])),skewY:e=>To(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},f0=e=>(e=e%360,e<0&&(e+=360),e),N2=h0,F2=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),H2=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),rR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:F2,scaleY:H2,scale:e=>(F2(e)+H2(e))/2,rotateX:e=>f0(To(Math.atan2(e[6],e[5]))),rotateY:e=>f0(To(Math.atan2(-e[2],e[0]))),rotateZ:N2,rotate:N2,skewX:e=>To(Math.atan(e[4])),skewY:e=>To(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function p0(e){return e.includes("scale")?1:0}function g0(e,n){if(!e||e==="none")return p0(n);const a=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let l,u;if(a)l=rR,u=a;else{const x=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);l=tR,u=x}if(!u)return p0(n);const p=l[n],h=u[1].split(",").map(iR);return typeof p=="function"?p(h):h[p]}const nR=(e,n)=>{const{transform:a="none"}=getComputedStyle(e);return g0(a,n)};function iR(e){return parseFloat(e.trim())}const al=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ol=new Set(al),V2=e=>e===il||e===at,aR=new Set(["x","y","z"]),oR=al.filter(e=>!aR.has(e));function sR(e){const n=[];return oR.forEach(a=>{const l=e.getValue(a);l!==void 0&&(n.push([a,l.get()]),l.set(a.startsWith("scale")?1:0))}),n}const $o={width:({x:e},{paddingLeft:n="0",paddingRight:a="0"})=>e.max-e.min-parseFloat(n)-parseFloat(a),height:({y:e},{paddingTop:n="0",paddingBottom:a="0"})=>e.max-e.min-parseFloat(n)-parseFloat(a),top:(e,{top:n})=>parseFloat(n),left:(e,{left:n})=>parseFloat(n),bottom:({y:e},{top:n})=>parseFloat(n)+(e.max-e.min),right:({x:e},{left:n})=>parseFloat(n)+(e.max-e.min),x:(e,{transform:n})=>g0(n,"x"),y:(e,{transform:n})=>g0(n,"y")};$o.translateX=$o.x;$o.translateY=$o.y;const Oo=new Set;let m0=!1,x0=!1,b0=!1;function vS(){if(x0){const e=Array.from(Oo).filter(l=>l.needsMeasurement),n=new Set(e.map(l=>l.element)),a=new Map;n.forEach(l=>{const u=sR(l);u.length&&(a.set(l,u),l.render())}),e.forEach(l=>l.measureInitialState()),n.forEach(l=>{l.render();const u=a.get(l);u&&u.forEach(([p,h])=>{var x;(x=l.getValue(p))==null||x.set(h)})}),e.forEach(l=>l.measureEndState()),e.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}x0=!1,m0=!1,Oo.forEach(e=>e.complete(b0)),Oo.clear()}function wS(){Oo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(x0=!0)})}function lR(){b0=!0,wS(),vS(),b0=!1}class mm{constructor(n,a,l,u,p,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=a,this.name=l,this.motionValue=u,this.element=p,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(Oo.add(this),m0||(m0=!0,ar.read(wS),ar.resolveKeyframes(vS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:a,element:l,motionValue:u}=this;if(n[0]===null){const p=u==null?void 0:u.get(),h=n[n.length-1];if(p!==void 0)n[0]=p;else if(l&&a){const x=l.readValue(a,h);x!=null&&(n[0]=x)}n[0]===void 0&&(n[0]=h),u&&p===void 0&&u.set(n[0])}eR(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),Oo.delete(this)}cancel(){this.state==="scheduled"&&(Oo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cR=e=>e.startsWith("--");function dR(e,n,a){cR(n)?e.style.setProperty(n,a):e.style[n]=a}const uR=nm(()=>window.ScrollTimeline!==void 0),hR={};function fR(e,n){const a=nm(e);return()=>{var l;return(l=hR[n])!=null?l:a()}}const SS=fR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),xc=([e,n,a,l])=>`cubic-bezier(${e}, ${n}, ${a}, ${l})`,U2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xc([0,.65,.55,1]),circOut:xc([.55,0,1,.45]),backIn:xc([.31,.01,.66,-.59]),backOut:xc([.33,1.53,.69,.99])};function CS(e,n){if(e)return typeof e=="function"?SS()?xS(e,n):"ease-out":sS(e)?xc(e):Array.isArray(e)?e.map(a=>CS(a,n)||U2.easeOut):U2[e]}function pR(e,n,a,{delay:l=0,duration:u=300,repeat:p=0,repeatType:h="loop",ease:x="easeOut",times:m}={},y=void 0){const v={[n]:a};m&&(v.offset=m);const S=CS(x,u);Array.isArray(S)&&(v.easing=S);const _={delay:l,duration:u,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:p+1,direction:h==="reverse"?"alternate":"normal"};return y&&(_.pseudoElement=y),e.animate(v,_)}function kS(e){return typeof e=="function"&&"applyToOptions"in e}function gR(a){var l=a,{type:e}=l,n=un(l,["type"]);var u,p;return kS(e)&&SS()?e.applyToOptions(n):((u=n.duration)!=null||(n.duration=300),(p=n.ease)!=null||(n.ease="easeOut"),n)}class mR extends pm{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:a,name:l,keyframes:u,pseudoElement:p,allowFlatten:h=!1,finalKeyframe:x,onComplete:m}=n;this.isPseudoElement=!!p,this.allowFlatten=h,this.options=n,rm(typeof n.type!="string");const y=gR(n);this.animation=pR(a,l,u,y,p),y.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!p){const v=fm(u,this.options,x,this.speed);this.updateMotionValue?this.updateMotionValue(v):dR(a,l,v),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var n,a;(a=(n=this.animation).finish)==null||a.call(n)}cancel(){try{this.animation.cancel()}catch(n){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,a;this.isPseudoElement||(a=(n=this.animation).commitStyles)==null||a.call(n)}get duration(){var a,l;const n=((l=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:l.call(a).duration)||0;return Fi(Number(n))}get time(){return Fi(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Ni(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:a}){var l;return this.allowFlatten&&((l=this.animation.effect)==null||l.updateTiming({easing:"linear"})),this.animation.onfinish=null,n&&uR()?(this.animation.timeline=n,di):a(this)}}const _S={anticipate:nS,backInOut:rS,circInOut:aS};function xR(e){return e in _S}function bR(e){typeof e.ease=="string"&&xR(e.ease)&&(e.ease=_S[e.ease])}const q2=10;class yR extends mR{constructor(n){bR(n),yS(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){var v;const y=this.options,{motionValue:a,onUpdate:l,onComplete:u,element:p}=y,h=un(y,["motionValue","onUpdate","onComplete","element"]);if(!a)return;if(n!==void 0){a.set(n);return}const x=new gm(ae(q({},h),{autoplay:!1})),m=Ni((v=this.finishedTime)!=null?v:this.time);a.setWithVelocity(x.sample(m-q2).value,x.sample(m).value,q2),x.stop()}}const Y2=(e,n)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ga.test(e)||e==="0")&&!e.startsWith("url("));function vR(e){const n=e[0];if(e.length===1)return!0;for(let a=0;a<e.length;a++)if(e[a]!==n)return!0}function wR(e,n,a,l){const u=e[0];if(u===null)return!1;if(n==="display"||n==="visibility")return!0;const p=e[e.length-1],h=Y2(u,n),x=Y2(p,n);return!h||!x?!1:vR(e)||(a==="spring"||kS(a))&&l}function xm(e){return G5(e)&&"offsetHeight"in e}const SR=new Set(["opacity","clipPath","filter","transform"]),CR=nm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kR(e){var y;const{motionValue:n,name:a,repeatDelay:l,repeatType:u,damping:p,type:h}=e;if(!xm((y=n==null?void 0:n.owner)==null?void 0:y.current))return!1;const{onUpdate:x,transformTemplate:m}=n.owner.getProps();return CR()&&a&&SR.has(a)&&(a!=="transform"||!m)&&!x&&!l&&u!=="mirror"&&p!==0&&h!=="inertia"}const _R=40;class AR extends pm{constructor(_){var k=_,{autoplay:n=!0,delay:a=0,type:l="keyframes",repeat:u=0,repeatDelay:p=0,repeatType:h="loop",keyframes:x,name:m,motionValue:y,element:v}=k,S=un(k,["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"]);var W;super(),this.stop=()=>{var T,z;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(z=this.keyframeResolver)==null||z.cancel()},this.createdAt=_n.now();const E=q({autoplay:n,delay:a,type:l,repeat:u,repeatDelay:p,repeatType:h,name:m,motionValue:y,element:v},S),R=(v==null?void 0:v.KeyframeResolver)||mm;this.keyframeResolver=new R(x,(T,z,N)=>this.onKeyframesResolved(T,z,E,!N),m,y,v),(W=this.keyframeResolver)==null||W.scheduleResolve()}onKeyframesResolved(n,a,l,u){this.keyframeResolver=void 0;const{name:p,type:h,velocity:x,delay:m,isHandoff:y,onUpdate:v}=l;this.resolvedAt=_n.now(),wR(n,p,h,x)||((ba.instantAnimations||!m)&&(v==null||v(fm(n,l,a))),n[0]=n[n.length-1],l.duration=0,l.repeat=0);const S=u?this.resolvedAt?this.resolvedAt-this.createdAt>_R?this.resolvedAt:this.createdAt:this.createdAt:void 0,_=ae(q({startTime:S,finalKeyframe:a},l),{keyframes:n}),k=!y&&kR(_)?new yR(ae(q({},_),{element:_.motionValue.owner.current})):new gm(_);k.finished.then(()=>this.notifyFinished()).catch(di),this.pendingTimeline&&(this.stopTimeline=k.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=k}get finished(){return this._animation?this.animation.finished:this._finished}then(n,a){return this.finished.finally(n).then(()=>{})}get animation(){var n;return this._animation||((n=this.keyframeResolver)==null||n.resume(),lR()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var n;this._animation&&this.animation.cancel(),(n=this.keyframeResolver)==null||n.cancel()}}const zR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RR(e){const n=zR.exec(e);if(!n)return[,];const[,a,l,u]=n;return[`--${a!=null?a:l}`,u]}function AS(e,n,a=1){const[l,u]=RR(e);if(!l)return;const p=window.getComputedStyle(n).getPropertyValue(l);if(p){const h=p.trim();return Q5(h)?parseFloat(h):h}return lm(u)?AS(u,n,a+1):u}function bm(e,n){var a,l;return(l=(a=e==null?void 0:e[n])!=null?a:e==null?void 0:e.default)!=null?l:e}const zS=new Set(["width","height","top","left","right","bottom",...al]),ER={test:e=>e==="auto",parse:e=>e},RS=e=>n=>n.test(e),ES=[il,at,Hi,Va,vz,yz,ER],Q2=e=>ES.find(RS(e));function TR(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||X5(e):!0}const MR=new Set(["brightness","contrast","saturate","opacity"]);function DR(e){const[n,a]=e.slice(0,-1).split("(");if(n==="drop-shadow")return e;const[l]=a.match(cm)||[];if(!l)return e;const u=a.replace(l,"");let p=MR.has(n)?1:0;return l!==a&&(p*=100),n+"("+p+u+")"}const IR=/\b([a-z-]*)\(.*?\)/gu,y0=ae(q({},Ga),{getAnimatableNone:e=>{const n=e.match(IR);return n?n.map(DR).join(" "):e}}),G2=ae(q({},il),{transform:Math.round}),WR={rotate:Va,rotateX:Va,rotateY:Va,rotateZ:Va,scale:Ru,scaleX:Ru,scaleY:Ru,scaleZ:Ru,skew:Va,skewX:Va,skewY:Va,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:Bc,originX:O2,originY:O2,originZ:at},ym=ae(q({borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,backgroundPositionX:at,backgroundPositionY:at},WR),{zIndex:G2,fillOpacity:Bc,strokeOpacity:Bc,numOctaves:G2}),$R=ae(q({},ym),{color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,filter:y0,WebkitFilter:y0}),TS=e=>$R[e];function MS(e,n){let a=TS(e);return a!==y0&&(a=Ga),a.getAnimatableNone?a.getAnimatableNone(n):void 0}const OR=new Set(["auto","none","0"]);function LR(e,n,a){let l=0,u;for(;l<e.length&&!u;){const p=e[l];typeof p=="string"&&!OR.has(p)&&Pc(p).values.length&&(u=e[l]),l++}if(u&&a)for(const p of n)e[p]=MS(a,u)}class BR extends mm{constructor(n,a,l,u,p){super(n,a,l,u,p,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:a,name:l}=this;if(!a||!a.current)return;super.readKeyframes();for(let m=0;m<n.length;m++){let y=n[m];if(typeof y=="string"&&(y=y.trim(),lm(y))){const v=AS(y,a.current);v!==void 0&&(n[m]=v),m===n.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!zS.has(l)||n.length!==2)return;const[u,p]=n,h=Q2(u),x=Q2(p);if(h!==x)if(V2(h)&&V2(x))for(let m=0;m<n.length;m++){const y=n[m];typeof y=="string"&&(n[m]=parseFloat(y))}else $o[l]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:a}=this,l=[];for(let u=0;u<n.length;u++)(n[u]===null||TR(n[u]))&&l.push(u);l.length&&LR(n,l,a)}measureInitialState(){const{element:n,unresolvedKeyframes:a,name:l}=this;if(!n||!n.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$o[l](n.measureViewportBox(),window.getComputedStyle(n.current)),a[0]=this.measuredOrigin;const u=a[a.length-1];u!==void 0&&n.getValue(l,u).jump(u,!1)}measureEndState(){var x;const{element:n,name:a,unresolvedKeyframes:l}=this;if(!n||!n.current)return;const u=n.getValue(a);u&&u.jump(this.measuredOrigin,!1);const p=l.length-1,h=l[p];l[p]=$o[a](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(x=this.removedTransforms)!=null&&x.length&&this.removedTransforms.forEach(([m,y])=>{n.getValue(m).set(y)}),this.resolveNoneKeyframes()}}function PR(e,n,a){var l;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let u=document;const p=(l=a==null?void 0:a[e])!=null?l:u.querySelectorAll(e);return p?Array.from(p):[]}return Array.from(e)}const DS=(e,n)=>n&&typeof e=="number"?n.transform(e):e,X2=30,jR=e=>!isNaN(parseFloat(e));class NR{constructor(n,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(l,u=!0)=>{var h,x;const p=_n.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const m of this.dependents)m.dirty();u&&((x=this.events.renderRequest)==null||x.notify(this.current))},this.hasAnimated=!1,this.setCurrent(n),this.owner=a.owner}setCurrent(n){this.current=n,this.updatedAt=_n.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=jR(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,a){this.events[n]||(this.events[n]=new im);const l=this.events[n].add(a);return n==="change"?()=>{l(),ar.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,a){this.passiveEffect=n,this.stopPassiveEffect=a}set(n,a=!0){!a||!this.passiveEffect?this.updateAndNotify(n,a):this.passiveEffect(n,this.updateAndNotify)}setWithVelocity(n,a,l){this.set(a),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-l}jump(n,a=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var n;(n=this.events.change)==null||n.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=_n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>X2)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,X2);return K5(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(n){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=n(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var n,a;(n=this.dependents)==null||n.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tl(e,n){return new NR(e,n)}const{schedule:vm}=lS(queueMicrotask,!1),vi={x:!1,y:!1};function IS(){return vi.x||vi.y}function FR(e){return e==="x"||e==="y"?vi[e]?null:(vi[e]=!0,()=>{vi[e]=!1}):vi.x||vi.y?null:(vi.x=vi.y=!0,()=>{vi.x=vi.y=!1})}function WS(e,n){const a=PR(e),l=new AbortController,u=ae(q({passive:!0},n),{signal:l.signal});return[a,u,()=>l.abort()]}function K2(e){return!(e.pointerType==="touch"||IS())}function HR(e,n,a={}){const[l,u,p]=WS(e,a),h=x=>{if(!K2(x))return;const{target:m}=x,y=n(m,x);if(typeof y!="function"||!m)return;const v=S=>{K2(S)&&(y(S),m.removeEventListener("pointerleave",v))};m.addEventListener("pointerleave",v,u)};return l.forEach(x=>{x.addEventListener("pointerenter",h,u)}),p}const $S=(e,n)=>n?e===n?!0:$S(e,n.parentElement):!1,wm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,VR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function UR(e){return VR.has(e.tagName)||e.tabIndex!==-1}const Nu=new WeakSet;function Z2(e){return n=>{n.key==="Enter"&&e(n)}}function Ag(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const qR=(e,n)=>{const a=e.currentTarget;if(!a)return;const l=Z2(()=>{if(Nu.has(a))return;Ag(a,"down");const u=Z2(()=>{Ag(a,"up")}),p=()=>Ag(a,"cancel");a.addEventListener("keyup",u,n),a.addEventListener("blur",p,n)});a.addEventListener("keydown",l,n),a.addEventListener("blur",()=>a.removeEventListener("keydown",l),n)};function J2(e){return wm(e)&&!IS()}function YR(e,n,a={}){const[l,u,p]=WS(e,a),h=x=>{const m=x.currentTarget;if(!J2(x))return;Nu.add(m);const y=n(m,x),v=(k,E)=>{window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",_),Nu.has(m)&&Nu.delete(m),J2(k)&&typeof y=="function"&&y(k,{success:E})},S=k=>{v(k,m===window||m===document||a.useGlobalTarget||$S(m,k.target))},_=k=>{v(k,!1)};window.addEventListener("pointerup",S,u),window.addEventListener("pointercancel",_,u)};return l.forEach(x=>{(a.useGlobalTarget?window:x).addEventListener("pointerdown",h,u),xm(x)&&(x.addEventListener("focus",y=>qR(y,u)),!UR(x)&&!x.hasAttribute("tabindex")&&(x.tabIndex=0))}),p}function OS(e){return G5(e)&&"ownerSVGElement"in e}function QR(e){return OS(e)&&e.tagName==="svg"}const hn=e=>!!(e&&e.getVelocity),GR=[...ES,Dr,Ga],XR=e=>GR.find(RS(e)),Sm=w.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class KR extends w.Component{getSnapshotBeforeUpdate(n){const a=this.props.childRef.current;if(a&&n.isPresent&&!this.props.isPresent){const l=a.offsetParent,u=xm(l)&&l.offsetWidth||0,p=this.props.sizeRef.current;p.height=a.offsetHeight||0,p.width=a.offsetWidth||0,p.top=a.offsetTop,p.left=a.offsetLeft,p.right=u-p.width-p.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ZR({children:e,isPresent:n,anchorX:a,root:l}){const u=w.useId(),p=w.useRef(null),h=w.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=w.useContext(Sm);return w.useInsertionEffect(()=>{const{width:m,height:y,top:v,left:S,right:_}=h.current;if(n||!p.current||!m||!y)return;const k=a==="left"?`left: ${S}`:`right: ${_}`;p.current.dataset.motionPopId=u;const E=document.createElement("style");x&&(E.nonce=x);const R=l!=null?l:document.head;return R.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${k}px !important;
            top: ${v}px !important;
          }
        `),()=>{R.removeChild(E),R.contains(E)&&R.removeChild(E)}},[n]),An.jsx(KR,{isPresent:n,childRef:p,sizeRef:h,children:w.cloneElement(e,{ref:p})})}const JR=({children:e,initial:n,isPresent:a,onExitComplete:l,custom:u,presenceAffectsLayout:p,mode:h,anchorX:x,root:m})=>{const y=Z0(eE),v=w.useId();let S=!0,_=w.useMemo(()=>(S=!1,{id:v,initial:n,isPresent:a,custom:u,onExitComplete:k=>{y.set(k,!0);for(const E of y.values())if(!E)return;l&&l()},register:k=>(y.set(k,!1),()=>y.delete(k))}),[a,y,l]);return p&&S&&(_=q({},_)),w.useMemo(()=>{y.forEach((k,E)=>y.set(E,!1))},[a]),w.useEffect(()=>{!a&&!y.size&&l&&l()},[a]),h==="popLayout"&&(e=An.jsx(ZR,{isPresent:a,anchorX:x,root:m,children:e})),An.jsx(_h.Provider,{value:_,children:e})};function eE(){return new Map}function LS(e=!0){const n=w.useContext(_h);if(n===null)return[!0,null];const{isPresent:a,onExitComplete:l,register:u}=n,p=w.useId();w.useEffect(()=>{if(e)return u(p)},[e]);const h=w.useCallback(()=>e&&l&&l(p),[p,l,e]);return!a&&l?[!1,h]:[!0]}const Eu=e=>e.key||"";function ev(e){const n=[];return w.Children.forEach(e,a=>{w.isValidElement(a)&&n.push(a)}),n}const tE=({children:e,custom:n,initial:a=!0,onExitComplete:l,presenceAffectsLayout:u=!0,mode:p="sync",propagate:h=!1,anchorX:x="left",root:m})=>{const[y,v]=LS(h),S=w.useMemo(()=>ev(e),[e]),_=h&&!y?[]:S.map(Eu),k=w.useRef(!0),E=w.useRef(S),R=Z0(()=>new Map),[W,T]=w.useState(S),[z,N]=w.useState(S);Y5(()=>{k.current=!1,E.current=S;for(let H=0;H<z.length;H++){const U=Eu(z[H]);_.includes(U)?R.delete(U):R.get(U)!==!0&&R.set(U,!1)}},[z,_.length,_.join("-")]);const G=[];if(S!==W){let H=[...S];for(let U=0;U<z.length;U++){const A=z[U],V=Eu(A);_.includes(V)||(H.splice(U,0,A),G.push(A))}return p==="wait"&&G.length&&(H=G),N(ev(H)),T(S),null}const{forceRender:J}=w.useContext(K0);return An.jsx(An.Fragment,{children:z.map(H=>{const U=Eu(H),A=h&&!y?!1:S===z||_.includes(U),V=()=>{if(R.has(U))R.set(U,!0);else return;let Y=!0;R.forEach(P=>{P||(Y=!1)}),Y&&(J==null||J(),N(E.current),h&&(v==null||v()),l&&l())};return An.jsx(JR,{isPresent:A,initial:!k.current||a?void 0:!1,custom:n,presenceAffectsLayout:u,mode:p,root:m,onExitComplete:A?void 0:V,anchorX:x,children:H},U)})})},BS=w.createContext({strict:!1}),tv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rl={};for(const e in tv)rl[e]={isEnabled:n=>tv[e].some(a=>!!n[a])};function rE(e){for(const n in e)rl[n]=q(q({},rl[n]),e[n])}const nE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nE.has(e)}let PS=e=>!sh(e);function iE(e){typeof e=="function"&&(PS=n=>n.startsWith("on")?!sh(n):e(n))}try{iE(require("@emotion/is-prop-valid").default)}catch(e){}function aE(e,n,a){const l={};for(const u in e)u==="values"&&typeof e.values=="object"||(PS(u)||a===!0&&sh(u)||!n&&!sh(u)||e.draggable&&u.startsWith("onDrag"))&&(l[u]=e[u]);return l}function oE(e){if(typeof Proxy=="undefined")return e;const n=new Map,a=(...l)=>e(...l);return new Proxy(a,{get:(l,u)=>u==="create"?e:(n.has(u)||n.set(u,e(u)),n.get(u))})}const Ah=w.createContext({});function zh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function jc(e){return typeof e=="string"||Array.isArray(e)}const Cm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],km=["initial",...Cm];function Rh(e){return zh(e.animate)||km.some(n=>jc(e[n]))}function jS(e){return!!(Rh(e)||e.variants)}function sE(e,n){if(Rh(e)){const{initial:a,animate:l}=e;return{initial:a===!1||jc(a)?a:void 0,animate:jc(l)?l:void 0}}return e.inherit!==!1?n:{}}function lE(e){const{initial:n,animate:a}=sE(e,w.useContext(Ah));return w.useMemo(()=>({initial:n,animate:a}),[rv(n),rv(a)])}function rv(e){return Array.isArray(e)?e.join(" "):e}const cE=Symbol.for("motionComponentSymbol");function Ns(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function dE(e,n,a){return w.useCallback(l=>{l&&e.onMount&&e.onMount(l),n&&(l?n.mount(l):n.unmount()),a&&(typeof a=="function"?a(l):Ns(a)&&(a.current=l))},[n])}const _m=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uE="framerAppearId",NS="data-"+_m(uE),FS=w.createContext({});function hE(e,n,a,l,u){var R,W;const{visualElement:p}=w.useContext(Ah),h=w.useContext(BS),x=w.useContext(_h),m=w.useContext(Sm).reducedMotion,y=w.useRef(null);l=l||h.renderer,!y.current&&l&&(y.current=l(e,{visualState:n,parent:p,props:a,presenceContext:x,blockInitialAnimation:x?x.initial===!1:!1,reducedMotionConfig:m}));const v=y.current,S=w.useContext(FS);v&&!v.projection&&u&&(v.type==="html"||v.type==="svg")&&fE(y.current,a,u,S);const _=w.useRef(!1);w.useInsertionEffect(()=>{v&&_.current&&v.update(a,x)});const k=a[NS],E=w.useRef(!!k&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,k))&&((W=window.MotionHasOptimisedAnimation)==null?void 0:W.call(window,k)));return Y5(()=>{v&&(_.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),vm.render(v.render),E.current&&v.animationState&&v.animationState.animateChanges())}),w.useEffect(()=>{v&&(!E.current&&v.animationState&&v.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,k)}),E.current=!1))}),v}function fE(e,n,a,l){const{layoutId:u,layout:p,drag:h,dragConstraints:x,layoutScroll:m,layoutRoot:y,layoutCrossfade:v}=n;e.projection=new a(e.latestValues,n["data-framer-portal-id"]?void 0:HS(e.parent)),e.projection.setOptions({layoutId:u,layout:p,alwaysMeasureLayout:!!h||x&&Ns(x),visualElement:e,animationType:typeof p=="string"?p:"both",initialPromotionConfig:l,crossfade:v,layoutScroll:m,layoutRoot:y})}function HS(e){if(e)return e.options.allowProjection!==!1?e.projection:HS(e.parent)}function pE({preloadedFeatures:e,createVisualElement:n,useRender:a,useVisualState:l,Component:u}){var x,m;e&&rE(e);function p(y,v){let S;const _=ae(q(q({},w.useContext(Sm)),y),{layoutId:gE(y)}),{isStatic:k}=_,E=lE(y),R=l(y,k);if(!k&&J0){mE();const W=xE(_);S=W.MeasureLayout,E.visualElement=hE(u,R,_,n,W.ProjectionNode)}return An.jsxs(Ah.Provider,{value:E,children:[S&&E.visualElement?An.jsx(S,q({visualElement:E.visualElement},_)):null,a(u,y,dE(R,E.visualElement,v),R,k,E.visualElement)]})}p.displayName=`motion.${typeof u=="string"?u:`create(${(m=(x=u.displayName)!=null?x:u.name)!=null?m:""})`}`;const h=w.forwardRef(p);return h[cE]=u,h}function gE({layoutId:e}){const n=w.useContext(K0).id;return n&&e!==void 0?n+"-"+e:e}function mE(e,n){w.useContext(BS).strict}function xE(e){const{drag:n,layout:a}=rl;if(!n&&!a)return{};const l=q(q({},n),a);return{MeasureLayout:n!=null&&n.isEnabled(e)||a!=null&&a.isEnabled(e)?l.MeasureLayout:void 0,ProjectionNode:l.ProjectionNode}}const Nc={};function bE(e){for(const n in e)Nc[n]=e[n],sm(n)&&(Nc[n].isCSSVariable=!0)}function VS(e,{layout:n,layoutId:a}){return ol.has(e)||e.startsWith("origin")||(n||a!==void 0)&&(!!Nc[e]||e==="opacity")}const yE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vE=al.length;function wE(e,n,a){let l="",u=!0;for(let p=0;p<vE;p++){const h=al[p],x=e[h];if(x===void 0)continue;let m=!0;if(typeof x=="number"?m=x===(h.startsWith("scale")?1:0):m=parseFloat(x)===0,!m||a){const y=DS(x,ym[h]);if(!m){u=!1;const v=yE[h]||h;l+=`${v}(${y}) `}a&&(n[h]=y)}}return l=l.trim(),a?l=a(n,u?"":l):u&&(l="none"),l}function Am(e,n,a){const{style:l,vars:u,transformOrigin:p}=e;let h=!1,x=!1;for(const m in n){const y=n[m];if(ol.has(m)){h=!0;continue}else if(sm(m)){u[m]=y;continue}else{const v=DS(y,ym[m]);m.startsWith("origin")?(x=!0,p[m]=v):l[m]=v}}if(n.transform||(h||a?l.transform=wE(n,e.transform,a):l.transform&&(l.transform="none")),x){const{originX:m="50%",originY:y="50%",originZ:v=0}=p;l.transformOrigin=`${m} ${y} ${v}`}}const zm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function US(e,n,a){for(const l in n)!hn(n[l])&&!VS(l,a)&&(e[l]=n[l])}function SE({transformTemplate:e},n){return w.useMemo(()=>{const a=zm();return Am(a,n,e),Object.assign({},a.vars,a.style)},[n])}function CE(e,n){const a=e.style||{},l={};return US(l,a,e),Object.assign(l,SE(e,n)),l}function kE(e,n){const a={},l=CE(e,n);return e.drag&&e.dragListener!==!1&&(a.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(a.tabIndex=0),a.style=l,a}const _E={offset:"stroke-dashoffset",array:"stroke-dasharray"},AE={offset:"strokeDashoffset",array:"strokeDasharray"};function zE(e,n,a=1,l=0,u=!0){e.pathLength=1;const p=u?_E:AE;e[p.offset]=at.transform(-l);const h=at.transform(n),x=at.transform(a);e[p.array]=`${h} ${x}`}function qS(e,S,m,y,v){var _=S,{attrX:n,attrY:a,attrScale:l,pathLength:u,pathSpacing:p=1,pathOffset:h=0}=_,x=un(_,["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"]);var R,W;if(Am(e,x,y),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:k,style:E}=e;k.transform&&(E.transform=k.transform,delete k.transform),(E.transform||k.transformOrigin)&&(E.transformOrigin=(R=k.transformOrigin)!=null?R:"50% 50%",delete k.transformOrigin),E.transform&&(E.transformBox=(W=v==null?void 0:v.transformBox)!=null?W:"fill-box",delete k.transformBox),n!==void 0&&(k.x=n),a!==void 0&&(k.y=a),l!==void 0&&(k.scale=l),u!==void 0&&zE(k,u,p,h,!1)}const YS=()=>ae(q({},zm()),{attrs:{}}),QS=e=>typeof e=="string"&&e.toLowerCase()==="svg";function RE(e,n,a,l){const u=w.useMemo(()=>{const p=YS();return qS(p,n,QS(l),e.transformTemplate,e.style),ae(q({},p.attrs),{style:q({},p.style)})},[n]);if(e.style){const p={};US(p,e.style,e),u.style=q(q({},p),u.style)}return u}const EE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rm(e){return typeof e!="string"||e.includes("-")?!1:!!(EE.indexOf(e)>-1||/[A-Z]/u.test(e))}function TE(e=!1){return(a,l,u,{latestValues:p},h)=>{const m=(Rm(a)?RE:kE)(l,p,h,a),y=aE(l,typeof a=="string",e),v=a!==w.Fragment?ae(q(q({},y),m),{ref:u}):{},{children:S}=l,_=w.useMemo(()=>hn(S)?S.get():S,[S]);return w.createElement(a,ae(q({},v),{children:_}))}}function nv(e){const n=[{},{}];return e==null||e.values.forEach((a,l)=>{n[0][l]=a.get(),n[1][l]=a.getVelocity()}),n}function Em(e,n,a,l){if(typeof n=="function"){const[u,p]=nv(l);n=n(a!==void 0?a:e.custom,u,p)}if(typeof n=="string"&&(n=e.variants&&e.variants[n]),typeof n=="function"){const[u,p]=nv(l);n=n(a!==void 0?a:e.custom,u,p)}return n}function Fu(e){return hn(e)?e.get():e}function ME({scrapeMotionValuesFromProps:e,createRenderState:n},a,l,u){return{latestValues:DE(a,l,u,e),renderState:n()}}const GS=e=>(n,a)=>{const l=w.useContext(Ah),u=w.useContext(_h),p=()=>ME(e,n,l,u);return a?p():Z0(p)};function DE(e,n,a,l){const u={},p=l(e,{});for(const k in p)u[k]=Fu(p[k]);let{initial:h,animate:x}=e;const m=Rh(e),y=jS(e);n&&y&&!m&&e.inherit!==!1&&(h===void 0&&(h=n.initial),x===void 0&&(x=n.animate));let v=a?a.initial===!1:!1;v=v||h===!1;const S=v?x:h;if(S&&typeof S!="boolean"&&!zh(S)){const k=Array.isArray(S)?S:[S];for(let E=0;E<k.length;E++){const R=Em(e,k[E]);if(R){const _=R,{transitionEnd:W,transition:T}=_,z=un(_,["transitionEnd","transition"]);for(const N in z){let G=z[N];if(Array.isArray(G)){const J=v?G.length-1:0;G=G[J]}G!==null&&(u[N]=G)}for(const N in W)u[N]=W[N]}}}return u}function Tm(e,n,a){var p;const{style:l}=e,u={};for(const h in l)(hn(l[h])||n.style&&hn(n.style[h])||VS(h,e)||((p=a==null?void 0:a.getValue(h))==null?void 0:p.liveStyle)!==void 0)&&(u[h]=l[h]);return u}const IE={useVisualState:GS({scrapeMotionValuesFromProps:Tm,createRenderState:zm})};function XS(e,n,a){const l=Tm(e,n,a);for(const u in e)if(hn(e[u])||hn(n[u])){const p=al.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;l[p]=e[u]}return l}const WE={useVisualState:GS({scrapeMotionValuesFromProps:XS,createRenderState:YS})};function $E(e,n){return function(l,{forwardMotionProps:u}={forwardMotionProps:!1}){const p=Rm(l)?WE:IE,h=ae(q({},p),{preloadedFeatures:e,useRender:TE(u),createVisualElement:n,Component:l});return pE(h)}}function Fc(e,n,a){const l=e.getProps();return Em(l,n,a!==void 0?a:l.custom,e)}const v0=e=>Array.isArray(e);function OE(e,n,a){e.hasValue(n)?e.getValue(n).set(a):e.addValue(n,tl(a))}function LE(e){return v0(e)?e[e.length-1]||0:e}function BE(e,n){let h=Fc(e,n)||{},{transitionEnd:l={},transition:u={}}=h,p=un(h,["transitionEnd","transition"]);p=q(q({},p),l);for(const x in p){const m=LE(p[x]);OE(e,x,m)}}function PE(e){return!!(hn(e)&&e.add)}function w0(e,n){const a=e.getValue("willChange");if(PE(a))return a.add(n);if(!a&&ba.WillChange){const l=new ba.WillChange("auto");e.addValue("willChange",l),l.add(n)}}function KS(e){return e.props[NS]}const jE=e=>e!==null;function NE(e,{repeat:n,repeatType:a="loop"},l){const u=e.filter(jE),p=n&&a!=="loop"&&n%2===1?0:u.length-1;return u[p]}const FE={type:"spring",stiffness:500,damping:25,restSpeed:10},HE=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),VE={type:"keyframes",duration:.8},UE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qE=(e,{keyframes:n})=>n.length>2?VE:ol.has(e)?e.startsWith("scale")?HE(n[1]):FE:UE;function YE(S){var _=S,{when:e,delay:n,delayChildren:a,staggerChildren:l,staggerDirection:u,repeat:p,repeatType:h,repeatDelay:x,from:m,elapsed:y}=_,v=un(_,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(v).length}const Mm=(e,n,a,l={},u,p)=>h=>{const x=bm(l,e)||{},m=x.delay||l.delay||0;let{elapsed:y=0}=l;y=y-Ni(m);const v=ae(q({keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:n.getVelocity()},x),{delay:-y,onUpdate:_=>{n.set(_),x.onUpdate&&x.onUpdate(_)},onComplete:()=>{h(),x.onComplete&&x.onComplete()},name:e,motionValue:n,element:p?void 0:u});YE(x)||Object.assign(v,qE(e,v)),v.duration&&(v.duration=Ni(v.duration)),v.repeatDelay&&(v.repeatDelay=Ni(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let S=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&(v.duration=0,v.delay===0&&(S=!0)),(ba.instantAnimations||ba.skipAnimations)&&(S=!0,v.duration=0,v.delay=0),v.allowFlatten=!x.type&&!x.ease,S&&!p&&n.get()!==void 0){const _=NE(v.keyframes,x);if(_!==void 0){ar.update(()=>{v.onUpdate(_),v.onComplete()});return}}return x.isSync?new gm(v):new AR(v)};function QE({protectedKeys:e,needsAnimating:n},a){const l=e.hasOwnProperty(a)&&n[a]!==!0;return n[a]=!1,l}function ZS(e,n,{delay:a=0,transitionOverride:l,type:u}={}){var S;let v=n,{transition:p=e.getDefaultTransition(),transitionEnd:h}=v,x=un(v,["transition","transitionEnd"]);l&&(p=l);const m=[],y=u&&e.animationState&&e.animationState.getState()[u];for(const _ in x){const k=e.getValue(_,(S=e.latestValues[_])!=null?S:null),E=x[_];if(E===void 0||y&&QE(y,_))continue;const R=q({delay:a},bm(p||{},_)),W=k.get();if(W!==void 0&&!k.isAnimating&&!Array.isArray(E)&&E===W&&!R.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const N=KS(e);if(N){const G=window.MotionHandoffAnimation(N,_,ar);G!==null&&(R.startTime=G,T=!0)}}w0(e,_),k.start(Mm(_,k,E,e.shouldReduceMotion&&zS.has(_)?{type:!1}:R,e,T));const z=k.animation;z&&m.push(z)}return h&&Promise.all(m).then(()=>{ar.update(()=>{h&&BE(e,h)})}),m}function S0(e,n,a={}){var m;const l=Fc(e,n,a.type==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);let{transition:u=e.getDefaultTransition()||{}}=l||{};a.transitionOverride&&(u=a.transitionOverride);const p=l?()=>Promise.all(ZS(e,l,a)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(y=0)=>{const{delayChildren:v=0,staggerChildren:S,staggerDirection:_}=u;return GE(e,n,y,v,S,_,a)}:()=>Promise.resolve(),{when:x}=u;if(x){const[y,v]=x==="beforeChildren"?[p,h]:[h,p];return y().then(()=>v())}else return Promise.all([p(),h(a.delay)])}function GE(e,n,a=0,l=0,u=0,p=1,h){const x=[],m=e.variantChildren.size,y=(m-1)*u,v=typeof l=="function",S=v?_=>l(_,m):p===1?(_=0)=>_*u:(_=0)=>y-_*u;return Array.from(e.variantChildren).sort(XE).forEach((_,k)=>{_.notify("AnimationStart",n),x.push(S0(_,n,ae(q({},h),{delay:a+(v?0:l)+S(k)})).then(()=>_.notify("AnimationComplete",n)))}),Promise.all(x)}function XE(e,n){return e.sortNodePosition(n)}function KE(e,n,a={}){e.notify("AnimationStart",n);let l;if(Array.isArray(n)){const u=n.map(p=>S0(e,p,a));l=Promise.all(u)}else if(typeof n=="string")l=S0(e,n,a);else{const u=typeof n=="function"?Fc(e,n,a.custom):n;l=Promise.all(ZS(e,u,a))}return l.then(()=>{e.notify("AnimationComplete",n)})}function JS(e,n){if(!Array.isArray(n))return!1;const a=n.length;if(a!==e.length)return!1;for(let l=0;l<a;l++)if(n[l]!==e[l])return!1;return!0}const ZE=km.length;function eC(e){if(!e)return;if(!e.isControllingVariants){const a=e.parent?eC(e.parent)||{}:{};return e.props.initial!==void 0&&(a.initial=e.props.initial),a}const n={};for(let a=0;a<ZE;a++){const l=km[a],u=e.props[l];(jc(u)||u===!1)&&(n[l]=u)}return n}const JE=[...Cm].reverse(),eT=Cm.length;function tT(e){return n=>Promise.all(n.map(({animation:a,options:l})=>KE(e,a,l)))}function rT(e){let n=tT(e),a=iv(),l=!0;const u=m=>(y,v)=>{var _;const S=Fc(e,v,m==="exit"?(_=e.presenceContext)==null?void 0:_.custom:void 0);if(S){const k=S,{transition:E,transitionEnd:R}=k,W=un(k,["transition","transitionEnd"]);y=q(q(q({},y),W),R)}return y};function p(m){n=m(e)}function h(m){const{props:y}=e,v=eC(e.parent)||{},S=[],_=new Set;let k={},E=1/0;for(let W=0;W<eT;W++){const T=JE[W],z=a[T],N=y[T]!==void 0?y[T]:v[T],G=jc(N),J=T===m?z.isActive:null;J===!1&&(E=W);let H=N===v[T]&&N!==y[T]&&G;if(H&&l&&e.manuallyAnimateOnMount&&(H=!1),z.protectedKeys=q({},k),!z.isActive&&J===null||!N&&!z.prevProp||zh(N)||typeof N=="boolean")continue;const U=nT(z.prevProp,N);let A=U||T===m&&z.isActive&&!H&&G||W>E&&G,V=!1;const Y=Array.isArray(N)?N:[N];let P=Y.reduce(u(T),{});J===!1&&(P={});const{prevResolvedValues:I={}}=z,B=q(q({},I),P),F=O=>{A=!0,_.has(O)&&(V=!0,_.delete(O)),z.needsAnimating[O]=!0;const C=e.getValue(O);C&&(C.liveStyle=!1)};for(const O in B){const C=P[O],X=I[O];if(k.hasOwnProperty(O))continue;let Z=!1;v0(C)&&v0(X)?Z=!JS(C,X):Z=C!==X,Z?C!=null?F(O):_.add(O):C!==void 0&&_.has(O)?F(O):z.protectedKeys[O]=!0}z.prevProp=N,z.prevResolvedValues=P,z.isActive&&(k=q(q({},k),P)),l&&e.blockInitialAnimation&&(A=!1),A&&(!(H&&U)||V)&&S.push(...Y.map(O=>({animation:O,options:{type:T}})))}if(_.size){const W={};if(typeof y.initial!="boolean"){const T=Fc(e,Array.isArray(y.initial)?y.initial[0]:y.initial);T&&T.transition&&(W.transition=T.transition)}_.forEach(T=>{const z=e.getBaseTarget(T),N=e.getValue(T);N&&(N.liveStyle=!0),W[T]=z!=null?z:null}),S.push({animation:W})}let R=!!S.length;return l&&(y.initial===!1||y.initial===y.animate)&&!e.manuallyAnimateOnMount&&(R=!1),l=!1,R?n(S):Promise.resolve()}function x(m,y){var S;if(a[m].isActive===y)return Promise.resolve();(S=e.variantChildren)==null||S.forEach(_=>{var k;return(k=_.animationState)==null?void 0:k.setActive(m,y)}),a[m].isActive=y;const v=h(m);for(const _ in a)a[_].protectedKeys={};return v}return{animateChanges:h,setActive:x,setAnimateFunction:p,getState:()=>a,reset:()=>{a=iv(),l=!0}}}function nT(e,n){return typeof n=="string"?n!==e:Array.isArray(n)?!JS(n,e):!1}function bo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iv(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class Za{constructor(n){this.isMounted=!1,this.node=n}update(){}}class iT extends Za{constructor(n){super(n),n.animationState||(n.animationState=rT(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();zh(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:a}=this.node.prevProps||{};n!==a&&this.updateAnimationControlsSubscription()}unmount(){var n;this.node.animationState.reset(),(n=this.unmountControls)==null||n.call(this)}}let aT=0;class oT extends Za{constructor(){super(...arguments),this.id=aT++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:a}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===l)return;const u=this.node.animationState.setActive("exit",!n);a&&!n&&u.then(()=>{a(this.id)})}mount(){const{register:n,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const sT={animation:{Feature:iT},exit:{Feature:oT}};function Hc(e,n,a,l={passive:!0}){return e.addEventListener(n,a,l),()=>e.removeEventListener(n,a)}function nd(e){return{point:{x:e.pageX,y:e.pageY}}}const lT=e=>n=>wm(n)&&e(n,nd(n));function Ec(e,n,a,l){return Hc(e,n,lT(a),l)}function tC({top:e,left:n,right:a,bottom:l}){return{x:{min:n,max:a},y:{min:e,max:l}}}function cT({x:e,y:n}){return{top:n.min,right:e.max,bottom:n.max,left:e.min}}function dT(e,n){if(!n)return e;const a=n({x:e.left,y:e.top}),l=n({x:e.right,y:e.bottom});return{top:a.y,left:a.x,bottom:l.y,right:l.x}}const rC=1e-4,uT=1-rC,hT=1+rC,nC=.01,fT=0-nC,pT=0+nC;function mn(e){return e.max-e.min}function gT(e,n,a){return Math.abs(e-n)<=a}function av(e,n,a,l=.5){e.origin=l,e.originPoint=ur(n.min,n.max,e.origin),e.scale=mn(a)/mn(n),e.translate=ur(a.min,a.max,e.origin)-e.originPoint,(e.scale>=uT&&e.scale<=hT||isNaN(e.scale))&&(e.scale=1),(e.translate>=fT&&e.translate<=pT||isNaN(e.translate))&&(e.translate=0)}function Tc(e,n,a,l){av(e.x,n.x,a.x,l?l.originX:void 0),av(e.y,n.y,a.y,l?l.originY:void 0)}function ov(e,n,a){e.min=a.min+n.min,e.max=e.min+mn(n)}function mT(e,n,a){ov(e.x,n.x,a.x),ov(e.y,n.y,a.y)}function sv(e,n,a){e.min=n.min-a.min,e.max=e.min+mn(n)}function Mc(e,n,a){sv(e.x,n.x,a.x),sv(e.y,n.y,a.y)}const lv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fs=()=>({x:lv(),y:lv()}),cv=()=>({min:0,max:0}),Ar=()=>({x:cv(),y:cv()});function ai(e){return[e("x"),e("y")]}function zg(e){return e===void 0||e===1}function C0({scale:e,scaleX:n,scaleY:a}){return!zg(e)||!zg(n)||!zg(a)}function _o(e){return C0(e)||iC(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function iC(e){return dv(e.x)||dv(e.y)}function dv(e){return e&&e!=="0%"}function lh(e,n,a){const l=e-a,u=n*l;return a+u}function uv(e,n,a,l,u){return u!==void 0&&(e=lh(e,u,l)),lh(e,a,l)+n}function k0(e,n=0,a=1,l,u){e.min=uv(e.min,n,a,l,u),e.max=uv(e.max,n,a,l,u)}function aC(e,{x:n,y:a}){k0(e.x,n.translate,n.scale,n.originPoint),k0(e.y,a.translate,a.scale,a.originPoint)}const hv=.999999999999,fv=1.0000000000001;function xT(e,n,a,l=!1){const u=a.length;if(!u)return;n.x=n.y=1;let p,h;for(let x=0;x<u;x++){p=a[x],h=p.projectionDelta;const{visualElement:m}=p.options;m&&m.props.style&&m.props.style.display==="contents"||(l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Vs(e,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),h&&(n.x*=h.x.scale,n.y*=h.y.scale,aC(e,h)),l&&_o(p.latestValues)&&Vs(e,p.latestValues))}n.x<fv&&n.x>hv&&(n.x=1),n.y<fv&&n.y>hv&&(n.y=1)}function Hs(e,n){e.min=e.min+n,e.max=e.max+n}function pv(e,n,a,l,u=.5){const p=ur(e.min,e.max,u);k0(e,n,a,p,l)}function Vs(e,n){pv(e.x,n.x,n.scaleX,n.scale,n.originX),pv(e.y,n.y,n.scaleY,n.scale,n.originY)}function oC(e,n){return tC(dT(e.getBoundingClientRect(),n))}function bT(e,n,a){const l=oC(e,a),{scroll:u}=n;return u&&(Hs(l.x,u.offset.x),Hs(l.y,u.offset.y)),l}const sC=({current:e})=>e?e.ownerDocument.defaultView:null,gv=(e,n)=>Math.abs(e-n);function yT(e,n){const a=gv(e.x,n.x),l=gv(e.y,n.y);return Math.sqrt(Op(a,2)+Op(l,2))}class lC{constructor(n,a,{transformPagePoint:l,contextWindow:u=window,dragSnapToOrigin:p=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Eg(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,E=yT(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!k&&!E)return;const{point:R}=_,{timestamp:W}=en;this.history.push(ae(q({},R),{timestamp:W}));const{onStart:T,onMove:z}=this.handlers;k||(T&&T(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,_)},this.handlePointerMove=(_,k)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Rg(k,this.transformPagePoint),ar.update(this.updatePoint,!0)},this.handlePointerUp=(_,k)=>{this.end();const{onEnd:E,onSessionEnd:R,resumeAnimation:W}=this.handlers;if(this.dragSnapToOrigin&&W&&W(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Eg(_.type==="pointercancel"?this.lastMoveEventInfo:Rg(k,this.transformPagePoint),this.history);this.startEvent&&E&&E(_,T),R&&R(_,T)},!wm(n))return;this.dragSnapToOrigin=p,this.handlers=a,this.transformPagePoint=l,this.distanceThreshold=h,this.contextWindow=u||window;const x=nd(n),m=Rg(x,this.transformPagePoint),{point:y}=m,{timestamp:v}=en;this.history=[ae(q({},y),{timestamp:v})];const{onSessionStart:S}=a;S&&S(n,Eg(m,this.history)),this.removeListeners=ed(Ec(this.contextWindow,"pointermove",this.handlePointerMove),Ec(this.contextWindow,"pointerup",this.handlePointerUp),Ec(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),Qa(this.updatePoint)}}function Rg(e,n){return n?{point:n(e.point)}:e}function mv(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Eg({point:e},n){return{point:e,delta:mv(e,cC(n)),offset:mv(e,vT(n)),velocity:wT(n,.1)}}function vT(e){return e[0]}function cC(e){return e[e.length-1]}function wT(e,n){if(e.length<2)return{x:0,y:0};let a=e.length-1,l=null;const u=cC(e);for(;a>=0&&(l=e[a],!(u.timestamp-l.timestamp>Ni(n)));)a--;if(!l)return{x:0,y:0};const p=Fi(u.timestamp-l.timestamp);if(p===0)return{x:0,y:0};const h={x:(u.x-l.x)/p,y:(u.y-l.y)/p};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function ST(e,{min:n,max:a},l){return n!==void 0&&e<n?e=l?ur(n,e,l.min):Math.max(e,n):a!==void 0&&e>a&&(e=l?ur(a,e,l.max):Math.min(e,a)),e}function xv(e,n,a){return{min:n!==void 0?e.min+n:void 0,max:a!==void 0?e.max+a-(e.max-e.min):void 0}}function CT(e,{top:n,left:a,bottom:l,right:u}){return{x:xv(e.x,a,u),y:xv(e.y,n,l)}}function bv(e,n){let a=n.min-e.min,l=n.max-e.max;return n.max-n.min<e.max-e.min&&([a,l]=[l,a]),{min:a,max:l}}function kT(e,n){return{x:bv(e.x,n.x),y:bv(e.y,n.y)}}function _T(e,n){let a=.5;const l=mn(e),u=mn(n);return u>l?a=Lc(n.min,n.max-l,e.min):l>u&&(a=Lc(e.min,e.max-u,n.min)),xa(0,1,a)}function AT(e,n){const a={};return n.min!==void 0&&(a.min=n.min-e.min),n.max!==void 0&&(a.max=n.max-e.min),a}const _0=.35;function zT(e=_0){return e===!1?e=0:e===!0&&(e=_0),{x:yv(e,"left","right"),y:yv(e,"top","bottom")}}function yv(e,n,a){return{min:vv(e,n),max:vv(e,a)}}function vv(e,n){return typeof e=="number"?e:e[n]||0}const RT=new WeakMap;class ET{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ar(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:a=!1,distanceThreshold:l}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const p=S=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(nd(S).point)},h=(S,_)=>{const{drag:k,dragPropagation:E,onDragStart:R}=this.getProps();if(k&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FR(k),!this.openDragLock))return;this.latestPointerEvent=S,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ai(T=>{let z=this.getAxisMotionValue(T).get()||0;if(Hi.test(z)){const{projection:N}=this.visualElement;if(N&&N.layout){const G=N.layout.layoutBox[T];G&&(z=mn(G)*(parseFloat(z)/100))}}this.originPoint[T]=z}),R&&ar.postRender(()=>R(S,_)),w0(this.visualElement,"transform");const{animationState:W}=this.visualElement;W&&W.setActive("whileDrag",!0)},x=(S,_)=>{this.latestPointerEvent=S,this.latestPanInfo=_;const{dragPropagation:k,dragDirectionLock:E,onDirectionLock:R,onDrag:W}=this.getProps();if(!k&&!this.openDragLock)return;const{offset:T}=_;if(E&&this.currentDirection===null){this.currentDirection=TT(T),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",_.point,T),this.updateAxis("y",_.point,T),this.visualElement.render(),W&&W(S,_)},m=(S,_)=>{this.latestPointerEvent=S,this.latestPanInfo=_,this.stop(S,_),this.latestPointerEvent=null,this.latestPanInfo=null},y=()=>ai(S=>{var _;return this.getAnimationState(S)==="paused"&&((_=this.getAxisMotionValue(S).animation)==null?void 0:_.play())}),{dragSnapToOrigin:v}=this.getProps();this.panSession=new lC(n,{onSessionStart:p,onStart:h,onMove:x,onSessionEnd:m,resumeAnimation:y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:l,contextWindow:sC(this.visualElement)})}stop(n,a){const l=n||this.latestPointerEvent,u=a||this.latestPanInfo,p=this.isDragging;if(this.cancel(),!p||!u||!l)return;const{velocity:h}=u;this.startAnimation(h);const{onDragEnd:x}=this.getProps();x&&ar.postRender(()=>x(l,u))}cancel(){this.isDragging=!1;const{projection:n,animationState:a}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(n,a,l){const{drag:u}=this.getProps();if(!l||!Tu(n,u,this.currentDirection))return;const p=this.getAxisMotionValue(n);let h=this.originPoint[n]+l[n];this.constraints&&this.constraints[n]&&(h=ST(h,this.constraints[n],this.elastic[n])),p.set(h)}resolveConstraints(){var p;const{dragConstraints:n,dragElastic:a}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(p=this.visualElement.projection)==null?void 0:p.layout,u=this.constraints;n&&Ns(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&l?this.constraints=CT(l.layoutBox,n):this.constraints=!1,this.elastic=zT(a),u!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&ai(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=AT(l.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:a}=this.getProps();if(!n||!Ns(n))return!1;const l=n.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const p=bT(l,u.root,this.visualElement.getTransformPagePoint());let h=kT(u.layout.layoutBox,p);if(a){const x=a(cT(h));this.hasMutatedConstraints=!!x,x&&(h=tC(x))}return h}startAnimation(n){const{drag:a,dragMomentum:l,dragElastic:u,dragTransition:p,dragSnapToOrigin:h,onDragTransitionEnd:x}=this.getProps(),m=this.constraints||{},y=ai(v=>{if(!Tu(v,a,this.currentDirection))return;let S=m&&m[v]||{};h&&(S={min:0,max:0});const _=u?200:1e6,k=u?40:1e7,E=q(q({type:"inertia",velocity:l?n[v]:0,bounceStiffness:_,bounceDamping:k,timeConstant:750,restDelta:1,restSpeed:10},p),S);return this.startAxisValueAnimation(v,E)});return Promise.all(y).then(x)}startAxisValueAnimation(n,a){const l=this.getAxisMotionValue(n);return w0(this.visualElement,n),l.start(Mm(n,l,0,a,this.visualElement,!1))}stopAnimation(){ai(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){ai(n=>{var a;return(a=this.getAxisMotionValue(n).animation)==null?void 0:a.pause()})}getAnimationState(n){var a;return(a=this.getAxisMotionValue(n).animation)==null?void 0:a.state}getAxisMotionValue(n){const a=`_drag${n.toUpperCase()}`,l=this.visualElement.getProps(),u=l[a];return u||this.visualElement.getValue(n,(l.initial?l.initial[n]:void 0)||0)}snapToCursor(n){ai(a=>{const{drag:l}=this.getProps();if(!Tu(a,l,this.currentDirection))return;const{projection:u}=this.visualElement,p=this.getAxisMotionValue(a);if(u&&u.layout){const{min:h,max:x}=u.layout.layoutBox[a];p.set(n[a]-ur(h,x,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:a}=this.getProps(),{projection:l}=this.visualElement;if(!Ns(a)||!l||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};ai(h=>{const x=this.getAxisMotionValue(h);if(x&&this.constraints!==!1){const m=x.get();u[h]=_T({min:m,max:m},this.constraints[h])}});const{transformTemplate:p}=this.visualElement.getProps();this.visualElement.current.style.transform=p?p({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),ai(h=>{if(!Tu(h,n,null))return;const x=this.getAxisMotionValue(h),{min:m,max:y}=this.constraints[h];x.set(ur(m,y,u[h]))})}addListeners(){if(!this.visualElement.current)return;RT.set(this.visualElement,this);const n=this.visualElement.current,a=Ec(n,"pointerdown",m=>{const{drag:y,dragListener:v=!0}=this.getProps();y&&v&&this.start(m)}),l=()=>{const{dragConstraints:m}=this.getProps();Ns(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,p=u.addEventListener("measure",l);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),ar.read(l);const h=Hc(window,"resize",()=>this.scalePositionWithinConstraints()),x=u.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y})=>{this.isDragging&&y&&(ai(v=>{const S=this.getAxisMotionValue(v);S&&(this.originPoint[v]+=m[v].translate,S.set(S.get()+m[v].translate))}),this.visualElement.render())});return()=>{h(),a(),p(),x&&x()}}getProps(){const n=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:l=!1,dragPropagation:u=!1,dragConstraints:p=!1,dragElastic:h=_0,dragMomentum:x=!0}=n;return ae(q({},n),{drag:a,dragDirectionLock:l,dragPropagation:u,dragConstraints:p,dragElastic:h,dragMomentum:x})}}function Tu(e,n,a){return(n===!0||n===e)&&(a===null||a===e)}function TT(e,n=10){let a=null;return Math.abs(e.y)>n?a="y":Math.abs(e.x)>n&&(a="x"),a}class MT extends Za{constructor(n){super(n),this.removeGroupControls=di,this.removeListeners=di,this.controls=new ET(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||di}unmount(){this.removeGroupControls(),this.removeListeners()}}const wv=e=>(n,a)=>{e&&ar.postRender(()=>e(n,a))};class DT extends Za{constructor(){super(...arguments),this.removePointerDownListener=di}onPointerDown(n){this.session=new lC(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sC(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:a,onPan:l,onPanEnd:u}=this.node.getProps();return{onSessionStart:wv(n),onStart:wv(a),onMove:l,onEnd:(p,h)=>{delete this.session,u&&ar.postRender(()=>u(p,h))}}}mount(){this.removePointerDownListener=Ec(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sv(e,n){return n.max===n.min?0:e/(n.max-n.min)*100}const hc={correct:(e,n)=>{if(!n.target)return e;if(typeof e=="string")if(at.test(e))e=parseFloat(e);else return e;const a=Sv(e,n.target.x),l=Sv(e,n.target.y);return`${a}% ${l}%`}},IT={correct:(e,{treeScale:n,projectionDelta:a})=>{const l=e,u=Ga.parse(e);if(u.length>5)return l;const p=Ga.createTransformer(e),h=typeof u[0]!="number"?1:0,x=a.x.scale*n.x,m=a.y.scale*n.y;u[0+h]/=x,u[1+h]/=m;const y=ur(x,m,.5);return typeof u[2+h]=="number"&&(u[2+h]/=y),typeof u[3+h]=="number"&&(u[3+h]/=y),p(u)}};let Cv=!1;class WT extends w.Component{componentDidMount(){const{visualElement:n,layoutGroup:a,switchLayoutGroup:l,layoutId:u}=this.props,{projection:p}=n;bE($T),p&&(a.group&&a.group.add(p),l&&l.register&&u&&l.register(p),Cv&&p.root.didUpdate(),p.addEventListener("animationComplete",()=>{this.safeToRemove()}),p.setOptions(ae(q({},p.options),{onExitComplete:()=>this.safeToRemove()}))),Hu.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:a,visualElement:l,drag:u,isPresent:p}=this.props,{projection:h}=l;return h&&(h.isPresent=p,Cv=!0,u||n.layoutDependency!==a||a===void 0||n.isPresent!==p?h.willUpdate():this.safeToRemove(),n.isPresent!==p&&(p?h.promote():h.relegate()||ar.postRender(()=>{const x=h.getStack();(!x||!x.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),vm.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:a,switchLayoutGroup:l}=this.props,{projection:u}=n;u&&(u.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(u),l&&l.deregister&&l.deregister(u))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function dC(e){const[n,a]=LS(),l=w.useContext(K0);return An.jsx(WT,ae(q({},e),{layoutGroup:l,switchLayoutGroup:w.useContext(FS),isPresent:n,safeToRemove:a}))}const $T={borderRadius:ae(q({},hc),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:hc,borderTopRightRadius:hc,borderBottomLeftRadius:hc,borderBottomRightRadius:hc,boxShadow:IT};function OT(e,n,a){const l=hn(e)?e:tl(e);return l.start(Mm("",l,n,a)),l.animation}const LT=(e,n)=>e.depth-n.depth;class BT{constructor(){this.children=[],this.isDirty=!1}add(n){em(this.children,n),this.isDirty=!0}remove(n){tm(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(LT),this.isDirty=!1,this.children.forEach(n)}}function PT(e,n){const a=_n.now(),l=({timestamp:u})=>{const p=u-a;p>=n&&(Qa(l),e(p-n))};return ar.setup(l,!0),()=>Qa(l)}const uC=["TopLeft","TopRight","BottomLeft","BottomRight"],jT=uC.length,kv=e=>typeof e=="string"?parseFloat(e):e,_v=e=>typeof e=="number"||at.test(e);function NT(e,n,a,l,u,p){var h,x,m,y;u?(e.opacity=ur(0,(h=a.opacity)!=null?h:1,FT(l)),e.opacityExit=ur((x=n.opacity)!=null?x:1,0,HT(l))):p&&(e.opacity=ur((m=n.opacity)!=null?m:1,(y=a.opacity)!=null?y:1,l));for(let v=0;v<jT;v++){const S=`border${uC[v]}Radius`;let _=Av(n,S),k=Av(a,S);if(_===void 0&&k===void 0)continue;_||(_=0),k||(k=0),_===0||k===0||_v(_)===_v(k)?(e[S]=Math.max(ur(kv(_),kv(k),l),0),(Hi.test(k)||Hi.test(_))&&(e[S]+="%")):e[S]=k}(n.rotate||a.rotate)&&(e.rotate=ur(n.rotate||0,a.rotate||0,l))}function Av(e,n){return e[n]!==void 0?e[n]:e.borderRadius}const FT=hC(0,.5,iS),HT=hC(.5,.95,di);function hC(e,n,a){return l=>l<e?0:l>n?1:a(Lc(e,n,l))}function zv(e,n){e.min=n.min,e.max=n.max}function ii(e,n){zv(e.x,n.x),zv(e.y,n.y)}function Rv(e,n){e.translate=n.translate,e.scale=n.scale,e.originPoint=n.originPoint,e.origin=n.origin}function Ev(e,n,a,l,u){return e-=n,e=lh(e,1/a,l),u!==void 0&&(e=lh(e,1/u,l)),e}function VT(e,n=0,a=1,l=.5,u,p=e,h=e){if(Hi.test(n)&&(n=parseFloat(n),n=ur(h.min,h.max,n/100)-h.min),typeof n!="number")return;let x=ur(p.min,p.max,l);e===p&&(x-=n),e.min=Ev(e.min,n,a,x,u),e.max=Ev(e.max,n,a,x,u)}function Tv(e,n,[a,l,u],p,h){VT(e,n[a],n[l],n[u],n.scale,p,h)}const UT=["x","scaleX","originX"],qT=["y","scaleY","originY"];function Mv(e,n,a,l){Tv(e.x,n,UT,a?a.x:void 0,l?l.x:void 0),Tv(e.y,n,qT,a?a.y:void 0,l?l.y:void 0)}function Dv(e){return e.translate===0&&e.scale===1}function fC(e){return Dv(e.x)&&Dv(e.y)}function Iv(e,n){return e.min===n.min&&e.max===n.max}function YT(e,n){return Iv(e.x,n.x)&&Iv(e.y,n.y)}function Wv(e,n){return Math.round(e.min)===Math.round(n.min)&&Math.round(e.max)===Math.round(n.max)}function pC(e,n){return Wv(e.x,n.x)&&Wv(e.y,n.y)}function $v(e){return mn(e.x)/mn(e.y)}function Ov(e,n){return e.translate===n.translate&&e.scale===n.scale&&e.originPoint===n.originPoint}class QT{constructor(){this.members=[]}add(n){em(this.members,n),n.scheduleRender()}remove(n){if(tm(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(n){const a=this.members.findIndex(u=>n===u);if(a===0)return!1;let l;for(let u=a;u>=0;u--){const p=this.members[u];if(p.isPresent!==!1){l=p;break}}return l?(this.promote(l),!0):!1}promote(n,a){const l=this.lead;if(n!==l&&(this.prevLead=l,this.lead=n,n.show(),l)){l.instance&&l.scheduleRender(),n.scheduleRender(),n.resumeFrom=l,a&&(n.resumeFrom.preserveOpacity=!0),l.snapshot&&(n.snapshot=l.snapshot,n.snapshot.latestValues=l.animationValues||l.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:u}=n.options;u===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:a,resumingFrom:l}=n;a.onExitComplete&&a.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GT(e,n,a){let l="";const u=e.x.translate/n.x,p=e.y.translate/n.y,h=(a==null?void 0:a.z)||0;if((u||p||h)&&(l=`translate3d(${u}px, ${p}px, ${h}px) `),(n.x!==1||n.y!==1)&&(l+=`scale(${1/n.x}, ${1/n.y}) `),a){const{transformPerspective:y,rotate:v,rotateX:S,rotateY:_,skewX:k,skewY:E}=a;y&&(l=`perspective(${y}px) ${l}`),v&&(l+=`rotate(${v}deg) `),S&&(l+=`rotateX(${S}deg) `),_&&(l+=`rotateY(${_}deg) `),k&&(l+=`skewX(${k}deg) `),E&&(l+=`skewY(${E}deg) `)}const x=e.x.scale*n.x,m=e.y.scale*n.y;return(x!==1||m!==1)&&(l+=`scale(${x}, ${m})`),l||"none"}const Tg=["","X","Y","Z"],XT=1e3;let KT=0;function Mg(e,n,a,l){const{latestValues:u}=n;u[e]&&(a[e]=u[e],n.setStaticValue(e,0),l&&(l[e]=0))}function gC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:n}=e.options;if(!n)return;const a=KS(n);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:u,layoutId:p}=e.options;window.MotionCancelOptimisedAnimation(a,"transform",ar,!(u||p))}const{parent:l}=e;l&&!l.hasCheckedOptimisedAppear&&gC(l)}function mC({attachResizeListener:e,defaultParent:n,measureScroll:a,checkIsScrollRoot:l,resetTransform:u}){return class{constructor(h={},x=n==null?void 0:n()){this.id=KT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eM),this.nodes.forEach(iM),this.nodes.forEach(aM),this.nodes.forEach(tM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=x?x.root||x:this,this.path=x?[...x.path,x]:[],this.parent=x,this.depth=x?x.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new BT)}addEventListener(h,x){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new im),this.eventHandlers.get(h).add(x)}notifyListeners(h,...x){const m=this.eventHandlers.get(h);m&&m.notify(...x)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=OS(h)&&!QR(h),this.instance=h;const{layoutId:x,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||x)&&(this.isLayoutDirty=!0),e){let v,S=0;const _=()=>this.root.updateBlockedByResize=!1;ar.read(()=>{S=window.innerWidth}),e(h,()=>{const k=window.innerWidth;k!==S&&(S=k,this.root.updateBlockedByResize=!0,v&&v(),v=PT(_,250),Hu.hasAnimatedSinceResize&&(Hu.hasAnimatedSinceResize=!1,this.nodes.forEach(Pv)))})}x&&this.root.registerSharedNode(x,this),this.options.animate!==!1&&y&&(x||m)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:S,hasRelativeLayoutChanged:_,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||y.getDefaultTransition()||dM,{onLayoutAnimationStart:R,onLayoutAnimationComplete:W}=y.getProps(),T=!this.targetLayout||!pC(this.targetLayout,k),z=!S&&_;if(this.options.layoutRoot||this.resumeFrom||z||S&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N=ae(q({},bm(E,"layout")),{onPlay:R,onComplete:W});(y.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(v,z)}else S||Pv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oM),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const S=this.path[v];S.shouldResetTransform=!0,S.updateScroll("snapshot"),S.options.layoutRoot&&S.willUpdate(!1)}const{layoutId:x,layout:m}=this.options;if(x===void 0&&!m)return;const y=this.getTransformTemplate();this.prevTransformTemplateValue=y?y(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Lv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Bv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nM),this.nodes.forEach(ZT),this.nodes.forEach(JT)):this.nodes.forEach(Bv),this.clearAllSnapshots();const x=_n.now();en.delta=xa(0,1e3/60,x-en.timestamp),en.timestamp=x,en.isProcessing=!0,wg.update.process(en),wg.preRender.process(en),wg.render.process(en),en.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rM),this.sharedNodes.forEach(sM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ar.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ar.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mn(this.snapshot.measuredBox.x)&&!mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ar(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:x}=this.options;x&&x.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let x=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(x=!1),x&&this.instance){const m=l(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:m,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!u)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,x=this.projectionDelta&&!fC(this.projectionDelta),m=this.getTransformTemplate(),y=m?m(this.latestValues,""):void 0,v=y!==this.prevTransformTemplateValue;h&&this.instance&&(x||_o(this.latestValues)||v)&&(u(this.instance,y),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const x=this.measurePageBox();let m=this.removeElementScroll(x);return h&&(m=this.removeTransform(m)),uM(m),{animationId:this.root.animationId,measuredBox:x,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var y;const{visualElement:h}=this.options;if(!h)return Ar();const x=h.measureViewportBox();if(!(((y=this.scroll)==null?void 0:y.wasRoot)||this.path.some(hM))){const{scroll:v}=this.root;v&&(Hs(x.x,v.offset.x),Hs(x.y,v.offset.y))}return x}removeElementScroll(h){var m;const x=Ar();if(ii(x,h),(m=this.scroll)!=null&&m.wasRoot)return x;for(let y=0;y<this.path.length;y++){const v=this.path[y],{scroll:S,options:_}=v;v!==this.root&&S&&_.layoutScroll&&(S.wasRoot&&ii(x,h),Hs(x.x,S.offset.x),Hs(x.y,S.offset.y))}return x}applyTransform(h,x=!1){const m=Ar();ii(m,h);for(let y=0;y<this.path.length;y++){const v=this.path[y];!x&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Vs(m,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),_o(v.latestValues)&&Vs(m,v.latestValues)}return _o(this.latestValues)&&Vs(m,this.latestValues),m}removeTransform(h){const x=Ar();ii(x,h);for(let m=0;m<this.path.length;m++){const y=this.path[m];if(!y.instance||!_o(y.latestValues))continue;C0(y.latestValues)&&y.updateSnapshot();const v=Ar(),S=y.measurePageBox();ii(v,S),Mv(x,y.latestValues,y.snapshot?y.snapshot.layoutBox:void 0,v)}return _o(this.latestValues)&&Mv(x,this.latestValues),x}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options=ae(q(q({},this.options),h),{crossfade:h.crossfade!==void 0?h.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==en.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var _;const x=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=x.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=x.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=x.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==x;if(!(h||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:S}=this.options;if(!(!this.layout||!(v||S))){if(this.resolvedRelativeTargetAt=en.timestamp,!this.targetDelta&&!this.relativeTarget){const k=this.getClosestProjectingParent();k&&k.layout&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ar(),this.relativeTargetOrigin=Ar(),Mc(this.relativeTargetOrigin,this.layout.layoutBox,k.layout.layoutBox),ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ar(),this.targetWithTransforms=Ar()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ii(this.target,this.layout.layoutBox),aC(this.target,this.targetDelta)):ii(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const k=this.getClosestProjectingParent();k&&!!k.resumingFrom==!!this.resumingFrom&&!k.options.layoutScroll&&k.target&&this.animationProgress!==1?(this.relativeParent=k,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ar(),this.relativeTargetOrigin=Ar(),Mc(this.relativeTargetOrigin,this.target,k.target),ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||C0(this.parent.latestValues)||iC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const h=this.getLead(),x=!!this.resumingFrom||this!==h;let m=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(m=!1),x&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===en.timestamp&&(m=!1),m)return;const{layout:y,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||v))return;ii(this.layoutCorrected,this.layout.layoutBox);const S=this.treeScale.x,_=this.treeScale.y;xT(this.layoutCorrected,this.treeScale,this.path,x),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Ar());const{target:k}=h;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Rv(this.prevProjectionDelta.x,this.projectionDelta.x),Rv(this.prevProjectionDelta.y,this.projectionDelta.y)),Tc(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==S||this.treeScale.y!==_||!Ov(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ov(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var x;if((x=this.options.visualElement)==null||x.scheduleRender(),h){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fs(),this.projectionDelta=Fs(),this.projectionDeltaWithTransform=Fs()}setAnimationOrigin(h,x=!1){const m=this.snapshot,y=m?m.latestValues:{},v=q({},this.latestValues),S=Fs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!x;const _=Ar(),k=m?m.source:void 0,E=this.layout?this.layout.source:void 0,R=k!==E,W=this.getStack(),T=!W||W.members.length<=1,z=!!(R&&!T&&this.options.crossfade===!0&&!this.path.some(cM));this.animationProgress=0;let N;this.mixTargetDelta=G=>{const J=G/1e3;jv(S.x,h.x,J),jv(S.y,h.y,J),this.setTargetDelta(S),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mc(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lM(this.relativeTarget,this.relativeTargetOrigin,_,J),N&&YT(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Ar()),ii(N,this.relativeTarget)),R&&(this.animationValues=v,NT(v,y,this.latestValues,J,z,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=J},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var x,m,y;this.notifyListeners("animationStart"),(x=this.currentAnimation)==null||x.stop(),(y=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||y.stop(),this.pendingAnimation&&(Qa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ar.update(()=>{Hu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tl(0)),this.currentAnimation=OT(this.motionValue,[0,1e3],ae(q({},h),{velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),h.onUpdate&&h.onUpdate(v)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:x,target:m,layout:y,latestValues:v}=h;if(!(!x||!m||!y)){if(this!==h&&this.layout&&y&&xC(this.options.animationType,this.layout.layoutBox,y.layoutBox)){m=this.target||Ar();const S=mn(this.layout.layoutBox.x);m.x.min=h.target.x.min,m.x.max=m.x.min+S;const _=mn(this.layout.layoutBox.y);m.y.min=h.target.y.min,m.y.max=m.y.min+_}ii(x,m),Vs(x,v),Tc(this.projectionDeltaWithTransform,this.layoutCorrected,x,v)}}registerSharedNode(h,x){this.sharedNodes.has(h)||this.sharedNodes.set(h,new QT),this.sharedNodes.get(h).add(x);const y=x.options.initialPromotionConfig;x.promote({transition:y?y.transition:void 0,preserveFollowOpacity:y&&y.shouldPreserveFollowOpacity?y.shouldPreserveFollowOpacity(x):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var x;const{layoutId:h}=this.options;return h?((x=this.getStack())==null?void 0:x.lead)||this:this}getPrevLead(){var x;const{layoutId:h}=this.options;return h?(x=this.getStack())==null?void 0:x.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:x,preserveFollowOpacity:m}={}){const y=this.getStack();y&&y.promote(this,m),h&&(this.projectionDelta=void 0,this.needsReset=!0),x&&this.setOptions({transition:x})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let x=!1;const{latestValues:m}=h;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(x=!0),!x)return;const y={};m.z&&Mg("z",h,y,this.animationValues);for(let v=0;v<Tg.length;v++)Mg(`rotate${Tg[v]}`,h,y,this.animationValues),Mg(`skew${Tg[v]}`,h,y,this.animationValues);h.render();for(const v in y)h.setStaticValue(v,y[v]),this.animationValues&&(this.animationValues[v]=y[v]);h.scheduleRender()}applyProjectionStyles(h,x){var E,R;if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=Fu(x==null?void 0:x.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none";return}const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=Fu(x==null?void 0:x.pointerEvents)||""),this.hasProjected&&!_o(this.latestValues)&&(h.transform=m?m({},""):"none",this.hasProjected=!1);return}h.visibility="";const v=y.animationValues||y.latestValues;this.applyTransformsToTarget();let S=GT(this.projectionDeltaWithTransform,this.treeScale,v);m&&(S=m(v,S)),h.transform=S;const{x:_,y:k}=this.projectionDelta;h.transformOrigin=`${_.origin*100}% ${k.origin*100}% 0`,y.animationValues?h.opacity=y===this?(R=(E=v.opacity)!=null?E:this.latestValues.opacity)!=null?R:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=y===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const W in Nc){if(v[W]===void 0)continue;const{correct:T,applyTo:z,isCSSVariable:N}=Nc[W],G=S==="none"?v[W]:T(v[W],y);if(z){const J=z.length;for(let H=0;H<J;H++)h[z[H]]=G}else N?this.options.visualElement.renderState.vars[W]=G:h[W]=G}this.options.layoutId&&(h.pointerEvents=y===this?Fu(x==null?void 0:x.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var x;return(x=h.currentAnimation)==null?void 0:x.stop()}),this.root.nodes.forEach(Lv),this.root.sharedNodes.clear()}}}function ZT(e){e.updateLayout()}function JT(e){var a;const n=((a=e.resumeFrom)==null?void 0:a.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:u}=e.layout,{animationType:p}=e.options,h=n.source!==e.layout.source;p==="size"?ai(S=>{const _=h?n.measuredBox[S]:n.layoutBox[S],k=mn(_);_.min=l[S].min,_.max=_.min+k}):xC(p,n.layoutBox,l)&&ai(S=>{const _=h?n.measuredBox[S]:n.layoutBox[S],k=mn(l[S]);_.max=_.min+k,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[S].max=e.relativeTarget[S].min+k)});const x=Fs();Tc(x,l,n.layoutBox);const m=Fs();h?Tc(m,e.applyTransform(u,!0),n.measuredBox):Tc(m,l,n.layoutBox);const y=!fC(x);let v=!1;if(!e.resumeFrom){const S=e.getClosestProjectingParent();if(S&&!S.resumeFrom){const{snapshot:_,layout:k}=S;if(_&&k){const E=Ar();Mc(E,n.layoutBox,_.layoutBox);const R=Ar();Mc(R,l,k.layoutBox),pC(E,R)||(v=!0),S.options.layoutRoot&&(e.relativeTarget=R,e.relativeTargetOrigin=E,e.relativeParent=S)}}}e.notifyListeners("didUpdate",{layout:l,snapshot:n,delta:m,layoutDelta:x,hasLayoutChanged:y,hasRelativeLayoutChanged:v})}else if(e.isLead()){const{onExitComplete:l}=e.options;l&&l()}e.options.transition=void 0}function eM(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tM(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function rM(e){e.clearSnapshot()}function Lv(e){e.clearMeasurements()}function Bv(e){e.isLayoutDirty=!1}function nM(e){const{visualElement:n}=e.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),e.resetTransform()}function Pv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function iM(e){e.resolveTargetDelta()}function aM(e){e.calcProjection()}function oM(e){e.resetSkewAndRotation()}function sM(e){e.removeLeadSnapshot()}function jv(e,n,a){e.translate=ur(n.translate,0,a),e.scale=ur(n.scale,1,a),e.origin=n.origin,e.originPoint=n.originPoint}function Nv(e,n,a,l){e.min=ur(n.min,a.min,l),e.max=ur(n.max,a.max,l)}function lM(e,n,a,l){Nv(e.x,n.x,a.x,l),Nv(e.y,n.y,a.y,l)}function cM(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const dM={duration:.45,ease:[.4,0,.1,1]},Fv=e=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Hv=Fv("applewebkit/")&&!Fv("chrome/")?Math.round:di;function Vv(e){e.min=Hv(e.min),e.max=Hv(e.max)}function uM(e){Vv(e.x),Vv(e.y)}function xC(e,n,a){return e==="position"||e==="preserve-aspect"&&!gT($v(n),$v(a),.2)}function hM(e){var n;return e!==e.root&&((n=e.scroll)==null?void 0:n.wasRoot)}const fM=mC({attachResizeListener:(e,n)=>Hc(e,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dg={current:void 0},bC=mC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Dg.current){const e=new fM({});e.mount(window),e.setOptions({layoutScroll:!0}),Dg.current=e}return Dg.current},resetTransform:(e,n)=>{e.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),pM={pan:{Feature:DT},drag:{Feature:MT,ProjectionNode:bC,MeasureLayout:dC}};function Uv(e,n,a){const{props:l}=e;e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",a==="Start");const u="onHover"+a,p=l[u];p&&ar.postRender(()=>p(n,nd(n)))}class gM extends Za{mount(){const{current:n}=this.node;n&&(this.unmount=HR(n,(a,l)=>(Uv(this.node,l,"Start"),u=>Uv(this.node,u,"End"))))}unmount(){}}class mM extends Za{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch(a){n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ed(Hc(this.node.current,"focus",()=>this.onFocus()),Hc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qv(e,n,a){const{props:l}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&l.whileTap&&e.animationState.setActive("whileTap",a==="Start");const u="onTap"+(a==="End"?"":a),p=l[u];p&&ar.postRender(()=>p(n,nd(n)))}class xM extends Za{mount(){const{current:n}=this.node;n&&(this.unmount=YR(n,(a,l)=>(qv(this.node,l,"Start"),(u,{success:p})=>qv(this.node,u,p?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A0=new WeakMap,Ig=new WeakMap,bM=e=>{const n=A0.get(e.target);n&&n(e)},yM=e=>{e.forEach(bM)};function vM(a){var l=a,{root:e}=l,n=un(l,["root"]);const u=e||document;Ig.has(u)||Ig.set(u,{});const p=Ig.get(u),h=JSON.stringify(n);return p[h]||(p[h]=new IntersectionObserver(yM,q({root:e},n))),p[h]}function wM(e,n,a){const l=vM(n);return A0.set(e,a),l.observe(e),()=>{A0.delete(e),l.unobserve(e)}}const SM={some:0,all:1};class CM extends Za{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:a,margin:l,amount:u="some",once:p}=n,h={root:a?a.current:void 0,rootMargin:l,threshold:typeof u=="number"?u:SM[u]},x=m=>{const{isIntersecting:y}=m;if(this.isInView===y||(this.isInView=y,p&&!y&&this.hasEnteredView))return;y&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",y);const{onViewportEnter:v,onViewportLeave:S}=this.node.getProps(),_=y?v:S;_&&_(m)};return wM(this.node.current,h,x)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:n,prevProps:a}=this.node;["amount","margin","root"].some(kM(n,a))&&this.startObserver()}unmount(){}}function kM({viewport:e={}},{viewport:n={}}={}){return a=>e[a]!==n[a]}const _M={inView:{Feature:CM},tap:{Feature:xM},focus:{Feature:mM},hover:{Feature:gM}},AM={layout:{ProjectionNode:bC,MeasureLayout:dC}},z0={current:null},yC={current:!1};function zM(){if(yC.current=!0,!!J0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),n=()=>z0.current=e.matches;e.addEventListener("change",n),n()}else z0.current=!1}const RM=new WeakMap;function EM(e,n,a){for(const l in n){const u=n[l],p=a[l];if(hn(u))e.addValue(l,u);else if(hn(p))e.addValue(l,tl(u,{owner:e}));else if(p!==u)if(e.hasValue(l)){const h=e.getValue(l);h.liveStyle===!0?h.jump(u):h.hasAnimated||h.set(u)}else{const h=e.getStaticValue(l);e.addValue(l,tl(h!==void 0?h:u,{owner:e}))}}for(const l in a)n[l]===void 0&&e.removeValue(l);return n}const Yv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TM{scrapeMotionValuesFromProps(n,a,l){return{}}constructor({parent:n,props:a,presenceContext:l,reducedMotionConfig:u,blockInitialAnimation:p,visualState:h},x={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const k=_n.now();this.renderScheduledAt<k&&(this.renderScheduledAt=k,ar.render(this.render,!1,!0))};const{latestValues:m,renderState:y}=h;this.latestValues=m,this.baseTarget=q({},m),this.initialValues=a.initial?q({},m):{},this.renderState=y,this.parent=n,this.props=a,this.presenceContext=l,this.depth=n?n.depth+1:0,this.reducedMotionConfig=u,this.options=x,this.blockInitialAnimation=!!p,this.isControllingVariants=Rh(a),this.isVariantNode=jS(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const _=this.scrapeMotionValuesFromProps(a,{},this),{willChange:v}=_,S=un(_,["willChange"]);for(const k in S){const E=S[k];m[k]!==void 0&&hn(E)&&E.set(m[k],!1)}}mount(n){this.current=n,RM.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,l)=>this.bindToMotionValue(l,a)),yC.current||zM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:z0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Qa(this.notifyUpdate),Qa(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const a=this.features[n];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(n,a){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const l=ol.has(n);l&&this.onBindTransform&&this.onBindTransform();const u=a.on("change",x=>{this.latestValues[n]=x,this.props.onUpdate&&ar.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0)}),p=a.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,n,a)),this.valueSubscriptions.set(n,()=>{u(),p(),h&&h(),a.owner&&a.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in rl){const a=rl[n];if(!a)continue;const{isEnabled:l,Feature:u}=a;if(!this.features[n]&&u&&l(this.props)&&(this.features[n]=new u(this)),this.features[n]){const p=this.features[n];p.isMounted?p.update():(p.mount(),p.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ar()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,a){this.latestValues[n]=a}update(n,a){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let l=0;l<Yv.length;l++){const u=Yv[l];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const p="on"+u,h=n[p];h&&(this.propEventSubscriptions[u]=this.on(u,h))}this.prevMotionValues=EM(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(n),()=>a.variantChildren.delete(n)}addValue(n,a){const l=this.values.get(n);a!==l&&(l&&this.removeValue(n),this.bindToMotionValue(n,a),this.values.set(n,a),this.latestValues[n]=a.get())}removeValue(n){this.values.delete(n);const a=this.valueSubscriptions.get(n);a&&(a(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,a){if(this.props.values&&this.props.values[n])return this.props.values[n];let l=this.values.get(n);return l===void 0&&a!==void 0&&(l=tl(a===null?void 0:a,{owner:this}),this.addValue(n,l)),l}readValue(n,a){var u;let l=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:(u=this.getBaseTargetFromProps(this.props,n))!=null?u:this.readValueFromInstance(this.current,n,this.options);return l!=null&&(typeof l=="string"&&(Q5(l)||X5(l))?l=parseFloat(l):!XR(l)&&Ga.test(a)&&(l=MS(n,a)),this.setBaseTarget(n,hn(l)?l.get():l)),hn(l)?l.get():l}setBaseTarget(n,a){this.baseTarget[n]=a}getBaseTarget(n){var p;const{initial:a}=this.props;let l;if(typeof a=="string"||typeof a=="object"){const h=Em(this.props,a,(p=this.presenceContext)==null?void 0:p.custom);h&&(l=h[n])}if(a&&l!==void 0)return l;const u=this.getBaseTargetFromProps(this.props,n);return u!==void 0&&!hn(u)?u:this.initialValues[n]!==void 0&&l===void 0?void 0:this.baseTarget[n]}on(n,a){return this.events[n]||(this.events[n]=new im),this.events[n].add(a)}notify(n,...a){this.events[n]&&this.events[n].notify(...a)}}class vC extends TM{constructor(){super(...arguments),this.KeyframeResolver=BR}sortInstanceNodePosition(n,a){return n.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(n,a){return n.style?n.style[a]:void 0}removeValueFromRenderState(n,{vars:a,style:l}){delete a[n],delete l[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;hn(n)&&(this.childSubscription=n.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function wC(e,{style:n,vars:a},l,u){const p=e.style;let h;for(h in n)p[h]=n[h];u==null||u.applyProjectionStyles(p,l);for(h in a)p.setProperty(h,a[h])}function MM(e){return window.getComputedStyle(e)}class DM extends vC{constructor(){super(...arguments),this.type="html",this.renderInstance=wC}readValueFromInstance(n,a){var l;if(ol.has(a))return(l=this.projection)!=null&&l.isProjecting?p0(a):nR(n,a);{const u=MM(n),p=(sm(a)?u.getPropertyValue(a):u[a])||0;return typeof p=="string"?p.trim():p}}measureInstanceViewportBox(n,{transformPagePoint:a}){return oC(n,a)}build(n,a,l){Am(n,a,l.transformTemplate)}scrapeMotionValuesFromProps(n,a,l){return Tm(n,a,l)}}const SC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IM(e,n,a,l){wC(e,n,void 0,l);for(const u in n.attrs)e.setAttribute(SC.has(u)?u:_m(u),n.attrs[u])}class WM extends vC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ar}getBaseTargetFromProps(n,a){return n[a]}readValueFromInstance(n,a){if(ol.has(a)){const l=TS(a);return l&&l.default||0}return a=SC.has(a)?a:_m(a),n.getAttribute(a)}scrapeMotionValuesFromProps(n,a,l){return XS(n,a,l)}build(n,a,l){qS(n,a,this.isSVGTag,l.transformTemplate,l.style)}renderInstance(n,a,l,u){IM(n,a,l,u)}mount(n){this.isSVGTag=QS(n.tagName),super.mount(n)}}const $M=(e,n)=>Rm(e)?new WM(n):new DM(n,{allowProjection:e!==w.Fragment}),OM=$E(q(q(q(q({},sT),_M),pM),AM),$M),St=oE(OM),LM={offscreen:{y:50,opacity:0},onscreen:{y:0,opacity:1,transition:{type:"spring",bounce:.4,duration:.8}}},BM=oe(Je)(({theme:e})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:"16px",overflow:"hidden",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.12)",border:"none",background:"rgba(255, 255, 255, 0.85)",backdropFilter:"blur(10px)","&:hover":{transform:"translateY(-10px) scale(1.02)",boxShadow:"0 20px 50px rgba(0, 0, 0, 0.2)","& .course-image":{transform:"scale(1.08)"},"& .cart-button":{transform:"scale(1.1) rotate(8deg)","&::after":{transform:"scale(1.2)",opacity:0}},"& .course-title":{color:e.palette.primary.main},"& .course-instructor":{transform:"translateX(5px)"}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #e94560, #533483)",opacity:.8,transition:"all 0.3s ease"}})),PM=oe("div")(({theme:e})=>({position:"relative",paddingTop:"56.25%",overflow:"hidden",borderRadius:"12px 12px 0 0",margin:"4px","& .course-image":{position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform"},"& .course-badge":{position:"absolute",top:16,right:16,zIndex:1,borderRadius:"20px",fontWeight:600,padding:"6px 12px",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px",background:"rgba(255, 255, 255, 0.9)",color:e.palette.primary.main,boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.15)"}},"&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"60%",background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%)",zIndex:1}})),jM=oe(xe)(({theme:e,added:n})=>({position:"absolute",top:"16px",right:"16px",zIndex:3,backgroundColor:n?e.palette.success.main:"rgba(255, 255, 255, 0.95)",color:n?"#fff":e.palette.primary.main,width:"44px",height:"44px",borderRadius:"50%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:n?e.palette.success.dark:e.palette.primary.main,color:"#fff",transform:"scale(1.1) rotate(8deg)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.2)"},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",border:`2px solid ${n?e.palette.success.main:e.palette.primary.main}`,animation:n?`${Lo} 1.5s infinite`:"none",opacity:.7},"& .cart-icon":{transition:"transform 0.3s ease"},"&:hover .cart-icon":{transform:"scale(1.2) rotate(-8deg)"}})),NM=oe("span")(({theme:e})=>({position:"absolute",top:"-6px",right:"-6px",backgroundColor:e.palette.error.main,color:"#fff",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:"bold",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",animation:`${Lo} 2s infinite`})),FM=ht`
  0% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(5deg); }
  100% { transform: translateY(0px) rotate(0deg); }
`,Lo=ht`
  0% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(1); opacity: 0.8; }
`,HM=ht`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,VM=oe("div")(()=>({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1,overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",zIndex:1},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e94560' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`,opacity:.4,zIndex:2,animation:`${Lo} 15s ease-in-out infinite`}})),Ds=oe("div")({position:"absolute",borderRadius:"50%",background:"linear-gradient(45deg, #0e5181, #1a5f8a)",filter:"blur(60px)",opacity:.15,zIndex:1,animation:`${FM} 15s ease-in-out infinite`,"&:nth-of-type(1)":{width:"300px",height:"300px",top:"10%",right:"10%",animationDelay:"0s"},"&:nth-of-type(2)":{width:"200px",height:"200px",bottom:"20%",right:"15%",animationDelay:"5s"},"&:nth-of-type(3)":{width:"250px",height:"250px",top:"30%",left:"15%",animationDelay:"7s",background:"linear-gradient(45deg, #0a3d62, #0e5181)"}}),UM=oe("div")(({theme:e})=>({background:"linear-gradient(135deg, #0e5181 0%, #1a5f8a 50%, #0a3d62 100%)",color:"white",padding:"30px 0 25px",margin:"0 0 20px 0",position:"relative",overflow:"hidden",boxShadow:"0 15px 50px rgba(0, 0, 0, 0.3)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 20% 30%, rgba(14, 81, 129, 0.3) 0%, transparent 50%)",zIndex:1,animation:`${Lo} 15s ease-in-out infinite`},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e5978b' fill-opacity='0.08' fill-rule='evenodd'/%3E%3C/svg%3E")`,opacity:.6,zIndex:2,animation:`${HM} 120s linear infinite`}}));oe("div")(({theme:e})=>({position:"relative",width:"100%",maxWidth:"800px",margin:"0 auto","& .search-input":{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"50px",padding:"12px 24px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)","& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-notchedOutline":{border:"none"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"none",boxShadow:"0 0 0 2px rgba(229, 151, 139, 0.5)"}},"& .search-button":{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",color:e.palette.primary.main}}));const Qv=oe(Ce,{shouldForwardProp:e=>e!=="selected"})(({theme:e,selected:n})=>({margin:e.spacing(.5),padding:e.spacing(1,2),borderRadius:"20px",fontWeight:600,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"2px solid",borderColor:n?e.palette.primary.main:"transparent",backgroundColor:n?e.palette.primary.main:he(e.palette.background.paper,.8),color:n?"#fff":e.palette.text.primary,boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.15)":"0 2px 8px rgba(0, 0, 0, 0.08)",cursor:"pointer","&:hover":{backgroundColor:n?e.palette.primary.dark:he(e.palette.primary.main,.1),color:n?"#fff":e.palette.primary.main,borderColor:e.palette.primary.main,transform:"translateY(-2px)",boxShadow:"0 6px 25px rgba(0, 0, 0, 0.15)"},"& .MuiChip-label":{fontSize:"0.875rem",padding:"4px 8px"},"& .MuiChip-icon":{fontSize:"1rem"}})),qM=oe(f)(({theme:e})=>({display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",minHeight:"1.6em",fontWeight:700,lineHeight:1.3,marginBottom:"8px",color:e.palette.text.primary,transition:"color 0.3s ease"})),YM=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",marginTop:"auto",paddingTop:"12px",borderTop:"1px solid rgba(0,0,0,0.05)"})),QM=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",color:e.palette.text.secondary,fontSize:"0.875rem","& > *":{display:"flex",alignItems:"center",marginLeft:e.spacing(1.5),"& svg":{fontSize:"1rem",marginLeft:e.spacing(.5)}}})),GM=()=>{var I;const e=Vt(),[n,a]=w.useState([]),[l,u]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState(""),[S,_]=w.useState("all"),[k,E]=w.useState("all"),[R,W]=w.useState({}),[T,z]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{$(null,null,function*(){try{h(!0),m(null);const[F,Q]=yield Promise.all([tn.getCourses({status:"published"}),tn.getCategories()]),M=F.results||F,O=Q.results||Q;console.log("Courses data:",M),console.log("Categories data:",O),M.length>0&&console.log("Sample course category structure:",M[0].category),a(M),u(O);try{const C=yield Ro.getCart(),X={};C.items&&C.items.forEach(Z=>{X[Z.course.id]=!0}),W(X)}catch(C){console.log("Cart not available:",C)}}catch(F){console.error("Error fetching data:",F),m("حدث خطأ أثناء تحميل الدورات. يرجى المحاولة مرة أخرى.")}finally{h(!1)}})},[]);const N=n.filter(B=>{var X;const F=y.toLowerCase(),Q=!y||((X=B.title)==null?void 0:X.toLowerCase().includes(F))||B.instructors&&B.instructors.some(Z=>{var j;return(j=Z.name)==null?void 0:j.toLowerCase().includes(F)});let M=k==="all";if(!M&&B.category){const Z=typeof B.category=="object"?B.category.id:B.category;M=Z==k,n.indexOf(B)<3&&console.log(`Course "${B.title}":`,{courseCategory:B.category,categoryId:Z,activeCategory:k,matchesCategory:M})}const O=S==="all"||B.level===S,C=Q&&M&&O;return n.indexOf(B)<3&&console.log(`Course "${B.title}" filter result:`,{matchesSearch:Q,matchesCategory:M,matchesLevel:O,finalResult:C}),C}),G=(B,F)=>{_(F)},J=B=>{console.log("Category changed to:",B),E(B)},H=(B,F)=>$(null,null,function*(){var Q;F.preventDefault(),F.stopPropagation();try{if(R[B]){const O=(Q=(yield Ro.getCart()).items)==null?void 0:Q.find(C=>C.course.id===B);O&&(yield Ro.removeFromCart(O.id)),W(C=>{const X=q({},C);return delete X[B],X}),z({open:!0,message:"تم إزالة الدورة من السلة",severity:"info"})}else yield Ro.addToCart(B),W(M=>ae(q({},M),{[B]:!0})),z({open:!0,message:"تم إضافة الدورة إلى السلة",severity:"success"})}catch(M){console.error("Error toggling cart item:",M),z({open:!0,message:"حدث خطأ أثناء تحديث السلة",severity:"error"})}}),U=B=>{switch(B==null?void 0:B.toLowerCase()){case"beginner":return"مبتدئ";case"intermediate":return"متوسط";case"advanced":return"متقدم";default:return B||"غير محدد"}},A=B=>!B||B.length===0?"غير محدد":B[0].name||"غير محدد",V=B=>!B||B.length===0?null:B[0].profile_pic,Y=B=>{if(!B.category)return null;const F=typeof B.category=="object"?B.category.id:B.category,Q=l.find(M=>M.id===F);return Q?Q.name:null},P=B=>B.image?B.image.startsWith("http")?B.image:`http://127.0.0.1:8000${B.image}`:"https://source.unsplash.com/random/800x450?course,education";return p?s(d,{children:[t(Rn,{}),t(d,{sx:{py:8,px:{xs:2,md:4}},children:t(Qe,{maxWidth:"xl",children:t(se,{container:!0,spacing:4,children:[1,2,3,4].map(B=>t(se,{sx:{width:{xs:"100%",sm:"calc(50% - 32px)",md:"calc(33.333% - 32px)",lg:"calc(25% - 32px)"},flex:{xs:"0 0 100%",sm:"0 0 calc(50% - 32px)",md:"0 0 calc(33.333% - 32px)",lg:"0 0 calc(25% - 32px)"},px:2,mb:4},children:s(Je,{children:[t(dt,{variant:"rectangular",height:160,animation:"wave"}),s(st,{children:[t(dt,{width:"80%",height:24,animation:"wave"}),t(dt,{width:"60%",height:20,animation:"wave",sx:{mt:1}}),s(d,{sx:{display:"flex",mt:2},children:[t(dt,{variant:"circular",width:24,height:24}),t(dt,{width:"40%",height:20,animation:"wave",sx:{mr:1}})]}),t(dt,{width:"100%",height:40,animation:"wave",sx:{mt:2}})]})]})},B))})})}),t(En,{})]}):x?s(d,{children:[t(Rn,{}),s(Qe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[t(Yk,{sx:{fontSize:60,color:"error.main",mb:2}}),t(f,{variant:"h5",color:"error",gutterBottom:!0,children:"حدث خطأ"}),t(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:x}),t(te,{variant:"contained",onClick:()=>window.location.reload(),sx:{mt:2},children:"إعادة المحاولة"})]}),t(En,{})]}):s(d,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",position:"relative"},children:[s(VM,{children:[t(Ds,{}),t(Ds,{style:{width:"200px",height:"200px",bottom:"20%",right:"15%",animationDelay:"5s"}}),t(Ds,{style:{width:"250px",height:"250px",top:"30%",left:"15%",animationDelay:"7s"}})]}),t(Rn,{}),s(UM,{children:[t(Ds,{style:{width:"300px",height:"300px",top:"-100px",right:"-100px",animationDelay:"0s"}}),t(Ds,{style:{width:"200px",height:"200px",bottom:"-50px",right:"20%",animationDelay:"2s",animationDuration:"15s"}}),t(Ds,{style:{width:"400px",height:"400px",bottom:"-200px",left:"-150px",animationDelay:"4s",animationDuration:"20s"}}),t(Qe,{maxWidth:"lg",sx:{position:"relative",zIndex:3},children:t(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:s(d,{sx:{textAlign:"center",py:3,position:"relative","&::before, &::after":{content:'""',position:"absolute",width:"100px",height:"100px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",filter:"blur(40px)",zIndex:-1},"&::before":{top:"20%",left:"10%",animation:`${Lo} 8s ease-in-out infinite`},"&::after":{bottom:"10%",right:"15%",animation:`${Lo} 10s ease-in-out infinite reverse`}},children:[t(f,{variant:"h3",component:"h1",sx:{fontWeight:800,mb:2,color:"#ffffff",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.2rem"},lineHeight:1.2,textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:"اكتشف دوراتنا التعليمية"}),t(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:t(f,{variant:"body1",sx:{maxWidth:"600px",mx:"auto",mb:2,color:"rgba(255,255,255,0.9)",fontSize:{xs:"0.9rem",sm:"1rem"},lineHeight:1.6,fontWeight:300,textShadow:"0 1px 3px rgba(0,0,0,0.2)"},children:"تعلم المهارات الجديدة وتقدم في مسيرتك المهنية مع دوراتنا المتنوعة والمتخصصة"})}),t(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},style:{width:"100%",maxWidth:"700px",margin:"0 auto"},children:t(d,{sx:{position:"relative",maxWidth:"400px",mx:"auto","&::before":{content:'""',position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",background:"linear-gradient(45deg, #0e5181, #1a5f8a, #0a3d62)",borderRadius:"25px",zIndex:-1,opacity:.3,animation:`${Lo} 3s ease-in-out infinite`}},children:t(_e,{fullWidth:!0,variant:"outlined",placeholder:"ابحث عن دورة...",value:y,onChange:B=>v(B.target.value),sx:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"25px",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)","& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none",boxShadow:"0 0 0 2px rgba(229, 151, 139, 0.5)"},paddingRight:"15px"},"& .MuiInputBase-input":{padding:"10px 15px",fontSize:"0.9rem","&::placeholder":{opacity:.7,color:e.palette.text.secondary}}},InputProps:{startAdornment:t(Pr,{position:"start",children:t(Vi,{sx:{color:"#0e5181",ml:1,fontSize:"1.1rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})})}})})})]})})})]}),t(Qe,{maxWidth:"xl",sx:{flex:1,py:6,position:"relative",zIndex:1},children:s(d,{sx:{mb:6},children:[t(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:s(d,{sx:{mb:4},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[s(f,{variant:"h6",component:"h3",fontWeight:600,sx:{display:"flex",alignItems:"center",gap:1},children:[t(xy,{sx:{color:"primary.main"}}),"التصنيفات"]}),(k!=="all"||y||S!=="all")&&t(te,{size:"small",variant:"outlined",color:"primary",onClick:()=>{v(""),E("all"),_("all")},startIcon:t(by,{}),sx:{borderRadius:"20px",textTransform:"none",fontSize:"0.8rem"},children:"مسح الفلاتر"})]}),s(d,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,maxHeight:{xs:"140px",sm:"auto"},overflowY:{xs:"auto",sm:"visible"},pb:{xs:1,sm:0},"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{background:"rgba(0,0,0,0.3)",borderRadius:"3px","&:hover":{background:"rgba(0,0,0,0.5)"}}},children:[t(Qv,{label:"جميع التصنيفات",selected:k==="all",onClick:()=>J("all"),icon:t(xy,{fontSize:"small"}),sx:{backgroundColor:k==="all"?"primary.main":"background.paper",color:k==="all"?"white":"text.primary","&:hover":{backgroundColor:k==="all"?"primary.dark":"primary.light",color:"white"}}}),l.map(B=>(console.log("Rendering category:",B),t(Qv,{label:B.name,selected:k===B.id.toString(),onClick:()=>J(B.id.toString()),sx:{backgroundColor:k===B.id.toString()?"primary.main":"background.paper",color:k===B.id.toString()?"white":"text.primary","&:hover":{backgroundColor:k===B.id.toString()?"primary.dark":"primary.light",color:"white"}}},B.id)))]})]})}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,flexWrap:"wrap",gap:2},children:[s(d,{children:[s(f,{variant:"h4",component:"h2",fontWeight:700,children:[k==="all"?"جميع الدورات":`دورات ${((I=l.find(B=>B.id===parseInt(k)))==null?void 0:I.name)||""}`,y&&`: نتائج البحث عن "${y}"`]}),s(f,{variant:"body2",color:"text.secondary",sx:{mt:.5,display:"flex",alignItems:"center",gap:.5},children:[t("span",{style:{fontWeight:600,color:"primary.main"},children:N.length}),"دورة متاحة من إجمالي ",n.length," دورة",(k!=="all"||y||S!=="all")&&t(Ce,{label:"مفلترة",size:"small",color:"primary",variant:"outlined",sx:{height:"20px",fontSize:"0.7rem",ml:1}})]})]}),s(bn,{value:S,onChange:G,textColor:"primary",indicatorColor:"primary",variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTabs-flexContainer":{gap:1},"& .MuiTab-root":{minHeight:36,padding:"6px 16px",borderRadius:"20px",fontWeight:500,minWidth:"auto","&.Mui-selected":{color:"white",backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"}}}},children:[t(ft,{value:"all",label:"الكل"}),t(ft,{value:"beginner",label:"مبتدئ",icon:t(bt,{fontSize:"small"}),iconPosition:"start"}),t(ft,{value:"intermediate",label:"متوسط",icon:t(ya,{fontSize:"small"}),iconPosition:"start"}),t(ft,{value:"advanced",label:"متقدم",icon:t(Qk,{fontSize:"small"}),iconPosition:"start"})]})]}),N.length>0?t(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:3,width:"100%"},children:N.map((B,F)=>{var Q,M;return t(d,{sx:{width:"100%"},children:t(St.div,{initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,margin:"-100px"},variants:LM,style:{height:"100%"},children:s(BM,{elevation:0,component:Qt,to:`/courses/${B.id}`,style:{textDecoration:"none",color:"inherit"},children:[s(PM,{children:[t("img",{src:P(B),alt:B.title,className:"course-image"}),B.is_featured&&t(Ce,{label:"مميز",color:"primary",size:"small",className:"course-badge",sx:{bgcolor:"primary.main",color:"white",fontWeight:600}}),B.is_certified&&t(Ce,{label:"شهادة",color:"secondary",size:"small",className:"course-badge",sx:{bgcolor:"secondary.main",color:"white",fontWeight:600,top:B.is_featured?50:16}}),s(jM,{className:"cart-button",onClick:O=>H(B.id,O),added:R[B.id],children:[R[B.id]?t(yc,{className:"cart-icon"}):t(Gk,{className:"cart-icon"}),!R[B.id]&&t(NM,{children:"+"})]})]}),s(st,{sx:{display:"flex",flexDirection:"column",flexGrow:1,p:3},children:[s(d,{sx:{mb:1.5},children:[Y(B)&&t(Ce,{label:Y(B),size:"small",sx:{backgroundColor:"rgba(229, 151, 139, 0.1)",color:"primary.main",border:"1px solid rgba(229, 151, 139, 0.3)",fontWeight:500,fontSize:"0.7rem",height:"24px",mb:1,"& .MuiChip-label":{px:1.5},"&:hover":{backgroundColor:"rgba(229, 151, 139, 0.2)",borderColor:"primary.main"}}}),t(Ce,{label:U(B.level),size:"small",color:B.level==="beginner"?"success":B.level==="intermediate"?"warning":"error",sx:{mb:1.5,fontWeight:600,fontSize:"0.7rem"}}),t(qM,{variant:"h6",component:"h3",gutterBottom:!0,children:B.title})]}),s(YM,{children:[t(_t,{src:V(B.instructors),alt:A(B.instructors),sx:{width:32,height:32,ml:1.5}}),s(d,{sx:{flexGrow:1},children:[t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.75rem"},children:"المدرب"}),t(f,{variant:"subtitle2",fontWeight:500,children:A(B.instructors)})]}),t(d,{sx:{textAlign:"left"},children:s(d,{sx:{display:"flex",alignItems:"center",mb:.5},children:[t(si,{color:"warning",fontSize:"small",sx:{ml:.5}}),t(f,{variant:"body2",fontWeight:600,children:((Q=B.average_rating)==null?void 0:Q.toFixed(1))||"0.0"})]})})]}),t(Pt,{sx:{my:2}}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(QM,{children:[s(d,{children:[t(on,{fontSize:"small"}),t(f,{variant:"caption",sx:{mr:.5},children:B.duration||"غير محدد"})]}),s(d,{children:[t(Ui,{fontSize:"small"}),t(f,{variant:"caption",sx:{mr:.5},children:((M=B.total_enrollments)==null?void 0:M.toLocaleString())||0})]})]}),t(d,{sx:{textAlign:"left"},children:B.discount_price?s(Bt,{children:[s(f,{variant:"body2",color:"error",sx:{textDecoration:"line-through",opacity:.7,fontSize:"0.8rem"},children:[B.price," ر.س"]}),s(f,{variant:"h6",color:"primary",sx:{lineHeight:1,mt:-.5},children:[B.discount_price," ر.س"]})]}):t(f,{variant:"h6",color:"primary",children:B.is_free?"مجاني":`${B.price} ر.س`})})]})]})]})})},B.id)})}):t(d,{textAlign:"center",py:8,sx:{bgcolor:"background.paper",borderRadius:2,border:"1px dashed",borderColor:"divider"},children:s(d,{sx:{maxWidth:400,margin:"0 auto"},children:[t(bt,{sx:{fontSize:60,color:"text.secondary",opacity:.5,mb:2}}),t(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"لا توجد دورات متطابقة مع بحثك"}),t(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"لا يمكننا العثور على أي دورات تطابق معايير البحث الخاصة بك. حاول تغيير الفلتر أو مسح عوامل التصفية للعثور على ما تبحث عنه."}),t(te,{variant:"outlined",color:"primary",onClick:()=>{v(""),E("all"),_("all")},startIcon:t(by,{}),sx:{mt:2},children:"مسح كل الفلاتر"})]})})]})}),t(En,{}),t(fn,{open:T.open,autoHideDuration:3e3,onClose:()=>z(ae(q({},T),{open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t(Be,{onClose:()=>z(ae(q({},T),{open:!1})),severity:T.severity,sx:{width:"100%"},children:T.message})})]})},dr={getModules:e=>$(null,null,function*(){return(yield ee.get("/api/content/modules/",{params:{course_id:e,course:e}})).data}),getLessons:(...a)=>$(null,[...a],function*({moduleId:e,courseId:n}={}){return(yield ee.get("/api/content/lessons/",{params:{module:e,course:n}})).data}),getLessonById:e=>$(null,null,function*(){return(yield ee.get(`/api/content/lessons/${e}/`)).data}),createLesson:e=>$(null,null,function*(){var n,a;try{console.log("Creating lesson with payload:",e);const l=yield ee.post("/api/content/lessons/",e);return console.log("Lesson created successfully:",l.data),l.data}catch(l){if(console.error("Error creating lesson:",l),console.error("Error response:",(n=l.response)==null?void 0:n.data),(a=l.response)!=null&&a.data){const u=l.response.data.error||l.response.data.details||l.response.data.message||"حدث خطأ أثناء إنشاء الدرس";throw new Error(u)}throw new Error("حدث خطأ أثناء إنشاء الدرس")}}),updateLesson:(e,n)=>$(null,null,function*(){return(yield ee.patch(`/api/content/lessons/${e}/`,n)).data}),deleteLesson:e=>$(null,null,function*(){return(yield ee.delete(`/api/content/lessons/${e}/`)).data}),getModuleById:e=>$(null,null,function*(){return(yield ee.get(`/api/content/modules/${e}/`)).data}),createModule:_=>$(null,[_],function*({courseId:e,name:n,title:a,description:l,order:u,isActive:p,status:h,durationMinutes:x,videoDurationSeconds:m,pdfFile:y,videoFile:v,note:S}){const k=new FormData;k.append("course",e),(n||a)&&k.append("name",n||a),l!=null&&k.append("description",l),typeof u!="undefined"&&k.append("order",String(u)),typeof p!="undefined"&&k.append("is_active",p?"true":"false"),h&&k.append("status",h);const E=typeof m=="number"?m:typeof x=="number"?Math.round(x*60):0;return E&&k.append("video_duration",String(E)),S&&k.append("note",S),v&&v instanceof File&&k.append("video",v),y&&y instanceof File&&k.append("pdf",y),(yield ee.post("/api/content/modules/",k,{headers:{"Content-Type":"multipart/form-data"}})).data}),updateModule:(_,k)=>$(null,[_,k],function*(e,{name:n,title:a,description:l,order:u,isActive:p,status:h,durationMinutes:x,videoDurationSeconds:m,pdfFile:y,videoFile:v,note:S}){const E=new FormData;(n||a)&&E.append("name",n||a),l!=null&&E.append("description",l),typeof u!="undefined"&&E.append("order",String(u)),typeof p!="undefined"&&E.append("is_active",p?"true":"false"),h&&E.append("status",h);const R=typeof m=="number"?m:typeof x=="number"?Math.round(x*60):void 0;return typeof R!="undefined"&&E.append("video_duration",String(R)),S&&E.append("note",S),v&&v instanceof File&&E.append("video",v),y&&y instanceof File&&E.append("pdf",y),(yield ee.patch(`/api/content/modules/${e}/`,E,{headers:{"Content-Type":"multipart/form-data"}})).data}),getLessonResources:(...a)=>$(null,[...a],function*({lessonId:e,moduleId:n}={}){return(yield ee.get("/api/content/resources/",{params:{lesson:e,module:n}})).data}),createLessonResource:e=>$(null,null,function*(){var n,a;try{console.log("Creating lesson resource with payload:",e);const l=new FormData;Object.entries(e||{}).forEach(([p,h])=>{h!=null&&(console.log(`Adding to FormData: ${p} = ${h}`),l.append(p,h))}),console.log("FormData entries:");for(let[p,h]of l.entries())console.log(`${p}: ${h}`);return(yield ee.post("/api/content/resources/",l,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){if(console.error("Error creating lesson resource:",l),console.error("Error response:",(n=l.response)==null?void 0:n.data),(a=l.response)!=null&&a.data){const u=l.response.data.error||l.response.data.details||l.response.data.message||"حدث خطأ أثناء إنشاء المورد";throw new Error(u)}throw new Error("حدث خطأ أثناء إنشاء المورد")}}),updateLessonResource:(e,n)=>$(null,null,function*(){var a;try{const l=new FormData;return Object.entries(n||{}).forEach(([p,h])=>{h!=null&&l.append(p,h)}),(yield ee.patch(`/api/content/resources/${e}/`,l,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(l){throw console.error("Error updating lesson resource:",l),(a=l.response)!=null&&a.data?new Error(l.response.data.error||l.response.data.details||"حدث خطأ أثناء تحديث المورد"):new Error("حدث خطأ أثناء تحديث المورد")}}),deleteLessonResource:e=>$(null,null,function*(){var n;try{return(yield ee.delete(`/api/content/resources/${e}/`)).data}catch(a){throw console.error("Error deleting lesson resource:",a),(n=a.response)!=null&&n.data?new Error(a.response.data.error||a.response.data.details||"حدث خطأ أثناء حذف المورد"):new Error("حدث خطأ أثناء حذف المورد")}})},Wt="/api/assignments",Kt={getAssignments:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get(`${Wt}/assignments/`,{params:e})).data}),getAssignmentById:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/assignments/${e}/`)).data}),getAssignmentWithQuestions:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/assignments/${e}/questions_with_answers/`)).data}),getAssignmentSubmissions:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/assignments/${e}/submissions/`)).data}),createAssignment:e=>$(null,null,function*(){console.log("createAssignment called with data:",e);const n=new FormData,a=(u,p)=>{p!=null&&p!==""&&n.append(u,p)};a("title",e.title),a("description",e.description),a("course",e.course),a("module",e.module),a("due_date",e.due_date),typeof e.duration!="undefined"&&n.append("duration",String(e.duration)),a("points",e.points),typeof e.max_attempts!="undefined"&&n.append("max_attempts",String(e.max_attempts)),typeof e.allow_late_submissions!="undefined"&&n.append("allow_late_submissions",e.allow_late_submissions?"true":"false"),typeof e.late_submission_penalty!="undefined"&&n.append("late_submission_penalty",String(e.late_submission_penalty)),typeof e.has_questions!="undefined"&&n.append("has_questions",e.has_questions?"true":"false"),typeof e.has_file_upload!="undefined"&&n.append("has_file_upload",e.has_file_upload?"true":"false"),e.assignment_file instanceof File&&n.append("assignment_file",e.assignment_file),typeof e.is_active!="undefined"&&n.append("is_active",e.is_active?"true":"false"),console.log("FormData entries:");for(let[u,p]of n.entries())console.log(`${u}: ${p}`);console.log("Making POST request to:",`${Wt}/assignments/`);const l=yield ee.post(`${Wt}/assignments/`,n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Response received:",l.data),console.log("Response structure:",{hasId:"id"in l.data,idValue:l.data.id,keys:Object.keys(l.data),type:typeof l.data.id}),l.data}),updateAssignment:(e,n)=>$(null,null,function*(){const a=new FormData,l=(p,h)=>{h!=null&&h!==""&&a.append(p,h)};return l("title",n.title),l("description",n.description),l("course",n.course),l("module",n.module),l("due_date",n.due_date),typeof n.duration!="undefined"&&a.append("duration",String(n.duration)),l("points",n.points),typeof n.max_attempts!="undefined"&&a.append("max_attempts",String(n.max_attempts)),typeof n.allow_late_submissions!="undefined"&&a.append("allow_late_submissions",n.allow_late_submissions?"true":"false"),typeof n.late_submission_penalty!="undefined"&&a.append("late_submission_penalty",String(n.late_submission_penalty)),typeof n.has_questions!="undefined"&&a.append("has_questions",n.has_questions?"true":"false"),typeof n.has_file_upload!="undefined"&&a.append("has_file_upload",n.has_file_upload?"true":"false"),n.assignment_file instanceof File&&a.append("assignment_file",n.assignment_file),typeof n.is_active!="undefined"&&a.append("is_active",n.is_active?"true":"false"),(yield ee.patch(`${Wt}/assignments/${e}/`,a,{headers:{"Content-Type":"multipart/form-data"}})).data}),deleteAssignment:e=>$(null,null,function*(){return(yield ee.delete(`${Wt}/assignments/${e}/`)).data}),getAssignmentQuestions:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/questions/`,{params:{assignment:e}})).data}),getAssignmentQuestionsWithAnswers:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/questions/`,{params:{assignment:e}})).data}),createQuestion:e=>$(null,null,function*(){console.log("createQuestion called with payload:",e);const n=new FormData;e.assignment&&n.append("assignment",e.assignment),e.text&&n.append("text",e.text),e.question_type&&n.append("question_type",e.question_type),e.points&&n.append("points",e.points),e.explanation&&n.append("explanation",e.explanation),e.order&&n.append("order",e.order),e.is_required!==void 0&&n.append("is_required",e.is_required),e.file instanceof File&&n.append("image",e.file),console.log("Question FormData entries:");for(let[l,u]of n.entries())console.log(`${l}: ${u}`);console.log("Making POST request to:",`${Wt}/questions/`);const a=yield ee.post(`${Wt}/questions/`,n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Question creation response:",a.data),a.data}),updateQuestion:(e,n)=>$(null,null,function*(){return(yield ee.patch(`${Wt}/questions/${e}/`,n)).data}),deleteQuestion:e=>$(null,null,function*(){return(yield ee.delete(`${Wt}/questions/${e}/`)).data}),getQuestionAnswers:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/answers/`,{params:{question:e}})).data}),createAnswer:e=>$(null,null,function*(){console.log("createAnswer called with payload:",e);const n=new FormData;e.question&&n.append("question",e.question),e.text&&n.append("text",e.text),e.is_correct!==void 0&&n.append("is_correct",e.is_correct),e.explanation&&n.append("explanation",e.explanation),e.order&&n.append("order",e.order),console.log("Answer FormData entries:");for(let[l,u]of n.entries())console.log(`${l}: ${u}`);const a=yield ee.post(`${Wt}/answers/`,n,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Answer creation response:",a.data),a.data}),updateAnswer:(e,n)=>$(null,null,function*(){return(yield ee.patch(`${Wt}/answers/${e}/`,n)).data}),deleteAnswer:e=>$(null,null,function*(){return(yield ee.delete(`${Wt}/answers/${e}/`)).data}),getSubmissions:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get(`${Wt}/submissions/`,{params:e})).data}),getSubmissionById:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/submissions/${e}/`)).data}),createSubmission:e=>$(null,null,function*(){const n=new FormData;e.assignment&&n.append("assignment",e.assignment),e.submission_text&&n.append("submission_text",e.submission_text),e.submitted_file&&n.append("submitted_file",e.submitted_file),e.question_responses&&Array.isArray(e.question_responses)&&(console.log("Question responses before JSON.stringify:",e.question_responses),n.append("question_responses",JSON.stringify(e.question_responses)),e.question_responses.forEach((l,u)=>{l.file_answer&&n.append(`question_responses[${u}][file_answer]`,l.file_answer)})),console.log("FormData contents:");for(let[l,u]of n.entries())console.log(`${l}: ${u}`);return(yield ee.post(`${Wt}/submissions/`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}),gradeSubmission:(e,n)=>$(null,null,function*(){return(yield ee.patch(`${Wt}/submissions/${e}/grade/`,n)).data}),updateSubmission:(e,n)=>$(null,null,function*(){return(yield ee.patch(`${Wt}/submissions/${e}/`,n)).data}),deleteSubmission:e=>$(null,null,function*(){return(yield ee.delete(`${Wt}/submissions/${e}/`)).data}),downloadAssignmentFile:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/assignments/${e}/download/`,{responseType:"blob"})).data}),downloadSubmissionFile:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/submissions/${e}/download/`,{responseType:"blob"})).data}),getAssignmentStats:e=>$(null,null,function*(){return(yield ee.get(`${Wt}/assignments/${e}/statistics/`)).data}),getMySubmissions:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get(`${Wt}/submissions/my/`,{params:e})).data}),getTeacherAssignments:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get(`${Wt}/assignments/teacher/`,{params:e})).data}),getStudentAssignments:(...n)=>$(null,[...n],function*(e={}){return(yield ee.get(`${Wt}/assignments/student/`,{params:e})).data})},_i={getExams:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/assignments/exams/",{params:e})).data}catch(a){throw console.error("Error fetching exams:",a),a}}),getExam:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/exams/${e}/`)).data}catch(n){throw console.error("Error fetching exam:",n),n}}),createExam:e=>$(null,null,function*(){try{return(yield ee.post("/api/assignments/exams/",e)).data}catch(n){throw console.error("Error creating exam:",n),n}}),updateExam:(e,n)=>$(null,null,function*(){try{return(yield ee.patch(`/api/assignments/exams/${e}/`,n)).data}catch(a){throw console.error("Error updating exam:",a),a}}),deleteExam:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/assignments/exams/${e}/`)).data}catch(n){throw console.error("Error deleting exam:",n),n}}),getExamQuestions:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/exams/${e}/questions/`)).data}catch(n){throw console.error("Error fetching exam questions:",n),n}}),addQuestion:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/assignments/exams/${e}/questions/add/`,n)).data}catch(a){throw console.error("Error adding question:",a),a}}),updateQuestion:(e,n)=>$(null,null,function*(){try{return(yield ee.put(`/api/assignments/exam-questions/${e}/`,n)).data}catch(a){throw console.error("Error updating question:",a),a}}),deleteQuestion:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/assignments/exam-questions/${e}/`)).data}catch(n){throw console.error("Error deleting question:",n),n}}),getExamAttempts:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/exams/${e}/attempts/`)).data}catch(n){throw console.error("Error fetching exam attempts:",n),n}}),getExamStatistics:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/exams/${e}/statistics/`)).data}catch(n){throw console.error("Error fetching exam statistics:",n),n}})},Mu={getCourseReviews:(a,...l)=>$(null,[a,...l],function*(e,n={}){try{return(yield ee.get(`/api/reviews/courses/${e}/reviews/`,{params:n})).data}catch(u){throw console.error("Error fetching course reviews:",u),u}}),createReview:(e,n)=>$(null,null,function*(){var a;try{console.log("=== REVIEW SERVICE DEBUG ==="),console.log("Course ID:",e),console.log("Review Data:",n),console.log("API URL:",`/api/reviews/reviews/create/${e}/`),console.log("============================");const l=yield ee.post(`/api/reviews/reviews/create/${e}/`,n,{headers:{"Content-Type":"application/json"}});return console.log("API Response:",l.data),l.data}catch(l){throw console.error("Error creating review:",l),console.error("Error response:",(a=l.response)==null?void 0:a.data),l}}),updateReview:(e,n)=>$(null,null,function*(){try{return(yield ee.put(`/api/reviews/reviews/${e}/`,n)).data}catch(a){throw console.error("Error updating review:",a),a}}),deleteReview:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/reviews/reviews/${e}/`)).data}catch(n){throw console.error("Error deleting review:",n),n}}),getReview:e=>$(null,null,function*(){try{return(yield ee.get(`/api/reviews/reviews/${e}/`)).data}catch(n){throw console.error("Error fetching review:",n),n}}),getCourseRating:e=>$(null,null,function*(){try{return(yield ee.get(`/api/reviews/courses/${e}/rating/`)).data}catch(n){throw console.error("Error fetching course rating:",n),n}}),likeReview:e=>$(null,null,function*(){try{return(yield ee.post(`/api/reviews/reviews/${e}/like/`)).data}catch(n){throw console.error("Error liking review:",n),n}}),reportReview:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/reviews/reviews/${e}/report/`,n)).data}catch(a){throw console.error("Error reporting review:",a),a}}),getUserReviews:e=>$(null,null,function*(){try{return(yield ee.get(`/api/reviews/users/${e}/reviews/`)).data}catch(n){throw console.error("Error fetching user reviews:",n),n}}),getMyReviews:()=>$(null,null,function*(){try{return(yield ee.get("/api/reviews/my-reviews/")).data}catch(e){throw console.error("Error fetching my reviews:",e),e}})};ht`
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
`;ht`
  0% { 
    opacity: 0; 
    transform: translateY(40px) scale(0.98); 
    filter: blur(8px);
  }
  50% {
    filter: blur(4px);
  }
  100% { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
    filter: blur(0);
  }
`;ht`
  0% { 
    transform: scale(1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  50% { 
    transform: scale(1.03);
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  }
  100% { 
    transform: scale(1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
`;ht`
  0% {
    background-position: -300px 0;
    opacity: 0.5;
  }
  50% {
    opacity: 0.8;
  }
  100% {
    background-position: calc(300px + 100%) 0;
    opacity: 0.5;
  }
`;ht`
  0% { 
    transform: translateY(0px) rotate(0deg);
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
  }
  25% {
    transform: translateY(-8px) rotate(0.5deg);
    filter: drop-shadow(0 8px 20px rgba(0,0,0,0.15));
  }
  50% {
    transform: translateY(-12px) rotate(-0.5deg);
    filter: drop-shadow(0 12px 25px rgba(0,0,0,0.2));
  }
  75% {
    transform: translateY(-8px) rotate(0.5deg);
    filter: drop-shadow(0 8px 20px rgba(0,0,0,0.15));
  }
  100% { 
    transform: translateY(0px) rotate(0deg);
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
  }
`;const XM=ht`
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 80% 20%;
  }
  100% {
    background-position: 0% 0%;
  }
`;ht`
  0% { background-position: 0 100%; }
  100% { background-position: 2000px 100%; }
`;const KM=ht`
  0% { opacity: 0.15; }
  50% { opacity: 0.3; }
  100% { opacity: 0.15; }
`,zo={sectionY:5,sectionYMobile:3,gridSpacing:3},Is=oe(d)(({theme:e})=>({display:"inline-flex",alignItems:"center",padding:e.spacing(1,2.25),background:`linear-gradient(145deg, ${he(e.palette.background.paper,.15)}, ${he(e.palette.background.paper,.05)})`,border:`1px solid ${he(e.palette.common.white,.15)}`,borderRadius:999,color:e.palette.primary.contrastText,fontWeight:600,fontSize:"0.95rem",minHeight:40,gap:e.spacing(1.25),boxShadow:`0 6px 16px ${he(e.palette.common.black,.25)}`}));oe(d)(({theme:e})=>({background:`linear-gradient(180deg, ${he(e.palette.background.paper,.15)} 0%, ${he(e.palette.background.paper,.08)} 100%)`,border:`1px solid ${he(e.palette.common.white,.08)}`,borderRadius:e.shape.borderRadius*4,padding:e.spacing(4),boxShadow:`0 20px 50px ${he(e.palette.common.black,.25)}`}));const Wg=oe(d)(({theme:e})=>({background:`linear-gradient(145deg, ${he(e.palette.background.paper,.9)} 0%, ${he(e.palette.background.default,.85)} 100%)`,border:`1px solid ${he(e.palette.divider,.8)}`,borderRadius:e.shape.borderRadius*3,padding:e.spacing(3),marginBottom:e.spacing(4),boxShadow:`0 10px 24px ${he(e.palette.common.black,.15)}`})),ZM=oe(Pt)(({theme:e})=>({borderColor:he(e.palette.primary.main,.15)})),JM=oe(d)(({theme:e})=>({padding:e.spacing(2,0),backgroundColor:"transparent","& a":{textDecoration:"none",color:e.palette.common.white,display:"flex",alignItems:"center",transition:"all 0.3s ease","& svg":{marginLeft:e.spacing(.75)},"&:hover":{color:e.palette.common.white,textDecoration:"underline",transform:"translateX(-2px)"}},"& .MuiBreadcrumbs-separator":{margin:e.spacing(0,.5),color:e.palette.text.secondary}}));oe("div")(({theme:e})=>({padding:e.spacing(3,0),[e.breakpoints.down("sm")]:{padding:e.spacing(2,0)}}));oe(bn)(({theme:e})=>({backgroundColor:e.palette.background.paper,borderBottom:`1px solid ${e.palette.divider}`,"& .MuiTabs-scroller":{overflow:"auto !important","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},"& .MuiTabs-indicator":{height:4},[e.breakpoints.down("sm")]:{"& .MuiTab-root":{minWidth:"auto",padding:e.spacing(1,2),fontSize:"0.8rem"}}}));const e9=oe("div")(({theme:e})=>({padding:e.spacing(zo.sectionY,0,zo.sectionY+2,0),position:"relative",overflow:"hidden",color:e.palette.primary.contrastText,background:`linear-gradient(135deg,
    ${he("#0e5181",.96)},
    ${he("#0e5181",.95)}, 
    ${he("#e5978b",.9)},
    ${he("#0e5181",.95)}, 
    ${he("#0e5181",.96)}
  )`,backgroundSize:"220% 220%",animation:`${XM} 26s ease-in-out infinite alternate`,"&::before":{display:"none"},"&::after":{content:'""',position:"absolute",inset:0,background:`radial-gradient( circle at 20% 80%, ${he("#e5978b",.25)} 0%, transparent 55%),
                 radial-gradient( circle at 85% 20%, ${he("#0e5181",.22)} 0%, transparent 50%)`,animation:`${KM} 8s ease-in-out infinite`,pointerEvents:"none"}}));oe(Qe)(({theme:e})=>({position:"relative",zIndex:1,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",minHeight:400,[e.breakpoints.down("md")]:{minHeight:300,textAlign:"center",alignItems:"center"}}));const t9=oe(d)(({theme:e})=>({position:"relative",zIndex:1,maxWidth:"1200px",margin:"0 auto",transition:"all 0.3s ease-in-out",padding:e.spacing(0,2),[e.breakpoints.down("sm")]:{padding:e.spacing(0,1.5),textAlign:"center","& .MuiBreadcrumbs-root":{justifyContent:"center","& .MuiBreadcrumbs-separator":{margin:e.spacing(0,1)}}}})),r9=oe(f)(({theme:e})=>({fontWeight:800,lineHeight:1.1,marginBottom:e.spacing(3),color:e.palette.common.white,textShadow:"0 2px 6px rgba(0,0,0,0.2)",[e.breakpoints.down("md")]:{fontSize:"2.5rem"},[e.breakpoints.down("sm")]:{fontSize:"2rem"}})),n9=oe(f)(({theme:e})=>({fontSize:"1.25rem",fontWeight:400,marginBottom:e.spacing(3),opacity:.9,maxWidth:"800px"}));oe(d)(({theme:e})=>({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",gap:e.spacing(2),marginBottom:e.spacing(4),"& > *":{display:"flex",alignItems:"center",padding:e.spacing(.75,1.5),background:`linear-gradient(135deg, ${he(e.palette.common.white,.15)} 0%, ${he(e.palette.common.white,.1)} 100%)`,borderRadius:e.shape.borderRadius*3,backdropFilter:"blur(10px)",border:`1px solid ${he(e.palette.common.white,.2)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","& svg":{marginRight:e.spacing(.75),fontSize:"1.2rem",color:"rgba(255, 255, 255, 0.95)"},"&:hover":{background:`linear-gradient(135deg, ${he(e.palette.common.white,.2)} 0%, ${he(e.palette.common.white,.15)} 100%)`,transform:"translateY(-2px)",boxShadow:`0 8px 20px ${he(e.palette.common.black,.2)}`}},[e.breakpoints.down("sm")]:{gap:e.spacing(1.5),flexDirection:"row",justifyContent:"center","& > *":{flex:"0 0 calc(50% - ${theme.spacing(1.5)})",padding:e.spacing(.75,1),fontSize:"0.875rem",justifyContent:"center","& svg":{fontSize:"1rem"}}},[e.breakpoints.down("sm")]:{gap:e.spacing(1.25),"& > *":{padding:e.spacing(.5,1.25),fontSize:"0.875rem"}}}));oe(d)(({theme:e})=>({display:"inline-flex",alignItems:"center",background:`linear-gradient(135deg, ${he(e.palette.common.white,.2)} 0%, ${he(e.palette.common.white,.15)} 100%)`,color:e.palette.common.white,padding:e.spacing(.75,2),borderRadius:e.shape.borderRadius*3,fontWeight:700,transition:"all 0.3s ease-in-out",backdropFilter:"blur(10px)",border:`1px solid ${he(e.palette.common.white,.2)}`,"&:hover":{background:`linear-gradient(135deg, ${he(e.palette.common.white,.25)} 0%, ${he(e.palette.common.white,.2)} 100%)`,transform:"translateY(-2px)",boxShadow:`0 4px 12px ${he(e.palette.common.black,.2)}`},"& .MuiRating-root":{marginRight:e.spacing(.5),color:e.palette.warning.main,"& .MuiRating-iconFilled":{color:e.palette.warning.main},"& .MuiRating-iconHover":{color:e.palette.warning.dark}},[e.breakpoints.down("sm")]:{padding:e.spacing(.5,1.5)}}));oe(Je)(({theme:e})=>({borderRadius:e.shape.borderRadius*4,boxShadow:`0 25px 50px ${he(e.palette.common.black,.15)}`,overflow:"hidden",transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid",borderColor:he(e.palette.primary.main,.1),display:"flex",flexDirection:"column",height:"auto",marginRight:{lg:0},backdropFilter:"blur(20px)",background:`linear-gradient(145deg, 
    ${he(e.palette.background.paper,.9)}, 
    ${he(e.palette.background.paper,.95)})`,"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:`0 30px 60px ${he(e.palette.common.black,.15)}`,borderColor:e.palette.primary.light,"& .course-image":{transform:"scale(1.05)"},"& .course-title":{color:e.palette.primary.main}},"& .MuiCardMedia-root":{transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)"}}));const i9=oe(We)(({theme:e})=>({marginBottom:e.spacing(2.5),borderRadius:e.shape.borderRadius*4,overflow:"hidden",boxShadow:`0 8px 20px ${he(e.palette.common.black,.08)}`,transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid",borderColor:he(e.palette.primary.main,.1),background:`linear-gradient(145deg, 
    ${he(e.palette.background.paper,.95)}, 
    ${he(e.palette.background.paper,.98)})`,"&:hover":{boxShadow:`0 8px 25px ${he(e.palette.common.black,.1)}`,borderColor:e.palette.primary.light,transform:"translateY(-2px)"},"&.Mui-expanded":{margin:e.spacing(2,0),backgroundColor:he(e.palette.primary.main,.02),borderColor:e.palette.primary.light}})),a9=oe(st)(({theme:e})=>({padding:e.spacing(3,4),background:`linear-gradient(135deg, ${he(e.palette.background.paper,.95)} 0%, ${he(e.palette.background.default,.8)} 100%)`,borderBottom:`2px solid ${he(e.palette.primary.main,.1)}`,cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(90deg, transparent, ${he(e.palette.primary.main,.1)}, transparent)`,transition:"left 0.6s ease"},"&:hover":{backgroundColor:he(e.palette.primary.main,.05),transform:"translateY(-2px)",boxShadow:`0 8px 25px ${he(e.palette.primary.main,.15)}`,"&::before":{left:"100%"}},"&.Mui-expanded":{backgroundColor:he(e.palette.primary.main,.08),borderBottomColor:he(e.palette.primary.main,.2),"& .module-title":{color:e.palette.primary.main,fontWeight:600},"& .module-icon":{transform:"rotate(180deg)",color:e.palette.primary.main}}})),o9=oe(zr)(({theme:e,completed:n,preview:a})=>q(q({padding:e.spacing(2.5,4),borderBottom:`1px solid ${he(e.palette.divider,.1)}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",background:n?`linear-gradient(135deg, ${he(e.palette.success.light,.05)} 0%, ${he(e.palette.success.main,.03)} 100%)`:"transparent","&:last-child":{borderBottom:"none"},"&:hover":{backgroundColor:he(e.palette.primary.main,.05),paddingLeft:e.spacing(4),transform:"translateX(-5px)","& .lesson-play-icon":{opacity:1,transform:"translateX(0)"}}},n&&{backgroundColor:he(e.palette.success.main,.1),"& .MuiListItemIcon-root":{color:e.palette.success.main},"&:hover":{backgroundColor:he(e.palette.success.main,.15)}}),a&&{"& .MuiListItemText-primary":{color:e.palette.primary.main,fontWeight:600},"& .preview-badge":{background:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.primary.light} 100%)`,color:e.palette.primary.contrastText,padding:"4px 12px",borderRadius:16,fontSize:"0.75rem",fontWeight:700,marginLeft:8,boxShadow:`0 2px 8px ${he(e.palette.primary.main,.3)}`}}));oe(te)(({theme:e})=>({width:"100%",padding:e.spacing(2.5,4),fontSize:"1.3rem",fontWeight:700,borderRadius:e.shape.borderRadius*4,textTransform:"none",marginBottom:e.spacing(2),position:"relative",overflow:"hidden",transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",background:`linear-gradient(135deg, 
    #0e5181 0%, 
    #0e5181 50%,
    ${he("#0e5181",.9)} 100%)`,boxShadow:`0 12px 30px ${he("#0e5181",.4)},
              0 4px 8px ${he("#0e5181",.2)}`,"&:hover":{transform:"translateY(-3px) scale(1.02)",boxShadow:`0 12px 35px ${he("#0e5181",.4)}`,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)"},"&:active":{transform:"translateY(-1px) scale(0.98)"},[e.breakpoints.down("sm")]:{padding:e.spacing(1.5,2.5),fontSize:"1.1rem"}}));const Du=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",marginBottom:e.spacing(2),padding:e.spacing(1,2),borderRadius:e.shape.borderRadius*2,transition:"all 0.3s ease","&:hover":{backgroundColor:he(e.palette.primary.main,.05),transform:"translateX(-5px)"},"& svg":{marginRight:e.spacing(1.5),color:e.palette.primary.main,fontSize:"1.2rem"}})),da=oe(f)(({theme:e})=>({position:"relative",display:"inline-block",marginBottom:e.spacing(4),fontWeight:700,"&::after":{content:'""',position:"absolute",bottom:-8,left:0,width:"80px",height:"4px",background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:"2px"}}));oe(Je)(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(6,5),textAlign:"center",borderRadius:e.shape.borderRadius*4,boxShadow:`0 15px 35px ${he(e.palette.common.black,.12)},
              0 5px 15px ${he(e.palette.common.black,.05)}`,transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)",background:`linear-gradient(145deg, 
    ${he(e.palette.background.paper,.97)} 0%, 
    ${he(e.palette.background.paper,.99)} 100%)`,backdropFilter:"blur(20px)",border:`1px solid ${he(e.palette.primary.main,.1)}`,"&:hover":{transform:"translateY(-6px)",boxShadow:`0 20px 40px ${he(e.palette.common.black,.15)}`}}));oe(d)(({theme:e})=>({position:"relative",marginTop:e.spacing(-15),zIndex:10,[e.breakpoints.up("lg")]:{position:"sticky",top:e.spacing(4),marginTop:e.spacing(-18)},[e.breakpoints.down("lg")]:{marginTop:e.spacing(4)},"& .MuiCard-root":{backdropFilter:"blur(15px)",background:`linear-gradient(145deg, 
      ${he(e.palette.background.paper,.98)} 0%, 
      ${he(e.palette.background.default,.95)} 50%,
      ${he(e.palette.background.paper,.98)} 100%)`,borderRadius:e.shape.borderRadius*4,boxShadow:`0 20px 40px ${he(e.palette.common.black,.12)},
                0 8px 20px ${he(e.palette.common.black,.08)}`,border:`1px solid ${he(e.palette.primary.main,.12)}`,transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:`0 25px 50px ${he(e.palette.common.black,.15)},
                  0 12px 25px ${he(e.palette.common.black,.1)}`}}}));oe(d)(({theme:e})=>({display:"flex",alignItems:"center",margin:e.spacing(2,0),"& .original-price":{textDecoration:"line-through",color:e.palette.text.secondary,marginRight:e.spacing(1.5),fontSize:"1.1rem"},"& .discount-badge":{background:`linear-gradient(135deg, ${e.palette.error.main} 0%, ${e.palette.error.dark} 100%)`,color:e.palette.error.contrastText,padding:e.spacing(.5,1.5),borderRadius:e.shape.borderRadius*2,fontSize:"0.8rem",fontWeight:700,boxShadow:`0 2px 8px ${he(e.palette.error.main,.3)}`}}));const s9=oe(xe)(({theme:e})=>({position:"fixed",bottom:e.spacing(4),right:e.spacing(4),zIndex:1e3,width:60,height:60,backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,boxShadow:`0 8px 25px ${he(e.palette.primary.main,.3)}`,background:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.primary.dark} 100%)`,backdropFilter:"blur(10px)","&:hover":{backgroundColor:e.palette.primary.dark,transform:"scale(1.1) translateY(-2px)",boxShadow:`0 12px 30px ${he(e.palette.primary.main,.4)}`},"&:active":{transform:"scale(0.95)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",[e.breakpoints.up("lg")]:{display:"none"},[e.breakpoints.down("sm")]:{bottom:e.spacing(3),right:e.spacing(3),width:50,height:50}})),l9=ht`
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
`,yo=oe(d)(({theme:e})=>({display:"inline-block",animation:`${l9} 1.5s ease-in-out infinite`,backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius})),c9=()=>t(d,{sx:{py:4},children:t(Qe,{maxWidth:"lg",children:s(se,{container:!0,spacing:4,children:[s(se,{xs:12,lg:8,children:[t(yo,{variant:"rectangular",width:"100%",height:400,sx:{mb:3,borderRadius:2}}),s(d,{sx:{mb:4},children:[t(yo,{variant:"text",width:"60%",height:40,sx:{mb:2}}),t(yo,{variant:"text",width:"90%",height:24,sx:{mb:1}}),t(yo,{variant:"text",width:"80%",height:24,sx:{mb:3}}),t(yo,{variant:"rectangular",width:120,height:40,sx:{borderRadius:2}})]}),t(bn,{value:0,sx:{mb:3},children:["Overview","Curriculum","Instructor","Reviews","FAQs"].map(e=>t(ft,{label:e,sx:{minWidth:"auto"}},e))}),t(yo,{variant:"rectangular",width:"100%",height:300,sx:{borderRadius:2}})]}),t(se,{xs:12,lg:4,children:t(yo,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}})})]})})}),d9=()=>{var pt,Zt;const{id:e}=er(),n=nt(),a=Vt();Ri(a.breakpoints.down("sm"));const[l,u]=w.useState(null),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState(0),[S,_]=w.useState([]),[k,E]=w.useState(!1),[R,W]=w.useState(!1),[T,z]=w.useState({}),[N,G]=w.useState(!1),[J,H]=w.useState(!1),[U,A]=w.useState(!1),[V,Y]=w.useState(null),[P,I]=w.useState(0),B=w.useRef(null),F=w.useRef(null),[Q,M]=w.useState(!1),[O,C]=w.useState(!1),[X,Z]=w.useState([]),[j,re]=w.useState(0),[de,fe]=w.useState(!1),[ce,ie]=w.useState({rating:5,comment:""}),[ge,Ae]=w.useState(!1);w.useEffect(()=>{const ne=()=>{if(window.scrollY>200?G(!0):G(!1),B.current){const Oe=B.current.getBoundingClientRect();Oe.top<100&&Oe.bottom>window.innerHeight?H(!0):H(!1)}};return window.addEventListener("scroll",ne),()=>window.removeEventListener("scroll",ne)},[]);const tt=ne=>{z($e=>ae(q({},$e),{[ne]:!$e[ne]}))},yt=()=>{F.current&&F.current.scrollIntoView({behavior:"smooth",block:"start"})},wr=()=>A(!0),fr=()=>A(!1),ln=ne=>Y(ne.currentTarget),Le=()=>Y(null),Tt=(ne,$e)=>I($e),or=ne=>ne!=null&&ne.completed?t(xr,{htmlColor:"#0e5181"}):(ne==null?void 0:ne.type)==="video"?t(wy,{htmlColor:"#0e5181"}):(ne==null?void 0:ne.type)==="article"?t(Pw,{htmlColor:"#e5978b"}):(ne==null?void 0:ne.type)==="quiz"?t(nr,{htmlColor:"#0e5181"}):(ne==null?void 0:ne.type)==="assignment"?t(rn,{htmlColor:"#e5978b"}):(ne==null?void 0:ne.type)==="exam"?t(nr,{htmlColor:"#0e5181"}):(ne==null?void 0:ne.type)==="file"?t(Nn,{htmlColor:"#e5978b"}):(ne==null?void 0:ne.type)==="project"?t(Mw,{htmlColor:"#0e5181"}):(ne==null?void 0:ne.type)==="exercise"?t(Ua,{htmlColor:"#e5978b"}):(ne==null?void 0:ne.type)==="case-study"?t(Ww,{htmlColor:"#0e5181"}):ne!=null&&ne.isPreview?t(Ic,{htmlColor:"#0e5181"}):t(Fg,{htmlColor:"#0e5181"}),De=ne=>{const $e={};return Array.isArray(ne)&&ne.forEach(Oe=>{Oe&&Oe.id&&($e[Oe.id]=!1)}),$e};w.useEffect(()=>{e&&$(null,null,function*(){var $e,Oe,je;h(!0),m(null);try{console.log("Fetching course data for ID:",e);const Ze=yield tn.getCourseById(e);console.log("Course data from API:",Ze);let Fe=[];try{const Te=yield tn.getRelatedCourses(e);Fe=Te.results||Te||[],console.log("Related courses data:",Fe)}catch(Te){console.warn("Could not fetch related courses:",Te),Fe=[]}let ke=[],lt=!1;try{console.log("Fetching modules from content API for course:",e);const Te=yield dr.getModules(e);if(console.log("Content API modules response:",Te),Te&&typeof Te=="object"?Array.isArray(Te)?ke=Te:Te.modules&&Array.isArray(Te.modules)?ke=Te.modules:Te.results&&Array.isArray(Te.results)?ke=Te.results:Te.data&&Array.isArray(Te.data)?ke=Te.data:ke=[]:ke=[],console.log("Processed content modules data:",ke),ke.length>0)lt=!0;else try{const Ue=yield tn.getCourseModules(e);console.log("Course API modules response:",Ue),Ue&&typeof Ue=="object"&&(Array.isArray(Ue)?ke=Ue:Ue.modules&&Array.isArray(Ue.modules)?ke=Ue.modules:Ue.results&&Array.isArray(Ue.results)&&(ke=Ue.results)),ke.length>0&&(lt=!0)}catch(Ue){console.warn("Could not fetch course modules from course API:",Ue),Ue.response&&Ue.response.status===403&&(lt=!1)}}catch(Te){console.warn("Could not fetch modules from content API:",Te);try{const Ue=yield tn.getCourseModules(e);console.log("Fallback course API modules response:",Ue),Ue&&typeof Ue=="object"&&(Array.isArray(Ue)?ke=Ue:Ue.modules&&Array.isArray(Ue.modules)?ke=Ue.modules:Ue.results&&Array.isArray(Ue.results)&&(ke=Ue.results)),ke.length>0&&(lt=!0)}catch(Ue){console.warn("Could not fetch course modules from course API:",Ue),Ue.response&&Ue.response.status===403&&(lt=!1),ke=[]}}if(ke.length>0){console.log("Fetching content for modules...");for(let Te=0;Te<ke.length;Te++){const ct=ke[Te].id;try{const Pe=yield dr.getLessons({moduleId:ct,courseId:e});console.log(`Lessons for module ${ct}:`,Pe),Pe&&Array.isArray(Pe)?ke[Te].lessons=Pe:Pe&&Array.isArray(Pe.results)?ke[Te].lessons=Pe.results:Pe&&Array.isArray(Pe.data)&&(ke[Te].lessons=Pe.data)}catch(Pe){console.warn(`Could not fetch lessons for module ${ct}:`,Pe),ke[Te].lessons=[]}try{const Pe=yield Kt.getAssignments({course:e,module:ct});console.log(`Assignments for module ${ct}:`,Pe),Pe&&Array.isArray(Pe)?ke[Te].assignments=Pe:Pe&&Array.isArray(Pe.results)?ke[Te].assignments=Pe.results:Pe&&Array.isArray(Pe.data)&&(ke[Te].assignments=Pe.data)}catch(Pe){console.warn(`Could not fetch assignments for module ${ct}:`,Pe),ke[Te].assignments=[]}try{const Pe=yield ee.get("/assignments/quizzes/",{params:{course:e,module:ct}});console.log(`Quizzes for module ${ct}:`,Pe.data),Pe.data&&Array.isArray(Pe.data)?ke[Te].quizzes=Pe.data:Pe.data&&Array.isArray(Pe.data.results)&&(ke[Te].quizzes=Pe.data.results)}catch(Pe){console.warn(`Could not fetch quizzes for module ${ct}:`,Pe),ke[Te].quizzes=[]}try{const Pe=yield _i.getExams({course:e,module:ct});console.log(`Exams for module ${ct}:`,Pe),Pe&&Array.isArray(Pe)?ke[Te].exams=Pe:Pe&&Array.isArray(Pe.results)?ke[Te].exams=Pe.results:Pe&&Array.isArray(Pe.data)&&(ke[Te].exams=Pe.data)}catch(Pe){console.warn(`Could not fetch exams for module ${ct}:`,Pe),ke[Te].exams=[]}}}let Ye=[],It=null;try{console.log("Fetching reviews from reviews API for course:",e);const Te=yield Mu.getCourseReviews(e);console.log("Reviews API response:",Te),Te&&Te.results?Ye=Te.results:Array.isArray(Te)?Ye=Te:Ye=[],console.log("Processed reviews data:",Ye)}catch(Te){console.warn("Could not fetch reviews from reviews API:",Te);try{const Ue=yield tn.getCourseReviews(e);Ye=Ue.results||Ue||[],console.log("Fallback course reviews data:",Ye)}catch(Ue){console.warn("Could not fetch course reviews from course API:",Ue),Ye=[]}}try{const Te=yield Mu.getCourseRating(e);console.log("Course rating stats:",Te),It=Te}catch(Te){console.warn("Could not fetch course rating stats:",Te),It=null}const tr=Ut(Ze,ke,Ye,lt,It);console.log("Transformed course:",tr),console.log("Transformed course modules:",tr.modules),u(tr),_(Fe),z(De(tr.modules)),h(!1)}catch(Ze){console.error("Error fetching course data:",Ze);let Fe="فشل في تحميل بيانات الدورة";Ze.response?Ze.response.status===404?Fe="الدورة غير موجودة":Ze.response.status===403?Fe="ليس لديك صلاحية لعرض هذه الدورة":Ze.response.status===401?Fe="يرجى تسجيل الدخول لعرض هذه الدورة":($e=Ze.response.data)!=null&&$e.detail?Fe=Ze.response.data.detail:(Oe=Ze.response.data)!=null&&Oe.error?Fe=Ze.response.data.error:(je=Ze.response.data)!=null&&je.message&&(Fe=Ze.response.data.message):Ze.request?Fe="خطأ في الشبكة. يرجى التحقق من اتصال الإنترنت.":Fe=Ze.message||"حدث خطأ غير متوقع",m(Fe),h(!1)}})},[e]);const Ut=(ne,$e=[],Oe=[],je=!1,Ze=null)=>{var Pe,Sr,Mi,va,Gr,sr,Or,qt,Ne,lr,vn,$t,Di,qi,Vn,In,mi,Un,Cr,sl,ll,Ii,Yi,id;console.log("Transforming course data:",ne);const Fe=ot=>ot?typeof ot=="string"?ot.startsWith("http")?ot:`http://127.0.0.1:8000${ot}`:ot.url?ot.url:"https://source.unsplash.com/random/1600x500?programming,react":"https://source.unsplash.com/random/1600x500?programming,react",ke=ot=>ot?typeof ot=="string"?ot.startsWith("http")?ot:`http://127.0.0.1:8000${ot}`:ot.url?ot.url:null:null,lt=parseFloat(ne.price)||0,Ye=parseFloat(ne.discount_price)||0,It=Ye>0?Math.round((lt-Ye)/lt*100):0,tr=Array.isArray($e)?$e.reduce((ot,Wi)=>ot+(Array.isArray(Wi.lessons||Wi.content)?(Wi.lessons||Wi.content).length:0),0):0,Te=Math.round(tr*.5),Ue=Array.isArray(Oe)?Oe.map(ot=>{var Wi,ad,Ja,eo,qn,qo,cl;return q({id:ot.id,user:{name:ot.user_name||((Wi=ot.user)==null?void 0:Wi.username)||((ad=ot.user)==null?void 0:ad.first_name)||((Ja=ot.user)==null?void 0:Ja.name)||"مستخدم",avatar:Fe(ot.user_image||((qn=(eo=ot.user)==null?void 0:eo.profile)==null?void 0:qn.avatar)||((qo=ot.user)==null?void 0:qo.profile_pic)||ot.avatar),id:((cl=ot.user)==null?void 0:cl.id)||null},rating:ot.rating||5,date:ot.created_at?new Date(ot.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}):"مؤخراً",title:ot.title||"تقييم ممتاز",content:ot.review_text||ot.content||ot.comment||ot.text||"",likes:ot.like_count||ot.helpful_count||ot.likes_count||0,isLiked:ot.is_liked_by_user||ot.is_liked||!1,isOwner:ot.is_owner||!1,isApproved:ot.is_approved!==!1},ot)}):[],ct=(Ze==null?void 0:Ze.average_rating)||ne.average_rating||ne.rating||4.8;return Ze!=null&&Ze.review_count||Ze!=null&&Ze.total_reviews||Ue.length,{id:ne.id,title:ne.title||ne.name||"",subtitle:ne.subtitle||ne.short_description||((Pe=ne.description)==null?void 0:Pe.substring(0,100))||"",description:ne.description||"",longDescription:ne.description||ne.long_description||ne.content||"",instructor:((Mi=(Sr=ne.instructors)==null?void 0:Sr[0])==null?void 0:Mi.name)||((va=ne.instructor)==null?void 0:va.name)||((Gr=ne.teacher)==null?void 0:Gr.name)||"مدرس محترف",instructorTitle:((Or=(sr=ne.instructors)==null?void 0:sr[0])==null?void 0:Or.bio)||((qt=ne.instructor)==null?void 0:qt.title)||((Ne=ne.teacher)==null?void 0:Ne.title)||"مدرس محترف",instructorBio:((vn=(lr=ne.instructors)==null?void 0:lr[0])==null?void 0:vn.bio)||(($t=ne.instructor)==null?void 0:$t.bio)||((Di=ne.teacher)==null?void 0:Di.bio)||"",instructorAvatar:Fe(((Vn=(qi=ne.instructors)==null?void 0:qi[0])==null?void 0:Vn.profile_pic)||((In=ne.instructor)==null?void 0:In.profile_pic)||((mi=ne.teacher)==null?void 0:mi.profile_pic)),instructorRating:((Un=ne.instructor)==null?void 0:Un.rating)||((Cr=ne.teacher)==null?void 0:Cr.rating)||4.9,instructorStudents:((sl=ne.instructor)==null?void 0:sl.students_count)||((ll=ne.teacher)==null?void 0:ll.students_count)||ne.total_enrollments||0,instructorCourses:((Ii=ne.instructor)==null?void 0:Ii.courses_count)||((Yi=ne.teacher)==null?void 0:Yi.courses_count)||8,bannerImage:Fe(ne.image||ne.banner_image||ne.cover_image),thumbnail:Fe(ne.image||ne.thumbnail||ne.cover_image),category:((id=ne.category)==null?void 0:id.name)||ne.category||"التدريب الإلكتروني",level:ne.level||"مبتدئ",duration:ne.duration||`${Te} ساعة`,totalHours:Te,lectures:tr,resources:ne.resources_count||ne.materials_count||45,students:ne.total_enrollments||ne.students_count||ne.enrollments_count||0,rating:ct,courseReviews:Ue,price:lt,originalPrice:(Ye>0,lt),discount:It,isBestseller:ne.is_featured||ne.is_bestseller||!1,lastUpdated:ne.updated_at?new Date(ne.updated_at).toLocaleDateString("ar-SA",{year:"numeric",month:"long"}):"مؤخراً",language:ne.language||"العربية",captions:ne.captions||["العربية","English"],features:["وصول مدى الحياة","الوصول عبر الجوال والتلفاز","شهادة إتمام الدورة","ضمان استرداد الأموال خلال 30 يوم","موارد قابلة للتحميل","واجبات واختبارات"],isEnrolled:ne.is_enrolled||!1,planPdfUrl:ke(ne.timeline_pdf||ne.plan_pdf||ne.plan||ne.syllabus_pdf),enrichmentPdfUrl:ke(ne.enrichment_pdf||ne.resources_pdf||ne.materials_pdf),requirements:ne.requirements||ne.prerequisites||[],whoIsThisFor:ne.who_is_this_for||ne.target_audience||ne.audience||[],modules:Mn($e,ne,je),curriculum:[{title:"البداية",duration:"2h 45m",lectures:5,completed:2},{title:"أنماط React المتقدمة",duration:"4h 15m",lectures:6,completed:0},{title:"إدارة الحالة مع Redux",duration:"5h 30m",lectures:6,completed:0},{title:"تحسين الأداء",duration:"3h 45m",lectures:5,completed:0}],faqs:ne.faqs||[{question:"كيف يمكنني الوصول إلى دورتي بعد الشراء؟",answer:'بعد الشراء، يمكنك الوصول إلى دورتك فوراً عن طريق الذهاب إلى "تعلمي" في حسابك. ستكون الدورة متاحة هناك للوصول مدى الحياة.'},{question:"هل تقدمون شهادة إتمام؟",answer:"نعم، ستحصل على شهادة إتمام بمجرد إنهاء جميع محتوى الدورة واجتياز أي تقييمات مطلوبة."},{question:"هل يمكنني تحميل فيديوهات الدورة؟",answer:"لأسباب حقوق النشر والترخيص، لا نسمح بتحميل فيديوهات الدورة. ومع ذلك، يمكنك الوصول إليها في أي وقت من خلال منصتنا مع اتصال بالإنترنت."},{question:"ماذا لو احتجت إلى مساعدة أثناء الدورة؟",answer:"يمكنك طرح الأسئلة في منطقة مناقشة الدورة حيث يمكن للمدرب والطلاب الآخرين المساعدة. للمشكلات التقنية، فريق الدعم لدينا متاح على مدار الساعة طوال أيام الأسبوع."},{question:"هل هناك ضمان استرداد الأموال؟",answer:"نعم، نقدم ضمان استرداد الأموال لمدة 30 يوماً إذا لم تكن راضياً عن الدورة لأي سبب."}]}},Mn=(ne,$e,Oe=!1)=>{console.log("transformModulesData called with:",{modulesData:ne,courseData:$e,isUserEnrolled:Oe}),(!ne||!Array.isArray(ne))&&(console.log("modulesData is not an array, using empty array"),ne=[]);const je=ne.length>0&&ne.some(Fe=>{const ke=Fe.lessons||Fe.content||Fe.lectures||[];return Array.isArray(ke)&&ke.length>0});if(!Oe||!je){console.log("User not enrolled or no valid modules, showing preview modules");const Fe=($e==null?void 0:$e.title)||($e==null?void 0:$e.name)||"الدورة",ke=Fe.toLowerCase().includes("react"),lt=Fe.toLowerCase().includes("web")||Fe.toLowerCase().includes("frontend"),Ye=Fe.toLowerCase().includes("backend")||Fe.toLowerCase().includes("django")||Fe.toLowerCase().includes("python");return[{id:1,title:`مقدمة إلى ${ke?"React":lt?"تطوير الويب":Ye?"تطوير الخلفية":"الدورة"}`,description:"إعداد بيئة التطوير وفهم المفاهيم الأساسية",duration:"2h 45m",lessons:[{id:1,title:`مقدمة إلى ${ke?"React":lt?"تطوير الويب":Ye?"تطوير الخلفية":"الدورة"}`,duration:"15:30",isPreview:!0,completed:!1,type:"video"},{id:2,title:"إعداد بيئة التطوير",duration:"12:45",isPreview:!0,completed:!1,type:"video"},{id:3,title:"المفاهيم الأساسية",duration:"18:20",isPreview:!1,completed:!1,type:"video"},{id:4,title:"إعداد المشروع والتهيئة",duration:"22:10",isPreview:!1,completed:!1,type:"video"},{id:5,title:"موارد الدورة والأدوات",duration:"08:30",isPreview:!0,completed:!1,type:"article"},{id:6,title:"واجب الوحدة الأولى: مشروع تطبيقي",duration:"45:00",isPreview:!1,completed:!1,type:"assignment"},{id:7,title:"كويز المفاهيم الأساسية",duration:"20:00",isPreview:!1,completed:!1,type:"quiz"}]},{id:2,title:"المفاهيم المتقدمة",description:"إتقان المفاهيم المتقدمة وأفضل الممارسات",duration:"4h 15m",lessons:[{id:8,title:"المفاهيم المتقدمة - الجزء الأول",duration:"22:10",isPreview:!0,completed:!1,type:"video"},{id:9,title:"المفاهيم المتقدمة - الجزء الثاني",duration:"18:30",isPreview:!0,completed:!1,type:"video"},{id:10,title:"التطبيق العملي",duration:"20:15",isPreview:!1,completed:!1,type:"video"},{id:11,title:"أفضل الممارسات",duration:"25:40",isPreview:!1,completed:!1,type:"video"},{id:12,title:"التطبيقات العملية",duration:"28:20",isPreview:!1,completed:!1,type:"video"},{id:13,title:"تمرين عملي: تطبيق المفاهيم",duration:"15:00",isPreview:!1,completed:!1,type:"exercise"},{id:14,title:"واجب الوحدة الثانية: مشروع متقدم",duration:"60:00",isPreview:!1,completed:!1,type:"assignment"},{id:15,title:"كويز المفاهيم المتقدمة",duration:"25:00",isPreview:!1,completed:!1,type:"quiz"}]},{id:3,title:"المشاريع العملية",description:"تطبيق المفاهيم في مشاريع حقيقية",duration:"5h 30m",lessons:[{id:16,title:"مقدمة المشاريع العملية",duration:"25:20",isPreview:!0,completed:!1,type:"video"},{id:17,title:"تطوير المشروع الأول",duration:"19:45",isPreview:!1,completed:!1,type:"video"},{id:18,title:"تطوير المشروع الثاني",duration:"21:30",isPreview:!0,completed:!1,type:"video"},{id:19,title:"اختبار وتحسين المشاريع",duration:"28:15",isPreview:!1,completed:!1,type:"video"},{id:20,title:"نشر المشاريع",duration:"17:50",isPreview:!1,completed:!1,type:"video"},{id:21,title:"مشروع نهائي شامل",duration:"45:00",isPreview:!1,completed:!1,type:"project"},{id:22,title:"واجب الوحدة الثالثة: مشروع شامل",duration:"90:00",isPreview:!1,completed:!1,type:"assignment"},{id:23,title:"امتحان منتصف الدورة",duration:"60:00",isPreview:!1,completed:!1,type:"exam"}]},{id:4,title:"التحسين والتطوير",description:"تحسين الأداء والتطوير المستمر",duration:"3h 45m",lessons:[{id:24,title:"تحسين الأداء",duration:"20:10",isPreview:!0,completed:!1,type:"video"},{id:25,title:"أدوات التطوير",duration:"18:30",isPreview:!1,completed:!1,type:"video"},{id:26,title:"اختبار الجودة",duration:"25:45",isPreview:!1,completed:!1,type:"video"},{id:27,title:"أدوات المراقبة",duration:"22:15",isPreview:!1,completed:!1,type:"video"},{id:28,title:"دراسة حالة شاملة",duration:"30:00",isPreview:!1,completed:!1,type:"case-study"},{id:29,title:"واجب الوحدة الرابعة: تحسين شامل",duration:"75:00",isPreview:!1,completed:!1,type:"assignment"},{id:30,title:"كويز التحسين والتطوير",duration:"30:00",isPreview:!1,completed:!1,type:"quiz"}]}]}const Ze=ne.map((Fe,ke)=>{const lt=qt=>Array.isArray(qt)?qt.map((Ne,lr)=>q({id:`assignment_${Ne.id||lr+1}`,title:Ne.title||`واجب ${lr+1}`,duration:"45:00",type:"assignment",isPreview:!1,completed:!1,description:Ne.description||"",dueDate:Ne.due_date,points:Ne.points||100,hasQuestions:Ne.has_questions||!1,hasFileUpload:Ne.has_file_upload||!1,order:Ne.order||lr+1,isActive:Ne.is_active!==!1},Ne)):[],Ye=qt=>Array.isArray(qt)?qt.map((Ne,lr)=>q({id:`quiz_${Ne.id||lr+1}`,title:Ne.title||`كويز ${lr+1}`,duration:Ne.time_limit?`${Ne.time_limit}:00`:"20:00",type:"quiz",isPreview:!1,completed:!1,description:Ne.description||"",passMark:Ne.pass_mark||60,totalQuestions:Ne.get_total_questions?Ne.get_total_questions():0,order:Ne.order||lr+1,isActive:Ne.is_active!==!1},Ne)):[],It=qt=>Array.isArray(qt)?qt.map((Ne,lr)=>q({id:`exam_${Ne.id||lr+1}`,title:Ne.title||`امتحان ${lr+1}`,duration:Ne.time_limit?`${Ne.time_limit}:00`:"60:00",type:"exam",isPreview:!1,completed:!1,description:Ne.description||"",passMark:Ne.pass_mark||60,isFinal:Ne.is_final||!1,order:Ne.order||lr+1,isActive:Ne.is_active!==!1},Ne)):[],tr=qt=>Array.isArray(qt)?qt.map((Ne,lr)=>{var qi,Vn;let vn=Ne.lesson_type||Ne.type||"video";const $t=((qi=Ne.title)==null?void 0:qi.toLowerCase())||((Vn=Ne.name)==null?void 0:Vn.toLowerCase())||"";$t.includes("واجب")||$t.includes("assignment")||$t.includes("homework")?vn="assignment":$t.includes("كويز")||$t.includes("quiz")||$t.includes("test")?vn="quiz":$t.includes("امتحان")||$t.includes("exam")||$t.includes("final")?vn="exam":$t.includes("مقال")||$t.includes("article")||$t.includes("text")?vn="article":$t.includes("ملف")||$t.includes("file")||$t.includes("document")?vn="file":$t.includes("مشروع")||$t.includes("project")?vn="project":$t.includes("تمرين")||$t.includes("exercise")||$t.includes("practice")?vn="exercise":($t.includes("دراسة")||$t.includes("case")||$t.includes("study"))&&(vn="case-study");const Di=In=>{if(!In)return"15:00";const mi=Math.floor(In/60),Un=In%60;return mi>0?`${mi}:${Un.toString().padStart(2,"0")}`:`${Un}:00`};return q({id:Ne.id||lr+1,title:Ne.title||Ne.name||`الدرس ${lr+1}`,duration:Di(Ne.duration_minutes||Ne.duration),type:vn,isPreview:Ne.is_free||Ne.is_preview||Ne.isPreview||!1,completed:Ne.completed||Ne.is_completed||!1,description:Ne.description||"",videoUrl:Ne.video_url||Ne.videoUrl||null,fileUrl:Ne.file_url||Ne.fileUrl||null,content:Ne.content||"",difficulty:Ne.difficulty||"beginner",order:Ne.order||lr+1},Ne)}):[],Te=Fe.lessons||Fe.content||Fe.lectures||[],Ue=Fe.assignments||[],ct=Fe.quizzes||[],Pe=Fe.exams||[];console.log(`Module ${Fe.id||ke+1}:`,{lessons:Te.length,assignments:Ue.length,quizzes:ct.length,exams:Pe.length});const Sr=tr(Te),Mi=lt(Ue),va=Ye(ct),Gr=It(Pe),sr=[...Sr,...Mi,...va,...Gr].sort((qt,Ne)=>(qt.order||0)-(Ne.order||0));sr.length===0&&(console.log(`No content found for module ${Fe.id||ke+1}, adding default content`),sr.push({id:1,title:"مقدمة إلى الوحدة",duration:"15:00",isPreview:!0,completed:!1,type:"video",order:1},{id:2,title:"واجب الوحدة",duration:"45:00",isPreview:!1,completed:!1,type:"assignment",order:2},{id:3,title:"كويز الوحدة",duration:"20:00",isPreview:!1,completed:!1,type:"quiz",order:3}));const Or=qt=>{if(!qt)return"1h 00m";const Ne=Math.floor(qt/3600),lr=Math.floor(qt%3600/60);return Ne>0?`${Ne}h ${lr}m`:`${lr}m`};return{id:Fe.id||ke+1,title:Fe.name||Fe.title||`الوحدة ${ke+1}`,description:Fe.description||"",duration:Or(Fe.video_duration||Fe.duration),lessons:sr,order:Fe.order||ke+1,status:Fe.status||"published",isActive:Fe.is_active!==!1}});return console.log("transformModulesData result:",Ze),Ze},Dn=(ne,$e)=>{v($e)},cn=(ne,$e)=>{ie(Oe=>ae(q({},Oe),{[ne]:$e}))},gi=()=>$(null,null,function*(){var ne,$e;if(!ce.comment.trim()){alert("يرجى كتابة تعليق للتقييم");return}try{Ae(!0);const Oe={rating:ce.rating,review_text:ce.comment};console.log("=== REVIEW SUBMISSION DEBUG ==="),console.log("Original reviewForm:",ce),console.log("Transformed reviewData:",Oe),console.log("Course ID:",e),console.log("================================");const je=yield Mu.createReview(e,Oe);console.log("Review submitted successfully:",je),alert("تم إضافة تقييمك بنجاح!"),ie({rating:5,comment:""}),fe(!1),window.location.reload()}catch(Oe){console.error("Error submitting review:",Oe);let je="فشل في إضافة التقييم";Oe.response&&(Oe.response.status===403?je="يجب أن تكون مسجلاً في الدورة لتتمكن من تقييمها":Oe.response.status===400?je=((ne=Oe.response.data)==null?void 0:ne.error)||"بيانات التقييم غير صحيحة":($e=Oe.response.data)!=null&&$e.error&&(je=Oe.response.data.error)),alert(je)}finally{Ae(!1)}}),pn=ne=>$(null,null,function*(){try{console.log("Liking review:",ne);const $e=yield Mu.likeReview(ne);console.log("Like response:",$e),u(Oe=>ae(q({},Oe),{reviews:Oe.reviews.map(je=>je.id===ne?ae(q({},je),{likes:$e.liked?je.likes+1:je.likes-1,isLiked:$e.liked}):je)}))}catch($e){console.error("Error liking review:",$e),alert("فشل في إعجاب التقييم")}}),Ei=()=>{W(!R),console.log("Wishlist status:",!R)},Ti=()=>$(null,null,function*(){var ne,$e,Oe;try{M(!0);const je=yield Ro.addToCart(l.id);console.log("Added to cart:",je),Z(Ze=>[...Ze,l]),re(Ze=>Ze+l.price),alert("تم إضافة الدورة إلى السلة بنجاح!")}catch(je){console.error("Error adding to cart:",je);let Ze="حدث خطأ أثناء إضافة الدورة إلى السلة";je.response&&((ne=je.response.data)!=null&&ne.detail?Ze=je.response.data.detail:($e=je.response.data)!=null&&$e.error?Ze=je.response.data.error:(Oe=je.response.data)!=null&&Oe.message&&(Ze=je.response.data.message)),alert(Ze)}finally{M(!1)}}),yn=()=>{n(`/payment/${l.id}`)};if(p)return s(d,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[t(Rn,{}),t(c9,{}),t(d,{sx:{mt:"auto"},children:t(En,{})})]});if(x)return s(Qe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[s(Be,{severity:"error",sx:{mb:4},children:[t(f,{variant:"h6",gutterBottom:!0,children:"خطأ في تحميل الدورة"}),t(f,{variant:"body1",children:x})]}),s(d,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[t(te,{variant:"contained",color:"primary",size:"large",onClick:()=>window.location.reload(),startIcon:t(Gt,{}),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem",fontWeight:600},children:"حاول مرة أخرى"}),t(te,{variant:"outlined",color:"primary",size:"large",onClick:()=>n("/courses"),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem",fontWeight:600},children:"تصفح الدورات"})]})]});if(!l)return s(Qe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[s(d,{mb:4,children:[t(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"الدورة غير موجودة"}),t(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:"الدورة التي تبحث عنها غير موجودة أو تم حذفها."})]}),t(te,{variant:"contained",color:"primary",size:"large",onClick:()=>n("/courses"),startIcon:t(Gt,{}),sx:{px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem",fontWeight:600},children:"تصفح جميع الدورات"})]});const Ie=Array.isArray(l.modules)?l.modules.reduce((ne,$e)=>ne+(Array.isArray($e.lessons)?$e.lessons.length:0),0):0,Ve=Array.isArray(l.modules)?l.modules.flatMap(ne=>Array.isArray(ne.lessons)?ne.lessons:[]).filter(ne=>ne.completed).length:0,Se=Math.round(Ve/Ie*100)||0;return s(d,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[t(Rn,{}),t(e9,{children:t(t9,{children:t(Qe,{maxWidth:"lg",sx:{position:"relative",zIndex:1},dir:"rtl",children:t(se,{container:!0,spacing:4,alignItems:"center",children:s(se,{xs:12,lg:9,sx:{mx:"auto"},children:[t(JM,{sx:{display:"flex",justifyContent:"flex-start"},children:s($w,{"aria-label":"breadcrumb",sx:{color:"rgba(255,255,255,0.95)"},children:[s(Qt,{to:"/",style:{display:"flex",alignItems:"center"},children:[t(ch,{sx:{mr:1,fontSize:20}}),"الرئيسية"]}),t(Qt,{to:"/courses",style:{color:"rgba(255,255,255,0.9)"},children:"الدورات"}),t(f,{color:"primary.contrastText",children:l.category})]})}),s(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr auto"},alignItems:"center",gap:2},children:[s(d,{sx:{textAlign:"right"},children:[t(r9,{variant:"h3",component:"h1",sx:{textAlign:"right",mb:1},children:l.title}),t(n9,{variant:"subtitle1",component:"h2",sx:{textAlign:"right",opacity:.85},children:l.subtitle})]}),s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1},children:[t(xe,{onClick:Ei,sx:{bgcolor:"rgba(255,255,255,0.12)",color:R?"#0e5181":"rgba(255,255,255,0.8)","&:hover":{bgcolor:"rgba(255,255,255,0.2)",transform:"scale(1.1)"}},children:R?t(fh,{}):t(Xs,{})}),t(xe,{onClick:ln,sx:{bgcolor:"rgba(255,255,255,0.12)",color:"rgba(255,255,255,0.8)","&:hover":{bgcolor:"rgba(255,255,255,0.2)",transform:"scale(1.1)"}},children:t(ph,{})})]})]}),s(Dc,{anchorEl:V,open:!!V,onClose:Le,children:[s(Me,{onClick:Le,children:[t(Xk,{sx:{mr:1}})," واتساب"]}),s(Me,{onClick:Le,children:[t(dh,{sx:{mr:1}})," فيسبوك"]}),s(Me,{onClick:Le,children:[t(uh,{sx:{mr:1}})," تويتر"]}),s(Me,{onClick:Le,children:[t(Tw,{sx:{mr:1}})," لينكدإن"]})]}),s(d,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:1.25,mt:1.5},children:[s(Is,{children:[t(si,{fontSize:"small",sx:{ml:.5}}),(()=>{const ne=l.rating;return`${typeof ne=="number"?ne.toFixed(1):isNaN(parseFloat(ne))?"0.0":parseFloat(ne).toFixed(1)}`})()," • ",Array.isArray(l.reviews)?l.reviews.length:0," تقييم"]}),s(Is,{children:[t(Po,{fontSize:"small",sx:{ml:.5}}),(()=>{const ne=l.students;if(typeof ne=="number")return ne.toLocaleString();const $e=parseFloat(ne);return isNaN($e)?"0":$e.toLocaleString()})()," مشترك"]}),s(Is,{children:[t(on,{fontSize:"small",sx:{ml:.5}})," ",l.duration]}),s(Is,{children:[t(ya,{fontSize:"small",sx:{ml:.5}})," ",l.level==="Beginner"?"مبتدئ":l.level==="Intermediate"?"متوسط":l.level==="Advanced"?"متقدم":l.level]}),s(Is,{children:[t(yy,{fontSize:"small",sx:{ml:.5}})," ",l.language]}),s(Is,{children:[t(Kk,{fontSize:"small",sx:{ml:.5}})," CC: ",Array.isArray(l.captions)?l.captions.join(", "):"غير متوفر"]})]}),s(d,{sx:{display:"flex",alignItems:"center",mt:3,mb:2,justifyContent:"space-between",gap:2},children:[s(d,{sx:{display:"flex",alignItems:"center"},children:[t(_t,{src:l.instructorAvatar,alt:l.instructor,sx:{width:50,height:50,mr:2.5,border:"2px solid white",boxShadow:2}}),s(d,{sx:{mr:.5},children:[t(f,{variant:"subtitle2",fontWeight:600,children:l.instructor}),t(f,{variant:"body2",color:"rgba(255,255,255,0.8)",fontSize:"0.8rem",children:l.instructorTitle})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(ua,{value:l.rating,precision:.1,readOnly:!0,size:"small",emptyIcon:t(nc,{fontSize:"inherit"}),sx:{ml:3}}),s(f,{variant:"body2",color:"primary.contrastText",children:[(()=>{const ne=l.rating;if(typeof ne=="number")return ne.toFixed(1);if(typeof ne=="string"){const $e=parseFloat(ne);return isNaN($e)?"0.0":$e.toFixed(1)}else return"0.0"})()," (",Array.isArray(l.reviews)?l.reviews.length:0,")"]})]})]}),s(f,{variant:"caption",display:"block",sx:{opacity:.8,mb:2},children:["آخر تحديث ",l.lastUpdated]}),k&&s(d,{sx:{mt:3,maxWidth:"600px"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[s(f,{variant:"body2",fontWeight:500,children:["تقدمك: ",Se,"% مكتمل"]}),s(f,{variant:"body2",color:"text.secondary",children:[Ve," من ",Ie," درس"]})]}),t(hr,{variant:"determinate",value:Se,sx:{height:10,borderRadius:5,backgroundColor:"rgba(255,255,255,0.2)","& .MuiLinearProgress-bar":{borderRadius:5,background:ne=>`linear-gradient(90deg, ${ne.palette.success.main} 0%, ${ne.palette.success.light} 100%)`}}})]}),s(d,{sx:{display:"flex",justifyContent:"flex-end",gap:1.5,mt:2},children:[t(te,{variant:"outlined",sx:{borderRadius:999,px:4,py:1.25,fontWeight:700,borderColor:"rgba(255,255,255,0.8)",color:"common.white",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)","&:hover":{borderColor:"common.white",bgcolor:"rgba(255,255,255,0.2)",transform:"translateY(-2px)"},"& .MuiButton-startIcon":{ml:1,mr:0}},onClick:wr,startIcon:t(Ic,{sx:{color:"common.white"}}),children:"مشاهدة نبذة"}),t(te,{variant:"outlined",disabled:Q,sx:{borderRadius:999,px:4,py:1.25,fontWeight:700,borderColor:"rgba(255,255,255,0.8)",color:"common.white",background:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)","&:hover":{borderColor:"common.white",bgcolor:"rgba(255,255,255,0.2)",transform:"translateY(-2px)"},"& .MuiButton-startIcon":{ml:1,mr:0}},onClick:Ti,startIcon:Q?t(Ke,{size:20,color:"inherit"}):t(Do,{sx:{color:"common.white"}}),children:Q?"جاري الإضافة...":"أضف للسلة"}),t(te,{variant:"contained",disabled:O,sx:{borderRadius:999,px:4,py:1.25,fontWeight:700,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},"& .MuiButton-startIcon":{ml:1,mr:0}},onClick:yn,startIcon:O?t(Ke,{size:20,color:"inherit"}):t(qu,{}),children:O?"جاري التوجيه...":"اشترك الآن"})]})]})})})})}),t(yr,{open:U,onClose:fr,maxWidth:"md",fullWidth:!0,children:t(br,{sx:{p:0},children:t(d,{sx:{position:"relative",paddingTop:"56.25%"},children:t(d,{component:"iframe",src:l.previewUrl||"https://www.youtube.com/embed/dQw4w9WgXcQ",title:"Course Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,sx:{border:0,position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})})}),t(Qe,{maxWidth:"lg",sx:{position:"relative",pt:{xs:zo.sectionYMobile,md:zo.sectionY},pb:{xs:zo.sectionYMobile+2,md:zo.sectionY+2},px:{xs:2,sm:3,md:4},minHeight:"60vh"},children:t(se,{container:!0,spacing:zo.gridSpacing,ref:B,sx:{position:"relative",minHeight:"100%"},children:s(se,{xs:12,lg:12,sx:{order:{xs:1,lg:1},width:"100%"},children:[t(We,{sx:{mb:4,borderRadius:3,overflow:"visible",boxShadow:ne=>`0 4px 20px ${he(ne.palette.common.black,.08)}`},elevation:0,children:s(bn,{value:y,onChange:Dn,variant:"fullWidth",centered:!0,sx:{borderBottom:1,borderColor:"divider","& .MuiTabs-flexContainer":{"& .MuiButtonBase-root":{flex:1,minWidth:"auto",maxWidth:"none",flexBasis:0,width:"auto",justifyContent:"center",textAlign:"center",py:2,px:2,minHeight:56,fontSize:"1rem",textTransform:"none",fontWeight:500,borderRadius:999,mx:.75,border:ne=>`1px solid ${he(ne.palette.primary.main,.15)}`,backgroundColor:"background.paper",transition:"all 0.3s ease",color:"text.secondary","&.Mui-selected":{color:"primary.main",bgcolor:ne=>he(ne.palette.primary.main,.08),fontWeight:600,boxShadow:ne=>`0 6px 16px ${he(ne.palette.primary.main,.18)}`},"&:hover":{bgcolor:ne=>he(ne.palette.primary.main,.06)}}},"& .MuiTabs-indicator":{height:4,borderRadius:2}},children:[t(ft,{label:"نظرة عامة"}),t(ft,{label:"المنهج"}),t(ft,{label:"المدرب والتقييمات"}),t(ft,{label:"الأسئلة الشائعة"})]})}),s(d,{sx:{mb:6},children:[y===0&&s(Wg,{children:[s(bn,{value:P,onChange:Tt,variant:"scrollable",scrollButtons:"auto",sx:{mb:3,"& .MuiTab-root":{minWidth:"auto"}},children:[t(ft,{label:"وصف الدورة"}),t(ft,{label:"الخطة الزمنية"}),t(ft,{label:"المحتوى الإثرائي"})]}),P===0&&s(d,{children:[t(da,{variant:"h5",component:"h2",gutterBottom:!0,children:"وصف الدورة"}),t(f,{variant:"body1",paragraph:!0,dir:"rtl",sx:{lineHeight:1.8,fontSize:"1.1rem"},children:l.longDescription}),s(se,{container:!0,spacing:2,sx:{mt:1},children:[t(se,{xs:6,md:3,children:s(Du,{children:[t(zn,{}),s(f,{variant:"body2",children:["المدة: ",l.duration]})]})}),t(se,{xs:6,md:3,children:s(Du,{children:[t(li,{}),s(f,{variant:"body2",children:["المحاضرات: ",Ie]})]})}),t(se,{xs:6,md:3,children:s(Du,{children:[t(yy,{}),s(f,{variant:"body2",children:["اللغة: ",l.language]})]})}),t(se,{xs:6,md:3,children:s(Du,{children:[t(Zk,{}),t(f,{variant:"body2",children:"شهادة: نعم"})]})})]}),t(ZM,{sx:{my:3}}),s(se,{container:!0,spacing:3,children:[Array.isArray(l.requirements)&&l.requirements.length>0&&t(se,{xs:12,md:6,children:s(d,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(14, 81, 129, 0.02) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.05)"},children:[t(da,{variant:"h6",component:"h3",sx:{mb:2,color:"#0e5181"},children:"📋 المتطلبات الأساسية"}),t(Fr,{disablePadding:!0,children:l.requirements.map((ne,$e)=>s(zr,{disableGutters:!0,sx:{py:.75},children:[t(Rr,{sx:{minWidth:30},children:t(xr,{htmlColor:"#0e5181",fontSize:"small"})}),t(ir,{primary:t(f,{variant:"body2",dir:"rtl",sx:{color:"text.primary"},children:ne})})]},$e))})]})}),Array.isArray(l.whoIsThisFor)&&l.whoIsThisFor.length>0&&t(se,{xs:12,md:6,children:s(d,{sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, rgba(229, 151, 139, 0.05) 0%, rgba(229, 151, 139, 0.02) 100%)",border:"1px solid rgba(229, 151, 139, 0.1)",boxShadow:"0 4px 15px rgba(229, 151, 139, 0.05)"},children:[t(da,{variant:"h6",component:"h3",sx:{mb:2,color:"#e5978b"},children:"🎯 هذه الدورة مناسبة لـ"}),t(Fr,{disablePadding:!0,children:l.whoIsThisFor.map((ne,$e)=>s(zr,{disableGutters:!0,sx:{py:.75},children:[t(Rr,{sx:{minWidth:30},children:t(xr,{htmlColor:"#e5978b",fontSize:"small"})}),t(ir,{primary:t(f,{variant:"body2",dir:"rtl",sx:{color:"text.primary"},children:ne})})]},$e))})]})})]})]}),P===1&&s(d,{children:[t(da,{variant:"h5",component:"h2",gutterBottom:!0,children:"الخطة الزمنية"}),l.planPdfUrl?s(d,{sx:{border:"2px solid",borderColor:"rgba(14, 81, 129, 0.2)",borderRadius:3,overflow:"hidden",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%)"},children:[s(d,{sx:{p:2,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"h6",fontWeight:600,children:"📅 الخطة الزمنية للدورة"}),t(te,{variant:"contained",size:"small",component:Qt,to:l.planPdfUrl,target:"_blank",rel:"noopener",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:"فتح في نافذة جديدة"})]}),t(d,{component:"iframe",src:l.planPdfUrl,title:"الخطة الزمنية",width:"100%",height:"600px",style:{border:0}})]}):t(Be,{severity:"info",sx:{borderRadius:2,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:"لا توجد خطة زمنية متاحة حالياً."})]}),P===2&&s(d,{children:[t(da,{variant:"h5",component:"h2",gutterBottom:!0,children:"المحتوى الإثرائي"}),l.enrichmentPdfUrl?s(d,{sx:{border:"2px solid",borderColor:"rgba(14, 81, 129, 0.2)",borderRadius:3,overflow:"hidden",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%)"},children:[s(d,{sx:{p:2,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"h6",fontWeight:600,children:"📚 المحتوى الإثرائي والموارد"}),t(te,{variant:"contained",size:"small",component:Qt,to:l.enrichmentPdfUrl,target:"_blank",rel:"noopener",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:"فتح في نافذة جديدة"})]}),t(d,{component:"iframe",src:l.enrichmentPdfUrl,title:"المحتوى الإثرائي",width:"100%",height:"600px",style:{border:0}})]}):t(Be,{severity:"info",sx:{borderRadius:2,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:"لا يوجد محتوى إثرائي متاح حالياً."})]})]}),y===1&&s(Wg,{children:[!l.isEnrolled&&s(Be,{severity:"info",sx:{mb:3,borderRadius:2,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)","& .MuiAlert-icon":{color:"#0e5181"}},children:[t(f,{variant:"body1",fontWeight:600,sx:{mb:1},children:"🔒 محتوى الدورة الحقيقي"}),t(f,{variant:"body2",children:"هذا هو المحتوى الحقيقي للدورة من قاعدة البيانات، يتضمن المحاضرات والواجبات والكويزات والامتحانات. سجل في الدورة للوصول إلى جميع المحتويات."})]}),l.isEnrolled&&s(Be,{severity:"success",sx:{mb:3,borderRadius:2,background:"linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(76, 175, 80, 0.02) 100%)",border:"1px solid rgba(76, 175, 80, 0.1)","& .MuiAlert-icon":{color:"#4caf50"}},children:[t(f,{variant:"body1",fontWeight:600,sx:{mb:1},children:"✅ محتوى الدورة الكامل"}),t(f,{variant:"body2",children:"مرحباً بك في الدورة! يمكنك الآن الوصول إلى جميع المحتويات: المحاضرات والواجبات والكويزات والامتحانات."})]}),s(d,{sx:{mb:3,display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",gap:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.2},children:[t(li,{sx:{color:"primary.main"}}),t(da,{variant:"h5",component:"h2",sx:{mb:0},children:"محتوى الدورة"})]}),s(d,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:1},children:[t(Ce,{size:"small",color:"default",variant:"outlined",icon:t(li,{}),label:`${Array.isArray(l.modules)?l.modules.length:0} أقسام`}),t(Ce,{size:"small",color:"default",variant:"outlined",icon:t(Qr,{}),label:`${Ie} محاضرة`}),t(Ce,{size:"small",color:"default",variant:"outlined",icon:t(on,{}),label:`${l.totalHours} ساعة`}),!l.isEnrolled&&t(Ce,{size:"small",color:"warning",variant:"outlined",icon:t(Yu,{}),label:"محتوى حقيقي"}),l.isEnrolled&&t(Ce,{size:"small",color:"success",variant:"outlined",icon:t(xr,{}),label:"محتوى كامل"})]})]}),t(d,{sx:{mb:1},children:Array.isArray(l.modules)?l.modules.map((ne,$e)=>s(i9,{elevation:0,sx:{mb:2.5,borderRadius:3,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.05) 0%, rgba(229, 151, 139, 0.05) 100%)",border:"1px solid rgba(14, 81, 129, 0.1)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 12px 35px rgba(14, 81, 129, 0.15)",borderColor:"rgba(14, 81, 129, 0.2)"}},children:[s(a9,{onClick:()=>tt(ne.id),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:3,bgcolor:"background.paper",cursor:"pointer",borderRadius:3,"&:hover":{bgcolor:"rgba(14, 81, 129, 0.04)"}},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:40,height:40,borderRadius:"50%",bgcolor:"rgba(14, 81, 129, 0.1)",border:"2px solid rgba(14, 81, 129, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,color:"#0e5181",fontSize:"1.1rem"},children:$e+1}),t(f,{variant:"subtitle1",fontWeight:700,dir:"rtl",sx:{color:"#0e5181",fontSize:"1.1rem"},children:ne.title})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(()=>{var Fe,ke,lt;const Oe=((ke=(Fe=ne==null?void 0:ne.lessons)==null?void 0:Fe.filter(Ye=>Ye==null?void 0:Ye.completed))==null?void 0:ke.length)||0,je=((lt=ne==null?void 0:ne.lessons)==null?void 0:lt.length)||0,Ze=je?Math.round(Oe/je*100):0;return t(Ce,{size:"small",variant:"outlined",icon:t(Jk,{}),label:`إنجاز: ${Oe}/${je} (${Ze}%)`,sx:{bgcolor:"rgba(14, 81, 129, 0.08)",borderColor:"#0e5181",color:"#0e5181",fontWeight:600}})})(),t(on,{fontSize:"small",sx:{color:"#e5978b",opacity:.9}}),t(f,{variant:"body2",sx:{color:"#e5978b",opacity:.9,fontWeight:600},children:ne.duration})]}),T[ne.id]?t(vy,{}):t(zw,{})]}),t(d,{sx:{height:0}}),t(D0,{in:T[ne.id],timeout:"auto",unmountOnExit:!0,children:t(Fr,{disablePadding:!0,sx:{px:2,pb:2,bgcolor:"background.paper"},children:Array.isArray(ne.lessons)?ne.lessons.map((Oe,je)=>t(o9,{completed:Oe.completed,preview:Oe.isPreview,sx:{bgcolor:"background.paper",px:0,py:1,transform:"none","&:hover":{transform:"none",backgroundColor:"transparent"}},children:s(d,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row-reverse",border:"1px solid rgba(14, 81, 129, 0.2)",borderRadius:2,px:2.5,py:1.5,bgcolor:"background.paper",transition:"all 0.3s ease",opacity:!l.isEnrolled&&!Oe.isPreview?.6:1,"&:hover":{borderColor:"#0e5181",bgcolor:"rgba(14, 81, 129, 0.02)",transform:l.isEnrolled||Oe.isPreview?"translateX(-5px)":"none"}},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.25},children:[t(d,{sx:{display:"flex",alignItems:"center",color:"text.primary",opacity:.95},children:!l.isEnrolled&&!Oe.isPreview?t(Yu,{sx:{color:"#e5978b",fontSize:"1.2rem"}}):or(Oe)}),s(f,{variant:"body2",dir:"rtl",sx:{color:!l.isEnrolled&&!Oe.isPreview?"text.secondary":"text.primary",fontWeight:500},children:[Oe.title,!l.isEnrolled&&!Oe.isPreview&&t(f,{component:"span",variant:"caption",sx:{color:"#e5978b",ml:1,fontSize:"0.7rem"},children:"(محتوى محمي)"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(f,{variant:"caption",sx:{color:"#e5978b",fontWeight:600},children:Oe.duration}),Oe.isPreview&&t(Ce,{size:"small",label:"عرض مجاني",sx:{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181",fontSize:"0.7rem",height:20}})]})]})},Oe.id)):null})})]},ne.id)):null})]}),y===2&&s(Wg,{children:[s(d,{sx:{mb:3,p:2,display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,border:"1px solid",borderColor:"divider",borderRadius:2,bgcolor:"background.paper"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(_t,{src:l.instructorAvatar,alt:l.instructor,sx:{width:64,height:64,border:"2px solid",borderColor:"primary.main"}}),s(d,{sx:{textAlign:"right"},children:[t(f,{variant:"subtitle1",fontWeight:700,children:l.instructor}),t(f,{variant:"body2",color:"text.secondary",sx:{mt:.25},children:l.instructorTitle})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(ua,{value:l.instructorRating,precision:.1,readOnly:!0,size:"small",emptyIcon:t(nc,{fontSize:"inherit"}),sx:{mr:1}}),s(f,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:[(()=>{const ne=l.instructorRating;if(typeof ne=="number")return ne.toFixed(1);const $e=parseFloat(ne);return isNaN($e)?"0.0":$e.toFixed(1)})()," / 5.0"]})]}),t(Ce,{size:"small",color:"default",variant:"outlined",label:`${((Zt=(pt=l.instructorStudents)==null?void 0:pt.toLocaleString)==null?void 0:Zt.call(pt))||l.instructorStudents||0} طالب`}),t(Ce,{size:"small",color:"default",variant:"outlined",label:`${l.instructorCourses||0} دورة`}),t(te,{variant:"text",size:"small",sx:{textTransform:"none",color:"#0e5181",fontWeight:600,"&:hover":{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181"}},children:"عرض الملف الشخصي"})]})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[s(d,{children:[t(da,{variant:"h5",component:"h2",sx:{mb:.5},children:"تقييمات الطلاب"}),s(d,{sx:{display:"flex",alignItems:"center"},children:[t(f,{variant:"h3",component:"span",sx:{mr:1,fontWeight:700},children:(()=>{const ne=l.rating;if(typeof ne=="number")return ne.toFixed(1);if(typeof ne=="string"){const $e=parseFloat(ne);return isNaN($e)?"0.0":$e.toFixed(1)}else return"0.0"})()}),t(ua,{value:l.rating,precision:.1,readOnly:!0,size:"large",emptyIcon:t(nc,{fontSize:"inherit"}),sx:{mr:1.25}}),s(f,{variant:"body1",color:"text.secondary",sx:{ml:.5},children:["تقييم الدورة • ",l.reviews.length," تقييم"]})]})]}),t(te,{variant:"contained",startIcon:t(Fg,{}),onClick:()=>fe(!0),sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontWeight:600,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.2)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.3)",transform:"translateY(-2px)"}},children:"كتابة تقييم"})]}),s(d,{sx:{mb:4,p:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[t(f,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:"تفصيل التقييمات"}),[5,4,3,2,1].map(ne=>s(d,{sx:{display:"flex",alignItems:"center",mb:1.5},children:[s(d,{sx:{width:80,display:"flex",justifyContent:"space-between",mr:2},children:[s(f,{variant:"body2",fontWeight:500,children:[ne," نجمة"]}),t(d,{sx:{width:8}})]}),t(d,{sx:{flexGrow:1,mx:2},children:t(d,{sx:{width:"100%",height:10,bgcolor:"divider",borderRadius:5,overflow:"hidden"},children:t(d,{sx:{height:"100%",width:`${ne/5*100}%`,background:`linear-gradient(90deg, ${a.palette.warning.main} 0%, ${a.palette.warning.light} 100%)`,borderRadius:5}})})}),s(f,{variant:"body2",color:"text.secondary",sx:{minWidth:40,textAlign:"right"},children:[Math.round(ne/5*l.reviews.length)," تقييم"]})]},ne))]}),s(d,{children:[Array.isArray(l.reviews)?l.reviews.map(ne=>{var $e,Oe,je;return s(d,{sx:{p:3,mb:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center"},children:[t(_t,{src:($e=ne.user)==null?void 0:$e.avatar,alt:(Oe=ne.user)==null?void 0:Oe.name,sx:{width:48,height:48,mr:2}}),s(d,{children:[t(f,{variant:"subtitle1",fontWeight:600,dir:"rtl",children:((je=ne.user)==null?void 0:je.name)||"مستخدم"}),s(d,{sx:{display:"flex",alignItems:"center"},children:[t(ua,{value:ne.rating,precision:.5,readOnly:!0,size:"small",emptyIcon:t(nc,{fontSize:"inherit"}),sx:{mr:1.25,color:"warning.main"}}),t(f,{variant:"body2",color:"text.secondary",sx:{ml:.5},children:ne.date})]})]})]}),s(xe,{size:"small",color:ne.isLiked?"primary":"default",onClick:()=>pn(ne.id),sx:{"&:hover":{transform:"scale(1.1)"},transition:"all 0.2s ease"},children:[ne.isLiked?t(ha,{color:"error"}):t(Qu,{}),t(f,{variant:"body2",sx:{ml:.5},children:ne.likes})]})]}),ne.title&&t(f,{variant:"h6",component:"h3",sx:{mb:1,fontWeight:600},dir:"rtl",children:ne.title}),t(f,{variant:"body1",color:"text.secondary",dir:"rtl",sx:{lineHeight:1.8},children:ne.content})]},ne.id)}):null,t(d,{sx:{display:"flex",justifyContent:"center",mt:4},children:t(te,{variant:"outlined",sx:{borderRadius:3,px:4,py:1.5,textTransform:"none",fontWeight:600,borderColor:"#0e5181",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"white",borderColor:"#0e5181",transform:"translateY(-2px)"}},children:"تحميل المزيد من التقييمات"})})]})]}),y===3&&s(d,{children:[t(da,{variant:"h5",component:"h2",gutterBottom:!0,children:"الأسئلة الشائعة"}),t(d,{sx:{mb:4},children:l.faqs&&l.faqs.length>0?l.faqs.map((ne,$e)=>s(Ow,{elevation:0,sx:{mb:2,border:"1px solid",borderColor:"divider",borderRadius:2,"&:before":{display:"none"},"&.Mui-expanded":{margin:0,"&:not(:last-child)":{borderBottom:0}}},children:[t(Lw,{expandIcon:t(gh,{}),"aria-controls":`faq-panel-${$e}`,id:`faq-header-${$e}`,sx:{minHeight:70,"&.Mui-expanded":{minHeight:70,borderBottom:"1px solid",borderColor:"divider"}},children:t(f,{variant:"subtitle1",fontWeight:600,dir:"rtl",children:ne.question})}),t(Bw,{children:t(f,{variant:"body1",color:"text.secondary",dir:"rtl",sx:{lineHeight:1.8},children:ne.answer})})]},$e)):t(f,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",py:4},children:"لا توجد أسئلة شائعة متاحة في الوقت الحالي."})})]})]})]})})}),t(s9,{color:"primary","aria-label":"enroll",onClick:yt,sx:{display:{xs:"flex",lg:"none"},position:"fixed",bottom:24,right:24,width:60,height:60,borderRadius:"50%",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{transform:"scale(1.1)",boxShadow:"0 12px 35px rgba(14, 81, 129, 0.4)"},transition:"all 0.3s ease"},children:J?t(Do,{}):t(vy,{})}),Array.isArray(S)&&S.length>0&&s(Qe,{maxWidth:"lg",sx:{pt:1,pb:4,px:{xs:2,sm:3,md:4}},children:[s(d,{sx:{mb:4},children:[t(da,{variant:"h4",component:"h2",gutterBottom:!0,children:"الدورات ذات الصلة"}),t(f,{variant:"body1",color:"text.secondary",sx:{fontSize:"1.1rem",lineHeight:1.6},children:"إخترنا لك مجموعة من الدورات التي قد تعجبك"})]}),t(se,{container:!0,spacing:4,children:Array.isArray(S)?S.slice(0,3).map(ne=>{var $e;return t(se,{xs:12,sm:6,md:4,children:s(Je,{sx:{height:"100%",cursor:"pointer",borderRadius:4,boxShadow:"0 8px 25px rgba(14, 81, 129, 0.1)",border:"1px solid",borderColor:"rgba(14, 81, 129, 0.1)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.98) 100%)",backdropFilter:"blur(10px)","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:"0 20px 40px rgba(14, 81, 129, 0.2)",borderColor:"rgba(14, 81, 129, 0.3)"}},onClick:()=>n(`/courses/${ne.id}`),children:[t(d,{sx:{position:"relative",overflow:"hidden"},children:s(d,{sx:{width:"100%",height:200,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[t("img",{src:ne.image||ne.thumbnail||"https://source.unsplash.com/random/400x200?programming",alt:ne.title,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.4s ease"},onMouseEnter:Oe=>Oe.target.style.transform="scale(1.1)",onMouseLeave:Oe=>Oe.target.style.transform="scale(1)"}),t(d,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(14, 81, 129, 0.3) 0%, rgba(229, 151, 139, 0.3) 100%)",opacity:0,transition:"opacity 0.3s ease","&:hover":{opacity:1}}}),t(Ce,{label:ne.category||"التدريب الإلكتروني",size:"small",sx:{position:"absolute",top:16,right:16,bgcolor:"rgba(255,255,255,0.9)",color:"#0e5181",fontWeight:600,fontSize:"0.7rem",backdropFilter:"blur(10px)"}}),t(xe,{size:"small",sx:{position:"absolute",top:16,left:16,bgcolor:"rgba(255,255,255,0.9)",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"white",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:t(Xs,{fontSize:"small"})})]})}),s(st,{sx:{p:3},children:[t(f,{variant:"h6",component:"h3",sx:{fontWeight:700,lineHeight:1.3,mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",fontSize:"1.1rem",color:"#0e5181"},dir:"rtl",children:ne.title}),s(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[t(_t,{src:ne.instructorAvatar||(($e=ne.instructor)==null?void 0:$e.avatar),alt:ne.instructor,sx:{width:32,height:32,mr:1.5,border:"2px solid #e5978b"}}),t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem"},children:ne.instructor||"مدرس محترف"})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:2,gap:2},children:[s(d,{sx:{display:"flex",alignItems:"center"},children:[t(wy,{fontSize:"small",sx:{color:"#0e5181",mr:.5}}),s(f,{variant:"caption",color:"text.secondary",children:[ne.lectures||4," درس"]})]}),s(d,{sx:{display:"flex",alignItems:"center"},children:[t(e6,{fontSize:"small",sx:{color:"#e5978b",mr:.5}}),s(f,{variant:"caption",color:"text.secondary",children:[ne.students||6," طالب"]})]})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[t(ua,{value:(()=>{const Oe=ne.rating;if(typeof Oe=="number")return Oe;if(typeof Oe=="string"){const je=parseFloat(Oe);return isNaN(je)?0:je}else return 0})(),precision:.5,readOnly:!0,size:"small",emptyIcon:t(nc,{fontSize:"inherit"}),sx:{mr:1.25,"& .MuiRating-iconFilled":{color:"#e5978b"}}}),s(f,{variant:"caption",color:"text.secondary",sx:{ml:.5},children:[(()=>{const Oe=ne.rating;if(typeof Oe=="number")return Oe.toFixed(1);if(typeof Oe=="string"){const je=parseFloat(Oe);return isNaN(je)?"0.0":je.toFixed(1)}else return"0.0"})(),"/5.00"]})]}),s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s(f,{variant:"h6",sx:{fontSize:"1.2rem",fontWeight:700,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:[(()=>{const Oe=ne.price;if(typeof Oe=="number")return Oe.toFixed(2);if(typeof Oe=="string"){const je=parseFloat(Oe);return isNaN(je)?"0.00":je.toFixed(2)}else return"0.00"})()," ر.س"]}),t(te,{variant:"outlined",size:"small",sx:{borderColor:"#0e5181",color:"#0e5181","&:hover":{bgcolor:"#0e5181",color:"white",borderColor:"#0e5181"},borderRadius:2,textTransform:"none",fontWeight:600},children:"عرض الدورة"})]})]})]})},ne.id)}):null})]}),t(yr,{open:de,onClose:()=>fe(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(10px)",border:"1px solid rgba(14, 81, 129, 0.1)"}},children:s(br,{sx:{p:4},children:[t(f,{variant:"h5",component:"h2",sx:{mb:3,fontWeight:700,textAlign:"center"},children:"تقييم الدورة"}),s(d,{sx:{mb:3},children:[t(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"تقييمك للدورة"}),t(ua,{value:ce.rating,onChange:(ne,$e)=>{cn("rating",$e)},size:"large",sx:{"& .MuiRating-iconFilled":{color:"#e5978b"},"& .MuiRating-iconHover":{color:"#e5978b"}}})]}),s(d,{sx:{mb:3},children:[t(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"تعليقك (اختياري)"}),t("textarea",{value:ce.comment,onChange:ne=>cn("comment",ne.target.value),placeholder:"اكتب تعليقك عن الدورة...",style:{width:"100%",minHeight:"120px",padding:"12px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",direction:"rtl"}})]}),s(d,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[t(te,{variant:"outlined",onClick:()=>fe(!1),disabled:ge,sx:{borderColor:"#0e5181",color:"#0e5181","&:hover":{borderColor:"#e5978b",color:"#e5978b"},borderRadius:2,textTransform:"none",fontWeight:600},children:"إلغاء"}),t(te,{variant:"contained",onClick:gi,disabled:ge||!ce.comment.trim(),startIcon:ge?t(Ke,{size:20,color:"inherit"}):null,sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #e5978b 0%, #0e5181 100%)"},borderRadius:2,textTransform:"none",fontWeight:600,px:3},children:ge?"جاري الإرسال...":"إرسال التقييم"})]})]})}),t(d,{sx:{mt:"auto"},children:t(En,{})})]})},u9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:e.palette.background.paper,marginTop:e.spacing(3),border:`1px solid ${e.palette.divider}`,[e.breakpoints.up("md")]:{padding:e.spacing(4)}})),vo=oe(_e)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:e.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}})),h9=oe(te)(({theme:e})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}})),f9=oe("div")(({theme:e,isDragActive:n})=>({border:`2px dashed ${n?e.palette.primary.main:e.palette.divider}`,borderRadius:"8px",padding:e.spacing(3),textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:n?"rgba(25, 118, 210, 0.05)":e.palette.background.paper,"&:hover":{borderColor:e.palette.primary.main,backgroundColor:"rgba(25, 118, 210, 0.03)"},[e.breakpoints.down("sm")]:{padding:e.spacing(2)}})),p9=[{value:"beginner",label:"مبتدئ"},{value:"intermediate",label:"متوسط"},{value:"advanced",label:"متقدم"}],g9=[{value:"ar",label:"العربية"},{value:"en",label:"English"},{value:"fr",label:"Français"}],m9=()=>{const e=Vt(),n=nt(),[a,l]=w.useState(0),[u,p]=w.useState(!1),[h,x]=w.useState(!1),[m,y]=w.useState([]),[v,S]=w.useState({open:!1,message:"",severity:"success"}),[_,k]=w.useState({title:"",subtitle:"",description:"",short_description:"",level:"beginner",language:"ar",category:"",tags:[],is_free:!1,price:0,discount_price:null,status:"published",is_featured:!1,is_certified:!1,image:null,promotional_video:"",syllabus_pdf:null,materials_pdf:null}),[E,R]=w.useState("");w.useEffect(()=>{$(null,null,function*(){try{const F=yield xn.getCategories();console.log("Categories API response:",F);const Q=Array.isArray(F)?F:F.results?F.results:F.data?F.data:[];console.log("Processed categories array:",Q),y(Q)}catch(F){console.error("Error fetching categories:",F),S({open:!0,message:"خطأ في تحميل التصنيفات",severity:"error"}),y([])}})},[]);const W=B=>{const{name:F,value:Q,type:M,checked:O}=B.target;k(C=>ae(q({},C),{[F]:M==="checkbox"?O:Q}))},T=(B,F)=>{const Q=B.target.files[0];Q&&k(M=>ae(q({},M),{[F]:Q}))},z=()=>{E.trim()&&!_.tags.includes(E.trim())&&(k(B=>ae(q({},B),{tags:[...B.tags,E.trim()]})),R(""))},N=B=>{k(F=>ae(q({},F),{tags:F.tags.filter(Q=>Q!==B)}))},G=B=>$(null,null,function*(){var F,Q,M,O,C;if(B.preventDefault(),a===V.length-1){x(!0);try{console.log("Submitting course data:",_);const X=yield xn.createCourse(_);console.log("Course created successfully:",X),S({open:!0,message:"تم حفظ الدورة بنجاح! سيتم توجيهك إلى صفحة دوراتك...",severity:"success"}),setTimeout(()=>{n("/teacher/my-courses")},2e3)}catch(X){if(console.error("Error creating course:",X),((F=X.response)==null?void 0:F.status)===500)try{const j=yield xn.getCourses();if((Array.isArray(j)?j:j.results?j.results:j.data?j.data:[]).find(fe=>fe.title===_.title&&fe.subtitle===_.subtitle)){S({open:!0,message:"تم حفظ الدورة بنجاح! سيتم توجيهك إلى صفحة دوراتك...",severity:"success"}),setTimeout(()=>{n("/teacher/my-courses")},2e3);return}}catch(j){console.error("Error fetching courses to verify creation:",j)}const Z=((M=(Q=X.response)==null?void 0:Q.data)==null?void 0:M.message)||((C=(O=X.response)==null?void 0:O.data)==null?void 0:C.detail)||X.message||"خطأ في حفظ الدورة";S({open:!0,message:`${Z} - يمكنك المحاولة مرة أخرى أو الانتقال إلى صفحة دوراتك`,severity:"error"})}finally{x(!1)}}else Y()}),J=B=>{B.preventDefault(),p(!0)},H=()=>{p(!1)},U=(B,F)=>{B.preventDefault(),p(!1);const Q=B.dataTransfer.files[0];Q&&k(M=>ae(q({},M),{[F]:Q}))},A=B=>{switch(B){case 0:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"المعلومات الأساسية"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t(vo,{fullWidth:!0,label:"عنوان الدورة",name:"title",value:_.title,onChange:W,variant:"outlined",required:!0,size:"medium",sx:{mb:2}}),t(vo,{fullWidth:!0,label:"وصف قصير",name:"subtitle",value:_.subtitle,onChange:W,variant:"outlined",multiline:!0,rows:2,sx:{mb:2}}),t(vo,{fullWidth:!0,label:"الوصف الكامل",name:"description",value:_.description,onChange:W,variant:"outlined",multiline:!0,rows:6,sx:{mb:3}}),s(d,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",sm:"row"}},children:[s(At,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t(Rt,{children:"مستوى الصعوبة"}),t(Et,{name:"level",value:_.level,onChange:W,label:"مستوى الصعوبة",sx:{textAlign:"right"},children:p9.map(F=>t(Me,{value:F.value,children:F.label},F.value))})]}),s(At,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t(Rt,{children:"اللغة"}),t(Et,{name:"language",value:_.language,onChange:W,label:"اللغة",sx:{textAlign:"right"},children:g9.map(F=>t(Me,{value:F.value,children:F.label},F.value))})]})]})]})]});case 1:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"الوسائط والمحتوى"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{sx:{mb:2},children:[t(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"صورة الغلاف"}),s(f9,{isDragActive:u,onDragOver:J,onDragLeave:H,onDrop:F=>U(F,"image"),onClick:()=>document.getElementById("image-upload").click(),sx:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:[t("input",{id:"image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:F=>T(F,"image")}),_.image?s(d,{textAlign:"center",width:"100%",children:[t("img",{src:URL.createObjectURL(_.image),alt:"Course preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"}}),t(f,{variant:"body2",color:"textSecondary",children:"انقر لتغيير الصورة أو اسحب صورة جديدة"})]}):s(d,{textAlign:"center",p:3,children:[t(jo,{color:"action",fontSize:"large",sx:{fontSize:48,mb:1}}),t(f,{variant:"body1",sx:{mt:1,mb:1,fontWeight:500},children:"اسحب صورة الدورة هنا أو انقر للاختيار"}),t(f,{variant:"body2",color:"textSecondary",children:"يوصى بصورة بدقة 1280x720 بكسل"})]})]})]}),t(vo,{fullWidth:!0,label:"رابط الفيديو التعريفي (اختياري)",name:"promotional_video",value:_.promotional_video,onChange:W,variant:"outlined",placeholder:"https://www.youtube.com/watch?v=...",InputProps:{startAdornment:t(li,{color:"action",sx:{ml:1}})},sx:{mb:2}}),s(d,{sx:{mb:2},children:[t(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"الملفات المرفقة"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(d,{children:[t("input",{id:"syllabus-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:F=>T(F,"syllabus_pdf")}),t(te,{component:"label",htmlFor:"syllabus-upload",variant:"outlined",startIcon:t(Ks,{}),fullWidth:!0,sx:{py:1.5,borderRadius:"8px",justifyContent:"flex-start",textAlign:"right",textTransform:"none"},children:_.syllabus_pdf?`تم تحميل: ${_.syllabus_pdf.name}`:"رفع منهج الدورة (PDF)"})]}),s(d,{children:[t("input",{id:"materials-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:F=>T(F,"materials_pdf")}),t(te,{component:"label",htmlFor:"materials-upload",variant:"outlined",startIcon:t(Ks,{}),fullWidth:!0,sx:{py:1.5,borderRadius:"8px",justifyContent:"flex-start",textAlign:"right",textTransform:"none"},children:_.materials_pdf?`تم تحميل: ${_.materials_pdf.name}`:"رفع المواد التعليمية (PDF)"})]})]})]})]})]});case 2:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"التصنيفات والوسوم"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(At,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t(Rt,{children:"التصنيف"}),s(Et,{name:"category",value:_.category,onChange:W,label:"التصنيف",sx:{textAlign:"right"},children:[t(Me,{value:"",children:t("em",{children:"اختر تصنيفاً"})}),Array.isArray(m)&&m.map(F=>t(Me,{value:F.id,children:F.name},F.id))]})]}),s(d,{sx:{mb:2},children:[t(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"الوسوم"}),s(d,{sx:{display:"flex",gap:1,mb:2},children:[t(vo,{fullWidth:!0,label:"أضف وسوماً جديدة",value:E,onChange:F=>R(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),z()),variant:"outlined",size:"small",sx:{flex:1}}),t(te,{variant:"contained",onClick:z,startIcon:t(Hr,{}),sx:{minWidth:"100px"},children:"إضافة"})]}),t(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,minHeight:"42px",border:"1px solid #e0e0e0",borderRadius:"4px",p:1},children:_.tags.length>0?_.tags.map((F,Q)=>t(Ce,{label:F,onDelete:()=>N(F),sx:{backgroundColor:e.palette.primary.light,color:e.palette.primary.contrastText,"& .MuiChip-deleteIcon":{color:e.palette.primary.contrastText}}},Q)):t(f,{variant:"body2",color:"textSecondary",sx:{p:1,width:"100%",textAlign:"center"},children:"لا توجد وسوم مضافة بعد"})})]})]})]});case 3:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"التسعير والإعدادات"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t(d,{sx:{mb:2},children:t(kt,{control:t(Ai,{checked:_.is_free,onChange:W,name:"is_free",color:"primary"}),label:s(d,{children:[t(f,{variant:"body1",children:"هذه الدورة مجانية"}),t(f,{variant:"body2",color:"textSecondary",children:"سيتم إخفاء حقول السعر عند تفعيل هذه الخانة"})]}),sx:{m:0}})}),!_.is_free&&s(d,{sx:{display:"flex",flexDirection:"column",gap:2,mb:2,p:2,bgcolor:"#f8f9fa",borderRadius:"8px"},children:[s(d,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[t(vo,{fullWidth:!0,label:"السعر (USD)",name:"price",type:"number",value:_.price,onChange:W,variant:"outlined",size:"medium",InputProps:{startAdornment:t(f,{sx:{ml:1},children:"$"})}}),t(vo,{fullWidth:!0,label:"سعر التخفيض (اختياري)",name:"discount_price",type:"number",value:_.discount_price||"",onChange:W,variant:"outlined",size:"medium",InputProps:{startAdornment:t(f,{sx:{ml:1},children:"$"})}})]}),_.price>0&&_.discount_price>0&&t(d,{sx:{textAlign:"center",mt:1},children:s(f,{variant:"body2",color:"text.secondary",children:["وفر ",Math.round((1-_.discount_price/_.price)*100),"% مع الخصم"]})})]}),t(Pt,{sx:{my:1}}),t(d,{sx:{mb:2},children:t(kt,{control:t(Ai,{checked:_.is_featured,onChange:W,name:"is_featured",color:"primary"}),label:s(d,{children:[t(f,{variant:"body1",children:"وضع مميز"}),t(f,{variant:"body2",color:"textSecondary",children:"سيتم عرض هذه الدورة في الأقسام المميزة في الموقع"})]}),sx:{m:0,alignItems:"flex-start"}})}),t(d,{sx:{mb:2},children:t(kt,{control:t(Ai,{checked:_.is_certified,onChange:W,name:"is_certified",color:"primary"}),label:s(d,{children:[t(f,{variant:"body1",children:"إصدار شهادة إتمام"}),t(f,{variant:"body2",color:"textSecondary",children:"يمكن للمتعلمين الحصول على شهادة إتمام بعد إكمال الدورة بنجاح"})]}),sx:{m:0,alignItems:"flex-start"}})})]})]});default:return"خطأ: خطوة غير معروفة"}},V=["المعلومات الأساسية","الوسائط والمحتوى","التصنيفات والوسوم","التسعير والإعدادات"],Y=()=>{l(B=>B+1)},P=()=>{l(B=>B-1)},I=()=>{S(ae(q({},v),{open:!1})),v.severity==="success"&&n("/teacher/my-courses")};return s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{mb:4,display:"flex",alignItems:"center"},children:[t(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:e.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:e.palette.action.hover}},children:t(Gt,{})}),t(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main},children:"إنشاء دورة جديدة"})]}),s(u9,{elevation:0,children:[s(d,{sx:{width:"100%",mb:4,position:"relative"},children:[t(d,{sx:{position:"absolute",top:20,left:"50px",right:"50px",height:"2px",backgroundColor:e.palette.grey[300],zIndex:0},children:t(d,{sx:{height:"100%",backgroundColor:e.palette.primary.main,width:`${a/(V.length-1)*100}%`,transition:"width 0.3s ease"}})}),t(d,{sx:{display:"flex",justifyContent:"space-between",mb:2,position:"relative",zIndex:1},children:V.map((B,F)=>s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,position:"relative"},children:[t(d,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:a>=F?e.palette.primary.main:e.palette.grey[300],color:a>=F?"#fff":e.palette.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,mb:1,position:"relative",border:`2px solid ${e.palette.background.paper}`,boxSizing:"border-box"},children:F+1}),t(f,{variant:"caption",align:"center",sx:{fontSize:"0.75rem",color:a>=F?e.palette.primary.main:e.palette.text.secondary,fontWeight:a===F?600:"normal",maxWidth:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:B})]},B))})]}),s(d,{component:"form",onSubmit:G,children:[A(a),s(d,{sx:{display:"flex",justifyContent:"space-between",mt:4,pt:3,borderTop:`1px solid ${e.palette.divider}`},children:[t(te,{disabled:a===0,onClick:P,sx:{minWidth:"120px",borderRadius:"12px",textTransform:"none",fontWeight:600},children:"السابق"}),t(h9,{variant:"contained",color:"primary",type:"submit",disabled:h,startIcon:h?t(Ke,{size:20,color:"inherit"}):a===V.length-1?t(Vo,{}):null,sx:{minWidth:a===V.length-1?"200px":"120px",textTransform:"none",fontWeight:600},children:h?"جاري الحفظ...":a===V.length-1?"حفظ الدورة":"التالي"})]})]})]}),t(fn,{open:v.open,autoHideDuration:v.severity==="success"?6e3:4e3,onClose:I,anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:I,severity:v.severity,sx:{width:"100%"},action:t(te,{color:"inherit",size:"small",onClick:()=>n("/teacher/my-courses"),sx:{fontWeight:600},children:v.severity==="success"?"عرض دوراتي":"العودة للدورات"}),children:v.message})})]})},x9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:e.palette.background.paper,marginTop:e.spacing(3),border:`1px solid ${e.palette.divider}`,[e.breakpoints.up("md")]:{padding:e.spacing(4)}})),wo=oe(_e)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:e.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}}));oe(te)(({theme:e})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}}));const b9=oe("div")(({theme:e,isDragActive:n})=>({border:`2px dashed ${n?e.palette.primary.main:e.palette.divider}`,borderRadius:"8px",padding:e.spacing(3),textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:n?"rgba(25, 118, 210, 0.05)":e.palette.background.paper,"&:hover":{borderColor:e.palette.primary.main,backgroundColor:"rgba(25, 118, 210, 0.03)"},[e.breakpoints.down("sm")]:{padding:e.spacing(2)}})),Gv=[{value:"beginner",label:"مبتدئ"},{value:"intermediate",label:"متوسط"},{value:"advanced",label:"متقدم"}],y9=[{value:"ar",label:"العربية"},{value:"en",label:"English"},{value:"fr",label:"Français"}],Iu=["المعلومات الأساسية","الوسائط والمحتوى","الأسعار والخصومات","المراجعة والنشر"],v9=()=>{const e=Vt(),n=nt(),{id:a}=er(),[l,u]=w.useState(0),[p,h]=w.useState(!1),[x,m]=w.useState(!0),[y,v]=w.useState(!1),[S,_]=w.useState(null),[k,E]=w.useState(null),[R,W]=w.useState([]),[T,z]=w.useState({id:a,title:"",subtitle:"",description:"",shortDescription:"",level:"beginner",language:"ar",category:"",tags:[],isFree:!1,price:0,discountPrice:null,status:"draft",isFeatured:!1,isCertified:!1,image:null,promotionalVideo:"",syllabusPdf:null,materialsPdf:null}),[N,G]=w.useState("");w.useEffect(()=>{a?$(null,null,function*(){var C,X,Z,j,re,de,fe;try{m(!0),_(null);const ce=yield xn.getCategories(),ie=Array.isArray(ce)?ce:ce.results?ce.results:ce.data?ce.data:[];if(W(ie),a){const Ae=yield xn.getCourse(a);z({id:Ae.id,title:Ae.title||"",subtitle:Ae.subtitle||"",description:Ae.description||"",shortDescription:Ae.short_description||"",level:Ae.level||"beginner",language:Ae.language||"ar",category:((C=Ae.category)==null?void 0:C.id)||"",tags:((X=Ae.tags)==null?void 0:X.map(tt=>tt.name))||[],isFree:Ae.is_free||!1,price:Ae.price||0,discountPrice:Ae.discount_price||null,status:Ae.status||"draft",isFeatured:Ae.is_featured||!1,isCertified:Ae.is_certified||!1,image:null,promotionalVideo:Ae.promotional_video||"",syllabusPdf:null,materialsPdf:null,imageUrl:Ae.image,syllabusPdfUrl:Ae.syllabus_pdf,materialsPdfUrl:Ae.materials_pdf})}}catch(ce){console.error("Error fetching data:",ce);let ie="حدث خطأ أثناء تحميل بيانات الدورة. يرجى المحاولة مرة أخرى.";((Z=ce.response)==null?void 0:Z.status)===404?ie="الدورة غير موجودة أو تم حذفها.":((j=ce.response)==null?void 0:j.status)===403?ie="ليس لديك صلاحية للوصول إلى هذه الدورة.":((re=ce.response)==null?void 0:re.status)===500?ie="حدث خطأ في الخادم. يرجى المحاولة مرة أخرى لاحقاً.":(fe=(de=ce.response)==null?void 0:de.data)!=null&&fe.detail?ie=ce.response.data.detail:ce.message&&(ie=ce.message),_(ie)}finally{m(!1)}}):(m(!1),_("معرف الدورة غير صحيح"))},[a]);const J=O=>{const{name:C,value:X,type:Z,checked:j}=O.target;z(re=>ae(q({},re),{[C]:Z==="checkbox"?j:X}))},H=(O,C)=>{const X=O.target.files[0];X&&z(Z=>ae(q({},Z),{[C]:X}))},U=()=>{N.trim()&&!T.tags.includes(N.trim())&&(z(O=>ae(q({},O),{tags:[...O.tags,N.trim()]})),G(""))},A=O=>{z(C=>ae(q({},C),{tags:C.tags.filter(X=>X!==O)}))},V=()=>{u(O=>O+1)},Y=()=>{u(O=>O-1)},P=O=>$(null,null,function*(){var C,X,Z,j,re,de,fe;if(O.preventDefault(),l===Iu.length-1)try{if(v(!0),_(null),!T.title.trim()){_("عنوان الدورة مطلوب");return}if(!T.description.trim()){_("وصف الدورة مطلوب");return}if(!T.isFree&&(!T.price||T.price<=0)){_("يجب إدخال سعر صحيح للدورة");return}if(T.discountPrice&&T.discountPrice>=T.price){_("السعر المخفض يجب أن يكون أقل من السعر الأصلي");return}const ce={title:T.title.trim(),subtitle:T.subtitle.trim(),description:T.description.trim(),short_description:T.shortDescription.trim(),level:T.level,language:T.language,category:T.category||null,tags:T.tags,is_free:T.isFree,price:T.isFree?0:T.price,discount_price:T.isFree?null:T.discountPrice,status:T.status,is_featured:T.isFeatured,is_certified:T.isCertified,promotional_video:T.promotionalVideo.trim()};T.image instanceof File&&(ce.image=T.image),T.syllabusPdf instanceof File&&(ce.syllabus_pdf=T.syllabusPdf),T.materialsPdf instanceof File&&(ce.materials_pdf=T.materialsPdf);const ie=yield xn.updateCourse(a,ce);console.log("Course updated successfully:",ie),E("تم تحديث الدورة بنجاح!"),console.log("Success message set"),setTimeout(()=>{console.log("Navigating to /teacher/my-courses"),n("/teacher/my-courses")},2e3)}catch(ce){console.error("Error updating course:",ce);let ie="حدث خطأ أثناء تحديث الدورة. يرجى المحاولة مرة أخرى.";((C=ce.response)==null?void 0:C.status)===404?ie="الدورة غير موجودة أو تم حذفها.":((X=ce.response)==null?void 0:X.status)===403?ie="ليس لديك صلاحية لتعديل هذه الدورة.":((Z=ce.response)==null?void 0:Z.status)===400?ie=((j=ce.response.data)==null?void 0:j.detail)||"بيانات غير صحيحة. يرجى التحقق من المعلومات المدخلة.":((re=ce.response)==null?void 0:re.status)===500?ie="حدث خطأ في الخادم. يرجى المحاولة مرة أخرى لاحقاً.":(fe=(de=ce.response)==null?void 0:de.data)!=null&&fe.detail?ie=ce.response.data.detail:ce.message&&(ie=ce.message),_(ie)}finally{v(!1)}else V()}),I=O=>{O.preventDefault(),h(!0)},B=()=>{h(!1)},F=(O,C)=>{O.preventDefault(),h(!1);const X=O.dataTransfer.files[0];X&&z(Z=>ae(q({},Z),{[C]:X}))},Q=()=>{_(null),E(null)};w.useEffect(()=>{k&&console.log("Success state updated:",k)},[k]);const M=O=>{var C;switch(O){case 0:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"المعلومات الأساسية"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t(wo,{fullWidth:!0,label:"عنوان الدورة",name:"title",value:T.title,onChange:J,variant:"outlined",required:!0,size:"medium",sx:{mb:2}}),t(wo,{fullWidth:!0,label:"وصف قصير",name:"subtitle",value:T.subtitle,onChange:J,variant:"outlined",multiline:!0,rows:2,sx:{mb:2}}),t(wo,{fullWidth:!0,label:"الوصف الكامل",name:"description",value:T.description,onChange:J,variant:"outlined",multiline:!0,rows:6,sx:{mb:3}}),s(d,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",sm:"row"}},children:[s(At,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t(Rt,{children:"مستوى الصعوبة"}),t(Et,{name:"level",value:T.level,onChange:J,label:"مستوى الصعوبة",sx:{textAlign:"right"},children:Gv.map(X=>t(Me,{value:X.value,children:X.label},X.value))})]}),s(At,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t(Rt,{children:"اللغة"}),t(Et,{name:"language",value:T.language,onChange:J,label:"اللغة",sx:{textAlign:"right"},children:y9.map(X=>t(Me,{value:X.value,children:X.label},X.value))})]})]}),s(At,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[t(Rt,{children:"التصنيف"}),s(Et,{name:"category",value:T.category,onChange:J,label:"التصنيف",sx:{textAlign:"right"},children:[t(Me,{value:"",children:t("em",{children:"اختر تصنيف"})}),Array.isArray(R)&&R.map(X=>t(Me,{value:X.id,children:X.name},X.id))]})]}),s(d,{sx:{mb:2},children:[t(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"الكلمات المفتاحية"}),s(d,{sx:{display:"flex",gap:1,mb:1,flexDirection:"row-reverse"},children:[t(wo,{fullWidth:!0,placeholder:"أضف كلمة مفتاحية",value:N,onChange:X=>G(X.target.value),onKeyPress:X=>X.key==="Enter"&&(X.preventDefault(),U()),size:"small",sx:{flexGrow:1}}),t(te,{variant:"contained",color:"primary",onClick:U,startIcon:t(Hr,{}),sx:{minWidth:"120px"},children:"إضافة"})]}),t(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:T.tags.map((X,Z)=>t(Ce,{label:X,onDelete:()=>A(X),sx:{backgroundColor:e.palette.primary.light,color:e.palette.primary.contrastText,"& .MuiChip-deleteIcon":{color:e.palette.primary.contrastText,"&:hover":{color:e.palette.primary.light}}}},Z))})]})]})]});case 1:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"الوسائط والمحتوى"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{sx:{mb:2},children:[t(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"صورة الغلاف"}),s(b9,{isDragActive:p,onDragOver:I,onDragLeave:B,onDrop:X=>F(X,"image"),onClick:()=>document.getElementById("image-upload").click(),sx:{minHeight:"200px",display:"flex",alignItems:"center",justifyContent:"center"},children:[t("input",{id:"image-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:X=>H(X,"image")}),T.image?s(d,{textAlign:"center",width:"100%",children:[t("img",{src:URL.createObjectURL(T.image),alt:"Course preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"}}),t(f,{variant:"body2",color:"textSecondary",children:"انقر لتغيير الصورة أو اسحب صورة جديدة"})]}):T.imageUrl?s(d,{textAlign:"center",width:"100%",children:[t("img",{src:T.imageUrl,alt:"Course preview",style:{maxWidth:"100%",maxHeight:"300px",borderRadius:"8px",marginBottom:"16px",border:"1px solid #e0e0e0"}}),t(f,{variant:"body2",color:"textSecondary",children:"انقر لتغيير الصورة أو اسحب صورة جديدة"})]}):s(d,{textAlign:"center",p:3,children:[t(jo,{color:"action",fontSize:"large",sx:{fontSize:48,mb:1}}),t(f,{variant:"body1",sx:{mt:1,mb:1,fontWeight:500},children:"اسحب صورة الدورة هنا أو انقر للاختيار"}),t(f,{variant:"body2",color:"textSecondary",children:"يوصى بصورة بدقة 1280x720 بكسل"})]})]})]}),t(wo,{fullWidth:!0,label:"رابط الفيديو التعريفي (اختياري)",name:"promotionalVideo",value:T.promotionalVideo,onChange:J,variant:"outlined",placeholder:"https://www.youtube.com/watch?v=...",InputProps:{startAdornment:t(li,{color:"action",sx:{ml:1}})},sx:{mb:2}}),s(d,{sx:{mb:2},children:[t(f,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"الملفات المرفقة"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(d,{children:[t("input",{id:"syllabus-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:X=>H(X,"syllabusPdf")}),t(te,{variant:"outlined",component:"label",startIcon:t(Ks,{}),onClick:()=>document.getElementById("syllabus-upload").click(),sx:{width:"100%",justifyContent:"flex-start"},children:T.syllabusPdf?T.syllabusPdf.name:T.syllabusPdfUrl?"منهج الدورة (تم رفعه مسبقاً)":"رفع منهج الدورة (PDF)"})]}),s(d,{children:[t("input",{id:"materials-upload",type:"file",accept:".pdf",style:{display:"none"},onChange:X=>H(X,"materialsPdf")}),t(te,{variant:"outlined",component:"label",startIcon:t(Ks,{}),onClick:()=>document.getElementById("materials-upload").click(),sx:{width:"100%",justifyContent:"flex-start"},children:T.materialsPdf?T.materialsPdf.name:T.materialsPdfUrl?"المواد التعليمية (تم رفعها مسبقاً)":"رفع المواد التعليمية (PDF)"})]})]})]})]})]});case 2:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"الأسعار والخصومات"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t(kt,{control:t(Ai,{checked:T.isFree,onChange:J,name:"isFree",color:"primary"}),label:"هذه الدورة مجانية",sx:{mb:2}}),!T.isFree&&s(Bt,{children:[t(wo,{fullWidth:!0,label:"سعر الدورة (بالدولار)",name:"price",type:"number",value:T.price,onChange:J,variant:"outlined",required:!0,sx:{mb:2},InputProps:{startAdornment:"$‎"}}),t(wo,{fullWidth:!0,label:"سعر مخفض (اختياري)",name:"discountPrice",type:"number",value:T.discountPrice||"",onChange:J,variant:"outlined",sx:{mb:2},InputProps:{startAdornment:"$‎"},helperText:"سيتم عرض السعر الأصلي مشطوبًا بجانب السعر المخفض"})]}),t(kt,{control:t(Ai,{checked:T.isCertified,onChange:J,name:"isCertified",color:"primary"}),label:"منح شهادة إكمال للدورة",sx:{mb:2}}),t(kt,{control:t(Ai,{checked:T.isFeatured,onChange:J,name:"isFeatured",color:"primary"}),label:"إظهار الدورة في الصفحة الرئيسية",sx:{mb:2}})]})]});case 3:return s(Bt,{children:[t(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,fontWeight:600,color:e.palette.primary.main},children:"مراجعة المعلومات"}),s(d,{sx:{mb:4},children:[t(f,{variant:"subtitle1",sx:{mb:2,fontWeight:600,color:e.palette.text.primary},children:"معلومات الدورة"}),t(d,{sx:{backgroundColor:e.palette.background.paper,p:3,borderRadius:2,mb:3},children:s(d,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",pb:1,borderBottom:`1px solid ${e.palette.divider}`},children:[t(f,{variant:"body2",color:"textSecondary",children:"العنوان:"}),t(f,{variant:"body1",fontWeight:500,children:T.title})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",pb:1,borderBottom:`1px solid ${e.palette.divider}`},children:[t(f,{variant:"body2",color:"textSecondary",children:"الوصف القصير:"}),t(f,{variant:"body1",fontWeight:500,sx:{maxWidth:"60%",textAlign:"left"},children:T.subtitle})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",pb:1,borderBottom:`1px solid ${e.palette.divider}`},children:[t(f,{variant:"body2",color:"textSecondary",children:"المستوى:"}),t(f,{variant:"body1",fontWeight:500,children:(C=Gv.find(X=>X.value===T.level))==null?void 0:C.label})]}),s(d,{sx:{display:"flex",justifyContent:"space-between"},children:[t(f,{variant:"body2",color:"textSecondary",children:"السعر:"}),t(f,{variant:"body1",fontWeight:500,children:T.isFree?"مجاناً":T.discountPrice?`$${T.discountPrice} (بعد الخصم من $${T.price})`:`$${T.price}`})]})]})}),t(d,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:3},children:t(te,{variant:"outlined",color:"primary",onClick:()=>u(0),startIcon:t(vr,{}),children:"تعديل المعلومات"})})]})]});default:return"خطأ في تحميل الخطوة"}};return s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{display:"flex",alignItems:"center",mb:3},children:[t(Xe,{title:"رجوع",children:t(xe,{onClick:()=>n(-1),sx:{ml:2},children:t(Gt,{})})}),t(f,{variant:"h4",component:"h1",sx:{fontWeight:700},children:"تعديل الدورة"})]}),x?t(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:t(Ke,{})}):S?t(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:t(Be,{severity:"error",sx:{maxWidth:600},children:S})}):t("form",{onSubmit:P,children:s(x9,{children:[s(d,{sx:{width:"100%",mb:4,position:"relative"},children:[t(d,{sx:{position:"absolute",top:"40px",left:"20px",right:"20px",height:"2px",backgroundColor:e.palette.grey[300],zIndex:0},children:t(d,{sx:{height:"100%",width:`${l/(Iu.length-1)*100}%`,backgroundColor:e.palette.primary.main,transition:"width 0.3s ease"}})}),t(d,{sx:{display:"flex",justifyContent:"space-between",position:"relative"},children:Iu.map((O,C)=>s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,position:"relative",zIndex:1,cursor:"pointer"},onClick:()=>u(C),children:[t(d,{sx:{width:40,height:40,borderRadius:"50%",backgroundColor:l>=C?e.palette.primary.main:e.palette.grey[300],color:l>=C?"#fff":e.palette.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",mb:1,fontWeight:600,transition:"all 0.3s ease",border:`2px solid ${l>=C?e.palette.primary.main:e.palette.grey[300]}`},children:C+1}),t(f,{variant:"caption",align:"center",sx:{fontSize:"0.75rem",fontWeight:l>=C?600:400,color:l>=C?e.palette.primary.main:e.palette.text.secondary,mt:.5,textAlign:"center",px:1},children:O})]},O))})]}),t(d,{sx:{mb:4},children:M(l)}),s(d,{sx:{display:"flex",justifyContent:"space-between",pt:2},children:[t(te,{disabled:l===0,onClick:Y,sx:{mr:1},startIcon:t(Gt,{}),children:"السابق"}),t(d,{sx:{flex:"1 1 auto"}}),t(te,{variant:"contained",color:"primary",type:"submit",endIcon:y?t(Ke,{size:20}):t(Vo,{}),disabled:y,sx:{minWidth:"150px"},children:l===Iu.length-1?y?"جاري الحفظ...":"حفظ التغييرات":"التالي"})]})]})}),t(fn,{open:!!S,autoHideDuration:6e3,onClose:Q,anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:Q,severity:"error",sx:{width:"100%"},children:S})}),t(fn,{open:!!k,autoHideDuration:6e3,onClose:Q,anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:Q,severity:"success",sx:{width:"100%"},children:k})})]})},w9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:e.palette.background.paper,marginTop:e.spacing(3),border:`1px solid ${e.palette.divider}`,[e.breakpoints.up("md")]:{padding:e.spacing(4)}})),$g=oe(_e)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:e.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}})),S9=oe(te)(({theme:e})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}}));oe("div")(({theme:e,isDragActive:n})=>({border:`2px dashed ${n?e.palette.primary.main:e.palette.divider}`,borderRadius:"8px",padding:e.spacing(3),textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",backgroundColor:n?"rgba(25, 118, 210, 0.05)":e.palette.background.paper,"&:hover":{borderColor:e.palette.primary.main,backgroundColor:"rgba(25, 118, 210, 0.03)"},[e.breakpoints.down("sm")]:{padding:e.spacing(2)}}));const C9=()=>{const e=Vt(),n=nt(),{courseId:a}=er(),[l,u]=w.useState(!1),[p,h]=w.useState(!1),[x,m]=w.useState(null),[y,v]=w.useState(null),[S,_]=w.useState({title:"",description:"",duration:"",isPreview:!1,videoFile:null,pdfFile:null,order:1,lessons:[{id:Date.now(),title:"",type:"video",duration:"",content:"",isPreview:!1,resources:[]}]}),k=W=>{const{name:T,value:z,type:N,checked:G}=W.target;_(J=>ae(q({},J),{[T]:N==="checkbox"?G:z}))},E=(W,T)=>{_(z=>ae(q({},z),{[`${W}File`]:T||null}))};w.useEffect(()=>{a&&$(null,null,function*(){try{const T=yield dr.getModules(a),N=(Array.isArray(T==null?void 0:T.results)?T.results:Array.isArray(T)?T:(T==null?void 0:T.modules)||[]).reduce((G,J)=>typeof J.order=="number"&&J.order>G?J.order:G,0);_(G=>ae(q({},G),{order:N+1}))}catch(T){m("تعذر تحميل ترتيب الوحدة التالي")}})},[a]);const R=W=>$(null,null,function*(){var T,z,N,G,J;W.preventDefault();try{h(!0),v(null);const H={courseId:a,title:S.title,name:S.title,description:S.description,durationMinutes:S.duration?Number(S.duration):0,isActive:!0,status:"published",order:S.order};S.videoFile&&(H.videoFile=S.videoFile),S.pdfFile&&(H.pdfFile=S.pdfFile);const U=yield dr.createModule(H);console.log("Module created:",U),alert("تم حفظ الوحدة بنجاح!"),n(`/teacher/courses/${a}/units`)}catch(H){console.error("Error creating module:",H);let U="تعذر حفظ الوحدة. برجاء التحقق من الحقول.";try{typeof((T=H==null?void 0:H.response)==null?void 0:T.data)=="string"?U=H.response.data:(N=(z=H==null?void 0:H.response)==null?void 0:z.data)!=null&&N.detail?U=H.response.data.detail:(J=(G=H==null?void 0:H.response)==null?void 0:G.data)!=null&&J.error&&(U=H.response.data.error)}catch(A){}v(U)}finally{h(!1)}});return s(Qe,{maxWidth:"lg",sx:{py:4},children:[y&&t(Be,{severity:"error",sx:{mb:2},children:y}),s(d,{sx:{mb:4,display:"flex",alignItems:"center"},children:[t(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:e.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:e.palette.action.hover}},children:t(Gt,{})}),t(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main},children:"إضافة وحدة جديدة"})]}),t(w9,{elevation:0,children:s(d,{component:"form",onSubmit:R,sx:{display:"flex",flexDirection:"column",gap:3},children:[t(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:e.palette.primary.main},children:"معلومات الوحدة الأساسية"}),t($g,{fullWidth:!0,label:"عنوان الوحدة",name:"title",value:S.title,onChange:k,variant:"outlined",required:!0,size:"medium"}),t($g,{fullWidth:!0,label:"وصف الوحدة",name:"description",value:S.description,onChange:k,variant:"outlined",multiline:!0,rows:4}),t($g,{fullWidth:!0,label:"مدة الوحدة (بالدقائق)",name:"duration",type:"number",value:S.duration,onChange:k,variant:"outlined",size:"medium",InputProps:{endAdornment:t(Pr,{position:"end",children:"دقيقة"})}}),s(d,{children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"الفيديو"}),S.videoFile?s(d,{children:[t("video",{src:URL.createObjectURL(S.videoFile),controls:!0,style:{width:"100%",maxHeight:360,borderRadius:8,border:`1px solid ${e.palette.divider}`}}),s(d,{sx:{mt:1,display:"flex",gap:1},children:[t(Ce,{label:S.videoFile.name,size:"small"}),t(te,{color:"error",onClick:()=>E("video",null),children:"مسح الفيديو"})]})]}):s(te,{component:"label",variant:"outlined",startIcon:t(Bs,{}),disabled:p,children:["رفع فيديو (MP4)",t("input",{hidden:!0,type:"file",accept:"video/*",onChange:W=>E("video",W.target.files&&W.target.files.length?W.target.files[0]:null)})]})]}),s(d,{children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"ملف PDF"}),S.pdfFile?s(d,{children:[t(d,{sx:{position:"relative",border:`1px solid ${e.palette.divider}`,borderRadius:1,overflow:"hidden"},children:t("iframe",{title:"pdf-preview",src:URL.createObjectURL(S.pdfFile),style:{width:"100%",height:480,border:0}})}),s(d,{sx:{mt:1,display:"flex",gap:1,alignItems:"center"},children:[t(Ce,{label:S.pdfFile.name,size:"small"}),t(te,{component:"a",href:URL.createObjectURL(S.pdfFile),target:"_blank",rel:"noopener noreferrer",children:"فتح في تبويب"}),t(te,{color:"error",onClick:()=>E("pdf",null),children:"مسح الملف"})]})]}):s(te,{component:"label",variant:"outlined",startIcon:t(Bs,{}),children:["رفع ملف PDF",t("input",{hidden:!0,type:"file",accept:"application/pdf",onChange:W=>E("pdf",W.target.files&&W.target.files.length?W.target.files[0]:null)})]})]}),t(kt,{control:t(Ai,{checked:S.isPreview,onChange:k,name:"isPreview",color:"primary"}),label:"متاحة كمعاينة"}),t(d,{sx:{display:"flex",justifyContent:"flex-end",pt:1},children:t(S9,{variant:"contained",color:"primary",type:"submit",disabled:p,children:"حفظ الوحدة"})})]})})]})},k9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:e.palette.background.paper,marginTop:e.spacing(3),border:`1px solid ${e.palette.divider}`,[e.breakpoints.up("md")]:{padding:e.spacing(4)}}));oe(Je)(({theme:e})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease",border:`1px solid ${e.palette.divider}`,maxWidth:320,marginInline:"auto","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",borderColor:e.palette.primary.main}}));oe(te)(({theme:e})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}));const _9=()=>{const e=Vt(),n=nt(),{courseId:a}=er(),[l,u]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(""),[y,v]=w.useState("all"),[S,_]=w.useState("order"),[k,E]=w.useState(null),[R,W]=w.useState(!1),[T,z]=w.useState(!1),[N,G]=w.useState(null),[J,H]=w.useState({open:!1,message:"",severity:"success"}),[U,A]=w.useState(0),[V,Y]=w.useState(10);w.useEffect(()=>{$(null,null,function*(){h(!0);try{const ge=yield dr.getModules(a),tt=(Array.isArray(ge==null?void 0:ge.results)?ge.results:Array.isArray(ge)?ge:(ge==null?void 0:ge.modules)||[]).map(yt=>({id:yt.id,title:yt.name||"",description:yt.description||"",duration:typeof yt.video_duration=="number"?Math.round(yt.video_duration/60):0,order:yt.order,status:yt.status||(yt.is_active?"published":"draft"),isPreview:yt.is_active===!1,lessonsCount:Array.isArray(yt.lessons)?yt.lessons.length:yt.lessons_count||0,completedLessons:0,createdAt:yt.created_at,updatedAt:yt.updated_at}));u(tt)}catch(ge){console.error("Error fetching units:",ge),H({open:!0,message:"حدث خطأ في تحميل الوحدات",severity:"error"})}finally{h(!1)}})},[a]);const P=(ie,ge)=>{G(ie.currentTarget),E(ge)},I=()=>{G(null),E(null)},B=ie=>{I(),ie&&n(`/teacher/courses/${a}/units/${ie.id}/edit`)},F=ie=>{I(),ie&&n(`/teacher/courses/${a}/units/${ie.id}`)},Q=ie=>{I(),ie&&n(`/teacher/courses/${a}/units/${ie.id}/lessons`)},M=()=>{I(),W(!0)},O=()=>{k&&(u(ie=>ie.filter(ge=>ge.id!==k.id)),H({open:!0,message:"تم حذف الوحدة بنجاح",severity:"success"})),W(!1),E(null)},C=()=>{n(`/teacher/courses/${a}/units/new`)},X=ie=>{switch(ie){case"published":return"success";case"draft":return"warning";case"archived":return"default";default:return"default"}},Z=ie=>{switch(ie){case"published":return"منشور";case"draft":return"مسودة";case"archived":return"مؤرشف";default:return"غير معروف"}},re=[...l.filter(ie=>{const ge=ie.title.toLowerCase().includes(x.toLowerCase())||ie.description.toLowerCase().includes(x.toLowerCase()),Ae=y==="all"||ie.status===y;return ge&&Ae})].sort((ie,ge)=>{switch(S){case"order":return ie.order-ge.order;case"title":return ie.title.localeCompare(ge.title);case"duration":return ge.duration-ie.duration;case"created":return new Date(ge.createdAt)-new Date(ie.createdAt);default:return ie.order-ge.order}}),de=ie=>t(Qr,{}),fe=(ie,ge)=>{A(ge)},ce=ie=>{Y(parseInt(ie.target.value,10)),A(0)};return s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),t(d,{sx:{position:"relative",zIndex:2},children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(xe,{onClick:()=>n("/teacher/my-courses"),sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"}},children:t(Gt,{})}),s(d,{children:[t(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"white"},children:"وحدات الدورة"}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إدارة وحدات الدورة التدريبية"})]})]}),s(d,{sx:{display:"flex",gap:2},children:[t(te,{variant:"contained",startIcon:t(jw,{}),onClick:C,sx:{background:"linear-gradient(45deg, #0e5181 30%, #e5978b 90%)",color:"white",borderRadius:"25px",px:3,py:1.5,fontWeight:600,textTransform:"none",fontSize:"0.95rem",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.3)",border:"none","&:hover":{background:"linear-gradient(45deg, #0a3f66 30%, #d88a7e 90%)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"إضافة وحدة جديدة"}),k&&t(te,{variant:"outlined",startIcon:t(Lu,{}),onClick:()=>Q(k),sx:{borderColor:"rgba(255,255,255,0.4)",color:"white",borderRadius:"25px",px:3,py:1.5,fontWeight:600,textTransform:"none",fontSize:"0.95rem",backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)","&:hover":{borderColor:"white",backgroundColor:"rgba(255,255,255,0.2)",transform:"translateY(-2px)",boxShadow:"0 4px 15px rgba(255,255,255,0.2)"},transition:"all 0.3s ease"},children:"الدروس"})]})]})})]}),s(k9,{elevation:0,children:[s(d,{sx:{display:"flex",gap:2,mb:3,flexDirection:{xs:"column",md:"row"}},children:[t(_e,{fullWidth:!0,placeholder:"البحث في الوحدات...",value:x,onChange:ie=>m(ie.target.value),InputProps:{startAdornment:t(Vi,{sx:{color:"text.secondary",mr:1}})},sx:{minWidth:300}}),s(At,{sx:{minWidth:150},children:[t(Rt,{children:"الحالة"}),s(Et,{value:y,onChange:ie=>v(ie.target.value),label:"الحالة",children:[t(Me,{value:"all",children:"الكل"}),t(Me,{value:"published",children:"منشور"}),t(Me,{value:"draft",children:"مسودة"}),t(Me,{value:"archived",children:"مؤرشف"})]})]}),s(At,{sx:{minWidth:150},children:[t(Rt,{children:"ترتيب حسب"}),s(Et,{value:S,onChange:ie=>_(ie.target.value),label:"ترتيب حسب",children:[t(Me,{value:"order",children:"الترتيب"}),t(Me,{value:"title",children:"العنوان"}),t(Me,{value:"duration",children:"المدة"}),t(Me,{value:"created",children:"تاريخ الإنشاء"})]})]})]}),p?t(d,{sx:{display:"flex",justifyContent:"center",py:4},children:t(hr,{sx:{width:"100%"}})}):re.length===0?s(d,{sx:{textAlign:"center",py:4},children:[t(f,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"لا توجد وحدات"}),t(f,{variant:"body2",color:"textSecondary",children:x||y!=="all"?"جرب تغيير معايير البحث":"ابدأ بإضافة وحدة جديدة للدورة"})]}):s(Bt,{children:[t(pi,{component:We,sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:s(ui,{children:[t(hi,{children:s(Jt,{sx:{backgroundColor:e.palette.primary.main},children:[t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"الوحدة"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"الوصف"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"المدة"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"عدد الدروس"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"الحالة"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"التقدم"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:re.slice(U*V,U*V+V).map(ie=>s(Jt,{hover:!0,sx:{"&:hover":{backgroundColor:"action.hover"}},children:[t(ye,{sx:{py:2,px:3},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(_t,{sx:{bgcolor:e.palette.primary.main,width:48,height:48,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:de()}),s(d,{sx:{minWidth:0,flex:1},children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,lineHeight:1.2},children:ie.title}),s(f,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem"},children:["الترتيب: ",ie.order]})]})]})}),t(ye,{sx:{py:2,px:3},children:t(f,{variant:"body2",sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.4},children:ie.description||"لا يوجد وصف"})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t(on,{sx:{fontSize:18,color:"text.secondary"}}),s(f,{variant:"body2",sx:{fontWeight:500},children:[ie.duration," دقيقة"]})]})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t(Qr,{sx:{fontSize:18,color:"text.secondary"}}),s(f,{variant:"body2",sx:{fontWeight:500},children:[ie.lessonsCount," درس"]})]})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[t(Ce,{label:Z(ie.status),color:X(ie.status),size:"small",variant:"outlined",sx:{fontWeight:600,minWidth:70}}),ie.isPreview&&t(Ce,{label:"معاينة",color:"primary",size:"small",variant:"outlined",sx:{fontWeight:600,minWidth:70}})]})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{width:120,mx:"auto"},children:[t(hr,{variant:"determinate",value:ie.lessonsCount?ie.completedLessons/ie.lessonsCount*100:0,sx:{height:8,borderRadius:4,mb:1,backgroundColor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:4}}}),s(f,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem"},children:[ie.completedLessons," من ",ie.lessonsCount]})]})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[t(Xe,{title:"عرض الوحدة",children:t(xe,{size:"small",onClick:()=>F(ie),sx:{color:"primary.main",backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(Ir,{fontSize:"small"})})}),t(Xe,{title:"الدروس",children:t(xe,{size:"small",onClick:()=>Q(ie),sx:{color:"success.main",backgroundColor:"rgba(76, 175, 80, 0.1)","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(Lu,{fontSize:"small"})})}),t(Xe,{title:"تعديل",children:t(xe,{size:"small",onClick:()=>B(ie),sx:{color:"warning.main",backgroundColor:"rgba(255, 152, 0, 0.1)","&:hover":{backgroundColor:"rgba(255, 152, 0, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(vr,{fontSize:"small"})})}),t(Xe,{title:"المزيد",children:t(xe,{size:"small",onClick:ge=>P(ge,ie),sx:{backgroundColor:"rgba(158, 158, 158, 0.1)","&:hover":{backgroundColor:"rgba(158, 158, 158, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(I0,{fontSize:"small"})})})]})})]},ie.id))})]})}),t(Xa,{component:"div",count:re.length,page:U,onPageChange:fe,rowsPerPage:V,onRowsPerPageChange:ce,labelRowsPerPage:"صفوف في الصفحة:",labelDisplayedRows:({from:ie,to:ge,count:Ae})=>`${ie}-${ge} من ${Ae}`})]})]}),s(Dc,{anchorEl:N,open:!!N,onClose:I,PaperProps:{sx:{borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"}},children:[s(Me,{onClick:()=>F(k),children:[t(Rr,{children:t(Ir,{fontSize:"small"})}),t(ir,{children:"عرض الوحدة"})]}),s(Me,{onClick:()=>Q(k),children:[t(Rr,{children:t(Lu,{fontSize:"small"})}),t(ir,{children:"الدروس"})]}),s(Me,{onClick:()=>B(k),children:[t(Rr,{children:t(vr,{fontSize:"small"})}),t(ir,{children:"تعديل الوحدة"})]}),t(Pt,{}),s(Me,{onClick:M,sx:{color:"error.main"},children:[t(Rr,{children:t(sn,{fontSize:"small",color:"error"})}),t(ir,{children:"حذف الوحدة"})]})]}),s(yr,{open:R,onClose:()=>W(!1),PaperProps:{sx:{borderRadius:"12px"}},children:[t(Wr,{children:"تأكيد الحذف"}),t(br,{children:s(f,{children:['هل أنت متأكد من حذف الوحدة "',k==null?void 0:k.title,'"؟ هذا الإجراء لا يمكن التراجع عنه.']})}),s($r,{children:[t(te,{onClick:()=>W(!1),children:"إلغاء"}),t(te,{onClick:O,color:"error",variant:"contained",children:"حذف"})]})]}),t(fn,{open:J.open,autoHideDuration:6e3,onClose:()=>H(ae(q({},J),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:t(Be,{onClose:()=>H(ae(q({},J),{open:!1})),severity:J.severity,sx:{width:"100%"},children:J.message})})]})},A9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:e.palette.background.paper,marginTop:e.spacing(3),border:`1px solid ${e.palette.divider}`,[e.breakpoints.up("md")]:{padding:e.spacing(4)}})),Og=oe(_e)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:"12px",backgroundColor:e.palette.background.paper,padding:"0 16px","& input":{textAlign:"right",padding:"12px 0",fontSize:"1rem","&::placeholder":{textAlign:"right",opacity:1}},"& textarea":{textAlign:"right",padding:"16px 0",fontSize:"1rem",lineHeight:"1.5","&::placeholder":{textAlign:"right",opacity:1}}},"& .MuiInputLabel-root":{right:16,left:"auto",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-14px, -9px) scale(0.75)"}},"& .MuiOutlinedInput-notchedOutline":{textAlign:"right"},"& .MuiInputBase-multiline":{padding:"8px 16px"}})),z9=oe(te)(({theme:e})=>({borderRadius:"8px",padding:"8px 20px",textTransform:"none",fontWeight:600,boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},"&.MuiButton-contained":{padding:"10px 24px"}})),R9=()=>{const e=Vt(),n=nt(),{courseId:a,unitId:l}=er(),[u,p]=w.useState(!0),[h,x]=w.useState(!1),[m,y]=w.useState({open:!1,message:"",severity:"success"}),[v,S]=w.useState({title:"",description:"",duration:"",isPreview:!1,videoFile:null,videoUrl:"",pdfFile:null,pdfUrl:""});w.useEffect(()=>{l&&$(null,null,function*(){p(!0);try{const W=yield dr.getModuleById(l);S(T=>ae(q({},T),{title:(W==null?void 0:W.name)||"",description:(W==null?void 0:W.description)||"",duration:typeof(W==null?void 0:W.video_duration)=="number"?Math.round(W.video_duration/60):"",isPreview:!(W!=null&&W.is_active),videoUrl:(W==null?void 0:W.video)||"",pdfUrl:(W==null?void 0:W.pdf)||""}))}catch(W){console.error("Error fetching unit data:",W),y({open:!0,message:"حدث خطأ في تحميل بيانات الوحدة",severity:"error"})}finally{p(!1)}})},[l]);const _=R=>{const{name:W,value:T,type:z,checked:N}=R.target;S(G=>ae(q({},G),{[W]:z==="checkbox"?N:T}))},k=(R,W)=>{S(T=>q(q(ae(q({},T),{[`${R}File`]:W||null}),R==="video"?{videoUrl:W?"":T.videoUrl}:{}),R==="pdf"?{pdfUrl:W?"":T.pdfUrl}:{}))},E=R=>$(null,null,function*(){R.preventDefault(),x(!0);try{const W={title:v.title,name:v.title,description:v.description,durationMinutes:v.duration?Number(v.duration):void 0,status:v.isPreview?"draft":void 0,videoFile:v.videoFile,pdfFile:v.pdfFile};yield dr.updateModule(l,W),y({open:!0,message:"تم حفظ الوحدة بنجاح وتم تحديث البيانات!",severity:"success"}),n(`/teacher/courses/${a}/units`)}catch(W){console.error("Error saving unit:",W),y({open:!0,message:"حدث خطأ في حفظ الوحدة",severity:"error"})}finally{x(!1)}});return u?t(Qe,{maxWidth:"lg",sx:{py:4},children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})})}):s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{mb:4,display:"flex",alignItems:"center"},children:[t(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:e.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:e.palette.action.hover}},children:t(Gt,{})}),t(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main},children:"تعديل الوحدة"})]}),t(A9,{elevation:0,children:s(d,{component:"form",onSubmit:E,sx:{display:"flex",flexDirection:"column",gap:3},children:[t(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"تعديل بيانات الوحدة"}),t(Og,{fullWidth:!0,label:"عنوان الوحدة",name:"title",value:v.title,onChange:_,variant:"outlined",required:!0,size:"medium"}),t(Og,{fullWidth:!0,label:"وصف الوحدة",name:"description",value:v.description,onChange:_,variant:"outlined",multiline:!0,rows:4}),t(Og,{fullWidth:!0,label:"مدة الوحدة (بالدقائق)",name:"duration",type:"number",value:v.duration,onChange:_,variant:"outlined",size:"medium",InputProps:{endAdornment:t(Pr,{position:"end",children:"دقيقة"})}}),s(d,{children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"الفيديو"}),v.videoFile?s(d,{children:[t("video",{src:URL.createObjectURL(v.videoFile),controls:!0,style:{width:"100%",maxHeight:360,borderRadius:8,border:`1px solid ${e.palette.divider}`}}),t(d,{sx:{mt:1,display:"flex",gap:1},children:t(te,{color:"error",onClick:()=>k("video",null),children:"مسح الفيديو"})})]}):v.videoUrl?s(d,{children:[t("video",{src:v.videoUrl,controls:!0,style:{width:"100%",maxHeight:360,borderRadius:8,border:`1px solid ${e.palette.divider}`}}),t(d,{sx:{mt:1,display:"flex",gap:1},children:s(te,{component:"label",variant:"outlined",startIcon:t(Bs,{}),disabled:h,children:["استبدال الفيديو",t("input",{hidden:!0,type:"file",accept:"video/*",onChange:R=>k("video",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})})]}):s(te,{component:"label",variant:"outlined",startIcon:t(Bs,{}),disabled:h,children:["رفع فيديو (MP4)",t("input",{hidden:!0,type:"file",accept:"video/*",onChange:R=>k("video",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})]}),s(d,{children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"ملف PDF"}),v.pdfFile?s(d,{children:[t(d,{sx:{position:"relative",border:`1px solid ${e.palette.divider}`,borderRadius:1,overflow:"hidden"},children:t("iframe",{title:"pdf-preview",src:URL.createObjectURL(v.pdfFile),style:{width:"100%",height:480,border:0}})}),s(d,{sx:{mt:1,display:"flex",gap:1,alignItems:"center"},children:[t(te,{component:"a",href:URL.createObjectURL(v.pdfFile),target:"_blank",rel:"noopener noreferrer",children:"فتح في تبويب"}),t(te,{color:"error",onClick:()=>k("pdf",null),children:"مسح الملف"})]})]}):v.pdfUrl?s(d,{children:[t(d,{sx:{position:"relative",border:`1px solid ${e.palette.divider}`,borderRadius:1,overflow:"hidden"},children:t("iframe",{title:"pdf-preview",src:v.pdfUrl,style:{width:"100%",height:480,border:0}})}),s(d,{sx:{mt:1,display:"flex",gap:1,alignItems:"center"},children:[t(te,{component:"a",href:v.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:"فتح في تبويب"}),s(te,{component:"label",variant:"outlined",startIcon:t(Bs,{}),disabled:h,children:["استبدال الملف",t("input",{hidden:!0,type:"file",accept:"application/pdf",onChange:R=>k("pdf",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})]})]}):s(te,{component:"label",variant:"outlined",startIcon:t(Bs,{}),children:["رفع ملف PDF",t("input",{hidden:!0,type:"file",accept:"application/pdf",onChange:R=>k("pdf",R.target.files&&R.target.files.length?R.target.files[0]:null)})]})]}),t(kt,{control:t(Ai,{checked:v.isPreview,onChange:_,name:"isPreview",color:"primary"}),label:"متاحة كمعاينة"}),t(d,{sx:{display:"flex",justifyContent:"flex-end"},children:t(z9,{variant:"contained",type:"submit",disabled:h,children:h?"جاري الحفظ...":"حفظ التغييرات"})})]})}),t(fn,{open:m.open,autoHideDuration:6e3,onClose:()=>y(ae(q({},m),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:t(Be,{onClose:()=>y(ae(q({},m),{open:!1})),severity:m.severity,sx:{width:"100%"},children:m.message})})]})},E9=oe(yr)(({theme:e})=>({"& .MuiDialog-paper":{borderRadius:"16px",maxWidth:"800px",width:"90%",maxHeight:"90vh",direction:"rtl"}})),T9=oe(Wr)(({theme:e})=>({background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(2,3),"& .MuiTypography-root":{fontWeight:700,fontSize:"1.25rem"}})),Dm=({open:e,onClose:n,courseId:a,unitId:l,lessonId:u})=>{const[p,h]=w.useState(null),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,_]=w.useState([]);w.useEffect(()=>{e&&u&&k()},[e,u]);const k=()=>$(null,null,function*(){m(!0),v(null);try{const z=yield dr.getModuleById(l),N=((z==null?void 0:z.lessons)||[]).find(G=>String(G.id)===String(u));if(h(N||null),N)try{const G=yield dr.getLessonResources(u);_(G||[])}catch(G){console.log("No resources found for lesson"),_([])}else v("لم يتم العثور على الدرس المطلوب")}catch(z){v("تعذر تحميل الدرس")}finally{m(!1)}}),E=()=>{h(null),v(null),_([]),n()},R=z=>z?new Date(z).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"غير محدد",W=z=>{var G;switch((G=z.split(".").pop())==null?void 0:G.toLowerCase()){case"pdf":return t(Ks,{});case"doc":case"docx":return t(Fw,{});case"mp4":case"avi":case"mov":return t(r6,{});case"mp3":case"wav":return t(t6,{});case"jpg":case"jpeg":case"png":case"gif":return t(jo,{});default:return t(Pw,{})}},T=z=>{console.log("Downloading resource:",z)};return s(E9,{open:e,onClose:E,maxWidth:"md",fullWidth:!0,children:[s(T9,{children:[t(f,{variant:"h6",children:"تفاصيل الدرس"}),t(xe,{onClick:E,sx:{color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:t(an,{})})]}),s(br,{sx:{p:3},children:[x&&t(d,{sx:{display:"flex",justifyContent:"center",py:4},children:t(Ke,{})}),y&&t(Be,{severity:"error",sx:{mb:2},children:y}),p&&!x&&s(d,{children:[s(d,{sx:{mb:3},children:[t(f,{variant:"h5",sx:{fontWeight:700,mb:2,color:"primary.main"},children:p.title}),s(d,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[t(Ce,{label:p.lesson_type||"article",color:p.lesson_type==="video"?"primary":"default",variant:"outlined",size:"small"}),t(Ce,{label:`${p.duration_minutes||0} دقيقة`,color:"secondary",variant:"outlined",size:"small"}),p.is_free&&t(Ce,{label:"معاينة",color:"success",variant:"outlined",size:"small"})]}),t(Pt,{sx:{my:2}})]}),s(d,{sx:{mb:3},children:[t(f,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:"محتوى الدرس"}),t(d,{sx:{p:3,backgroundColor:"grey.50",borderRadius:2,border:"1px solid",borderColor:"divider",minHeight:200},children:t(f,{variant:"body1",sx:{lineHeight:1.8,whiteSpace:"pre-wrap",textAlign:"right"},children:p.content||"لا يوجد محتوى للدرس"})})]}),s(d,{sx:{p:3,backgroundColor:"grey.50",borderRadius:2,border:"1px solid",borderColor:"divider",mb:3},children:[t(f,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:"معلومات الدرس"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body2",color:"textSecondary",children:"معرف الدرس:"}),t(f,{variant:"body1",fontWeight:600,children:p.id})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body2",color:"textSecondary",children:"نوع الدرس:"}),t(Ce,{label:p.lesson_type||"article",size:"small",color:p.lesson_type==="video"?"primary":"default"})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body2",color:"textSecondary",children:"المدة:"}),s(f,{variant:"body1",fontWeight:600,children:[p.duration_minutes||0," دقيقة"]})]}),p.created_at&&s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body2",color:"textSecondary",children:"تاريخ الإنشاء:"}),t(f,{variant:"body1",fontWeight:600,children:R(p.created_at)})]}),p.updated_at&&s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body2",color:"textSecondary",children:"آخر تحديث:"}),t(f,{variant:"body1",fontWeight:600,children:R(p.updated_at)})]})]})]}),(S.length>0||p.resources&&p.resources.length>0)&&s(d,{sx:{p:3,backgroundColor:"grey.50",borderRadius:2,border:"1px solid",borderColor:"divider"},children:[s(f,{variant:"h6",sx:{fontWeight:600,mb:2,color:"primary.main"},children:["الملفات المرفقة (",(S.length>0?S:p.resources||[]).length,")"]}),t(Fr,{sx:{bgcolor:"white",borderRadius:1},children:(S.length>0?S:p.resources||[]).map((z,N,G)=>s(zr,{sx:{borderBottom:N<G.length-1?"1px solid":"none",borderColor:"divider","&:hover":{backgroundColor:"action.hover"}},children:[t(Rr,{sx:{minWidth:40},children:W(z.name||z.filename||"file")}),t(ir,{primary:z.name||z.filename||"ملف مرفق",secondary:z.description||z.size?`${z.size} bytes`:"",sx:{"& .MuiListItemText-primary":{fontWeight:600,fontSize:"0.9rem"},"& .MuiListItemText-secondary":{fontSize:"0.8rem"}}}),t(Nw,{children:t(xe,{edge:"end",onClick:()=>T(z),sx:{color:"primary.main","&:hover":{backgroundColor:"primary.main",color:"white"}},children:t(Nn,{})})})]},z.id||N))})]})]})]}),t($r,{sx:{p:2,justifyContent:"center"},children:t(d,{sx:{display:"flex",gap:2},children:s(f,{variant:"body2",color:"textSecondary",children:["معرف الدرس: ",u]})})})]})},Xv=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.05)",background:e.palette.background.paper,marginTop:e.spacing(3),border:`1px solid ${e.palette.divider}`,[e.breakpoints.up("md")]:{padding:e.spacing(4)}}));oe(Je)(({theme:e})=>({borderRadius:"12px",overflow:"hidden",transition:"all 0.3s ease",border:`1px solid ${e.palette.divider}`,"&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.15)",borderColor:e.palette.primary.main}}));const Lg=[{value:"video",label:"فيديو",icon:t(li,{}),color:"primary"},{value:"article",label:"مقال",icon:t(Qr,{}),color:"secondary"}],M9=()=>{const e=Vt(),n=nt(),{courseId:a,unitId:l}=er(),[u,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(!1),[v,S]=w.useState(null),[_,k]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{l&&$(null,null,function*(){x(!0);try{const U=yield dr.getModuleById(l),A={id:U==null?void 0:U.id,title:(U==null?void 0:U.name)||"",description:(U==null?void 0:U.description)||"",duration:typeof(U==null?void 0:U.video_duration)=="number"?Math.round(U.video_duration/60):0,order:U==null?void 0:U.order,status:(U==null?void 0:U.status)||(U!=null&&U.is_active?"published":"draft"),isPreview:(U==null?void 0:U.is_active)===!1,lessons:Array.isArray(U==null?void 0:U.lessons)?U.lessons.map(V=>({id:V.id,title:V.title||"",type:V.lesson_type||"article",duration:V.duration_minutes||0,content:V.content||"",isPreview:V.is_free||!1,completed:!1,resources:[]})):[],createdAt:U==null?void 0:U.created_at,updatedAt:U==null?void 0:U.updated_at};p(A)}catch(U){console.error("Error fetching unit:",U),k({open:!0,message:"حدث خطأ في تحميل بيانات الوحدة",severity:"error"})}finally{x(!1)}})},[l]);const E=()=>{n(`/teacher/courses/${a}/units/${l}/edit`)},R=H=>{S(H.id),y(!0)},W=()=>{y(!1),S(null)},T=H=>{const U=Lg.find(A=>A.value===H);return U?U.icon:t(Qr,{})},z=H=>{const U=Lg.find(A=>A.value===H);return U?U.color:"default"},N=H=>{const U=Lg.find(A=>A.value===H);return U?U.label:"عام"},G=H=>H?new Date(H).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"غير محدد",J=H=>H.completed?{label:"مكتمل",color:"success"}:H.isPreview?{label:"معاينة",color:"primary"}:{label:"غير مكتمل",color:"default"};return h?t(Qe,{maxWidth:"lg",sx:{py:4},children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})})}):u?s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{mb:4,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s(d,{sx:{display:"flex",alignItems:"center"},children:[t(xe,{onClick:()=>n(-1),sx:{mr:2,backgroundColor:e.palette.background.paper,boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{backgroundColor:e.palette.action.hover}},children:t(Gt,{})}),s(d,{children:[t(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main},children:u.title}),t(f,{variant:"body1",color:"textSecondary",children:"وحدة من دورة البرمجة"})]})]}),t(te,{variant:"outlined",startIcon:t(vr,{}),onClick:E,sx:{borderRadius:"12px"},children:"تعديل الوحدة"})]}),s(Xv,{elevation:0,children:[s(d,{sx:{display:"flex",alignItems:"center",mb:3},children:[t(_t,{sx:{bgcolor:e.palette.primary.main,width:64,height:64,mr:2},children:t(Qr,{sx:{fontSize:32}})}),s(d,{sx:{flex:1},children:[t(f,{variant:"h5",component:"h2",sx:{fontWeight:600,mb:1},children:u.title}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[t(Ce,{label:u.status==="published"?"منشور":"مسودة",color:u.status==="published"?"success":"warning",size:"small",variant:"outlined"}),u.isPreview&&t(Ce,{label:"معاينة",color:"primary",size:"small",variant:"outlined"})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(on,{sx:{fontSize:"1rem",color:"text.secondary"}}),s(f,{variant:"body2",color:"textSecondary",children:[u.duration," دقيقة"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(Qr,{sx:{fontSize:"1rem",color:"text.secondary"}}),s(f,{variant:"body2",color:"textSecondary",children:[u.lessons.length," درس"]})]})]})]})]}),t(f,{variant:"body1",color:"textSecondary",sx:{mb:3,lineHeight:1.6},children:u.description}),s(se,{container:!0,spacing:3,sx:{mb:3},children:[t(se,{item:!0,xs:12,children:s(d,{sx:{p:3,backgroundColor:e.palette.grey[50],borderRadius:3,border:`1px solid ${e.palette.divider}`,boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[t(f,{variant:"h6",sx:{fontWeight:700,mb:3,color:e.palette.primary.main,textAlign:"center"},children:"تفاصيل الوحدة"}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"تاريخ الإنشاء"}),t(f,{variant:"body1",fontWeight:600,color:"primary.main",children:G(u.createdAt)})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"آخر تحديث"}),t(f,{variant:"body1",fontWeight:600,color:"primary.main",children:G(u.updatedAt)})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"ترتيب الوحدة"}),t(f,{variant:"body1",fontWeight:600,color:"primary.main",children:u.order||"غير محدد"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"إجمالي الدروس"}),s(f,{variant:"body1",fontWeight:600,color:"primary.main",children:[u.lessons.length," درس"]})]})})]})]})}),t(se,{item:!0,xs:12,children:s(d,{sx:{p:3,backgroundColor:e.palette.grey[50],borderRadius:3,border:`1px solid ${e.palette.divider}`,boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[t(f,{variant:"h6",sx:{fontWeight:700,mb:3,color:e.palette.primary.main,textAlign:"center"},children:"إحصائيات الوحدة"}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"إجمالي المدة"}),s(f,{variant:"body1",fontWeight:600,color:"primary.main",children:[u.duration," دقيقة"]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"الدروس المكتملة"}),s(f,{variant:"body1",fontWeight:600,color:"success.main",children:[u.lessons.filter(H=>H.completed).length," من ",u.lessons.length]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"دروس المعاينة"}),s(f,{variant:"body1",fontWeight:600,color:"warning.main",children:[u.lessons.filter(H=>H.isPreview).length," درس"]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{p:2,backgroundColor:"white",borderRadius:2,border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transform:"translateY(-1px)"}},children:[t(f,{variant:"body2",color:"textSecondary",sx:{mb:.5,fontSize:"0.8rem"},children:"الحالة"}),t(Ce,{label:u.status==="published"?"منشور":"مسودة",color:u.status==="published"?"success":"warning",size:"small",sx:{fontWeight:600}})]})})]})]})})]})]}),s(Xv,{elevation:0,sx:{mt:3},children:[s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[s(f,{variant:"h6",sx:{fontWeight:600,color:e.palette.primary.main},children:["دروس الوحدة (",u.lessons.length,")"]}),s(d,{sx:{display:"flex",gap:1},children:[t(Ce,{label:`${u.lessons.filter(H=>H.completed).length} مكتمل`,color:"success",size:"small",variant:"outlined"}),t(Ce,{label:`${u.lessons.filter(H=>H.isPreview).length} معاينة`,color:"primary",size:"small",variant:"outlined"})]})]}),t(pi,{sx:{borderRadius:2,border:`1px solid ${e.palette.divider}`},children:s(ui,{children:[t(hi,{children:s(Jt,{sx:{backgroundColor:e.palette.grey[50]},children:[t(ye,{sx:{fontWeight:700,color:e.palette.primary.main},children:s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(Qr,{sx:{fontSize:20}}),"الدرس"]})}),t(ye,{sx:{fontWeight:700,color:e.palette.primary.main,textAlign:"center"},children:"النوع"}),t(ye,{sx:{fontWeight:700,color:e.palette.primary.main,textAlign:"center"},children:"المدة"}),t(ye,{sx:{fontWeight:700,color:e.palette.primary.main,textAlign:"center"},children:"الحالة"}),t(ye,{sx:{fontWeight:700,color:e.palette.primary.main,textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:u.lessons.map((H,U)=>{const A=J(H);return s(Jt,{sx:{"&:hover":{backgroundColor:e.palette.action.hover,transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>R(H),children:[t(ye,{children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(_t,{sx:{bgcolor:e.palette[z(H.type)].main,width:40,height:40},children:T(H.type)}),s(d,{children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:H.title}),t(f,{variant:"body2",color:"textSecondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",maxWidth:300},children:H.content||"لا يوجد وصف للدرس"})]})]})}),t(ye,{align:"center",children:t(Ce,{label:N(H.type),size:"small",color:z(H.type),variant:"outlined",sx:{fontWeight:600}})}),t(ye,{align:"center",children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t(on,{sx:{fontSize:16,color:"text.secondary"}}),s(f,{variant:"body2",fontWeight:500,children:[H.duration," دقيقة"]})]})}),t(ye,{align:"center",children:s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[t(Ce,{label:A.label,size:"small",color:A.color,variant:"filled",sx:{fontWeight:600}}),H.completed&&t(xr,{sx:{fontSize:16,color:"success.main"}})]})}),t(ye,{align:"center",children:s(d,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[t(Xe,{title:"فتح الدرس",children:t(xe,{size:"small",color:"primary",onClick:V=>{V.stopPropagation(),R(H)},sx:{backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)",transform:"scale(1.1)"}},children:t(Ic,{})})}),t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",color:"secondary",onClick:V=>{V.stopPropagation(),R(H)},sx:{backgroundColor:"rgba(156, 39, 176, 0.1)","&:hover":{backgroundColor:"rgba(156, 39, 176, 0.2)",transform:"scale(1.1)"}},children:t(Ir,{})})}),H.resources.length>0&&t(Xe,{title:`${H.resources.length} مرفق`,children:t(Bo,{badgeContent:H.resources.length,color:"primary",children:t(xe,{size:"small",color:"info",sx:{backgroundColor:"rgba(3, 169, 244, 0.1)","&:hover":{backgroundColor:"rgba(3, 169, 244, 0.2)",transform:"scale(1.1)"}},children:t(Nn,{})})})})]})})]},H.id)})})]})})]}),t(fn,{open:_.open,autoHideDuration:6e3,onClose:()=>k(ae(q({},_),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:t(Be,{onClose:()=>k(ae(q({},_),{open:!1})),severity:_.severity,sx:{width:"100%"},children:_.message})}),t(Dm,{open:m,onClose:W,courseId:a,unitId:l,lessonId:v})]}):t(Qe,{maxWidth:"lg",sx:{py:4},children:t(Be,{severity:"error",children:"لم يتم العثور على الوحدة المطلوبة"})})},D9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",border:`1px solid ${e.palette.divider}`})),I9=[{value:"video",label:"فيديو"},{value:"article",label:"مقال"}],Kv=({isEdit:e=!1})=>{const n=nt(),{courseId:a,unitId:l,lessonId:u}=er(),[p,h]=w.useState(e),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,_]=w.useState({title:"",lesson_type:"article",duration_minutes:0,is_free:!1,video_url:"",content:""}),[k,E]=w.useState("none"),[R,W]=w.useState({title:"",resource_type:"document",file:null,url:"",is_public:!0}),[T,z]=w.useState([]),[N,G]=w.useState(!1),[J,H]=w.useState(null);w.useEffect(()=>{$(null,null,function*(){if(e)try{h(!0),v(null);const P=yield dr.getModuleById(l),I=((P==null?void 0:P.lessons)||[]).find(B=>String(B.id)===String(u));I?_({title:I.title||"",lesson_type:I.lesson_type||"article",duration_minutes:I.duration_minutes||0,is_free:!!I.is_free,video_url:I.video_url||"",content:I.content||""}):v("تعذر العثور على الدرس")}catch(P){v("تعذر تحميل بيانات الدرس")}finally{h(!1)}})},[e,l,u]),w.useEffect(()=>{$(null,null,function*(){if(!(!e||!u))try{G(!0),H(null);const P=yield dr.getLessonResources({lessonId:u}),I=Array.isArray(P)?P:(P==null?void 0:P.results)||(P==null?void 0:P.data)||[];z(I)}catch(P){H("تعذر تحميل الموارد المرفقة")}finally{G(!1)}})},[e,u]);const U=Y=>$(null,null,function*(){try{yield dr.deleteLessonResource(Y),z(P=>P.filter(I=>I.id!==Y))}catch(P){H("تعذر حذف المورد")}}),A=(Y,P)=>_(I=>ae(q({},I),{[Y]:P}));return s(Qe,{maxWidth:"md",sx:{py:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:3},children:[t(xe,{onClick:()=>n(-1),children:t(Gt,{})}),t(f,{variant:"h5",fontWeight:700,children:e?"تعديل الدرس":"إضافة درس"})]}),s(D9,{component:"form",onSubmit:Y=>$(null,null,function*(){var P,I,B,F;Y.preventDefault();try{m(!0),v(null);let Q=u;if(e){const M=yield dr.updateLesson(u,q({module:l},S));Q=(M==null?void 0:M.id)||u}else{const M=yield dr.createLesson(q({module:l},S));Q=M==null?void 0:M.id}if(Q&&k!=="none"){if(console.log("Creating resource with mode:",k),console.log("Current lesson ID:",Q),console.log("Resource data:",R),k==="file"&&R.file){const M={lesson:Q,title:R.title||"Resource",resource_type:R.resource_type||"document",file:R.file,is_public:R.is_public?"true":"false"};console.log("Creating file resource with data:",M),yield dr.createLessonResource(M)}else if(k==="url"&&R.url){const M={lesson:Q,title:R.title||"Resource",resource_type:"link",url:R.url,is_public:R.is_public?"true":"false"};console.log("Creating URL resource with data:",M),yield dr.createLessonResource(M)}}n(`/teacher/courses/${a}/units/${l}/lessons`)}catch(Q){const M=((I=(P=Q==null?void 0:Q.response)==null?void 0:P.data)==null?void 0:I.detail)||((F=(B=Q==null?void 0:Q.response)==null?void 0:B.data)==null?void 0:F.error)||"تعذر حفظ الدرس. تحقق من الحقول.";v(M)}finally{m(!1)}}),children:[y&&t(Be,{severity:"error",sx:{mb:2},children:y}),s(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2},children:[t(_e,{label:"عنوان الدرس",value:S.title,onChange:Y=>A("title",Y.target.value),required:!0}),s(At,{children:[t(Rt,{children:"نوع الدرس"}),t(Et,{label:"نوع الدرس",value:S.lesson_type,onChange:Y=>A("lesson_type",Y.target.value),children:I9.map(Y=>t(Me,{value:Y.value,children:Y.label},Y.value))})]}),t(_e,{label:"المدة (بالدقائق)",type:"number",inputProps:{min:0},value:S.duration_minutes,onChange:Y=>A("duration_minutes",Number(Y.target.value||0))}),t(_e,{label:"رابط الفيديو (اختياري)",value:S.video_url,onChange:Y=>A("video_url",Y.target.value)})]}),t(kt,{control:t(Ai,{checked:S.is_free,onChange:Y=>A("is_free",Y.target.checked)}),label:"متاح كمعاينة",sx:{mt:2}}),t(_e,{label:"المحتوى",value:S.content,onChange:Y=>A("content",Y.target.value),fullWidth:!0,multiline:!0,rows:6,sx:{mt:2}}),t(Pt,{sx:{my:3}}),t(f,{variant:"h6",sx:{mb:1},children:"الموارد المرفقة (اختياري)"}),e&&s(d,{sx:{mb:2},children:[J&&t(Be,{severity:"error",sx:{mb:1},children:J}),N?t(f,{variant:"body2",color:"text.secondary",children:"جاري تحميل الموارد..."}):T.length>0?t(Fr,{dense:!0,children:T.map(Y=>s(zr,{sx:{border:"1px solid",borderColor:"divider",borderRadius:1,mb:1},children:[t(W0,{fontSize:"small",style:{marginInlineEnd:6}}),t(ir,{primary:Y.title,secondary:Y.resource_type}),Y.file&&t(xe,{component:fa,href:Y.file,target:"_blank",rel:"noopener noreferrer",children:t(Sy,{fontSize:"small"})}),Y.url&&t(xe,{component:fa,href:Y.url,target:"_blank",rel:"noopener noreferrer",children:t(Sy,{fontSize:"small"})}),t(Nw,{children:t(xe,{edge:"end",color:"error",onClick:()=>U(Y.id),children:t(Hw,{})})})]},Y.id))}):t(f,{variant:"body2",color:"text.secondary",children:"لا توجد موارد مرفقة."})]}),s(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2},children:[s(At,{children:[t(Rt,{children:"طريقة الإضافة"}),s(Et,{label:"طريقة الإضافة",value:k,onChange:Y=>E(Y.target.value),children:[t(Me,{value:"none",children:"بدون"}),t(Me,{value:"file",children:"رفع ملف"}),t(Me,{value:"url",children:"رابط خارجي"})]})]}),k!=="none"&&t(_e,{label:"عنوان المورد",value:R.title,onChange:Y=>W(P=>ae(q({},P),{title:Y.target.value})),required:!0})]}),k==="file"&&s(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2,mt:2},children:[s(At,{children:[t(Rt,{children:"نوع المورد"}),s(Et,{label:"نوع المورد",value:R.resource_type,onChange:Y=>W(P=>ae(q({},P),{resource_type:Y.target.value})),children:[t(Me,{value:"document",children:"مستند"}),t(Me,{value:"presentation",children:"عرض تقديمي"}),t(Me,{value:"spreadsheet",children:"جدول بيانات"}),t(Me,{value:"image",children:"صورة"}),t(Me,{value:"audio",children:"صوت"}),t(Me,{value:"video",children:"فيديو"}),t(Me,{value:"other",children:"أخرى"})]})]}),s(te,{component:"label",variant:"outlined",children:["اختر ملف",t("input",{hidden:!0,type:"file",onChange:Y=>{const P=Y.target.files&&Y.target.files.length?Y.target.files[0]:null;W(I=>ae(q({},I),{file:P}))}})]}),R.file&&t(f,{variant:"caption",color:"text.secondary",children:R.file.name})]}),k==="url"&&t(d,{sx:{mt:2},children:t(_e,{label:"رابط المورد",fullWidth:!0,value:R.url,onChange:Y=>W(P=>ae(q({},P),{url:Y.target.value})),placeholder:"https://example.com/resource.pdf"})}),s(d,{sx:{display:"flex",justifyContent:"flex-end",gap:1.5,mt:3},children:[t(te,{variant:"outlined",onClick:()=>n(-1),disabled:x,children:"إلغاء"}),t(te,{type:"submit",variant:"contained",startIcon:t(Vo,{}),disabled:x,children:"حفظ"})]})]})]})},W9=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:`1px solid ${e.palette.divider}`}));oe(We)(({theme:e})=>({padding:e.spacing(2),borderRadius:"10px",border:`1px solid ${e.palette.divider}`,transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.08)"}}));const $9=()=>{const e=nt(),{courseId:n,unitId:a}=er(),[l,u]=w.useState(!0),[p,h]=w.useState(null),[x,m]=w.useState(null),[y,v]=w.useState(!1),[S,_]=w.useState(null),[k,E]=w.useState(!1),[R,W]=w.useState({open:!1,message:"",severity:"success"}),[T,z]=w.useState(0),[N,G]=w.useState(10),[J,H]=w.useState(!1),[U,A]=w.useState(null);w.useEffect(()=>{a&&$(null,null,function*(){u(!0),m(null);try{const C=yield dr.getModuleById(a);h(C)}catch(C){m("تعذر تحميل الدروس")}finally{u(!1)}})},[a]);const V=Array.isArray(p==null?void 0:p.lessons)?p.lessons:[],Y=O=>{_(O),v(!0)},P=()=>$(null,null,function*(){if(S){E(!0);try{yield dr.deleteLesson(S.id),h(O=>ae(q({},O),{lessons:((O==null?void 0:O.lessons)||[]).filter(C=>C.id!==S.id)})),W({open:!0,message:"تم حذف الدرس بنجاح",severity:"success"})}catch(O){W({open:!0,message:"تعذر حذف الدرس",severity:"error"})}finally{E(!1),v(!1),_(null)}}}),I=O=>{switch((O||"").toLowerCase()){case"video":return t(li,{fontSize:"small"});default:return t(Qr,{fontSize:"small"})}},B=(O,C)=>{z(C)},F=O=>{G(parseInt(O.target.value,10)),z(0)},Q=O=>{A(O),H(!0)},M=()=>{H(!1),A(null)};return s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),t(d,{sx:{position:"relative",zIndex:2},children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(xe,{onClick:()=>e(`/teacher/courses/${n}/units`),sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"}},children:t(Gt,{})}),s(d,{children:[t(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:"white"},children:"دروس الوحدة"}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:(p==null?void 0:p.name)||(p==null?void 0:p.title)||"إدارة دروس الوحدة"})]})]}),t(te,{variant:"contained",startIcon:t(jw,{}),size:"large",onClick:()=>e(`/teacher/courses/${n}/units/${a}/lessons/create`),sx:{background:"linear-gradient(45deg, #0e5181 30%, #e5978b 90%)",color:"white",borderRadius:"25px",px:3,py:1.5,fontWeight:600,textTransform:"none",fontSize:"0.95rem",boxShadow:"0 4px 15px rgba(14, 81, 129, 0.3)",border:"none","&:hover":{background:"linear-gradient(45deg, #0a3f66 30%, #d88a7e 90%)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:"إضافة درس"})]})})]}),s(W9,{children:[l&&t(d,{sx:{py:3},children:t(hr,{})}),x&&t(f,{color:"error",sx:{mb:2},children:x}),!l&&!x&&(V.length>0?s(Bt,{children:[t(pi,{component:We,sx:{borderRadius:2,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:s(ui,{children:[t(hi,{children:s(Jt,{sx:{backgroundColor:"primary.main"},children:[t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"الدرس"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"النوع"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"المدة"}),t(ye,{sx:{color:"white",fontWeight:600,py:2,px:3,textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:V.slice(T*N,T*N+N).map(O=>s(Jt,{hover:!0,sx:{"&:hover":{backgroundColor:"action.hover"}},children:[t(ye,{sx:{py:2,px:3},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:48,height:48,borderRadius:"50%",backgroundColor:"primary.main",color:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:I(O.lesson_type)}),s(d,{sx:{minWidth:0,flex:1},children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,lineHeight:1.2},children:O.title}),s(f,{variant:"caption",color:"textSecondary",sx:{fontSize:"0.75rem"},children:["معرف الدرس: ",O.id]})]})]})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:t(Ce,{label:O.lesson_type||"article",variant:"outlined",size:"small",color:O.lesson_type==="video"?"primary":"default",sx:{fontWeight:600,minWidth:80}})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t(on,{sx:{fontSize:18,color:"text.secondary"}}),s(f,{variant:"body2",sx:{fontWeight:500},children:[O.duration_minutes||0," دقيقة"]})]})}),t(ye,{sx:{py:2,px:3,textAlign:"center"},children:s(d,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[t(Xe,{title:"عرض",children:t(xe,{size:"small",onClick:()=>Q(O.id),sx:{color:"primary.main",backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(Ir,{fontSize:"small"})})}),t(Xe,{title:"تعديل",children:t(xe,{size:"small",onClick:()=>e(`/teacher/courses/${n}/units/${a}/lessons/${O.id}/edit`),sx:{color:"warning.main",backgroundColor:"rgba(255, 152, 0, 0.1)","&:hover":{backgroundColor:"rgba(255, 152, 0, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(vr,{fontSize:"small"})})}),t(Xe,{title:"حذف",children:t(xe,{size:"small",color:"error",onClick:()=>Y(O),sx:{backgroundColor:"rgba(244, 67, 54, 0.1)","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.2)",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(Hw,{fontSize:"small"})})})]})})]},O.id))})]})}),t(Xa,{component:"div",count:V.length,page:T,onPageChange:B,rowsPerPage:N,onRowsPerPageChange:F,labelRowsPerPage:"صفوف في الصفحة:",labelDisplayedRows:({from:O,to:C,count:X})=>`${O}-${C} من ${X}`})]}):t(f,{variant:"body1",color:"text.secondary",children:"لا توجد دروس في هذه الوحدة حتى الآن."}))]}),s(yr,{open:y,onClose:()=>!k&&v(!1),children:[t(Wr,{children:"تأكيد الحذف"}),s(br,{children:["هل أنت متأكد من حذف الدرس: ",S==null?void 0:S.title,"؟ هذا الإجراء لا يمكن التراجع عنه."]}),s($r,{children:[t(te,{onClick:()=>v(!1),disabled:k,children:"إلغاء"}),t(te,{color:"error",onClick:P,disabled:k,children:k?"جاري الحذف...":"حذف"})]})]}),t(fn,{open:R.open,autoHideDuration:4e3,onClose:()=>W(O=>ae(q({},O),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:t(Be,{onClose:()=>W(O=>ae(q({},O),{open:!1})),severity:R.severity,sx:{width:"100%"},children:R.message})}),t(Dm,{open:J,onClose:M,courseId:n,unitId:a,lessonId:U})]})},fc={getProfile:()=>$(null,null,function*(){try{return(yield ee.get("/api/auth/profile/")).data}catch(e){throw e}}),updateProfile:e=>$(null,null,function*(){try{return(yield ee.put("/api/auth/profile/update/",e)).data}catch(n){throw n}}),updateSettings:e=>$(null,null,function*(){try{return(yield ee.put("/api/auth/settings/",e)).data}catch(n){throw n}}),changePassword:e=>$(null,null,function*(){try{return(yield ee.post("/api/auth/change-password/",e)).data}catch(n){throw n}}),uploadProfilePicture:e=>$(null,null,function*(){try{const n=new FormData;return n.append("profile_picture",e),(yield ee.post("/api/auth/profile/upload-picture/",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw n}}),getStatistics:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/dashboard/stats/")).data}catch(e){throw e}}),getEducation:()=>$(null,null,function*(){try{return(yield ee.get("/api/auth/profile/education/")).data}catch(e){throw e}}),addEducation:e=>$(null,null,function*(){try{return(yield ee.post("/api/auth/profile/education/",e)).data}catch(n){throw n}}),updateEducation:(e,n)=>$(null,null,function*(){try{return(yield ee.put(`/api/auth/profile/education/${e}/`,n)).data}catch(a){throw a}}),deleteEducation:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/auth/profile/education/${e}/`)).data}catch(n){throw n}}),getExperience:()=>$(null,null,function*(){try{return(yield ee.get("/api/auth/profile/experience/")).data}catch(e){throw e}}),addExperience:e=>$(null,null,function*(){try{return(yield ee.post("/api/auth/profile/experience/",e)).data}catch(n){throw n}}),updateExperience:(e,n)=>$(null,null,function*(){try{return(yield ee.put(`/api/auth/profile/experience/${e}/`,n)).data}catch(a){throw a}}),deleteExperience:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/auth/profile/experience/${e}/`)).data}catch(n){throw n}}),updateSkills:e=>$(null,null,function*(){try{return(yield ee.put("/api/auth/profile/skills/",{skills:e})).data}catch(n){throw n}})};oe(Bo)(({theme:e})=>({"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${e.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));oe(d)(({theme:e})=>({background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:e.spacing(3),padding:e.spacing(4),marginBottom:e.spacing(4),position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3}}));const O9=oe(Je)(({theme:e})=>({borderRadius:e.spacing(3),boxShadow:"0 8px 32px rgba(14, 81, 129, 0.1)",border:"1px solid",borderColor:he("#0e5181",.08),transition:"all 0.3s ease",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(229, 151, 139, 0.02) 100%)","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(14, 81, 129, 0.15)",borderColor:he("#0e5181",.15)}}));oe(Je)(({theme:e})=>({borderRadius:e.spacing(2.5),background:`linear-gradient(135deg, ${he("#0e5181",.03)} 0%, ${he("#e5978b",.03)} 100%)`,border:"1px solid",borderColor:he("#0e5181",.08),transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(14, 81, 129, 0.12)"}}));oe(Ce)(({theme:e})=>({borderRadius:e.spacing(2),fontWeight:600,background:`linear-gradient(135deg, ${he("#0e5181",.1)} 0%, ${he("#e5978b",.1)} 100%)`,border:`1px solid ${he("#0e5181",.2)}`,color:"#0e5181","&:hover":{transform:"scale(1.05)",background:`linear-gradient(135deg, ${he("#0e5181",.15)} 0%, ${he("#e5978b",.15)} 100%)`}}));oe(d)(({theme:e})=>({padding:e.spacing(3)}));const Bg=()=>{Vt(),nt();const{user:e,getUserRole:n,updateUser:a}=Ka(),l=w.useRef(null),[u,p]=w.useState(0),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[_,k]=w.useState(!0),[E,R]=w.useState({open:!1,message:"",severity:"success"}),[W,T]=w.useState({current_password:"",new_password:"",confirm_password:""}),[z,N]=w.useState({firstName:(e==null?void 0:e.first_name)||"",lastName:(e==null?void 0:e.last_name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",location:(e==null?void 0:e.location)||"",website:(e==null?void 0:e.website)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.profile_picture)||Ac,coverImage:"https://source.unsplash.com/random/1200x300?programming",joinDate:e!=null&&e.date_joined?new Date(e.date_joined).toLocaleDateString("ar-EG"):"",skills:(e==null?void 0:e.skills)||[],education:(e==null?void 0:e.education)||[],experience:(e==null?void 0:e.experience)||[],coursesEnrolled:0,coursesCompleted:0,certificates:0,lectures:0,lastActive:"منذ ساعتين",isVerified:(e==null?void 0:e.is_verified)||!1,profileCompletion:0}),[G,J]=w.useState({emailNotifications:{courseAnnouncements:!0,privateMessages:!0,promotionalOffers:!1,weeklyDigest:!0},privacy:{profileVisibility:"public",showEmail:!1,showPhone:!0,allowMessages:!0},appearance:{theme:"auto",language:"ar",fontSize:"medium"}}),H=()=>{x(!h)},U=I=>{const{name:B,value:F}=I.target;N(Q=>ae(q({},Q),{[B]:F}))},A=()=>$(null,null,function*(){var I,B;try{S(!0);const F={first_name:z.firstName,last_name:z.lastName,email:z.email,phone:z.phone,location:z.location,website:z.website,bio:z.bio};let Q;try{Q=yield fc.updateProfile(F)}catch(M){console.warn("Profile update failed, using local update:",M),Q=q(q({},e),F)}a&&a(Q),R({open:!0,message:"تم تحديث الملف الشخصي بنجاح",severity:"success"}),x(!1)}catch(F){console.error("Error updating profile:",F),R({open:!0,message:((B=(I=F.response)==null?void 0:I.data)==null?void 0:B.message)||"فشل تحديث الملف الشخصي. يرجى المحاولة مرة أخرى",severity:"error"})}finally{S(!1)}});w.useEffect(()=>{e&&$(null,null,function*(){try{k(!0);let B={},F={};try{B=yield fc.getProfile()}catch(Q){console.warn("Could not load profile data:",Q),B={first_name:(e==null?void 0:e.first_name)||"",last_name:(e==null?void 0:e.last_name)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||"",location:(e==null?void 0:e.location)||"",website:(e==null?void 0:e.website)||"",bio:(e==null?void 0:e.bio)||"",profile_picture:(e==null?void 0:e.profile_picture)||Ac,date_joined:(e==null?void 0:e.date_joined)||"",skills:(e==null?void 0:e.skills)||[],education:(e==null?void 0:e.education)||[],experience:(e==null?void 0:e.experience)||[],is_verified:(e==null?void 0:e.is_verified)||!1}}try{F=yield fc.getStatistics()}catch(Q){console.warn("Could not load statistics:",Q),F={coursesEnrolled:0,coursesCompleted:0,certificates:0,lectures:0}}N(Q=>q(q(q({},Q),B),F))}catch(B){console.error("Error loading profile data:",B),R({open:!0,message:"فشل تحميل بيانات الملف الشخصي",severity:"error"})}finally{k(!1)}})},[e]);const V=()=>{R(I=>ae(q({},I),{open:!1}))},Y=()=>$(null,null,function*(){var I,B,F,Q;if(W.new_password!==W.confirm_password){R({open:!0,message:"كلمة المرور الجديدة غير متطابقة",severity:"error"});return}if(W.new_password.length<8){R({open:!0,message:"كلمة المرور الجديدة يجب أن تكون 8 أحرف على الأقل",severity:"error"});return}try{S(!0);try{yield fc.changePassword(W)}catch(M){console.warn("Password change failed:",M);const O=((B=(I=M.response)==null?void 0:I.data)==null?void 0:B.message)||((Q=(F=M.response)==null?void 0:F.data)==null?void 0:Q.detail)||"فشل تغيير كلمة المرور. تأكد من صحة كلمة المرور الحالية.";throw new Error(O)}T({current_password:"",new_password:"",confirm_password:""}),R({open:!0,message:"تم تغيير كلمة المرور بنجاح",severity:"success"})}catch(M){console.error("Error changing password:",M),R({open:!0,message:M.message||"فشل تغيير كلمة المرور",severity:"error"})}finally{S(!1)}}),P=I=>$(null,null,function*(){var F,Q;const B=I.target.files[0];if(B){if(!B.type.startsWith("image/")){R({open:!0,message:"يرجى اختيار ملف صورة صحيح",severity:"error"});return}if(B.size>5*1024*1024){R({open:!0,message:"حجم الصورة يجب أن يكون أقل من 5 ميجابايت",severity:"error"});return}try{S(!0);try{const M=yield fc.uploadProfilePicture(B);N(O=>ae(q({},O),{avatar:M.profile_picture})),a&&a(ae(q({},e),{profile_picture:M.profile_picture})),R({open:!0,message:"تم تحديث الصورة الشخصية بنجاح",severity:"success"})}catch(M){console.warn("Profile picture upload failed, using local preview:",M);const O=new FileReader;O.onload=C=>{N(X=>ae(q({},X),{avatar:C.target.result}))},O.readAsDataURL(B),R({open:!0,message:"تم تحديث الصورة محلياً (فشل في الحفظ على الخادم)",severity:"warning"})}}catch(M){console.error("Error uploading profile picture:",M),R({open:!0,message:((Q=(F=M.response)==null?void 0:F.data)==null?void 0:Q.message)||"فشل تحديث الصورة الشخصية",severity:"error"})}finally{S(!1)}}});return z.coursesEnrolled,bt,z.coursesCompleted,rn,z.certificates,Yr,z.lectures,nn,_?t(Qe,{maxWidth:"xl",sx:{py:4,direction:"rtl"},children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:t(Ke,{size:60})})}):s(Qe,{maxWidth:"xl",sx:{py:6,direction:"rtl"},children:[t(se,{container:!0,spacing:4,children:t(se,{item:!0,xs:12,children:t(n6,{direction:"up",in:!0,timeout:1e3,children:t(O9,{children:s(st,{sx:{p:4},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,pb:2,borderBottom:"2px solid",borderColor:he("#0e5181",.1)},children:[t(f,{variant:"h5",fontWeight:"bold",color:"#0e5181",children:"معلومات الملف الشخصي"}),t(te,{variant:h?"contained":"outlined",sx:{backgroundColor:h?"#0e5181":"transparent",color:h?"white":"#0e5181",borderColor:"#0e5181","&:hover":{backgroundColor:h?"#0a3d5f":he("#0e5181",.1)},px:3,py:1.5,borderRadius:2,fontWeight:"bold"},startIcon:h?t(Vo,{}):t(vr,{}),onClick:h?A:H,disabled:v,children:h?"حفظ التغييرات":"تعديل الملف الشخصي"})]}),s(se,{container:!0,spacing:4,children:[s(se,{item:!0,xs:12,md:4,children:[s(d,{sx:{textAlign:"center",mb:4,p:3,borderRadius:3,background:`linear-gradient(135deg, ${he("#0e5181",.02)} 0%, ${he("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:he("#0e5181",.08)},children:[s(d,{sx:{position:"relative",display:"inline-block"},children:[t(_t,{src:z.avatar,alt:`${z.firstName} ${z.lastName}`,sx:{width:140,height:140,border:"4px solid",borderColor:"#0e5181",mb:3,boxShadow:"0 8px 25px rgba(14, 81, 129, 0.2)"}}),h&&t(xe,{color:"error",sx:{position:"absolute",top:-8,right:-8,backgroundColor:"error.main",color:"white","&:hover":{backgroundColor:"error.dark"}},onClick:()=>N(I=>ae(q({},I),{avatar:Ac})),children:t(an,{fontSize:"small"})})]}),h&&t(te,{variant:"outlined",startIcon:t(i6,{}),onClick:()=>{var I;return(I=l.current)==null?void 0:I.click()},fullWidth:!0,sx:{mb:2,borderColor:"#0e5181",color:"#0e5181","&:hover":{borderColor:"#0a3d5f",backgroundColor:he("#0e5181",.05)}},children:"تحميل صورة"}),t("input",{ref:l,type:"file",accept:"image/*",style:{display:"none"},onChange:P})]}),s(d,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${he("#0e5181",.02)} 0%, ${he("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:he("#0e5181",.08)},children:[t(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:"تغيير كلمة المرور"}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"كلمة المرور الحالية",type:m?"text":"password",variant:"outlined",size:"small",value:W.current_password,onChange:I=>T(B=>ae(q({},B),{current_password:I.target.value})),sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{endAdornment:t(Pr,{position:"end",children:t(xe,{size:"small",onClick:()=>y(!m),edge:"end",sx:{color:"#0e5181"},children:m?t(Uu,{fontSize:"small"}):t(Ir,{fontSize:"small"})})})}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"كلمة المرور الجديدة",type:m?"text":"password",variant:"outlined",size:"small",value:W.new_password,onChange:I=>T(B=>ae(q({},B),{new_password:I.target.value})),sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}}})}),t(se,{item:!0,xs:12,children:t(te,{variant:"contained",fullWidth:!0,startIcon:v?t(Ke,{size:20}):t(Yu,{}),onClick:Y,disabled:v,sx:{backgroundColor:"#0e5181","&:hover":{backgroundColor:"#0a3d5f"},py:1.5,borderRadius:2,fontWeight:"bold"},children:"تغيير كلمة المرور"})})]})]})]}),s(se,{item:!0,xs:12,md:8,children:[s(d,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${he("#0e5181",.02)} 0%, ${he("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:he("#0e5181",.08),mb:4},children:[t(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:"المعلومات الشخصية"}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"اسم المستخدم",name:"username",value:(e==null?void 0:e.username)||"",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"الاسم الأول",name:"firstName",value:z.firstName,onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"الاسم المستعار",name:"nickname",value:z.nickname||"",onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"الدور",name:"role",value:n()==="instructor"?"مدرس":"طالب",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!0}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"اسم العائلة",name:"lastName",value:z.lastName,onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"الاسم المعروض للجميع",name:"displayName",value:z.displayName||`${z.firstName} ${z.lastName}`,onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})})]})]}),s(d,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${he("#0e5181",.02)} 0%, ${he("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:he("#0e5181",.08),mb:4},children:[t(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:"معلومات التواصل"}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"البريد الإلكتروني (مطلوب)",name:"email",type:"email",value:z.email,onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"واتساب",name:"whatsapp",value:z.whatsapp||"",onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"الموقع الإلكتروني",name:"website",value:z.website,onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"تيليجرام",name:"telegram",value:z.telegram||"",onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{fullWidth:!0,label:"رقم الجوال",name:"phone",value:z.phone,onChange:U,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})})]})]}),s(d,{sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${he("#0e5181",.02)} 0%, ${he("#e5978b",.02)} 100%)`,border:"1px solid",borderColor:he("#0e5181",.08)},children:[t(f,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,sx:{mb:3,color:"#0e5181"},children:"نبذة عن المستخدم"}),t(_e,{fullWidth:!0,label:"المعلومات السيرة الذاتية",name:"bio",value:z.bio,onChange:U,multiline:!0,rows:6,variant:"outlined",size:"small",placeholder:"أخبرنا عن نفسك، خبراتك، اهتماماتك...",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:he("#0e5181",.2)},"&:hover fieldset":{borderColor:he("#0e5181",.4)},"&.Mui-focused fieldset":{borderColor:"#0e5181"}}},InputProps:{readOnly:!h}})]})]})]})]})})})})}),t(Vw,{"aria-label":"edit",sx:{position:"fixed",bottom:24,right:24,backgroundColor:"#0e5181",color:"white","&:hover":{backgroundColor:"#0a3d5f",transform:"scale(1.1)"},boxShadow:"0 8px 25px rgba(14, 81, 129, 0.3)",transition:"all 0.3s ease"},onClick:H,children:t(vr,{})}),t(fn,{open:E.open,autoHideDuration:6e3,onClose:V,anchorOrigin:{vertical:"top",horizontal:"left"},children:t(Be,{onClose:V,severity:E.severity,sx:{direction:"rtl"},children:E.message})})]})},L9=ht`
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
`;ht`
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
`;const B9=()=>{const[e,n]=w.useState([]),[a,l]=w.useState([]),[u,p]=w.useState(!0),[h,x]=w.useState(""),[m,y]=w.useState(""),[v,S]=w.useState(""),[_,k]=w.useState(""),[E,R]=w.useState([]),[W,T]=w.useState({open:!1,message:"",severity:"success"}),[z,N]=w.useState(0),[G,J]=w.useState(10),H=nt();console.log("Categories state:",E),console.log("Categories length:",E.length),w.useEffect(()=>{$(null,null,function*(){try{p(!0);const C=yield tn.getCourses();console.log("Courses API response:",C);const X=Array.isArray(C)?C:C.results?C.results:C.data?C.data:[];console.log("Processed courses array:",X),X.length>0&&(console.log("Sample course data:",X[0]),console.log("Sample course category:",X[0].category),console.log("Sample course category_id:",X[0].category_id)),n(X),l(X)}catch(C){console.error("Error fetching courses:",C),T({open:!0,message:"خطأ في تحميل الكورسات",severity:"error"}),n([]),l([])}finally{p(!1)}})},[]),w.useEffect(()=>{$(null,null,function*(){try{console.log("Fetching categories...");const C=yield tn.getCategories();console.log("Categories API response:",C);const X=Array.isArray(C)?C:C.results?C.results:C.data?C.data:[];console.log("Processed categories array:",X),console.log("Categories length:",X.length),X.length>0&&console.log("Sample category data:",X[0]),R(X)}catch(C){console.error("Error fetching categories:",C),console.log("Trying fallback: extracting categories from courses...");const X=[],Z=new Map;a.forEach(j=>{console.log("Course category:",j.category),console.log("Course category_id:",j.category_id),console.log("Course category_name:",j.category_name);let re=null;j.category&&j.category.id?re=j.category:j.category_id&&j.category_name?re={id:j.category_id,name:j.category_name}:j.category&&typeof j.category=="object"&&(re=j.category),re&&re.id&&!Z.has(re.id)&&(Z.set(re.id,re),X.push(re))}),console.log("Fallback categories:",X),R(X)}})},[a]);const U=O=>{const C=O.target.value;console.log("Search input changed:",C),x(C)};w.useEffect(()=>{console.log("=== APPLYING FILTERS ==="),console.log("Search query:",h),console.log("Selected category:",m),console.log("Selected status:",v),console.log("Selected level:",_),console.log("All courses count:",a.length),console.log("Available categories:",E),console.log("========================");let O=[...a];h&&(O=O.filter(C=>{var de,fe,ce,ie,ge;const X=(de=C.title)==null?void 0:de.toLowerCase().includes(h.toLowerCase()),Z=(fe=C.description)==null?void 0:fe.toLowerCase().includes(h.toLowerCase()),j=(ce=C.category_name)==null?void 0:ce.toLowerCase().includes(h.toLowerCase()),re=(ge=(ie=C.category)==null?void 0:ie.name)==null?void 0:ge.toLowerCase().includes(h.toLowerCase());return X||Z||j||re}),console.log("After search filter:",O.length)),m&&(O=O.filter(C=>{var de,fe;const X=((de=C.category)==null?void 0:de.id)||C.category_id||((fe=C.category)==null?void 0:fe.pk)||C.category,Z=parseInt(X),j=parseInt(m),re=Z===j;return console.log(`Course ${C.id}: categoryId=${X} (${Z}), selected=${m} (${j}), match=${re}`),console.log("Course category object:",C.category),console.log("Course category_id:",C.category_id),console.log("Course category_name:",C.category_name),re}),console.log("After category filter:",O.length)),v&&(O=O.filter(C=>{const X=C.status===v;return console.log(`Course ${C.id}: status=${C.status}, selected=${v}, match=${X}`),X}),console.log("After status filter:",O.length)),_&&(O=O.filter(C=>{const X=C.level===_;return console.log(`Course ${C.id}: level=${C.level}, selected=${_}, match=${X}`),X}),console.log("After level filter:",O.length)),console.log("Final filtered count:",O.length),n(O)},[h,m,v,_,a]),w.useEffect(()=>{const O=setTimeout(()=>{},300);return()=>clearTimeout(O)},[h]);const A=()=>{console.log("Clearing all filters..."),x(""),y(""),S(""),k("")},V=(O,C)=>{N(C)},Y=O=>{J(parseInt(O.target.value,10)),N(0)},P=e,I=O=>{H(`/courses/${O}`)},B=()=>{H("/teacher/courses/new")},F=()=>{T(ae(q({},W),{open:!1}))},Q=()=>s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(bt,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"كورساتي"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إدارة الكورسات والمحتوى التعليمي"})]})]});if(u)return t(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",children:t(Ke,{})});const M=O=>$(null,null,function*(){if(window.confirm("هل أنت متأكد من حذف هذا الكورس؟"))try{T({open:!0,message:"تم حذف الكورس بنجاح",severity:"success"}),n(C=>C.filter(X=>X.id!==O)),l(C=>C.filter(X=>X.id!==O))}catch(C){console.error("Error deleting course:",C),T({open:!0,message:"خطأ في حذف الكورس",severity:"error"})}});return s(d,{sx:{minHeight:"100vh",bgcolor:"#f8f9fa",direction:"rtl"},children:[s(Qe,{maxWidth:"xl",sx:{py:3},children:[t(Q,{}),t(d,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:t(xe,{onClick:B,sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:t(Hr,{sx:{fontSize:28}})})}),t(Je,{sx:{mb:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:t(st,{sx:{p:2},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[t(_e,{label:"البحث",value:h,onChange:U,size:"small",placeholder:"ابحث في الكورسات...",sx:{minWidth:200,flex:"1 1 200px","& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}},InputProps:{startAdornment:t(Vi,{sx:{mr:1,color:"text.secondary",fontSize:"1.2rem"}})}}),s(At,{size:"small",sx:{minWidth:140},children:[t(Rt,{children:"التصنيف"}),s(Et,{value:m,onChange:O=>y(O.target.value),label:"التصنيف",sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),E.map(O=>t(Me,{value:O.id,children:O.name},O.id))]})]}),s(At,{size:"small",sx:{minWidth:120},children:[t(Rt,{children:"الحالة"}),s(Et,{value:v,onChange:O=>S(O.target.value),label:"الحالة",sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),t(Me,{value:"published",children:"منشور"}),t(Me,{value:"draft",children:"مسودة"})]})]}),t(Ce,{label:`${e.length} من ${a.length}`,color:e.length!==a.length?"secondary":"primary",size:"small",variant:"outlined",sx:{minWidth:"fit-content",fontWeight:"bold",borderRadius:2}}),t(xe,{onClick:A,disabled:!h&&!m&&!v,size:"small",sx:{width:36,height:36,borderRadius:2,backgroundColor:"rgba(0,0,0,0.04)",color:"text.secondary","&:hover":{backgroundColor:"rgba(244,67,54,0.1)",color:"error.main",transform:"scale(1.05)"},"&:disabled":{opacity:.4,cursor:"not-allowed"},transition:"all 0.2s ease"},title:"مسح الفلاتر",children:t($0,{sx:{fontSize:"1.1rem"}})})]})})}),P.length===0?t(ji,{in:!0,timeout:500,children:s(We,{elevation:0,sx:{p:{xs:3,md:6},textAlign:"center",bgcolor:"white",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",maxWidth:"600px",mx:"auto",my:4},children:[t(d,{sx:{width:120,height:120,mx:"auto",mb:3,position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:"linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(46, 204, 113, 0.1) 100%)",animation:`${L9} 2s infinite ease-in-out`}},children:t(bt,{color:"disabled",sx:{fontSize:60,position:"relative",top:"50%",transform:"translateY(-50%)"}})}),t(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:h?"لا توجد نتائج":"لا توجد كورسات مسجلة بعد"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3,maxWidth:"400px",mx:"auto"},children:h?"لم يتم العثور على نتائج مطابقة للبحث. جرب كلمات بحث أخرى.":'يمكنك البدء بإنشاء كورس جديد بالنقر على زر "إنشاء كورس جديد"'}),t(te,{variant:"contained",startIcon:t(Hr,{}),onClick:B,sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",color:"white",borderRadius:2,px:4,py:1,fontWeight:"bold",textTransform:"none",boxShadow:"0 4px 14px rgba(14, 81, 129, 0.3)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 20px rgba(14, 81, 129, 0.4)",transform:"translateY(-1px)"},transition:"all 0.3s ease"},children:"إنشاء كورس جديد"})]})}):s(Je,{sx:{borderRadius:3,boxShadow:2},children:[t(pi,{children:s(ui,{sx:{minWidth:650},"aria-label":"courses table",children:[t(hi,{children:s(Jt,{sx:{bgcolor:"#f8f9fa"},children:[t(ye,{sx:{fontWeight:"bold",fontSize:"1rem"},children:"الصورة"}),t(ye,{sx:{fontWeight:"bold",fontSize:"1rem"},children:"عنوان الكورس"}),t(ye,{sx:{fontWeight:"bold",fontSize:"1rem"},children:"التصنيف"}),t(ye,{sx:{fontWeight:"bold",fontSize:"1rem"},children:"الطلاب"}),t(ye,{sx:{fontWeight:"bold",fontSize:"1rem"},children:"التقييم"}),t(ye,{sx:{fontWeight:"bold",fontSize:"1rem"},children:"السعر"}),t(ye,{sx:{fontWeight:"bold",fontSize:"1rem",textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:P.slice(z*G,z*G+G).map(O=>{var C;return s(Jt,{hover:!0,sx:{"&:last-child td, &:last-child th":{border:0},cursor:"pointer","&:hover":{bgcolor:"rgba(14, 81, 129, 0.04)"}},onClick:()=>I(O.id),children:[t(ye,{children:t(d,{component:"img",src:O.image||"https://via.placeholder.com/120x90/3498db/ffffff?text=Course",alt:O.title,sx:{width:120,height:90,borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",objectFit:"cover",transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(0,0,0,0.2)"}}})}),t(ye,{children:s(d,{children:[t(f,{variant:"subtitle1",fontWeight:"bold",sx:{mb:.5},children:O.title}),t(f,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",maxWidth:200},children:O.short_description||O.description})]})}),t(ye,{children:t(Ce,{label:((C=O.category)==null?void 0:C.name)||O.category_name||"غير محدد",size:"small",sx:{fontWeight:"bold",bgcolor:"#3498db",color:"white",fontSize:"0.75rem"}})}),t(ye,{children:s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(Ui,{color:"action",fontSize:"small"}),t(f,{variant:"body2",children:O.total_enrollments||0})]})}),t(ye,{children:s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(si,{sx:{color:"#f39c12",fontSize:"1rem"}}),t(f,{variant:"body2",children:O.average_rating||0})]})}),t(ye,{children:t(f,{variant:"body2",color:O.is_free?"success.main":"primary.main",fontWeight:"bold",children:O.is_free?"مجاني":`$${O.price}`})}),t(ye,{children:s(d,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"center",minWidth:120},children:[s(d,{sx:{display:"flex",gap:1},children:[t(Xe,{title:"تعديل الكورس",children:t(xe,{size:"small",sx:{bgcolor:"rgba(124,77,255,0.1)","&:hover":{bgcolor:"rgba(124,77,255,0.2)",transform:"scale(1.1)"}},onClick:X=>{X.stopPropagation(),H(`/teacher/courses/${O.id}/edit`)},children:t(vr,{sx:{color:"#7c4dff",fontSize:"1rem"}})})}),t(Xe,{title:"تفاصيل الكورس",children:t(xe,{size:"small",sx:{bgcolor:"rgba(67,160,71,0.1)","&:hover":{bgcolor:"rgba(67,160,71,0.2)",transform:"scale(1.1)"}},onClick:X=>{X.stopPropagation(),H(`/courses/${O.id}`)},children:t(Ir,{sx:{color:"#43a047",fontSize:"1rem"}})})})]}),s(d,{sx:{display:"flex",gap:1},children:[t(Xe,{title:"وحدات الكورس",children:t(xe,{size:"small",sx:{bgcolor:"rgba(231,76,60,0.1)","&:hover":{bgcolor:"rgba(231,76,60,0.2)",transform:"scale(1.1)"}},onClick:X=>{X.stopPropagation(),H(`/teacher/courses/${O.id}/units`)},children:t(Lu,{sx:{color:"#e74c3c",fontSize:"1rem"}})})}),t(Xe,{title:"حذف الكورس",children:t(xe,{size:"small",sx:{bgcolor:"rgba(192,57,43,0.1)","&:hover":{bgcolor:"rgba(192,57,43,0.2)",transform:"scale(1.1)"}},onClick:X=>{X.stopPropagation(),M(O.id)},children:t(sn,{sx:{color:"#c0392b",fontSize:"1rem"}})})})]})]})})]},O.id)})})]})}),t(Xa,{rowsPerPageOptions:[5,10,25],component:"div",count:P.length,rowsPerPage:G,page:z,onPageChange:V,onRowsPerPageChange:Y,labelRowsPerPage:"عدد الصفوف في الصفحة:",labelDisplayedRows:({from:O,to:C,count:X})=>`${O}-${C} من ${X!==-1?X:`أكثر من ${C}`}`,sx:{direction:"rtl","& .MuiTablePagination-toolbar":{direction:"rtl"}}})]})]}),t(fn,{open:W.open,autoHideDuration:6e3,onClose:F,anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:F,severity:W.severity,sx:{width:"100%"},children:W.message})})]})},Dt={getQuizzes:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/assignments/quizzes/",{params:e})).data}catch(a){throw console.error("Error fetching quizzes:",a),a}}),getQuiz:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/quizzes/${e}/`)).data}catch(n){throw console.error("Error fetching quiz:",n),n}}),getQuizQuestions:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/quiz-questions/?quiz=${e}`)).data}catch(n){throw console.error("Error fetching quiz questions:",n),n}}),startQuizAttempt:e=>$(null,null,function*(){try{return(yield ee.post("/api/assignments/quiz-attempts/",{quiz:e})).data}catch(n){throw console.error("Error starting quiz attempt:",n),n}}),submitQuizAnswers:(e,n)=>$(null,null,function*(){try{return(yield ee.post("/api/assignments/quiz-user-answers/submit_answers/",{attempt:e,answers:n})).data}catch(a){throw console.error("Error submitting quiz answers:",a),a}}),finishQuizAttempt:e=>$(null,null,function*(){try{return(yield ee.patch(`/api/assignments/quiz-attempts/${e}/finish/`)).data}catch(n){throw console.error("Error finishing quiz attempt:",n),n}}),getQuizAttemptResult:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/quiz-attempts/${e}/`)).data}catch(n){throw console.error("Error fetching quiz attempt result:",n),n}}),getUserQuizAttempts:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/assignments/quiz-attempts/",{params:e})).data}catch(a){throw console.error("Error fetching user quiz attempts:",a),a}}),getQuizAttemptAnswers:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/quiz-user-answers/?attempt=${e}`)).data}catch(n){throw console.error("Error fetching quiz attempt answers:",n),n}}),getCourses:()=>$(null,null,function*(){try{return(yield ee.get("/api/courses/courses/")).data}catch(e){throw console.error("Error fetching courses:",e),e}}),getModules:e=>$(null,null,function*(){try{return(yield ee.get(`/api/courses/courses/${e}/modules/`)).data}catch(n){throw console.error("Error fetching modules:",n),n}}),createQuiz:e=>$(null,null,function*(){try{return(yield ee.post("/api/assignments/quizzes/",e)).data}catch(n){throw console.error("Error creating quiz:",n),n}}),updateQuiz:(e,n)=>$(null,null,function*(){try{return(yield ee.patch(`/api/assignments/quizzes/${e}/`,n)).data}catch(a){throw console.error("Error updating quiz:",a),a}}),deleteQuiz:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/assignments/quizzes/${e}/`)).data}catch(n){throw console.error("Error deleting quiz:",n),n}}),createQuizQuestion:e=>$(null,null,function*(){try{const n={quiz:parseInt(e.quiz),text:e.text.toString().trim(),question_type:e.question_type.toString(),points:parseInt(e.points)||1,explanation:e.explanation?e.explanation.toString():"",order:Math.max(0,parseInt(e.order)||0)};console.log("🚀 Creating quiz question with clean data:",JSON.stringify(n,null,2));const a=yield ee.post("/api/assignments/quiz-questions/",n,{headers:{"Content-Type":"application/json"}});return console.log("✅ Quiz question created successfully:",a.data),a.data}catch(n){throw console.error("❌ Error creating quiz question:",n),n.response&&n.response.data&&console.error("❌ Server error details:",n.response.data),n}}),updateQuizQuestion:(e,n)=>$(null,null,function*(){try{const a={text:n.text.toString().trim(),question_type:n.question_type.toString(),points:parseInt(n.points)||1,explanation:n.explanation?n.explanation.toString():"",order:Math.max(0,parseInt(n.order)||0)};console.log("🔄 Updating quiz question with clean data:",JSON.stringify(a,null,2));const l=yield ee.patch(`/api/assignments/quiz-questions/${e}/`,a,{headers:{"Content-Type":"application/json"}});return console.log("✅ Quiz question updated successfully:",l.data),l.data}catch(a){throw console.error("❌ Error updating quiz question:",a),a.response&&a.response.data&&console.error("❌ Server error details:",a.response.data),a}}),deleteQuizQuestion:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/assignments/quiz-questions/${e}/`)).data}catch(n){throw console.error("Error deleting quiz question:",n),n}}),createQuizAnswer:e=>$(null,null,function*(){try{return(yield ee.post("/api/assignments/quiz-answers/",e)).data}catch(n){throw console.error("Error creating quiz answer:",n),n}}),updateQuizAnswer:(e,n)=>$(null,null,function*(){try{return(yield ee.patch(`/api/assignments/quiz-answers/${e}/`,n)).data}catch(a){throw console.error("Error updating quiz answer:",a),a}}),deleteQuizAnswer:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/assignments/quiz-answers/${e}/`)).data}catch(n){throw console.error("Error deleting quiz answer:",n),n}}),getQuestionAnswers:e=>$(null,null,function*(){try{return(yield ee.get(`/api/assignments/quiz-answers/?question=${e}`)).data}catch(n){throw console.error("Error fetching question answers:",n),n}})};ht`
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
`;Uw(Je)(({theme:e})=>({height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease-in-out",cursor:"pointer",position:"relative",overflow:"hidden",borderRadius:"16px",bgcolor:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 40px rgba(0,0,0,0.15)","& .MuiCardMedia-root":{transform:"scale(1.05)"},"& .action-buttons":{opacity:1,transform:"translateY(0)"}},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:progress>=100?"linear-gradient(90deg, #43a047, #66bb6a)":"linear-gradient(90deg, #7c4dff, #43a047)",zIndex:1}}));Uw(hh)({height:160,position:"relative",transition:"transform 0.5s ease-in-out",bgcolor:"#ecf0f1","&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"60%",background:"linear-gradient(to top, rgba(0,0,0,0.4) 0%, transparent 100%)",zIndex:1}});const Zv=()=>t(ji,{in:!0,timeout:500,children:s(d,{sx:{textAlign:"center",py:8,color:"#0e5181",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t(a6,{sx:{fontSize:80,color:"#e5978b"}}),t(f,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"لا توجد كورسات مسجلة بعد"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"يمكنك تصفح الكورسات المتاحة والتسجيل فيها لتبدأ رحلة التعلم"}),t(te,{variant:"contained",size:"large",sx:{bgcolor:"#0e5181",borderRadius:3,px:5,py:1.5,fontWeight:700,"&:hover":{bgcolor:"#0a3d5f"}},children:"تصفح الكورسات"})]})}),P9=({course:e,onClick:n})=>{const[a,l]=w.useState(!1),[u,p]=w.useState([]),[h,x]=w.useState(!1),m=Math.min(Math.max(e.progress||0,0),100),y=e.total_lessons||e.lessons_count||20,v=Math.floor(m/100*y),S=e.total_duration||e.duration||"1h 34m 44s",_=()=>$(null,null,function*(){if(!a&&u.length===0){x(!0);try{const z=[],N=yield dr.getModules(e.id);for(const G of N){const H=(yield dr.getLessons({moduleId:G.id})).map(U=>({id:`lesson-${U.id}`,title:U.title,type:U.content_type||"video",duration:U.duration||null,completed:U.is_completed||!1,progress:U.progress_percentage||0,module_title:G.title,module_id:G.id,content_id:U.id,content_type:"lesson"}));z.push(...H)}try{const J=(yield Kt.getAssignments({course:e.id})).map(H=>{var U,A;return{id:`assignment-${H.id}`,title:H.title,type:"assignment",duration:H.due_date?new Date(H.due_date).toLocaleDateString("ar-EG"):null,completed:H.is_submitted||!1,progress:H.grade?Math.round(H.grade/H.max_grade*100):0,module_title:((U=H.module)==null?void 0:U.title)||"Assignment",module_id:(A=H.module)==null?void 0:A.id,content_id:H.id,content_type:"assignment",due_date:H.due_date,grade:H.grade,max_grade:H.max_grade}});z.push(...J)}catch(G){console.log("No assignments found for course:",e.id)}try{const J=(yield Dt.getQuizzes({course:e.id})).map(H=>{var U,A;return{id:`quiz-${H.id}`,title:H.title,type:"quiz",duration:H.time_limit?`${H.time_limit} min`:null,completed:H.is_completed||!1,progress:H.score?Math.round(H.score/H.max_score*100):0,module_title:((U=H.module)==null?void 0:U.title)||"Quiz",module_id:(A=H.module)==null?void 0:A.id,content_id:H.id,content_type:"quiz",score:H.score,max_score:H.max_score,attempts:H.attempts||0}});z.push(...J)}catch(G){console.log("No quizzes found for course:",e.id)}try{const J=(yield _i.getExams({course:e.id})).map(H=>{var U,A;return{id:`exam-${H.id}`,title:H.title,type:"exam",duration:H.duration?`${H.duration} min`:null,completed:H.is_completed||!1,progress:H.score?Math.round(H.score/H.max_score*100):0,module_title:((U=H.module)==null?void 0:U.title)||"Exam",module_id:(A=H.module)==null?void 0:A.id,content_id:H.id,content_type:"exam",score:H.score,max_score:H.max_score,attempts:H.attempts||0}});z.push(...J)}catch(G){console.log("No exams found for course:",e.id)}e.resources&&e.resources.length>0&&e.resources.forEach(G=>{z.unshift({id:`resource-${G.id}`,title:G.title||"Resources",type:"resource",duration:null,completed:!1,progress:0,module_title:"Resources",content_id:G.id,content_type:"resource",resource_url:G.file_url})}),z.sort((G,J)=>{if(G.module_id&&J.module_id&&G.module_id!==J.module_id)return G.module_id-J.module_id;const H={resource:0,lesson:1,assignment:2,quiz:3,exam:4};return(H[G.content_type]||5)-(H[J.content_type]||5)}),p(z)}catch(z){console.error("Error fetching course content:",z),p([{id:1,title:"Resources",type:"resource",duration:null,completed:!1,content_type:"resource"},{id:2,title:"Biological Chemistry",type:"video",duration:"5:36",completed:!1,content_type:"lesson"},{id:3,title:"Biological Chemistry Quiz",type:"quiz",duration:"30 min",completed:!1,progress:0,content_type:"quiz"},{id:4,title:"Carbohydrates",type:"video",duration:"8:56",completed:!1,content_type:"lesson"},{id:5,title:"Assignment 1",type:"assignment",duration:"2024-01-15",completed:!1,progress:0,content_type:"assignment"},{id:6,title:"Midterm Exam",type:"exam",duration:"120 min",completed:!1,progress:0,content_type:"exam"}])}finally{x(!1)}}l(!a)}),k=(z,N)=>{switch(N){case"lesson":switch(z==null?void 0:z.toLowerCase()){case"video":case"video_lesson":return t(li,{sx:{fontSize:16,color:"#666"}});case"text":case"article":return t(bt,{sx:{fontSize:16,color:"#666"}});default:return t(Ci,{sx:{fontSize:16,color:"#666"}})}case"assignment":return t(vr,{sx:{fontSize:16,color:"#666"}});case"quiz":return t(Hg,{sx:{fontSize:16,color:"#666"}});case"exam":return t(xr,{sx:{fontSize:16,color:"#666"}});case"resource":return t(Ks,{sx:{fontSize:16,color:"#666"}});default:return t(Ci,{sx:{fontSize:16,color:"#666"}})}},E=z=>{switch(z){case"lesson":return"#4caf50";case"assignment":return"#ff9800";case"quiz":return"#9c27b0";case"exam":return"#f44336";case"resource":return"#666";default:return"#666"}},R=z=>{switch(z){case"lesson":return"درس";case"assignment":return"واجب";case"quiz":return"كويز";case"exam":return"امتحان";case"resource":return"مورد";default:return"محتوى"}},W=z=>{switch(z.content_type){case"resource":return t(Nn,{sx:{fontSize:16}});case"lesson":return t(Ci,{sx:{fontSize:16}});case"assignment":return t(vr,{sx:{fontSize:16}});case"quiz":return t(Hg,{sx:{fontSize:16}});case"exam":return t(xr,{sx:{fontSize:16}});default:return t(Ci,{sx:{fontSize:16}})}},T=z=>{switch(z.content_type){case"resource":z.resource_url&&window.open(z.resource_url,"_blank");break;case"lesson":navigate(`/student/courses/${e.id}/lessons/${z.content_id}`);break;case"assignment":navigate(`/student/courses/${e.id}/assignments/${z.content_id}`);break;case"quiz":navigate(`/student/courses/${e.id}/quizzes/${z.content_id}`);break;case"exam":navigate(`/student/courses/${e.id}/exams/${z.content_id}`);break;default:n(e.id)}};return s(Je,{sx:{borderRadius:"16px",mb:3,overflow:"hidden",background:"white",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[s(d,{sx:{p:3,pb:2},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[s(d,{sx:{flex:1},children:[s(f,{variant:"h6",sx:{fontSize:"18px",fontWeight:600,color:"#333",mb:1},children:[t("span",{style:{color:"#999",marginRight:"8px"},children:"1"}),e.title]}),t(d,{sx:{mb:1},children:t(hr,{variant:"determinate",value:m,sx:{height:4,borderRadius:2,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{bgcolor:"#4caf50",borderRadius:2}}})}),s(f,{variant:"body2",sx:{color:"#666",fontSize:"14px",mb:2},children:[v," of ",y," lessons completed • ",S," runtime"]})]}),t(te,{variant:"contained",sx:{bgcolor:"#2196f3",color:"white",borderRadius:"8px",px:3,py:1,fontSize:"14px",fontWeight:600,textTransform:"none","&:hover":{bgcolor:"#1976d2"}},onClick:z=>{z.stopPropagation(),n(e.id)},children:"Start"})]}),t(d,{sx:{display:"flex",justifyContent:"center"},children:t(xe,{onClick:_,sx:{color:"#666","&:hover":{bgcolor:"rgba(0,0,0,0.04)"}},children:a?t(qw,{}):t(gh,{})})})]}),t(D0,{in:a,timeout:"auto",unmountOnExit:!0,children:t(d,{sx:{borderTop:"1px solid #f0f0f0"},children:h?t(d,{sx:{p:3,textAlign:"center"},children:t(Ke,{size:24})}):t(Fr,{sx:{p:0},children:u.map((z,N)=>s(ut.Fragment,{children:[s(zr,{sx:{py:1.5,px:3,"&:hover":{bgcolor:"rgba(0,0,0,0.02)"}},children:[t(Rr,{sx:{minWidth:40},children:t(Ai,{checked:z.completed,sx:{p:.5,"&.Mui-checked":{color:"#4caf50"}}})}),t(Rr,{sx:{minWidth:32},children:k(z.type,z.content_type)}),t(ir,{primary:s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(Ce,{label:R(z.content_type),size:"small",sx:{bgcolor:E(z.content_type),color:"white",fontSize:"11px",height:20,"& .MuiChip-label":{px:1}}}),t(f,{variant:"body2",sx:{fontSize:"14px",color:"#333"},children:z.title}),z.module_title&&s(f,{variant:"caption",sx:{fontSize:"11px",color:"#999",ml:1,fontStyle:"italic"},children:["(",z.module_title,")"]})]})}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[(z.content_type==="assignment"||z.content_type==="quiz"||z.content_type==="exam")&&z.progress!==void 0?s(Bt,{children:[t(f,{variant:"body2",sx:{color:"#666",fontSize:"12px"},children:z.content_type==="assignment"&&z.grade?`${z.grade}/${z.max_grade}`:z.duration||`${Math.round(z.progress)}%`}),t(d,{sx:{width:40,height:4,bgcolor:"#f0f0f0",borderRadius:2,overflow:"hidden"},children:t(d,{sx:{width:`${z.progress}%`,height:"100%",bgcolor:E(z.content_type),borderRadius:2}})})]}):t(f,{variant:"body2",sx:{color:"#666",fontSize:"12px"},children:z.content_type==="resource"?"تحميل الملف":z.duration||"--:--"}),t(xe,{size:"small",sx:{color:"#999"},onClick:G=>{G.stopPropagation(),T(z)},children:W(z)})]})]}),N<u.length-1&&t(Pt,{})]},z.id))})})})]})},j9=({course:e})=>s(Je,{sx:{display:"flex",alignItems:"center",borderRadius:"48px",minHeight:220,boxShadow:"0 8px 32px 0 rgba(229, 151, 139, 0.15)",mb:3,overflow:"hidden",background:"linear-gradient(120deg, #fdf2f2 0%, #fff 100%)",transition:"transform 0.25s, box-shadow 0.25s",px:4,py:2,border:"2px solid #e5978b","&:hover":{transform:"translateY(-8px) scale(1.03)",boxShadow:"0 16px 48px 0 rgba(229, 151, 139, 0.25)",border:"2px solid #e5978b"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #e5978b, #f0a8a0)",zIndex:1}},children:[s(st,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",pr:2},children:[t(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:t(Ce,{label:e.category,sx:{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181",fontWeight:700,fontSize:14}})}),t(f,{variant:"h6",fontWeight:800,color:"#0e5181",sx:{mb:.5,fontSize:22},children:e.title}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:1.5,minHeight:36,fontSize:16},children:e.description}),s(f,{variant:"caption",color:"text.secondary",sx:{mb:1,fontSize:15},children:[t(bt,{sx:{fontSize:20,color:"#e5978b",ml:.5}}),e.instructor]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mt:1},children:[t(d,{sx:{flexGrow:1},children:t(d,{sx:{height:12,bgcolor:"rgba(229, 151, 139, 0.1)",borderRadius:6,overflow:"hidden",position:"relative",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:t(d,{sx:{width:"100%",height:"100%",background:"linear-gradient(90deg, #e5978b 0%, #f0a8a0 100%)",borderRadius:6,transition:"width 0.8s ease-in-out",position:"relative","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.2) 100%)",borderRadius:6}}})})}),t(xr,{sx:{color:"#e5978b",fontSize:28}}),s(f,{variant:"body2",fontWeight:700,color:"#e5978b",sx:{fontSize:16,minWidth:"45px",textAlign:"center",background:"rgba(229, 151, 139, 0.1)",borderRadius:2,px:1,py:.5},children:[Math.round(100),"%"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mt:1},children:[s(f,{variant:"body2",fontWeight:700,color:"#e5978b",sx:{fontSize:16},children:["مكتمل - ",e.grade||"A"]}),e.completion_date&&s(f,{variant:"caption",color:"text.secondary",sx:{fontSize:14},children:["تم الإكمال في: ",new Date(e.completion_date).toLocaleDateString("ar-EG")]})]}),t(d,{sx:{display:"flex",alignItems:"center",gap:2,mt:3},children:t(te,{variant:"outlined",size:"large",startIcon:t(bt,{}),sx:{color:"#0e5181",borderColor:"#0e5181",borderRadius:3,fontWeight:700,fontSize:18,px:5,py:1.5,"&:hover":{bgcolor:"rgba(14, 81, 129, 0.1)",borderColor:"#0e5181"}},children:"عرض الشهادة"})})]}),t(hh,{component:"img",image:e.image,alt:e.title,sx:{width:180,height:180,objectFit:"cover",borderRadius:"40px",ml:2}})]}),Jv=()=>{const[e,n]=w.useState(0),[a,l]=w.useState(!0),[u,p]=w.useState(null),[h,x]=w.useState([]),[m,y]=w.useState([]),v=nt();w.useEffect(()=>{S()},[]);const S=()=>$(null,null,function*(){try{l(!0),p(null);const k=yield xn.getMyEnrolledCourses();x(k.enrolled_courses||[]),y(k.completed_courses||[])}catch(k){console.error("Error fetching courses:",k),p("حدث خطأ أثناء جلب الكورسات. يرجى المحاولة مرة أخرى.")}finally{l(!1)}}),_=k=>{v(`/student/courses/${k}`)};return a?t(d,{sx:{minHeight:"100vh",background:"linear-gradient(120deg, #ede7f6 0%, #fff 100%)",display:"flex",justifyContent:"center",alignItems:"center"},children:t(Ke,{size:60,sx:{color:"#7c4dff"}})}):u?t(d,{sx:{minHeight:"100vh",background:"linear-gradient(120deg, #ede7f6 0%, #fff 100%)",py:4},children:s(Qe,{maxWidth:"xl",children:[t(Be,{severity:"error",sx:{mb:3},children:u}),t(te,{variant:"contained",onClick:S,sx:{bgcolor:"#7c4dff"},children:"إعادة المحاولة"})]})}):s(d,{sx:{minHeight:"100vh",background:"linear-gradient(120deg, #ede7f6 0%, #fff 100%)",py:0,px:0},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(bt,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"كورساتي"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"استكشف، تعلم، وحقق أهدافك التعليمية بسهولة واحترافية"})]})]}),s(Qe,{maxWidth:"xl",children:[s(d,{sx:{display:"flex",justifyContent:"center",mb:4},children:[s(te,{variant:e===0?"contained":"outlined",onClick:()=>n(0),sx:{mx:1,bgcolor:e===0?"#0e5181":"#fff",color:e===0?"#fff":"#0e5181",borderColor:"#0e5181",fontWeight:700,borderRadius:3,px:4,py:1.2,boxShadow:e===0?"0 2px 12px 0 rgba(14, 81, 129, 0.2)":"none","&:hover":{bgcolor:"rgba(14, 81, 129, 0.1)",color:"#0e5181"}},children:["الكورسات المسجلة (",h.length,")"]}),s(te,{variant:e===1?"contained":"outlined",onClick:()=>n(1),sx:{mx:1,bgcolor:e===1?"#e5978b":"#fff",color:e===1?"#fff":"#e5978b",borderColor:"#e5978b",fontWeight:700,borderRadius:3,px:4,py:1.2,boxShadow:e===1?"0 2px 12px 0 rgba(229, 151, 139, 0.2)":"none","&:hover":{bgcolor:"rgba(229, 151, 139, 0.1)",color:"#e5978b"}},children:["الكورسات المكتملة (",m.length,")"]})]}),t(d,{children:e===0?h.length>0?h.map(k=>t(P9,{course:k,onClick:_},k.id)):t(Zv,{}):m.length>0?m.map(k=>t(j9,{course:k},k.id)):t(Zv,{})})]})]})},N9=oe(Qe)(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",textAlign:"center",padding:e.spacing(4)})),F9=()=>{const e=nt();return s(N9,{maxWidth:"md",children:[t(d,{sx:{width:200,height:200,mb:4},children:s("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"},children:[t("rect",{width:"500",height:"500",rx:"250",fill:"#F5F7FA"}),t("path",{d:"M250 150V300M300 225H200",stroke:"#4F46E5",strokeWidth:"20",strokeLinecap:"round"}),t("path",{d:"M250 350C245.5 350 242 346.5 242 342C242 337.5 245.5 334 250 334C254.5 334 258 337.5 258 342C258 346.5 254.5 350 250 350Z",fill:"#4F46E5"}),t("path",{d:"M250 100C172.525 100 110 162.525 110 240C110 317.475 172.525 380 250 380C327.475 380 390 317.475 390 240C390 162.525 327.475 100 250 100ZM250 350C189.725 350 140 300.275 140 240C140 179.725 189.725 130 250 130C310.275 130 360 179.725 360 240C360 300.275 310.275 350 250 350Z",fill:"#4F46E5"})]})}),t(f,{variant:"h1",component:"h1",sx:{fontSize:"6rem",fontWeight:700,mb:2},children:"404"}),t(f,{variant:"h4",component:"h2",gutterBottom:!0,children:"Oops! Page not found"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:4,maxWidth:"600px"},children:"The page you are looking for might have been removed, had its name changed, or is temporarily unavailable."}),s(d,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:[t(te,{variant:"contained",size:"large",onClick:()=>e(-1),sx:{px:4,py:1.5},children:"Go Back"}),t(te,{variant:"outlined",size:"large",onClick:()=>e("/"),sx:{px:4,py:1.5},children:"Go to Home"})]})]})},H9=()=>t(Qe,{maxWidth:"md",children:s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",textAlign:"center",p:3},children:[t(Yu,{sx:{fontSize:80,color:"error.main",mb:2}}),t(f,{variant:"h4",component:"h1",gutterBottom:!0,children:"غير مصرح بالوصول"}),t(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:"عذراً، ليس لديك الصلاحيات الكافية للوصول إلى هذه الصفحة."}),t(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"إذا كنت تعتقد أن هذا خطأ، يرجى التواصل مع مدير النظام."}),t(te,{variant:"contained",color:"primary",component:Qt,to:"/",sx:{mt:3},children:"العودة للصفحة الرئيسية"})]})}),V9=()=>{const{getUserRole:e}=Ka(),n=e();return w.useEffect(()=>{console.log(`Redirecting user with role: ${n}`)},[n]),t(Zs,{to:(()=>{switch(n){case"student":return"/student/dashboard";case"instructor":case"teacher":return"/teacher/dashboard";default:return"/login"}})(),replace:!0})},U9=()=>{const e=nt(),[n,a]=w.useState([]),[l,u]=w.useState(!0),[p,h]=w.useState(null),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,_]=w.useState(0),[k,E]=w.useState(10),[R,W]=w.useState(""),[T,z]=w.useState(""),[N,G]=w.useState(""),[J,H]=w.useState([]),[U,A]=w.useState([]),[V,Y]=w.useState([]);w.useEffect(()=>{$(null,null,function*(){yield I(),yield P()})},[]),w.useEffect(()=>{P()},[R,T,N]),w.useEffect(()=>{$(null,null,function*(){if(T)try{console.log("Fetching modules for selected course:",T);const j=yield Dt.getModules(T);let re=[];Array.isArray(j)?re=j:j&&typeof j=="object"&&(Array.isArray(j.modules)?re=j.modules:Array.isArray(j.results)?re=j.results:Array.isArray(j.data)&&(re=j.data)),console.log("Updated modules for selected course:",re),A(re)}catch(j){console.error("Error fetching modules for selected course:",j),A([])}else A([]);G("")})},[T]),w.useEffect(()=>{console.log("Current modules state:",U),console.log("Current selected course:",T),console.log("Current selected module:",N)},[U,T,N]);const P=()=>$(null,null,function*(){var Z;try{u(!0),h(null),console.log("Fetching quizzes...");const j={};R&&(j.search=R),T&&(j.course=T),N&&(j.module=N);const re=yield Dt.getQuizzes(j);console.log("Raw quiz data:",re);const de=Array.isArray(re)?re:re.results||re.data||[];if(console.log("Processed quiz data:",de),console.log("Number of quizzes:",de.length),de.forEach((fe,ce)=>{console.log(`Quiz ${ce+1}:`,{id:fe.id,title:fe.title,course:fe.course,module:fe.module,quiz_type:fe.quiz_type})}),a(de),Y(de),U.length===0&&de.length>0){const fe=[],ce=new Map;de.forEach(ie=>{ie.module&&!ce.has(ie.module.id)&&(ce.set(ie.module.id,ie.module),fe.push(ie.module))}),fe.length>0&&(A(fe),console.log("Updated modules from quizzes:",fe))}if(T&&U.length===0)try{const fe=yield Dt.getModules(T);let ce=[];Array.isArray(fe)?ce=fe:fe&&typeof fe=="object"&&(Array.isArray(fe.modules)?ce=fe.modules:Array.isArray(fe.results)?ce=fe.results:Array.isArray(fe.data)&&(ce=fe.data)),A(ce)}catch(fe){console.error("Error fetching modules for selected course:",fe)}}catch(j){console.error("Error fetching quizzes:",j),console.error("Error details:",(Z=j.response)==null?void 0:Z.data),h("حدث خطأ في تحميل الكويزات. يرجى المحاولة مرة أخرى.")}finally{u(!1)}}),I=()=>$(null,null,function*(){try{console.log("Starting to fetch filter options...");const Z=yield Dt.getCourses(),j=Array.isArray(Z)?Z:Z.results||Z.data||[];console.log("Fetched courses:",j),H(j);const re=[],de=new Map;console.log("Fetching modules for each course...");for(const fe of j)try{console.log(`Fetching modules for course: ${fe.title} (ID: ${fe.id})`);const ce=yield Dt.getModules(fe.id);let ie=[];Array.isArray(ce)?ie=ce:ce&&typeof ce=="object"&&(Array.isArray(ce.modules)?ie=ce.modules:Array.isArray(ce.results)?ie=ce.results:Array.isArray(ce.data)&&(ie=ce.data)),console.log(`Modules for course ${fe.title}:`,ie),ie.forEach(ge=>{de.has(ge.id)||(de.set(ge.id,ge),re.push(ge))})}catch(ce){console.error(`Error fetching modules for course ${fe.id}:`,ce)}console.log("Final all modules:",re),A(re)}catch(Z){console.error("Error fetching filter options:",Z)}}),B=Z=>$(null,null,function*(){try{yield Dt.deleteQuiz(Z),a(n.filter(j=>j.id!==Z)),m(!1),v(null)}catch(j){console.error("Error deleting quiz:",j),h("حدث خطأ في حذف الكويز. يرجى المحاولة مرة أخرى.")}}),F=Z=>{v(Z),m(!0)},Q=()=>{m(!1),v(null)},M=(Z,j)=>{_(j)},O=Z=>{E(parseInt(Z.target.value,10)),_(0)},C=()=>{W(""),z(""),G("")},X=Z=>({video:"فيديو",module:"وحدة",quick:"سريع"})[Z]||Z;return l?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})}):s(d,{sx:{p:{xs:1,md:3}},children:[console.log("Current modules state:",U),console.log("Current courses state:",J),s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(nr,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة الكويزات"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إنشاء وإدارة الكويزات التفاعلية وتقييم أداء الطلاب"})]})]}),s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(nr,{sx:{color:"#e5978b",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:n.length}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي الكويزات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(nr,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:n.filter(Z=>Z.is_active).length}),t(f,{variant:"caption",color:"text.secondary",children:"كويزات نشطة"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(nr,{sx:{color:"#1976d2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary.main",children:n.filter(Z=>Z.quiz_type==="video").length}),t(f,{variant:"caption",color:"text.secondary",children:"كويزات فيديو"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(nr,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:n.filter(Z=>Z.quiz_type==="module").length}),t(f,{variant:"caption",color:"text.secondary",children:"كويزات وحدة"})]})]})]}),t(d,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:t(xe,{onClick:()=>e("/teacher/quizzes/create"),sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:t(Hr,{sx:{fontSize:28}})})}),p&&t(Be,{severity:"error",sx:{mb:3},onClose:()=>h(null),children:p}),t(Je,{sx:{mb:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:t(st,{sx:{p:2},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[t(_e,{label:"البحث",value:R,onChange:Z=>W(Z.target.value),size:"small",placeholder:"ابحث في الكويزات...",sx:{minWidth:200,flex:"1 1 200px","& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}},InputProps:{startAdornment:t(Vi,{sx:{mr:1,color:"text.secondary",fontSize:"1.2rem"}})}}),s(At,{size:"small",sx:{minWidth:140},children:[t(Rt,{children:"الكورس"}),s(Et,{value:T,onChange:Z=>z(Z.target.value),label:"الكورس",sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),J.map(Z=>t(Me,{value:Z.id,children:Z.title},Z.id))]})]}),s(At,{size:"small",sx:{minWidth:140},children:[t(Rt,{children:"الوحدة"}),s(Et,{value:N,onChange:Z=>G(Z.target.value),label:"الوحدة",sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),U.map(Z=>t(Me,{value:Z.id,children:Z.name||Z.title},Z.id))]})]}),t(Ce,{label:`${n.length} من ${V.length}`,color:n.length!==V.length?"secondary":"primary",size:"small",variant:"outlined",sx:{minWidth:"fit-content",fontWeight:"bold",borderRadius:2}}),t(xe,{onClick:C,disabled:!R&&!T&&!N,size:"small",sx:{width:36,height:36,borderRadius:2,backgroundColor:"rgba(0,0,0,0.04)",color:"text.secondary","&:hover":{backgroundColor:"rgba(244,67,54,0.1)",color:"error.main",transform:"scale(1.05)"},"&:disabled":{opacity:.4,cursor:"not-allowed"},transition:"all 0.2s ease"},title:"مسح الفلاتر",children:t($0,{sx:{fontSize:"1.1rem"}})})]})})}),n.length===0&&!l?s(d,{sx:{textAlign:"center",py:8},children:[t(f,{variant:"h6",color:"text.secondary",mb:2,children:"لا توجد كويزات حتى الآن"}),t(te,{variant:"contained",startIcon:t(Hr,{}),onClick:()=>e("/teacher/quizzes/create"),sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"إنشاء أول كويز"})]}):s(We,{className:"assignments-table",sx:{width:"100%",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[t(pi,{sx:{maxHeight:600},children:s(ui,{stickyHeader:!0,children:[t(hi,{children:s(Jt,{sx:{backgroundColor:"#f8f9fa"},children:[t(ye,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"right",py:2},children:"عنوان الكويز"}),t(ye,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"right",py:2},children:"الكورس والوحدة"}),t(ye,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"center",py:2},children:"النوع"}),t(ye,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"center",py:2},children:"الحالة"}),t(ye,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"right",py:2},children:"الزمن ونسبة النجاح"}),t(ye,{sx:{fontWeight:800,color:"#2c3e50",borderBottom:"3px solid #0e5181",fontSize:"0.95rem",textAlign:"center",py:2},children:"الإجراءات"})]})}),t(fi,{children:n.slice(S*k,S*k+k).map(Z=>s(Jt,{sx:{"&:hover":{backgroundColor:"#f8f9fa",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},transition:"all 0.2s ease",borderBottom:"1px solid #f0f0f0"},children:[t(ye,{children:s(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[t(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50%",backgroundColor:"#f3e5f5",color:"#0e5181"},children:t(nr,{sx:{fontSize:18}})}),t(f,{variant:"subtitle1",fontWeight:700,color:"#2c3e50",sx:{fontSize:"1rem",lineHeight:1.2,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Z.title})]}),Z.description&&t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem",lineHeight:1.4,maxWidth:280,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",opacity:.8},children:Z.description})]})}),t(ye,{children:s(d,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[Z.course&&s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(d,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#0e5181"}}),t(f,{variant:"body2",fontWeight:600,color:"#2c3e50",sx:{fontSize:"0.9rem",lineHeight:1.2},children:Z.course.title})]}),Z.module&&s(d,{sx:{display:"flex",alignItems:"center",gap:1,ml:1},children:[t(d,{sx:{width:6,height:6,borderRadius:"50%",backgroundColor:"#9e9e9e"}}),t(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem",lineHeight:1.2,opacity:.8},children:Z.module.name||Z.module.title})]})]})}),t(ye,{children:t(d,{sx:{display:"flex",justifyContent:"center"},children:t(Ce,{label:X(Z.quiz_type),size:"small",color:"secondary",sx:{fontWeight:700,fontSize:"0.75rem",height:24,borderRadius:12,backgroundColor:"#f3e5f5",color:"#0e5181",border:"1px solid #e1bee7"}})})}),t(ye,{children:t(d,{sx:{display:"flex",justifyContent:"center"},children:t(Ce,{label:Z.is_active?"نشط":"غير نشط",size:"small",color:Z.is_active?"success":"warning",sx:{fontWeight:700,fontSize:"0.75rem",height:24,borderRadius:12,backgroundColor:Z.is_active?"#e8f5e8":"#fff3e0",color:Z.is_active?"#2e7d32":"#f57c00",border:Z.is_active?"1px solid #c8e6c9":"1px solid #ffcc80"}})})}),t(ye,{children:s(d,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[Z.time_limit&&s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(d,{sx:{width:16,height:16,borderRadius:"50%",backgroundColor:"#e3f2fd",display:"flex",alignItems:"center",justifyContent:"center"},children:t(d,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#1976d2"}})}),s(f,{variant:"body2",fontWeight:600,color:"#2c3e50",sx:{fontSize:"0.85rem",lineHeight:1.2},children:[Z.time_limit," دقيقة"]})]}),Z.pass_mark&&s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(d,{sx:{width:16,height:16,borderRadius:"50%",backgroundColor:"#e8f5e8",display:"flex",alignItems:"center",justifyContent:"center"},children:t(d,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#2e7d32"}})}),s(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem",lineHeight:1.2,opacity:.8},children:[Z.pass_mark,"% نجاح"]})]})]})}),t(ye,{children:s(d,{sx:{display:"flex",gap:1,justifyContent:"center",flexWrap:"wrap"},children:[t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",onClick:()=>e(`/teacher/quizzes/${Z.id}`),sx:{color:"#1976d2",backgroundColor:"#e3f2fd",width:32,height:32,"&:hover":{backgroundColor:"#bbdefb",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(Ir,{sx:{fontSize:16}})})}),t(Xe,{title:"تعديل الكويز",children:t(xe,{size:"small",onClick:()=>e(`/teacher/quizzes/${Z.id}/edit`),sx:{color:"#1976d2",backgroundColor:"#f3e5f5",width:32,height:32,"&:hover":{backgroundColor:"#e1bee7",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(vr,{sx:{fontSize:16}})})}),t(Xe,{title:"حذف الكويز",children:t(xe,{size:"small",onClick:()=>F(Z),sx:{color:"#d32f2f",backgroundColor:"#ffebee",width:32,height:32,"&:hover":{backgroundColor:"#ffcdd2",transform:"scale(1.1)"},transition:"all 0.2s ease"},children:t(sn,{sx:{fontSize:16}})})})]})})]},Z.id))})]})}),t(Xa,{rowsPerPageOptions:[5,10,25,50],component:"div",count:n.length,rowsPerPage:k,page:S,onPageChange:M,onRowsPerPageChange:O,labelRowsPerPage:"صفوف في الصفحة:",labelDisplayedRows:({from:Z,to:j,count:re})=>`${Z}-${j} من ${re}`,sx:{backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0"}})]}),s(yr,{open:x,onClose:Q,children:[t(Wr,{children:"تأكيد الحذف"}),t(br,{children:s(f,{children:['هل أنت متأكد من حذف الكويز "',y==null?void 0:y.title,'"؟ هذا الإجراء لا يمكن التراجع عنه.']})}),s($r,{children:[t(te,{onClick:Q,children:"إلغاء"}),t(te,{onClick:()=>B(y==null?void 0:y.id),color:"error",variant:"contained",children:"حذف"})]})]})]})},q9=[{value:"video",label:"فيديو كويز"},{value:"module",label:"كويز وحدة"},{value:"quick",label:"كويز سريع"}],Y9=[{value:"multiple_choice",label:"اختيار من متعدد"},{value:"true_false",label:"صح أو خطأ"},{value:"short_answer",label:"إجابة قصيرة"}],ew=()=>{const e=nt(),{quizId:n}=er(),a=!!n,[l,u]=w.useState(!1),[p,h]=w.useState(!1),[x,m]=w.useState(null),[y,v]=w.useState(null),[S,_]=w.useState([]),[k,E]=w.useState([]),[R,W]=w.useState({title:"",description:"",quiz_type:"video",module:"",course:"",time_limit:10,pass_mark:60,is_active:!0,questions:[]});w.useEffect(()=>{$(null,null,function*(){yield T(),a&&n&&(yield z())})},[a,n]),w.useEffect(()=>{R.course?N(R.course):E([])},[R.course]);const T=()=>$(null,null,function*(){try{u(!0),console.log("Fetching courses...");const F=yield Dt.getCourses();console.log("Courses data:",F);const Q=Array.isArray(F)?F:F.results||F.data||[];console.log("Processed courses:",Q),_(Q)}catch(F){console.error("Error fetching courses:",F),m("حدث خطأ في تحميل الكورسات")}finally{u(!1)}}),z=()=>$(null,null,function*(){var F,Q;try{u(!0);const M=yield Dt.getQuiz(n);console.log("Quiz data:",M);const O=(M.questions||[]).map(Z=>{if(console.log("Processing question:",Z),Z.question_type==="true_false"&&Z.answers){const j=Z.answers.find(re=>re.is_correct);if(console.log("True/false correct answer:",j),j){const re=j.text==="صح";return ae(q({},Z),{correct_answer:re?"true":"false"})}else return console.warn("No correct answer found for true/false question:",Z.id),ae(q({},Z),{correct_answer:null})}if(Z.question_type==="multiple_choice"&&Z.answers){console.log("Multiple choice answers:",Z.answers),console.log("Raw answer data:",JSON.stringify(Z.answers,null,2));const j=Z.answers.map((re,de)=>(console.log(`Processing answer ${de}:`,re),console.log(`Answer ${de} is_correct:`,re.is_correct,"Type:",typeof re.is_correct),ae(q({},re),{text:re.text||"",is_correct:!!re.is_correct,explanation:re.explanation||""})));return console.log("Processed multiple choice answers:",j),console.log("Correct answers found:",j.filter(re=>re.is_correct).length),ae(q({},Z),{answers:j})}return Z}),C=((F=M.course)==null?void 0:F.id)||M.course,X=((Q=M.module)==null?void 0:Q.id)||M.module;console.log("Course ID:",C,"Module ID:",X),W({title:M.title||"",description:M.description||"",quiz_type:M.quiz_type||"video",module:X||"",course:C||"",time_limit:M.time_limit||10,pass_mark:M.pass_mark||60,is_active:M.is_active!==void 0?M.is_active:!0,questions:O}),C&&(console.log("Fetching modules for course:",C),yield N(C))}catch(M){console.error("Error fetching quiz:",M),m("حدث خطأ في تحميل بيانات الكويز")}finally{u(!1)}}),N=F=>$(null,null,function*(){try{console.log("Fetching modules for course:",F);const Q=yield Dt.getModules(F);console.log("Raw modules data:",Q);let M=[];Array.isArray(Q)?M=Q:Q&&typeof Q=="object"&&(Array.isArray(Q.modules)?M=Q.modules:Array.isArray(Q.results)?M=Q.results:Array.isArray(Q.data)&&(M=Q.data)),console.log("Processed modules:",M),E(M)}catch(Q){console.error("Error fetching modules:",Q),E([])}}),G=F=>{const{name:Q,value:M,type:O,checked:C}=F.target;W(ae(q({},R),{[Q]:O==="checkbox"?C:M}))},J=()=>{W(ae(q({},R),{questions:[...R.questions,{text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1}],correct_answer:null}]}))},H=(F,Q,M)=>{const O=R.questions.map((C,X)=>{if(X===F){const Z=ae(q({},C),{[Q]:M});return Q==="question_type"&&(console.log(`Changing question ${F+1} type from ${C.question_type} to ${M}`),M==="true_false"?(console.log("Clearing answers for true/false question"),Z.answers=[],Z.correct_answer=null):M==="multiple_choice"?(console.log("Setting up multiple choice answers"),Z.answers=[{text:"",is_correct:!1}],Z.correct_answer=null):M==="short_answer"&&(console.log("Clearing answers for short answer question"),Z.answers=[],Z.correct_answer=null)),Z}return C});W(ae(q({},R),{questions:O}))},U=F=>{const Q=R.questions.map((M,O)=>O===F?ae(q({},M),{answers:[...M.answers,{text:"",is_correct:!1}]}):M);W(ae(q({},R),{questions:Q}))},A=(F,Q,M,O)=>{const C=R.questions.map((X,Z)=>Z===F?ae(q({},X),{answers:X.answers.map((j,re)=>re===Q?ae(q({},j),{[M]:O}):j)}):X);W(ae(q({},R),{questions:C}))},V=F=>{const Q=R.questions.filter((M,O)=>O!==F);W(ae(q({},R),{questions:Q}))},Y=(F,Q)=>{const M=R.questions.map((O,C)=>C===F?ae(q({},O),{answers:O.answers.filter((X,Z)=>Z!==Q)}):O);W(ae(q({},R),{questions:M}))},P=F=>{const Q={id:F.id||null,text:F.text||"",question_type:F.question_type||"multiple_choice",points:F.points||1,explanation:F.explanation||"",order:F.order||0};return F.question_type==="multiple_choice"?ae(q({},Q),{answers:Array.isArray(F.answers)?F.answers.map(M=>({id:M.id||null,text:M.text||"",is_correct:M.is_correct||!1,explanation:M.explanation||"",order:M.order||0})):[],correct_answer:null}):F.question_type==="true_false"?ae(q({},Q),{answers:[],correct_answer:F.correct_answer||null}):ae(q({},Q),{answers:[],correct_answer:null})},I=()=>{if(!R.title.trim())return m("يرجى إدخال عنوان الكويز"),!1;if(!R.course)return m("يرجى اختيار الكورس"),!1;if(R.questions.length===0)return m("يرجى إضافة سؤال واحد على الأقل"),!1;for(let F=0;F<R.questions.length;F++){const Q=R.questions[F];if(!Q.text.trim())return m(`يرجى إدخال نص السؤال رقم ${F+1}`),!1;if(Q.question_type==="multiple_choice"&&Q.answers.length<2)return m(`يرجى إضافة إجابتين على الأقل للسؤال رقم ${F+1}`),!1;if(Q.question_type==="multiple_choice"){for(let O=0;O<Q.answers.length;O++){const C=Q.answers[O];if(!C.text||!C.text.trim())return m(`يرجى إدخال نص الإجابة رقم ${O+1} للسؤال رقم ${F+1}`),!1}if(!Q.answers.some(O=>O.is_correct))return m(`يرجى تحديد إجابة صحيحة للسؤال رقم ${F+1}`),!1}if(Q.question_type==="true_false"&&!Q.correct_answer)return m(`يرجى اختيار الإجابة الصحيحة للسؤال رقم ${F+1}`),!1}return!0},B=()=>$(null,null,function*(){if(I())try{h(!0),m(null),v(null);const F=ae(q({},R),{questions:R.questions.map((O,C)=>ae(q({},P(O)),{order:C}))});console.log("🧹 Cleaned quiz data for saving:",F);const Q={title:R.title,description:R.description,quiz_type:R.quiz_type,course:R.course,module:R.module||null,time_limit:R.time_limit,pass_mark:R.pass_mark,is_active:R.is_active};if(console.log("Saving quiz data:",Q),!Q.course){m("يرجى اختيار الكورس");return}let M;if(a?M=yield Dt.updateQuiz(n,Q):M=yield Dt.createQuiz(Q),console.log("Saved quiz:",M),!M||!M.id)throw new Error("فشل في حفظ الكويز");if(R.questions.length>0){if(a)try{console.log("🔍 Checking for questions to delete...");const O=yield Dt.getQuizQuestions(M.id);console.log("📋 Raw existing questions response:",O);let C=[];if(Array.isArray(O)?C=O:O&&typeof O=="object"&&(Array.isArray(O.results)?C=O.results:Array.isArray(O.data)&&(C=O.data)),C.length>0){console.log("📋 Existing questions from database:",C.map(re=>({id:re.id,text:re.text}))),console.log("📋 Current questions in form:",R.questions.map(re=>({id:re.id,text:re.text})));const X=R.questions.filter(re=>re.id).map(re=>re.id),Z=C.map(re=>re.id);console.log("🆔 Current question IDs:",X),console.log("🆔 Existing question IDs:",Z);const j=Z.filter(re=>!X.includes(re));if(console.log("🗑️ Questions to delete:",j),j.length>0){console.log(`🗑️ Deleting ${j.length} removed questions...`);for(const re of j)try{yield Dt.deleteQuizQuestion(re),console.log(`✅ Deleted removed question ${re}`)}catch(de){console.error(`❌ Error deleting question ${re}:`,de)}}else console.log("✅ No questions to delete")}else console.log("📋 No existing questions found in database")}catch(O){console.error("❌ Error fetching existing questions:",O)}for(let O=0;O<F.questions.length;O++){const C=F.questions[O],X=P(C),Z={quiz:M.id,text:X.text.trim(),question_type:X.question_type,points:parseInt(X.points)||1,explanation:X.explanation||"",order:O};if(console.log("🔍 Question data being sent:",JSON.stringify(Z,null,2)),console.log("🔍 Quiz ID type:",typeof M.id),console.log("🔍 Quiz ID value:",M.id),console.log("🔍 Order value:",Z.order,"Type:",typeof Z.order),!Z.quiz)throw new Error(`معرف الكويز مطلوب: ${JSON.stringify(Z)}`);if(!Z.text||!Z.text.trim())throw new Error(`نص السؤال مطلوب: ${JSON.stringify(Z)}`);if(!Z.question_type)throw new Error(`نوع السؤال مطلوب: ${JSON.stringify(Z)}`);Z.points<1&&(Z.points=1),Z.order<0&&(Z.order=0),console.log("🔍 Final question data validation:",{quiz:Z.quiz,text:Z.text,question_type:Z.question_type,points:Z.points,order:Z.order,hasQuiz:!!Z.quiz,hasText:!!Z.text,hasQuestionType:!!Z.question_type,hasPoints:!!Z.points,hasOrder:Z.order>=0});let j;if(C.id?j=yield Dt.updateQuizQuestion(C.id,Z):j=yield Dt.createQuizQuestion(Z),console.log("Saved question:",j),!j||!j.id)throw new Error(`فشل في حفظ السؤال: ${JSON.stringify(j)}`);if(X.question_type==="multiple_choice"&&X.answers.length>0){if(console.log("Processing multiple choice answers for question:",j.id),console.log("All answers:",X.answers),C.id){console.log("Deleting existing answers for question:",C.id);try{const re=yield Dt.getQuestionAnswers(C.id);console.log("Raw existing answers response:",re);let de=[];if(Array.isArray(re)?de=re:re&&typeof re=="object"&&(Array.isArray(re.results)?de=re.results:Array.isArray(re.data)&&(de=re.data)),de.length>0){console.log("🗑️ Deleting existing answers:",de.map(fe=>({id:fe.id,text:fe.text})));for(const fe of de)try{yield Dt.deleteQuizAnswer(fe.id),console.log(`✅ Deleted existing answer ${fe.id}`)}catch(ce){console.error(`❌ Error deleting existing answer ${fe.id}:`,ce)}}else console.log("📋 No existing answers found for question:",C.id)}catch(re){console.error("❌ Error fetching existing answers:",re)}}for(let re=0;re<X.answers.length;re++){const de=X.answers[re];if(!de.text||!de.text.trim())throw new Error(`نص الإجابة مطلوب للإجابة رقم ${re+1}`);const fe={question:j.id,text:de.text.trim(),is_correct:de.is_correct||!1,explanation:de.explanation||"",order:re};console.log(`Creating answer ${re+1} with data:`,fe);try{yield Dt.createQuizAnswer(fe),console.log(`✅ Answer ${re+1} created successfully`)}catch(ce){throw console.error(`❌ Error creating answer ${re+1}:`,ce),new Error(`فشل في إنشاء الإجابة رقم ${re+1}: ${ce.message}`)}}}if(X.question_type==="true_false"&&X.correct_answer){if(console.log("Processing true/false answer for question:",j.id),console.log("Correct answer:",X.correct_answer),C.id){console.log("Deleting existing true/false answers for question:",C.id);try{const fe=yield Dt.getQuestionAnswers(C.id);console.log("Raw existing true/false answers response:",fe);let ce=[];if(Array.isArray(fe)?ce=fe:fe&&typeof fe=="object"&&(Array.isArray(fe.results)?ce=fe.results:Array.isArray(fe.data)&&(ce=fe.data)),ce.length>0){console.log("🗑️ Deleting existing true/false answers:",ce.map(ie=>({id:ie.id,text:ie.text})));for(const ie of ce)try{yield Dt.deleteQuizAnswer(ie.id),console.log(`✅ Deleted existing answer ${ie.id}`)}catch(ge){console.error(`❌ Error deleting existing answer ${ie.id}:`,ge)}}else console.log("📋 No existing true/false answers found for question:",C.id)}catch(fe){console.error("❌ Error fetching existing answers:",fe)}}const re=X.correct_answer==="true"?"صح":"خطأ",de={question:j.id,text:re,is_correct:!0,explanation:"",order:0};console.log("Creating correct answer with data:",de);try{yield Dt.createQuizAnswer(de),console.log(`✅ Correct answer "${re}" created successfully`)}catch(fe){throw console.error("❌ Error creating correct answer:",fe),new Error(`فشل في إنشاء الإجابة الصحيحة: ${fe.message}`)}}}}v(a?"تم تحديث الكويز بنجاح":"تم إنشاء الكويز بنجاح"),setTimeout(()=>{e("/teacher/quizzes")},1500)}catch(F){console.error("Error saving quiz:",F);let Q="حدث خطأ في حفظ الكويز. يرجى المحاولة مرة أخرى.";if(F.response&&F.response.data){const M=F.response.data;M.detail?Q=M.detail:M.message?Q=M.message:typeof M=="string"?Q=M:M.non_field_errors&&(Q=M.non_field_errors.join(", "))}else F.message&&(Q=F.message);m(Q)}finally{h(!1)}});return l?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})}):s(d,{sx:{maxWidth:900,mx:"auto",p:{xs:1,md:3}},children:[t(te,{startIcon:t(Gt,{}),sx:{mb:2},onClick:()=>e(-1),children:"العودة"}),s(We,{sx:{p:4,borderRadius:3,boxShadow:3},children:[t(f,{variant:"h5",fontWeight:700,mb:3,children:a?"تعديل الكويز":"إضافة كويز جديد"}),x&&t(Be,{severity:"error",sx:{mb:3},onClose:()=>m(null),children:x}),y&&t(Be,{severity:"success",sx:{mb:3},children:y}),s(jr,{spacing:2,children:[t(_e,{label:"عنوان الكويز",name:"title",value:R.title,onChange:G,fullWidth:!0,required:!0}),t(_e,{label:"وصف الكويز",name:"description",value:R.description,onChange:G,fullWidth:!0,multiline:!0,rows:2}),s(jr,{direction:{xs:"column",sm:"row"},spacing:2,children:[t(_e,{select:!0,label:"نوع الكويز",name:"quiz_type",value:R.quiz_type,onChange:G,sx:{minWidth:180},children:q9.map(F=>t(Me,{value:F.value,children:F.label},F.value))}),s(_e,{select:!0,label:"الكورس",name:"course",value:R.course,onChange:G,sx:{minWidth:180},required:!0,children:[t(Me,{value:"",children:"اختر الكورس"}),S.map(F=>t(Me,{value:F.id,children:F.title},F.id))]}),s(_e,{select:!0,label:"الوحدة",name:"module",value:R.module,onChange:G,sx:{minWidth:180},disabled:!R.course,children:[t(Me,{value:"",children:"اختر الوحدة (اختياري)"}),k.map(F=>t(Me,{value:F.id,children:F.name||F.title},F.id))]})]}),s(jr,{direction:{xs:"column",sm:"row"},spacing:2,children:[t(_e,{label:"الزمن بالدقائق",name:"time_limit",type:"number",value:R.time_limit,onChange:G,sx:{minWidth:180}}),t(_e,{label:"درجة النجاح (%)",name:"pass_mark",type:"number",value:R.pass_mark,onChange:G,sx:{minWidth:180}}),t(kt,{control:t(Nr,{checked:R.is_active,onChange:G,name:"is_active"}),label:"نشط"})]})]}),t(Pt,{sx:{my:4}}),s(d,{children:[s(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[t(f,{variant:"h6",fontWeight:700,children:"الأسئلة"}),t(te,{startIcon:t(Hr,{}),sx:{ml:2},onClick:J,children:"إضافة سؤال"})]}),t(jr,{spacing:3,children:R.questions.map((F,Q)=>s(We,{sx:{p:3,borderRadius:2,position:"relative"},children:[t(xe,{size:"small",color:"error",sx:{position:"absolute",top:8,left:8},onClick:()=>V(Q),children:t(sn,{})}),s(jr,{direction:{xs:"column",sm:"row"},spacing:2,mb:2,children:[t(_e,{label:"نص السؤال",value:F.text,onChange:M=>H(Q,"text",M.target.value),fullWidth:!0,required:!0}),t(_e,{select:!0,label:"نوع السؤال",value:F.question_type,onChange:M=>H(Q,"question_type",M.target.value),sx:{minWidth:180},children:Y9.map(M=>t(Me,{value:M.value,children:M.label},M.value))}),t(_e,{label:"الدرجة",type:"number",value:F.points,onChange:M=>H(Q,"points",M.target.value),sx:{minWidth:120}})]}),t(_e,{label:"شرح الإجابة (اختياري)",value:F.explanation||"",onChange:M=>H(Q,"explanation",M.target.value),fullWidth:!0,multiline:!0,rows:2,sx:{mb:2}}),F.question_type==="multiple_choice"&&s(d,{children:[t(f,{variant:"subtitle2",mb:1,children:"الإجابات"}),t(jr,{spacing:1,children:F.answers.map((M,O)=>s(jr,{direction:"row",spacing:1,alignItems:"center",children:[t(_e,{label:`إجابة ${O+1}`,value:M.text,onChange:C=>A(Q,O,"text",C.target.value),sx:{flex:1},required:!0}),t(Ce,{label:M.is_correct?"صحيحة":"خاطئة",color:M.is_correct?"success":"default",onClick:()=>A(Q,O,"is_correct",!M.is_correct),sx:{cursor:"pointer"}}),t(xe,{size:"small",color:"error",onClick:()=>Y(Q,O),disabled:F.answers.length<=1,children:t(sn,{})})]},O))}),t(te,{startIcon:t(Hr,{}),sx:{mt:1},onClick:()=>U(Q),children:"إضافة إجابة"})]}),F.question_type==="true_false"&&s(d,{children:[t(f,{variant:"subtitle2",mb:1,children:"اختر الإجابة الصحيحة"}),s(jr,{direction:"row",spacing:2,children:[t(Ce,{label:"صح",color:F.correct_answer==="true"?"success":"default",onClick:()=>H(Q,"correct_answer","true"),sx:{cursor:"pointer",px:3,py:1},variant:F.correct_answer==="true"?"filled":"outlined"}),t(Ce,{label:"خطأ",color:F.correct_answer==="false"?"success":"default",onClick:()=>H(Q,"correct_answer","false"),sx:{cursor:"pointer",px:3,py:1},variant:F.correct_answer==="false"?"filled":"outlined"})]})]})]},Q))})]}),s(d,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:[t(te,{variant:"outlined",onClick:()=>e(-1),disabled:p,children:"إلغاء"}),t(te,{variant:"contained",startIcon:p?t(Ke,{size:20}):t(Vo,{}),sx:{fontWeight:"bold",px:4},onClick:B,disabled:p,children:p?"جاري الحفظ...":a?"حفظ التعديلات":"حفظ الكويز"})]})]})]})},Q9=()=>{var E;const e=nt(),{quizId:n}=er(),[a,l]=w.useState(null),[u,p]=w.useState(!0),[h,x]=w.useState(null),[m,y]=w.useState(!1);w.useEffect(()=>{v()},[n]);const v=()=>$(null,null,function*(){try{p(!0),x(null);const R=yield Dt.getQuiz(n);l(R)}catch(R){console.error("Error fetching quiz:",R),x("حدث خطأ في تحميل بيانات الكويز")}finally{p(!1)}}),S=()=>$(null,null,function*(){try{yield Dt.deleteQuiz(n),y(!1),e("/teacher/quizzes")}catch(R){console.error("Error deleting quiz:",R),x("حدث خطأ في حذف الكويز")}}),_=R=>({video:"فيديو",module:"وحدة",quick:"سريع"})[R]||R,k=R=>({multiple_choice:"اختيار من متعدد",true_false:"صح أو خطأ",short_answer:"إجابة قصيرة"})[R]||R;return u?s(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"60vh",gap:3},children:[t(Ke,{size:60,thickness:4}),t(f,{variant:"h6",color:"text.secondary",children:"جاري تحميل بيانات الكويز..."})]}):h?s(d,{sx:{maxWidth:1e3,mx:"auto",p:{xs:2,md:4}},children:[t(te,{startIcon:t(Gt,{}),variant:"outlined",sx:{mb:3,borderRadius:2,px:3},onClick:()=>e(-1),children:"العودة للقائمة"}),s(We,{sx:{p:4,borderRadius:3,textAlign:"center",bgcolor:"error.50",border:"1px solid",borderColor:"error.200"},children:[t(Be,{severity:"error",sx:{mb:2},children:h}),t(te,{variant:"contained",onClick:()=>v(),sx:{mt:2},children:"إعادة المحاولة"})]})]}):a?s(d,{sx:{maxWidth:1e3,mx:"auto",p:{xs:2,md:4}},children:[t(d,{sx:{mb:3},children:t(te,{startIcon:t(Gt,{}),variant:"outlined",sx:{mb:2,borderRadius:2,px:3,"&:hover":{backgroundColor:"primary.light",color:"white"}},onClick:()=>e(-1),children:"العودة للقائمة"})}),s(We,{sx:{p:{xs:3,md:4},borderRadius:4,boxShadow:"0 8px 32px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)"},children:[t(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:3,flexWrap:"wrap"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2,flex:1,minWidth:0},children:[t(d,{sx:{p:1.5,borderRadius:3,bgcolor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:t(nr,{sx:{fontSize:32}})}),s(d,{sx:{minWidth:0,flex:1},children:[t(f,{variant:"h4",fontWeight:700,sx:{mb:.5,color:"text.primary",wordBreak:"break-word"},children:a.title}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t(Ce,{label:_(a.quiz_type),color:"secondary",size:"small",sx:{borderRadius:2}}),!a.is_active&&t(Ce,{label:"غير نشط",color:"warning",size:"small",sx:{borderRadius:2}})]})]})]})}),a.description&&t(We,{sx:{p:3,mb:3,borderRadius:3,bgcolor:"grey.50",border:"1px solid",borderColor:"grey.200"},children:t(f,{variant:"body1",color:"text.secondary",sx:{lineHeight:1.6},children:a.description})}),s(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"},gap:2,mb:4},children:[a.course&&s(We,{sx:{p:2.5,borderRadius:3,bgcolor:"primary.50",border:"1px solid",borderColor:"primary.200"},children:[t(f,{variant:"body2",color:"primary.dark",fontWeight:600,mb:.5,children:"الكورس"}),t(f,{variant:"body1",fontWeight:500,children:a.course.title})]}),a.module&&s(We,{sx:{p:2.5,borderRadius:3,bgcolor:"secondary.50",border:"1px solid",borderColor:"secondary.200"},children:[t(f,{variant:"body2",color:"secondary.dark",fontWeight:600,mb:.5,children:"الوحدة"}),t(f,{variant:"body1",fontWeight:500,children:a.module.name})]}),(a.time_limit||a.pass_mark)&&s(We,{sx:{p:2.5,borderRadius:3,bgcolor:"info.50",border:"1px solid",borderColor:"info.200"},children:[t(f,{variant:"body2",color:"info.dark",fontWeight:600,mb:.5,children:"الإعدادات"}),s(f,{variant:"body1",fontWeight:500,children:[a.time_limit&&`${a.time_limit} دقيقة`,a.time_limit&&a.pass_mark&&" | ",a.pass_mark&&`${a.pass_mark}% نجاح`]})]})]}),t(Pt,{sx:{my:3,borderColor:"grey.300"}}),s(d,{sx:{mb:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:4},children:[t(f,{variant:"h5",fontWeight:700,color:"text.primary",children:"الأسئلة والإجابات"}),t(Ce,{label:`${((E=a.questions)==null?void 0:E.length)||0} سؤال`,color:"primary",variant:"outlined",sx:{borderRadius:2}})]}),a.questions&&a.questions.length>0?t(jr,{spacing:4,children:a.questions.map((R,W)=>s(We,{sx:{p:4,borderRadius:4,bgcolor:"white",border:"1px solid",borderColor:"grey.200",boxShadow:"0 4px 16px rgba(0,0,0,0.08)","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",transform:"translateY(-2px)",transition:"all 0.3s ease-in-out"}},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[t(d,{sx:{minWidth:50,height:50,borderRadius:"50%",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"1.2rem",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"},children:W+1}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t(Ce,{label:k(R.question_type),size:"small",color:"secondary",sx:{borderRadius:2,fontWeight:600}}),t(Ce,{label:`${R.points} درجة`,size:"small",color:"info",variant:"outlined",sx:{borderRadius:2,fontWeight:600}})]})]}),t(d,{sx:{mb:3},children:t(f,{variant:"h6",fontWeight:600,sx:{lineHeight:1.6,wordBreak:"break-word",color:"text.primary",fontSize:"1.1rem"},children:R.text})}),R.explanation&&s(We,{sx:{p:3,mb:3,borderRadius:3,bgcolor:"warning.50",border:"1px solid",borderColor:"warning.200",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:0,left:0,width:"4px",height:"100%",bgcolor:"warning.main"}}),t(f,{variant:"body2",color:"warning.dark",fontWeight:600,mb:1,children:"💡 شرح السؤال:"}),t(f,{variant:"body1",color:"text.secondary",sx:{lineHeight:1.6},children:R.explanation})]}),R.answers&&R.answers.length>0&&s(d,{children:[s(f,{variant:"h6",color:"text.primary",fontWeight:600,mb:2,sx:{display:"flex",alignItems:"center",gap:1},children:[t(d,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"primary.main"}}),"الإجابات المتاحة:"]}),t(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr"},gap:2},children:R.answers.map((T,z)=>s(We,{sx:{p:2.5,borderRadius:3,border:"2px solid",borderColor:T.is_correct?"success.main":"grey.300",bgcolor:T.is_correct?"success.50":"grey.50",position:"relative",overflow:"hidden",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:[T.is_correct&&t(d,{sx:{position:"absolute",top:0,right:0,width:0,height:0,borderStyle:"solid",borderWidth:"0 30px 30px 0",borderColor:"transparent success.main transparent transparent"}}),s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[s(d,{sx:{minWidth:32,height:32,borderRadius:"50%",bgcolor:T.is_correct?"success.main":"grey.400",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.9rem"},children:[String.fromCharCode(65+z)," "]}),t(f,{variant:"body1",fontWeight:T.is_correct?600:500,sx:{color:T.is_correct?"success.dark":"text.primary",lineHeight:1.4},children:T.text})]}),T.is_correct&&t(d,{sx:{position:"absolute",top:8,right:8,display:"flex",alignItems:"center",gap:.5},children:t(f,{variant:"caption",sx:{color:"success.main",fontWeight:700,fontSize:"0.7rem"},children:"✓ الإجابة الصحيحة"})})]},T.id||z))})]})]},R.id||W))}):s(We,{sx:{p:8,borderRadius:4,bgcolor:"grey.50",border:"2px dashed",borderColor:"grey.300",textAlign:"center"},children:[t(d,{sx:{width:80,height:80,borderRadius:"50%",bgcolor:"grey.300",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:t(f,{variant:"h4",color:"grey.500",children:"?"})}),t(f,{variant:"h6",color:"text.secondary",mb:2,children:"لا توجد أسئلة"}),t(f,{variant:"body1",color:"text.secondary",sx:{maxWidth:400,mx:"auto"},children:"هذا الكويز لا يحتوي على أي أسئلة بعد. يمكنك إضافة أسئلة من خلال تعديل الكويز."})]})]}),s(d,{sx:{display:"flex",justifyContent:"flex-end",gap:2,pt:3,borderTop:"1px solid",borderColor:"grey.200"},children:[t(te,{variant:"outlined",startIcon:t(vr,{}),onClick:()=>e(`/teacher/quizzes/${a.id}/edit`),sx:{borderRadius:2,px:4,py:1.5,fontWeight:600},children:"تعديل الكويز"}),t(te,{variant:"contained",color:"error",startIcon:t(sn,{}),onClick:()=>y(!0),sx:{borderRadius:2,px:4,py:1.5,fontWeight:600},children:"حذف الكويز"})]})]}),s(yr,{open:m,onClose:()=>y(!1),PaperProps:{sx:{borderRadius:3,maxWidth:500,width:"90%"}},children:[t(Wr,{sx:{pb:1,borderBottom:"1px solid",borderColor:"grey.200"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{p:1,borderRadius:2,bgcolor:"error.main",color:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:t(sn,{sx:{fontSize:24}})}),t(f,{variant:"h6",fontWeight:600,children:"تأكيد حذف الكويز"})]})}),s(br,{sx:{pt:3},children:[t(f,{variant:"body1",sx:{mb:2,lineHeight:1.6},children:"هل أنت متأكد من حذف الكويز:"}),t(We,{sx:{p:2,mb:2,borderRadius:2,bgcolor:"error.50",border:"1px solid",borderColor:"error.200"},children:s(f,{variant:"h6",fontWeight:600,color:"error.dark",children:['"',a.title,'"']})}),t(f,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.5},children:"⚠️ تحذير: هذا الإجراء لا يمكن التراجع عنه. سيتم حذف الكويز وجميع أسئلته وإجاباته نهائياً."})]}),s($r,{sx:{p:3,pt:2,gap:2},children:[t(te,{onClick:()=>y(!1),variant:"outlined",sx:{borderRadius:2,px:3,py:1,fontWeight:600},children:"إلغاء"}),t(te,{onClick:S,color:"error",variant:"contained",startIcon:t(sn,{}),sx:{borderRadius:2,px:3,py:1,fontWeight:600},children:"حذف نهائياً"})]})]})]}):s(d,{sx:{maxWidth:1e3,mx:"auto",p:{xs:2,md:4}},children:[t(te,{startIcon:t(Gt,{}),variant:"outlined",sx:{mb:3,borderRadius:2,px:3},onClick:()=>e(-1),children:"العودة للقائمة"}),s(We,{sx:{p:6,borderRadius:3,textAlign:"center",bgcolor:"warning.50",border:"1px solid",borderColor:"warning.200"},children:[t(Be,{severity:"warning",sx:{mb:2},children:"الكويز غير موجود"}),t(f,{variant:"body1",color:"text.secondary",children:"قد يكون الكويز قد تم حذفه أو لا يوجد لديك صلاحية للوصول إليه"})]})]})},G9=()=>{const e=nt(),[n,a]=w.useState([]),[l,u]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(null),[y,v]=w.useState(!1),[S,_]=w.useState(null),[k,E]=w.useState({search:"",course:"",module:"",isFinal:"",isActive:""}),[R,W]=w.useState([]),[T,z]=w.useState([]),[N,G]=w.useState([]),[J,H]=w.useState(!1);w.useEffect(()=>{U(),A()},[]),w.useEffect(()=>{Y()},[n,k]),w.useEffect(()=>{const M=setTimeout(()=>{Y()},300);return()=>clearTimeout(M)},[k.search]),w.useEffect(()=>{if(k.course){const M=T.filter(O=>O.course===parseInt(k.course));G(M),k.module&&(M.some(C=>C.id===parseInt(k.module))||E(C=>ae(q({},C),{module:""})))}else G(T)},[k.course,T]);const U=()=>$(null,null,function*(){try{h(!0),m(null);const M=yield _i.getExams();a(M.results||M)}catch(M){console.error("Error fetching exams:",M),m("حدث خطأ في تحميل الامتحانات")}finally{h(!1)}}),A=()=>$(null,null,function*(){try{H(!0);const M=yield tn.getMyCourses(),O=M.results||M;W(O),yield V(),console.log("Fetched courses:",O.length)}catch(M){console.error("Error fetching courses:",M);try{const O=yield tn.getCourses(),C=O.results||O;W(C),yield V(),console.log("Fetched public courses:",C.length)}catch(O){console.error("Error fetching public courses:",O)}}finally{H(!1)}}),V=()=>$(null,null,function*(){try{const M=yield ee.get("/content/modules/"),O=M.data.results||M.data;z(O),G(O),console.log("Fetched modules from content API:",O.length)}catch(M){console.error("Error fetching modules:",M),z([]),G([])}}),Y=()=>{let M=[...n];k.search&&(M=M.filter(O=>{var C;return O.title.toLowerCase().includes(k.search.toLowerCase())||((C=O.description)==null?void 0:C.toLowerCase().includes(k.search.toLowerCase()))})),k.course&&(M=M.filter(O=>{var C;return((C=O.course)==null?void 0:C.id)===parseInt(k.course)})),k.module&&(M=M.filter(O=>{var C;return((C=O.module)==null?void 0:C.id)===parseInt(k.module)})),k.isFinal!==""&&(M=M.filter(O=>O.is_final===(k.isFinal==="true"))),k.isActive!==""&&(M=M.filter(O=>O.is_active===(k.isActive==="true"))),u(M)},P=(M,O)=>{E(C=>ae(q({},C),{[M]:O}))},I=()=>{E({search:"",course:"",module:"",isFinal:"",isActive:""})},B=M=>$(null,null,function*(){try{yield _i.deleteExam(M),a(n.filter(O=>O.id!==M)),u(l.filter(O=>O.id!==M)),v(!1),_(null)}catch(O){console.error("Error deleting exam:",O),m("حدث خطأ في حذف الامتحان")}}),F=M=>{_(M),v(!0)},Q=M=>M?new Date(M).toLocaleDateString("ar-EG"):"---";return p?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})}):s(d,{sx:{p:{xs:1,md:3}},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(Yr,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة الامتحانات الشاملة"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إنشاء وإدارة الامتحانات الشاملة ومتابعة أداء الطلاب"})]})]}),s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Yr,{sx:{color:"#0e5181",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:n.length}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي الامتحانات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Yr,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:n.filter(M=>M.is_active).length}),t(f,{variant:"caption",color:"text.secondary",children:"امتحانات نشطة"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Yr,{sx:{color:"#1976d2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary.main",children:n.filter(M=>M.is_final).length}),t(f,{variant:"caption",color:"text.secondary",children:"امتحانات نهائية"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Yr,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:n.filter(M=>!M.is_final).length}),t(f,{variant:"caption",color:"text.secondary",children:"امتحانات عادية"})]})]})]}),t(d,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:t(xe,{onClick:()=>e("/teacher/exams/create"),sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:t(Hr,{sx:{fontSize:28}})})}),x&&t(Be,{severity:"error",sx:{mb:2},children:x}),t(Je,{sx:{mb:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:t(st,{sx:{p:2},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[t(_e,{label:"البحث",value:k.search,onChange:M=>P("search",M.target.value),size:"small",placeholder:"ابحث في الامتحانات...",sx:{minWidth:200,flex:"1 1 200px","& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white"}},InputProps:{startAdornment:t(Vi,{sx:{mr:1,color:"text.secondary",fontSize:"1.2rem"}})}}),s(At,{size:"small",sx:{minWidth:140},children:[t(Rt,{children:"الدورة"}),s(Et,{value:k.course,onChange:M=>P("course",M.target.value),label:"الدورة",disabled:J,sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),R.length>0?R.map(M=>t(Me,{value:M.id,children:M.title},M.id)):t(Me,{disabled:!0,children:J?"جاري التحميل...":"لا توجد دورات متاحة"})]})]}),s(At,{size:"small",sx:{minWidth:140},children:[t(Rt,{children:"الوحدة"}),s(Et,{value:k.module,onChange:M=>P("module",M.target.value),label:"الوحدة",disabled:J,sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),N.length>0?N.map(M=>t(Me,{value:M.id,children:M.name||M.title},M.id)):t(Me,{disabled:!0,children:J?"جاري التحميل...":k.course?"لا توجد وحدات لهذه الدورة":"لا توجد وحدات متاحة"})]})]}),s(At,{size:"small",sx:{minWidth:120},children:[t(Rt,{children:"النوع"}),s(Et,{value:k.isFinal,onChange:M=>P("isFinal",M.target.value),label:"النوع",sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),t(Me,{value:"true",children:"نهائي"}),t(Me,{value:"false",children:"عادي"})]})]}),s(At,{size:"small",sx:{minWidth:120},children:[t(Rt,{children:"الحالة"}),s(Et,{value:k.isActive,onChange:M=>P("isActive",M.target.value),label:"الحالة",sx:{borderRadius:2,backgroundColor:"white"},children:[t(Me,{value:"",children:"الكل"}),t(Me,{value:"true",children:"نشط"}),t(Me,{value:"false",children:"معطل"})]})]}),t(Ce,{label:`${l.length} من ${n.length}`,color:l.length!==n.length?"secondary":"primary",size:"small",variant:"outlined",sx:{minWidth:"fit-content",fontWeight:"bold",borderRadius:2}}),t(xe,{onClick:I,disabled:!k.search&&!k.course&&!k.module&&!k.isFinal&&!k.isActive,size:"small",sx:{width:36,height:36,borderRadius:2,backgroundColor:"rgba(0,0,0,0.04)",color:"text.secondary","&:hover":{backgroundColor:"rgba(244,67,54,0.1)",color:"error.main",transform:"scale(1.05)"},"&:disabled":{opacity:.4,cursor:"not-allowed"},transition:"all 0.2s ease"},title:"مسح الفلاتر",children:t($0,{sx:{fontSize:"1.1rem"}})})]})})}),t(We,{elevation:2,sx:{borderRadius:3},children:t(pi,{children:s(ui,{children:[t(hi,{children:s(Jt,{children:[t(ye,{children:"العنوان"}),t(ye,{children:"الدورة"}),t(ye,{children:"الوحدة"}),t(ye,{children:"نهائي؟"}),t(ye,{children:"الحالة"}),t(ye,{children:"تاريخ الإنشاء"}),t(ye,{align:"center",children:"إجراءات"})]})}),t(fi,{children:l.length===0?t(Jt,{children:t(ye,{colSpan:7,align:"center",children:t(f,{variant:"body1",color:"text.secondary",children:n.length===0?"لا توجد امتحانات متاحة":"لا توجد نتائج تطابق الفلاتر المحددة"})})}):l.map(M=>{var O,C;return s(Jt,{hover:!0,children:[t(ye,{children:M.title}),t(ye,{children:((O=M.course)==null?void 0:O.title)||"---"}),t(ye,{children:((C=M.module)==null?void 0:C.name)||"---"}),t(ye,{children:M.is_final?t(Ce,{label:"نهائي",color:"success",size:"small"}):t(Ce,{label:"عادي",color:"info",size:"small"})}),t(ye,{children:M.is_active?t(Ce,{label:"نشط",color:"primary",size:"small"}):t(Ce,{label:"معطل",color:"default",size:"small"})}),t(ye,{children:Q(M.created_at)}),s(ye,{align:"center",children:[t(Xe,{title:"عرض التفاصيل",children:t(xe,{onClick:()=>e(`/teacher/exams/${M.id}`),children:t(Ir,{color:"primary"})})}),t(Xe,{title:"تعديل",children:t(xe,{onClick:()=>e(`/teacher/exams/${M.id}/edit`),children:t(vr,{color:"warning"})})}),t(Xe,{title:"حذف",children:t(xe,{onClick:()=>F(M),children:t(sn,{color:"error"})})})]})]},M.id)})})]})})}),s(yr,{open:y,onClose:()=>v(!1),children:[t(Wr,{children:"تأكيد الحذف"}),t(br,{children:s(f,{children:['هل أنت متأكد من حذف الامتحان "',S==null?void 0:S.title,'"؟ هذا الإجراء لا يمكن التراجع عنه.']})}),s($r,{children:[t(te,{onClick:()=>v(!1),children:"إلغاء"}),t(te,{onClick:()=>B(S==null?void 0:S.id),color:"error",variant:"contained",children:"حذف"})]})]})]})},tw=({isEdit:e=!1})=>{var H,U;const n=nt(),{examId:a}=er(),[l,u]=w.useState({title:"",description:"",course:"",module:"",time_limit:"",pass_mark:60,total_points:100,is_final:!1,is_active:!0,allow_multiple_attempts:!1,max_attempts:1,show_answers_after:!1,randomize_questions:!1,start_date:"",end_date:""}),[p,h]=w.useState([]),[x,m]=w.useState([]),[y,v]=w.useState(!1),[S,_]=w.useState(!1),[k,E]=w.useState(null);w.useEffect(()=>{R(),e&&a&&T()},[e,a]),w.useEffect(()=>{console.log("Form data changed:",l)},[l]),w.useEffect(()=>{console.log("Modules changed:",x)},[x]),w.useEffect(()=>{console.log("Course changed to:",l.course),l.course?W(l.course):(console.log("No course selected, clearing modules"),m([]))},[l.course]);const R=()=>$(null,null,function*(){try{console.log("Fetching courses...");const A=yield tn.getCourses();console.log("Courses response:",A);let V=[];Array.isArray(A)?V=A:A&&Array.isArray(A.results)?V=A.results:A&&typeof A=="object"&&(V=A.results||A.courses||[]),Array.isArray(V)||(console.warn("Courses is not an array, converting to empty array:",V),V=[]),console.log("Final courses list:",V),h(V)}catch(A){console.error("Error fetching courses:",A),E("حدث خطأ في تحميل الدورات"),h([])}}),W=A=>$(null,null,function*(){try{console.log("Fetching modules for course:",A);let V;try{V=yield tn.getCourseModules(A),console.log("Modules response from getCourseModules:",V)}catch(P){console.log("getCourseModules failed, trying getCourse:",P);const I=yield tn.getCourse(A);console.log("Course response:",I),V={results:I.modules||[]}}let Y=[];Array.isArray(V)?Y=V:V&&Array.isArray(V.results)?Y=V.results:V&&Array.isArray(V.modules)?Y=V.modules:V&&typeof V=="object"&&(Y=V.modules||V.results||[]),Array.isArray(Y)||(console.warn("Modules is not an array, converting to empty array:",Y),Y=[]),console.log("Final modules list:",Y),m(Y)}catch(V){console.error("Error fetching modules:",V),m([])}}),T=()=>$(null,null,function*(){var A,V,Y,P,I,B,F,Q,M,O;try{v(!0);const C=yield _i.getExam(a);console.log("Fetched exam data:",C);const X=((V=(A=C.course)==null?void 0:A.id)==null?void 0:V.toString())||((Y=C.course)==null?void 0:Y.toString())||"",Z=((I=(P=C.module)==null?void 0:P.id)==null?void 0:I.toString())||((B=C.module)==null?void 0:B.toString())||"";u({title:C.title||"",description:C.description||"",course:X,module:Z,time_limit:((F=C.time_limit)==null?void 0:F.toString())||"",pass_mark:((Q=C.pass_mark)==null?void 0:Q.toString())||"60",total_points:((M=C.total_points)==null?void 0:M.toString())||"100",is_final:C.is_final||!1,is_active:C.is_active!==void 0?C.is_active:!0,allow_multiple_attempts:C.allow_multiple_attempts||!1,max_attempts:((O=C.max_attempts)==null?void 0:O.toString())||"1",show_answers_after:C.show_answers_after||!1,randomize_questions:C.randomize_questions||!1,start_date:G(C.start_date),end_date:G(C.end_date)}),console.log("Set form data:",{courseId:X,moduleId:Z}),X&&(yield W(X))}catch(C){console.error("Error fetching exam:",C),E("حدث خطأ في تحميل بيانات الامتحان")}finally{v(!1)}}),z=A=>{const{name:V,value:Y,type:P,checked:I}=A.target;u(B=>ae(q({},B),{[V]:P==="checkbox"?I:Y}))},N=A=>A?new Date(A).toISOString():null,G=A=>{if(!A)return"";const V=new Date(A),Y=V.getFullYear(),P=String(V.getMonth()+1).padStart(2,"0"),I=String(V.getDate()).padStart(2,"0"),B=String(V.getHours()).padStart(2,"0"),F=String(V.getMinutes()).padStart(2,"0");return`${Y}-${P}-${I}T${B}:${F}`},J=A=>$(null,null,function*(){A.preventDefault();try{if(_(!0),E(null),l.start_date&&l.end_date){const Y=new Date(l.start_date),P=new Date(l.end_date);if(Y>=P){E("تاريخ البداية يجب أن يكون قبل تاريخ الانتهاء"),_(!1);return}}const V=ae(q({},l),{course:parseInt(l.course),module:l.module?parseInt(l.module):null,time_limit:l.time_limit?parseInt(l.time_limit):null,pass_mark:parseFloat(l.pass_mark),total_points:parseInt(l.total_points),max_attempts:parseInt(l.max_attempts),start_date:N(l.start_date),end_date:N(l.end_date)});e?yield _i.updateExam(a,V):yield _i.createExam(V),n("/teacher/exams")}catch(V){console.error("Error saving exam:",V),E("حدث خطأ في حفظ الامتحان")}finally{_(!1)}});return y?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})}):t(d,{sx:{maxWidth:1200,mx:"auto",p:{xs:1,md:3}},children:s(We,{elevation:2,sx:{borderRadius:3,p:4},children:[s(f,{variant:"h5",fontWeight:700,mb:3,children:[t(Yr,{sx:{mr:1,color:"primary.main"}}),e?"تعديل الامتحان":"إضافة امتحان جديد"]}),k&&t(Be,{severity:"error",sx:{mb:2},children:k}),s("form",{onSubmit:J,children:[s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,children:t(_e,{label:"عنوان الامتحان",name:"title",value:l.title,onChange:z,fullWidth:!0,required:!0,variant:"outlined",sx:{minWidth:400}})}),t(se,{item:!0,xs:12,md:8,children:t(_e,{select:!0,label:"الدورة",name:"course",value:l.course||"",onChange:z,fullWidth:!0,required:!0,variant:"outlined",sx:{minWidth:300},helperText:l.course?`محدد: ${Array.isArray(p)&&((H=p.find(A=>A.id.toString()===l.course))==null?void 0:H.title)||"غير معروف"}`:"",children:Array.isArray(p)&&p.map(A=>t(Me,{value:A.id.toString(),children:A.title},A.id))})}),t(se,{item:!0,xs:12,md:4,children:s(_e,{select:!0,label:"الوحدة (اختياري)",name:"module",value:l.module||"",onChange:z,fullWidth:!0,variant:"outlined",sx:{minWidth:250},helperText:l.module?`محدد: ${Array.isArray(x)&&((U=x.find(A=>A.id.toString()===l.module))==null?void 0:U.name)||"غير معروف"}`:l.course&&Array.isArray(x)&&x.length>0?`${x.length} وحدة متاحة`:l.course?"جاري تحميل الوحدات...":"اختر دورة أولاً",disabled:!l.course,InputProps:{endAdornment:l.course&&Array.isArray(x)&&x.length===0&&t(Ke,{size:20})},children:[t(Me,{value:"",children:"بدون"}),Array.isArray(x)&&x.map(A=>t(Me,{value:A.id.toString(),children:A.name},A.id))]})}),t(se,{item:!0,xs:12,children:t(_e,{label:"وصف الامتحان",name:"description",value:l.description,onChange:z,fullWidth:!0,multiline:!0,minRows:4,variant:"outlined",sx:{minWidth:500}})}),t(se,{item:!0,xs:12,sm:6,md:3,children:t(_e,{label:"الوقت بالدقائق",name:"time_limit",type:"number",value:l.time_limit,onChange:z,fullWidth:!0,variant:"outlined",inputProps:{min:1},sx:{minWidth:200}})}),t(se,{item:!0,xs:12,sm:6,md:3,children:t(_e,{label:"درجة النجاح (%)",name:"pass_mark",type:"number",value:l.pass_mark,onChange:z,fullWidth:!0,variant:"outlined",inputProps:{min:0,max:100,step:.1},sx:{minWidth:200}})}),t(se,{item:!0,xs:12,sm:6,md:3,children:t(_e,{label:"إجمالي النقاط",name:"total_points",type:"number",value:l.total_points,onChange:z,fullWidth:!0,variant:"outlined",inputProps:{min:1},sx:{minWidth:200}})}),t(se,{item:!0,xs:12,sm:6,md:3,children:t(_e,{label:"الحد الأقصى للمحاولات",name:"max_attempts",type:"number",value:l.max_attempts,onChange:z,fullWidth:!0,variant:"outlined",inputProps:{min:1},sx:{minWidth:200}})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{label:"تاريخ ووقت البداية",name:"start_date",type:"datetime-local",value:l.start_date,onChange:z,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{minWidth:250},helperText:"اختر التاريخ والوقت لبداية الامتحان"})}),t(se,{item:!0,xs:12,sm:6,children:t(_e,{label:"تاريخ ووقت الانتهاء",name:"end_date",type:"datetime-local",value:l.end_date,onChange:z,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},sx:{minWidth:250},helperText:"اختر التاريخ والوقت لانتهاء الامتحان"})}),t(se,{item:!0,xs:12,children:s(d,{sx:{display:"flex",flexWrap:"wrap",gap:3,p:2,border:"1px solid #e0e0e0",borderRadius:2,backgroundColor:"#fafafa"},children:[t(kt,{control:t(Nr,{name:"is_final",checked:l.is_final,onChange:z}),label:"امتحان نهائي",sx:{minWidth:150}}),t(kt,{control:t(Nr,{name:"is_active",checked:l.is_active,onChange:z}),label:"تفعيل الامتحان",sx:{minWidth:150}}),t(kt,{control:t(Nr,{name:"allow_multiple_attempts",checked:l.allow_multiple_attempts,onChange:z}),label:"السماح بمحاولات متعددة",sx:{minWidth:180}}),t(kt,{control:t(Nr,{name:"show_answers_after",checked:l.show_answers_after,onChange:z}),label:"إظهار الإجابات بعد الانتهاء",sx:{minWidth:200}}),t(kt,{control:t(Nr,{name:"randomize_questions",checked:l.randomize_questions,onChange:z}),label:"ترتيب الأسئلة عشوائياً",sx:{minWidth:180}})]})})]}),s(d,{sx:{mt:4,display:"flex",gap:2,justifyContent:"flex-end"},children:[t(te,{variant:"outlined",onClick:()=>n("/teacher/exams"),disabled:S,children:"إلغاء"}),t(te,{type:"submit",variant:"contained",startIcon:S?t(Ke,{size:20}):t(Vo,{}),sx:{borderRadius:2,fontWeight:"bold",px:4},disabled:S,children:S?"جاري الحفظ...":"حفظ"})]})]})]})})},X9=()=>{var Q,M,O;const e=nt(),{examId:n}=er(),[a,l]=w.useState(null),[u,p]=w.useState([]),[h,x]=w.useState(!0),[m,y]=w.useState(null),[v,S]=w.useState(!1),[_,k]=w.useState(null),[E,R]=w.useState(!1),[W,T]=w.useState({text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]});w.useEffect(()=>{n&&(z(),N())},[n]);const z=()=>$(null,null,function*(){try{x(!0);const C=yield _i.getExam(n);console.log("🔍 Exam data received:",C),console.log("🔍 Course data:",C.course),console.log("🔍 Module data:",C.module),l(C)}catch(C){console.error("Error fetching exam:",C),y("حدث خطأ في تحميل بيانات الامتحان")}finally{x(!1)}}),N=()=>$(null,null,function*(){try{const C=yield _i.getExamQuestions(n);p(C.results||C)}catch(C){console.error("Error fetching questions:",C),y("حدث خطأ في تحميل الأسئلة")}}),G=C=>$(null,null,function*(){try{yield _i.deleteQuestion(C),p(u.filter(X=>X.id!==C)),S(!1),k(null)}catch(X){console.error("Error deleting question:",X),y("حدث خطأ في حذف السؤال")}}),J=()=>$(null,null,function*(){var C;try{if(!W.text.trim()){y("يجب إدخال نص السؤال");return}if(W.question_type==="multiple_choice"){if(W.answers.filter(re=>re.text.trim()).length<2){y("يجب إدخال إجابتين على الأقل");return}if(W.answers.filter(re=>re.is_correct).length===0){y("يجب اختيار إجابة صحيحة واحدة على الأقل");return}}if(W.question_type==="true_false"&&W.answers.filter(j=>j.is_correct).length===0){y("يجب اختيار إجابة صحيحة");return}if(W.question_type==="short_answer"&&!((C=W.answers[0])!=null&&C.text.trim())){y("يجب إدخال الإجابة الصحيحة");return}const X=ae(q({},W),{exam:n,points:parseInt(W.points)});yield _i.addQuestion(n,X),R(!1),y(null),T({text:"",question_type:"multiple_choice",points:1,explanation:"",answers:[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]}),N()}catch(X){console.error("Error adding question:",X),y("حدث خطأ في إضافة السؤال")}}),H=C=>{k(C),S(!0)},U=(C,X,Z)=>{const j=[...W.answers];j[C]=ae(q({},j[C]),{[X]:Z}),T(ae(q({},W),{answers:j}))},A=C=>{const X=W.answers.map((Z,j)=>ae(q({},Z),{is_correct:j===C}));T(ae(q({},W),{answers:X}))},V=()=>{T(ae(q({},W),{answers:[...W.answers,{text:"",is_correct:!1}]}))},Y=C=>{if(W.answers.length>2){const X=W.answers.filter((Z,j)=>j!==C);T(ae(q({},W),{answers:X}))}},P=C=>{let X=[];C==="multiple_choice"?X=[{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1},{text:"",is_correct:!1}]:C==="true_false"?X=[{text:"صح",is_correct:!1},{text:"خطأ",is_correct:!1}]:C==="short_answer"&&(X=[{text:"",is_correct:!0}]),T(ae(q({},W),{question_type:C,answers:X}))},I=C=>{if(!C)return"غير محدد";try{const X=new Date(C);return isNaN(X.getTime())?"غير محدد":X.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(X){return console.error("Error formatting date:",X),"غير محدد"}},B=C=>{switch(C){case"multiple_choice":return"اختيار من متعدد";case"true_false":return"صح أو خطأ";case"short_answer":return"إجابة قصيرة";default:return C}},F=()=>{const C=new Date,X=a.start_date?new Date(a.start_date):null,Z=a.end_date?new Date(a.end_date):null;return a.is_active?X&&C<X?{status:"لم يبدأ بعد",color:"warning"}:Z&&C>Z?{status:"منتهي",color:"error"}:X&&Z&&C>=X&&C<=Z?{status:"مفتوح",color:"success"}:{status:"متاح",color:"primary"}:{status:"معطل",color:"default"}};return h?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})}):a?s(d,{sx:{maxWidth:1200,mx:"auto",p:{xs:2,md:4}},children:[s(We,{elevation:3,sx:{borderRadius:4,p:4,mb:4,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",color:"white"},children:[s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3,flexWrap:"wrap",gap:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(Yr,{sx:{fontSize:40,color:"white"}}),s(d,{children:[t(f,{variant:"h4",fontWeight:700,sx:{color:"white",mb:.5},children:a.title}),s(d,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[a.is_final&&t(Ce,{label:"نهائي",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:600}}),t(Ce,{label:F().status,sx:{bgcolor:F().color==="success"?"rgba(76,175,80,0.2)":F().color==="warning"?"rgba(255,152,0,0.2)":F().color==="error"?"rgba(244,67,54,0.2)":"rgba(255,255,255,0.2)",color:"white",fontWeight:600}})]})]})]}),s(d,{sx:{display:"flex",gap:1},children:[t(te,{variant:"outlined",onClick:()=>e("/teacher/exams"),sx:{borderColor:"rgba(255,255,255,0.5)",color:"white","&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:"عودة للقائمة"}),t(te,{variant:"contained",onClick:()=>e(`/teacher/exams/${n}/edit`),startIcon:t(vr,{}),sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},children:"تعديل الامتحان"})]})]}),s(d,{sx:{display:"flex",flexWrap:"wrap",gap:3,mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600},children:"الدورة:"}),t(f,{variant:"body1",sx:{color:"white"},children:((Q=a.course)==null?void 0:Q.title)||"غير محدد"})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600},children:"الوحدة:"}),t(f,{variant:"body1",sx:{color:"white"},children:((M=a.module)==null?void 0:M.name)||"غير محدد"})]})]}),a.description&&t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",lineHeight:1.6},children:a.description})]}),s(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",lg:"1fr 1fr"},gap:4},children:[s(We,{elevation:2,sx:{borderRadius:3,p:4,height:"fit-content"},children:[s(f,{variant:"h5",fontWeight:700,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[t(Yr,{sx:{color:"primary.main"}}),"تفاصيل الامتحان"]}),s(d,{sx:{display:"grid",gap:3},children:[s(d,{children:[t(f,{variant:"h6",fontWeight:600,sx:{mb:2,color:"primary.main"},children:"المعلومات الأساسية"}),s(d,{sx:{display:"grid",gap:2},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"الوقت المحدد:"}),t(Ce,{label:`${a.time_limit||"غير محدد"} دقيقة`,color:"info",size:"small"})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"درجة النجاح:"}),t(Ce,{label:`${a.pass_mark}%`,color:"success",size:"small"})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"إجمالي النقاط:"}),t(Ce,{label:`${a.total_points} نقطة`,color:"warning",size:"small"})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"عدد المحاولات:"}),t(Ce,{label:a.allow_multiple_attempts?`${a.max_attempts} محاولة`:"محاولة واحدة",color:a.allow_multiple_attempts?"secondary":"default",size:"small"})]})]})]}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,sx:{mb:2,color:"primary.main"},children:"جدول الامتحان"}),s(d,{sx:{display:"grid",gap:2},children:[a.start_date&&s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"موعد البدء:"}),t(f,{variant:"body2",color:"text.secondary",children:I(a.start_date)})]}),a.end_date&&s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"موعد الانتهاء:"}),t(f,{variant:"body2",color:"text.secondary",children:I(a.end_date)})]})]})]}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,sx:{mb:2,color:"primary.main"},children:"إعدادات الامتحان"}),s(d,{sx:{display:"grid",gap:2},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"إظهار الإجابات:"}),t(Ce,{label:a.show_answers_after?"نعم":"لا",color:a.show_answers_after?"success":"default",size:"small"})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"grey.50",borderRadius:2},children:[t(f,{variant:"body1",fontWeight:600,children:"ترتيب عشوائي:"}),t(Ce,{label:a.randomize_questions?"نعم":"لا",color:a.randomize_questions?"warning":"default",size:"small"})]})]})]}),a.is_active&&a.start_date&&a.end_date&&(()=>{const C=new Date,X=new Date(a.start_date),Z=new Date(a.end_date);if(C>=X&&C<=Z){const j=Z-C,re=Math.floor(j/(1e3*60*60*24)),de=Math.floor(j%(1e3*60*60*24)/(1e3*60*60)),fe=Math.floor(j%(1e3*60*60)/(1e3*60));return s(d,{sx:{p:3,bgcolor:"#fff3cd",borderRadius:2,border:"1px solid #ffeaa7"},children:[t(f,{variant:"h6",color:"warning.dark",fontWeight:600,sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:"⏰ الوقت المتبقي"}),s(f,{variant:"body1",color:"warning.dark",fontWeight:600,children:[re>0?`${re} يوم `:"",de>0?`${de} ساعة `:"",fe," دقيقة"]})]})}return null})()]})]}),s(We,{elevation:2,sx:{borderRadius:3,p:4},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[s(f,{variant:"h5",fontWeight:700,sx:{display:"flex",alignItems:"center",gap:1},children:[t(nr,{sx:{color:"primary.main"}}),"الأسئلة (",u.length,")"]}),t(te,{variant:"contained",startIcon:t(Hr,{}),sx:{borderRadius:2,fontWeight:"bold",background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #0a3d5f 0%, #d17a6f 100%)"}},onClick:()=>R(!0),children:"إضافة سؤال"})]}),m&&t(Be,{severity:"error",sx:{mb:3},children:m}),u.length===0?s(d,{sx:{textAlign:"center",py:6},children:[t(nr,{sx:{fontSize:60,color:"text.secondary",mb:2}}),t(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"لا توجد أسئلة لهذا الامتحان"}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"ابدأ بإضافة أسئلة لإنشاء امتحان شامل"}),t(te,{variant:"contained",startIcon:t(Hr,{}),onClick:()=>R(!0),sx:{background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(135deg, #0a3d5f 0%, #d17a6f 100%)"}},children:"إضافة أول سؤال"})]}):t(d,{sx:{maxHeight:"70vh",overflowY:"auto"},children:u.map((C,X)=>s(We,{elevation:1,sx:{p:3,mb:3,borderRadius:2,border:"1px solid",borderColor:"grey.200","&:hover":{boxShadow:3,borderColor:"primary.main"}},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[s(d,{sx:{flex:1},children:[s(f,{variant:"h6",fontWeight:600,sx:{mb:1},children:["السؤال ",X+1,": ",C.text]}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[t(Ce,{label:B(C.question_type),size:"small",color:"primary",variant:"outlined"}),t(Ce,{label:`${C.points} نقطة`,size:"small",color:"info"})]})]}),s(d,{sx:{display:"flex",gap:1},children:[t(Xe,{title:"تعديل",children:t(xe,{onClick:()=>e(`/teacher/exams/${n}/questions/${C.id}/edit`),sx:{color:"primary.main","&:hover":{bgcolor:"primary.light"}},children:t(vr,{})})}),t(Xe,{title:"حذف",children:t(xe,{onClick:()=>H(C),sx:{color:"error.main","&:hover":{bgcolor:"error.light"}},children:t(sn,{})})})]})]}),C.explanation&&t(d,{sx:{mb:2,p:2,bgcolor:"grey.50",borderRadius:1},children:s(f,{variant:"body2",color:"text.secondary",children:[t("strong",{children:"الشرح:"})," ",C.explanation]})}),C.answers&&C.answers.length>0&&s(d,{children:[t(f,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"الإجابات:"}),t(d,{sx:{display:"grid",gap:1},children:C.answers.map((Z,j)=>s(d,{sx:{display:"flex",alignItems:"center",gap:1,p:1.5,bgcolor:Z.is_correct?"success.light":"grey.50",borderRadius:1,border:Z.is_correct?"2px solid":"1px solid",borderColor:Z.is_correct?"success.main":"grey.300"},children:[t(d,{sx:{width:20,height:20,borderRadius:"50%",bgcolor:Z.is_correct?"success.main":"grey.400",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.75rem",fontWeight:"bold"},children:j+1}),t(f,{variant:"body2",sx:{flex:1},children:Z.text}),Z.is_correct&&t(Ce,{label:"إجابة صحيحة",size:"small",color:"success"})]},j))})]})]},C.id))})]})]}),s(yr,{open:v,onClose:()=>S(!1),children:[t(Wr,{children:"تأكيد حذف السؤال"}),t(br,{children:s(f,{children:['هل أنت متأكد من حذف السؤال "',_==null?void 0:_.text,'"؟ هذا الإجراء لا يمكن التراجع عنه.']})}),s($r,{children:[t(te,{onClick:()=>S(!1),children:"إلغاء"}),t(te,{onClick:()=>G(_==null?void 0:_.id),color:"error",variant:"contained",children:"حذف"})]})]}),s(yr,{open:E,onClose:()=>R(!1),maxWidth:"md",fullWidth:!0,dir:"rtl",children:[t(Wr,{sx:{textAlign:"right"},children:"إضافة سؤال جديد"}),t(br,{sx:{direction:"rtl"},children:s(d,{sx:{pt:1,textAlign:"right"},children:[m&&t(Be,{severity:"error",sx:{mb:2},children:m}),t(_e,{label:"نص السؤال",value:W.text,onChange:C=>T(ae(q({},W),{text:C.target.value})),fullWidth:!0,multiline:!0,minRows:3,sx:{mb:2},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),s(_e,{select:!0,label:"نوع السؤال",value:W.question_type,onChange:C=>P(C.target.value),fullWidth:!0,sx:{mb:2},inputProps:{dir:"rtl"},children:[t(Me,{value:"multiple_choice",children:"اختيار من متعدد"}),t(Me,{value:"true_false",children:"صح أو خطأ"}),t(Me,{value:"short_answer",children:"إجابة قصيرة"})]}),t(_e,{label:"النقاط",type:"number",value:W.points,onChange:C=>T(ae(q({},W),{points:C.target.value})),fullWidth:!0,sx:{mb:2},inputProps:{min:1,dir:"rtl",style:{textAlign:"right"}}}),t(_e,{label:"شرح الإجابة (اختياري)",value:W.explanation,onChange:C=>T(ae(q({},W),{explanation:C.target.value})),fullWidth:!0,multiline:!0,minRows:2,sx:{mb:3},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),t(f,{variant:"h6",sx:{mb:2,mt:3,textAlign:"right"},children:"الإجابات"}),W.question_type==="multiple_choice"&&s(d,{sx:{mb:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:"اختر الإجابة الصحيحة:"}),W.answers.map((C,X)=>s(d,{sx:{display:"flex",alignItems:"center",mb:1,direction:"rtl"},children:[t(_e,{label:`الإجابة ${X+1}`,value:C.text,onChange:Z=>U(X,"text",Z.target.value),fullWidth:!0,sx:{ml:1},inputProps:{dir:"rtl",style:{textAlign:"right"}}}),t(kt,{control:t(Nr,{checked:C.is_correct,onChange:()=>A(X)}),label:"صحيح",sx:{direction:"rtl"}}),W.answers.length>2&&t(xe,{onClick:()=>Y(X),color:"error",size:"small",children:t(sn,{})})]},X)),t(te,{variant:"outlined",onClick:V,startIcon:t(Hr,{}),sx:{mt:1,direction:"rtl"},children:"إضافة إجابة"})]}),W.question_type==="true_false"&&s(d,{sx:{mb:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:"اختر الإجابة الصحيحة:"}),W.answers.map((C,X)=>s(d,{sx:{display:"flex",alignItems:"center",mb:1,direction:"rtl"},children:[s(f,{sx:{minWidth:60,ml:2},children:[C.text,":"]}),t(kt,{control:t(Nr,{checked:C.is_correct,onChange:()=>A(X)}),label:"صحيح",sx:{direction:"rtl"}})]},X))]}),W.question_type==="short_answer"&&s(d,{sx:{mb:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{mb:1,textAlign:"right"},children:"الإجابة الصحيحة:"}),t(_e,{label:"الإجابة الصحيحة",value:((O=W.answers[0])==null?void 0:O.text)||"",onChange:C=>U(0,"text",C.target.value),fullWidth:!0,inputProps:{dir:"rtl",style:{textAlign:"right"}}})]})]})}),s($r,{sx:{direction:"rtl"},children:[t(te,{onClick:()=>R(!1),children:"إلغاء"}),t(te,{onClick:J,variant:"contained",disabled:!W.text.trim(),children:"إضافة"})]})]})]}):t(d,{sx:{p:3},children:t(Be,{severity:"error",children:"لم يتم العثور على الامتحان"})})};ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`;ht`
  0% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(103, 58, 183, 0); }
  100% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0); }
`;oe(We)(({theme:e})=>({padding:e.spacing(3),height:"100%",borderRadius:16,background:e.palette.mode==="dark"?`linear-gradient(145deg, ${he(e.palette.background.paper,.9)}, ${he(e.palette.background.default,.9)})`:`linear-gradient(145deg, ${e.palette.background.paper}, ${e.palette.background.default})`,boxShadow:e.shadows[5],backdropFilter:"blur(10px)",border:`1px solid ${he(e.palette.divider,.1)}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-8px)",boxShadow:e.shadows[10],"&::before":{opacity:.1,transform:"scale(1.5)"}},"&::before":{content:'""',position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:`radial-gradient(circle, ${e.palette.primary.main} 0%, transparent 70%)`,opacity:.05,transition:"all 0.6s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:0}}));class K9{getStudentStats(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/student/dashboard/stats/")).data}catch(n){return console.error("Error fetching student stats:",n),{enrolledCourses:0,completedLessons:0,pendingAssignments:0,averageGrade:0,totalPoints:0,learningStreak:0,certificates:0,recentActivity:[]}}})}getTeacherStats(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/teacher/dashboard/stats/")).data}catch(n){return console.error("Error fetching teacher stats:",n),{totalCourses:0,totalStudents:0,totalRevenue:0,averageRating:0,pendingAssignments:0,upcomingMeetings:0,recentEnrollments:0,courseProgress:[]}}})}getStudentCourses(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/student/courses/")).data}catch(n){return console.error("Error fetching student courses:",n),[]}})}getTeacherCourses(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/teacher/courses/")).data}catch(n){return console.error("Error fetching teacher courses:",n),[]}})}getRecentActivity(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/student/recent-activity/")).data}catch(n){return console.error("Error fetching recent activity:",n),[]}})}getTeacherRecentActivity(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/teacher/recent-activity/")).data}catch(n){return console.error("Error fetching teacher recent activity:",n),[]}})}getUpcomingAssignments(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/student/upcoming-assignments/")).data}catch(n){return console.error("Error fetching upcoming assignments:",n),[]}})}getUpcomingMeetings(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/student/upcoming-meetings/")).data}catch(n){return console.error("Error fetching upcoming meetings:",n),[]}})}getStudentProgress(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/teacher/student-progress/")).data}catch(n){return console.error("Error fetching student progress:",n),[]}})}getAchievements(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/student/achievements/")).data}catch(n){return console.error("Error fetching achievements:",n),[]}})}getRecentAnnouncements(){return $(this,null,function*(){try{return(yield ee.get("/api/courses/teacher/announcements/")).data}catch(n){return console.error("Error fetching recent announcements:",n),[]}})}}const wi=new K9,Z9={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Ha={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},rw=()=>{const e=Vt(),n=nt(),[a,l]=w.useState(!0),[u,p]=w.useState(new Date),[h,x]=w.useState(0),[m,y]=w.useState({enrolledCourses:0,completedLessons:0,pendingAssignments:0,averageGrade:0,totalPoints:0,learningStreak:0,certificates:0}),[v,S]=w.useState([]),[_,k]=w.useState([]),[E,R]=w.useState([]),[W,T]=w.useState([]),[z,N]=w.useState([]),[G,J]=w.useState([]);w.useEffect(()=>{H()},[]);const H=()=>$(null,null,function*(){try{l(!0);const[Y,P,I,B,F,Q]=yield Promise.all([wi.getStudentStats(),wi.getStudentCourses(),wi.getAchievements(),wi.getRecentActivity(),wi.getUpcomingAssignments(),wi.getUpcomingMeetings()]);y(Y);const M=P.length>0?P:[{id:1,title:"الجزيئات وأساسيات علم الأحياء",progress:0,description:"مقدمة في الجزيئات والأساسيات البيولوجية",status:"active",total_lessons:20,completed_lessons:0,duration:"1س 34د 44ث"},{id:2,title:"الخلايا والعضيات",progress:0,description:"دراسة الخلايا والعضيات المختلفة",status:"active",total_lessons:16,completed_lessons:0,duration:"49د 54ث"}];S(M);const O=I.length>0?I:[{id:1,title:"أول درس",description:"أكمل أول درس في المقرر",color:"primary",icon:t(nl,{}),progress:100,reward:"10 نقاط"},{id:2,title:"الطالب المثابر",description:"أكمل 5 دروس متتالية",color:"success",icon:t(xr,{}),progress:60,reward:"25 نقطة"},{id:3,title:"متفوق في الاختبارات",description:"احصل على 90% في الاختبار",color:"warning",icon:t(nr,{}),progress:0,reward:"50 نقطة"}];k(O),R(B),T(F),N(Q),J([{id:1,title:"كيمياء 3 - محاضرة",time:"08:00 - 10:00",date:"2024-01-10",day:"الثلاثاء",color:"#0e5181",type:"lecture"},{id:2,title:"واجب كيمياء 1",time:"10:00 - 11:35",date:"2024-01-10",day:"الثلاثاء",color:"#0e5181",type:"assignment"},{id:3,title:"اختبار كيمياء 2",time:"11:00 - 15:00",date:"2024-01-11",day:"الأربعاء",color:"#0e5181",type:"exam"},{id:4,title:"كيمياء 2 - محاضرة",time:"07:00 - 08:15",date:"2024-01-12",day:"الخميس",color:"#0e5181",type:"lecture"},{id:5,title:"واجب كيمياء 3",time:"09:00 - 10:15",date:"2024-01-12",day:"الخميس",color:"#0e5181",type:"assignment"},{id:6,title:"كيمياء 2 - تدريب",time:"09:00 - 10:15",date:"2024-01-13",day:"الجمعة",color:"#0e5181",type:"practice"},{id:7,title:"اختبار نهائي",time:"12:00 - 13:15",date:"2024-01-13",day:"الجمعة",color:"#0e5181",type:"exam"}])}catch(Y){console.error("Error loading dashboard data:",Y)}finally{l(!1)}}),U=Y=>{n(`/student/courses/${Y}`)},A=Y=>Y>=90?"A+":Y>=85?"A":Y>=80?"B+":Y>=75?"B":Y>=70?"C+":Y>=65?"C":Y>=60?"D+":"D",V=(Y,P)=>{x(P)};return a?t(d,{sx:{p:{xs:2,md:3}},children:t(se,{container:!0,spacing:3,children:[1,2,3,4].map(Y=>t(se,{item:!0,xs:12,sm:6,lg:3,children:t(dt,{variant:"rectangular",height:200,sx:{borderRadius:4}})},Y))})}):t(d,{sx:{p:{xs:2,md:3}},children:s(St.div,{initial:"hidden",animate:"show",variants:Z9,children:[s(d,{sx:{mb:5,px:1},children:[t(St.div,{variants:Ha,children:t(f,{variant:"h4",sx:{fontWeight:800,mb:2,background:e.palette.mode==="dark"?"linear-gradient(45deg, #fff, #90caf9)":"linear-gradient(45deg, #1976d2, #42a5f5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",display:"inline-block"},children:"مرحباً بك، محمد! 👋"})}),t(St.div,{variants:Ha,children:t(f,{variant:"h6",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:1,mb:4,"&::before":{content:'""',display:"block",width:24,height:3,background:e.palette.primary.main,borderRadius:2}},children:"هذه نظرة عامة على أدائك الدراسي"})})]}),t(d,{sx:{mb:5,px:1},children:s(se,{container:!0,spacing:2,children:[t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:Ha,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#9c27b0",color:"white","& svg":{fontSize:"1.5rem"}},children:t(bt,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"المقررات المسجلة"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:m.enrolledCourses||0})]})]})})})})}),t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:Ha,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#0e5181",color:"white","& svg":{fontSize:"1.5rem"}},children:t(rn,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"الواجبات المعلقة"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:m.pendingAssignments||0})]})]})})})})}),t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:Ha,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#ff9800",color:"white","& svg":{fontSize:"1.5rem"}},children:t(pa,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"المعدل الحالي"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:A(m.averageGrade||0)})]})]})})})})}),t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:Ha,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#4caf50",color:"white","& svg":{fontSize:"1.5rem"}},children:t(si,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"النقاط المكتسبة"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:(m.totalPoints||0).toLocaleString()})]})]})})})})})]})}),t(St.div,{variants:Ha,children:s(Je,{sx:{width:"100%",background:"white",borderRadius:4,boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:[t(d,{sx:{background:"linear-gradient(135deg, #0e5181, #1a6ba8)",borderRadius:"16px 16px 0 0",p:0},children:s(bn,{value:h,onChange:V,sx:{"& .MuiTab-root":{color:"white",fontWeight:600,fontSize:"1rem",minHeight:60,"&.Mui-selected":{color:"white",fontWeight:700}},"& .MuiTabs-indicator":{backgroundColor:"white",height:3}},children:[t(ft,{icon:t(bt,{}),label:"مقرراتي",iconPosition:"start",sx:{display:"flex",alignItems:"center",gap:1}}),t(ft,{icon:t(Tn,{}),label:"جدول المحاضرات",iconPosition:"start",sx:{display:"flex",alignItems:"center",gap:1}})]})}),s(d,{sx:{height:600,overflow:"auto"},children:[h===0&&s(d,{sx:{p:3},children:[s(d,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(d,{children:[t(f,{variant:"h6",fontWeight:600,sx:{mb:1,color:"#0e5181"},children:"مقرراتي النشطة"}),t(f,{variant:"body2",color:"text.secondary",children:"تابع تقدمك في المقررات"})]}),t(te,{variant:"contained",size:"small",endIcon:t(ya,{}),sx:{borderRadius:3,background:"linear-gradient(45deg, #0e5181, #1a6ba8)","&:hover":{background:"linear-gradient(45deg, #1a6ba8, #0e5181)"}},onClick:()=>n("/student/courses"),children:"عرض الكل"})]}),t(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:v.map((Y,P)=>t(St.div,{variants:Ha,children:t(Je,{sx:{borderRadius:3,background:"white",border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transform:"translateY(-2px)"}},children:t(st,{sx:{p:3},children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s(d,{sx:{display:"flex",alignItems:"flex-start",gap:2,flex:1},children:[t(d,{sx:{width:40,height:40,borderRadius:2,background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:700,color:"#666",flexShrink:0},children:P+1}),s(d,{sx:{flex:1},children:[t(f,{variant:"h6",fontWeight:600,sx:{mb:1.5,color:"#333"},children:Y.title}),t(d,{sx:{mb:1.5},children:t(hr,{variant:"determinate",value:Y.progress||0,sx:{height:8,borderRadius:4,backgroundColor:"#f0f0f0","& .MuiLinearProgress-bar":{background:"linear-gradient(45deg, #0e5181, #1a6ba8)",borderRadius:4}}})}),s(d,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[s(f,{variant:"body2",color:"text.secondary",children:[Y.completed_lessons||0," من ",Y.total_lessons||20," درس مكتمل"]}),s(f,{variant:"body2",color:"text.secondary",children:[Y.duration||"1س 34د 44ث"," مدة التشغيل"]})]})]})]}),t(d,{sx:{ml:2,flexShrink:0},children:t(te,{variant:"contained",size:"large",sx:{minWidth:100,height:48,borderRadius:3,background:"linear-gradient(45deg, #0e5181, #1a6ba8)",color:"white",fontWeight:600,fontSize:"1rem",textTransform:"none",boxShadow:"0 4px 12px rgba(14, 81, 129, 0.3)","&:hover":{background:"linear-gradient(45deg, #1a6ba8, #0e5181)",boxShadow:"0 6px 16px rgba(14, 81, 129, 0.4)",transform:"translateY(-1px)"},transition:"all 0.3s ease"},onClick:()=>U(Y.id),children:"ابدأ"})})]})})})},Y.id))})]}),h===1&&s(d,{sx:{p:3},children:[s(d,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"h5",fontWeight:700,sx:{color:"#333"},children:"جدول المحاضرات والواجبات"}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(xe,{size:"small",sx:{color:"#666"},onClick:()=>p(new Date(u.getTime()-7*24*60*60*1e3)),children:t(T0,{})}),t(f,{variant:"body1",sx:{minWidth:120,textAlign:"center",color:"#333",fontWeight:600},children:u.toLocaleDateString("ar-SA",{month:"long",year:"numeric"})}),t(xe,{size:"small",sx:{color:"#666"},onClick:()=>p(new Date(u.getTime()+7*24*60*60*1e3)),children:t(E0,{})})]})]}),s(d,{sx:{border:"1px solid #e0e0e0",borderRadius:2,overflow:"hidden",background:"white"},children:[s(d,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:"1px solid #e0e0e0",background:"#f8f9fa"},children:[t(d,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center"},children:t(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:"الأيام"})}),["الثلاثاء","الأربعاء","الخميس","الجمعة"].map((Y,P)=>s(d,{sx:{p:2,borderRight:P<3?"1px solid #e0e0e0":"none",textAlign:"center"},children:[t(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:Y}),t(f,{variant:"caption",color:"text.secondary",children:10+P})]},Y))]}),["07:00","08:00","09:00","10:00","11:00","12:00","13:00"].map((Y,P)=>s(d,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:P<6?"1px solid #e0e0e0":"none",minHeight:60},children:[t(d,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa"},children:t(f,{variant:"caption",color:"text.secondary",fontWeight:500,children:Y})}),[0,1,2,3].map(I=>t(d,{sx:{p:1,borderRight:I<3?"1px solid #e0e0e0":"none",position:"relative",minHeight:60},children:G.filter(B=>{const F=B.time.split(" - ")[0],Q=B.day;return F===Y&&Q===["الثلاثاء","الأربعاء","الخميس","الجمعة"][I]}).map(B=>s(d,{sx:{position:"absolute",top:4,left:4,right:4,bottom:4,background:"rgba(14, 81, 129, 0.08)",borderRadius:1,p:1,color:"#0e5181",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:[t(f,{variant:"caption",fontWeight:600,sx:{fontSize:"0.7rem",lineHeight:1.2},children:B.title}),t(f,{variant:"caption",sx:{opacity:.8,fontSize:"0.6rem",lineHeight:1.2},children:B.time})]},B.id))},I))]},Y))]}),G.length===0&&s(d,{sx:{textAlign:"center",py:4},children:[t(Tn,{sx:{fontSize:48,color:"#ccc",mb:2}}),t(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"لا توجد محاضرات أو واجبات مجدولة"}),t(te,{variant:"contained",sx:{background:"#e5978b","&:hover":{background:"#f0a8a0"}},onClick:()=>n("/student/calendar"),children:"عرض التقويم الكامل"})]})]})]})]})})]})})},J9={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},So={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},nw=()=>{Vt();const e=nt(),[n,a]=w.useState(!0),[l,u]=w.useState({totalCourses:0,totalStudents:0,totalRevenue:0,averageRating:0,pendingAssignments:0,upcomingMeetings:0,recentEnrollments:0}),[p,h]=w.useState([]),[x,m]=w.useState([]),[y,v]=w.useState([]),[S,_]=w.useState([]),[k,E]=w.useState(new Date),[R,W]=w.useState([]),[T,z]=w.useState(0);w.useEffect(()=>{N()},[]);const N=()=>$(null,null,function*(){try{a(!0);const[U,A,V,Y,P]=yield Promise.all([wi.getTeacherStats(),wi.getTeacherCourses(),wi.getStudentProgress(),wi.getRecentActivity(),wi.getRecentAnnouncements()]);u({totalCourses:U.totalCourses||0,totalStudents:U.totalStudents||0,totalRevenue:U.totalRevenue||0,averageRating:U.averageRating||0,pendingAssignments:U.pendingAssignments||0,upcomingMeetings:U.upcomingMeetings||0,recentEnrollments:U.recentEnrollments||0}),h(A||[]),m(V||[]);const I=Y&&Y.length>0?Y:[{id:1,title:"تم تسليم واجب جديد",description:"الطالب أحمد محمد سلم واجب الكيمياء",time:"منذ 5 دقائق",type:"assignment",course:"كيمياء 1"},{id:2,title:"انضمام طالب جديد",description:"انضم الطالب سارة أحمد إلى مقرر الأحياء",time:"منذ ساعة",type:"enrollment",course:"الأحياء"}];v(I);const B=P&&P.length>0?P:[{id:1,title:"إعلان مهم",content:"سيتم عقد امتحان نهائي الأسبوع القادم",date:"2024-01-15",read:!1,course:"كيمياء 1"},{id:2,title:"تحديث المنهج",content:"تم تحديث منهج مقرر الأحياء",date:"2024-01-14",read:!0,course:"الأحياء"}];_(B),W([{id:1,title:"كيمياء 3 - تدريب",time:"08:00 - 10:00",date:"2024-01-10",day:"الثلاثاء",color:"#0e5181"},{id:2,title:"كيمياء 1",time:"10:00 - 11:35",date:"2024-01-10",day:"الثلاثاء",color:"#0e5181"},{id:3,title:"كيمياء 2 - تدريب",time:"11:00 - 15:00",date:"2024-01-11",day:"الأربعاء",color:"#0e5181"},{id:4,title:"كيمياء 2",time:"07:00 - 08:15",date:"2024-01-12",day:"الخميس",color:"#0e5181"},{id:5,title:"كيمياء 3",time:"09:00 - 10:15",date:"2024-01-12",day:"الخميس",color:"#0e5181"},{id:6,title:"كيمياء 2",time:"09:00 - 10:15",date:"2024-01-13",day:"الجمعة",color:"#0e5181"},{id:7,title:"كيمياء 1",time:"12:00 - 13:15",date:"2024-01-13",day:"الجمعة",color:"#0e5181"}])}catch(U){console.error("Error loading dashboard data:",U)}finally{a(!1)}}),G=U=>{e(`/teacher/courses/${U}`)},J=U=>{e(`/teacher/courses/${U}/edit`)},H=(U,A)=>{z(A)};return n?t(d,{sx:{p:{xs:2,md:3}},children:t(se,{container:!0,spacing:3,children:[1,2,3,4].map(U=>t(se,{size:{xs:12,sm:6,lg:3},children:t(dt,{variant:"rectangular",height:200,sx:{borderRadius:4}})},U))})}):t(d,{sx:{p:{xs:2,md:3},backgroundColor:"#f8f9fa",minHeight:"100vh"},children:s(St.div,{initial:"hidden",animate:"show",variants:J9,children:[s(d,{sx:{mb:5,px:1},children:[t(St.div,{variants:So,children:t(f,{variant:"h4",sx:{fontWeight:800,mb:2,color:"#0e5181",textAlign:"center"},children:"مرحباً بك، أستاذ/ة! 👩‍🏫"})}),t(St.div,{variants:So,children:t(f,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",mb:4},children:"هذه نظرة عامة على فصولك وطلابك"})})]}),t(d,{sx:{mb:5,px:1},children:s(se,{container:!0,spacing:2,children:[t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:So,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#9c27b0",color:"white","& svg":{fontSize:"1.5rem"}},children:t(Po,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"عدد الطلاب"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:l.totalStudents||0})]})]})})})})}),t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:So,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#0e5181",color:"white","& svg":{fontSize:"1.5rem"}},children:t(bt,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"المقررات"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:l.totalCourses||0})]})]})})})})}),t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:So,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#ff9800",color:"white","& svg":{fontSize:"1.5rem"}},children:t(rn,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"الواجبات المعلقة"}),t(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:l.pendingAssignments||0})]})]})})})})}),t(se,{size:{xs:12,sm:6,md:3},children:t(St.div,{variants:So,children:t(Je,{sx:{height:100,borderRadius:3,background:"white",border:"none",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(0, 0, 0, 0.12)"},transition:"all 0.3s ease"},children:t(st,{sx:{p:2,height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(d,{sx:{width:45,height:45,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",background:"#4caf50",color:"white","& svg":{fontSize:"1.5rem"}},children:t(si,{})}),s(d,{children:[t(f,{variant:"body2",sx:{color:"text.secondary",fontWeight:500,mb:.5},children:"متوسط التقييم"}),s(f,{variant:"h4",fontWeight:700,sx:{color:"#333",lineHeight:1},children:[l.averageRating.toFixed(1),"★"]})]})]})})})})})]})}),t(d,{sx:{px:1,width:"100%"},children:t(St.div,{variants:So,children:s(Je,{sx:{borderRadius:4,background:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[t(d,{sx:{background:"linear-gradient(135deg, #0e5181, #1a6ba8)",color:"white"},children:s(bn,{value:T,onChange:H,sx:{"& .MuiTab-root":{color:"rgba(255, 255, 255, 0.7)",fontWeight:600,fontSize:"1rem",minHeight:60,"&.Mui-selected":{color:"white",background:"rgba(255, 255, 255, 0.1)"}},"& .MuiTabs-indicator":{backgroundColor:"white",height:3}},children:[t(ft,{label:"مقرراتي",icon:t(bt,{}),iconPosition:"start",sx:{flex:1}}),t(ft,{label:"جدول المحاضرات",icon:t(Tn,{}),iconPosition:"start",sx:{flex:1}})]})}),s(d,{sx:{height:600,overflow:"auto"},children:[T===0&&s(d,{sx:{p:3},children:[s(d,{sx:{mb:3},children:[t(f,{variant:"h6",fontWeight:600,sx:{mb:1,color:"#0e5181"},children:"إدارة فصولك الدراسية"}),t(f,{variant:"body2",color:"text.secondary",children:"عرض وإدارة جميع مقرراتك"})]}),p.length>0?t(pi,{component:We,sx:{borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:s(ui,{sx:{minWidth:650},"aria-label":"courses table",children:[t(hi,{children:s(Jt,{sx:{backgroundColor:"#f8f9fa"},children:[t(ye,{sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181",textAlign:"right"},children:"المقرر"}),t(ye,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:"عدد الطلاب"}),t(ye,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:"التقييم"}),t(ye,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:"التصنيف"}),t(ye,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:"الحالة"}),t(ye,{align:"center",sx:{fontWeight:700,color:"#0e5181",borderBottom:"2px solid #0e5181"},children:"الإجراءات"})]})}),t(fi,{children:p.map(U=>s(Jt,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f8f9fa"},cursor:"pointer",transition:"background-color 0.2s ease"},onClick:()=>G(U.id),children:[t(ye,{component:"th",scope:"row",sx:{textAlign:"right",verticalAlign:"top"},children:s(d,{sx:{display:"flex",alignItems:"flex-start",gap:2,flexDirection:"row-reverse"},children:[s(d,{sx:{flex:1,minWidth:0},children:[t(f,{variant:"subtitle1",fontWeight:600,sx:{color:"#333",textAlign:"right",mb:.5,lineHeight:1.3},children:U.title||"مقرر جديد"}),t(f,{variant:"caption",color:"text.secondary",sx:{textAlign:"right",display:"block",lineHeight:1.4},children:U.description||"لا يوجد وصف"})]}),t(d,{sx:{width:40,height:40,borderRadius:2,background:"linear-gradient(135deg, #0e5181, #1a6ba8)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",flexShrink:0,"& svg":{fontSize:"1.2rem"}},children:t(bt,{})})]})}),t(ye,{align:"center",children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t(Po,{sx:{fontSize:16,color:"#666"}}),t(f,{variant:"body2",fontWeight:500,children:U.students||0})]})}),t(ye,{align:"center",children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[t(si,{sx:{fontSize:16,color:"#ffc107"}}),t(f,{variant:"body2",fontWeight:500,children:U.rating||0})]})}),t(ye,{align:"center",children:t(Ce,{label:U.category||"بدون تصنيف",size:"small",sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontWeight:500}})}),t(ye,{align:"center",children:t(Ce,{label:U.status==="published"?"منشور":"مسودة",size:"small",sx:{backgroundColor:U.status==="published"?"#e8f5e8":"#fff3e0",color:U.status==="published"?"#2e7d32":"#f57c00",fontWeight:500}})}),t(ye,{align:"center",children:s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[t(xe,{size:"small",sx:{color:"#0e5181",backgroundColor:"rgba(14, 81, 129, 0.08)","&:hover":{backgroundColor:"rgba(14, 81, 129, 0.15)",color:"#1a6ba8"}},onClick:A=>{A.stopPropagation(),G(U.id)},title:"عرض المقرر",children:t(o6,{fontSize:"small"})}),t(xe,{size:"small",sx:{color:"#e5978b",backgroundColor:"rgba(229, 151, 139, 0.08)","&:hover":{backgroundColor:"rgba(229, 151, 139, 0.15)",color:"#d17a6f"}},onClick:A=>{A.stopPropagation(),J(U.id)},title:"تعديل المقرر",children:t(vr,{fontSize:"small"})})]})})]},U.id))})]})}):s(d,{sx:{textAlign:"center",py:4},children:[t(bt,{sx:{fontSize:48,color:"#ccc",mb:2}}),t(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"لا توجد مقررات بعد"}),t(te,{variant:"contained",sx:{background:"#0e5181","&:hover":{background:"#1a6ba8"}},onClick:()=>e("/teacher/courses/new"),children:"إنشاء مقرر جديد"})]})]}),T===1&&s(d,{sx:{p:3},children:[s(d,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"h5",fontWeight:700,sx:{color:"#333"},children:"جدول المحاضرات"}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(xe,{size:"small",sx:{color:"#666"},onClick:()=>E(new Date(k.getTime()-7*24*60*60*1e3)),children:t(T0,{})}),t(f,{variant:"body1",sx:{minWidth:120,textAlign:"center",color:"#333",fontWeight:600},children:k.toLocaleDateString("ar-SA",{month:"long",year:"numeric"})}),t(xe,{size:"small",sx:{color:"#666"},onClick:()=>E(new Date(k.getTime()+7*24*60*60*1e3)),children:t(E0,{})})]})]}),s(d,{sx:{border:"1px solid #e0e0e0",borderRadius:2,overflow:"hidden",background:"white"},children:[s(d,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:"1px solid #e0e0e0",background:"#f8f9fa"},children:[t(d,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center"},children:t(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:"الأيام"})}),["الثلاثاء","الأربعاء","الخميس","الجمعة"].map((U,A)=>s(d,{sx:{p:2,borderRight:A<3?"1px solid #e0e0e0":"none",textAlign:"center"},children:[t(f,{variant:"body2",fontWeight:600,color:"text.secondary",children:U}),t(f,{variant:"caption",color:"text.secondary",children:10+A})]},U))]}),["07:00","08:00","09:00","10:00","11:00","12:00","13:00"].map((U,A)=>s(d,{sx:{display:"grid",gridTemplateColumns:"80px repeat(4, 1fr)",borderBottom:A<6?"1px solid #e0e0e0":"none",minHeight:60},children:[t(d,{sx:{p:2,borderRight:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8f9fa"},children:t(f,{variant:"caption",color:"text.secondary",fontWeight:500,children:U})}),[0,1,2,3].map(V=>t(d,{sx:{p:1,borderRight:V<3?"1px solid #e0e0e0":"none",position:"relative",minHeight:60},children:R.filter(Y=>{const P=Y.time.split(" - ")[0],I=Y.day;return P===U&&I===["الثلاثاء","الأربعاء","الخميس","الجمعة"][V]}).map(Y=>s(d,{sx:{position:"absolute",top:4,left:4,right:4,bottom:4,background:"rgba(14, 81, 129, 0.08)",borderRadius:1,p:1,color:"#0e5181",display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.05)",border:"1px solid rgba(14, 81, 129, 0.1)"},children:[t(f,{variant:"caption",fontWeight:600,sx:{fontSize:"0.7rem",lineHeight:1.2},children:Y.title}),t(f,{variant:"caption",sx:{opacity:.8,fontSize:"0.6rem",lineHeight:1.2},children:Y.time})]},Y.id))},V))]},U))]}),R.length===0&&s(d,{sx:{textAlign:"center",py:4},children:[t(Tn,{sx:{fontSize:48,color:"#ccc",mb:2}}),t(f,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"لا توجد محاضرات مجدولة"}),t(te,{variant:"contained",sx:{background:"#e5978b","&:hover":{background:"#f0a8a0"}},onClick:()=>e("/teacher/meetings"),children:"جدولة محاضرة"})]})]})]})]})})})]})})},eD=({onFinish:e})=>{var Y,P,I,B,F;const n=nt(),{quizId:a}=er(),[l,u]=w.useState(0),[p,h]=w.useState({}),[x,m]=w.useState(null),[y,v]=w.useState([]),[S,_]=w.useState(!0),[k,E]=w.useState(null),[R,W]=w.useState(null),[T,z]=w.useState(!1);w.useEffect(()=>{N()},[a]);const N=()=>$(null,null,function*(){try{_(!0),E(null);const Q=yield Dt.getQuiz(a);m(Q);const M=yield Dt.getQuizQuestions(a);v(M.results||M);const O=yield Dt.startQuizAttempt(a);W(O.id)}catch(Q){console.error("Error loading quiz:",Q),E("حدث خطأ في تحميل الكويز. يرجى المحاولة مرة أخرى.")}finally{_(!1)}}),G=Q=>{h(ae(q({},p),{[l]:Q}))},J=()=>{l<y.length-1&&u(l+1)},H=()=>{l>0&&u(l-1)},U=()=>$(null,null,function*(){try{z(!0);const Q=y.map((M,O)=>{var C,X;return{question:M.id,selected_answer:((C=p[O])==null?void 0:C.selected_answer)||null,text_answer:((X=p[O])==null?void 0:X.text_answer)||null}});yield Dt.submitQuizAnswers(R,Q),yield Dt.finishQuizAttempt(R),e?e():n(`/student/quiz/${a}/result/${R}`)}catch(Q){console.error("Error submitting quiz:",Q),E("حدث خطأ في إرسال الإجابات. يرجى المحاولة مرة أخرى.")}finally{z(!1)}});if(S)return t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:t(Ke,{})});if(k)return s(d,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:[t(Be,{severity:"error",sx:{mb:2},children:k}),t(te,{variant:"contained",onClick:N,children:"إعادة المحاولة"})]});if(!x||!y.length)return t(d,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:t(Be,{severity:"info",children:"لا توجد أسئلة متاحة لهذا الكويز."})});const A=y[l],V=y.length;return t(d,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:s(We,{sx:{p:4,borderRadius:3,boxShadow:3},children:[t(f,{variant:"h5",fontWeight:700,mb:2,children:x.title}),s(jr,{direction:"row",spacing:2,mb:2,alignItems:"center",children:[t(Ce,{label:`سؤال ${l+1} من ${V}`,color:"primary"}),x.time_limit&&t(Ce,{label:`الزمن: ${x.time_limit} دقيقة`,color:"secondary"}),t(Ce,{label:`الدرجة: ${A.points}`,color:"info"})]}),t(hr,{variant:"determinate",value:(l+1)/V*100,sx:{mb:3,height:8,borderRadius:2}}),t(f,{variant:"h6",mb:2,children:A.text}),A.question_type==="multiple_choice"&&t(Gu,{value:((Y=p[l])==null?void 0:Y.selected_answer)||"",onChange:Q=>G(ae(q({},p[l]),{selected_answer:Q.target.value})),children:(P=A.answers)==null?void 0:P.map((Q,M)=>t(kt,{value:Q.id,control:t(Wc,{}),label:Q.text},M))}),A.question_type==="true_false"&&t(Gu,{value:((I=p[l])==null?void 0:I.selected_answer)||"",onChange:Q=>G(ae(q({},p[l]),{selected_answer:Q.target.value})),children:(B=A.answers)==null?void 0:B.map((Q,M)=>t(kt,{value:Q.id,control:t(Wc,{}),label:Q.text},M))}),A.question_type==="short_answer"&&t(_e,{label:"إجابتك",value:((F=p[l])==null?void 0:F.text_answer)||"",onChange:Q=>G(ae(q({},p[l]),{text_answer:Q.target.value})),fullWidth:!0,multiline:!0,rows:3,sx:{mt:2}}),s(jr,{direction:"row",spacing:2,mt:4,justifyContent:"space-between",children:[t(te,{variant:"outlined",onClick:H,disabled:l===0,children:"السابق"}),l<V-1?t(te,{variant:"contained",onClick:J,children:"التالي"}):t(te,{variant:"contained",color:"success",onClick:U,disabled:T,children:T?"جاري الإرسال...":"إنهاء الكويز"})]})]})})},tD=({onClose:e})=>{var T;const n=nt(),{quizId:a,attemptId:l}=er(),[u,p]=w.useState(null),[h,x]=w.useState([]),[m,y]=w.useState(!0),[v,S]=w.useState(null);w.useEffect(()=>{_()},[l]);const _=()=>$(null,null,function*(){try{y(!0),S(null);const z=yield Dt.getQuizAttemptResult(l);p(z);const N=yield Dt.getQuizAttemptAnswers(l);x(N.results||N)}catch(z){console.error("Error loading quiz result:",z),S("حدث خطأ في تحميل نتيجة الكويز. يرجى المحاولة مرة أخرى.")}finally{y(!1)}});if(m)return t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:t(Ke,{})});if(v)return s(d,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:[t(Be,{severity:"error",sx:{mb:2},children:v}),t(te,{variant:"contained",onClick:_,children:"إعادة المحاولة"})]});if(!u)return t(d,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:t(Be,{severity:"info",children:"لا توجد نتيجة متاحة لهذا الكويز."})});const k=u.score||0,E=u.passed||!1,R=h.length,W=h.filter(z=>z.is_correct).length;return t(d,{sx:{maxWidth:700,mx:"auto",p:{xs:1,md:3}},children:s(We,{sx:{p:4,borderRadius:3,boxShadow:3,textAlign:"center"},children:[t(f,{variant:"h5",fontWeight:700,mb:2,children:((T=u.quiz)==null?void 0:T.title)||"نتيجة الكويز"}),s(jr,{direction:"row",spacing:2,justifyContent:"center",mb:3,children:[t(Ce,{label:`النتيجة: ${k.toFixed(1)}%`,color:E?"success":"error",icon:E?t(xr,{}):t(an,{}),sx:{fontSize:18,px:2}}),E?t(Ce,{label:"ناجح",color:"success",icon:t(qc,{}),sx:{fontSize:18,px:2}}):t(Ce,{label:"راسب",color:"error",icon:t(an,{}),sx:{fontSize:18,px:2}})]}),t(hr,{variant:"determinate",value:k,sx:{mb:3,height:10,borderRadius:2}}),s(f,{variant:"subtitle1",mb:2,children:["ملخص الإجابات (",W," من ",R," صحيحة)"]}),t(jr,{spacing:2,mb:4,children:h.map((z,N)=>{var G,J,H;return s(We,{sx:{p:2,borderRadius:2,display:"flex",alignItems:"center",justifyContent:"space-between",bgcolor:z.is_correct?"success.lighter":"error.lighter"},children:[s(d,{sx:{flex:1,textAlign:"right"},children:[t(f,{variant:"body1",fontWeight:"medium",children:((G=z.question)==null?void 0:G.text)||`سؤال ${N+1}`}),z.text_answer&&s(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["إجابتك: ",z.text_answer]}),z.selected_answer&&s(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["إجابتك: ",(J=z.selected_answer)==null?void 0:J.text]}),z.points_earned!==void 0&&s(f,{variant:"body2",color:"text.secondary",children:["النقاط: ",z.points_earned," من ",((H=z.question)==null?void 0:H.points)||1]})]}),z.is_correct?t(xr,{color:"success",sx:{ml:2}}):t(an,{color:"error",sx:{ml:2}})]},N)})}),s(jr,{direction:"row",spacing:2,justifyContent:"center",children:[t(te,{variant:"contained",color:"primary",onClick:()=>e?e():n(-1),sx:{fontWeight:"bold",px:4},children:"اكتمال"}),t(te,{variant:"outlined",onClick:()=>n(`/student/quiz/${a}`),sx:{fontWeight:"bold",px:4},children:"إعادة المحاولة"})]})]})})},pc={title:"الامتحان النهائي - تطوير الويب",description:"امتحان شامل يغطي جميع وحدات الدورة. لديك 60 دقيقة للإجابة.",time_limit:60,pass_mark:60,total_points:100},rD=()=>{const e=nt();return t(d,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:s(We,{elevation:2,sx:{borderRadius:3,p:4,mb:3,textAlign:"center"},children:[t(Yr,{sx:{fontSize:48,color:"primary.main",mb:2}}),t(f,{variant:"h5",fontWeight:700,mb:2,children:pc.title}),t(f,{variant:"body1",mb:2,children:pc.description}),s(d,{sx:{display:"flex",justifyContent:"center",gap:2,mb:2},children:[t(Ce,{label:`المدة: ${pc.time_limit} دقيقة`,color:"info"}),t(Ce,{label:`درجة النجاح: ${pc.pass_mark}%`,color:"success"}),t(Ce,{label:`الدرجة الكلية: ${pc.total_points}`,color:"primary"})]}),t(te,{variant:"contained",startIcon:t(Ci,{}),size:"large",sx:{borderRadius:2,fontWeight:"bold",px:5,py:1.5},onClick:()=>e("taking"),children:"بدء الامتحان"})]})})},iw=[{id:1,text:"ما هو React؟",type:"multiple_choice",options:["مكتبة جافاسكريبت","لغة برمجة","نظام تشغيل","متصفح"],points:2},{id:2,text:"هل HTML لغة برمجة؟",type:"true_false",options:["صح","خطأ"],points:1},{id:3,text:"اشرح مفهوم SPA.",type:"short_answer",points:3}],nD=()=>{const[e,n]=w.useState(0),[a,l]=w.useState({}),u=iw[e],p=iw.length,h=nt(),x=m=>{l(ae(q({},a),{[u.id]:m.target.value}))};return t(d,{sx:{maxWidth:600,mx:"auto",p:{xs:1,md:3}},children:s(We,{elevation:2,sx:{borderRadius:3,p:4,mb:3},children:[s(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[t(nr,{sx:{mr:1,color:"primary.main"}}),s(f,{variant:"h6",fontWeight:700,children:["سؤال ",e+1," من ",p]}),t(Ce,{label:`نقاط: ${u.points}`,color:"info",size:"small",sx:{ml:2}})]}),t(hr,{variant:"determinate",value:(e+1)/p*100,sx:{mb:3,height:8,borderRadius:2}}),t(f,{variant:"h5",mb:3,children:u.text}),u.type==="multiple_choice"||u.type==="true_false"?t(Gu,{value:a[u.id]||"",onChange:x,children:u.options.map((m,y)=>t(kt,{value:m,control:t(Wc,{}),label:m},y))}):t("textarea",{style:{width:"100%",minHeight:80,borderRadius:8,border:"1px solid #ddd",padding:12,fontSize:16},placeholder:"اكتب إجابتك هنا...",value:a[u.id]||"",onChange:m=>l(ae(q({},a),{[u.id]:m.target.value}))}),s(d,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[t(te,{variant:"outlined",startIcon:t(Gt,{}),disabled:e===0,onClick:()=>n(m=>m-1),children:"السابق"}),e<p-1?t(te,{variant:"contained",endIcon:t(M0,{}),onClick:()=>n(m=>m+1),children:"التالي"}):t(te,{variant:"contained",endIcon:t(Yw,{}),color:"success",onClick:()=>h("result"),children:"إنهاء الامتحان"})]})]})})},iD={score:78,pass_mark:60,passed:!0,total_points:100,correct:7,total:10},CC=({result:e=iD,onRetry:n,onClose:a})=>t(d,{sx:{maxWidth:500,mx:"auto",p:{xs:1,md:3}},children:s(We,{elevation:2,sx:{borderRadius:3,p:4,mb:3,textAlign:"center"},children:[t(Yr,{sx:{fontSize:48,color:e.passed?"success.main":"error.main",mb:2}}),t(f,{variant:"h5",fontWeight:700,mb:2,children:"نتيجة الامتحان الشامل"}),t(Ce,{label:e.passed?"ناجح":"راسب",color:e.passed?"success":"error",sx:{mb:2,fontSize:18}}),s(f,{variant:"h4",fontWeight:800,color:e.passed?"success.main":"error.main",mb:2,children:[e.score," / ",e.total_points]}),t(hr,{variant:"determinate",value:e.score,sx:{mb:2,height:10,borderRadius:2}}),s(f,{variant:"body1",mb:2,children:["عدد الإجابات الصحيحة: ",e.correct," من ",e.total]}),e.passed?t(te,{variant:"contained",color:"primary",sx:{borderRadius:2,fontWeight:"bold",px:4,mt:2},onClick:a,children:"اكتمال"}):t(te,{variant:"contained",color:"error",sx:{borderRadius:2,fontWeight:"bold",px:4,mt:2},onClick:n||(()=>window.location.reload()),children:"إعادة المحاولة"})]})}),Ws={title:"الامتحان النهائي - تطوير الويب",description:"امتحان شامل يغطي جميع وحدات الدورة. لديك 60 دقيقة للإجابة.",time_limit:60,pass_mark:60,total_points:100,questions:[{id:1,text:"ما هو React؟",type:"multiple_choice",options:["مكتبة جافاسكريبت","لغة برمجة","نظام تشغيل","متصفح"],points:2},{id:2,text:"هل HTML لغة برمجة؟",type:"true_false",options:["صح","خطأ"],points:1},{id:3,text:"اشرح مفهوم SPA.",type:"short_answer",points:3}]},aD=({onClose:e})=>{const[n,a]=w.useState("start"),[l,u]=w.useState({}),p=(m,y)=>{u(ae(q({},l),{[m]:y}))},h=()=>a("questions"),x=()=>{a("result")};return t(d,{sx:{maxWidth:420,mx:"auto",p:0},children:s(We,{elevation:3,sx:{borderRadius:4,p:3,mb:2,boxShadow:"0 4px 24px 0 rgba(63,81,181,0.10)"},children:[n==="start"&&s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:[t(Yr,{sx:{fontSize:48,color:"primary.main",mb:1}}),t(f,{variant:"h6",fontWeight:800,mb:1,sx:{textAlign:"center",letterSpacing:1},children:Ws.title}),t(f,{variant:"body2",color:"text.secondary",mb:2,sx:{textAlign:"center",fontSize:15},children:Ws.description}),s(jr,{direction:"row",spacing:1,mb:2,children:[t(Ce,{icon:t(on,{}),label:`${Ws.time_limit} دقيقة`,size:"small",color:"info"}),t(Ce,{icon:t(qc,{}),label:`النجاح: ${Ws.pass_mark}%`,size:"small",color:"success"}),t(Ce,{label:`الدرجة: ${Ws.total_points}`,size:"small",color:"primary"})]}),t(te,{variant:"contained",color:"primary",size:"large",startIcon:t(Ci,{}),sx:{borderRadius:99,px:5,py:1.2,fontWeight:"bold",fontSize:18,boxShadow:"0 4px 16px 0 rgba(63,81,181,0.10)",mt:2},onClick:h,children:"بدء الامتحان"})]}),n==="questions"&&s(d,{children:[t(f,{variant:"h6",fontWeight:700,mb:2,textAlign:"center",children:"الأسئلة"}),t(Pt,{sx:{mb:2}}),Ws.questions.map((m,y)=>s(We,{sx:{p:2,mb:2,borderRadius:2,boxShadow:0,bgcolor:"grey.50"},children:[s(f,{variant:"subtitle2",fontWeight:600,mb:1,children:[y+1,". ",m.text,t(Ce,{label:`نقاط: ${m.points}`,color:"info",size:"small",sx:{ml:1}})]}),m.type==="multiple_choice"||m.type==="true_false"?t(Gu,{value:l[m.id]||"",onChange:v=>p(m.id,v.target.value),children:m.options.map((v,S)=>t(kt,{value:v,control:t(Wc,{}),label:v},S))}):t(_e,{fullWidth:!0,multiline:!0,minRows:2,placeholder:"اكتب إجابتك هنا...",value:l[m.id]||"",onChange:v=>p(m.id,v.target.value),sx:{mt:1}})]},m.id)),s(d,{sx:{display:"flex",justifyContent:"center",gap:2,mt:2},children:[t(te,{variant:"outlined",onClick:e,sx:{borderRadius:3,px:3},children:"إلغاء"}),t(te,{variant:"contained",color:"success",endIcon:t(Yw,{}),onClick:x,sx:{borderRadius:99,px:5,py:1.2,fontWeight:"bold",fontSize:18,boxShadow:"0 4px 16px 0 rgba(63,81,181,0.10)"},children:"تسليم الامتحان"})]})]}),n==="result"&&t(CC,{onClose:e})]})})},oD=()=>{try{const e=localStorage.getItem("darkMode");return e!==null?e==="true":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch(e){return console.error("Error loading dark mode preference:",e),!1}},sD={isDarkMode:oD(),isMobileMenuOpen:!1,isNotificationsOpen:!1,activeTab:0},kC=j5({name:"ui",initialState:sD,reducers:{toggleDarkMode:e=>{const n=!e.isDarkMode;e.isDarkMode=n;try{localStorage.setItem("darkMode",n)}catch(a){console.error("Error saving dark mode preference:",a)}},setDarkMode:(e,n)=>{e.isDarkMode=n.payload;try{localStorage.setItem("darkMode",n.payload)}catch(a){console.error("Error saving dark mode preference:",a)}},toggleMobileMenu:e=>{e.isMobileMenuOpen=!e.isMobileMenuOpen},closeMobileMenu:e=>{e.isMobileMenuOpen=!1},toggleNotifications:e=>{e.isNotificationsOpen=!e.isNotificationsOpen},closeNotifications:e=>{e.isNotificationsOpen=!1},setActiveTab:(e,n)=>{e.activeTab=n.payload}}}),{toggleDarkMode:J7,setDarkMode:eI,toggleMobileMenu:tI,closeMobileMenu:rI,toggleNotifications:nI,closeNotifications:iI,setActiveTab:aI}=kC.actions,lD=kC.reducer,cD=({url:e,playing:n,onPlay:a,onPause:l,onProgress:u,onDuration:p,width:h,height:x,style:m})=>{const y=ut.useRef(null);return ut.useEffect(()=>{const v=y.current;if(!v)return;const S=()=>a&&a(),_=()=>l&&l(),k=()=>{u&&v.duration&&u({played:v.currentTime/v.duration,playedSeconds:v.currentTime,loaded:1,loadedSeconds:v.duration})},E=()=>p&&p(v.duration),R=()=>p&&p(v.duration);return v.addEventListener("play",S),v.addEventListener("pause",_),v.addEventListener("timeupdate",k),v.addEventListener("durationchange",E),v.addEventListener("loadedmetadata",R),()=>{v.removeEventListener("play",S),v.removeEventListener("pause",_),v.removeEventListener("timeupdate",k),v.removeEventListener("durationchange",E),v.removeEventListener("loadedmetadata",R)}},[a,l,u,p]),ut.useEffect(()=>{y.current&&(n?y.current.play().catch(v=>console.error("Error playing video:",v)):y.current.pause())},[n]),t("div",{style:q({position:"relative",width:"100%",paddingTop:"56.25%"},m),children:t("video",{ref:y,src:e,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000"},controls:!0,playsInline:!0})})};oe(hr)(({theme:e})=>({height:10,borderRadius:5,[`&.${Cy.colorPrimary}`]:{backgroundColor:e.palette.grey[e.palette.mode==="light"?200:800]},[`& .${Cy.bar}`]:{borderRadius:5,backgroundImage:"linear-gradient(45deg, #3f51b5, #2196f3)"}}));oe(Ke)({position:"relative","& .MuiCircularProgress-circle":{strokeLinecap:"round"}});oe(f)({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:"bold"});const dD=ht`
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
`;oe(Je)(({theme:e})=>({borderRadius:e.shape.borderRadius*2,background:e.palette.mode==="dark"?"rgba(30, 30, 46, 0.8)":"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:`1px solid ${e.palette.divider}`,boxShadow:e.shadows[4],transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",animation:`${dD} 0.5s ease-out forwards`,"&:hover":{transform:"translateY(-4px)",boxShadow:e.shadows[8],borderColor:e.palette.primary.main}}));oe(Je)(({theme:e,active:n})=>({marginBottom:e.spacing(2),borderRadius:e.shape.borderRadius*2,background:n?e.palette.mode==="dark"?"rgba(63, 81, 181, 0.15)":"rgba(63, 81, 181, 0.05)":"transparent",borderLeft:`4px solid ${n?e.palette.primary.main:"transparent"}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderLeft:`4px solid ${e.palette.primary.light}`,background:e.palette.mode==="dark"?"rgba(63, 81, 181, 0.2)":"rgba(63, 81, 181, 0.08)",transform:"translateX(4px)"},"& .MuiCardContent-root":{padding:e.spacing(2)}}));oe(hr)(({theme:e,value:n})=>({height:8,borderRadius:4,backgroundColor:e.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)","& .MuiLinearProgress-bar":{borderRadius:4,background:n===100?`linear-gradient(90deg, ${e.palette.success.main} 0%, ${e.palette.success.light} 100%)`:`linear-gradient(90deg, ${e.palette.primary.main} 0%, ${e.palette.secondary.main} 100%)`,boxShadow:`0 0 10px ${e.palette.primary.main}40`}}));const uD=e=>{const n=[t(bt,{color:"primary"}),t(d6,{color:"secondary"}),t(u6,{color:"success"}),t(h6,{color:"warning"}),t(f6,{color:"info"}),t(qc,{color:"error"})],a=String(e||0);return n[a.charCodeAt(1)%n.length]},hD=e=>{switch(e){case"video":return t(li,{color:"primary"});case"quiz":return t(nr,{color:"secondary"});case"assignment":return t(rn,{color:"warning"});default:return t(nl,{color:"action"})}},fD=({modules:e,expandedModule:n,onModuleClick:a,onLessonClick:l,currentLessonId:u,setActiveQuizId:p,setOpenQuiz:h,setShowQuizResult:x,showFinalExamButton:m,onFinalExamClick:y})=>{const v=Vt();return s(We,{elevation:0,sx:{borderRadius:2,overflow:"hidden",border:`1px solid ${v.palette.divider}`,maxHeight:"calc(100vh - 200px)",overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:v.palette.grey[100]},"&::-webkit-scrollbar-thumb":{backgroundColor:v.palette.grey[400],borderRadius:"3px"}},children:[t(d,{sx:{p:2,bgcolor:v.palette.background.paper,borderBottom:`1px solid ${v.palette.divider}`},children:s(f,{variant:"h6",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:[t(nl,{sx:{ml:1}}),"محتوى الدورة"]})}),s(Fr,{sx:{p:0},children:[(e||[]).map((S,_)=>s(ut.Fragment,{children:[s(zr,{button:!0,onClick:()=>a(S.id),sx:{bgcolor:n===S.id?"action.hover":"background.paper",borderBottom:`1px solid ${v.palette.divider}`,"&:hover":{bgcolor:"action.hover"}},children:[t(Rr,{children:t(d,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",color:"primary.main"},children:uD(S.id)})}),t(ir,{primary:t(f,{variant:"subtitle1",sx:{fontWeight:"bold"},children:S.title}),secondary:s(d,{sx:{display:"flex",alignItems:"center",mt:.5},children:[s(f,{variant:"caption",color:"text.secondary",children:[S.completedLessons," من ",S.totalLessons," دروس"]}),t(d,{sx:{mx:1},children:"•"}),s(f,{variant:"caption",color:"text.secondary",children:[Math.round(S.progress),"% مكتمل"]})]}),sx:{ml:1}}),s(d,{sx:{display:"flex",alignItems:"center"},children:[t(d,{sx:{width:60,mr:1},children:t(hr,{variant:"determinate",value:S.progress,sx:{height:4,borderRadius:2,bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #4facfe 0%, #00f2fe 100%)"}}})}),n===S.id?t(qw,{}):t(gh,{})]})]}),t(D0,{in:n===S.id,timeout:"auto",unmountOnExit:!0,children:t(Fr,{component:"div",disablePadding:!0,children:(S.lessons||[]).map((k,E)=>s(zr,{button:!0,selected:u===k.id,onClick:()=>l(S.id,k.id),sx:{pl:8,pr:2,py:1.5,borderBottom:`1px solid ${v.palette.divider}`,bgcolor:u===k.id?"action.selected":"background.paper","&:hover":{bgcolor:"action.hover"},"&.Mui-selected":{bgcolor:"action.selected","&:hover":{bgcolor:"action.hover"}}},children:[t(Rr,{sx:{minWidth:36},children:k.completed?t(xr,{color:"success",sx:{fontSize:20}}):t(d,{sx:{width:20,height:20,borderRadius:"50%",border:`2px solid ${v.palette.grey[400]}`}})}),t(ir,{primary:s(d,{sx:{display:"flex",alignItems:"center"},children:[t(f,{variant:"body2",sx:{fontWeight:u===k.id?"bold":"normal",color:u===k.id?"primary.main":"text.primary"},children:k.title}),k.type==="quiz"&&t(te,{variant:"outlined",size:"small",startIcon:t(nr,{}),sx:{ml:1,fontSize:"0.75rem",borderRadius:2,px:1.5,py:.5},onClick:R=>{R.stopPropagation(),p&&p(k.quizId||k.id),h&&h(!0),x&&x(!1)},children:"ابدأ الكويز"})]}),secondary:s(d,{sx:{display:"flex",alignItems:"center",mt:.5},children:[s(d,{sx:{display:"flex",alignItems:"center",mr:1.5},children:[hD(k.type),t(f,{variant:"caption",color:"text.secondary",sx:{mr:.5,fontSize:"0.7rem"},children:k.type==="video"?"فيديو":k.type==="quiz"?"اختبار":"تمرين"})]}),t(f,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem"},children:k.duration})]})}),t(xe,{size:"small",edge:"end",children:t(Ic,{sx:{fontSize:20}})})]},k.id))})})]},S.id)),m&&t(zr,{sx:{justifyContent:"center",py:2},children:t(te,{variant:"contained",color:"primary",size:"small",sx:{borderRadius:2,fontWeight:"bold",px:0,py:.5,fontSize:15,minWidth:0,width:"85%",height:38,boxShadow:"0 2px 8px 0 rgba(63,81,181,0.08)",mx:"auto",display:"block",mt:1,mb:1,letterSpacing:1},onClick:y,children:"بدء الامتحان الشامل"})})]})]})},pD=()=>{const{id:e}=er(),n=nt();yh();const a=Vt(),l=Ri(a.breakpoints.down("md")),[u,p]=w.useState("m1"),[h,x]=w.useState(null),[m,y]=w.useState(!0),[v,S]=w.useState(null),[_,k]=w.useState({}),[E,R]=w.useState(null),[W,T]=w.useState(!1),[z,N]=w.useState(!1),[G,J]=w.useState(!0),[H,U]=w.useState("content"),[A,V]=w.useState(0),[Y,P]=w.useState(0),I=w.useRef(null),[B,F]=w.useState(!1),[Q,M]=w.useState(null),[O,C]=w.useState(!1),[X,Z]=w.useState("start"),[j,re]=w.useState(!1),[de,fe]=w.useState(!1),[ce,ie]=w.useState(""),[ge,Ae]=w.useState("info");w.useEffect(()=>{e&&tt()},[e]);const tt=()=>$(null,null,function*(){var Ie,Ve,Se,pt,Zt,ne,$e,Oe,je,Ze,Fe;try{if(y(!0),S(null),!e){S("معرف الدورة غير صحيح"),y(!1);return}const ke=yield xn.getCourseTrackingData(e);if(!ke||!ke.course){S("بيانات الدورة غير متاحة"),y(!1);return}const lt={id:ke.course.id,title:ke.course.title,instructor:ke.course.instructor,instructorAvatar:ke.course.instructor_avatar,category:ke.course.category,level:ke.course.level,duration:ke.course.duration,progress:ke.course.overall_progress,rating:ke.course.rating,totalStudents:ke.course.total_students,lastAccessed:{moduleId:((Ie=ke.course.modules[0])==null?void 0:Ie.id)||"m1",lessonId:((Se=(Ve=ke.course.modules[0])==null?void 0:Ve.lessons[0])==null?void 0:Se.id)||"l1",title:((Zt=(pt=ke.course.modules[0])==null?void 0:pt.lessons[0])==null?void 0:Zt.title)||"الدرس الأول",duration:(($e=(ne=ke.course.modules[0])==null?void 0:ne.lessons[0])==null?void 0:$e.duration_minutes)||15,completion:ke.course.completed_lessons},enrolledDate:(Oe=ke.enrollment)==null?void 0:Oe.enrollment_date,hasFinalExam:ke.course.has_final_exam,modules:(ke.course.modules||[]).map(Ye=>({id:Ye.id,title:Ye.name,progress:Ye.progress,totalLessons:Ye.total_lessons,completedLessons:Ye.completed_lessons,lessons:(Ye.lessons||[]).map(It=>({id:It.id,title:It.title,duration:`${Math.floor(It.duration_minutes/60)}:${(It.duration_minutes%60).toString().padStart(2,"0")}`,type:It.lesson_type,completed:It.completed,videoUrl:It.video_url,content:It.content,resources:It.resources||[]}))})),assignments:ke.assignments||[],exams:ke.exams||[],quizzes:ke.quizzes||[]};if(x(lt),lt.modules&&lt.modules.length>0&&lt.modules[0].lessons&&lt.modules[0].lessons.length>0){const Ye=lt.modules[0].lessons[0];R(q({moduleId:lt.modules[0].id,lessonId:Ye.id},Ye))}}catch(ke){console.error("Error fetching course data:",ke),((je=ke.response)==null?void 0:je.status)===404?S("الدورة غير موجودة أو غير متاحة لك."):((Ze=ke.response)==null?void 0:Ze.status)===403?S("أنت غير مسجل في هذه الدورة."):((Fe=ke.response)==null?void 0:Fe.status)===401?S("يرجى تسجيل الدخول مرة أخرى."):S("حدث خطأ أثناء جلب بيانات الدورة. يرجى المحاولة مرة أخرى.")}finally{y(!1)}}),yt=h?{totalLessons:(h.modules||[]).reduce((Ie,Ve)=>{var Se;return Ie+(((Se=Ve.lessons)==null?void 0:Se.length)||0)},0),completedLessons:(h.modules||[]).reduce((Ie,Ve)=>Ie+(Ve.completedLessons||0),0),completionPercentage:h.progress||0,totalDuration:h.duration||0,totalAssignments:(h.assignments||[]).length,totalExams:(h.exams||[]).length,totalQuizzes:(h.quizzes||[]).length}:{totalLessons:0,completedLessons:0,completionPercentage:0,totalDuration:0,totalAssignments:0,totalExams:0,totalQuizzes:0};h&&(()=>{for(const Ie of h.modules||[]){const Ve=(Ie.lessons||[]).find(Se=>!Se.completed);if(Ve)return{module:Ie,lesson:Ve}}return null})();const wr=Ie=>{p(u===Ie?null:Ie)},fr=(Ie,Ve)=>{const Se=(h.modules||[]).find(pt=>pt.id===Ie);if(Se){const pt=(Se.lessons||[]).find(Zt=>Zt.id===Ve);pt&&(R(q({moduleId:Ie,lessonId:Ve},pt)),T(!0),l&&N(!1))}},ln=Ie=>{P(Ie)},Le=()=>{T(!1),V(0)},Tt=()=>$(null,null,function*(){if(!(!E||!e))try{yield xn.markLessonCompleted(e,E.id),x(Ie=>{const Ve=Ie.modules.map(Se=>{if(Se.id===E.moduleId){const pt=Se.lessons.map(Zt=>Zt.id===E.id?ae(q({},Zt),{completed:!0}):Zt);return ae(q({},Se),{lessons:pt,completedLessons:pt.filter(Zt=>Zt.completed).length})}return Se});return ae(q({},Ie),{modules:Ve})}),pn("تم إكمال الدرس بنجاح!","success"),setTimeout(()=>{or()},2e3)}catch(Ie){console.error("Error marking lesson as completed:",Ie),pn("حدث خطأ أثناء إكمال الدرس","error")}}),or=()=>{if(!E||!h)return;const Ie=h.modules.findIndex(Ve=>Ve.id===E.moduleId);if(Ie>=0){const Ve=h.modules[Ie],Se=Ve.lessons.findIndex(pt=>pt.id===E.id);if(Se<Ve.lessons.length-1){const pt=Ve.lessons[Se+1];fr(Ve.id,pt.id)}else if(Ie<h.modules.length-1){const pt=h.modules[Ie+1];if(pt.lessons.length>0){const Zt=pt.lessons[0];fr(pt.id,Zt.id)}}}},De=()=>{if(!E||!h)return;const Ie=h.modules.findIndex(Ve=>Ve.id===E.moduleId);if(Ie>=0){const Ve=h.modules[Ie],Se=Ve.lessons.findIndex(pt=>pt.id===E.id);if(Se>0){const pt=Ve.lessons[Se-1];fr(Ve.id,pt.id)}else if(Ie>0){const pt=h.modules[Ie-1];if(pt.lessons.length>0){const Zt=pt.lessons[pt.lessons.length-1];fr(pt.id,Zt.id)}}}},Ut=Ie=>$(null,null,function*(){try{if(Ie.file_url){const Ve=document.createElement("a");Ve.href=Ie.file_url,Ve.download=Ie.title,document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve),pn("تم بدء تحميل الملف","success")}else Ie.url&&(window.open(Ie.url,"_blank"),pn("تم فتح الرابط في نافذة جديدة","info"))}catch(Ve){console.error("Error downloading resource:",Ve),pn("حدث خطأ أثناء تحميل الملف","error")}}),Mn=Ie=>$(null,null,function*(){if(!(!E||!e))try{yield xn.trackLessonProgress(e,E.id,{content_type:"video",progress_percentage:Ie.played*100,current_time:Ie.playedSeconds,duration:Y})}catch(Ve){console.error("Error tracking video progress:",Ve)}}),Dn=Ie=>{V(Ie.playedSeconds),(Ie.playedSeconds%10<1||Ie.played>=.95)&&Mn(Ie)},cn=()=>{N(!z)},gi=(Ie,Ve)=>{Ve!=="clickaway"&&fe(!1)},pn=(Ie,Ve="info")=>{ie(Ie),Ae(Ve),fe(!0)},Ei=({instructor:Ie,avatar:Ve})=>s(We,{elevation:0,sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[t(_t,{src:Ve,alt:Ie,sx:{width:56,height:56,mr:2,border:"2px solid",borderColor:"primary.main"}}),s(d,{children:[t(f,{variant:"subtitle2",color:"text.secondary",children:"المعلم"}),t(f,{variant:"h6",sx:{fontWeight:"bold"},children:Ie})]})]}),t(te,{variant:"outlined",fullWidth:!0,size:"small",startIcon:t(l6,{}),sx:{borderRadius:2,textTransform:"none"},children:"مراسلة المعلم"})]}),Ti=({stats:Ie})=>s(We,{elevation:0,sx:{p:2,borderRadius:2,border:"1px solid",borderColor:"divider",mb:2},children:[t(f,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:"إحصائيات الدورة"}),s(d,{sx:{mb:2},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t(f,{variant:"body2",color:"text.secondary",children:"التقدم"}),s(f,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:[Ie.completionPercentage,"%"]})]}),t(hr,{variant:"determinate",value:Ie.completionPercentage,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #4facfe 0%, #00f2fe 100%)"}}})]}),s(se,{container:!0,spacing:1,sx:{mb:1},children:[t(se,{item:!0,xs:6,children:s(d,{sx:{display:"flex",alignItems:"center"},children:[t(d,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"success.light",display:"flex",alignItems:"center",justifyContent:"center",color:"success.dark",mr:1},children:t(xr,{sx:{fontSize:20}})}),s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"مكتمل"}),s(f,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[Ie.completedLessons," دروس"]})]})]})}),t(se,{item:!0,xs:6,children:s(d,{sx:{display:"flex",alignItems:"center"},children:[t(d,{sx:{width:36,height:36,borderRadius:"50%",bgcolor:"warning.light",display:"flex",alignItems:"center",justifyContent:"center",color:"warning.dark",mr:1},children:t(c6,{sx:{fontSize:20}})}),s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"المتبقي"}),s(f,{variant:"subtitle2",sx:{fontWeight:"bold"},children:[Ie.remainingLessons," دروس"]})]})]})})]}),t(te,{variant:"contained",fullWidth:!0,size:"large",startIcon:t(qc,{}),sx:{mt:2,borderRadius:2,textTransform:"none",fontWeight:"bold",py:1.5,background:"linear-gradient(45deg, #4facfe 0%, #00f2fe 100%)",boxShadow:"0 4px 15px rgba(0, 242, 254, 0.3)","&:hover":{boxShadow:"0 6px 20px rgba(0, 242, 254, 0.4)"}},children:"احصل على الشهادة"})]}),yn=Ie=>{k(Ve=>ae(q({},Ve),{[Ie]:!Ve[Ie]}))};return m?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:t(Ke,{size:60,sx:{color:"#7c4dff"}})}):v?s(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default",flexDirection:"column",gap:2},children:[t(Be,{severity:"error",sx:{mb:2},children:v}),t(te,{variant:"contained",onClick:tt,sx:{bgcolor:"#7c4dff"},children:"إعادة المحاولة"})]}):e?h?s(d,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",bgcolor:"background.default"},children:[t(Rn,{}),t(Vc,{position:"sticky",color:"default",elevation:0,sx:{bgcolor:"background.paper",borderBottom:`1px solid ${a.palette.divider}`,display:{xs:"flex",md:"none"}},children:s(Gs,{children:[t(xe,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:cn,sx:{mr:1},children:t(Rw,{})}),t(f,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,fontWeight:"bold"},children:(E==null?void 0:E.title)||h.title})]})}),t(Qe,{maxWidth:!1,sx:{flex:1,py:{xs:2,md:4},px:{xs:1,sm:2,md:4},maxWidth:"100%",width:"100%",margin:0},children:s(d,{sx:{mb:3,display:{xs:"none",md:"block"}},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:[t(d,{sx:{display:"flex",alignItems:"center"},children:s(f,{variant:"body2",color:"text.secondary",children:["الرئيسية / الدورات / ",h.title," / ",(E==null?void 0:E.title)||"لوحة التتبع"]})}),t(te,{startIcon:t(Gt,{}),onClick:()=>n(-1),sx:{borderRadius:2,px:3,py:1,bgcolor:"background.paper",boxShadow:1,"&:hover":{bgcolor:"action.hover"}},children:"العودة"})]}),s(d,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[t(d,{sx:{position:"fixed",bottom:24,right:24,zIndex:1200,display:{xs:"block",md:"none"},"& .MuiFab-root":{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}}},children:t(Xe,{title:z?"إغلاق القائمة":"فتح القائمة",children:t(Vw,{color:"primary","aria-label":"عرض المحتوى",onClick:cn,children:z?t(an,{}):t(nl,{})})})}),t(d,{sx:{width:{xs:"100%",md:G?"350px":"0"},flexShrink:0,overflow:"hidden",transition:"all 0.3s ease-in-out",position:{xs:"fixed",md:"relative"},top:{xs:64,md:0},bottom:0,right:0,zIndex:1100,height:{xs:z?"calc(100vh - 64px + 200px)":0,md:"calc(100vh + 300px)"},bgcolor:"background.paper",boxShadow:{xs:3,md:1},borderRadius:{xs:0,md:2},transform:{xs:z?"translateX(0)":"translateX(100%)",md:"none"},"&:hover":{boxShadow:{md:3}}},children:s(d,{sx:{p:{xs:2,md:2},height:"auto",minHeight:"calc(100%)",display:"flex",flexDirection:"column",overflow:"visible"},children:[t(xe,{onClick:cn,sx:{display:{xs:"flex",md:"none"},position:"absolute",left:8,top:8,zIndex:1},children:t(an,{})}),t(d,{sx:{flex:1,overflowY:"auto",pr:1,maxHeight:"none",minHeight:"calc(100% - 200px)","&::-webkit-scrollbar":{width:"4px",display:"none"},"&:hover":{"&::-webkit-scrollbar":{display:"block"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"4px"}},WebkitOverflowScrolling:"touch"},children:t(fD,{modules:h.modules,expandedModule:u,onModuleClick:wr,onLessonClick:fr,currentLessonId:E==null?void 0:E.id,setActiveQuizId:M,setOpenQuiz:F,setShowQuizResult:C,showFinalExamButton:h.hasFinalExam,onFinalExamClick:()=>re(!0)})}),s(d,{sx:{mt:"auto",pt:2,pb:2,position:"sticky",bottom:0,borderTop:"1px solid",borderColor:"divider",bgcolor:"background.paper",zIndex:1},children:[t(Ei,{instructor:h.instructor,avatar:h.instructorAvatar}),t(d,{sx:{mt:2},children:t(Ti,{stats:yt})})]})]})}),s(d,{sx:{flex:1,minWidth:0},children:[s(Je,{elevation:0,sx:{mb:3,borderRadius:2,overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid",borderColor:"divider"},children:[t(d,{sx:{position:"relative",pt:"56.25%",bgcolor:"black"},children:E?t(cD,{ref:I,url:(E==null?void 0:E.videoUrl)||"https://www.youtube.com/watch?v=ysz5S6PUM-U",width:"100%",height:"100%",playing:W,onPlay:()=>T(!0),onPause:()=>T(!1),onProgress:Dn,onDuration:ln,onEnded:Le,style:{position:"absolute",top:0,left:0,borderRadius:a.shape.borderRadius*2,overflow:"hidden"}}):t(d,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:"white",bgcolor:"background.paper"},children:t(f,{children:"اختر درسًا لبدء المشاهدة"})})}),s(st,{children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[s(d,{sx:{flex:1,mr:2},children:[t(f,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:(E==null?void 0:E.title)||"اختر درسًا لبدء التعلم"}),t(f,{variant:"body2",color:"text.secondary",children:(E==null?void 0:E.content)||"قم بتحديد درس من القائمة الجانبية لبدء التعلم"})]}),s(d,{sx:{display:"flex",gap:1},children:[t(Xe,{title:"إضافة إلى المفضلة",children:t(xe,{onClick:()=>E&&yn(E.id),color:_[E==null?void 0:E.id]?"primary":"default",children:_[E==null?void 0:E.id]?t(fh,{}):t(Xs,{})})}),t(Xe,{title:"مشاركة",children:t(xe,{children:t(ph,{})})}),t(Xe,{title:"المزيد",children:t(xe,{children:t(I0,{})})})]})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[t(te,{variant:"outlined",startIcon:t(Gt,{}),disabled:!E,onClick:De,children:"السابق"}),t(te,{variant:"contained",endIcon:t(xr,{}),disabled:!E,onClick:Tt,sx:{background:"linear-gradient(45deg, #4facfe 0%, #00f2fe 100%)",boxShadow:"0 4px 15px rgba(0, 242, 254, 0.3)","&:hover":{boxShadow:"0 6px 20px rgba(0, 242, 254, 0.4)"}},children:"تمت المشاهدة"}),t(te,{variant:"outlined",endIcon:t(Gt,{sx:{transform:"scaleX(-1)"}}),disabled:!E,onClick:or,children:"التالي"})]})]})]}),t(Je,{elevation:0,sx:{mb:3,borderRadius:2,overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid",borderColor:"divider"},children:s(st,{children:[t(f,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"عن هذا الدرس"}),t(f,{variant:"body1",paragraph:!0,children:(E==null?void 0:E.content)||"لا يوجد وصف متوفر لهذا الدرس. يرجى اختيار درس آخر."}),(E==null?void 0:E.resources)&&E.resources.length>0&&s(d,{sx:{mt:3},children:[t(f,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:"المرفقات والموارد"}),t(d,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:(E.resources||[]).map((Ie,Ve)=>s(We,{elevation:0,sx:{p:1.5,borderRadius:2,display:"flex",alignItems:"center",border:"1px solid",borderColor:"divider",width:{xs:"100%",sm:"calc(50% - 16px)",md:"calc(33.333% - 16px)"},transition:"all 0.2s","&:hover":{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",transform:"translateY(-2px)"}},children:[t(d,{sx:{width:48,height:48,borderRadius:1.5,bgcolor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center",mr:2,flexShrink:0,color:"primary.contrastText"},children:Ie.resource_type==="document"?t(Fg,{}):Ie.resource_type==="video"?t(li,{}):Ie.resource_type==="link"?t(Qt,{}):t(s6,{})}),s(d,{sx:{flex:1,minWidth:0},children:[t(f,{variant:"subtitle2",sx:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Ie.title}),t(f,{variant:"caption",color:"text.secondary",sx:{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Ie.resource_type})]}),t(xe,{size:"small",sx:{ml:1},onClick:()=>Ut(Ie),children:t(Nn,{})})]},Ve))})]})]})})]})]})]})}),t(En,{}),t(_y,{open:B,onClose:()=>F(!1),closeAfterTransition:!0,BackdropComponent:ky,BackdropProps:{timeout:500},children:t(ji,{in:B,children:s(d,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"98vw",sm:600},maxWidth:"98vw",bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:{xs:1,sm:4},outline:"none",maxHeight:"90vh",overflowY:"auto"},children:[t(xe,{onClick:()=>F(!1),sx:{position:"absolute",top:8,left:8,zIndex:10},children:t(an,{})}),O?t(tD,{quizId:Q,onClose:()=>F(!1)}):t(eD,{quizId:Q,onFinish:()=>C(!0),onClose:()=>F(!1)})]})})}),t(_y,{open:j,onClose:()=>re(!1),closeAfterTransition:!0,BackdropComponent:ky,BackdropProps:{timeout:500},children:t(ji,{in:j,children:s(d,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"98vw",sm:700},maxWidth:"98vw",bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:{xs:1,sm:4},outline:"none",maxHeight:"90vh",overflowY:"auto"},children:[t(xe,{onClick:()=>re(!1),sx:{position:"absolute",top:8,left:8,zIndex:10},children:t(an,{})}),t(aD,{onClose:()=>re(!1)})]})})}),t(fn,{open:de,autoHideDuration:6e3,onClose:gi,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t(Be,{onClose:gi,severity:ge,sx:{width:"100%"},children:ce})})]}):t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:t(f,{children:"لا توجد بيانات متاحة"})}):s(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default",flexDirection:"column",gap:2},children:[t(Be,{severity:"error",sx:{mb:2},children:"معرف الدورة غير صحيح"}),t(te,{variant:"contained",onClick:()=>n("/student/my-courses"),sx:{bgcolor:"#7c4dff"},children:"العودة إلى كورساتي"})]})},aw={getCertificates:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/certificates/certificates/",{params:e})).data}catch(a){throw console.error("Error fetching certificates:",a),a}}),getMyCertificates:()=>$(null,null,function*(){try{return(yield ee.get("/api/certificates/my-certificates/")).data}catch(e){throw console.error("Error fetching my certificates:",e),e}}),getCertificate:e=>$(null,null,function*(){try{return(yield ee.get(`/api/certificates/certificates/${e}/`)).data}catch(n){throw console.error("Error fetching certificate:",n),n}}),createCertificate:e=>$(null,null,function*(){try{return(yield ee.post("/api/certificates/certificates/",e)).data}catch(n){throw console.error("Error creating certificate:",n),n}}),updateCertificate:(e,n)=>$(null,null,function*(){try{return(yield ee.patch(`/api/certificates/certificates/${e}/`,n)).data}catch(a){throw console.error("Error updating certificate:",a),a}}),deleteCertificate:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/certificates/certificates/${e}/`)).data}catch(n){throw console.error("Error deleting certificate:",n),n}}),verifyCertificate:e=>$(null,null,function*(){try{return(yield ee.get(`/api/certificates/verify/${e}/`)).data}catch(n){throw console.error("Error verifying certificate:",n),n}}),getTemplates:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/certificates/templates/",{params:e})).data}catch(a){throw console.error("Error fetching templates:",a),a}}),getTemplate:e=>$(null,null,function*(){try{return(yield ee.get(`/api/certificates/templates/${e}/`)).data}catch(n){throw console.error("Error fetching template:",n),n}}),createTemplate:e=>$(null,null,function*(){try{return(yield ee.post("/api/certificates/templates/",e)).data}catch(n){throw console.error("Error creating template:",n),n}}),updateTemplate:(e,n)=>$(null,null,function*(){try{return(yield ee.patch(`/api/certificates/templates/${e}/`,n)).data}catch(a){throw console.error("Error updating template:",a),a}}),deleteTemplate:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/certificates/templates/${e}/`)).data}catch(n){throw console.error("Error deleting template:",n),n}}),getPresetTemplates:()=>$(null,null,function*(){try{return(yield ee.get("/api/certificates/preset-templates/")).data}catch(e){throw console.error("Error fetching preset templates:",e),e}}),createFromPreset:e=>$(null,null,function*(){try{return(yield ee.post("/api/certificates/templates/create-from-preset/",e)).data}catch(n){throw console.error("Error creating template from preset:",n),n}}),getSignatures:()=>$(null,null,function*(){try{return(yield ee.get("/api/certificates/signatures/")).data}catch(e){throw console.error("Error fetching signatures:",e),e}}),createSignature:e=>$(null,null,function*(){try{return(yield ee.post("/api/certificates/signatures/",e)).data}catch(n){throw console.error("Error creating signature:",n),n}}),getStats:()=>$(null,null,function*(){try{return(yield ee.get("/api/certificates/stats/dashboard/")).data}catch(e){throw console.error("Error fetching certificate stats:",e),e}}),downloadPDF:e=>$(null,null,function*(){try{return(yield ee.get(`/api/certificates/certificates/${e}/download/`,{responseType:"blob"})).data}catch(n){throw console.error("Error downloading certificate PDF:",n),n}}),generateQRCode:e=>$(null,null,function*(){try{return(yield ee.post(`/api/certificates/certificates/${e}/generate-qr/`)).data}catch(n){throw console.error("Error generating QR code:",n),n}})},gD={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},mD=(e,n,a)=>{const l=gD[e];let u;return typeof l=="string"?u=l:n===1?u=l.one:n===2?u=l.two:n<=10?u=l.threeToTen.replace("{{count}}",String(n)):u=l.other.replace("{{count}}",String(n)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"خلال "+u:"منذ "+u:u},xD={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},bD={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},yD={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vD={date:Hp({formats:xD,defaultWidth:"full"}),time:Hp({formats:bD,defaultWidth:"full"}),dateTime:Hp({formats:yD,defaultWidth:"full"})},wD={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},SD=e=>wD[e],CD={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},kD={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},_D={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},AD={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},zD={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},RD={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},ED=e=>String(e),TD={ordinalNumber:ED,era:ic({values:CD,defaultWidth:"wide"}),quarter:ic({values:kD,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ic({values:_D,defaultWidth:"wide"}),day:ic({values:AD,defaultWidth:"wide"}),dayPeriod:ic({values:zD,defaultWidth:"wide",formattingValues:RD,defaultFormattingWidth:"wide"})},MD=/^(\d+)(th|st|nd|rd)?/i,DD=/\d+/i,ID={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},WD={any:[/قبل/,/بعد/]},$D={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},OD={any:[/1/i,/2/i,/3/i,/4/i]},LD={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},BD={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},PD={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},jD={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},ND={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},FD={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},HD={ordinalNumber:Y6({matchPattern:MD,parsePattern:DD,valueCallback:e=>parseInt(e,10)}),era:ac({matchPatterns:ID,defaultMatchWidth:"wide",parsePatterns:WD,defaultParseWidth:"any"}),quarter:ac({matchPatterns:$D,defaultMatchWidth:"wide",parsePatterns:OD,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ac({matchPatterns:LD,defaultMatchWidth:"wide",parsePatterns:BD,defaultParseWidth:"any"}),day:ac({matchPatterns:PD,defaultMatchWidth:"wide",parsePatterns:jD,defaultParseWidth:"any"}),dayPeriod:ac({matchPatterns:ND,defaultMatchWidth:"any",parsePatterns:FD,defaultParseWidth:"any"})},VD={code:"ar",formatDistance:mD,formatLong:vD,formatRelative:SD,localize:TD,match:HD,options:{weekStartsOn:6,firstWeekContainsDate:1}},UD=()=>{const[e,n]=w.useState([]),[a,l]=w.useState(!0),[u,p]=w.useState(null),[h,x]=w.useState(null),[m,y]=w.useState(!1),[v,S]=w.useState("all"),[_,k]=w.useState(""),E=Vt(),R=Ri(E.breakpoints.down("md"));w.useEffect(()=>{W()},[]);const W=()=>$(null,null,function*(){try{l(!0),p(null);const V=yield aw.getMyCertificates();n(V)}catch(V){console.error("Error fetching certificates:",V),p("حدث خطأ أثناء تحميل الشهادات. يرجى المحاولة مرة أخرى.")}finally{l(!1)}}),T=V=>{x(V),y(!0)},z=V=>$(null,null,function*(){try{const Y=yield aw.downloadPDF(V),P=window.URL.createObjectURL(Y),I=document.createElement("a");I.href=P,I.download=`certificate-${V}.pdf`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(P)}catch(Y){console.error("Error downloading certificate:",Y),alert("حدث خطأ أثناء تحميل الشهادة")}}),N=V=>{const Y=`${window.location.origin}/certificates/verify/${V.verification_code}`;navigator.share?navigator.share({title:`شهادة ${V.course_name}`,text:`شهادة إكمال دورة ${V.course_name}`,url:Y}):(navigator.clipboard.writeText(Y),alert("تم نسخ رابط التحقق من الشهادة"))},G=V=>{const Y=`${window.location.origin}/certificates/verify/${V.verification_code}`;window.open(Y,"_blank")},J=V=>{switch(V){case"verified":return"success";case"pending":return"warning";case"failed":return"error";default:return"default"}},H=V=>{switch(V){case"verified":return"تم التحقق";case"pending":return"في انتظار التحقق";case"failed":return"فشل التحقق";default:return"غير محدد"}},U=e.filter(V=>{var I,B;const Y=v==="all"||V.verification_status===v,P=((I=V.course_name)==null?void 0:I.toLowerCase().includes(_.toLowerCase()))||((B=V.certificate_id)==null?void 0:B.toLowerCase().includes(_.toLowerCase()));return Y&&P}),A=V=>{try{return Q6(new Date(V),"dd MMMM yyyy",{locale:VD})}catch(Y){return V}};return a?s(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:2,children:[t(Ke,{size:60}),t(f,{variant:"h6",color:"text.secondary",children:"جاري تحميل الشهادات..."})]}):u?s(Qe,{maxWidth:"md",sx:{mt:4},children:[t(Be,{severity:"error",sx:{mb:2},children:u}),t(te,{variant:"contained",onClick:W,startIcon:t(No,{}),children:"إعادة المحاولة"})]}):s(d,{sx:{p:{xs:1,md:3}},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(bt,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"شهاداتي"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"عرض جميع الشهادات التي حصلت عليها من الدورات المكتملة"})]})]}),s(Qe,{maxWidth:"lg",sx:{py:4},children:[s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(bt,{sx:{color:"#ff9800",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary",children:e.length}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي الشهادات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Bp,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:e.filter(V=>V.verification_status==="verified").length}),t(f,{variant:"caption",color:"text.secondary",children:"شهادات مؤكدة"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(zn,{sx:{color:"#f57c00",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"warning.main",children:e.filter(V=>V.verification_status==="pending").length}),t(f,{variant:"caption",color:"text.secondary",children:"في انتظار التحقق"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(pa,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[s(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[e.length>0?Math.round(e.reduce((V,Y)=>V+(Y.final_grade||0),0)/e.length):0,"%"]}),t(f,{variant:"caption",color:"text.secondary",children:"متوسط الدرجات"})]})]})]}),t(We,{elevation:1,sx:{p:3,mb:3},children:s(se,{container:!0,spacing:2,alignItems:"center",children:[t(se,{item:!0,xs:12,md:6,children:s(d,{display:"flex",gap:1,flexWrap:"wrap",children:[t(Ce,{label:"جميع الشهادات",onClick:()=>S("all"),color:v==="all"?"primary":"default",variant:v==="all"?"filled":"outlined"}),t(Ce,{label:"مؤكدة",onClick:()=>S("verified"),color:v==="verified"?"success":"default",variant:v==="verified"?"filled":"outlined"}),t(Ce,{label:"في انتظار التحقق",onClick:()=>S("pending"),color:v==="pending"?"warning":"default",variant:v==="pending"?"filled":"outlined"})]})}),t(se,{item:!0,xs:12,md:6,children:s(d,{display:"flex",gap:1,children:[s(d,{flex:1,position:"relative",children:[t(Vi,{sx:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:"text.secondary"}}),t("input",{type:"text",placeholder:"البحث في الشهادات...",value:_,onChange:V=>k(V.target.value),style:{width:"100%",padding:"12px 12px 12px 40px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"14px"}})]}),t(te,{variant:"outlined",onClick:W,startIcon:t(No,{}),children:"تحديث"})]})})]})}),U.length===0?s(We,{elevation:1,sx:{p:8,textAlign:"center"},children:[t(bt,{sx:{fontSize:80,color:"text.secondary",mb:2}}),t(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"لا توجد شهادات"}),t(f,{variant:"body2",color:"text.secondary",children:_||v!=="all"?"لا توجد شهادات تطابق معايير البحث المحددة":"لم تحصل على أي شهادات بعد. أكمل الدورات للحصول على شهاداتك!"})]}):t(se,{container:!0,spacing:3,children:U.map(V=>t(se,{item:!0,xs:12,md:6,lg:4,children:t(Je,{elevation:3,sx:{height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:E.shadows[8]}},children:s(st,{sx:{p:3},children:[s(d,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[s(d,{children:[t(f,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:V.course_name||"دورة غير محددة"}),t(Ce,{label:H(V.verification_status),color:J(V.verification_status),size:"small",icon:V.verification_status==="verified"?t(Bp,{}):void 0})]}),t(_t,{sx:{bgcolor:"primary.main",width:50,height:50},children:t(bt,{})})]}),t(Pt,{sx:{my:2}}),s(jr,{spacing:1.5,mb:3,children:[s(d,{display:"flex",alignItems:"center",gap:1,children:[t(rn,{fontSize:"small",color:"action"}),s(f,{variant:"body2",color:"text.secondary",children:["رقم الشهادة: ",V.certificate_id]})]}),s(d,{display:"flex",alignItems:"center",gap:1,children:[t(zn,{fontSize:"small",color:"action"}),s(f,{variant:"body2",color:"text.secondary",children:["تاريخ الإصدار: ",A(V.date_issued)]})]}),V.final_grade&&s(d,{display:"flex",alignItems:"center",gap:1,children:[t(pa,{fontSize:"small",color:"action"}),s(f,{variant:"body2",color:"text.secondary",children:["الدرجة النهائية: ",V.final_grade,"%"]})]})]}),s(d,{display:"flex",gap:1,flexWrap:"wrap",children:[t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",onClick:()=>T(V),color:"primary",children:t(Ir,{})})}),t(Xe,{title:"تحميل PDF",children:t(xe,{size:"small",onClick:()=>z(V.id),color:"success",children:t(Nn,{})})}),t(Xe,{title:"مشاركة",children:t(xe,{size:"small",onClick:()=>N(V),color:"info",children:t(ph,{})})}),t(Xe,{title:"طباعة",children:t(xe,{size:"small",onClick:()=>G(V),color:"secondary",children:t(p6,{})})})]})]})})},V.id))}),t(yr,{open:m,onClose:()=>y(!1),maxWidth:"md",fullWidth:!0,fullScreen:R,children:h&&s(Bt,{children:[t(Wr,{children:s(d,{display:"flex",alignItems:"center",gap:2,children:[t(bt,{color:"primary"}),t(f,{variant:"h6",children:"تفاصيل الشهادة"})]})}),t(br,{children:s(se,{container:!0,spacing:3,children:[s(se,{item:!0,xs:12,md:6,children:[t(f,{variant:"h6",gutterBottom:!0,children:"معلومات الدورة"}),s(jr,{spacing:2,children:[s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"اسم الدورة"}),t(f,{variant:"body1",fontWeight:"medium",children:h.course_name})]}),s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"رقم الشهادة"}),t(f,{variant:"body1",fontWeight:"medium",children:h.certificate_id})]}),s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"رمز التحقق"}),t(f,{variant:"body1",fontWeight:"medium",fontFamily:"monospace",children:h.verification_code})]})]})]}),s(se,{item:!0,xs:12,md:6,children:[t(f,{variant:"h6",gutterBottom:!0,children:"معلومات الإصدار"}),s(jr,{spacing:2,children:[s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"تاريخ الإصدار"}),t(f,{variant:"body1",fontWeight:"medium",children:A(h.date_issued)})]}),s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"حالة التحقق"}),t(Ce,{label:H(h.verification_status),color:J(h.verification_status),icon:h.verification_status==="verified"?t(Bp,{}):void 0})]}),h.final_grade&&s(d,{children:[t(f,{variant:"body2",color:"text.secondary",children:"الدرجة النهائية"}),s(f,{variant:"body1",fontWeight:"medium",children:[h.final_grade,"%"]})]})]})]})]})}),s($r,{children:[t(te,{onClick:()=>y(!1),children:"إغلاق"}),t(te,{variant:"contained",onClick:()=>z(h.id),startIcon:t(Nn,{}),children:"تحميل PDF"})]})]})})]})]})},Pg=oe(Ce)(({status:e})=>q(q(q(q({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},e==="submitted"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),e==="graded"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),e==="pending"&&{backgroundColor:"#fff3e0",color:"#f57c00"}),e==="overdue"&&{backgroundColor:"#ffebee",color:"#d32f2f"})),qD=()=>{var Q,M,O;const[e,n]=w.useState(0),[a,l]=w.useState(!1),[u,p]=w.useState(null),[h,x]=w.useState(!1),[m,y]=w.useState(null),[v,S]=w.useState(0),[_,k]=w.useState(10),[E,R]=w.useState([]),[W,T]=w.useState(!0),[z,N]=w.useState(null),G=nt();w.useEffect(()=>{$(null,null,function*(){T(!0),N(null);try{const X=yield Kt.getAssignments();console.log("Fetched assignments:",X);const Z=X.results||X||[];R(Z)}catch(X){console.error("Error fetching assignments:",X),N("تعذر تحميل الواجبات. يرجى المحاولة مرة أخرى.")}finally{T(!1)}})},[]);const J={totalAssignments:E.length,submitted:E.filter(C=>C.submission_status==="submitted"||C.submission_status==="graded").length,pending:E.filter(C=>C.submission_status==="pending"||!C.submission_status).length,averageGrade:Math.round(E.filter(C=>C.grade!==null).reduce((C,X)=>C+(X.grade||0),0)/E.filter(C=>C.grade!==null).length)||0},H=C=>{const X=C.submission_status,Z=C.is_late;return X==="submitted"?Z?"مُرسل متأخر":"مُرسل":X==="graded"?"مُقيم":X==="pending"||!X?"لم يتم التسليم":C.is_overdue?"منتهي الصلاحية":"غير محدد"},U=C=>{p(C),l(!0)},A=C=>{G(`/student/assignments/${C}/submit`)},V=C=>$(null,null,function*(){try{const X=yield Kt.getMySubmissions({assignment:C.id});if(X&&X.length>0){const Z=X[0];y({assignment:C,submission:Z}),x(!0)}}catch(X){console.error("Error fetching grade:",X)}}),Y=(C,X)=>$(null,null,function*(){try{if(!X){console.error("No file URL provided");return}let Z=X;X.startsWith("http")||(Z=`http://localhost:8000${X}`);const j=document.createElement("a");j.href=Z,j.download=C||"assignment_file",j.target="_blank",document.body.appendChild(j),j.click(),document.body.removeChild(j),console.log("Downloading file:",C)}catch(Z){console.error("Error downloading file:",Z)}}),P=(C,X)=>{S(X)},I=C=>{k(parseInt(C.target.value,10)),S(0)},B=E.filter(C=>e===0?!0:e===1?C.submission_status==="pending"||!C.submission_status:e===2?C.submission_status==="submitted"||C.submission_status==="graded":e===3?C.is_late||C.is_overdue:!0),F=B.slice(v*_,v*_+_);return W?t(d,{className:"assignments-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:t(Ke,{size:60})}):z?s(d,{className:"assignments-container",children:[t(Be,{severity:"error",sx:{mb:2},children:z}),t(te,{onClick:()=>window.location.reload(),variant:"contained",children:"إعادة المحاولة"})]}):s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(rn,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"واجباتي"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"متابعة الواجبات والتسليمات والدرجات"})]})]}),s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(rn,{sx:{color:"#0e5181",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary",children:J.totalAssignments}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي الواجبات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Ua,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:J.submitted}),t(f,{variant:"caption",color:"text.secondary",children:"تم التسليم"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(g6,{sx:{color:"#f57c00",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"warning.main",children:J.pending}),t(f,{variant:"caption",color:"text.secondary",children:"قيد الانتظار"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(ya,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[s(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[J.averageGrade,"%"]}),t(f,{variant:"caption",color:"text.secondary",children:"متوسط الدرجات"})]})]})]}),t(We,{className:"assignments-tabs",children:s(bn,{value:e,onChange:(C,X)=>n(X),children:[t(ft,{label:"جميع الواجبات"}),t(ft,{label:"قيد الانتظار"}),t(ft,{label:"تم التسليم"}),t(ft,{label:"متأخر"})]})}),s(We,{className:"assignments-table",sx:{width:"100%",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[t(pi,{sx:{maxHeight:600},children:s(ui,{stickyHeader:!0,children:[t(hi,{children:s(Jt,{sx:{backgroundColor:"#f8f9fa"},children:[t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"عنوان الواجب"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"المقرر"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"الحالة"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"تاريخ التسليم"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"الدرجة"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"النتيجة"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0",textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:F.map(C=>{var j,re,de;const Z=new Date>new Date(C.due_date)&&(C.submission_status==="pending"||!C.submission_status)?"overdue":C.submission_status;return s(Jt,{sx:{"&:hover":{backgroundColor:"#f8f9fa"},transition:"background-color 0.2s ease"},children:[t(ye,{children:s(d,{className:"table-cell-content",children:[t(f,{className:"table-cell-title",variant:"subtitle1",fontWeight:600,color:"#2c3e50",sx:{mb:.5},children:C.title}),t(f,{className:"table-cell-description",variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:C.description}),s(d,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:1},children:[C.has_questions&&t(Ce,{label:`${C.questions_count||0} سؤال`,size:"small",icon:t(nr,{}),variant:"outlined",sx:{borderColor:"#0e5181",color:"#0e5181",fontSize:"0.7rem"}}),C.has_file_upload&&t(Ce,{label:"رفع ملف",size:"small",icon:t(zi,{}),variant:"outlined",sx:{borderColor:"#2e7d32",color:"#2e7d32",fontSize:"0.7rem"}})]})]})}),s(ye,{children:[s(d,{className:"table-cell-meta",children:[t(bt,{sx:{color:"#0e5181",fontSize:18}}),t(f,{variant:"body2",fontWeight:500,children:C.course_title||((j=C.course)==null?void 0:j.title)})]}),C.module_name||((re=C.module)==null?void 0:re.name)&&t(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:C.module_name||((de=C.module)==null?void 0:de.name)})]}),t(ye,{children:t(Pg,{label:H(C),status:Z,size:"small"})}),s(ye,{children:[t(f,{variant:"body2",color:"text.secondary",children:new Date(C.due_date).toLocaleDateString("en-GB")}),t(f,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:new Date(C.due_date).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]}),t(ye,{children:s(f,{variant:"body2",fontWeight:500,color:"#2c3e50",children:[C.points," نقطة"]})}),t(ye,{children:C.submission_status==="submitted"||C.submission_status==="graded"?s(d,{className:"table-progress-container",children:[s(f,{variant:"body2",fontWeight:600,color:"success.main",sx:{mb:.5},children:[C.grade||0,"/",C.points]}),t(hr,{className:"table-progress-bar",variant:"determinate",value:(C.grade||0)/C.points*100,sx:{height:6,borderRadius:3,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #e5978b 0%, #66bb6a 100%)"}}}),s(f,{variant:"caption",color:"text.secondary",children:[Math.round((C.grade||0)/C.points*100),"%"]})]}):t(f,{variant:"body2",color:"text.secondary",children:"لم يتم التسليم"})}),t(ye,{children:s(d,{className:"table-cell-actions",children:[t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",onClick:()=>U(C),sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(103, 58, 183, 0.1)"}},children:t(Ir,{})})}),(C.submission_status==="pending"||!C.submission_status)&&t(Xe,{title:"تسليم الواجب",children:t(xe,{size:"small",onClick:()=>A(C.id),sx:{color:"#2e7d32","&:hover":{backgroundColor:"rgba(46, 125, 50, 0.1)"}},children:t(Ua,{})})}),C.assignment_file&&t(Xe,{title:"تحميل الملف",children:t(xe,{size:"small",onClick:()=>Y("assignment_file",C.assignment_file),sx:{color:"#1976d2","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)"}},children:t(Nn,{})})}),(C.submission_status==="submitted"||C.submission_status==="graded")&&t(Xe,{title:"عرض التقييم",children:t(xe,{size:"small",onClick:()=>V(C),sx:{color:"#f57c00","&:hover":{backgroundColor:"rgba(245, 124, 0, 0.1)"}},children:t(Ay,{})})})]})})]},C.id)})})]})}),t(Xa,{rowsPerPageOptions:[5,10,25,50],component:"div",count:B.length,rowsPerPage:_,page:v,onPageChange:P,onRowsPerPageChange:I,labelRowsPerPage:"صفوف في الصفحة:",labelDisplayedRows:({from:C,to:X,count:Z})=>`${C}-${X} من ${Z}`,sx:{backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0"}})]}),t(yr,{open:a,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden",direction:"rtl"}},children:u&&s(Bt,{children:[s(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(rn,{sx:{fontSize:28}}),t(f,{variant:"h6",fontWeight:700,children:"تفاصيل الواجب"})]}),t(xe,{onClick:()=>l(!1),sx:{color:"white"},children:t(ci,{})})]}),t(br,{sx:{p:4,backgroundColor:"#f8f9fa",direction:"rtl"},children:s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{children:[t(f,{variant:"h5",fontWeight:600,color:"primary",sx:{mb:2,textAlign:"right"},children:u.title}),t(f,{variant:"body1",sx:{color:"#666",lineHeight:1.8,textAlign:"right",backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",minHeight:80},children:u.description||"لا يوجد وصف للواجب"})]}),t(Pt,{}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:"معلومات الواجب"}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,md:6,children:s(d,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(bt,{sx:{color:"#0e5181"}}),s(f,{variant:"body1",fontWeight:500,sx:{textAlign:"right"},children:["المقرر: ",u.course_title||((Q=u.course)==null?void 0:Q.title)]})]}),(u.module_name||((M=u.module)==null?void 0:M.name))&&s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Yc,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["الوحدة: ",u.module_name||((O=u.module)==null?void 0:O.name)]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(pa,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["الدرجة: ",u.points," نقطة"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Pg,{label:H(u),status:u.submission_status||"pending",size:"small"}),t(f,{variant:"body2",sx:{textAlign:"right"},children:"الحالة"})]})]})}),t(se,{item:!0,xs:12,md:6,children:s(d,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Tn,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["تاريخ التسليم: ",new Date(u.due_date).toLocaleString("ar-SA")]})]}),u.allow_late_submissions&&s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Qw,{sx:{color:"#f57c00"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["يسمح بالتسليم المتأخر (خصم ",u.late_submission_penalty,"%)"]})]}),u.submission_date&&s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Ua,{sx:{color:"#2e7d32"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["تاريخ التسليم: ",new Date(u.submission_date).toLocaleString("ar-SA")]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(on,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["تاريخ الإنشاء: ",new Date(u.created_at).toLocaleString("ar-SA")]})]})]})})]})]}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:"معلومات إضافية"}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,md:6,children:s(d,{sx:{backgroundColor:"white",p:2,borderRadius:2,border:"1px solid #e0e0e0"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t(nr,{sx:{color:"#0e5181",fontSize:20}}),s(f,{variant:"body2",sx:{textAlign:"right"},children:["عدد الأسئلة: ",u.questions_count||0]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t(zi,{sx:{color:"#2e7d32",fontSize:20}}),t(f,{variant:"body2",sx:{textAlign:"right"},children:u.has_file_upload?"يسمح برفع ملفات":"لا يسمح برفع ملفات"})]})]})}),t(se,{item:!0,xs:12,md:6,children:s(d,{sx:{backgroundColor:"white",p:2,borderRadius:2,border:"1px solid #e0e0e0"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t(Ui,{sx:{color:"#666",fontSize:20}}),s(f,{variant:"body2",sx:{textAlign:"right"},children:["إجمالي الطلاب: ",u.total_students||0]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t(Ua,{sx:{color:"#2e7d32",fontSize:20}}),s(f,{variant:"body2",sx:{textAlign:"right"},children:["تم التسليم: ",u.submissions_count||0]})]})]})})]})]}),(u.submission_status==="submitted"||u.submission_status==="graded")&&s(Bt,{children:[t(Pt,{}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:3},children:"التقييم"}),s(d,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",textAlign:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:2},children:[s(f,{variant:"h3",fontWeight:700,color:"success.main",children:[u.grade||0,"/",u.points]}),s(f,{variant:"h5",color:"text.secondary",children:["(",Math.round((u.grade||0)/u.points*100),"%)"]})]}),t(hr,{variant:"determinate",value:(u.grade||0)/u.points*100,sx:{height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)"}}}),u.feedback&&s(Be,{severity:"info",sx:{mt:3,textAlign:"right"},children:[t(f,{variant:"body1",fontWeight:500,gutterBottom:!0,children:"ملاحظات المعلم:"}),t(f,{variant:"body2",children:u.feedback})]})]})]})]})]})}),s($r,{sx:{p:3,backgroundColor:"#f8f9fa",direction:"rtl"},children:[(u.submission_status==="pending"||!u.submission_status)&&t(te,{variant:"contained",onClick:()=>{l(!1),A(u.id)},sx:{borderRadius:2,px:4,py:1.5,fontWeight:700,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"تسليم الواجب"}),t(te,{onClick:()=>l(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600},children:"إغلاق"})]})]})}),t(yr,{open:h,onClose:()=>x(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden"}},children:m&&s(Bt,{children:[s(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(Ay,{sx:{fontSize:28}}),t(f,{variant:"h6",fontWeight:700,children:"تقييم الواجب"})]}),t(xe,{onClick:()=>x(!1),sx:{color:"white"},children:t(ci,{})})]}),t(br,{sx:{p:4,backgroundColor:"#f8f9fa"},children:s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"white",borderRadius:2},children:[t(rn,{sx:{color:"#0e5181",fontSize:32}}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,children:m.assignment.title}),t(f,{variant:"body2",color:"text.secondary",children:m.assignment.course_title})]})]}),s(se,{container:!0,spacing:3,children:[s(se,{item:!0,xs:12,md:6,children:[t(f,{variant:"h6",gutterBottom:!0,children:"تفاصيل التسليم"}),s(Fr,{dense:!0,children:[s(zr,{children:[t(Rr,{children:t(Tn,{})}),t(ir,{primary:"تاريخ التسليم",secondary:new Date(m.submission.submitted_at).toLocaleString("en-GB")})]}),s(zr,{children:[t(Rr,{children:t(Pg,{label:H(m.assignment,m.submission.is_late),status:m.submission.status,size:"small"})}),t(ir,{primary:"الحالة",secondary:m.submission.is_late?"متأخر":"في الوقت المحدد"})]})]})]}),s(se,{item:!0,xs:12,md:6,children:[t(f,{variant:"h6",gutterBottom:!0,children:"التقييم"}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[s(f,{variant:"h4",fontWeight:700,color:"success.main",children:[m.submission.grade||0,"/",m.assignment.points]}),s(f,{variant:"body1",color:"text.secondary",children:["(",Math.round((m.submission.grade||0)/m.assignment.points*100),"%)"]})]}),m.submission.feedback&&s(Be,{severity:"info",sx:{mt:2},children:[t(f,{variant:"body1",fontWeight:500,gutterBottom:!0,children:"ملاحظات المعلم:"}),t(f,{variant:"body2",children:m.submission.feedback})]})]})]}),m.submission.question_responses&&m.submission.question_responses.length>0&&s(Bt,{children:[t(Pt,{}),s(d,{children:[t(f,{variant:"h6",gutterBottom:!0,children:"إجاباتك على الأسئلة"}),m.submission.question_responses.map((C,X)=>s(d,{sx:{mb:2,p:2,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0"},children:[s(f,{variant:"subtitle1",fontWeight:600,color:"primary",gutterBottom:!0,children:["السؤال ",X+1,": ",C.question_text||"سؤال"]}),C.text_answer&&s(f,{variant:"body2",sx:{mb:1},children:[t("strong",{children:"إجابتك النصية:"})," ",C.text_answer]}),C.selected_answer_text&&s(f,{variant:"body2",sx:{mb:1},children:[t("strong",{children:"إجابتك المختارة:"})," ",C.selected_answer_text]}),C.file_answer&&s(d,{sx:{mb:1},children:[t(f,{variant:"body2",fontWeight:600,children:"الملف المرفوع:"}),t(te,{variant:"text",startIcon:t(zi,{}),onClick:()=>window.open(C.file_answer,"_blank"),size:"small",children:"عرض الملف"})]}),C.points_earned!==void 0&&s(f,{variant:"body2",color:"success.main",fontWeight:600,children:["الدرجة المكتسبة: ",C.points_earned]})]},C.id||X))]})]})]})}),t($r,{sx:{p:3,backgroundColor:"#f8f9fa"},children:t(te,{onClick:()=>x(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600},children:"إغلاق"})})]})})]})},ow=oe(Ce)(({status:e})=>q(q(q({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},e==="active"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),e==="inactive"&&{backgroundColor:"#ffebee",color:"#d32f2f"}),e==="draft"&&{backgroundColor:"#fff3e0",color:"#f57c00"})),YD=()=>{const[e,n]=w.useState(0),[a,l]=w.useState(!1),[u,p]=w.useState(null),[h,x]=w.useState(0),[m,y]=w.useState(10),v=nt(),[S,_]=w.useState([]),[k,E]=w.useState(!0),[R,W]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{$(null,null,function*(){var B,F;E(!0);try{const Q=yield Kt.getAssignments();console.log("Assignments API response:",Q);const M=Array.isArray(Q==null?void 0:Q.results)?Q.results:Array.isArray(Q)?Q:[];_(M),W({open:!0,message:`تم تحميل ${M.length} واجب بنجاح`,severity:"success"})}catch(Q){console.error("Error fetching assignments:",Q),W({open:!0,message:`تعذر تحميل الواجبات: ${((F=(B=Q==null?void 0:Q.response)==null?void 0:B.data)==null?void 0:F.detail)||Q.message}`,severity:"error"}),_([])}finally{E(!1)}})},[]);const T={totalAssignments:S.length,activeAssignments:S.filter(I=>I.is_active).length,totalSubmissions:S.reduce((I,B)=>I+B.submissions_count,0),totalGraded:S.reduce((I,B)=>I+B.graded_count,0),averageGrade:Math.round(S.filter(I=>I.average_grade>0).reduce((I,B)=>I+B.average_grade,0)/S.filter(I=>I.average_grade>0).length)},z=I=>{switch(I){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return"غير محدد"}},N=()=>{v("/teacher/assignments/new")},G=I=>{p(I),l(!0)},J=I=>{v(`/teacher/assignments/${I}/edit`)},H=I=>{v(`/teacher/assignments/${I}/submissions`)},U=I=>{v(`/teacher/assignments/${I}/questions`)},A=(I,B)=>{x(B)},V=I=>{y(parseInt(I.target.value,10)),x(0)},Y=S.filter(I=>e===0?!0:e===1?I.is_active:e===2?!I.is_active:e===3?I.submissions_count>0:!0),P=Y.slice(h*m,h*m+m);return s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(rn,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة الواجبات"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إنشاء وإدارة الواجبات ومتابعة تسليمات الطلاب"})]})]}),s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(rn,{sx:{color:"#ff6b6b",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"error.main",children:T.totalAssignments}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي الواجبات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Ua,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:T.activeAssignments}),t(f,{variant:"caption",color:"text.secondary",children:"واجبات نشطة"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Ui,{sx:{color:"#1976d2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary.main",children:T.totalSubmissions}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي التسليمات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(ya,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[s(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[T.averageGrade,"%"]}),t(f,{variant:"caption",color:"text.secondary",children:"متوسط الدرجات"})]})]})]}),t(We,{className:"assignments-tabs",children:s(bn,{value:e,onChange:(I,B)=>n(B),children:[t(ft,{label:"جميع الواجبات"}),t(ft,{label:"نشطة"}),t(ft,{label:"منتهية"}),t(ft,{label:"لها تسليمات"})]})}),t(d,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:t(xe,{onClick:N,sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:t(Hr,{sx:{fontSize:28}})})}),s(We,{className:"assignments-table",sx:{width:"100%",overflow:"hidden",borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:[t(pi,{sx:{maxHeight:600},children:s(ui,{stickyHeader:!0,children:[t(hi,{children:s(Jt,{sx:{backgroundColor:"#f8f9fa"},children:[t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"عنوان الواجب"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"المقرر"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"الحالة"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"تاريخ التسليم"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"التسليمات"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"معدل التسليم"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0"},children:"الدرجة"}),t(ye,{sx:{fontWeight:700,color:"#2c3e50",borderBottom:"2px solid #e0e0e0",textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:P.map(I=>{const B=I.is_active?"active":"inactive",F=I.total_students>0?I.submissions_count/I.total_students*100:0;return s(Jt,{sx:{"&:hover":{backgroundColor:"#f8f9fa"},transition:"background-color 0.2s ease"},children:[t(ye,{children:s(d,{className:"table-cell-content",children:[t(f,{className:"table-cell-title",variant:"subtitle1",fontWeight:600,color:"#2c3e50",sx:{mb:.5},children:I.title}),t(f,{className:"table-cell-description",variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxWidth:200},children:I.description})]})}),s(ye,{children:[s(d,{className:"table-cell-meta",children:[t(bt,{sx:{color:"#ff6b6b",fontSize:18}}),t(f,{variant:"body2",fontWeight:500,children:I.course_title})]}),I.module_name&&t(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:I.module_name})]}),t(ye,{children:t(ow,{label:z(B),status:B,size:"small"})}),t(ye,{children:t(f,{variant:"body2",color:"text.secondary",children:new Date(I.due_date).toLocaleDateString("en-GB")})}),t(ye,{children:s(d,{children:[s(f,{variant:"body2",fontWeight:500,children:[I.submissions_count," / ",I.total_students]}),s(f,{variant:"caption",color:"text.secondary",children:[I.graded_count," تم التصحيح"]})]})}),t(ye,{children:s(d,{className:"table-progress-container",children:[t(d,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:s(f,{variant:"caption",color:"text.secondary",children:[Math.round(F),"%"]})}),t(hr,{className:"table-progress-bar",variant:"determinate",value:F,sx:{height:6,borderRadius:3,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:3,background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)"}}})]})}),t(ye,{children:s(f,{variant:"body2",fontWeight:500,color:"#2c3e50",children:[I.points," نقطة"]})}),t(ye,{children:s(d,{className:"table-cell-actions",children:[t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",onClick:()=>G(I),sx:{color:"#ff6b6b","&:hover":{backgroundColor:"rgba(255, 107, 107, 0.1)"}},children:t(Ir,{})})}),t(Xe,{title:"تعديل الواجب",children:t(xe,{size:"small",onClick:()=>J(I.id),sx:{color:"#0e5181","&:hover":{backgroundColor:"rgba(103, 58, 183, 0.1)"}},children:t(vr,{})})}),t(Xe,{title:"تصحيح الواجبات",children:t(xe,{size:"small",onClick:()=>H(I.id),sx:{color:"#2e7d32","&:hover":{backgroundColor:"rgba(46, 125, 50, 0.1)"}},children:t(Yr,{})})}),t(Xe,{title:"إدارة الأسئلة",children:t(xe,{size:"small",onClick:()=>U(I.id),sx:{color:"#e5978b","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.1)"}},children:t(nr,{})})})]})})]},I.id)})})]})}),t(Xa,{rowsPerPageOptions:[5,10,25,50],component:"div",count:Y.length,rowsPerPage:m,page:h,onPageChange:A,onRowsPerPageChange:V,labelRowsPerPage:"صفوف في الصفحة:",labelDisplayedRows:({from:I,to:B,count:F})=>`${I}-${B} من ${F}`,sx:{backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0"}})]}),t(fn,{open:R.open,autoHideDuration:4e3,onClose:()=>W(I=>ae(q({},I),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"left"},children:t(Be,{onClose:()=>W(I=>ae(q({},I),{open:!1})),severity:R.severity,sx:{width:"100%"},children:R.message})}),t(yr,{open:a,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden",direction:"rtl"}},children:u&&s(Bt,{children:[s(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(rn,{sx:{fontSize:28}}),t(f,{variant:"h6",fontWeight:700,children:"تفاصيل الواجب"})]}),t(xe,{onClick:()=>l(!1),sx:{color:"white"},children:t(ci,{})})]}),t(br,{sx:{p:4,backgroundColor:"#f8f9fa",direction:"rtl"},children:s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{children:[t(f,{variant:"h5",fontWeight:600,color:"primary",sx:{mb:2,textAlign:"right"},children:u.title}),t(f,{variant:"body1",sx:{color:"#666",lineHeight:1.8,textAlign:"right",backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",minHeight:80},children:u.description||"لا يوجد وصف للواجب"})]}),t(Pt,{}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:"معلومات الواجب"}),s(se,{container:!0,spacing:3,children:[t(se,{xs:12,md:6,children:s(d,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(bt,{sx:{color:"#ff6b6b"}}),s(f,{variant:"body1",fontWeight:500,sx:{textAlign:"right"},children:["المقرر: ",u.course_title]})]}),u.module_name&&s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Yc,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["الوحدة: ",u.module_name]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(pa,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["الدرجة: ",u.points," نقطة"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(ow,{label:z(u.is_active?"active":"inactive"),status:u.is_active?"active":"inactive",size:"small"}),t(f,{variant:"body2",sx:{textAlign:"right"},children:"الحالة"})]})]})}),t(se,{xs:12,md:6,children:s(d,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0",height:"100%"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Tn,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["تاريخ التسليم: ",new Date(u.due_date).toLocaleString("ar-SA")]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Ui,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["عدد الطلاب: ",u.total_students]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Ua,{sx:{color:"#2e7d32"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["التسليمات: ",u.submissions_count]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(on,{sx:{color:"#666"}}),s(f,{variant:"body1",sx:{textAlign:"right"},children:["تاريخ الإنشاء: ",new Date(u.created_at).toLocaleString("ar-SA")]})]})]})})]})]}),t(Pt,{}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:3},children:"إحصائيات الواجب"}),s(se,{container:!0,spacing:3,children:[t(se,{xs:12,md:3,children:s(d,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(f,{variant:"h4",fontWeight:700,color:"primary",children:u.submissions_count}),t(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"إجمالي التسليمات"})]})}),t(se,{xs:12,md:3,children:s(d,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(f,{variant:"h4",fontWeight:700,color:"success.main",children:u.graded_count}),t(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"تم التصحيح"})]})}),t(se,{xs:12,md:3,children:s(d,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(f,{variant:"h4",fontWeight:700,color:"warning.main",children:u.submissions_count-u.graded_count}),t(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"في انتظار التصحيح"})]})}),t(se,{xs:12,md:3,children:s(d,{sx:{textAlign:"center",p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s(f,{variant:"h4",fontWeight:700,color:"secondary.main",children:[u.average_grade>0?u.average_grade.toFixed(1):0,"%"]}),t(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"متوسط الدرجات"})]})})]})]}),s(d,{children:[t(f,{variant:"h6",fontWeight:600,color:"primary",gutterBottom:!0,sx:{textAlign:"right",mb:2},children:"معدل التسليم"}),s(d,{sx:{backgroundColor:"white",p:3,borderRadius:2,border:"1px solid #e0e0e0"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[s(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"right"},children:[u.total_students>0?Math.round(u.submissions_count/u.total_students*100):0,"%"]}),s(f,{variant:"body2",color:"text.secondary",children:[u.submissions_count," من ",u.total_students," طالب"]})]}),t(hr,{variant:"determinate",value:u.total_students>0?u.submissions_count/u.total_students*100:0,sx:{height:8,borderRadius:4,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{borderRadius:4,background:"linear-gradient(90deg, #1976d2 0%, #42a5f5 100%)"}}})]})]})]})}),s($r,{sx:{p:3,backgroundColor:"#f8f9fa",direction:"rtl"},children:[t(te,{variant:"contained",onClick:()=>{l(!1),H(u.id)},sx:{borderRadius:2,px:4,py:1.5,fontWeight:700,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"تصحيح الواجبات"}),t(te,{onClick:()=>l(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600},children:"إغلاق"})]})]})})]})},sw=oe(Ce)(({status:e})=>q(q(q(q({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},e==="submitted"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),e==="graded"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),e==="late"&&{backgroundColor:"#ffebee",color:"#d32f2f"}),e==="pending"&&{backgroundColor:"#fff3e0",color:"#f57c00"})),QD=()=>{var A,V,Y;const{assignmentId:e}=er(),n=nt(),[a,l]=w.useState(0),[u,p]=w.useState(!1),[h,x]=w.useState(null),[m,y]=w.useState({grade:0,feedback:"",rubric_scores:{}}),[v,S]=w.useState(null),[_,k]=w.useState([]),[E,R]=w.useState(!0),[W,T]=w.useState(null);w.useEffect(()=>{e&&$(null,null,function*(){var I,B;R(!0),T(null);try{const F=yield Kt.getAssignmentById(e);S(F);const M=(yield Kt.getAssignmentSubmissions(e)).map(O=>({id:O.id,student:{id:O.user,name:O.student_name,email:O.student_email,avatar:null},submitted_at:O.submitted_at,status:O.status,grade:O.grade,feedback:O.feedback,is_late:O.is_late,answers:O.question_responses?O.question_responses.reduce((C,X)=>(C[X.question]=X.text_answer||X.selected_answer||X.file_answer,C),{}):{},rubric_scores:{}}));k(M)}catch(F){console.error("Error fetching assignment data:",F),T(`تعذر تحميل بيانات الواجب: ${((B=(I=F==null?void 0:F.response)==null?void 0:I.data)==null?void 0:B.detail)||F.message}`)}finally{R(!1)}})},[e]);const z={total:_.length,submitted:_.filter(P=>P.status==="submitted"||P.status==="graded").length,graded:_.filter(P=>P.status==="graded").length,late:_.filter(P=>P.is_late).length,averageGrade:Math.round(_.filter(P=>P.grade!==null).reduce((P,I)=>P+I.grade,0)/_.filter(P=>P.grade!==null).length)||0},N=(P,I)=>P==="submitted"?I?"مُرسل متأخر":"مُرسل":P==="graded"?"مُقيم":P==="pending"?"لم يتم التسليم":"غير محدد",G=P=>{x(P),y({grade:P.grade||0,feedback:P.feedback||"",rubric_scores:P.rubric_scores||{}}),p(!0)},J=()=>$(null,null,function*(){try{const P={grade:m.grade,feedback:m.feedback,status:"graded"};yield Kt.gradeSubmission(h.id,P),k(I=>I.map(B=>B.id===h.id?ae(q({},B),{grade:m.grade,feedback:m.feedback,status:"graded",rubric_scores:m.rubric_scores}):B)),p(!1),console.log("Grade saved successfully")}catch(P){console.error("Error saving grade:",P)}}),H=(P,I)=>$(null,null,function*(){try{if(!I){console.error("No file URL provided");return}let B=I;I.startsWith("http")||(B=`http://localhost:8000${I}`);const F=document.createElement("a");F.href=B,F.download=P||"assignment_file",F.target="_blank",document.body.appendChild(F),F.click(),document.body.removeChild(F),console.log("Downloading file:",P)}catch(B){console.error("Error downloading file:",B)}}),U=_.filter(P=>a===0?!0:a===1?P.status==="submitted":a===2?P.status==="graded":a===3?P.is_late:!0);return E?t(d,{className:"assignments-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:t(Ke,{size:60})}):W?s(d,{className:"assignments-container",children:[t(Be,{severity:"error",sx:{mb:2},children:W}),t(te,{onClick:()=>n("/teacher/assignments"),variant:"contained",children:"العودة إلى الواجبات"})]}):v?s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(Yr,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"تصحيح الواجبات"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:v.title})]})]}),t(Je,{sx:{mb:4,p:3,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:s(se,{container:!0,spacing:3,children:[s(se,{item:!0,xs:12,md:6,children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(bt,{sx:{color:"#ff6b6b"}}),t(f,{variant:"h6",fontWeight:600,children:v.course_title||((A=v.course)==null?void 0:A.title)})]}),(v.module_name||((V=v.module)==null?void 0:V.name))&&s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Yc,{sx:{color:"#666"}}),t(f,{variant:"body1",color:"text.secondary",children:v.module_name||((Y=v.module)==null?void 0:Y.name)})]}),t(f,{variant:"body1",sx:{color:"#666",lineHeight:1.6},children:v.description}),v.assignment_file&&s(d,{sx:{display:"flex",alignItems:"center",gap:1,mt:2},children:[t(zi,{sx:{color:"#1976d2"}}),t(te,{variant:"outlined",size:"small",startIcon:t(Nn,{}),onClick:()=>H("assignment_file",v.assignment_file),sx:{color:"#1976d2",borderColor:"#1976d2"},children:"تحميل ملف الواجب"})]})]}),s(se,{item:!0,xs:12,md:6,children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Tn,{sx:{color:"#666"}}),s(f,{variant:"body1",children:["تاريخ التسليم: ",new Date(v.due_date).toLocaleString("en-GB")]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(pa,{sx:{color:"#666"}}),s(f,{variant:"body1",children:["الدرجة: ",v.points," نقطة"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Ui,{sx:{color:"#666"}}),s(f,{variant:"body1",children:["الطلاب: ",v.submissions_count||_.length,"/",v.total_students||0]})]})]})]})}),s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Ua,{sx:{color:"#1976d2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary",children:z.submitted}),t(f,{variant:"caption",color:"text.secondary",children:"تم التسليم"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Yr,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:z.graded}),t(f,{variant:"caption",color:"text.secondary",children:"تم التصحيح"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Qw,{sx:{color:"#f57c00",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"warning.main",children:z.late}),t(f,{variant:"caption",color:"text.secondary",children:"متأخر"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(ya,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[s(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:[z.averageGrade,"%"]}),t(f,{variant:"caption",color:"text.secondary",children:"متوسط الدرجات"})]})]})]}),t(We,{className:"assignments-tabs",children:s(bn,{value:a,onChange:(P,I)=>l(I),children:[t(ft,{label:"جميع التسليمات"}),t(ft,{label:"قيد التصحيح"}),t(ft,{label:"تم التصحيح"}),t(ft,{label:"متأخر"})]})}),t(pi,{component:We,sx:{mt:3,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",direction:"rtl"},children:s(ui,{children:[t(hi,{children:s(Jt,{sx:{backgroundColor:"#f8f9fa"},children:[t(ye,{sx:{fontWeight:600,textAlign:"right"},children:"الطالب"}),t(ye,{sx:{fontWeight:600,textAlign:"right"},children:"تاريخ التسليم"}),t(ye,{sx:{fontWeight:600,textAlign:"center"},children:"الحالة"}),t(ye,{sx:{fontWeight:600,textAlign:"center"},children:"الدرجة"}),t(ye,{sx:{fontWeight:600,textAlign:"center"},children:"التقييم"}),t(ye,{sx:{fontWeight:600,textAlign:"center"},children:"الإجراءات"})]})}),t(fi,{children:U.map(P=>s(Jt,{hover:!0,children:[t(ye,{sx:{textAlign:"right"},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2,flexDirection:"row-reverse"},children:[t(_t,{sx:{backgroundColor:"#ff6b6b"},children:t(qa,{})}),s(d,{children:[t(f,{variant:"body1",fontWeight:600,children:P.student.name}),t(f,{variant:"body2",color:"text.secondary",children:P.student.email})]})]})}),s(ye,{sx:{textAlign:"right"},children:[t(f,{variant:"body2",children:new Date(P.submitted_at).toLocaleString("en-GB")}),P.is_late&&t(Ce,{label:"متأخر",size:"small",color:"error",variant:"outlined",sx:{mt:.5}})]}),t(ye,{sx:{textAlign:"center"},children:t(sw,{label:N(P.status,P.is_late),status:P.status,size:"small"})}),t(ye,{sx:{textAlign:"center"},children:P.grade!==null?s(f,{variant:"body1",fontWeight:600,color:"primary",children:[P.grade,"/",v.points]}):t(f,{variant:"body2",color:"text.secondary",children:"—"})}),t(ye,{sx:{textAlign:"center"},children:P.status==="graded"&&P.rubric_scores?t(d,{sx:{display:"flex",gap:1,justifyContent:"center"},children:Object.entries(P.rubric_scores).map(([I,B])=>t(Xe,{title:`${I}: ${B}/5`,children:t(ua,{value:B,readOnly:!0,size:"small",sx:{direction:"ltr"}})},I))}):t(f,{variant:"body2",color:"text.secondary",children:"—"})}),t(ye,{sx:{textAlign:"center"},children:s(d,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",onClick:()=>G(P),sx:{color:"#ff6b6b"},children:t(Ir,{})})}),P.status==="submitted"&&t(Xe,{title:"تصحيح الواجب",children:t(xe,{size:"small",onClick:()=>G(P),sx:{color:"#2e7d32"},children:t(Yr,{})})}),P.answers&&Object.keys(P.answers).length>0&&t(Xe,{title:"تحميل ملفات الواجب",children:t(xe,{size:"small",onClick:()=>{const I=Object.values(P.answers).filter(B=>typeof B=="string"&&B.includes("http"));I.length>0&&H("assignment_files.zip",I[0])},sx:{color:"#1976d2"},children:t(Nn,{})})})]})})]},P.id))})]})}),t(yr,{open:u,onClose:()=>p(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:4,p:0,overflow:"hidden",direction:"rtl"}},children:h&&s(Bt,{children:[s(Wr,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"primary.main",color:"white",py:3,px:4,direction:"rtl"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(Yr,{sx:{fontSize:28}}),t(f,{variant:"h6",fontWeight:700,children:"تصحيح واجب الطالب"})]}),t(xe,{onClick:()=>p(!1),sx:{color:"white"},children:t(ci,{})})]}),t(br,{sx:{p:4,backgroundColor:"#f8f9fa",direction:"rtl"},children:s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:3,backgroundColor:"white",borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e0e0e0"},children:[t(_t,{sx:{backgroundColor:"#ff6b6b",width:56,height:56},children:t(qa,{sx:{fontSize:28}})}),s(d,{sx:{flex:1},children:[t(f,{variant:"h6",fontWeight:600,color:"primary",children:h.student.name}),t(f,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:h.student.email}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mt:1},children:[t(sw,{label:N(h.status,h.is_late),status:h.status,size:"small"}),h.is_late&&t(Ce,{label:"متأخر",size:"small",color:"error",variant:"outlined"})]})]})]}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,md:6,children:s(Je,{sx:{p:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(f,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:"تفاصيل التسليم"}),s(Fr,{dense:!0,sx:{p:0},children:[s(zr,{sx:{px:0,py:1},children:[t(Rr,{sx:{minWidth:40},children:t(Tn,{sx:{color:"#0e5181"}})}),t(ir,{primary:t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:"تاريخ التسليم"}),secondary:t(f,{variant:"body2",color:"text.secondary",children:new Date(h.submitted_at).toLocaleString("ar-SA")})})]}),s(zr,{sx:{px:0,py:1},children:[t(Rr,{sx:{minWidth:40},children:t(on,{sx:{color:"#0e5181"}})}),t(ir,{primary:t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:"الحالة"}),secondary:t(f,{variant:"body2",color:"text.secondary",children:h.is_late?"متأخر":"في الوقت المحدد"})})]}),h.grade!==null&&s(zr,{sx:{px:0,py:1},children:[t(Rr,{sx:{minWidth:40},children:t(pa,{sx:{color:"#0e5181"}})}),t(ir,{primary:t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:"الدرجة الحالية"}),secondary:s(f,{variant:"body2",color:"primary",fontWeight:600,children:[h.grade,"/",v.points]})})]})]})]})}),t(se,{item:!0,xs:12,md:6,children:s(Je,{sx:{p:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(f,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:"الإجابات"}),t(Fr,{dense:!0,sx:{p:0},children:v.questions&&v.questions.length>0?v.questions.map((P,I)=>{const B=h.answers[P.id];return s(zr,{sx:{flexDirection:"column",alignItems:"flex-start",px:0,py:2,borderBottom:I<v.questions.length-1?"1px solid #e0e0e0":"none"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,width:"100%",justifyContent:"space-between"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(nr,{sx:{color:"#0e5181"}}),s(f,{variant:"subtitle2",fontWeight:600,color:"primary",children:["السؤال ",I+1]})]}),P.points&&t(Ce,{label:`${P.points} نقطة`,size:"small",variant:"outlined",sx:{backgroundColor:"#f5f5f5"}})]}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:1,width:"100%"},children:P.text}),s(d,{sx:{width:"100%",pl:2},children:[t(f,{variant:"body2",color:"text.secondary",sx:{mb:1,fontWeight:600},children:"إجابة الطالب:"}),B?t(d,{children:typeof B=="string"&&B.includes("http")?s(d,{sx:{display:"flex",alignItems:"center",gap:1,p:2,backgroundColor:"#f8f9fa",borderRadius:1,border:"1px solid #e0e0e0"},children:[t(zi,{sx:{color:"#1976d2"}}),t(f,{variant:"body2",sx:{flex:1},children:"ملف مرفوع"}),t(xe,{size:"small",onClick:()=>H(`question_${I+1}_file`,B),sx:{color:"#1976d2"},children:t(Nn,{})})]}):t(f,{variant:"body2",sx:{p:2,backgroundColor:"#f8f9fa",borderRadius:1,border:"1px solid #e0e0e0",lineHeight:1.6},children:B})}):t(f,{variant:"body2",color:"error",sx:{p:2,backgroundColor:"#ffebee",borderRadius:1,border:"1px solid #ffcdd2"},children:"لم يتم الإجابة"})]})]},P.id)}):t(zr,{sx:{px:0,py:2},children:t(ir,{primary:t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:"لا توجد أسئلة لهذا الواجب"}),secondary:t(f,{variant:"body2",color:"text.secondary",children:"الواجب قد يكون عبارة عن رفع ملف أو كتابة نص فقط"})})})})]})})]}),t(Pt,{sx:{my:2}}),s(Je,{sx:{p:3,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[t(pa,{sx:{color:"primary.main",fontSize:28}}),t(f,{variant:"h6",sx:{color:"primary.main",fontWeight:600},children:"التقييم والدرجات"})]}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,md:9,children:s(Je,{sx:{p:4,backgroundColor:"#f8f9fa",border:"1px solid #e0e0e0"},children:[t(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",mb:4},children:"الدرجة والملاحظات"}),s(se,{container:!0,spacing:4,children:[t(se,{item:!0,xs:12,md:5,children:s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(d,{children:[s(f,{variant:"body1",gutterBottom:!0,sx:{fontWeight:600,color:"text.secondary",mb:2},children:["الدرجة (من ",v.points,")"]}),t(_e,{fullWidth:!0,type:"number",variant:"outlined",value:m.grade,onChange:P=>y(I=>ae(q({},I),{grade:Number(P.target.value)})),inputProps:{min:0,max:v.points,step:.5},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white",fontSize:"1.1rem"}}})]}),s(d,{sx:{p:3,backgroundColor:"white",borderRadius:2,border:"1px solid #e0e0e0",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[s(f,{variant:"h3",fontWeight:700,color:"primary",children:[v.points>0?Math.round(m.grade/v.points*100):0,"%"]}),t(f,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"النسبة المئوية"})]})]})}),t(se,{item:!0,xs:12,md:7,children:s(d,{children:[t(f,{variant:"body1",gutterBottom:!0,sx:{fontWeight:600,color:"text.secondary",mb:2},children:"ملاحظات المعلم"}),t(_e,{fullWidth:!0,variant:"outlined",multiline:!0,rows:12,placeholder:"اكتب ملاحظاتك للطالب هنا...",value:m.feedback,onChange:P=>y(I=>ae(q({},I),{feedback:P.target.value})),sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"white",fontSize:"1rem"}}})]})})]})]})}),t(se,{item:!0,xs:12,md:3,children:s(Je,{sx:{p:2,backgroundColor:"#f8f9fa",border:"1px solid #e0e0e0"},children:[t(f,{variant:"subtitle1",gutterBottom:!0,sx:{fontWeight:600,color:"text.primary",mb:2},children:"معايير التقييم التفصيلية"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[[{key:"accuracy",label:"الدقة في الإجابة",description:"مدى صحة ودقة الإجابات المقدمة"},{key:"completeness",label:"اكتمال الإجابة",description:"مدى شمولية واكتمال الإجابة"},{key:"clarity",label:"وضوح العرض",description:"مدى وضوح وسهولة فهم الإجابة"},{key:"timeliness",label:"الالتزام بالوقت",description:"مدى الالتزام بموعد التسليم"}].map(P=>s(d,{sx:{p:2,backgroundColor:"white",borderRadius:1,border:"1px solid #e0e0e0"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t(f,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:P.label}),s(f,{variant:"body2",color:"primary",fontWeight:600,children:[m.rubric_scores[P.key]||0,"/5"]})]}),t(f,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:P.description}),t(ua,{value:m.rubric_scores[P.key]||0,onChange:(I,B)=>{y(F=>ae(q({},F),{rubric_scores:ae(q({},F.rubric_scores),{[P.key]:B})}))},size:"small",sx:{direction:"ltr"}})]},P.key)),s(d,{sx:{p:2,backgroundColor:"primary.main",borderRadius:1,color:"white",textAlign:"center"},children:[s(f,{variant:"h6",fontWeight:700,children:[(()=>{const P=Object.values(m.rubric_scores);return(P.length>0?P.reduce((B,F)=>B+F,0)/P.length:0).toFixed(1)})(),"/5"]}),t(f,{variant:"body2",children:"متوسط التقييم التفصيلي"})]})]})]})})]}),s(d,{sx:{mt:3,p:2,backgroundColor:"#e3f2fd",borderRadius:1,border:"1px solid #bbdefb"},children:[t(f,{variant:"subtitle2",fontWeight:600,color:"primary",gutterBottom:!0,children:"ملخص التقييم:"}),s(f,{variant:"body2",color:"text.secondary",children:["الدرجة: ",m.grade,"/",v.points," | النسبة: ",v.points>0?Math.round(m.grade/v.points*100):0,"% | متوسط التقييم التفصيلي: ",(()=>{const P=Object.values(m.rubric_scores);return(P.length>0?P.reduce((B,F)=>B+F,0)/P.length:0).toFixed(1)})(),"/5"]})]})]})]})}),s($r,{sx:{p:3,backgroundColor:"#f8f9fa",direction:"rtl"},children:[t(te,{onClick:()=>p(!1),variant:"outlined",sx:{borderRadius:2,px:4,py:1.5,borderColor:"#9e9e9e",color:"#9e9e9e",fontWeight:600,"&:hover":{borderColor:"#757575",color:"#757575"}},children:"إلغاء"}),t(te,{variant:"contained",onClick:J,sx:{borderRadius:2,px:4,py:1.5,fontWeight:700,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"حفظ التقييم"})]})]})})]}):s(d,{className:"assignments-container",children:[t(Be,{severity:"warning",sx:{mb:2},children:"لم يتم العثور على الواجب المطلوب"}),t(te,{onClick:()=>n("/teacher/assignments"),variant:"contained",children:"العودة إلى الواجبات"})]})},GD=()=>{const{assignmentId:e,submissionId:n}=er(),a=nt(),[l,u]=w.useState(""),[p,h]=w.useState(""),[x,m]=w.useState(!1),[y,v]=w.useState(null),[S,_]=w.useState(null),[k,E]=w.useState(!0),[R,W]=w.useState(null);w.useEffect(()=>{n&&e&&$(null,null,function*(){E(!0),W(null);try{const N=yield Kt.getSubmissionById(n);v(N),u(N.grade||""),h(N.feedback||"");const G=yield Kt.getAssignmentById(e);_(G)}catch(N){console.error("Error fetching submission data:",N),W("تعذر تحميل بيانات التسليم. يرجى المحاولة مرة أخرى.")}finally{E(!1)}})},[n,e]);const T=()=>$(null,null,function*(){if(!l||l<0||l>((S==null?void 0:S.points)||100)){Fp.error("يرجى إدخال درجة صحيحة");return}m(!0);try{const z={grade:Number(l),feedback:p,status:"graded"};yield Kt.gradeSubmission(n,z),Fp.success({content:s("span",{style:{fontSize:18},children:[t(Iy,{twoToneColor:"#52c41a",style:{marginLeft:8,fontSize:22}}),"تم حفظ التصحيح بنجاح!"]}),duration:2.5,style:{direction:"rtl"}}),setTimeout(()=>{a(`/teacher/assignments/${e}/submissions`)},1500)}catch(z){console.error("Error saving grade:",z),Fp.error("حدث خطأ أثناء حفظ التصحيح. يرجى المحاولة مرة أخرى.")}finally{m(!1)}});return k?s("div",{className:"assignments-container creative-submit",style:{maxWidth:600,textAlign:"center"},children:[t(j6,{size:"large"}),t(ni.Text,{style:{display:"block",marginTop:16},children:"جاري تحميل بيانات التسليم..."})]}):R?s("div",{className:"assignments-container creative-submit",style:{maxWidth:600},children:[t(My,{message:"خطأ",description:R,type:"error",showIcon:!0,style:{marginBottom:16}}),t(zs,{icon:t(Np,{}),onClick:()=>a(`/teacher/assignments/${e}/submissions`),children:"العودة للتسليمات"})]}):y?t("div",{className:"assignments-container creative-submit",style:{maxWidth:600},children:s(H6,{className:"creative-card",title:s("span",{style:{fontSize:20,fontWeight:700,color:"#5e35b1",display:"flex",alignItems:"center",gap:8},children:[t(F6,{style:{color:"#7c4dff",fontSize:24}}),"تصحيح تسليم: ",y.student_name||"طالب"]}),headStyle:{background:"linear-gradient(90deg, #ede7f6 0%, #fff 100%)",borderRadius:"12px 12px 0 0"},bodyStyle:{background:"linear-gradient(120deg, #f3e5f5 0%, #fff 100%)",borderRadius:12},extra:t(zs,{icon:t(Np,{}),onClick:()=>a(`/teacher/assignments/${e}/submissions`),size:"small",children:"العودة"}),children:[s("p",{style:{fontSize:15,color:"#333",marginBottom:8},children:[t("b",{children:"وقت التسليم:"})," ",new Date(y.submitted_at).toLocaleString("ar-EG")]}),t(N6,{color:y.is_late?"red":"blue",style:{fontSize:15,borderRadius:8},children:y.is_late?"متأخر":"مُرسل"}),S&&s("p",{style:{fontSize:15,color:"#333",marginBottom:8},children:[t("b",{children:"الواجب:"})," ",S.title]}),y.submission_text&&s(Bt,{children:[s(ni.Paragraph,{style:{marginTop:16,fontSize:16,color:"#5e35b1",fontWeight:600},children:[t(gu,{style:{color:"#7c4dff",marginLeft:6}})," نص التسليم:"]}),t(ni.Paragraph,{style:{margin:"0 0 18px 0",fontSize:16,color:"#333",background:"#f8fafc",borderRadius:8,padding:12,boxShadow:"0 1px 8px 0 rgba(126,87,194,0.07)"},children:y.submission_text})]}),y.submitted_file&&s("div",{style:{marginBottom:16},children:[t(ni.Text,{strong:!0,style:{display:"block",marginBottom:8},children:"الملف المرفوع:"}),t(zs,{type:"link",icon:t(gu,{}),onClick:()=>window.open(y.submitted_file,"_blank"),children:"عرض الملف"})]}),y.question_responses&&y.question_responses.length>0&&s(Bt,{children:[s(ni.Paragraph,{style:{marginTop:16,fontSize:16,color:"#5e35b1",fontWeight:600},children:[t(gu,{style:{color:"#7c4dff",marginLeft:6}})," إجابات الطالب على الأسئلة:"]}),y.question_responses.map((z,N)=>(console.log(`Response ${N}:`,z),s("div",{style:{marginBottom:16,padding:12,background:"#f8fafc",borderRadius:8,border:"1px solid #e0e0e0"},children:[s(ni.Text,{strong:!0,style:{display:"block",marginBottom:8,color:"#5e35b1"},children:["السؤال ",N+1,": ",z.question_text||"سؤال"]}),z.text_answer&&s(ni.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#333"},children:[t("strong",{children:"الإجابة النصية:"})," ",z.text_answer]}),z.selected_answer&&s(ni.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#333"},children:[t("strong",{children:"الإجابة المختارة:"}),z.selected_answer_text||(z.selected_answer&&typeof z.selected_answer=="object"?z.selected_answer.text:z.selected_answer)||"إجابة مختارة"]}),z.selected_answer&&typeof z.selected_answer=="object"&&s(ni.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#666",fontStyle:"italic"},children:[t("strong",{children:"تفاصيل الإجابة المختارة:"})," ID: ",z.selected_answer.id,", النص: ",z.selected_answer.text]}),z.selected_answer&&typeof z.selected_answer=="number"&&s(ni.Paragraph,{style:{margin:"8px 0",fontSize:14,color:"#666",fontStyle:"italic"},children:[t("strong",{children:"معرف الإجابة المختارة:"})," ",z.selected_answer]}),z.file_answer&&s("div",{style:{margin:"8px 0"},children:[t(ni.Text,{strong:!0,style:{display:"block",marginBottom:4},children:"الملف المرفوع:"}),t(zs,{type:"link",icon:t(gu,{}),onClick:()=>window.open(z.file_answer,"_blank"),size:"small",children:"عرض الملف"})]}),z.points_earned!==void 0&&s(ni.Text,{style:{display:"block",marginTop:8,color:"#52c41a",fontWeight:600},children:["الدرجة المكتسبة: ",z.points_earned]}),s("div",{style:{marginTop:8,padding:8,background:"#f0f0f0",borderRadius:4,fontSize:12,color:"#666"},children:[t("strong",{children:"Debug Info:"}),t("br",{}),"selected_answer: ",JSON.stringify(z.selected_answer),t("br",{}),"selected_answer_text: ",z.selected_answer_text,t("br",{}),"text_answer: ",z.text_answer,t("br",{}),"file_answer: ",z.file_answer]})]},z.id||N)))]}),t(Dy,{type:"number",placeholder:"الدرجة",value:l,onChange:z=>u(z.target.value),style:{marginBottom:12,width:120,borderRadius:8,border:"1.5px solid #b39ddb",background:"#f3e5f5"},min:0,max:(S==null?void 0:S.points)||100}),t(Dy.TextArea,{placeholder:"ملاحظات للطالب",value:p,onChange:z=>h(z.target.value),rows:3,style:{marginBottom:12,borderRadius:8,border:"1.5px solid #b39ddb",background:"#f3e5f5"}}),s(zs,{type:"primary",loading:x,onClick:T,className:"creative-submit-btn",disabled:!l||l<0||l>((S==null?void 0:S.points)||100),children:[t(Iy,{twoToneColor:"#fff",style:{marginLeft:6,fontSize:20}}),"حفظ التصحيح"]})]})}):s("div",{className:"assignments-container creative-submit",style:{maxWidth:600},children:[t(My,{message:"تنبيه",description:"لم يتم العثور على التسليم المطلوب",type:"warning",showIcon:!0,style:{marginBottom:16}}),t(zs,{icon:t(Np,{}),onClick:()=>a(`/teacher/assignments/${e}/submissions`),children:"العودة للتسليمات"})]})},XD=oe(Je)(({theme:e})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:"1px solid #e0e0e0","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"}})),KD=()=>{var V,Y,P;const{assignmentId:e}=er(),n=nt(),[a,l]=w.useState(0),[u,p]=w.useState({answers:{},files:{},comments:""}),[h,x]=w.useState(!1),[m,y]=w.useState(null),[v,S]=w.useState(!0),[_,k]=w.useState(null);w.useEffect(()=>{e&&$(null,null,function*(){S(!0),k(null);try{const B=yield Kt.getAssignmentById(e);console.log("Fetched assignment:",B),y(B);try{(yield Kt.getMySubmissions()).find(M=>M.assignment===parseInt(e))&&k("لقد قمت بتقديم هذا الواجب مسبقاً. لا يمكن تقديمه مرة أخرى.")}catch(F){console.log("Could not check existing submissions:",F)}}catch(B){console.error("Error fetching assignment:",B),k("تعذر تحميل بيانات الواجب. يرجى المحاولة مرة أخرى.")}finally{S(!1)}})},[e]);const E=m?new Date>new Date(m.due_date):!1,R=m?m.is_active&&(!E||m.allow_late_submissions):!1,W=(I,B)=>$(null,null,function*(){try{if(!B){console.error("No file URL provided");return}let F=B;B.startsWith("http")||(F=`http://localhost:8000${B}`);const Q=document.createElement("a");Q.href=F,Q.download=I||"assignment_file",Q.target="_blank",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),console.log("Downloading file:",I)}catch(F){console.error("Error downloading file:",F)}}),T=[{label:"مراجعة الواجب",description:"قراءة تعليمات الواجب والمتطلبات"},{label:"الإجابة على الأسئلة",description:"حل جميع الأسئلة المطلوبة"},{label:"رفع الملفات",description:"رفع الملفات المطلوبة إن وجدت"},{label:"مراجعة وإرسال",description:"مراجعة الإجابات وإرسال الواجب"}],z=()=>{l(I=>I+1)},N=()=>{l(I=>I-1)},G=(I,B)=>{p(F=>ae(q({},F),{answers:ae(q({},F.answers),{[I]:B})}))},J=(I,B)=>{p(F=>ae(q({},F),{files:ae(q({},F.files),{[I]:B})}))},H=()=>$(null,null,function*(){var I,B;if(!_){x(!0);try{const F={assignment:e,submission_text:u.comments||"",submitted_file:u.files.main||null};if(m.has_questions&&m.questions){const M=[];m.questions.forEach(O=>{const C=u.answers[O.id],X=u.files[O.id];if(console.log(`Processing question ${O.id} (${O.question_type}): answer=${C}, file=${X}`),C||X){let Z=null,j=null;O.question_type==="multiple_choice"||O.question_type==="true_false"?(j=C,console.log(`Setting selected_answer for ${O.question_type}: ${j}`)):(O.question_type==="short_answer"||O.question_type==="essay")&&(Z=C,console.log(`Setting text_answer for ${O.question_type}: ${Z}`));const re={question:O.id,text_answer:Z,selected_answer:j,file_answer:X||null};console.log(`Question ${O.id} (${O.question_type}):`,re),M.push(re)}}),M.length>0&&(F.question_responses=M)}console.log("Submitting assignment with payload:",F);const Q=yield Kt.createSubmission(F);console.log("Submission response:",Q),n("/student/assignments")}catch(F){if(console.error("Error submitting assignment:",F),((I=F.response)==null?void 0:I.status)===400){const Q=F.response.data;Q.non_field_errors&&Q.non_field_errors.length>0?k(Q.non_field_errors[0]):Q.detail?k(Q.detail):k("بيانات غير صحيحة. يرجى التحقق من المدخلات.")}else((B=F.response)==null?void 0:B.status)===500?k("حدث خطأ في الخادم. يرجى المحاولة مرة أخرى لاحقاً."):k("حدث خطأ أثناء إرسال الواجب. يرجى المحاولة مرة أخرى.")}finally{x(!1)}}}),U=I=>{switch(I){case"multiple_choice":return t(Ug,{});case"true_false":return t(Vg,{});case"short_answer":case"essay":return t(Gw,{});case"file_upload":return t(zi,{});default:return t(nr,{})}},A=I=>{var B;switch(I.question_type){case"multiple_choice":return s(At,{fullWidth:!0,children:[t(Rt,{children:"اختر الإجابة الصحيحة"}),t(Et,{value:u.answers[I.id]||"",onChange:F=>G(I.id,F.target.value),label:"اختر الإجابة الصحيحة",children:(B=I.answers)==null?void 0:B.map(F=>t(Me,{value:F.id,children:F.text},F.id))})]});case"true_false":return s(At,{fullWidth:!0,children:[t(Rt,{children:"اختر الإجابة"}),s(Et,{value:u.answers[I.id]||"",onChange:F=>G(I.id,F.target.value),label:"اختر الإجابة",children:[t(Me,{value:"true",children:"صح"}),t(Me,{value:"false",children:"خطأ"})]})]});case"short_answer":return t(_e,{fullWidth:!0,label:"أدخل إجابتك",variant:"outlined",multiline:!0,rows:2,value:u.answers[I.id]||"",onChange:F=>G(I.id,F.target.value)});case"essay":return t(_e,{fullWidth:!0,label:"اكتب إجابتك بالتفصيل",variant:"outlined",multiline:!0,rows:6,value:u.answers[I.id]||"",onChange:F=>G(I.id,F.target.value)});case"file_upload":return s(d,{sx:{textAlign:"center",p:3,border:"2px dashed #e0e0e0",borderRadius:2},children:[t(zy,{sx:{fontSize:48,color:"#666",mb:2}}),t(f,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"اسحب الملف هنا أو اضغط للاختيار"}),s(te,{variant:"outlined",component:"label",startIcon:t(zi,{}),sx:{mt:2},children:["اختيار ملف",t("input",{type:"file",hidden:!0,onChange:F=>J(I.id,F.target.files[0]),accept:".pdf,.doc,.docx,.txt"})]}),u.files[I.id]&&s(f,{variant:"body2",color:"success.main",sx:{mt:1},children:["تم اختيار: ",u.files[I.id].name]})]});default:return null}};return v?t(d,{className:"assignments-container",sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:t(Ke,{size:60})}):_?s(d,{className:"assignments-container",children:[t(Be,{severity:"error",sx:{mb:2},children:_}),t(te,{onClick:()=>n("/student/assignments"),variant:"contained",children:"العودة للواجبات"})]}):m?s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #1976d2 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(rn,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"تسليم الواجب"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:m.title})]})]}),t(Je,{sx:{mb:4,p:3,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:s(se,{container:!0,spacing:3,children:[s(se,{item:!0,xs:12,md:6,children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(bt,{sx:{color:"#0e5181"}}),t(f,{variant:"h6",fontWeight:600,children:m.course_title||((V=m.course)==null?void 0:V.title)})]}),(m.module_name||((Y=m.module)==null?void 0:Y.name))&&s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Yc,{sx:{color:"#666"}}),t(f,{variant:"body1",color:"text.secondary",children:m.module_name||((P=m.module)==null?void 0:P.name)})]}),t(f,{variant:"body1",sx:{color:"#666",lineHeight:1.6,mb:2},children:m.description})]}),s(se,{item:!0,xs:12,md:6,children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(Tn,{sx:{color:"#666"}}),s(f,{variant:"body1",children:["تاريخ التسليم: ",new Date(m.due_date).toLocaleString("en-GB")]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(pa,{sx:{color:"#666"}}),s(f,{variant:"body1",children:["الدرجة: ",m.points," نقطة"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:2},children:[t(nr,{sx:{color:"#666"}}),s(f,{variant:"body1",children:["عدد الأسئلة: ",m.questions_count||0]})]}),m.assignment_file&&t(te,{variant:"outlined",startIcon:t(Nn,{}),onClick:()=>W("assignment_file",m.assignment_file),sx:{mt:1,color:"#1976d2",borderColor:"#1976d2"},children:"تحميل ملف الواجب"})]})]})}),E&&s(Be,{severity:"warning",sx:{mb:4},children:[t(f,{variant:"body1",fontWeight:600,children:"انتبه! هذا الواجب متأخر"}),s(f,{variant:"body2",children:["تاريخ التسليم كان: ",new Date(m.due_date).toLocaleString("en-GB"),m.allow_late_submissions&&` - سيتم خصم ${m.late_submission_penalty}% من الدرجة`]})]}),t(We,{sx:{mb:4,p:3,borderRadius:3},children:t(O0,{activeStep:a,orientation:"vertical",children:T.map((I,B)=>s(vc,{children:[s(wc,{children:[t(f,{variant:"h6",fontWeight:600,children:I.label}),t(f,{variant:"body2",color:"text.secondary",children:I.description})]}),t(Sc,{children:s(d,{sx:{mb:2},children:[B===0&&s(d,{children:[t(f,{variant:"body1",paragraph:!0,children:"تأكد من قراءة جميع التعليمات بعناية قبل البدء في الإجابة."}),t(f,{variant:"body1",paragraph:!0,children:"يمكنك العودة وتعديل إجاباتك في أي وقت قبل الإرسال النهائي."})]}),B===1&&s(d,{children:[t(f,{variant:"h6",gutterBottom:!0,children:"الأسئلة المطلوبة"}),m.questions&&m.questions.length>0?t(Fr,{children:m.questions.map((F,Q)=>t(zr,{sx:{mb:2,p:0},children:s(XD,{sx:{width:"100%",p:3},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[U(F.question_type),s(f,{variant:"h6",fontWeight:600,children:["السؤال ",Q+1]}),t(Ce,{label:`${F.points} نقطة`,size:"small",color:"primary",variant:"outlined"}),F.is_required&&t(Ce,{label:"إجباري",size:"small",color:"error",variant:"outlined"})]}),t(f,{variant:"body1",paragraph:!0,children:F.text}),F.explanation&&t(Be,{severity:"info",sx:{mb:2},children:t(f,{variant:"body2",children:F.explanation})}),A(F)]})},F.id))}):t(Be,{severity:"info",children:t(f,{variant:"body1",children:"لا توجد أسئلة لهذا الواجب. يمكنك رفع ملف أو كتابة نص في الخطوة التالية."})})]}),B===2&&s(d,{children:[t(f,{variant:"h6",gutterBottom:!0,children:"رفع الملفات المطلوبة"}),t(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"تأكد من رفع جميع الملفات المطلوبة بالصيغ المقبولة."}),m.has_file_upload&&s(d,{sx:{textAlign:"center",p:3,border:"2px dashed #e0e0e0",borderRadius:2},children:[t(zy,{sx:{fontSize:48,color:"#666",mb:2}}),t(f,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"اسحب الملف هنا أو اضغط للاختيار"}),s(te,{variant:"outlined",component:"label",startIcon:t(zi,{}),sx:{mt:2},children:["اختيار ملف",t("input",{type:"file",hidden:!0,onChange:F=>J("main",F.target.files[0]),accept:".pdf,.doc,.docx,.txt"})]}),u.files.main&&s(f,{variant:"body2",color:"success.main",sx:{mt:1},children:["تم اختيار: ",u.files.main.name]})]})]}),B===3&&s(d,{children:[t(f,{variant:"h6",gutterBottom:!0,children:"مراجعة الإجابات"}),t(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"راجع إجاباتك قبل الإرسال النهائي."}),t(_e,{fullWidth:!0,label:"ملاحظات إضافية (اختياري)",variant:"outlined",multiline:!0,rows:3,value:u.comments,onChange:F=>p(Q=>ae(q({},Q),{comments:F.target.value})),sx:{mt:2}})]}),s(d,{sx:{mt:2},children:[t(te,{variant:"contained",onClick:z,sx:{mr:1},children:B===T.length-1?"إنهاء":"التالي"}),t(te,{disabled:B===0,onClick:N,sx:{mr:1},children:"السابق"})]})]})})]},I.label))})}),a===T.length&&s(We,{sx:{p:3,borderRadius:3,textAlign:"center"},children:[t(f,{variant:"h6",gutterBottom:!0,children:"جاهز لإرسال الواجب؟"}),t(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"تأكد من مراجعة جميع إجاباتك قبل الإرسال النهائي."}),_&&t(Be,{severity:"error",sx:{mb:2},children:_}),s(d,{sx:{display:"flex",gap:2,justifyContent:"center",mt:3},children:[t(te,{variant:"outlined",onClick:()=>l(0),startIcon:t(ci,{}),children:"العودة للتعديل"}),t(te,{variant:"contained",onClick:H,disabled:h||!R||_,startIcon:h?t(Ke,{size:20}):t(mh,{}),sx:{background:"linear-gradient(135deg, #0e5181 0%, #1976d2 100%)","&:hover":{background:"linear-gradient(135deg, #5e35b1 0%, #8e24aa 100%)"}},children:h?"جاري الإرسال...":"إرسال الواجب"})]})]})]}):s(d,{className:"assignments-container",children:[t(Be,{severity:"warning",sx:{mb:2},children:"لم يتم العثور على الواجب المطلوب"}),t(te,{onClick:()=>n("/student/assignments"),variant:"contained",children:"العودة للواجبات"})]})};oe(Je)(({theme:e})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:"1px solid #e0e0e0","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"}}));const ZD=()=>{const e=nt(),[n,a]=w.useState(0),[l,u]=w.useState({title:"",description:"",course:"",module:"",due_date:"",duration:60,points:100,allow_late_submissions:!1,late_submission_penalty:0,has_questions:!1,has_file_upload:!1,assignment_file:null,max_attempts:1,is_active:!0}),[p,h]=w.useState(!1),[x,m]=w.useState([]),[y,v]=w.useState([]),[S,_]=w.useState(!1),[k,E]=w.useState({open:!1,message:"",severity:"success"});w.useEffect(()=>{$(null,null,function*(){try{const J=yield xn.getCourses(),U=(Array.isArray(J==null?void 0:J.results)?J.results:Array.isArray(J)?J:(J==null?void 0:J.courses)||[]).map(A=>({id:A.id,title:A.title}));m(U)}catch(J){m([])}})},[]),w.useEffect(()=>{$(null,null,function*(){const J=l.course;if(!J){v([]);return}_(!0);try{const H=yield dr.getModules(J),A=(Array.isArray(H==null?void 0:H.results)?H.results:Array.isArray(H)?H:(H==null?void 0:H.modules)||[]).map(V=>({id:V.id,title:V.name||V.title||`وحدة ${V.id}`}));v(A)}catch(H){v([])}finally{_(!1)}})},[l.course]);const R=[{label:"معلومات الواجب الأساسية",description:"عنوان الواجب والوصف والمقرر"},{label:"إعدادات الواجب",description:"التواريخ والدرجات والإعدادات"},{label:"مراجعة وإرسال",description:"مراجعة الواجب وإنشاؤه"}],W=()=>{a(G=>G+1)},T=()=>{a(G=>G-1)},z=(G,J)=>{u(H=>ae(q({},H),{[G]:J}))},N=()=>$(null,null,function*(){var G,J,H;h(!0);try{if(!l.title||!l.description||!l.course||!l.due_date){E({open:!0,message:"يرجى ملء جميع الحقول المطلوبة (العنوان، الوصف، المقرر، تاريخ التسليم)",severity:"error"});return}const U=localStorage.getItem("token");console.log("Token exists:",!!U),console.log("User data:",localStorage.getItem("user"));const A={title:l.title,description:l.description,course:l.course,module:l.module||null,due_date:l.due_date,points:l.points,allow_late_submissions:l.allow_late_submissions,late_submission_penalty:l.late_submission_penalty,has_questions:l.has_questions,has_file_upload:l.has_file_upload,assignment_file:l.assignment_file,is_active:l.is_active};console.log("Sending payload:",A);const V=yield Kt.createAssignment(A);console.log("Assignment creation response:",V);const Y=V==null?void 0:V.id;if(console.log("Assignment created with ID:",Y),!Y){console.error("Could not get assignment ID from response:",V),E({open:!0,message:"تم إنشاء الواجب بنجاح، لكن لم نتمكن من الحصول على معرف الواجب.",severity:"warning"}),e("/teacher/assignments");return}const P=l.assignment_file?" مع ملف مرفق":"";E({open:!0,message:`تم إنشاء الواجب "${l.title}" بنجاح${P}. يمكنك الآن إضافة الأسئلة من صفحة إدارة الواجبات.`,severity:"success"}),setTimeout(()=>{e("/teacher/assignments")},2e3)}catch(U){console.error("Error creating assignment:",U);let A="تعذر إنشاء الواجب. تحقق من الحقول.";if((G=U==null?void 0:U.response)!=null&&G.data){const V=U.response.data;V.detail?A=V.detail:V.error?A=V.error:typeof V=="object"&&(A=`أخطاء في الحقول:
${Object.entries(V).map(([P,I])=>`${P}: ${Array.isArray(I)?I.join(", "):I}`).join(`
`)}`)}else U!=null&&U.message&&(A=U.message);((J=U==null?void 0:U.response)==null?void 0:J.status)===404?A="خطأ في الـ API endpoint. تأكد من أن الخادم يعمل.":((H=U==null?void 0:U.response)==null?void 0:H.status)===500&&(A="خطأ في الخادم. حاول مرة أخرى لاحقاً."),E({open:!0,message:A,severity:"error"})}finally{h(!1)}});return s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(Xu,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إنشاء واجب جديد"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إنشاء واجب جديد - يمكنك إضافة الأسئلة لاحقاً"})]})]}),t(We,{sx:{mb:4,p:3,borderRadius:3},children:t(O0,{activeStep:n,orientation:"vertical",children:R.map((G,J)=>s(vc,{children:[s(wc,{children:[t(f,{variant:"h6",fontWeight:600,children:G.label}),t(f,{variant:"body2",color:"text.secondary",children:G.description})]}),t(Sc,{children:s(d,{sx:{mb:2},children:[J===0&&s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t(_e,{fullWidth:!0,label:"عنوان الواجب",variant:"outlined",value:l.title,onChange:H=>z("title",H.target.value),required:!0}),t(_e,{fullWidth:!0,label:"وصف الواجب",variant:"outlined",multiline:!0,rows:4,value:l.description,onChange:H=>z("description",H.target.value),required:!0}),s(At,{fullWidth:!0,children:[t(Rt,{children:"المقرر"}),t(Et,{value:l.course,onChange:H=>z("course",H.target.value),label:"المقرر",children:x.map(H=>t(Me,{value:H.id,children:H.title},H.id))})]}),l.course&&s(At,{fullWidth:!0,children:[t(Rt,{children:"الوحدة"}),s(Et,{value:l.module,onChange:H=>z("module",H.target.value),label:"الوحدة",children:[t(Me,{value:"",children:"—"}),y.map(H=>t(Me,{value:H.id,disabled:S,children:H.title},H.id))]})]})]}),J===1&&s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(se,{container:!0,spacing:2,children:[t(se,{xs:12,md:6,children:t(_e,{fullWidth:!0,label:"تاريخ ووقت التسليم",type:"datetime-local",variant:"outlined",value:l.due_date,onChange:H=>z("due_date",H.target.value),InputLabelProps:{shrink:!0},required:!0})}),t(se,{xs:12,md:6,children:t(_e,{fullWidth:!0,label:"المدة (بالدقائق)",type:"number",variant:"outlined",value:l.duration,onChange:H=>z("duration",Number(H.target.value)),inputProps:{min:1}})})]}),s(se,{container:!0,spacing:2,children:[t(se,{xs:12,md:6,children:t(_e,{fullWidth:!0,label:"الدرجة الكلية",type:"number",variant:"outlined",value:l.points,onChange:H=>z("points",Number(H.target.value)),inputProps:{min:1}})}),t(se,{xs:12,md:6,children:t(_e,{fullWidth:!0,label:"الحد الأقصى للمحاولات",type:"number",variant:"outlined",value:l.max_attempts,onChange:H=>z("max_attempts",Number(H.target.value)),inputProps:{min:1}})})]}),t(kt,{control:t(Nr,{checked:l.allow_late_submissions,onChange:H=>z("allow_late_submissions",H.target.checked)}),label:"السماح بالتسليم المتأخر"}),l.allow_late_submissions&&t(_e,{fullWidth:!0,label:"خصم التسليم المتأخر (%)",type:"number",variant:"outlined",value:l.late_submission_penalty,onChange:H=>z("late_submission_penalty",Number(H.target.value)),inputProps:{min:0,max:100}}),t(kt,{control:t(Nr,{checked:l.has_questions,onChange:H=>z("has_questions",H.target.checked)}),label:"يحتوي على أسئلة (يمكن إضافتها لاحقاً)"}),t(kt,{control:t(Nr,{checked:l.has_file_upload,onChange:H=>z("has_file_upload",H.target.checked)}),label:"يسمح برفع ملفات"}),l.has_file_upload&&s(d,{sx:{mt:2},children:[t("input",{accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png",style:{display:"none"},id:"assignment-file-upload",type:"file",onChange:H=>{const U=H.target.files[0];U&&z("assignment_file",U)}}),t("label",{htmlFor:"assignment-file-upload",children:t(te,{variant:"outlined",component:"span",startIcon:t(zi,{}),sx:{mb:2},children:"رفع ملف الواجب"})}),l.assignment_file&&s(d,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[t(zi,{color:"success"}),s(f,{variant:"body2",color:"success.main",children:["تم اختيار: ",l.assignment_file.name]})]})]})]}),J===2&&s(d,{children:[t(f,{variant:"h6",gutterBottom:!0,children:"مراجعة الواجب"}),s(Je,{sx:{p:3,mb:3},children:[t(f,{variant:"h5",fontWeight:600,gutterBottom:!0,children:l.title||"عنوان الواجب"}),t(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:l.description||"وصف الواجب"}),s(se,{container:!0,spacing:2,children:[s(se,{xs:12,md:6,children:[s(f,{variant:"body2",color:"text.secondary",children:["المقرر: ",l.course||"غير محدد"]}),s(f,{variant:"body2",color:"text.secondary",children:["الوحدة: ",l.module||"غير محدد"]})]}),s(se,{xs:12,md:6,children:[s(f,{variant:"body2",color:"text.secondary",children:["تاريخ التسليم: ",l.due_date?new Date(l.due_date).toLocaleString("en-GB"):"غير محدد"]}),s(f,{variant:"body2",color:"text.secondary",children:["الدرجة: ",l.points," نقطة"]})]})]})]}),t(Be,{severity:"info",sx:{mb:2},children:s(f,{variant:"body2",children:[t("strong",{children:"ملاحظة:"})," بعد إنشاء الواجب، يمكنك إضافة الأسئلة من صفحة إدارة الواجبات."]})}),t(f,{variant:"body2",color:"text.secondary",children:"تأكد من مراجعة جميع المعلومات قبل إنشاء الواجب."})]}),s(d,{sx:{mt:2},children:[t(te,{variant:"contained",onClick:()=>J===R.length-1?N():W(),sx:{mr:1},children:J===R.length-1?"إنشاء الواجب":"التالي"}),t(te,{disabled:J===0,onClick:T,sx:{mr:1},children:"السابق"})]})]})})]},G.label))})}),n===R.length&&s(We,{sx:{p:3,borderRadius:3,textAlign:"center"},children:[t(f,{variant:"h6",gutterBottom:!0,children:"جاهز لإنشاء الواجب؟"}),t(f,{variant:"body2",color:"text.secondary",paragraph:!0,children:"تأكد من مراجعة جميع المعلومات قبل إنشاء الواجب."}),s(d,{sx:{display:"flex",gap:2,justifyContent:"center",mt:3},children:[t(te,{variant:"outlined",onClick:()=>a(0),startIcon:t(ci,{}),children:"العودة للتعديل"}),t(te,{variant:"contained",onClick:N,disabled:p,startIcon:p?t(hr,{}):t(Xu,{}),sx:{background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)","&:hover":{background:"linear-gradient(135deg, #ff5252 0%, #e64a19 100%)"}},children:p?"جاري الإنشاء...":"إنشاء الواجب"})]})]}),t(fn,{open:k.open,autoHideDuration:6e3,onClose:()=>E(G=>ae(q({},G),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:()=>E(G=>ae(q({},G),{open:!1})),severity:k.severity,sx:{width:"100%"},children:k.message})})]})},JD=()=>{const e=nt(),{assignmentId:n}=er(),[a,l]=w.useState(0),[u,p]=w.useState({title:"",description:"",course:"",module:"",due_date:"",duration:60,points:100,allow_late_submissions:!1,late_submission_penalty:0,has_questions:!1,has_file_upload:!1,assignment_file:null,max_attempts:1,is_active:!0}),[h,x]=w.useState(!1),[m,y]=w.useState(null),[v,S]=w.useState([]),[_,k]=w.useState([]),[E,R]=w.useState(!1);w.useEffect(()=>{$(null,null,function*(){try{const J=yield xn.getCourses(),U=(Array.isArray(J==null?void 0:J.results)?J.results:Array.isArray(J)?J:(J==null?void 0:J.courses)||[]).map(A=>({id:A.id,title:A.title}));S(U)}catch(J){S([])}}),n&&$(null,null,function*(){try{const J=yield Kt.getAssignmentById(n);p({title:J.title||"",description:J.description||"",course:J.course||"",module:J.module||"",due_date:J.due_date?V6(J.due_date).format("YYYY-MM-DDTHH:mm"):"",duration:J.duration||60,points:J.points||100,allow_late_submissions:!!J.allow_late_submissions,late_submission_penalty:J.late_submission_penalty||0,has_questions:!!J.has_questions,has_file_upload:!!J.has_file_upload,assignment_file:null,max_attempts:J.max_attempts||1,is_active:J.is_active!==!1})}catch(J){y("تعذر تحميل بيانات الواجب")}})},[n]),w.useEffect(()=>{$(null,null,function*(){if(!u.course){k([]);return}R(!0);try{const G=yield dr.getModules(u.course),H=(Array.isArray(G==null?void 0:G.results)?G.results:Array.isArray(G)?G:(G==null?void 0:G.modules)||[]).map(U=>({id:U.id,title:U.name||U.title||`وحدة ${U.id}`}));k(H)}catch(G){k([])}finally{R(!1)}})},[u.course]);const W=()=>l(N=>N+1),T=()=>l(N=>N-1),z=()=>$(null,null,function*(){x(!0),y(null);try{yield Kt.updateAssignment(n,{title:u.title,description:u.description,course:u.course,module:u.module||null,due_date:u.due_date,points:u.points,duration:u.duration,max_attempts:u.max_attempts,allow_late_submissions:u.allow_late_submissions,late_submission_penalty:u.late_submission_penalty,has_questions:u.has_questions,has_file_upload:u.has_file_upload,assignment_file:u.assignment_file,is_active:u.is_active}),e("/teacher/assignments")}catch(N){y("تعذر حفظ التعديلات")}finally{x(!1)}});return s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(rn,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"تعديل الواجب"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"تعديل بيانات الواجب الأساسية"})]})]}),s(We,{sx:{mb:4,p:3,borderRadius:3},children:[m&&t(Be,{severity:"error",sx:{mb:2},children:m}),s(O0,{activeStep:a,orientation:"vertical",children:[s(vc,{children:[s(wc,{children:[t(f,{variant:"h6",fontWeight:600,children:"معلومات الواجب الأساسية"}),t(f,{variant:"body2",color:"text.secondary",children:"عنوان الواجب والوصف والمقرر"})]}),s(Sc,{children:[s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t(_e,{fullWidth:!0,label:"عنوان الواجب",variant:"outlined",value:u.title,onChange:N=>p(ae(q({},u),{title:N.target.value})),required:!0}),t(_e,{fullWidth:!0,label:"وصف الواجب",variant:"outlined",multiline:!0,rows:4,value:u.description,onChange:N=>p(ae(q({},u),{description:N.target.value})),required:!0}),s(At,{fullWidth:!0,children:[t(Rt,{children:"المقرر"}),t(Et,{value:u.course,onChange:N=>p(ae(q({},u),{course:N.target.value})),label:"المقرر",children:v.map(N=>t(Me,{value:N.id,children:N.title},N.id))})]}),!!u.course&&s(At,{fullWidth:!0,children:[t(Rt,{children:"الوحدة"}),s(Et,{value:u.module,onChange:N=>p(ae(q({},u),{module:N.target.value})),label:"الوحدة",children:[t(Me,{value:"",children:"—"}),_.map(N=>t(Me,{value:N.id,disabled:E,children:N.title},N.id))]})]})]}),s(d,{sx:{mt:2},children:[t(te,{variant:"contained",onClick:W,sx:{mr:1},children:"التالي"}),t(te,{disabled:!0,onClick:T,sx:{mr:1},children:"السابق"})]})]})]}),s(vc,{children:[s(wc,{children:[t(f,{variant:"h6",fontWeight:600,children:"إعدادات الواجب"}),t(f,{variant:"body2",color:"text.secondary",children:"التواريخ والدرجات والإعدادات"})]}),s(Sc,{children:[s(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,md:6,children:t(_e,{fullWidth:!0,label:"تاريخ ووقت التسليم",type:"datetime-local",variant:"outlined",value:u.due_date,onChange:N=>p(ae(q({},u),{due_date:N.target.value})),InputLabelProps:{shrink:!0},required:!0})}),t(se,{item:!0,xs:12,md:6,children:t(_e,{fullWidth:!0,label:"المدة (بالدقائق)",type:"number",variant:"outlined",value:u.duration,onChange:N=>p(ae(q({},u),{duration:Number(N.target.value)})),inputProps:{min:1}})})]}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,md:6,children:t(_e,{fullWidth:!0,label:"الدرجة الكلية",type:"number",variant:"outlined",value:u.points,onChange:N=>p(ae(q({},u),{points:Number(N.target.value)})),inputProps:{min:1}})}),t(se,{item:!0,xs:12,md:6,children:t(_e,{fullWidth:!0,label:"الحد الأقصى للمحاولات",type:"number",variant:"outlined",value:u.max_attempts,onChange:N=>p(ae(q({},u),{max_attempts:Number(N.target.value)})),inputProps:{min:1}})})]}),t(kt,{control:t(Nr,{checked:u.allow_late_submissions,onChange:N=>p(ae(q({},u),{allow_late_submissions:N.target.checked}))}),label:"السماح بالتسليم المتأخر"}),u.allow_late_submissions&&t(_e,{fullWidth:!0,label:"خصم التسليم المتأخر (%)",type:"number",variant:"outlined",value:u.late_submission_penalty,onChange:N=>p(ae(q({},u),{late_submission_penalty:Number(N.target.value)})),inputProps:{min:0,max:100}}),t(kt,{control:t(Nr,{checked:u.has_questions,onChange:N=>p(ae(q({},u),{has_questions:N.target.checked}))}),label:"يحتوي على أسئلة (يمكن إدارتها منفصلة)"}),t(kt,{control:t(Nr,{checked:u.has_file_upload,onChange:N=>p(ae(q({},u),{has_file_upload:N.target.checked}))}),label:"يسمح برفع ملفات"})]}),s(d,{sx:{mt:2},children:[t(te,{variant:"contained",onClick:W,sx:{mr:1},children:"التالي"}),t(te,{onClick:T,sx:{mr:1},children:"السابق"})]})]})]}),s(vc,{children:[s(wc,{children:[t(f,{variant:"h6",fontWeight:600,children:"مراجعة وحفظ"}),t(f,{variant:"body2",color:"text.secondary",children:"مراجعة التعديلات وحفظها"})]}),s(Sc,{children:[s(Je,{sx:{p:3,mb:3},children:[t(f,{variant:"h5",fontWeight:600,gutterBottom:!0,children:u.title||"عنوان الواجب"}),t(f,{variant:"body1",color:"text.secondary",paragraph:!0,children:u.description||"وصف الواجب"}),s(se,{container:!0,spacing:2,children:[s(se,{item:!0,xs:12,md:6,children:[s(f,{variant:"body2",color:"text.secondary",children:["المقرر: ",u.course||"غير محدد"]}),s(f,{variant:"body2",color:"text.secondary",children:["الوحدة: ",u.module||"غير محدد"]})]}),s(se,{item:!0,xs:12,md:6,children:[s(f,{variant:"body2",color:"text.secondary",children:["تاريخ التسليم: ",u.due_date||"غير محدد"]}),s(f,{variant:"body2",color:"text.secondary",children:["الدرجة: ",u.points," نقطة"]})]})]})]}),t(Be,{severity:"info",sx:{mb:2},children:s(f,{variant:"body2",children:[t("strong",{children:"ملاحظة:"})," يمكنك إدارة أسئلة الواجب من صفحة إدارة الواجبات."]})}),s(d,{sx:{mt:2},children:[t(te,{variant:"contained",onClick:z,disabled:h,sx:{mr:1},children:"حفظ التعديلات"}),t(te,{onClick:T,sx:{mr:1},children:"السابق"})]})]})]})]})]})]})},e7=()=>{const e=nt(),{assignmentId:n}=er(),[a,l]=w.useState(null),[u,p]=w.useState([]),[h,x]=w.useState(!0),[m,y]=w.useState({open:!1,message:"",severity:"success"}),[v,S]=w.useState(!1),[_,k]=w.useState(null),[E,R]=w.useState({text:"",question_type:"essay",points:10,explanation:"",order:1,is_required:!0,answers:[]}),W=[{value:"multiple_choice",label:"اختيار من متعدد",icon:t(Ug,{})},{value:"true_false",label:"صح أو خطأ",icon:t(Vg,{})},{value:"short_answer",label:"إجابة قصيرة",icon:t(Gw,{})},{value:"essay",label:"مقال",icon:t(Fw,{})},{value:"file_upload",label:"رفع ملف",icon:t(zi,{})}];w.useEffect(()=>{T()},[n]);const T=()=>$(null,null,function*(){x(!0);try{const Y=yield Kt.getAssignmentById(n);l(Y);const P=yield Kt.getAssignmentQuestions(n),I=Array.isArray(P==null?void 0:P.results)?P.results:Array.isArray(P)?P:[],B=yield Promise.all(I.map(F=>$(null,null,function*(){try{const Q=yield Kt.getQuestionAnswers(F.id),M=Array.isArray(Q==null?void 0:Q.results)?Q.results:Array.isArray(Q)?Q:[];return ae(q({},F),{answers:M})}catch(Q){return console.error(`Error fetching answers for question ${F.id}:`,Q),ae(q({},F),{answers:[]})}})));p(B)}catch(Y){console.error("Error fetching assignment and questions:",Y),y({open:!0,message:"تعذر تحميل بيانات الواجب والأسئلة",severity:"error"})}finally{x(!1)}}),z=()=>{k(null),R({text:"",question_type:"essay",points:10,explanation:"",order:u.length+1,is_required:!0,answers:[]}),S(!0)},N=Y=>{k(Y),R({text:Y.text||"",question_type:Y.question_type||"essay",points:Y.points||10,explanation:Y.explanation||"",order:Y.order||1,is_required:Y.is_required!==!1,answers:Y.answers||[]}),S(!0)},G=()=>$(null,null,function*(){try{if(!E.text.trim()){y({open:!0,message:"يجب إدخال نص السؤال",severity:"error"});return}if(_){yield Kt.updateQuestion(_.id,{text:E.text,question_type:E.question_type,points:E.points,explanation:E.explanation,order:E.order,is_required:E.is_required});for(const Y of E.answers)Y.id?yield Kt.updateAnswer(Y.id,{text:Y.text,is_correct:Y.is_correct,explanation:Y.explanation||"",order:Y.order||0}):yield Kt.createAnswer({question:_.id,text:Y.text,is_correct:Y.is_correct,explanation:Y.explanation||"",order:Y.order||0});y({open:!0,message:"تم تحديث السؤال بنجاح",severity:"success"})}else{const Y=yield Kt.createQuestion({assignment:n,text:E.text,question_type:E.question_type,points:E.points,explanation:E.explanation,order:E.order,is_required:E.is_required});for(const P of E.answers)yield Kt.createAnswer({question:Y.id,text:P.text,is_correct:P.is_correct,explanation:P.explanation||"",order:P.order||0});y({open:!0,message:"تم إضافة السؤال بنجاح",severity:"success"})}S(!1),T()}catch(Y){console.error("Error saving question:",Y),y({open:!0,message:"تعذر حفظ السؤال",severity:"error"})}}),J=Y=>$(null,null,function*(){if(window.confirm("هل أنت متأكد من حذف هذا السؤال؟"))try{yield Kt.deleteQuestion(Y),y({open:!0,message:"تم حذف السؤال بنجاح",severity:"success"}),T()}catch(P){console.error("Error deleting question:",P),y({open:!0,message:"تعذر حذف السؤال",severity:"error"})}}),H=()=>{R(Y=>ae(q({},Y),{answers:[...Y.answers,{text:"",is_correct:!1,explanation:"",order:Y.answers.length+1}]}))},U=(Y,P,I)=>{R(B=>ae(q({},B),{answers:B.answers.map((F,Q)=>Q===Y?ae(q({},F),{[P]:I}):F)}))},A=Y=>{R(P=>ae(q({},P),{answers:P.answers.filter((I,B)=>B!==Y)}))},V=Y=>{const P=W.find(I=>I.value===Y);return P?P.icon:t(nr,{})};return h?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(f,{children:"جاري التحميل..."})}):s(d,{className:"assignments-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #e5978b 0%, #2e7d32 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(nr,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة أسئلة الواجب"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:(a==null?void 0:a.title)||"عنوان الواجب"})]})]}),t(d,{sx:{mb:3},children:t(te,{variant:"outlined",startIcon:t(Gt,{}),onClick:()=>e("/teacher/assignments"),sx:{mb:2},children:"العودة إلى الواجبات"})}),s(We,{sx:{p:3,borderRadius:3},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[s(f,{variant:"h5",fontWeight:600,children:["أسئلة الواجب (",u.length,")"]}),t(te,{variant:"contained",startIcon:t(Hr,{}),onClick:z,sx:{background:"linear-gradient(135deg, #e5978b 0%, #2e7d32 100%)","&:hover":{background:"linear-gradient(135deg, #388e3c 0%, #1b5e20 100%)"}},children:"إضافة سؤال جديد"})]}),u.length===0?t(Be,{severity:"info",children:'لا توجد أسئلة لهذا الواجب. اضغط على "إضافة سؤال جديد" لبدء إضافة الأسئلة.'}):t(Fr,{children:u.map((Y,P)=>{var I;return t(zr,{sx:{mb:2,p:0},children:s(Je,{sx:{width:"100%",p:3},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[V(Y.question_type),s(f,{variant:"h6",fontWeight:600,children:["السؤال ",P+1]}),t(Ce,{label:((I=W.find(B=>B.value===Y.question_type))==null?void 0:I.label)||Y.question_type,size:"small",variant:"outlined",sx:{ml:1}}),t(Ce,{label:`${Y.points} نقطة`,size:"small",color:"primary",sx:{ml:1}})]}),s(d,{sx:{display:"flex",gap:1},children:[t(xe,{size:"small",onClick:()=>N(Y),sx:{color:"#1976d2"},children:t(vr,{})}),t(xe,{size:"small",onClick:()=>J(Y.id),sx:{color:"#d32f2f"},children:t(sn,{})})]})]}),t(f,{variant:"body1",sx:{mb:2},children:Y.text}),Y.explanation&&s(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[t("strong",{children:"شرح:"})," ",Y.explanation]}),(Y.question_type==="multiple_choice"||Y.question_type==="true_false")&&Y.answers&&Y.answers.length>0&&s(d,{sx:{mt:2},children:[t(f,{variant:"subtitle2",fontWeight:600,sx:{mb:1},children:"الإجابات:"}),t(Fr,{dense:!0,children:Y.answers.map((B,F)=>s(zr,{sx:{py:.5},children:[t(Rr,{sx:{minWidth:30},children:B.is_correct?t(Vg,{color:"success",fontSize:"small"}):t(Ug,{color:"disabled",fontSize:"small"})}),t(ir,{primary:B.text,secondary:B.explanation})]},B.id))})]})]})},Y.id)})})]}),s(yr,{open:v,onClose:()=>S(!1),maxWidth:"md",fullWidth:!0,children:[t(Wr,{children:_?"تعديل السؤال":"إضافة سؤال جديد"}),t(br,{children:s(d,{sx:{display:"flex",flexDirection:"column",gap:3,mt:2},children:[t(_e,{fullWidth:!0,label:"نص السؤال",variant:"outlined",multiline:!0,rows:3,value:E.text,onChange:Y=>R(P=>ae(q({},P),{text:Y.target.value})),required:!0}),s(se,{container:!0,spacing:2,children:[t(se,{item:!0,xs:12,md:6,children:s(At,{fullWidth:!0,children:[t(Rt,{children:"نوع السؤال"}),t(Et,{value:E.question_type,onChange:Y=>R(P=>ae(q({},P),{question_type:Y.target.value})),label:"نوع السؤال",children:W.map(Y=>t(Me,{value:Y.value,children:s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[Y.icon,Y.label]})},Y.value))})]})}),t(se,{item:!0,xs:12,md:6,children:t(_e,{fullWidth:!0,label:"الدرجة",type:"number",variant:"outlined",value:E.points,onChange:Y=>R(P=>ae(q({},P),{points:Number(Y.target.value)})),inputProps:{min:1}})})]}),t(_e,{fullWidth:!0,label:"شرح السؤال (اختياري)",variant:"outlined",multiline:!0,rows:2,value:E.explanation,onChange:Y=>R(P=>ae(q({},P),{explanation:Y.target.value}))}),t(_e,{fullWidth:!0,label:"ترتيب السؤال",type:"number",variant:"outlined",value:E.order,onChange:Y=>R(P=>ae(q({},P),{order:Number(Y.target.value)})),inputProps:{min:1}}),t(kt,{control:t(Nr,{checked:E.is_required,onChange:Y=>R(P=>ae(q({},P),{is_required:Y.target.checked}))}),label:"سؤال إجباري"}),(E.question_type==="multiple_choice"||E.question_type==="true_false")&&s(Ow,{children:[t(Lw,{expandIcon:t(gh,{}),children:s(f,{variant:"subtitle1",fontWeight:600,children:["الإجابات (",E.answers.length,")"]})}),t(Bw,{children:s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[E.answers.map((Y,P)=>s(d,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t(_e,{fullWidth:!0,label:`الإجابة ${P+1}`,variant:"outlined",size:"small",value:Y.text,onChange:I=>U(P,"text",I.target.value)}),t(kt,{control:t(Wc,{checked:Y.is_correct,onChange:I=>U(P,"is_correct",I.target.checked)}),label:"صحيحة"}),t(xe,{size:"small",onClick:()=>A(P),sx:{color:"#d32f2f"},children:t(sn,{})})]},P)),t(te,{variant:"outlined",startIcon:t(Hr,{}),onClick:H,size:"small",children:"إضافة إجابة"})]})})]})]})}),s($r,{children:[t(te,{onClick:()=>S(!1),children:"إلغاء"}),t(te,{variant:"contained",onClick:G,startIcon:t(Vo,{}),children:_?"حفظ التعديلات":"إضافة السؤال"})]})]}),t(fn,{open:m.open,autoHideDuration:6e3,onClose:()=>y(Y=>ae(q({},Y),{open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:()=>y(Y=>ae(q({},Y),{open:!1})),severity:m.severity,sx:{width:"100%"},children:m.message})})]})},xt={getMeetings:(...n)=>$(null,[...n],function*(e={}){try{return(yield ee.get("/api/meetings/",{params:e})).data}catch(a){throw console.error("Error fetching meetings:",a),a}}),getMeeting:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/`)).data}catch(n){throw console.error("Error fetching meeting:",n),n}}),getMeetingDetails:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/meetings/${e}/`)).data}catch(n){throw console.error("Error fetching meeting details:",n),n}}),createMeeting:e=>$(null,null,function*(){try{return(yield ee.post("/api/meetings/meetings/",e)).data}catch(n){throw console.error("Error creating meeting:",n),n}}),updateMeeting:(e,n)=>$(null,null,function*(){try{return(yield ee.put(`/api/meetings/meetings/${e}/`,n)).data}catch(a){throw console.error("Error updating meeting:",a),a}}),deleteMeeting:e=>$(null,null,function*(){try{return(yield ee.delete(`/api/meetings/meetings/${e}/`)).data}catch(n){throw console.error("Error deleting meeting:",n),n}}),getMyMeetings:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/my-meetings/")).data}catch(e){throw console.error("Error fetching my meetings:",e),e}}),getUpcomingMeetings:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/upcoming/")).data}catch(e){throw console.error("Error fetching upcoming meetings:",e),e}}),searchMeetings:e=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/search/",{params:e})).data}catch(n){throw console.error("Error searching meetings:",n),n}}),getMeetingStats:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/stats/dashboard/")).data}catch(e){throw console.error("Error fetching meeting stats:",e),e}}),quickCreateMeeting:e=>$(null,null,function*(){try{return(yield ee.post("/api/meetings/quick-create/",e)).data}catch(n){throw console.error("Error quick creating meeting:",n),n}}),startLiveMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/start_live/`)).data}catch(n){throw console.error("Error starting live meeting:",n),n}}),endLiveMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/end_live/`)).data}catch(n){throw console.error("Error ending live meeting:",n),n}}),joinMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/join/`)).data}catch(n){throw console.error("Error joining meeting:",n),n}}),leaveMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/leave/`)).data}catch(n){throw console.error("Error leaving meeting:",n),n}}),markAttendance:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/mark_attendance/`)).data}catch(n){throw console.error("Error marking attendance:",n),n}}),updateParticipantAttendance:(e,n,a)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/update_attendance/`,{participant_id:n,attendance_status:a})).data}catch(l){throw console.error("Error updating participant attendance:",l),l}}),autoJoinMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/auto-join/`)).data}catch(n){throw console.error("Error auto joining meeting:",n),n}}),markAbsentParticipants:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/mark-absent/`)).data}catch(n){throw console.error("Error marking absent participants:",n),n}}),registerForMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/register/`)).data}catch(n){throw console.error("Error registering for meeting:",n),n}}),getMeetingParticipants:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/meetings/${e}/participants/`)).data}catch(n){return console.error("Error fetching meeting participants:",n),[]}}),startLiveMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/start_live/`)).data}catch(n){throw console.error("Error starting live meeting:",n),n}}),endLiveMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/end_live/`)).data}catch(n){throw console.error("Error ending live meeting:",n),n}}),getChatMessages:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/meetings/${e}/chat/`)).data}catch(n){return console.error("Error fetching chat messages:",n),[]}}),sendChatMessage:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/meetings/${e}/chat/`,{message:n})).data}catch(a){throw console.error("Error sending chat message:",a),a}}),addParticipant:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/add_participant/`,n)).data}catch(a){throw console.error("Error adding participant:",a),a}}),removeParticipant:(e,n)=>$(null,null,function*(){try{return(yield ee.delete(`/api/meetings/${e}/remove_participant/${n}/`)).data}catch(a){throw console.error("Error removing participant:",a),a}}),getMeetingChat:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/meetings/${e}/chat/`)).data}catch(n){throw console.error("Error fetching meeting chat:",n),n}}),getMeetingNotifications:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/notifications/`)).data}catch(n){throw console.error("Error fetching meeting notifications:",n),n}}),sendMeetingNotification:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/notifications/`,n)).data}catch(a){throw console.error("Error sending meeting notification:",a),a}}),getMeetingMaterials:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/materials/`)).data}catch(n){throw console.error("Error fetching meeting materials:",n),n}}),uploadMeetingMaterials:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/upload_materials/`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw console.error("Error uploading meeting materials:",a),a}}),downloadMeetingMaterials:(e,n)=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/download_materials/`,{params:{material_id:n},responseType:"blob"})).data}catch(a){throw console.error("Error downloading meeting materials:",a),a}}),getMeetingAttendanceReport:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/attendance_report/`)).data}catch(n){throw console.error("Error fetching meeting attendance report:",n),n}}),exportMeetingData:(e,n="pdf")=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/export/`,{params:{format:n},responseType:"blob"})).data}catch(a){throw console.error("Error exporting meeting data:",a),a}}),unregisterFromMeeting:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/unregister/`)).data}catch(n){throw console.error("Error unregistering from meeting:",n),n}}),markAttendanceWithStatus:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/mark_attendance/`,{status:n})).data}catch(a){throw console.error("Error marking attendance with status:",a),a}}),bulkMarkAttendance:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/bulk_mark_attendance/`,{attendance_data:n})).data}catch(a){throw console.error("Error bulk marking attendance:",a),a}}),getMyAttendanceStatus:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/meetings/${e}/my_attendance/`)).data}catch(n){return console.error("Error fetching my attendance status:",n),{attendance_status:"not_registered",joined_at:null,left_at:null,attendance_duration:null}}}),checkRegistrationStatus:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/meetings/${e}/check_registration/`)).data}catch(n){return console.error("Error checking registration status:",n),{is_registered:!1,meeting_id:e}}}),getAvailableMeetings:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/available-meetings/")).data}catch(e){throw console.error("Error fetching available meetings:",e),e}}),getJoinableMeetings:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/joinable-meetings/")).data}catch(e){throw console.error("Error fetching joinable meetings:",e),e}}),getTeachingMeetings:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/teaching-meetings/")).data}catch(e){throw console.error("Error fetching teaching meetings:",e),e}}),getAttendingMeetings:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/attending-meetings/")).data}catch(e){throw console.error("Error fetching attending meetings:",e),e}}),sendMeetingInvitation:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/send_invitation/`,{student_ids:n})).data}catch(a){throw console.error("Error sending meeting invitation:",a),a}}),getMeetingInvitations:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/invitations/")).data}catch(e){throw console.error("Error fetching meeting invitations:",e),e}}),acceptInvitation:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/invitations/${e}/accept/`)).data}catch(n){throw console.error("Error accepting invitation:",n),n}}),declineInvitation:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/invitations/${e}/decline/`)).data}catch(n){throw console.error("Error declining invitation:",n),n}}),getMeetingStatus:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/status/`)).data}catch(n){throw console.error("Error fetching meeting status:",n),n}}),startRecording:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/start_recording/`)).data}catch(n){throw console.error("Error starting recording:",n),n}}),stopRecording:e=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/stop_recording/`)).data}catch(n){throw console.error("Error stopping recording:",n),n}}),getMeetingRecordings:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/recordings/`)).data}catch(n){throw console.error("Error fetching meeting recordings:",n),n}}),downloadRecording:(e,n)=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/recordings/${n}/download/`,{responseType:"blob"})).data}catch(a){throw console.error("Error downloading recording:",a),a}}),getMeetingAnalytics:e=>$(null,null,function*(){try{return(yield ee.get(`/api/meetings/${e}/analytics/`)).data}catch(n){throw console.error("Error fetching meeting analytics:",n),n}}),getMeetingHistory:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/meeting-history/")).data}catch(e){throw console.error("Error fetching meeting history:",e),e}}),getMeetingCalendarEvents:()=>$(null,null,function*(){try{return(yield ee.get("/api/meetings/calendar-events/")).data}catch(e){throw console.error("Error fetching meeting calendar events:",e),e}}),syncWithCalendar:(e,n)=>$(null,null,function*(){try{return(yield ee.post(`/api/meetings/${e}/sync_calendar/`,{calendar_data:n})).data}catch(a){throw console.error("Error syncing with calendar:",a),a}})},t7=({open:e,onClose:n,meeting:a,onEdit:l,onStartLive:u,onJoinMeeting:p,onDownloadMaterial:h,onWatchRecording:x,onRefresh:m})=>{const[y,v]=w.useState(0),[S,_]=w.useState(!1),[k,E]=w.useState(!1),[R,W]=w.useState(null),[T,z]=w.useState(null),[N,G]=w.useState([]),[J,H]=w.useState(0),[U,A]=w.useState(10);w.useEffect(()=>{e&&(a!=null&&a.id)&&(console.log("TeacherMeetingDetailsDialog useEffect triggered - fetching details for meeting:",a.id),V())},[e,a==null?void 0:a.id,a==null?void 0:a.updated_at,a==null?void 0:a.start_time,a==null?void 0:a.duration]),w.useEffect(()=>{e||(W(null),z(null))},[e]);const V=()=>$(null,null,function*(){try{E(!0),z(null),console.log("Fetching meeting details for ID:",a.id);const ge=yield xt.getMeetingDetails(a.id);console.log("Meeting details response:",ge),W(ge);const Ae=yield xt.getMeetingParticipants(a.id);console.log("Participants response:",Ae),G(Ae)}catch(ge){console.error("Error fetching meeting details:",ge),z("حدث خطأ في تحميل تفاصيل الاجتماع")}finally{E(!1)}}),Y=(ge,Ae)=>{H(Ae)},P=ge=>{A(parseInt(ge.target.value,10)),H(0)},I=(ge,Ae)=>$(null,null,function*(){try{yield xt.updateParticipantAttendance(a.id,ge,Ae),G(tt=>tt.map(yt=>yt.id===ge?ae(q({},yt),{attendance_status:Ae}):yt)),alert(`تم تحديث حالة الحضور إلى: ${Ae==="present"?"حاضر":Ae==="late"?"متأخر":"غائب"}`)}catch(tt){console.error("Error updating attendance:",tt),alert("حدث خطأ في تحديث حالة الحضور")}}),B=()=>$(null,null,function*(){try{const ge=yield xt.markAbsentParticipants(a.id);alert(ge.message);const Ae=yield xt.getMeetingParticipants(a.id);G(Ae)}catch(ge){console.error("Error marking absent participants:",ge),alert("حدث خطأ في تسجيل الغائبين")}}),F=ge=>$(null,null,function*(){try{yield navigator.clipboard.writeText(ge),_(!0),setTimeout(()=>_(!1),2e3)}catch(Ae){console.error("Failed to copy: ",Ae)}}),Q=ge=>{switch(ge){case"upcoming":return"قادم";case"ongoing":return"جاري";case"completed":return"منتهي";case"cancelled":return"ملغي";default:return"غير محدد"}},M=ge=>{switch(ge){case"upcoming":return"primary";case"ongoing":return"success";case"completed":return"default";case"cancelled":return"error";default:return"default"}},O=ge=>{switch(ge){case"lecture":return"محاضرة";case"discussion":return"مناقشة";case"workshop":return"ورشة عمل";case"exam":return"امتحان";default:return"اجتماع عادي"}},C=ge=>{if(!ge)return"غير محدد";try{return new Date(ge).toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(Ae){return"تاريخ غير صحيح"}},X=ge=>{if(!ge)return"غير محدد";try{return new Date(ge).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(Ae){return"وقت غير صحيح"}},Z=ge=>{if(!ge)return"غير محدد";const Ae=Math.floor(ge/60),tt=ge%60;return Ae>0?`${Ae} ساعة ${tt} دقيقة`:`${tt} دقيقة`};if(!a)return null;const j=R||a,re=j.status||"upcoming",de=N.length,fe=N.filter(ge=>ge.attendance_status==="present"||ge.attendance_status==="late").length,ce=N.filter(ge=>ge.attendance_status==="registered").length,ie=de>0?Math.round(fe/de*100):0;return s(yr,{open:e,onClose:n,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{borderRadius:4,maxHeight:"90vh",overflow:"hidden",direction:"rtl"}},children:[s(Wr,{sx:{background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",py:3,px:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(nn,{sx:{fontSize:28}}),t(f,{variant:"h5",fontWeight:600,children:"تفاصيل الاجتماع - لوحة المعلم"})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(Ce,{label:Q(re),color:M(re),variant:"filled",sx:{bgcolor:re==="ongoing"?"#e5978b":re==="upcoming"?"#2196f3":re==="completed"?"#9e9e9e":"#f44336",color:"white",fontWeight:600}}),t(xe,{onClick:()=>{V(),m&&m()},disabled:k,sx:{color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:t(No,{})}),t(xe,{onClick:n,sx:{color:"white"},children:t(an,{})})]})]}),s(br,{sx:{p:0,overflow:"auto"},children:[k&&t(d,{sx:{display:"flex",justifyContent:"center",p:4},children:t(Ke,{})}),T&&t(d,{sx:{p:4},children:t(Be,{severity:"error",action:s(te,{color:"inherit",size:"small",onClick:V,children:[t(No,{sx:{ml:1}}),"إعادة المحاولة"]}),children:T})}),!k&&!T&&j&&s(d,{sx:{p:4},children:[s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e9ecef"},children:[t(f,{variant:"h4",fontWeight:700,gutterBottom:!0,color:"primary",children:j.title}),j.description&&t(f,{variant:"body1",color:"text.secondary",sx:{mt:2,lineHeight:1.8},children:j.description})]}),s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #bbdefb"},children:[s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(Tn,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:C(j.start_time)}),t(f,{variant:"caption",color:"text.secondary",children:"تاريخ الاجتماع"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(on,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[s(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[X(j.start_time)," - ",Z(j.duration)]}),t(f,{variant:"caption",color:"text.secondary",children:"وقت البدء والمدة"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(nn,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:O(j.meeting_type)}),t(f,{variant:"caption",color:"text.secondary",children:"نوع الاجتماع"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(Po,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[s(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[de,"/",j.max_participants||"غير محدد"," مشارك"]}),t(f,{variant:"caption",color:"text.secondary",children:"عدد المشاركين"})]})]})})]}),s(se,{container:!0,spacing:3,sx:{mt:2},children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(Xu,{sx:{color:"#ff9800",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:C(j.created_at)}),t(f,{variant:"caption",color:"text.secondary",children:"تاريخ الإنشاء"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(qa,{sx:{color:"#e5978b",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:j.creator_name||"غير محدد"}),t(f,{variant:"caption",color:"text.secondary",children:"منشئ الاجتماع"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(zn,{sx:{color:"#1976d2",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:j.updated_at?C(j.updated_at):"لم يتم التحديث"}),t(f,{variant:"caption",color:"text.secondary",children:"آخر تحديث"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(xr,{sx:{color:"#e5978b",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:j.is_active?"نشط":"غير نشط"}),t(f,{variant:"caption",color:"text.secondary",children:"حالة الاجتماع"})]})]})})]}),s(d,{sx:{mt:3},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:"ميزات الاجتماع"}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t(Ce,{icon:j.enable_chat?t(xh,{}):t(ci,{}),label:j.enable_chat?"الدردشة مفعلة":"الدردشة معطلة",color:j.enable_chat?"success":"default",variant:"outlined"}),t(Ce,{icon:j.enable_screen_share?t(L0,{}):t(ci,{}),label:j.enable_screen_share?"مشاركة الشاشة مفعلة":"مشاركة الشاشة معطلة",color:j.enable_screen_share?"success":"default",variant:"outlined"}),t(Ce,{icon:j.enable_recording?t(li,{}):t(ci,{}),label:j.enable_recording?"التسجيل مفعل":"التسجيل معطل",color:j.enable_recording?"success":"default",variant:"outlined"})]})]})]}),j.zoom_link&&s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #e8f5e8 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #c8e6c9"},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"success.main",children:"رابط الاجتماع"}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mt:2},children:[t(_e,{fullWidth:!0,value:j.zoom_link,InputProps:{readOnly:!0},variant:"outlined",size:"small"}),t(te,{variant:"outlined",startIcon:S?t(yc,{}):t(bh,{}),onClick:()=>F(j.zoom_link),color:S?"success":"primary",children:S?"تم النسخ":"نسخ الرابط"})]})]}),s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #fff3e0 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #ffcc02"},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"warning.main",children:"إحصائيات الحضور"}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[t(f,{variant:"h4",fontWeight:700,color:"primary",children:de}),t(f,{variant:"body2",color:"text.secondary",children:"إجمالي المسجلين"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[t(f,{variant:"h4",fontWeight:700,color:"success.main",children:fe}),t(f,{variant:"body2",color:"text.secondary",children:"الحضور"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[t(f,{variant:"h4",fontWeight:700,color:"warning.main",children:ce}),t(f,{variant:"body2",color:"text.secondary",children:"المسجلين"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[s(f,{variant:"h4",fontWeight:700,color:"info.main",children:[ie,"%"]}),t(f,{variant:"body2",color:"text.secondary",children:"نسبة الحضور"})]})})]}),t(hr,{variant:"determinate",value:ie,sx:{mt:2,height:8,borderRadius:4}})]}),s(We,{elevation:0,sx:{p:4,background:"linear-gradient(135deg, #f3e5f5 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e1bee7"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t(f,{variant:"h6",fontWeight:600,color:"secondary.main",children:"قائمة المشاركين"}),t(te,{variant:"outlined",color:"error",size:"small",onClick:B,startIcon:t(an,{}),children:"تسجيل الغائبين"})]}),N.length>0?s(pi,{component:We,elevation:0,sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:[s(ui,{children:[t(hi,{children:s(Jt,{sx:{bgcolor:"grey.50"},children:[t(ye,{sx:{fontWeight:600},children:"الطالب"}),t(ye,{sx:{fontWeight:600},children:"حاضر"}),t(ye,{sx:{fontWeight:600},children:"متأخر"}),t(ye,{sx:{fontWeight:600},children:"غائب"}),t(ye,{sx:{fontWeight:600},children:"الحالة"}),t(ye,{sx:{fontWeight:600},children:"وقت الانضمام"}),t(ye,{sx:{fontWeight:600},children:"الإجراءات"})]})}),t(fi,{children:N.slice(J*U,J*U+U).map((ge,Ae)=>{var tt;return s(Jt,{hover:!0,children:[t(ye,{children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(_t,{src:ge.user_image,sx:{width:40,height:40},children:((tt=ge.user_name)==null?void 0:tt.charAt(0))||"U"}),s(d,{children:[t(f,{variant:"body2",fontWeight:500,children:ge.user_name||"مستخدم غير محدد"}),t(f,{variant:"caption",color:"text.secondary",children:ge.user_email})]})]})}),t(ye,{align:"center",children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:ge.attendance_status==="present"?t(yc,{fontSize:"large",sx:{color:"success.main"}}):t(d,{sx:{width:24,height:24}})})}),t(ye,{align:"center",children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:ge.attendance_status==="late"?t(zn,{fontSize:"large",sx:{color:"warning.main"}}):t(d,{sx:{width:24,height:24}})})}),t(ye,{align:"center",children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:ge.attendance_status==="absent"?t(an,{fontSize:"large",sx:{color:"error.main"}}):t(d,{sx:{width:24,height:24}})})}),t(ye,{children:t(Ce,{label:ge.attendance_status==="present"?"حاضر":ge.attendance_status==="late"?"متأخر":ge.attendance_status==="absent"?"غائب":ge.attendance_status==="registered"?"مسجل":"غير محدد",color:ge.attendance_status==="present"?"success":ge.attendance_status==="late"?"warning":ge.attendance_status==="absent"?"error":ge.attendance_status==="registered"?"primary":"default",size:"small",variant:"outlined"})}),t(ye,{children:t(f,{variant:"body2",color:"text.secondary",children:ge.joined_at?X(ge.joined_at):"لم ينضم بعد"})}),t(ye,{children:s(d,{sx:{display:"flex",gap:1},children:[t(Xe,{title:"تسجيل حضور",children:t(xe,{size:"small",color:"success",onClick:()=>I(ge.id,"present"),children:t(yc,{})})}),t(Xe,{title:"تسجيل تأخير",children:t(xe,{size:"small",color:"warning",onClick:()=>I(ge.id,"late"),children:t(zn,{})})}),t(Xe,{title:"تسجيل غياب",children:t(xe,{size:"small",color:"error",onClick:()=>I(ge.id,"absent"),children:t(an,{})})})]})})]},ge.id||Ae)})})]}),t(Xa,{rowsPerPageOptions:[5,10,25],component:"div",count:N.length,rowsPerPage:U,page:J,onPageChange:Y,onRowsPerPageChange:P,labelRowsPerPage:"عدد الصفوف في الصفحة:",labelDisplayedRows:({from:ge,to:Ae,count:tt})=>`${ge}-${Ae} من ${tt}`})]}):s(d,{sx:{textAlign:"center",py:4},children:[t(Po,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t(f,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"لا يوجد مشاركون"}),t(f,{variant:"body2",color:"text.secondary",children:"لم يتم تسجيل أي مشاركين في هذا الاجتماع بعد"})]})]})]})]}),s($r,{sx:{p:3,gap:2,justifyContent:"flex-start",direction:"rtl"},children:[re==="upcoming"&&l&&t(te,{variant:"outlined",color:"primary",onClick:()=>l(j),startIcon:t(vr,{}),children:"تعديل الاجتماع"}),re==="ongoing"&&u&&t(te,{variant:"contained",color:"success",onClick:()=>u(j.id),startIcon:t(Ci,{}),children:"بدء البث المباشر"}),j.zoom_link&&re==="ongoing"&&p&&t(te,{variant:"contained",color:"primary",onClick:()=>p(j),startIcon:t(nn,{}),children:"انضم للاجتماع"}),t(te,{variant:"outlined",onClick:n,children:"إغلاق"})]})]})},r7=oe(Je)(({theme:e,status:n})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:n==="ongoing"?"2px solid #e5978b":"1px solid #e0e0e0","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},background:n==="ongoing"?"linear-gradient(135deg, #f8fff8 0%, #ffffff 100%)":"#ffffff"})),lw=oe(Ce)(({status:e})=>q(q(q(q({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},e==="upcoming"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),e==="ongoing"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),e==="completed"&&{backgroundColor:"#f3e5f5",color:"#7b1fa2"}),e==="cancelled"&&{backgroundColor:"#ffebee",color:"#d32f2f"})),n7=()=>{const[e,n]=w.useState(0),[a,l]=w.useState(!1),[u,p]=w.useState(!1),[h,x]=w.useState(null),[m,y]=w.useState([]),[v,S]=w.useState(!0),[_,k]=w.useState(null),[E,R]=w.useState({open:!1,message:"",severity:"success"}),[W,T]=w.useState({title:"",description:"",meeting_type:"NORMAL",start_time:"",duration:60,zoom_link:"",max_participants:20,enable_screen_share:!0,enable_chat:!0,enable_recording:!1});w.useEffect(()=>{z();const j=setInterval(()=>{m.some(de=>Q(de)==="ongoing")&&(console.log("Auto-refreshing meetings due to ongoing meetings..."),z())},3e4);return()=>clearInterval(j)},[]);const z=()=>$(null,null,function*(){try{S(!0),console.log("Fetching meetings...");const j=yield xt.getMyMeetings();console.log("API Response:",j);let re=[];j!=null&&j.meetings?re=j.meetings:j!=null&&j.results?re=j.results:Array.isArray(j)?re=j:re=[],console.log("Processed meetings data:",re);const de=Array.isArray(re)?re:[];if(y(de),h){const fe=de.find(ce=>ce.id===h.id);fe&&(console.log("Updating selectedMeeting with fresh data:",fe),x(fe))}k(null)}catch(j){console.error("Error fetching meetings:",j),k("حدث خطأ في تحميل الاجتماعات"),y([])}finally{S(!1)}}),N=()=>{var re,de;const j=[];return(re=W.title)!=null&&re.trim()||j.push("عنوان الاجتماع مطلوب"),W.start_time?new Date(W.start_time)<=new Date&&j.push("تاريخ ووقت البدء يجب أن يكون في المستقبل"):j.push("تاريخ ووقت البدء مطلوب"),(!W.duration||W.duration<15)&&j.push("المدة يجب أن تكون 15 دقيقة على الأقل"),W.duration>480&&j.push("المدة لا يمكن أن تتجاوز 8 ساعات"),W.meeting_type==="ZOOM"&&!((de=W.zoom_link)!=null&&de.trim())&&j.push("رابط زووم مطلوب لاجتماعات زووم"),(W.max_participants<1||W.max_participants>200)&&j.push("عدد المشاركين يجب أن يكون بين 1 و 200"),j},G=()=>$(null,null,function*(){var re,de;const j=N();if(j.length>0){R({open:!0,message:j.join(`
`),severity:"error"});return}try{S(!0),yield xt.createMeeting(W),R({open:!0,message:"تم إنشاء الاجتماع بنجاح",severity:"success"}),l(!1),A(),z()}catch(fe){console.error("Error creating meeting:",fe),R({open:!0,message:((de=(re=fe.response)==null?void 0:re.data)==null?void 0:de.message)||"حدث خطأ في إنشاء الاجتماع",severity:"error"})}finally{S(!1)}}),J=j=>$(null,null,function*(){var de,fe;const re=N();if(re.length>0){R({open:!0,message:re.join(`
`),severity:"error"});return}try{S(!0);const ce=yield xt.updateMeeting(j,W);R({open:!0,message:"تم تحديث الاجتماع بنجاح",severity:"success"}),l(!1),A(),h&&h.id===j&&(console.log("Updating selectedMeeting after edit:",ce),x(ie=>ae(q(q({},ie),ce),{updated_at:new Date().toISOString()}))),z()}catch(ce){console.error("Error updating meeting:",ce),R({open:!0,message:((fe=(de=ce.response)==null?void 0:de.data)==null?void 0:fe.message)||"حدث خطأ في تحديث الاجتماع",severity:"error"})}finally{S(!1)}}),H=j=>$(null,null,function*(){var re,de;if(window.confirm("هل أنت متأكد من حذف هذا الاجتماع؟"))try{S(!0),yield xt.deleteMeeting(j),R({open:!0,message:"تم حذف الاجتماع بنجاح",severity:"success"}),z()}catch(fe){console.error("Error deleting meeting:",fe),R({open:!0,message:((de=(re=fe.response)==null?void 0:re.data)==null?void 0:de.message)||"حدث خطأ في حذف الاجتماع",severity:"error"})}finally{S(!1)}}),U=j=>$(null,null,function*(){var re,de;try{S(!0);const fe=yield xt.startLiveMeeting(j);R({open:!0,message:"تم بدء الاجتماع المباشر بنجاح",severity:"success"}),z(),window.open(`/teacher/meetings/live/${j}`,"_blank")}catch(fe){console.error("Error starting live meeting:",fe),R({open:!0,message:((de=(re=fe.response)==null?void 0:re.data)==null?void 0:de.message)||"حدث خطأ في بدء الاجتماع المباشر",severity:"error"})}finally{S(!1)}}),A=()=>{const j=new Date;j.setHours(j.getHours()+1),j.setMinutes(0),j.setSeconds(0),T({title:"",description:"",meeting_type:"NORMAL",start_time:(de=>{const fe=de.getFullYear(),ce=String(de.getMonth()+1).padStart(2,"0"),ie=String(de.getDate()).padStart(2,"0"),ge=String(de.getHours()).padStart(2,"0"),Ae=String(de.getMinutes()).padStart(2,"0");return`${fe}-${ce}-${ie}T${ge}:${Ae}`})(j),duration:60,zoom_link:"",max_participants:20,enable_screen_share:!0,enable_chat:!0,enable_recording:!1})},V=(j,re)=>{T(de=>ae(q({},de),{[j]:re}))},Y=j=>{console.log("openEditDialog called with meeting:",j);const de=(fe=>{if(!fe)return"";try{const ce=new Date(fe);if(isNaN(ce.getTime()))return console.error("Invalid date:",fe),"";const ie=ce.getFullYear(),ge=String(ce.getMonth()+1).padStart(2,"0"),Ae=String(ce.getDate()).padStart(2,"0"),tt=String(ce.getHours()).padStart(2,"0"),yt=String(ce.getMinutes()).padStart(2,"0"),wr=`${ie}-${ge}-${Ae}T${tt}:${yt}`;return console.log("Formatted date:",wr,"from original:",fe),wr}catch(ce){return console.error("Error formatting date:",ce,"dateString:",fe),""}})(j.start_time);console.log("Formatted start_time:",de),console.log("Meeting duration:",j.duration),T({title:j.title||"",description:j.description||"",meeting_type:j.meeting_type||"NORMAL",start_time:de,duration:j.duration||60,zoom_link:j.zoom_link||"",max_participants:j.max_participants||10,enable_screen_share:j.enable_screen_share||!1,enable_chat:j.enable_chat||!1,enable_recording:j.enable_recording||!1}),x(j),l(!0)},P=()=>{R(ae(q({},E),{open:!1}))},I=()=>{A(),x(null),l(!0)},B=j=>{x(j),p(!0)},F=j=>{U(j)},Q=j=>{const re=new Date,de=new Date(j.start_time);let fe=60;if(typeof j.duration=="string"){const ie=j.duration.split(":");ie.length===3&&(fe=parseInt(ie[0])*60+parseInt(ie[1]))}else typeof j.duration=="number"&&(fe=j.duration);const ce=new Date(de.getTime()+fe*6e4);return j.status==="cancelled"?"cancelled":re>=de&&re<=ce?"ongoing":re>ce?"completed":"upcoming"},M=j=>{switch(j){case"upcoming":return"قادم";case"ongoing":return"جاري الآن";case"completed":return"منتهي";case"cancelled":return"ملغي";default:return"غير محدد"}},O=j=>{switch(j){case"ZOOM":return"اجتماع زووم";case"LIVE":return"اجتماع مباشر";case"NORMAL":return"اجتماع عادي";default:return"غير محدد"}},C=j=>{if(!j)return"غير محدد";try{const re=new Date(j);return isNaN(re.getTime())?(console.error("Invalid date in formatDate:",j),"تاريخ غير صحيح"):(console.log("Formatting date:",j,"to:",re),re.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"}))}catch(re){return console.error("Error formatting date:",re,"dateString:",j),"تاريخ غير صحيح"}},X=j=>{if(!j)return"غير محدد";try{const re=new Date(j);return isNaN(re.getTime())?(console.error("Invalid date in formatTime:",j),"وقت غير صحيح"):(console.log("Formatting time:",j,"to:",re),re.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}))}catch(re){return console.error("Error formatting time:",re,"dateString:",j),"وقت غير صحيح"}};console.log("Current meetings state:",m),console.log("Meetings type:",typeof m),console.log("Is meetings array:",Array.isArray(m));const Z=Array.isArray(m)?m.filter(j=>e===0?!0:e===1?Q(j)==="upcoming":e===2?Q(j)==="ongoing":e===3?Q(j)==="completed":!0):[];return s(d,{className:"meetings-container",children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(nn,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة الاجتماعات والمحاضرات"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"إنشاء وإدارة الاجتماعات والمحاضرات المباشرة"})]})]}),t(d,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:t(xe,{onClick:I,sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:t(Hr,{sx:{fontSize:28}})})}),t(d,{sx:{mb:3},children:s(bn,{value:e,onChange:(j,re)=>n(re),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{color:"#ff6b6b"},"& .MuiTabs-indicator":{backgroundColor:"#ff6b6b"}},children:[t(ft,{label:`جميع الاجتماعات (${Z.length})`}),t(ft,{label:`قادمة (${m.filter(j=>Q(j)==="upcoming").length})`}),t(ft,{label:`جارية الآن (${m.filter(j=>Q(j)==="ongoing").length})`}),t(ft,{label:`منتهية (${m.filter(j=>Q(j)==="completed").length})`})]})}),v&&(!Array.isArray(m)||m.length===0)&&s(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[t(Ke,{size:60}),t(f,{sx:{ml:2},children:"جاري تحميل الاجتماعات..."})]}),_&&t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:s(Be,{severity:"error",sx:{maxWidth:600},children:[_,t(te,{onClick:z,sx:{ml:2},variant:"outlined",size:"small",children:"إعادة المحاولة"})]})}),!v&&(!Array.isArray(m)||m.length===0)&&!_&&s(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",py:8,textAlign:"center"},children:[t(nn,{sx:{fontSize:80,color:"text.secondary",mb:2}}),t(f,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"لا توجد اجتماعات بعد"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"ابدأ بإنشاء اجتماع جديد لإدارة المحاضرات والاجتماعات"}),t(te,{variant:"contained",onClick:I,startIcon:t(Hr,{}),sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:2,textTransform:"none",fontWeight:600,px:4,py:1.5},children:"إنشاء اجتماع جديد"})]}),t(se,{container:!0,spacing:3,children:Z.map(j=>{const re=Q(j);return t(se,{item:!0,xs:12,sm:6,md:4,lg:3,children:t(r7,{status:re,children:s(st,{sx:{p:3},children:[s(d,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[t(f,{variant:"h6",fontWeight:700,sx:{color:"primary.main",lineHeight:1.3,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:j.title}),t(lw,{label:M(re),status:re,size:"small"})]}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:3,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:j.description}),s(d,{sx:{mb:3},children:[s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(Tn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),t(f,{variant:"body2",color:"text.secondary",children:C(j.start_time)})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(on,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:[X(j.start_time)," - ",j.duration," دقيقة"]})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(Ui,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:["المشاركين: ",j.participants_count||0," / ",j.max_participants]})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(nn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:["نوع الاجتماع: ",O(j.meeting_type)]})]}),j.zoom_link&&s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(Xw,{sx:{fontSize:16,color:"text.secondary",mr:1}}),t(f,{variant:"body2",color:"primary",sx:{textDecoration:"underline",cursor:"pointer"},children:"رابط زووم متاح"})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(zn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:["تم الإنشاء: ",C(j.created_at)]})]})]}),s(d,{sx:{mt:"auto"},children:[s(d,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[t(lw,{label:M(re),status:re}),j.enable_chat&&t(Ce,{label:"دردشة متاحة",size:"small",sx:{backgroundColor:"#e8f5e8",color:"#2e7d32",fontSize:"0.7rem",fontWeight:600,borderRadius:1.5,"& .MuiChip-label":{px:1}}}),j.enable_screen_share&&t(Ce,{label:"مشاركة شاشة",size:"small",sx:{backgroundColor:"#fff3e0",color:"#f57c00",fontSize:"0.7rem",fontWeight:600,borderRadius:1.5,"& .MuiChip-label":{px:1}}}),j.enable_recording&&t(Ce,{label:"تسجيل متاح",size:"small",sx:{backgroundColor:"#f3e5f5",color:"#7b1fa2",fontSize:"0.7rem",fontWeight:600,borderRadius:1.5,"& .MuiChip-label":{px:1}}})]}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t(te,{size:"small",variant:"outlined",onClick:()=>B(j),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"التفاصيل"}),re==="upcoming"&&t(te,{size:"small",variant:"outlined",onClick:()=>Y(j),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content","&:hover":{backgroundColor:"rgba(33, 150, 243, 0.08)"}},children:"تعديل"}),re==="ongoing"&&t(te,{size:"small",variant:"contained",color:"success",onClick:()=>F(j.id),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content","&:hover":{backgroundColor:"#2e7d32"}},children:"بدء المباشر"}),re==="upcoming"&&t(te,{size:"small",variant:"outlined",color:"error",onClick:()=>H(j.id),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.08)"}},children:"حذف"})]})]})]})})},j.id)})}),s(yr,{open:a,onClose:()=>{l(!1),h&&x(j=>ae(q({},j),{updated_at:new Date().toISOString()}))},maxWidth:"md",fullWidth:!0,children:[s(Wr,{sx:{background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",color:"white",display:"flex",alignItems:"center",gap:2},children:[t(nn,{}),h?"تعديل الاجتماع":"إنشاء اجتماع جديد"]}),t(br,{sx:{pt:3},children:s(d,{sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"}},children:[t(_e,{fullWidth:!0,label:"عنوان الاجتماع *",value:W.title,onChange:j=>V("title",j.target.value),required:!0,sx:{gridColumn:{xs:"1",md:"1 / -1"}}}),t(_e,{fullWidth:!0,label:"وصف الاجتماع",multiline:!0,rows:3,value:W.description,onChange:j=>V("description",j.target.value),sx:{gridColumn:{xs:"1",md:"1 / -1"}}}),s(At,{fullWidth:!0,children:[t(Rt,{children:"نوع الاجتماع *"}),s(Et,{value:W.meeting_type,onChange:j=>V("meeting_type",j.target.value),required:!0,children:[t(Me,{value:"ZOOM",children:"اجتماع زووم"}),t(Me,{value:"LIVE",children:"اجتماع مباشر"}),t(Me,{value:"NORMAL",children:"اجتماع عادي"})]})]}),t(_e,{fullWidth:!0,label:"الحد الأقصى للمشاركين",type:"number",value:W.max_participants,onChange:j=>V("max_participants",parseInt(j.target.value)),inputProps:{min:1,max:200},helperText:"الحد الأدنى: 1، الحد الأقصى: 200"}),t(_e,{fullWidth:!0,label:"تاريخ ووقت البدء *",type:"datetime-local",value:W.start_time,onChange:j=>V("start_time",j.target.value),InputLabelProps:{shrink:!0},required:!0,helperText:"اختر تاريخ ووقت بدء الاجتماع"}),t(_e,{fullWidth:!0,label:"المدة (بالدقائق) *",type:"number",value:W.duration,onChange:j=>V("duration",parseInt(j.target.value)),inputProps:{min:15,max:480},helperText:"الحد الأدنى: 15 دقيقة، الحد الأقصى: 8 ساعات",required:!0}),t(_e,{fullWidth:!0,label:"رابط زووم (اختياري)",value:W.zoom_link,onChange:j=>V("zoom_link",j.target.value),helperText:"مطلوب فقط لاجتماعات زووم",sx:{gridColumn:{xs:"1",md:"1 / -1"}}})]})}),s($r,{sx:{p:3,gap:2},children:[t(te,{onClick:()=>l(!1),disabled:v,variant:"outlined",sx:{borderRadius:2,textTransform:"none",fontWeight:600},children:"إلغاء"}),t(te,{onClick:h?()=>J(h.id):G,disabled:v,variant:"contained",sx:{borderRadius:2,textTransform:"none",fontWeight:600,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:v?s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(Ke,{size:16,color:"inherit"}),"جاري الحفظ..."]}):h?"تحديث الاجتماع":"إنشاء الاجتماع"})]})]}),t(t7,{open:u,onClose:()=>p(!1),meeting:h,onEdit:j=>{console.log("Edit button clicked for meeting:",j),Y(j),p(!1)},onRefresh:()=>{h&&x(j=>ae(q({},j),{updated_at:new Date().toISOString()}))},onStartLive:j=>{U(j),p(!1)},onJoinMeeting:j=>{j.zoom_link&&window.open(j.zoom_link,"_blank")}}),t(fn,{open:E.open,autoHideDuration:6e3,onClose:P,anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:P,severity:E.severity,sx:{width:"100%"},children:E.message})}),v&&t(d,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:9999},children:t(hr,{})})]})},i7=({open:e,onClose:n,meeting:a,userRole:l="student",onEdit:u,onStartLive:p,onJoinMeeting:h,onDownloadMaterial:x,onWatchRecording:m,onRefresh:y})=>{const[v,S]=w.useState(0),[_,k]=w.useState(!1),[E,R]=w.useState(!1),[W,T]=w.useState(null),[z,N]=w.useState(null),[G,J]=w.useState(0),[H,U]=w.useState(10);w.useEffect(()=>{e&&(a!=null&&a.id)&&(console.log("MeetingDetailsDialog useEffect triggered - fetching details for meeting:",a.id),A())},[e,a==null?void 0:a.id,a==null?void 0:a.updated_at,a==null?void 0:a.start_time,a==null?void 0:a.duration]),w.useEffect(()=>{e||(T(null),N(null))},[e]);const A=()=>$(null,null,function*(){try{R(!0),N(null),console.log("Fetching meeting details for ID:",a.id);const ie=yield xt.getMeetingDetails(a.id);console.log("Meeting details response:",ie),T(ie);try{console.log("Fetching participants for meeting:",a.id);const ge=yield xt.getMeetingParticipants(a.id);console.log("Participants response:",ge),T(Ae=>ae(q({},Ae),{participants:ge}))}catch(ge){console.error("Error fetching participants:",ge)}}catch(ie){console.error("Error fetching meeting details:",ie),N("حدث خطأ في تحميل تفاصيل الاجتماع"),T(a)}finally{R(!1)}}),V=(ie,ge)=>{J(ge)},Y=ie=>{U(parseInt(ie.target.value,10)),J(0)};if(!a)return null;const P=W||a;console.log("MeetingDetailsDialog - meeting prop:",a),console.log("MeetingDetailsDialog - meetingDetails state:",W),console.log("MeetingDetailsDialog - final meetingData:",P);const I=()=>{P.zoom_link&&(navigator.clipboard.writeText(P.zoom_link),k(!0),setTimeout(()=>k(!1),2e3))},B=ie=>{if(!ie)return"غير محدد";try{const ge=new Date(ie);return isNaN(ge.getTime())?(console.error("Invalid date in formatDate:",ie),"تاريخ غير صحيح"):(console.log("Formatting date:",ie,"to:",ge),ge.toLocaleDateString("ar-EG",{weekday:"long",year:"numeric",month:"long",day:"numeric",calendar:"gregory"}))}catch(ge){return console.error("Error formatting date:",ge,"dateString:",ie),"تاريخ غير صحيح"}},F=ie=>{if(!ie)return"غير محدد";try{const ge=new Date(ie);return isNaN(ge.getTime())?(console.error("Invalid date in formatTime:",ie),"وقت غير صحيح"):(console.log("Formatting time:",ie,"to:",ge),ge.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0}))}catch(ge){return console.error("Error formatting time:",ge,"dateString:",ie),"وقت غير صحيح"}},Q=ie=>{if(!ie)return"غير محدد";const ge=Math.floor(ie/60),Ae=ie%60;return ge>0?`${ge} ساعة ${Ae>0?`و ${Ae} دقيقة`:""}`:`${ie} دقيقة`},M=ie=>{if(!ie.start_time)return"unknown";const ge=new Date,Ae=new Date(ie.start_time),tt=new Date(Ae.getTime()+(ie.duration||60)*6e4);return ge<Ae?"upcoming":ge>=Ae&&ge<=tt?"ongoing":"completed"},O=ie=>{switch(ie){case"upcoming":return"قادم";case"ongoing":return"جاري الآن";case"completed":return"منتهي";case"cancelled":return"ملغي";default:return"غير محدد"}},C=ie=>{switch(ie){case"upcoming":return"primary";case"ongoing":return"success";case"completed":return"default";case"cancelled":return"error";default:return"default"}},X=ie=>{switch(ie){case"ZOOM":return"اجتماع زووم";case"LIVE":return"اجتماع مباشر";case"NORMAL":return"اجتماع عادي";default:return"غير محدد"}},Z=M(P),j=P.participants||[],re=j.length,de=j.filter(ie=>ie.attendance_status==="attending").length,fe=j.filter(ie=>ie.attendance_status==="registered").length,ce=re>0?Math.round(de/re*100):0;return s(yr,{open:e,onClose:n,maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{borderRadius:4,maxHeight:"90vh",overflow:"hidden",direction:"rtl"}},children:[s(Wr,{sx:{background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",py:3,px:4},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(nn,{sx:{fontSize:28}}),t(f,{variant:"h5",fontWeight:600,children:"تفاصيل الاجتماع"})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(Ce,{label:O(Z),color:C(Z),variant:"filled",sx:{bgcolor:Z==="ongoing"?"#e5978b":Z==="upcoming"?"#2196f3":Z==="completed"?"#9e9e9e":"#f44336",color:"white",fontWeight:600}}),t(xe,{onClick:()=>{A(),y&&y()},disabled:E,sx:{color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:t(No,{})}),t(xe,{onClick:n,sx:{color:"white"},children:t(an,{})})]})]}),t(br,{sx:{p:0,overflow:"auto",direction:"rtl","&::-webkit-scrollbar":{width:"14px"},"&::-webkit-scrollbar-track":{background:"linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"8px",margin:"6px",border:"1px solid #dee2e6"},"&::-webkit-scrollbar-thumb":{background:"linear-gradient(180deg, #667eea 0%, #0e5181 100%)",borderRadius:"8px",border:"2px solid #f8f9fa",boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{background:"linear-gradient(180deg, #5a6fd8 0%, #0a3d5f 100%)",boxShadow:"0 4px 8px rgba(0,0,0,0.2)"}},"&::-webkit-scrollbar-corner":{background:"#f8f9fa"},scrollbarWidth:"thin",scrollbarColor:"#667eea #f8f9fa",scrollBehavior:"smooth"},children:E?s(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:4},children:[t(Ke,{}),t(f,{sx:{mr:2},children:"جاري تحميل تفاصيل الاجتماع..."})]}):z?t(d,{sx:{p:4},children:t(Be,{severity:"error",action:s(te,{color:"inherit",size:"small",onClick:A,children:[t(No,{sx:{ml:1}}),"إعادة المحاولة"]}),children:z})}):t(d,{sx:{p:0},children:s(d,{sx:{p:4},children:[s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e9ecef"},children:[t(f,{variant:"h4",fontWeight:700,gutterBottom:!0,color:"primary",sx:{mb:2},children:P.title}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3,lineHeight:1.6},children:P.description}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(Tn,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[s(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[B(P.start_time),P.updated_at&&s(f,{variant:"caption",display:"block",color:"success.main",children:["محدث: ",B(P.updated_at)]})]}),t(f,{variant:"caption",color:"text.secondary",children:"تاريخ الاجتماع"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(on,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[s(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[F(P.start_time)," - ",Q(P.duration),P.updated_at&&s(f,{variant:"caption",display:"block",color:"success.main",children:["محدث: ",F(P.updated_at)]})]}),t(f,{variant:"caption",color:"text.secondary",children:"وقت البدء والمدة"})]})]})}),l==="instructor"&&s(Bt,{children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(nn,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:X(P.meeting_type)}),t(f,{variant:"caption",color:"text.secondary",children:"نوع الاجتماع"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(Po,{sx:{color:"#667eea",ml:2,fontSize:24}}),s(d,{children:[s(f,{variant:"body2",fontWeight:600,color:"text.primary",children:[re,"/",P.max_participants||"غير محدد"," مشارك"]}),t(f,{variant:"caption",color:"text.secondary",children:"عدد المشاركين"})]})]})})]})]}),l==="instructor"&&s(se,{container:!0,spacing:3,sx:{mt:2},children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(Xu,{sx:{color:"#ff9800",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:B(P.created_at)}),t(f,{variant:"caption",color:"text.secondary",children:"تاريخ الإنشاء"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(qa,{sx:{color:"#e5978b",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:P.creator_name||"غير محدد"}),t(f,{variant:"caption",color:"text.secondary",children:"منشئ الاجتماع"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(zn,{sx:{color:"#1976d2",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:P.updated_at?B(P.updated_at):"لم يتم التحديث"}),t(f,{variant:"caption",color:"text.secondary",children:"آخر تحديث"})]})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{display:"flex",alignItems:"center",p:2,bgcolor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0"},children:[t(xr,{sx:{color:"#e5978b",ml:2,fontSize:24}}),s(d,{children:[t(f,{variant:"body2",fontWeight:600,color:"text.primary",children:P.is_active?"نشط":"غير نشط"}),t(f,{variant:"caption",color:"text.secondary",children:"حالة الاجتماع"})]})]})})]}),l==="instructor"&&s(d,{sx:{mt:3},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"primary",children:"ميزات الاجتماع"}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t(Ce,{icon:P.enable_chat?t(xh,{}):t(ci,{}),label:P.enable_chat?"الدردشة مفعلة":"الدردشة معطلة",color:P.enable_chat?"success":"default",variant:"outlined"}),t(Ce,{icon:P.enable_screen_share?t(L0,{}):t(ci,{}),label:P.enable_screen_share?"مشاركة الشاشة مفعلة":"مشاركة الشاشة معطلة",color:P.enable_screen_share?"success":"default",variant:"outlined"}),t(Ce,{icon:P.enable_recording?t(li,{}):t(ci,{}),label:P.enable_recording?"التسجيل مفعل":"التسجيل معطل",color:P.enable_recording?"success":"default",variant:"outlined"})]})]})]}),P.zoom_link&&s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #e8f5e8 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #c8e6c9"},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"success.main",children:"رابط الاجتماع"}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[t(_e,{fullWidth:!0,value:P.zoom_link,InputProps:{readOnly:!0},sx:{flexGrow:1}}),t(te,{variant:"contained",color:"primary",onClick:I,startIcon:t(bh,{}),children:_?"تم النسخ!":"نسخ الرابط"}),t(te,{variant:"contained",color:"success",onClick:()=>h&&h(P),startIcon:t(Ci,{}),children:"انضم للاجتماع"})]})]}),l==="instructor"&&s(We,{elevation:0,sx:{p:4,mb:3,background:"linear-gradient(135deg, #fff3e0 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #ffcc02"},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,color:"warning.main",children:"إحصائيات الحضور"}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[t(f,{variant:"h4",fontWeight:700,color:"primary",children:re}),t(f,{variant:"body2",color:"text.secondary",children:"إجمالي المسجلين"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[t(f,{variant:"h4",fontWeight:700,color:"success.main",children:de}),t(f,{variant:"body2",color:"text.secondary",children:"الحضور"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[t(f,{variant:"h4",fontWeight:700,color:"warning.main",children:fe}),t(f,{variant:"body2",color:"text.secondary",children:"المسجلين"})]})}),t(se,{item:!0,xs:12,sm:6,md:3,children:s(d,{sx:{textAlign:"center",p:2},children:[s(f,{variant:"h4",fontWeight:700,color:"info.main",children:[ce,"%"]}),t(f,{variant:"body2",color:"text.secondary",children:"نسبة الحضور"})]})})]}),t(hr,{variant:"determinate",value:ce,sx:{mt:2,height:8,borderRadius:4}})]}),s(We,{elevation:0,sx:{p:4,background:"linear-gradient(135deg, #f3e5f5 0%, #ffffff 100%)",borderRadius:3,border:"1px solid #e1bee7"},children:[t(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:t(f,{variant:"h6",fontWeight:600,color:"secondary.main",children:"قائمة المشاركين"})}),l==="instructor"?j.length>0?s(pi,{component:We,elevation:0,sx:{borderRadius:2,border:"1px solid #e0e0e0"},children:[s(ui,{children:[t(hi,{children:s(Jt,{sx:{bgcolor:"grey.50"},children:[t(ye,{sx:{fontWeight:600},children:"الطالب"}),t(ye,{sx:{fontWeight:600},children:"حاضر"}),t(ye,{sx:{fontWeight:600},children:"متأخر"}),t(ye,{sx:{fontWeight:600},children:"غائب"}),t(ye,{sx:{fontWeight:600},children:"الحالة"}),t(ye,{sx:{fontWeight:600},children:"وقت الانضمام"})]})}),t(fi,{children:j.slice(G*H,G*H+H).map((ie,ge)=>{var Ae;return s(Jt,{hover:!0,children:[t(ye,{children:s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(_t,{src:ie.user_image,sx:{width:40,height:40},children:((Ae=ie.user_name)==null?void 0:Ae.charAt(0))||"U"}),s(d,{children:[t(f,{variant:"body2",fontWeight:500,children:ie.user_name||"مستخدم غير محدد"}),t(f,{variant:"caption",color:"text.secondary",children:ie.user_email})]})]})}),t(ye,{align:"center",children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:ie.attendance_status==="present"?t(yc,{fontSize:"large",sx:{color:"success.main"}}):t(d,{sx:{width:24,height:24}})})}),t(ye,{align:"center",children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:ie.attendance_status==="late"?t(zn,{fontSize:"large",sx:{color:"warning.main"}}):t(d,{sx:{width:24,height:24}})})}),t(ye,{align:"center",children:t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:ie.attendance_status==="absent"?t(an,{fontSize:"large",sx:{color:"error.main"}}):t(d,{sx:{width:24,height:24}})})}),t(ye,{children:t(Ce,{label:ie.attendance_status==="present"?"حاضر":ie.attendance_status==="late"?"متأخر":ie.attendance_status==="absent"?"غائب":ie.attendance_status==="registered"?"مسجل":"غير محدد",color:ie.attendance_status==="present"?"success":ie.attendance_status==="late"?"warning":ie.attendance_status==="absent"?"error":ie.attendance_status==="registered"?"primary":"default",size:"small",variant:"outlined"})}),t(ye,{children:t(f,{variant:"body2",color:"text.secondary",children:ie.joined_at?F(ie.joined_at):"لم ينضم بعد"})})]},ie.id||ge)})})]}),t(Xa,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:H,page:G,onPageChange:V,onRowsPerPageChange:Y,labelRowsPerPage:"عدد الصفوف في الصفحة:",labelDisplayedRows:({from:ie,to:ge,count:Ae})=>`${ie}-${ge} من ${Ae}`})]}):t(f,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",py:4},children:"لا يوجد مشاركون مسجلون بعد"}):s(d,{sx:{p:3,bgcolor:"grey.50",borderRadius:2},children:[s(f,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t(xr,{color:"primary"}),"معلومات الحضور"]}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body1",fontWeight:500,children:"حالة الحضور:"}),t(Ce,{label:"تم التسجيل تلقائياً",color:"success",variant:"filled",icon:t(xr,{})})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(f,{variant:"body1",fontWeight:500,children:"وقت التسجيل:"}),t(f,{variant:"body2",color:"text.secondary",children:new Date().toLocaleString("ar-EG")})]}),t(Be,{severity:"info",sx:{mt:2},children:"تم تسجيل حضورك تلقائياً عند فتح رابط الاجتماع. لا حاجة لأي إجراء إضافي."})]})]})]})]})})}),s($r,{sx:{p:3,gap:2,justifyContent:"flex-start",direction:"rtl"},children:[l==="teacher"&&Z==="upcoming"&&u&&t(te,{variant:"outlined",color:"primary",onClick:()=>u(P),startIcon:t(vr,{}),children:"تعديل الاجتماع"}),l==="teacher"&&Z==="ongoing"&&p&&t(te,{variant:"contained",color:"success",onClick:()=>p(P.id),startIcon:t(Ci,{}),children:"بدء البث المباشر"}),P.zoom_link&&Z==="ongoing"&&h&&l==="student"&&t(te,{variant:"contained",color:"primary",onClick:()=>h(P),startIcon:t(nn,{}),children:"انضم للاجتماع"}),P.zoom_link&&Z==="ongoing"&&h&&l==="instructor"&&t(te,{variant:"contained",color:"primary",onClick:()=>h(P),startIcon:t(nn,{}),children:"انضم للاجتماع"}),t(te,{variant:"outlined",onClick:n,children:"إغلاق"})]})]})},a7=oe(Je)(({theme:e,status:n})=>({borderRadius:16,boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.3s ease",border:n==="ongoing"?"2px solid #e5978b":"1px solid #e0e0e0","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},background:n==="ongoing"?"linear-gradient(135deg, #f8fff8 0%, #ffffff 100%)":"#ffffff"})),cw=oe(Ce)(({status:e})=>q(q(q(q({borderRadius:20,fontWeight:600,fontSize:"0.75rem",height:24},e==="upcoming"&&{backgroundColor:"#e3f2fd",color:"#1976d2"}),e==="ongoing"&&{backgroundColor:"#e8f5e8",color:"#2e7d32"}),e==="completed"&&{backgroundColor:"#f3e5f5",color:"#7b1fa2"}),e==="cancelled"&&{backgroundColor:"#ffebee",color:"#d32f2f"})),o7=()=>{const[e,n]=w.useState(0),[a,l]=w.useState(!1),[u,p]=w.useState(null),[h,x]=w.useState([]),[m,y]=w.useState(!0),[v,S]=w.useState(null),[_,k]=w.useState({open:!1,message:"",severity:"success"}),[E,R]=w.useState({}),[W,T]=w.useState({});w.useEffect(()=>{z();const C=setInterval(()=>{h.some(Z=>V(Z)==="ongoing")&&(console.log("Auto-refreshing meetings due to ongoing meetings..."),z())},3e4);return()=>clearInterval(C)},[e]);const z=()=>$(null,null,function*(){try{y(!0),console.log("Fetching meetings for tab:",e);let C;switch(e){case 0:C=yield xt.getAvailableMeetings();break;case 1:C=yield xt.getAttendingMeetings();break;case 2:try{C=yield xt.getJoinableMeetings()}catch(Z){console.log("Could not fetch joinable meetings, trying available meetings instead:",Z);const j=yield xt.getAvailableMeetings();j!=null&&j.meetings?C={meetings:j.meetings.filter(de=>V(de)==="ongoing")}:C={meetings:[]}}break;case 3:C=yield xt.getMeetingHistory();break;default:C=yield xt.getAvailableMeetings()}console.log("API Response:",C);let X=[];C!=null&&C.meetings?X=C.meetings:C!=null&&C.results?X=C.results:Array.isArray(C)?X=C:X=[],console.log("Processed meetings data:",X),x(Array.isArray(X)?X:[]),yield N(X),S(null)}catch(C){console.error("Error fetching meetings:",C),S("حدث خطأ في تحميل الاجتماعات"),x([])}finally{y(!1)}}),N=C=>$(null,null,function*(){const X={},Z={};for(const j of C)if(!(!j||!j.id))try{if(X[j.id]=j.user_is_registered||!1,Z[j.id]="not_registered",j.user_is_registered===void 0)try{const re=yield xt.checkRegistrationStatus(j.id);X[j.id]=re.is_registered||!1}catch(re){console.log(`Could not fetch registration status for meeting ${j.id}:`,re),X[j.id]=!1}if(X[j.id])try{const re=yield xt.getMyAttendanceStatus(j.id);Z[j.id]=re.attendance_status||"not_registered"}catch(re){console.log(`Could not fetch attendance status for meeting ${j.id}:`,re),Z[j.id]="not_registered"}}catch(re){console.error(`Error processing meeting ${j.id}:`,re),X[j.id]=j.user_is_registered||!1,Z[j.id]="not_registered"}R(X),T(Z)}),G=C=>$(null,null,function*(){var X,Z;try{y(!0),yield xt.registerForMeeting(C),k({open:!0,message:"تم التسجيل في الاجتماع بنجاح",severity:"success"}),R(j=>ae(q({},j),{[C]:!0})),z()}catch(j){console.error("Error registering for meeting:",j),k({open:!0,message:((Z=(X=j.response)==null?void 0:X.data)==null?void 0:Z.message)||"حدث خطأ في التسجيل للاجتماع",severity:"error"})}finally{y(!1)}}),J=C=>$(null,null,function*(){var X,Z;try{y(!0),yield xt.unregisterFromMeeting(C),k({open:!0,message:"تم إلغاء التسجيل من الاجتماع بنجاح",severity:"success"}),R(j=>ae(q({},j),{[C]:!1})),z()}catch(j){console.error("Error unregistering from meeting:",j),k({open:!0,message:((Z=(X=j.response)==null?void 0:X.data)==null?void 0:Z.message)||"حدث خطأ في إلغاء التسجيل",severity:"error"})}finally{y(!1)}}),H=C=>$(null,null,function*(){var X,Z;try{y(!0),yield xt.markAttendance(C),k({open:!0,message:"تم تسجيل الحضور بنجاح",severity:"success"}),T(j=>ae(q({},j),{[C]:"present"})),z()}catch(j){console.error("Error marking attendance:",j),k({open:!0,message:((Z=(X=j.response)==null?void 0:X.data)==null?void 0:Z.message)||"حدث خطأ في تسجيل الحضور",severity:"error"})}finally{y(!1)}}),U=()=>{k(ae(q({},_),{open:!1}))},A=C=>{p(C),l(!0)},V=C=>{if(C.status&&["upcoming","ongoing","completed","cancelled"].includes(C.status))return C.status;if(!C.start_time)return"upcoming";const X=new Date,Z=new Date(C.start_time);let j=60;if(typeof C.duration=="string"){const de=C.duration.split(":");de.length===3?j=parseInt(de[0])*60+parseInt(de[1]):de.length===2&&(j=parseInt(de[0]))}else typeof C.duration=="number"?j=C.duration:C.duration&&typeof C.duration=="object"&&(j=C.duration.total_seconds?Math.floor(C.duration.total_seconds/60):60);const re=new Date(Z.getTime()+j*6e4);return C.status==="cancelled"?"cancelled":X>=Z&&X<=re?"ongoing":X>re?"completed":"upcoming"},Y=C=>{switch(C){case"upcoming":return"قادم";case"ongoing":return"جاري الآن";case"completed":return"منتهي";case"cancelled":return"ملغي";default:return"غير محدد"}},P=C=>{switch(C){case"ZOOM":return"اجتماع زووم";case"LIVE":return"اجتماع مباشر";case"NORMAL":return"اجتماع عادي";default:return"غير محدد"}},I=C=>{switch(C){case"present":return"حاضر";case"absent":return"غائب";case"late":return"متأخر";case"registered":return"مسجل";case"not_registered":return"غير مسجل";default:return"غير محدد"}},B=C=>{switch(C){case"present":return"success";case"absent":return"error";case"late":return"warning";case"registered":return"primary";case"not_registered":return"default";default:return"default"}},F=C=>{if(!C)return"غير محدد";try{const X=new Date(C);return isNaN(X.getTime())?"تاريخ غير صحيح":X.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"})}catch(X){return console.error("Error formatting date:",X),"تاريخ غير صحيح"}},Q=C=>{if(!C)return"غير محدد";try{const X=new Date(C);return isNaN(X.getTime())?"وقت غير صحيح":X.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}catch(X){return console.error("Error formatting time:",X),"وقت غير صحيح"}},M=C=>{if(!C)return"غير محدد";if(typeof C=="string"){const X=C.split(":");if(X.length===3){const Z=parseInt(X[0]),j=parseInt(X[1]);return Z>0?`${Z} ساعة ${j} دقيقة`:`${j} دقيقة`}return C}else if(typeof C=="number"){const X=Math.floor(C/60),Z=C%60;return X>0?`${X} ساعة ${Z} دقيقة`:`${Z} دقيقة`}return"غير محدد"},O=Array.isArray(h)?h.filter(C=>{if(!C||!C.id)return!1;const X=V(C);return e===0?!0:e===1?E[C.id]||!1:e===2?X==="ongoing":e===3?X==="completed":!0}):[];return s(d,{className:"meetings-container",children:[t(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:t(d,{sx:{position:"relative",zIndex:2},children:s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(nn,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"اجتماعاتي والمحاضرات"}),t(xe,{onClick:z,disabled:m,sx:{color:"white",ml:"auto","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:t(No,{})})]})})}),t(d,{sx:{mb:3},children:s(bn,{value:e,onChange:(C,X)=>n(X),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{color:"#e5978b"},"& .MuiTabs-indicator":{backgroundColor:"#e5978b"}},children:[t(ft,{label:`الاجتماعات المتاحة (${h.filter(C=>C&&C.id&&!E[C.id]).length||0})`}),t(ft,{label:`اجتماعاتي المسجلة (${h.filter(C=>C&&C.id&&E[C.id]).length||0})`}),t(ft,{label:`اجتماعات قابلة للانضمام (${h.filter(C=>C&&C.id&&V(C)==="ongoing").length||0})`}),t(ft,{label:`سجل الاجتماعات (${h.filter(C=>C&&C.id&&V(C)==="completed").length||0})`})]})}),m&&(!Array.isArray(h)||h.length===0)&&s(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:[t(Ke,{size:60}),t(f,{sx:{ml:2},children:"جاري تحميل الاجتماعات..."})]}),v&&t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:s(Be,{severity:"error",sx:{maxWidth:600},children:[v,t(te,{onClick:z,sx:{ml:2},variant:"outlined",size:"small",children:"إعادة المحاولة"})]})}),!m&&(!Array.isArray(h)||h.length===0)&&!v&&s(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",py:8,textAlign:"center"},children:[t(nn,{sx:{fontSize:80,color:"text.secondary",mb:2}}),t(f,{variant:"h5",color:"text.secondary",gutterBottom:!0,children:"لا توجد اجتماعات متاحة"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"لا توجد اجتماعات متاحة للانضمام في الوقت الحالي"})]}),t(se,{container:!0,spacing:3,children:O.map(C=>{var re;if(!C||!C.id)return null;const X=V(C),Z=E[C.id]||!1,j=W[C.id]||"not_registered";return t(se,{item:!0,xs:12,sm:6,md:4,lg:3,children:t(a7,{status:X,children:s(st,{sx:{p:3},children:[s(d,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:2},children:[t(f,{variant:"h6",fontWeight:700,sx:{color:"primary.main",lineHeight:1.3,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:C.title||"اجتماع بدون عنوان"}),t(cw,{label:Y(X),status:X,size:"small"})]}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:3,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:C.description||"لا يوجد وصف للاجتماع"}),s(d,{sx:{mb:3},children:[s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(Tn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),t(f,{variant:"body2",color:"text.secondary",children:C.start_time?F(C.start_time):"غير محدد"})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(on,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:[C.start_time?Q(C.start_time):"غير محدد"," - ",M(C.duration)]})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(Ui,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:["المشاركين: ",C.participants_count||0," / ",C.max_participants||50]})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(nn,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:["نوع الاجتماع: ",P(C.meeting_type||"NORMAL")]})]}),s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(qa,{sx:{fontSize:16,color:"text.secondary",mr:1}}),s(f,{variant:"body2",color:"text.secondary",children:["المعلم: ",C.creator_name||((re=C.creator)==null?void 0:re.name)||"غير محدد"]})]}),C.zoom_link&&s(d,{sx:{display:"flex",alignItems:"center",mb:1},children:[t(Xw,{sx:{fontSize:16,color:"text.secondary",mr:1}}),t(f,{variant:"body2",color:"primary",sx:{textDecoration:"underline",cursor:"pointer"},onClick:()=>window.open(C.zoom_link,"_blank"),children:"رابط زووم متاح"})]})]}),s(d,{sx:{mt:"auto"},children:[s(d,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[t(cw,{label:Y(X),status:X,size:"small"}),t(Ce,{label:I(j),color:B(j),size:"small",sx:{fontSize:"0.7rem"}}),Z&&C.id&&t(Ce,{label:"مسجل",color:"success",size:"small",sx:{fontSize:"0.7rem"}})]}),s(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[t(te,{size:"small",variant:"outlined",onClick:()=>A(C),disabled:!C||!C.id,sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"التفاصيل"}),!Z&&X==="upcoming"&&C.id&&t(te,{size:"small",variant:"contained",color:"primary",onClick:()=>G(C.id),startIcon:t(m6,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"انضم للاجتماع"}),Z&&X==="upcoming"&&C.id&&t(te,{size:"small",variant:"outlined",color:"error",onClick:()=>J(C.id),startIcon:t(x6,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"إلغاء التسجيل"}),Z&&X==="ongoing"&&C.id&&s(Bt,{children:[t(te,{size:"small",variant:"contained",color:"success",onClick:()=>{window.open(`/student/meetings/live/${C.id}`,"_blank")},startIcon:t(Ci,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"انضم الآن"}),j!=="present"&&C.id&&t(te,{size:"small",variant:"contained",color:"primary",onClick:()=>H(C.id),startIcon:t(xr,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"سجل الحضور"})]}),!Z&&X==="ongoing"&&C.id&&t(te,{size:"small",variant:"contained",color:"success",onClick:()=>{window.open(`/student/meetings/live/${C.id}`,"_blank")},startIcon:t(Ci,{}),sx:{borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.75rem",minWidth:"fit-content"},children:"انضم الآن"})]})]})]})})},C.id)})}),t(i7,{open:a,onClose:()=>l(!1),meeting:u,userRole:"student",onJoinMeeting:C=>{C.zoom_link&&window.open(C.zoom_link,"_blank")},onRefresh:()=>{z()}}),t(fn,{open:_.open,autoHideDuration:6e3,onClose:U,anchorOrigin:{vertical:"top",horizontal:"center"},children:t(Be,{onClose:U,severity:_.severity,sx:{width:"100%"},children:_.message})}),m&&t(d,{sx:{position:"fixed",top:0,left:0,right:0,zIndex:9999},children:t(hr,{})})]})},dw=oe(d)(({theme:e})=>({position:"relative",borderRadius:12,overflow:"hidden",background:"#000","&:hover .controls-overlay":{opacity:1}})),s7=oe(d)(({theme:e})=>({position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",padding:e.spacing(2),opacity:0,transition:"opacity 0.3s ease"})),l7=oe(d)(({theme:e,isOwn:n})=>({display:"flex",flexDirection:n?"row-reverse":"row",marginBottom:e.spacing(1),"& .message-content":{maxWidth:"70%",padding:e.spacing(1,2),borderRadius:16,background:n?"#0e5181":"#f5f5f5",color:n?"#fff":"#333",margin:e.spacing(0,1)}})),c7=()=>{const{meetingId:e}=er(),n=nt(),[a,l]=w.useState(!0),[u,p]=w.useState(!0),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[_,k]=w.useState(!1),[E,R]=w.useState(!1),[W,T]=w.useState(!1),[z,N]=w.useState(!1),[G,J]=w.useState(""),[H,U]=w.useState(0),[A,V]=w.useState(null),[Y,P]=w.useState(!0),[I,B]=w.useState(null),[F,Q]=w.useState([]),[M,O]=w.useState([]),[C,X]=w.useState(!1),[Z,j]=w.useState(null);w.useEffect(()=>{const De=localStorage.getItem("user");if(De)try{const Ut=JSON.parse(De);j(Ut)}catch(Ut){console.error("Error parsing user from localStorage:",Ut)}},[]),w.useEffect(()=>{e&&$(null,null,function*(){try{P(!0),console.log("Fetching meeting details for ID:",e);const Ut=yield xt.getMeetingDetails(e);console.log("Meeting details response:",Ut),V(Ut),B(null)}catch(Ut){console.error("Error fetching meeting details:",Ut),B("حدث خطأ في تحميل تفاصيل الاجتماع")}finally{P(!1)}})},[e]);const[re,de]=w.useState(0);w.useEffect(()=>{const De=setInterval(()=>{de(Ut=>Ut+1)},1e3);return()=>clearInterval(De)},[]);const fe=De=>{const Ut=Math.floor(De/3600),Mn=Math.floor(De%3600/60),Dn=De%60;return`${Ut.toString().padStart(2,"0")}:${Mn.toString().padStart(2,"0")}:${Dn.toString().padStart(2,"0")}`},ce=()=>$(null,null,function*(){if(G.trim())try{console.log("Sending message:",G);const De=yield xt.sendChatMessage(e,G);console.log("Message sent successfully:",De),J(""),Tt()}catch(De){console.error("Error sending message:",De),alert("حدث خطأ في إرسال الرسالة")}}),ie=De=>{De.key==="Enter"&&!De.shiftKey&&(De.preventDefault(),ce())},ge=()=>l(!a),Ae=()=>p(!u),tt=()=>x(!h),yt=()=>y(!m),wr=()=>S(!v),fr=()=>k(!_),ln=()=>$(null,null,function*(){try{console.log("Starting live meeting:",e),yield xt.startLiveMeeting(e),console.log("Successfully started live meeting"),X(!0)}catch(De){console.error("Error starting live meeting:",De),alert("حدث خطأ في بدء الاجتماع المباشر")}}),Le=()=>$(null,null,function*(){try{console.log("Fetching participants for meeting:",e);const De=yield xt.getMeetingParticipants(e);console.log("Participants response:",De),De&&Array.isArray(De)?(Q(De),console.log("Set participants from API:",De.length)):(console.log("No participants found or invalid response"),Q([]))}catch(De){console.error("Error fetching participants:",De),Q([])}}),Tt=()=>$(null,null,function*(){try{console.log("Fetching chat messages for meeting:",e);const De=yield xt.getChatMessages(e);console.log("Chat messages response:",De),De&&Array.isArray(De)?(O(De),console.log("Set chat messages from API:",De.length)):(console.log("No chat messages found or invalid response"),O([]))}catch(De){console.error("Error fetching chat messages:",De),O([])}});w.useEffect(()=>{if(A){console.log("Meeting info loaded, starting data fetch..."),Le(),Tt();const De=setInterval(()=>{console.log("Refreshing participants..."),Le()},1e4),Ut=setInterval(()=>{console.log("Refreshing chat..."),Tt()},5e3);return()=>{console.log("Cleaning up intervals..."),clearInterval(De),clearInterval(Ut)}}},[A]),w.useEffect(()=>{A&&!C&&ln()},[A]);const or=()=>$(null,null,function*(){try{console.log("Ending live meeting:",e),yield xt.endLiveMeeting(e),console.log("Successfully ended meeting")}catch(De){console.error("Error ending meeting:",De),alert("حدث خطأ في إنهاء الاجتماع")}finally{n("/teacher/meetings")}});return Y?t(d,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:s(d,{sx:{textAlign:"center"},children:[t(Ke,{size:60,sx:{color:"#0e5181",mb:2}}),t(f,{variant:"h6",children:"جاري تحميل الاجتماع..."})]})}):I&&!A?t(d,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:s(d,{sx:{textAlign:"center"},children:[t(f,{variant:"h6",color:"error",sx:{mb:2},children:I}),t(te,{variant:"contained",onClick:()=>n("/teacher/meetings"),sx:{bgcolor:"#0e5181"},children:"العودة لصفحة الاجتماعات"})]})}):s(d,{sx:{height:"100vh",display:"flex",flexDirection:"column",bgcolor:"#1a1a1a"},children:[t(Vc,{position:"static",sx:{bgcolor:"#2d2d2d",boxShadow:"none"},children:s(Gs,{sx:{justifyContent:"space-between"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(f,{variant:"h6",fontWeight:600,children:(A==null?void 0:A.title)||"اجتماع"}),t(Ce,{label:"مباشر",color:"error",size:"small",sx:{fontWeight:600}})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(f,{variant:"body2",color:"text.secondary",children:fe(re)}),t(xe,{color:"inherit",onClick:()=>N(!0),children:t(Uc,{})}),t(te,{variant:"contained",color:"error",startIcon:t(Ry,{}),onClick:or,sx:{bgcolor:"#d32f2f","&:hover":{bgcolor:"#b71c1c"},textTransform:"none",fontWeight:600},children:"إنهاء الاجتماع"})]})]})}),s(d,{sx:{flex:1,display:"flex",overflow:"hidden"},children:[s(d,{sx:{flex:1,p:2,display:"flex",flexDirection:"column"},children:[s(dw,{sx:{flex:1,mb:2},children:[t(d,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #333 30%, #555 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:s(d,{sx:{textAlign:"center",color:"#fff"},children:[t(Ku,{sx:{fontSize:80,mb:2,opacity:.5}}),t(f,{variant:"h6",children:"الفيديو الرئيسي"}),t(f,{variant:"body2",sx:{opacity:.7},children:u?"فيديو نشط":"الفيديو معطل"})]})}),t(s7,{className:"controls-overlay",children:s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(f,{variant:"body2",color:"#fff",children:[F.length," مشارك"]}),t(d,{sx:{display:"flex",gap:1},children:t(xe,{size:"small",sx:{color:"#fff",bgcolor:"rgba(0,0,0,0.3)"},onClick:wr,children:v?t(Kw,{}):t(Zw,{})})})]})})]}),t(se,{container:!0,spacing:1,sx:{height:120},children:F.slice(0,6).map(De=>t(se,{item:!0,xs:2,children:t(dw,{sx:{height:"100%"},children:s(d,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #444 30%, #666 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[t(_t,{sx:{width:40,height:40},children:De.user_name?De.user_name.charAt(0):"?"}),t(d,{sx:{position:"absolute",bottom:4,left:4,display:"flex",gap:.5},children:De.attendance_status==="absent"&&t(Cc,{sx:{fontSize:16,color:"#fff",bgcolor:"rgba(0,0,0,0.5)",borderRadius:1}})}),t(f,{variant:"caption",sx:{position:"absolute",bottom:4,right:4,color:"#fff",fontSize:"0.7rem"},children:De.user_name||"مستخدم"})]})})},De.id))})]}),s(d,{sx:{width:320,display:"flex",flexDirection:"column"},children:[t(We,{sx:{borderRadius:0},children:s(bn,{value:H,onChange:(De,Ut)=>U(Ut),sx:{"& .MuiTab-root":{minWidth:"auto",flex:1}},children:[t(ft,{icon:t(xh,{}),label:"الدردشة",onClick:()=>R(!0)}),t(ft,{icon:t(Ui,{}),label:`المشاركون (${F.length})`,onClick:()=>T(!0)})]})}),H===0&&s(d,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[s(d,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[t(f,{variant:"subtitle1",fontWeight:600,children:"الدردشة"}),s(f,{variant:"body2",color:"text.secondary",children:[F.length," مشارك"]})]}),t(d,{sx:{flex:1,overflowY:"auto",p:2},children:M.length>0?M.map(De=>s(l7,{isOwn:De.user===(Z==null?void 0:Z.id),children:[t(_t,{sx:{width:32,height:32,fontSize:"0.8rem"},children:De.user_name?De.user_name.charAt(0):"?"}),s(d,{className:"message-content",children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t(f,{variant:"body2",fontWeight:600,children:De.user_name||"مستخدم"}),De.is_teacher&&t(Ce,{label:"المعلم",size:"small",color:"primary",sx:{height:16,fontSize:"0.6rem"}})]}),t(f,{variant:"body2",children:De.message}),t(f,{variant:"caption",sx:{opacity:.7},children:De.created_at_formatted||"الآن"})]})]},De.id)):s(d,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:[t(f,{variant:"body2",children:"لا توجد رسائل بعد"}),t(f,{variant:"caption",children:"ابدأ المحادثة الآن"})]})}),s(d,{sx:{p:2,borderTop:"1px solid #e0e0e0"},children:[s(d,{sx:{display:"flex",gap:1,mb:1},children:[t(xe,{size:"small",children:t(W0,{})}),t(xe,{size:"small",children:t(Jw,{})})]}),t(_e,{fullWidth:!0,multiline:!0,maxRows:3,placeholder:"اكتب رسالة...",value:G,onChange:De=>J(De.target.value),onKeyPress:ie,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),t(te,{variant:"contained",size:"small",endIcon:t(mh,{}),onClick:ce,sx:{mt:1,borderRadius:2},disabled:!G.trim(),children:"إرسال"})]})]}),H===1&&s(d,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[s(d,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[t(f,{variant:"subtitle1",fontWeight:600,children:"المشاركون"}),s(f,{variant:"body2",color:"text.secondary",children:[F.length," من ",(A==null?void 0:A.max_participants)||20]})]}),t(Fr,{sx:{flex:1,overflowY:"auto"},children:F.length>0?F.map(De=>s(zr,{sx:{py:1},children:[t(e5,{children:t(_t,{sx:{width:40,height:40},children:De.user_name?De.user_name.charAt(0):"?"})}),t(ir,{primary:s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(f,{variant:"body2",fontWeight:600,children:De.user_name||"مستخدم"}),De.is_teacher&&t(Ce,{label:"المعلم",size:"small",color:"primary"}),De.attendance_status==="attending"&&t(Ce,{label:"حاضر",size:"small",color:"success"})]}),secondary:s(d,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[s(f,{variant:"caption",color:"text.secondary",children:["انضم في ",De.join_time_formatted||"الآن"]}),t(d,{sx:{display:"flex",gap:.5},children:De.attendance_status==="absent"&&t(Cc,{sx:{fontSize:16,color:"#666"}})})]})})]},De.id)):t(d,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:t(f,{variant:"body2",children:"لا يوجد مشاركون بعد"})})})]})]})]}),t(d,{sx:{p:2,bgcolor:"#2d2d2d",display:"flex",justifyContent:"center",alignItems:"center"},children:s(d,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t(xe,{onClick:ge,sx:{bgcolor:a?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:a?"#45a049":"#d32f2f"}},children:a?t(t5,{}):t(Cc,{})}),t(xe,{onClick:Ae,sx:{bgcolor:u?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:u?"#45a049":"#d32f2f"}},children:u?t(Ku,{}):t(r5,{})}),t(xe,{onClick:tt,sx:{bgcolor:h?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:h?"#f57c00":"#555"}},children:h?t(b6,{}):t(L0,{})}),t(xe,{onClick:yt,sx:{bgcolor:m?"#f44336":"#666",color:"#fff","&:hover":{bgcolor:m?"#d32f2f":"#555"}},children:m?t(Ry,{}):t(y6,{})}),t(xe,{onClick:fr,sx:{bgcolor:_?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:_?"#f57c00":"#555"}},children:_?t(n5,{}):t(i5,{})}),t(Pt,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"#555"}}),t(te,{variant:"contained",color:"error",startIcon:t(an,{}),onClick:or,sx:{borderRadius:2},children:"إنهاء الاجتماع"})]})}),s(yr,{open:z,onClose:()=>N(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[t(Wr,{sx:{textAlign:"center",fontWeight:600},children:"إعدادات الاجتماع"}),t(br,{children:s(se,{container:!0,spacing:3,sx:{mt:1},children:[s(se,{item:!0,xs:12,children:[t(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"معلومات الاجتماع"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[s(f,{variant:"body2",children:[t("strong",{children:"معرف الاجتماع:"})," ",A==null?void 0:A.id]}),s(f,{variant:"body2",children:[t("strong",{children:"المدة:"})," ",fe(re)]}),s(f,{variant:"body2",children:[t("strong",{children:"المشاركون:"})," ",F.length,"/",(A==null?void 0:A.max_participants)||20]})]})]}),s(se,{item:!0,xs:12,children:[t(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"مشاركة الرابط"}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(_e,{fullWidth:!0,value:`${window.location.origin}/student/meetings/live/${A==null?void 0:A.id}`,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),t(xe,{size:"small",onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/student/meetings/live/${A==null?void 0:A.id}`),sx:{color:"#0e5181"},children:t(bh,{})})]})]})]})}),t($r,{sx:{p:3},children:t(te,{onClick:()=>N(!1),sx:{borderRadius:2},children:"إغلاق"})})]})]})},uw=oe(d)(({theme:e})=>({position:"relative",borderRadius:12,overflow:"hidden",background:"#000","&:hover .controls-overlay":{opacity:1}})),d7=oe(d)(({theme:e})=>({position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",padding:e.spacing(2),opacity:0,transition:"opacity 0.3s ease"})),u7=oe(d)(({theme:e,isOwn:n})=>({display:"flex",flexDirection:n?"row-reverse":"row",marginBottom:e.spacing(1),"& .message-content":{maxWidth:"70%",padding:e.spacing(1,2),borderRadius:16,background:n?"#0e5181":"#f5f5f5",color:n?"#fff":"#333",margin:e.spacing(0,1)}})),h7=()=>{const{meetingId:e}=er(),n=nt(),[a,l]=w.useState(!0),[u,p]=w.useState(!0),[h,x]=w.useState(!1),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[_,k]=w.useState(!1),[E,R]=w.useState(""),[W,T]=w.useState(0),[z,N]=w.useState(!1),[G,J]=w.useState(null),[H,U]=w.useState(!0),[A,V]=w.useState(null),[Y,P]=w.useState([]),[I,B]=w.useState([]),[F,Q]=w.useState(!1),[M,O]=w.useState(null),[C,X]=w.useState(null);w.useEffect(()=>{const Le=localStorage.getItem("user");if(Le)try{const Tt=JSON.parse(Le);O(Tt)}catch(Tt){console.error("Error parsing user from localStorage:",Tt)}},[]),w.useEffect(()=>{e&&$(null,null,function*(){try{U(!0),console.log("Fetching meeting details for ID:",e);const Tt=yield xt.getMeetingDetails(e);console.log("Meeting details response:",Tt),J(Tt),V(null);try{console.log("Attempting auto join meeting:",e);const or=yield xt.autoJoinMeeting(e);console.log("Successfully auto joined meeting:",or),Q(!0),or.already_attended?(X("تم تسجيل الحضور مسبقاً"),console.log("تم تسجيل الحضور مسبقاً")):or.attendance_status==="present"?(X("تم تسجيل الحضور - حاضر"),console.log("تم تسجيل الحضور - حاضر")):or.attendance_status==="late"&&(X("تم تسجيل الحضور - متأخر"),console.log("تم تسجيل الحضور - متأخر")),setTimeout(()=>{X(null)},5e3)}catch(or){console.error("Error auto joining meeting:",or);try{console.log("Auto join failed, trying to register first..."),yield xt.registerForMeeting(e),console.log("Successfully registered for meeting");const De=yield xt.autoJoinMeeting(e);console.log("Successfully auto joined meeting after registration:",De),Q(!0)}catch(De){console.error("Error registering/auto joining meeting:",De),alert("حدث خطأ في الانضمام للاجتماع")}}}catch(Tt){console.error("Error fetching meeting details:",Tt),V("حدث خطأ في تحميل تفاصيل الاجتماع")}finally{U(!1)}})},[e]);const[Z,j]=w.useState(0);w.useEffect(()=>{const Le=setInterval(()=>{j(Tt=>Tt+1)},1e3);return()=>clearInterval(Le)},[]);const re=Le=>{const Tt=Math.floor(Le/3600),or=Math.floor(Le%3600/60),De=Le%60;return`${Tt.toString().padStart(2,"0")}:${or.toString().padStart(2,"0")}:${De.toString().padStart(2,"0")}`},de=()=>$(null,null,function*(){if(E.trim())try{console.log("Sending message:",E);const Le=yield xt.sendChatMessage(e,E);console.log("Message sent successfully:",Le),R(""),fr()}catch(Le){console.error("Error sending message:",Le),alert("حدث خطأ في إرسال الرسالة")}}),fe=Le=>{Le.key==="Enter"&&!Le.shiftKey&&(Le.preventDefault(),de())},ce=()=>l(!a),ie=()=>p(!u),ge=()=>y(!m),Ae=()=>x(!h),tt=()=>N(!z),yt=()=>$(null,null,function*(){try{console.log("Marking attendance for meeting:",e),yield xt.markAttendance(e),console.log("Successfully marked attendance")}catch(Le){console.error("Error marking attendance:",Le),console.log("Continuing without marking attendance")}});w.useEffect(()=>{F&&setTimeout(()=>{yt()},2e3)},[F]);const wr=()=>$(null,null,function*(){try{console.log("Fetching participants for meeting:",e);const Le=yield xt.getMeetingParticipants(e);console.log("Participants response:",Le),Le&&Array.isArray(Le)?(P(Le),console.log("Set participants from API:",Le.length)):(console.log("No participants found or invalid response"),P([]))}catch(Le){console.error("Error fetching participants:",Le),P([])}}),fr=()=>$(null,null,function*(){try{console.log("Fetching chat messages for meeting:",e);const Le=yield xt.getChatMessages(e);console.log("Chat messages response:",Le),Le&&Array.isArray(Le)?(B(Le),console.log("Set chat messages from API:",Le.length)):(console.log("No chat messages found or invalid response"),B([]))}catch(Le){console.error("Error fetching chat messages:",Le),B([])}});w.useEffect(()=>{if(G&&F){console.log("Meeting info loaded, starting data fetch..."),wr(),fr();const Le=setInterval(()=>{console.log("Refreshing participants..."),wr()},1e4),Tt=setInterval(()=>{console.log("Refreshing chat..."),fr()},5e3);return()=>{console.log("Cleaning up intervals..."),clearInterval(Le),clearInterval(Tt)}}},[G,F]);const ln=()=>$(null,null,function*(){try{console.log("Leaving meeting:",e),yield xt.leaveMeeting(e),console.log("Successfully left meeting")}catch(Le){console.error("Error leaving meeting:",Le),alert("حدث خطأ في مغادرة الاجتماع")}finally{n("/student/meetings")}});return H?t(d,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:s(d,{sx:{textAlign:"center"},children:[t(Ke,{size:60,sx:{color:"#0e5181",mb:2}}),t(f,{variant:"h6",children:"جاري تحميل الاجتماع..."})]})}):A&&!G?t(d,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"#1a1a1a",color:"white"},children:s(d,{sx:{textAlign:"center"},children:[t(f,{variant:"h6",color:"error",sx:{mb:2},children:A}),t(te,{variant:"contained",onClick:()=>n("/student/meetings"),sx:{bgcolor:"#0e5181"},children:"العودة لصفحة الاجتماعات"})]})}):s(d,{sx:{height:"100vh",display:"flex",flexDirection:"column",bgcolor:"#1a1a1a"},children:[C&&t(Be,{severity:"success",sx:{position:"fixed",top:20,left:"50%",transform:"translateX(-50%)",zIndex:9999,minWidth:300,textAlign:"center"},onClose:()=>X(null),children:C}),t(Vc,{position:"static",sx:{bgcolor:"#2d2d2d",boxShadow:"none"},children:s(Gs,{sx:{justifyContent:"space-between"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(f,{variant:"h6",fontWeight:600,children:(G==null?void 0:G.title)||"اجتماع"}),t(Ce,{label:"مباشر",color:"error",size:"small",sx:{fontWeight:600}})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(f,{variant:"body2",color:"text.secondary",children:re(Z)}),t(xe,{color:"inherit",onClick:()=>k(!0),children:t(Uc,{})}),t(xe,{color:"inherit",children:t(I0,{})})]})]})}),s(d,{sx:{flex:1,display:"flex",overflow:"hidden"},children:[s(d,{sx:{flex:1,p:2,display:"flex",flexDirection:"column"},children:[s(uw,{sx:{flex:1,mb:2},children:[t(d,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #333 30%, #555 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:s(d,{sx:{textAlign:"center",color:"#fff"},children:[t(Ku,{sx:{fontSize:80,mb:2,opacity:.5}}),t(f,{variant:"h6",children:(G==null?void 0:G.creator_name)||"المعلم"}),t(f,{variant:"body2",sx:{opacity:.7},children:u?"فيديو نشط":"الفيديو معطل"})]})}),t(d7,{className:"controls-overlay",children:s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(f,{variant:"body2",color:"#fff",children:[Y.length," مشارك"]}),t(d,{sx:{display:"flex",gap:1},children:t(xe,{size:"small",sx:{color:"#fff",bgcolor:"rgba(0,0,0,0.3)"},onClick:ge,children:m?t(Kw,{}):t(Zw,{})})})]})})]}),t(se,{container:!0,spacing:1,sx:{height:120},children:Y.slice(0,6).map(Le=>t(se,{item:!0,xs:2,children:t(uw,{sx:{height:"100%"},children:s(d,{sx:{width:"100%",height:"100%",background:"linear-gradient(45deg, #444 30%, #666 90%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[t(_t,{sx:{width:40,height:40},children:Le.user_name?Le.user_name.charAt(0):"?"}),t(d,{sx:{position:"absolute",bottom:4,left:4,display:"flex",gap:.5},children:Le.attendance_status==="absent"&&t(Cc,{sx:{fontSize:16,color:"#fff",bgcolor:"rgba(0,0,0,0.5)",borderRadius:1}})}),t(f,{variant:"caption",sx:{position:"absolute",bottom:4,right:4,color:"#fff",fontSize:"0.7rem"},children:Le.user_name||"مستخدم"})]})})},Le.id))})]}),s(d,{sx:{width:320,display:"flex",flexDirection:"column"},children:[t(We,{sx:{borderRadius:0},children:s(bn,{value:W,onChange:(Le,Tt)=>T(Tt),sx:{"& .MuiTab-root":{minWidth:"auto",flex:1}},children:[t(ft,{icon:t(xh,{}),label:"الدردشة",onClick:()=>S(!0)}),t(ft,{icon:t(bt,{}),label:"المواد",onClick:()=>S(!1)})]})}),W===0&&s(d,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[s(d,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[t(f,{variant:"subtitle1",fontWeight:600,children:"الدردشة"}),s(f,{variant:"body2",color:"text.secondary",children:[Y.length," مشارك"]})]}),t(d,{sx:{flex:1,overflowY:"auto",p:2},children:I.length>0?I.map(Le=>s(u7,{isOwn:Le.user===(M==null?void 0:M.id),children:[t(_t,{sx:{width:32,height:32,fontSize:"0.8rem"},children:Le.user_name?Le.user_name.charAt(0):"?"}),s(d,{className:"message-content",children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t(f,{variant:"body2",fontWeight:600,children:Le.user_name||"مستخدم"}),Le.is_teacher&&t(Ce,{label:"المعلم",size:"small",color:"primary",sx:{height:16,fontSize:"0.6rem"}})]}),t(f,{variant:"body2",children:Le.message}),t(f,{variant:"caption",sx:{opacity:.7},children:Le.created_at_formatted||"الآن"})]})]},Le.id)):s(d,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:[t(f,{variant:"body2",children:"لا توجد رسائل بعد"}),t(f,{variant:"caption",children:"ابدأ المحادثة الآن"})]})}),s(d,{sx:{p:2,borderTop:"1px solid #e0e0e0"},children:[s(d,{sx:{display:"flex",gap:1,mb:1},children:[t(xe,{size:"small",children:t(W0,{})}),t(xe,{size:"small",children:t(Jw,{})})]}),t(_e,{fullWidth:!0,multiline:!0,maxRows:3,placeholder:"اكتب رسالة...",value:E,onChange:Le=>R(Le.target.value),onKeyPress:fe,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),t(te,{variant:"contained",size:"small",endIcon:t(mh,{}),onClick:de,sx:{mt:1,borderRadius:2},disabled:!E.trim(),children:"إرسال"})]})]}),W===1&&s(d,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"#fff"},children:[s(d,{sx:{p:2,borderBottom:"1px solid #e0e0e0"},children:[t(f,{variant:"subtitle1",fontWeight:600,children:"المواد التعليمية"}),t(f,{variant:"body2",color:"text.secondary",children:G!=null&&G.materials?"1 ملف متاح":"لا توجد مواد متاحة"})]}),t(Fr,{sx:{flex:1,overflowY:"auto"},children:G!=null&&G.materials?s(zr,{sx:{py:1},children:[t(e5,{children:t(_t,{sx:{width:40,height:40,bgcolor:"#0e5181"},children:t(Yc,{})})}),t(ir,{primary:"مواد الاجتماع",secondary:t(d,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:t(f,{variant:"caption",color:"text.secondary",children:"ملف مرفق"})})}),t(xe,{size:"small",onClick:()=>window.open(G.materials,"_blank"),sx:{color:"#0e5181"},children:t(Nn,{})})]}):t(d,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:t(f,{variant:"body2",children:"لا توجد مواد متاحة"})})})]})]})]}),t(d,{sx:{p:2,bgcolor:"#2d2d2d",display:"flex",justifyContent:"center",alignItems:"center"},children:s(d,{sx:{display:"flex",gap:2,alignItems:"center"},children:[t(xe,{onClick:ce,sx:{bgcolor:a?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:a?"#45a049":"#d32f2f"}},children:a?t(t5,{}):t(Cc,{})}),t(xe,{onClick:ie,sx:{bgcolor:u?"#e5978b":"#f44336",color:"#fff","&:hover":{bgcolor:u?"#45a049":"#d32f2f"}},children:u?t(Ku,{}):t(r5,{})}),t(xe,{onClick:tt,sx:{bgcolor:z?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:z?"#f57c00":"#555"}},children:t(v6,{})}),t(xe,{onClick:Ae,sx:{bgcolor:h?"#ff9800":"#666",color:"#fff","&:hover":{bgcolor:h?"#f57c00":"#555"}},children:h?t(n5,{}):t(i5,{})}),t(Pt,{orientation:"vertical",flexItem:!0,sx:{bgcolor:"#555"}}),t(te,{variant:"contained",color:"error",startIcon:t(an,{}),onClick:ln,sx:{borderRadius:2},children:"مغادرة الاجتماع"})]})}),s(yr,{open:_,onClose:()=>k(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[t(Wr,{sx:{textAlign:"center",fontWeight:600},children:"إعدادات الاجتماع"}),t(br,{children:s(se,{container:!0,spacing:3,sx:{mt:1},children:[s(se,{item:!0,xs:12,children:[t(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"معلومات الاجتماع"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[s(f,{variant:"body2",children:[t("strong",{children:"العنوان:"})," ",(G==null?void 0:G.title)||"اجتماع"]}),s(f,{variant:"body2",children:[t("strong",{children:"المعلم:"})," ",(G==null?void 0:G.creator_name)||"غير محدد"]}),s(f,{variant:"body2",children:[t("strong",{children:"المدة:"})," ",re(Z)]}),s(f,{variant:"body2",children:[t("strong",{children:"المشاركون:"})," ",Y.length,"/",(G==null?void 0:G.max_participants)||20]})]})]}),s(se,{item:!0,xs:12,children:[t(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"مشاركة الرابط"}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(_e,{fullWidth:!0,value:`${window.location.origin}/student/meetings/live/${(G==null?void 0:G.id)||e}`,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),t(xe,{size:"small",onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/student/meetings/live/${(G==null?void 0:G.id)||e}`),sx:{color:"#0e5181"},children:t(bh,{})})]})]}),s(se,{item:!0,xs:12,children:[t(f,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"إعدادات الصوت والفيديو"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t(f,{variant:"body2",children:"الميكروفون"}),t(te,{variant:a?"contained":"outlined",size:"small",onClick:ce,sx:{borderRadius:2},children:a?"مفعل":"معطل"})]}),s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t(f,{variant:"body2",children:"الكاميرا"}),t(te,{variant:u?"contained":"outlined",size:"small",onClick:ie,sx:{borderRadius:2},children:u?"مفعلة":"معطلة"})]})]})]})]})}),t($r,{sx:{p:3},children:t(te,{onClick:()=>k(!1),sx:{borderRadius:2},children:"إغلاق"})})]})]})},f7=ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,_C=ht`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`,p7=ht`
  0% { box-shadow: 0 0 0 0 rgba(25, 118, 210, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(25, 118, 210, 0); }
  100% { box-shadow: 0 0 0 0 rgba(25, 118, 210, 0); }
`,hw=oe(d)(({theme:e})=>({background:"linear-gradient(135deg, #0e5181 0%, #1a5f8a 50%, #0a3d62 100%)",color:"white",padding:e.spacing(4,0,3),textAlign:"center",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"200%",height:"200%",background:`radial-gradient(circle, ${he("#ffffff",.1)} 0%, transparent 70%)`,transform:"translate(-50%, -50%)",animation:`${f7} 6s ease-in-out infinite`}})),g7=oe(Je)(({theme:e})=>({height:"100%",display:"flex",flexDirection:"row",borderRadius:20,overflow:"hidden",background:"linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(25, 118, 210, 0.1)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:`${_C} 3s ease-in-out infinite`},"&:hover":{transform:"translateY(-8px) rotateX(2deg)",boxShadow:"0 20px 40px rgba(25, 118, 210, 0.15)","& .article-image":{transform:"scale(1.1) rotate(2deg)"},"& .read-more":{transform:"translateX(8px)"},"& .card-content":{transform:"translateX(-4px)"}}})),m7=oe(Ce)(({theme:e,category:n})=>q(q(q(q(q(q({fontWeight:800,borderRadius:"25px",fontSize:"0.65rem",height:28,textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backdropFilter:"blur(10px)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px) scale(1.05)",boxShadow:"0 6px 16px rgba(0,0,0,0.2)"}},n==="تطوير الويب"&&{background:"linear-gradient(135deg, #4CAF50, #66BB6A)",color:"white"}),n==="الذكاء الاصطناعي"&&{background:"linear-gradient(135deg, #2196F3, #42A5F5)",color:"white"}),n==="تصميم"&&{background:"linear-gradient(135deg, #FF9800, #FFB74D)",color:"white"}),n==="تطوير الموبايل"&&{background:"linear-gradient(135deg, #9C27B0, #BA68C8)",color:"white"}),n==="الأمن السيبراني"&&{background:"linear-gradient(135deg, #F44336, #EF5350)",color:"white"}),n==="قواعد البيانات"&&{background:"linear-gradient(135deg, #607D8B, #90A4AE)",color:"white"})),x7=oe(_e)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:25,backgroundColor:he("#ffffff",.95),backdropFilter:"blur(10px)",fontSize:"1.1rem","&:hover fieldset":{borderColor:"#0e5181"},"&.Mui-focused fieldset":{borderColor:"#0e5181",borderWidth:2}}})),b7=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:20,background:`linear-gradient(135deg, ${he("#ffffff",.95)}, ${he("#f8f9ff",.95)})`,backdropFilter:"blur(20px)",boxShadow:`0 8px 32px ${he("#1976d2",.08)}`,border:`1px solid ${he("#1976d2",.1)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:`${_C} 3s ease-in-out infinite`}})),fw=oe(xe)(({theme:e,variant:n})=>q(q({width:40,height:40,borderRadius:"14px",transition:"all 0.3s ease"},n==="like"&&{backgroundColor:he("#1976d2",.1),color:"#1976d2","&:hover":{backgroundColor:"#1976d2",color:"white",transform:"scale(1.1)"}}),n==="bookmark"&&{backgroundColor:he("#42a5f5",.1),color:"#42a5f5","&:hover":{backgroundColor:"#42a5f5",color:"white",transform:"scale(1.1)"}})),y7=oe(d)(({theme:e,category:n})=>({display:"flex",alignItems:"center",gap:10,cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",fontWeight:700,fontSize:"0.85rem",color:"#1976d2",padding:"8px 16px",borderRadius:"25px",background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(66, 165, 245, 0.1))",border:"1px solid rgba(25, 118, 210, 0.2)","& .arrow-circle":q(q(q(q(q(q({width:28,height:28,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},n==="تطوير الويب"&&{background:"linear-gradient(135deg, #4CAF50, #66BB6A)"}),n==="الذكاء الاصطناعي"&&{background:"linear-gradient(135deg, #2196F3, #42A5F5)"}),n==="تصميم"&&{background:"linear-gradient(135deg, #FF9800, #FFB74D)"}),n==="تطوير الموبايل"&&{background:"linear-gradient(135deg, #9C27B0, #BA68C8)"}),n==="الأمن السيبراني"&&{background:"linear-gradient(135deg, #F44336, #EF5350)"}),n==="قواعد البيانات"&&{background:"linear-gradient(135deg, #607D8B, #90A4AE)"}),"&:hover":{background:"linear-gradient(135deg, rgba(25, 118, 210, 0.15), rgba(66, 165, 245, 0.15))",transform:"translateY(-2px)",boxShadow:"0 8px 20px rgba(25, 118, 210, 0.2)","& .arrow-circle":{transform:"scale(1.15) rotate(15deg)",boxShadow:"0 6px 16px rgba(0,0,0,0.25)"}}})),v7=()=>{Vt();const e=nt(),[n,a]=w.useState([]),[l,u]=w.useState(!0),[p,h]=w.useState(""),[x,m]=w.useState("all"),[y,v]=w.useState("latest"),[S,_]=w.useState(1),[k,E]=w.useState(1),[R,W]=w.useState(new Set),[T,z]=w.useState(new Set);w.useEffect(()=>{$(null,null,function*(){try{u(!0),console.log("Fetching articles from API...");const M=yield Mr.getArticles({page:S,page_size:6,search:p,status:"published",ordering:y==="latest"?"-created_at":y==="oldest"?"created_at":y==="popular"?"-views_count":"-created_at"});console.log("Articles API response:",M);let O=[],C=0;Array.isArray(M)?(O=M,C=M.length):M.results?(O=M.results,C=M.count||M.results.length):M.data?(O=M.data,C=M.total||M.data.length):(O=[],C=0);const X=O.map(Z=>{var j,re,de,fe,ce;return{id:Z.id,title:Z.title||"",summary:Z.summary||"",content:Z.content||"",author:{name:Z.author_name||((j=Z.author)==null?void 0:j.name)||((re=Z.author)==null?void 0:re.first_name)||"مؤلف غير معروف",avatar:((de=Z.author)==null?void 0:de.image_profile)||((fe=Z.author)==null?void 0:fe.avatar)||`https://via.placeholder.com/40x40/1976d2/ffffff?text=${(Z.author_name||((ce=Z.author)==null?void 0:ce.name)||"A").charAt(0)}`},category:Z.category||"عام",tags:Z.tags?Z.tags.map(ie=>ie.name||ie):[],image:Z.image?Z.image.startsWith("http")?Z.image:`http://localhost:8000${Z.image}`:"https://via.placeholder.com/400x250/1976d2/ffffff?text=No+Image",published_at:Z.published_at||Z.created_at,reading_time:Z.reading_time||5,views_count:Z.views_count||0,likes_count:Z.likes_count||0,comments_count:Z.comments_count||0,featured:Z.featured||!1,rating:4.5}});a(X),E(Math.ceil(C/6)),u(!1)}catch(M){console.error("Error fetching articles:",M),u(!1)}})},[S,p,x,y]);const N=[{value:"all",label:"الكل"},{value:"تطوير الويب",label:"تطوير الويب"},{value:"الذكاء الاصطناعي",label:"الذكاء الاصطناعي"},{value:"تصميم",label:"التصميم"},{value:"تطوير الموبايل",label:"تطوير الموبايل"},{value:"الأمن السيبراني",label:"الأمن السيبراني"},{value:"قواعد البيانات",label:"قواعد البيانات"}],G=[{value:"latest",label:"الأحدث"},{value:"oldest",label:"الأقدم"},{value:"popular",label:"الأكثر شعبية"},{value:"rating",label:"الأعلى تقييماً"}],J=Q=>{h(Q.target.value),_(1)},H=Q=>{m(Q.target.value),_(1)},U=Q=>{v(Q.target.value),_(1)},A=(Q,M)=>{_(M)},V=Q=>{W(M=>{const O=new Set(M);return O.has(Q)?O.delete(Q):O.add(Q),O})},Y=Q=>{z(M=>{const O=new Set(M);return O.has(Q)?O.delete(Q):O.add(Q),O})},B=[...n.filter(Q=>{const M=Q.title.toLowerCase().includes(p.toLowerCase())||Q.summary.toLowerCase().includes(p.toLowerCase()),O=x==="all"||Q.category===x;return M&&O})].sort((Q,M)=>{switch(y){case"latest":return new Date(M.published_at)-new Date(Q.published_at);case"oldest":return new Date(Q.published_at)-new Date(M.published_at);case"popular":return M.views_count-Q.views_count;case"rating":return M.rating-Q.rating;default:return 0}}).slice((S-1)*6,S*6),F=Q=>t(St.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},whileHover:{scale:1.02},children:s(g7,{sx:{height:{xs:"180px",sm:"240px",md:"280px"},cursor:"pointer",flexDirection:{xs:"column",sm:"row"}},onClick:()=>e(`/articles/${Q.slug||Q.id}`),children:[s(d,{sx:{position:"relative",overflow:"hidden",width:{xs:"140px",sm:"180px",md:"220px"},minWidth:{xs:"140px",sm:"180px",md:"220px"},height:"100%"},children:[t(hh,{component:"img",height:"100%",width:"100%",image:Q.image,alt:Q.title,className:"article-image",sx:{objectFit:"cover",transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",borderRadius:{xs:"20px 20px 0 0",sm:"0 20px 20px 0"}},onError:M=>{M.target.src="https://via.placeholder.com/200x180/1976d2/ffffff?text=No+Image"}}),t(d,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), transparent)",borderRadius:{xs:"20px 20px 0 0",sm:"0 20px 20px 0"}}})]}),s(st,{sx:{flexGrow:1,p:{xs:2,sm:3},display:"flex",flexDirection:"column",gap:{xs:1,sm:1.5},className:"card-content",position:"relative"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t(m7,{label:Q.category,size:"small",category:Q.category}),s(d,{sx:{display:"flex",gap:.5},children:[t(Xe,{title:T.has(Q.id)?"إلغاء الإعجاب":"إعجاب",children:t(fw,{variant:"like",onClick:M=>{M.stopPropagation(),Y(Q.id)},sx:{backgroundColor:T.has(Q.id)?"#1976d2":he("#1976d2",.1),color:T.has(Q.id)?"white":"#1976d2","&:hover":{backgroundColor:T.has(Q.id)?"#1565c0":"#1976d2",color:"white"}},children:T.has(Q.id)?t(ha,{sx:{fontSize:20}}):t(Qu,{sx:{fontSize:20}})})}),t(Xe,{title:R.has(Q.id)?"إلغاء الحفظ":"حفظ",children:t(fw,{variant:"bookmark",onClick:M=>{M.stopPropagation(),V(Q.id)},sx:{backgroundColor:R.has(Q.id)?"#42a5f5":he("#42a5f5",.1),color:R.has(Q.id)?"white":"#42a5f5","&:hover":{backgroundColor:R.has(Q.id)?"#1976d2":"#42a5f5",color:"white"}},children:R.has(Q.id)?t(fh,{sx:{fontSize:20}}):t(Xs,{sx:{fontSize:20}})})})]})]}),t(f,{variant:"h6",component:"h3",sx:{fontWeight:800,lineHeight:1.2,color:"#1a1a1a",fontSize:{xs:"1.1rem",sm:"1.2rem"},mb:1,display:"-webkit-box",WebkitLineClamp:{xs:3,sm:4},WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:Q.title}),t(f,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.4,fontSize:{xs:"0.9rem",sm:"1rem"},mb:2,color:"#666",display:"-webkit-box",WebkitLineClamp:{xs:3,sm:4},WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:Q.summary}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[s(y7,{category:Q.category,className:"read-more",children:["اقرأ المزيد",t(d,{className:"arrow-circle",children:t(M0,{sx:{fontSize:14,color:"white"}})})]}),s(d,{sx:{display:"flex",gap:{xs:1,sm:1.5},alignItems:"center",flexWrap:"wrap"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:.5,backgroundColor:"rgba(25, 118, 210, 0.1)",padding:"4px 8px",borderRadius:"12px"},children:[t(zn,{sx:{fontSize:12,color:"#1976d2"}}),s(f,{variant:"caption",sx:{fontWeight:600,color:"#1976d2",fontSize:"0.65rem"},children:[Q.reading_time," د"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5,backgroundColor:"rgba(76, 175, 80, 0.1)",padding:"4px 8px",borderRadius:"12px"},children:[t(Ir,{sx:{fontSize:12,color:"#4CAF50"}}),t(f,{variant:"caption",sx:{fontWeight:600,color:"#4CAF50",fontSize:"0.65rem"},children:Q.views_count.toLocaleString()})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5,backgroundColor:"rgba(244, 67, 54, 0.1)",padding:"4px 8px",borderRadius:"12px"},children:[t(ha,{sx:{fontSize:12,color:"#F44336"}}),t(f,{variant:"caption",sx:{fontWeight:600,color:"#F44336",fontSize:"0.65rem"},children:(Q.likes_count+(T.has(Q.id)?1:0)).toLocaleString()})]})]})]})]})]})});return l?s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t(Rn,{}),s(d,{component:"main",sx:{flex:1},children:[t(hw,{children:s(Qe,{children:[t(dt,{variant:"text",width:400,height:60,sx:{mx:"auto",mb:2}}),t(dt,{variant:"text",width:600,height:40,sx:{mx:"auto"}})]})}),t(Qe,{sx:{py:4},children:t(se,{container:!0,spacing:3,children:[1,2,3,4,5,6].map(Q=>t(se,{item:!0,xs:12,lg:6,children:s(d,{sx:{display:"flex",height:280,borderRadius:3,overflow:"hidden"},children:[t(dt,{variant:"rectangular",width:250,height:"100%"}),s(d,{sx:{flex:1,p:2,position:"relative"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t(dt,{variant:"rectangular",width:80,height:24,sx:{borderRadius:1}}),s(d,{sx:{display:"flex",gap:.5},children:[t(dt,{variant:"circular",width:40,height:40}),t(dt,{variant:"circular",width:40,height:40})]})]}),t(dt,{variant:"text",width:"40%",sx:{mb:1}}),t(dt,{variant:"text",sx:{mb:1}}),t(dt,{variant:"text",width:"80%",sx:{mb:2}}),t(dt,{variant:"text",width:"60%"}),s(d,{sx:{display:"flex",gap:1,mt:"auto"},children:[t(dt,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}}),t(dt,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}}),t(dt,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}})]})]})]})},Q))})})]}),t(En,{})]}):s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t(Rn,{}),s(d,{component:"main",sx:{flex:1},children:[t(hw,{children:t(Qe,{children:s(St.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[t(f,{variant:"h3",component:"h1",sx:{fontWeight:800,mb:2,color:"#ffffff",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.2rem"},lineHeight:1.2,textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:"المدونة"}),t(f,{variant:"body1",sx:{opacity:.9,mb:2,fontWeight:300,fontSize:{xs:"0.9rem",sm:"1rem"}},children:"اكتشف أحدث المقالات والتقنيات في عالم التطوير والتصميم"}),t(St.div,{whileHover:{scale:1.02},whileTap:{scale:.98},style:{width:"100%",maxWidth:"400px",margin:"0 auto"},children:t(d,{sx:{position:"relative",maxWidth:"400px",mx:"auto","&::before":{content:'""',position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",background:"linear-gradient(45deg, #0e5181, #1a5f8a, #0a3d62)",borderRadius:"25px",zIndex:-1,opacity:.3,animation:`${p7} 3s ease-in-out infinite`}},children:t(x7,{placeholder:"ابحث في المقالات...",value:p,onChange:J,InputProps:{startAdornment:t(Pr,{position:"start",children:t(Vi,{sx:{color:"#0e5181",ml:1,fontSize:"1.1rem",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}})})},sx:{maxWidth:400,width:"100%",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"25px",backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)","& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none",boxShadow:"0 0 0 2px rgba(14, 81, 129, 0.5)"},paddingRight:"15px"},"& .MuiInputBase-input":{padding:"10px 15px",fontSize:"0.9rem","&::placeholder":{opacity:.7,color:"#666"}}}})})})]})})}),s(Qe,{sx:{py:6},children:[t(b7,{sx:{mb:4},children:s(d,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[s(f,{variant:"h6",sx:{fontWeight:700,mr:2,color:"#1976d2",display:"flex",alignItems:"center",gap:1},children:[t(ya,{}),"تصفية المقالات:"]}),s(At,{sx:{minWidth:150},children:[t(Rt,{children:"الفئة"}),t(Et,{value:x,onChange:H,label:"الفئة",size:"small",children:N.map(Q=>t(Me,{value:Q.value,children:Q.label},Q.value))})]}),s(At,{sx:{minWidth:150},children:[t(Rt,{children:"الترتيب"}),t(Et,{value:y,onChange:U,label:"الترتيب",size:"small",children:G.map(Q=>t(Me,{value:Q.value,children:Q.label},Q.value))})]})]})}),B.length>0?s(d,{children:[t(se,{container:!0,spacing:3,children:B.map(Q=>t(se,{item:!0,xs:12,lg:6,children:F(Q)},Q.id))}),k>1&&t(d,{sx:{display:"flex",justifyContent:"center",mt:6},children:t(w6,{count:k,page:S,onChange:A,color:"primary",size:"large",sx:{"& .MuiPaginationItem-root":{borderRadius:2,fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{background:"linear-gradient(45deg, #1976d2, #42a5f5)",color:"white",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"}}})})]}):t(d,{sx:{textAlign:"center",py:8},children:s(St.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[s(f,{variant:"h6",color:"text.secondary",sx:{mb:2},children:["لا توجد مقالات ",p&&`مطابقة لـ "${p}"`]}),t(te,{variant:"outlined",onClick:()=>{h(""),m("all")},sx:{borderRadius:2,borderColor:"#1976d2",color:"#1976d2","&:hover":{borderColor:"#1565c0",backgroundColor:he("#1976d2",.08)}},children:"عرض جميع المقالات"})]})})]})]}),t(En,{})]})},pw=oe(d)(({theme:e})=>({background:"linear-gradient(135deg, #0e5181 0%, #0a3d5f 50%, #0e5181 100%)",color:"white",padding:e.spacing(4,0,3),position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.15"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.4},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"200%",height:"200%",background:"radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%)",transform:"translate(-50%, -50%)"},"& .animated-bg":{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.15) 50%, transparent 70%)",backgroundSize:"200% 200%",zIndex:1},"& .content":{position:"relative",zIndex:2},"& .stats-item":{display:"flex",alignItems:"center",gap:.5,padding:"6px 10px",borderRadius:"16px",backgroundColor:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.25)",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"}}})),w7=oe(d)(({theme:e})=>({width:"70%",height:500,borderRadius:e.spacing(3),position:"relative",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.15)",margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(66, 165, 245, 0.1))",border:"2px solid rgba(25, 118, 210, 0.2)",[e.breakpoints.down("lg")]:{width:"85%",height:450},[e.breakpoints.down("md")]:{width:"90%",height:400},[e.breakpoints.down("sm")]:{width:"100%",height:350},"& img":{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",borderRadius:e.spacing(3),transition:"transform 0.4s ease"},"&:hover img":{transform:"scale(1.05)"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(25, 118, 210, 0.1), rgba(66, 165, 245, 0.1))",borderRadius:e.spacing(3),zIndex:1},"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",borderRadius:`${e.spacing(3)} ${e.spacing(3)} 0 0`,zIndex:2}})),Wu=oe(Je)(({theme:e})=>({borderRadius:e.spacing(3),border:"1px solid rgba(25, 118, 210, 0.1)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 255, 0.95))",backdropFilter:"blur(20px)",boxShadow:"0 8px 32px rgba(25, 118, 210, 0.1)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:"shimmer 3s ease-in-out infinite"},"@keyframes shimmer":{"0%":{backgroundPosition:"-200% 0"},"100%":{backgroundPosition:"200% 0"}},"&:hover":{boxShadow:"0 20px 40px rgba(25, 118, 210, 0.15)",transform:"translateY(-8px) rotateX(2deg)"}})),S7=oe(We)(({theme:e})=>({padding:e.spacing(3),marginBottom:e.spacing(2),borderRadius:e.spacing(2),border:`1px solid ${e.palette.divider}`,transition:"all 0.3s ease",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 255, 0.95))",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #1976d2, #42a5f5)"},"&:hover":{boxShadow:"0 8px 32px rgba(25, 118, 210, 0.15)",transform:"translateY(-4px)",border:"1px solid rgba(25, 118, 210, 0.2)"}})),C7=oe(We)(({theme:e})=>({padding:e.spacing(3),marginBottom:e.spacing(3),borderRadius:e.spacing(2),background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 255, 0.95))",backdropFilter:"blur(10px)",border:"1px solid rgba(25, 118, 210, 0.1)",boxShadow:"0 4px 20px rgba(25, 118, 210, 0.08)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:"shimmer 3s ease-in-out infinite"},"@keyframes shimmer":{"0%":{backgroundPosition:"-200% 0"},"100%":{backgroundPosition:"200% 0"}}})),k7=()=>{var X,Z,j,re,de,fe;const e=Vt(),n=nt(),{slug:a}=er();Ri(e.breakpoints.down("lg"));const{isAuthenticated:l}=Ka(),[u,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(!1),[v,S]=w.useState(!1),[_,k]=w.useState(""),[E,R]=w.useState([]),[W,T]=w.useState(null),[z,N]=w.useState(""),[G,J]=w.useState(!1),[H,U]=w.useState([]),[A,V]=w.useState(null),[Y,P]=w.useState([]);w.useEffect(()=>{a&&$(null,null,function*(){var ie,ge,Ae,tt,yt,wr,fr,ln,Le,Tt,or,De,Ut,Mn,Dn,cn,gi,pn,Ei,Ti,yn,Ie,Ve;try{x(!0),console.log("Fetching article with slug:",a);let Se;try{Se=yield Mr.getArticleBySlug(a)}catch(je){const Ze=parseInt(a);if(!isNaN(Ze))Se=yield Mr.getArticle(Ze);else throw je}console.log("Article API response:",Se);const pt=Se.author||Se.author_id||Se.created_by||Se.user,Zt=Se.author_name||((ie=Se.author)==null?void 0:ie.name)||((ge=Se.author)==null?void 0:ge.first_name)||((Ae=Se.author)==null?void 0:Ae.last_name)||Se.created_by_name||Se.user_name||"مؤلف غير معروف",ne=Se.author_avatar||((tt=Se.author)==null?void 0:tt.avatar)||((yt=Se.author)==null?void 0:yt.image_profile)||Se.created_by_avatar||Se.user_avatar||`https://via.placeholder.com/120x120/1976d2/ffffff?text=${Zt.charAt(0)}`;console.log("Extracted author info:",{authorId:pt,authorName:Zt,authorAvatar:ne}),console.log("Full author response:",Se.author),console.log("Author name from response:",Se.author_name);const $e={id:Se.id,title:Se.title||"",slug:Se.slug||a,content:Se.content||"",summary:Se.summary||"",author:{id:pt,name:Zt||((fr=(wr=Se.author)==null?void 0:wr.profile)==null?void 0:fr.name)||((ln=Se.author)==null?void 0:ln.first_name)||((Le=Se.author)==null?void 0:Le.username)||"مؤلف غير معروف",avatar:ne,bio:Se.author_bio||((Tt=Se.author)==null?void 0:Tt.shortBio)||((or=Se.author)==null?void 0:or.bio)||Se.created_by_bio||Se.user_bio||"مؤلف محترف في مجال التكنولوجيا والتعليم",specialization:Se.author_specialization||((De=Se.author)==null?void 0:De.status)||Se.created_by_specialization||Se.user_specialization||"مؤلف",experience:Se.author_experience||((Ut=Se.author)==null?void 0:Ut.experience)||Se.created_by_experience||Se.user_experience||"خبرة في الكتابة",courses_count:Se.author_courses_count||((Mn=Se.author)==null?void 0:Mn.courses_count)||Se.created_by_courses_count||Se.user_courses_count||0,students_count:Se.author_students_count||((Dn=Se.author)==null?void 0:Dn.students_count)||Se.created_by_students_count||Se.user_students_count||0,rating:Se.author_rating||((cn=Se.author)==null?void 0:cn.rating)||Se.created_by_rating||Se.user_rating||4.5,social_links:Se.author_social_links||((gi=Se.author)==null?void 0:gi.social_links)||Se.created_by_social_links||Se.user_social_links||{linkedin:((pn=Se.author)==null?void 0:pn.linkedin)||"",twitter:((Ei=Se.author)==null?void 0:Ei.twitter)||"",facebook:((Ti=Se.author)==null?void 0:Ti.facebook)||"",instagram:((yn=Se.author)==null?void 0:yn.instagram)||"",github:((Ie=Se.author)==null?void 0:Ie.github)||"",youtube:((Ve=Se.author)==null?void 0:Ve.youtube)||""}},category:Se.category||Se.category_name||"عام",category_id:Se.category_id,tags:Se.tags?Array.isArray(Se.tags)?Se.tags.map(je=>je.name||je):[Se.tags]:[],image:Se.image?Se.image.startsWith("http")?Se.image:`http://localhost:8000${Se.image}`:"https://via.placeholder.com/1200x600/1976d2/ffffff?text=No+Image",published_at:Se.published_at||Se.created_at,reading_time:Se.reading_time||5,views_count:Se.views_count||0,likes_count:Se.likes_count||0,comments_count:Se.comments_count||0,featured:Se.featured||!1,rating:Se.rating||4.5,meta_description:Se.meta_description||"",meta_keywords:Se.meta_keywords||""};console.log("Transformed article data:",$e),console.log("Article image URL:",$e.image),p($e),$(null,null,function*(){try{if(l)try{const[ke,lt]=yield Promise.all([Mr.checkArticleLike(Se.id),Mr.checkArticleBookmark(Se.id)]);S(ke.liked||!1),y(lt.bookmarked||!1),console.log("User interaction state:",{liked:ke.liked,bookmarked:lt.bookmarked})}catch(ke){console.error("Error fetching user interaction state:",ke),S(!1),y(!1)}try{const ke=yield Mr.getArticleComments(Se.id);console.log("Comments API response:",ke);let lt=[];Array.isArray(ke)?lt=ke.map(Ye=>{var It,tr,Te,Ue;return{id:Ye.id,author:Ye.author_name||((It=Ye.user)==null?void 0:It.username)||"مستخدم",avatar:((Te=(tr=Ye.user)==null?void 0:tr.profile)==null?void 0:Te.avatar)||`https://via.placeholder.com/40x40/6C63FF/ffffff?text=${(Ye.author_name||((Ue=Ye.user)==null?void 0:Ue.username)||"م").charAt(0)}`,content:Ye.content||"",created_at:Ye.created_at,likes:Ye.likes_count||0,replies:Ye.replies||[],is_approved:Ye.is_approved!==!1}}):ke&&typeof ke=="object"&&ke.results&&(lt=ke.results.map(Ye=>{var It,tr,Te,Ue;return{id:Ye.id,author:Ye.author_name||((It=Ye.user)==null?void 0:It.username)||"مستخدم",avatar:((Te=(tr=Ye.user)==null?void 0:tr.profile)==null?void 0:Te.avatar)||`https://via.placeholder.com/40x40/6C63FF/ffffff?text=${(Ye.author_name||((Ue=Ye.user)==null?void 0:Ue.username)||"م").charAt(0)}`,content:Ye.content||"",created_at:Ye.created_at,likes:Ye.likes_count||0,replies:Ye.replies||[],is_approved:Ye.is_approved!==!1}})),lt=lt.filter(Ye=>Ye.is_approved!==!1),lt.length,R(lt),console.log("Final transformed comments:",lt)}catch(ke){console.error("Error fetching comments:",ke),R([])}const je=yield Mr.getRelatedArticles(Se.id,Se.category||Se.category_name,3);console.log("Related articles API response:",je);const Ze=Array.isArray(je)?je.map(ke=>({id:ke.id,title:ke.title,slug:ke.slug,category:ke.category||ke.category_name,reading_time:ke.reading_time||5,image:ke.image?ke.image.startsWith("http")?ke.image:`http://localhost:8000${ke.image}`:null})):[];U(Ze);const Fe=Se.author||Se.author_id||Se.created_by||Se.user;if(Fe){console.log("Attempting to fetch author profile for ID:",Fe);try{const ke=yield Mr.getAuthorProfile(Fe);console.log("Author profile response:",ke),ke?(V(ke),console.log("Author profile loaded successfully:",ke)):console.log("No author profile found, using default data")}catch(ke){console.error("Error fetching author profile:",ke),console.log("Using default author data")}}else console.log("No author ID found in article response");try{const ke=yield Mr.getArticleTags();P(ke)}catch(ke){console.error("Error fetching article tags:",ke)}}catch(je){console.error("Error fetching additional data:",je)}}),x(!1)}catch(Se){console.error("Error fetching article:",Se),x(!1)}})},[a]);const I=()=>$(null,null,function*(){if(u)try{m?yield Mr.removeBookmark(u.id):yield Mr.bookmarkArticle(u.id),y(!m)}catch(ce){console.error("Error toggling bookmark:",ce),alert("حدث خطأ في حفظ المقالة. يرجى المحاولة مرة أخرى.")}}),B=()=>$(null,null,function*(){if(u)try{v?(yield Mr.unlikeArticle(u.id),p(ce=>ae(q({},ce),{likes_count:Math.max(0,ce.likes_count-1)}))):(yield Mr.likeArticle(u.id),p(ce=>ae(q({},ce),{likes_count:ce.likes_count+1}))),S(!v)}catch(ce){console.error("Error toggling like:",ce),alert("حدث خطأ في الإعجاب بالمقالة. يرجى المحاولة مرة أخرى.")}}),F=()=>{navigator.share?navigator.share({title:u==null?void 0:u.title,text:u==null?void 0:u.summary,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("تم نسخ الرابط إلى الحافظة"))},Q=ce=>$(null,null,function*(){if(ce.preventDefault(),_.trim()&&u&&!G)try{J(!0);const ie=yield Mr.createArticleComment(u.id,{content:_});console.log("Comment created:",ie);const ge={id:ie.id,author:ie.author_name||"المستخدم الحالي",avatar:`https://via.placeholder.com/40x40/4A6CF7/ffffff?text=${(ie.author_name||"م").charAt(0)}`,content:ie.content,created_at:ie.created_at,likes:ie.likes_count||0,replies:[]};R([ge,...E]),k(""),p(Ae=>ae(q({},Ae),{comments_count:Ae.comments_count+1}))}catch(ie){console.error("Error creating comment:",ie),alert("حدث خطأ في إرسال التعليق. يرجى المحاولة مرة أخرى.")}finally{J(!1)}}),M=ce=>$(null,null,function*(){if(z.trim()&&!G)try{J(!0);const ie=yield Mr.createArticleComment(u.id,{content:z,parent:ce});console.log("Reply created:",ie);const ge={id:ie.id,author:ie.author_name||"المستخدم الحالي",avatar:`https://via.placeholder.com/40x40/4A6CF7/ffffff?text=${(ie.author_name||"م").charAt(0)}`,content:ie.content,created_at:ie.created_at,likes:ie.likes_count||0};R(Ae=>Ae.map(tt=>tt.id===ce?ae(q({},tt),{replies:[...tt.replies||[],ge]}):tt)),N(""),T(null),p(Ae=>ae(q({},Ae),{comments_count:Ae.comments_count+1}))}catch(ie){console.error("Error creating reply:",ie),alert("حدث خطأ في إرسال الرد. يرجى المحاولة مرة أخرى.")}finally{J(!1)}}),O=ce=>$(null,null,function*(){try{console.log("Liking comment:",ce),R(ie=>ie.map(ge=>ge.id===ce?ae(q({},ge),{likes:ge.likes+1,liked:!0}):ge))}catch(ie){console.error("Error liking comment:",ie)}}),C=ce=>new Date(ce).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"});return h?s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t(Rn,{}),s(d,{component:"main",sx:{flex:1},children:[s(pw,{children:[t("div",{className:"animated-bg"}),s(Qe,{className:"content",children:[t(dt,{variant:"text",width:600,height:60,sx:{mb:2}}),t(dt,{variant:"text",width:400,height:40}),s(d,{sx:{display:"flex",gap:2,mt:2},children:[t(dt,{variant:"circular",width:48,height:48}),s(d,{children:[t(dt,{variant:"text",width:120,height:20}),t(dt,{variant:"text",width:80,height:16})]}),t(dt,{variant:"text",width:100,height:20}),t(dt,{variant:"text",width:100,height:20}),t(dt,{variant:"text",width:100,height:20}),t(dt,{variant:"text",width:100,height:20})]})]})]}),t(Qe,{sx:{py:4},children:s(se,{container:!0,spacing:4,children:[s(se,{item:!0,xs:12,lg:8,children:[t(dt,{variant:"rectangular",height:400,sx:{mb:2,borderRadius:2}}),t(dt,{variant:"text",sx:{mb:1}}),t(dt,{variant:"text",sx:{mb:1}}),t(dt,{variant:"text",width:"60%"})]}),s(se,{item:!0,xs:12,lg:4,children:[t(dt,{variant:"rectangular",height:200,sx:{borderRadius:2,mb:2}}),t(dt,{variant:"rectangular",height:300,sx:{borderRadius:2}})]})]})})]}),t(En,{})]}):u?s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t(Rn,{}),s(d,{component:"main",sx:{flex:1},children:[s(pw,{children:[t("div",{className:"animated-bg"}),t(Qe,{className:"content",children:s(St.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[s($w,{sx:{mb:3,color:"white"},children:[t(fa,{color:"inherit",href:"/articles",sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"المقالات"}),t(f,{color:"inherit",children:u.category}),t(f,{color:"inherit",children:u.title})]}),t(f,{variant:"h3",component:"h1",sx:{fontWeight:800,mb:2,lineHeight:1.2},children:u.title}),t(f,{variant:"body1",sx:{opacity:.9,mb:3,lineHeight:1.5,fontSize:"1.1rem"},children:u.summary}),s(d,{sx:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},children:[s(d,{className:"stats-item",sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"8px 12px",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.6)"}},children:[t(_t,{src:u.author.avatar,sx:{width:36,height:36,border:"1px solid rgba(255, 255, 255, 0.5)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:(u.author.name||"م").charAt(0)}),s(d,{sx:{ml:1},children:[t(f,{variant:"body2",sx:{fontWeight:700,fontSize:"0.95rem"},children:u.author.name||"مؤلف غير معروف"}),t(f,{variant:"caption",sx:{opacity:.9,fontWeight:500,backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"1px 6px",borderRadius:"8px",display:"inline-block",fontSize:"0.75rem"},children:C(u.published_at)})]})]}),s(d,{className:"stats-item",children:[t(Ir,{sx:{fontSize:16}}),s(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[u.views_count.toLocaleString()," مشاهدة"]})]}),s(d,{className:"stats-item",children:[t(zn,{sx:{fontSize:16}}),s(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[u.reading_time," دقيقة قراءة"]})]}),s(d,{className:"stats-item",children:[t(ha,{sx:{fontSize:16}}),s(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[u.likes_count.toLocaleString()," إعجاب"]})]}),s(d,{className:"stats-item",children:[t(Ls,{sx:{fontSize:16}}),s(f,{variant:"caption",sx:{fontWeight:600,fontSize:"0.8rem"},children:[u.comments_count.toLocaleString()," تعليق"]})]})]})]})})]}),t(Qe,{sx:{py:6},children:s(se,{container:!0,spacing:4,sx:{position:"relative",flexDirection:{xs:"column-reverse",lg:"row"},minHeight:"100%"},children:[t(se,{item:!0,sx:{width:{xs:"100%",lg:"calc(100% - 396px)"},mr:{lg:"416px"},order:{xs:1,lg:2}},children:s(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t(w7,{sx:{mb:4,height:"400px",width:"100%"},children:t("img",{src:u.image,alt:u.title,onError:ce=>{console.error("Image failed to load:",u.image),ce.target.src="https://via.placeholder.com/800x400/4A6CF7/ffffff?text=No+Image"},onLoad:()=>{console.log("Image loaded successfully:",u.image)},style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",borderRadius:"16px"}})}),t(We,{sx:{p:3,mb:4,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:s(d,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center"},children:[t(te,{variant:"outlined",startIcon:t(Gt,{}),onClick:()=>n("/articles"),sx:{borderRadius:2},children:"العودة للمقالات"}),t(d,{sx:{flexGrow:1}}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mr:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(ha,{sx:{fontSize:18,color:"primary.main"}}),t(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:u.likes_count.toLocaleString()})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(Ls,{sx:{fontSize:18,color:"primary.main"}}),t(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main"},children:u.comments_count.toLocaleString()})]})]}),t(Xe,{title:"إعجاب",children:t(xe,{onClick:B,color:v?"primary":"default",sx:{border:"1px solid",borderColor:"divider",backgroundColor:v?"primary.main":"transparent",color:v?"white":"inherit","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.1)"}},children:v?t(ha,{}):t(Qu,{})})}),t(Xe,{title:"حفظ",children:t(xe,{onClick:I,color:m?"primary":"default",sx:{border:"1px solid",borderColor:"divider",backgroundColor:m?"primary.main":"transparent",color:m?"white":"inherit","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.1)"}},children:m?t(fh,{}):t(Xs,{})})}),t(Xe,{title:"مشاركة",children:t(xe,{onClick:F,sx:{border:"1px solid",borderColor:"divider","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.1)"}},children:t(ph,{})})})]})}),t(Wu,{sx:{mb:4},children:t(st,{sx:{p:4},children:t("div",{dangerouslySetInnerHTML:{__html:u.content},style:{lineHeight:1.8,fontSize:"1.1rem",color:e.palette.text.primary}})})}),s(d,{sx:{mb:4},children:[s(f,{variant:"h6",sx:{mb:2,fontWeight:600,display:"flex",alignItems:"center"},children:[t(B0,{sx:{mr:1,color:"primary.main"}}),"الوسوم"]}),t(d,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:u.tags&&u.tags.length>0?u.tags.map((ce,ie)=>t(Ce,{label:typeof ce=="string"?ce:ce.name||ce,variant:"outlined",color:"primary",sx:{fontWeight:500,"&:hover":{backgroundColor:"primary.main",color:"white",transform:"translateY(-2px)"}}},ie)):t(f,{variant:"body2",color:"text.secondary",children:"لا توجد وسوم لهذه المقالة"})})]}),s(d,{children:[s(f,{variant:"h5",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[t(Ls,{sx:{mr:1.5,fontSize:28}}),"التعليقات (",E.length,")"]}),!1,l?s(C7,{children:[t(f,{variant:"h6",sx:{mb:2,fontWeight:600,color:"text.primary"},children:"أضف تعليقك"}),s("form",{onSubmit:Q,children:[t(_e,{fullWidth:!0,multiline:!0,rows:4,placeholder:"اكتب تعليقك هنا...",value:_,onChange:ce=>k(ce.target.value),disabled:G,sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover fieldset":{borderColor:"primary.main"}}}}),t(d,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:t(te,{type:"submit",variant:"contained",disabled:!_.trim()||G,endIcon:G?null:t(mh,{}),sx:{borderRadius:2,px:3,py:1,fontWeight:600,"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},"&:disabled":{opacity:.7}},children:G?"جاري الإرسال...":"إرسال التعليق"})})]})]}):s(d,{sx:{p:3,backgroundColor:"rgba(25, 118, 210, 0.05)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.1)",textAlign:"center"},children:[t(f,{variant:"h6",sx:{mb:1,fontWeight:600,color:"primary.main"},children:"تسجيل الدخول مطلوب"}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"يجب عليك تسجيل الدخول لإضافة تعليق"}),t(te,{variant:"contained",onClick:()=>n("/login"),sx:{borderRadius:2},children:"تسجيل الدخول"})]}),t(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:E.length>0?E.map(ce=>s(S7,{children:[s(d,{sx:{display:"flex",gap:2,mb:2},children:[t(_t,{src:ce.avatar,sx:{width:48,height:48,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(ce.author||"م").charAt(0)}),s(d,{sx:{flex:1},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t(f,{variant:"subtitle1",sx:{fontWeight:600,color:"text.primary"},children:ce.author}),t(f,{variant:"caption",color:"text.secondary",sx:{backgroundColor:"grey.100",px:1,py:.25,borderRadius:1,fontSize:"0.75rem"},children:C(ce.created_at)})]}),t(f,{variant:"body1",sx:{lineHeight:1.6,color:"text.secondary",mb:2},children:ce.content})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(xe,{size:"small",onClick:()=>O(ce.id),sx:{color:ce.liked?"primary.main":"text.secondary","&:hover":{color:"primary.main",transform:"scale(1.1)"}},children:ce.liked?t(ha,{fontSize:"small"}):t(Qu,{fontSize:"small"})}),s(f,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:[ce.likes," إعجاب"]}),t(te,{size:"small",onClick:()=>T(W===ce.id?null:ce.id),sx:{color:"primary.main",textTransform:"none",fontWeight:600,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)"}},children:W===ce.id?"إلغاء الرد":"رد"})]}),W===ce.id&&s(d,{sx:{mt:2,p:2,backgroundColor:"rgba(25, 118, 210, 0.05)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.1)"},children:[s(f,{variant:"body2",sx:{mb:1,fontWeight:600,color:"primary.main"},children:["الرد على ",ce.author]}),t(_e,{fullWidth:!0,multiline:!0,rows:3,placeholder:"اكتب ردك هنا...",value:z,onChange:ie=>N(ie.target.value),disabled:G,sx:{mb:2}}),s(d,{sx:{display:"flex",gap:1},children:[t(te,{size:"small",variant:"contained",onClick:()=>M(ce.id),disabled:!z.trim()||G,sx:{borderRadius:1},children:G?"جاري الإرسال...":"إرسال الرد"}),t(te,{size:"small",variant:"outlined",onClick:()=>{T(null),N("")},sx:{borderRadius:1},children:"إلغاء"})]})]}),ce.replies&&ce.replies.length>0&&s(d,{sx:{mt:2,ml:4},children:[s(f,{variant:"body2",sx:{mb:2,fontWeight:600,color:"text.secondary"},children:["الردود (",ce.replies.length,")"]}),ce.replies.map(ie=>s(d,{sx:{display:"flex",gap:2,mb:2,p:2,backgroundColor:"rgba(0,0,0,0.02)",borderRadius:2,border:"1px solid rgba(0,0,0,0.05)"},children:[t(_t,{src:ie.avatar,sx:{width:32,height:32,fontSize:"0.8rem"},children:(ie.author||"م").charAt(0)}),s(d,{sx:{flex:1},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t(f,{variant:"body2",sx:{fontWeight:600,color:"text.primary"},children:ie.author}),t(f,{variant:"caption",color:"text.secondary",children:C(ie.created_at)})]}),t(f,{variant:"body2",sx:{lineHeight:1.5,color:"text.secondary"},children:ie.content})]})]},ie.id))]})]},ce.id)):s(d,{sx:{textAlign:"center",py:4,color:"text.secondary"},children:[t(Ls,{sx:{fontSize:48,mb:2,opacity:.5}}),t(f,{variant:"h6",sx:{mb:1},children:"لا توجد تعليقات بعد"}),t(f,{variant:"body2",children:"كن أول من يعلق على هذه المقالة!"})]})})]})]})}),t(se,{item:!0,sx:{width:{xs:"100%",lg:"380px"},position:{xs:"static",lg:"absolute"},right:{lg:"16px"},top:{lg:"-40px"},zIndex:10,order:{xs:2,lg:1}},children:s(St.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[t(Wu,{sx:{mb:3},children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[t(qa,{sx:{mr:1.5,fontSize:28}}),"عن الكاتب"]}),s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[t(_t,{src:(A==null?void 0:A.image_profile)||(A==null?void 0:A.avatar)||(A==null?void 0:A.profile_image)||(A==null?void 0:A.image)||u.author.avatar,sx:{width:100,height:100,mb:2,border:"4px solid rgba(25, 118, 210, 0.2)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.3)"},children:((A==null?void 0:A.name)||(A==null?void 0:A.user_first_name)||(A==null?void 0:A.user_last_name)||(A==null?void 0:A.user_username)||u.author.name||"م").charAt(0)}),t(f,{variant:"h5",sx:{fontWeight:700,mb:1,textAlign:"center"},children:(A==null?void 0:A.name)||`${(A==null?void 0:A.user_first_name)||""} ${(A==null?void 0:A.user_last_name)||""}`.trim()||(A==null?void 0:A.user_username)||u.author.name||"مؤلف غير معروف"}),t(f,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mb:2,lineHeight:1.6},children:(A==null?void 0:A.shortBio)||(A==null?void 0:A.bio)||(A==null?void 0:A.biography)||(A==null?void 0:A.description)||(A==null?void 0:A.about)||u.author.bio}),((A==null?void 0:A.user_email)||(A==null?void 0:A.email))&&s(d,{sx:{backgroundColor:"rgba(25, 118, 210, 0.05)",borderRadius:2,p:2,mb:2,width:"100%",textAlign:"center",border:"1px solid rgba(25, 118, 210, 0.1)"},children:[t(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main",mb:.5},children:"البريد الإلكتروني"}),t(f,{variant:"body2",color:"text.secondary",children:(A==null?void 0:A.user_email)||(A==null?void 0:A.email)})]}),(A==null?void 0:A.user_id)&&s(d,{sx:{backgroundColor:"rgba(76, 175, 80, 0.05)",borderRadius:2,p:2,mb:2,width:"100%",textAlign:"center",border:"1px solid rgba(76, 175, 80, 0.1)"},children:[t(f,{variant:"body2",sx:{fontWeight:600,color:"success.main",mb:.5},children:"معرف المستخدم"}),s(f,{variant:"body2",color:"text.secondary",children:["#",A==null?void 0:A.user_id]})]}),s(d,{sx:{backgroundColor:"rgba(25, 118, 210, 0.1)",borderRadius:2,p:2,mb:2,width:"100%",textAlign:"center"},children:[t(f,{variant:"body2",sx:{fontWeight:600,color:"primary.main",mb:.5},children:"الحالة"}),t(f,{variant:"body2",color:"text.secondary",children:(A==null?void 0:A.status)||(A==null?void 0:A.specialization)||(A==null?void 0:A.subject)||(A==null?void 0:A.field)||u.author.specialization})]}),s(d,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,width:"100%",mb:3},children:[s(d,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(76, 175, 80, 0.1)",borderRadius:2},children:[t(f,{variant:"h6",sx:{fontWeight:700,color:"success.main"},children:(A==null?void 0:A.experience)||(A==null?void 0:A.experience_years)||(A==null?void 0:A.teaching_experience)||(A==null?void 0:A.years_of_experience)||u.author.experience}),t(f,{variant:"caption",color:"text.secondary",children:"خبرة"})]}),s(d,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(255, 152, 0, 0.1)",borderRadius:2},children:[t(f,{variant:"h6",sx:{fontWeight:700,color:"warning.main"},children:(A==null?void 0:A.courses_count)||(A==null?void 0:A.total_courses)||(A==null?void 0:A.courses_created)||(A==null?void 0:A.number_of_courses)||u.author.courses_count}),t(f,{variant:"caption",color:"text.secondary",children:"دورة"})]}),s(d,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(156, 39, 176, 0.1)",borderRadius:2},children:[t(f,{variant:"h6",sx:{fontWeight:700,color:"secondary.main"},children:((A==null?void 0:A.students_count)||(A==null?void 0:A.total_students)||(A==null?void 0:A.students_enrolled)||(A==null?void 0:A.number_of_students)||u.author.students_count||0).toLocaleString()}),t(f,{variant:"caption",color:"text.secondary",children:"طالب"})]}),s(d,{sx:{textAlign:"center",p:1.5,backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:2},children:[s(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5},children:[t(si,{sx:{color:"warning.main",fontSize:16}}),t(f,{variant:"h6",sx:{fontWeight:700,color:"warning.main"},children:(A==null?void 0:A.rating)||(A==null?void 0:A.average_rating)||(A==null?void 0:A.teacher_rating)||(A==null?void 0:A.overall_rating)||u.author.rating||4.5})]}),t(f,{variant:"caption",color:"text.secondary",children:"تقييم"})]})]}),s(d,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[((A==null?void 0:A.linkedin)||((X=u.author.social_links)==null?void 0:X.linkedin))&&t(xe,{size:"small",onClick:()=>{var ce;return window.open((A==null?void 0:A.linkedin)||((ce=u.author.social_links)==null?void 0:ce.linkedin),"_blank")},sx:{backgroundColor:"rgba(25, 118, 210, 0.1)",color:"primary.main","&:hover":{backgroundColor:"primary.main",color:"white"}},children:t(d,{component:"span",sx:{fontSize:16},children:"in"})}),((A==null?void 0:A.twitter)||((Z=u.author.social_links)==null?void 0:Z.twitter))&&t(xe,{size:"small",onClick:()=>{var ce;return window.open((A==null?void 0:A.twitter)||((ce=u.author.social_links)==null?void 0:ce.twitter),"_blank")},sx:{backgroundColor:"rgba(29, 161, 242, 0.1)",color:"#1DA1F2","&:hover":{backgroundColor:"#1DA1F2",color:"white"}},children:t(d,{component:"span",sx:{fontSize:16},children:"𝕏"})}),((A==null?void 0:A.facebook)||((j=u.author.social_links)==null?void 0:j.facebook))&&t(xe,{size:"small",onClick:()=>{var ce;return window.open((A==null?void 0:A.facebook)||((ce=u.author.social_links)==null?void 0:ce.facebook),"_blank")},sx:{backgroundColor:"rgba(66, 103, 178, 0.1)",color:"#4267B2","&:hover":{backgroundColor:"#4267B2",color:"white"}},children:t(d,{component:"span",sx:{fontSize:16},children:"f"})}),((A==null?void 0:A.instagram)||((re=u.author.social_links)==null?void 0:re.instagram))&&t(xe,{size:"small",onClick:()=>{var ce;return window.open((A==null?void 0:A.instagram)||((ce=u.author.social_links)==null?void 0:ce.instagram),"_blank")},sx:{backgroundColor:"rgba(225, 48, 108, 0.1)",color:"#E1306C","&:hover":{backgroundColor:"#E1306C",color:"white"}},children:t(d,{component:"span",sx:{fontSize:16},children:"📷"})}),((A==null?void 0:A.github)||((de=u.author.social_links)==null?void 0:de.github))&&t(xe,{size:"small",onClick:()=>{var ce;return window.open((A==null?void 0:A.github)||((ce=u.author.social_links)==null?void 0:ce.github),"_blank")},sx:{backgroundColor:"rgba(36, 41, 46, 0.1)",color:"#24292E","&:hover":{backgroundColor:"#24292E",color:"white"}},children:t(d,{component:"span",sx:{fontSize:16},children:"🐙"})}),((A==null?void 0:A.youtube)||((fe=u.author.social_links)==null?void 0:fe.youtube))&&t(xe,{size:"small",onClick:()=>{var ce;return window.open((A==null?void 0:A.youtube)||((ce=u.author.social_links)==null?void 0:ce.youtube),"_blank")},sx:{backgroundColor:"rgba(255, 0, 0, 0.1)",color:"#FF0000","&:hover":{backgroundColor:"#FF0000",color:"white"}},children:t(d,{component:"span",sx:{fontSize:16},children:"▶️"})})]})]})]})}),t(Wu,{sx:{mb:3},children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[t(ya,{sx:{mr:1.5,fontSize:28}}),"إحصائيات المقالة"]}),s(d,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mb:3},children:[s(d,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(76, 175, 80, 0.1)",borderRadius:2,border:"1px solid rgba(76, 175, 80, 0.2)"},children:[t(ha,{sx:{fontSize:24,color:"success.main",mb:1}}),t(f,{variant:"h6",sx:{fontWeight:700,color:"success.main"},children:u.likes_count.toLocaleString()}),t(f,{variant:"caption",color:"text.secondary",children:"إعجاب"})]}),s(d,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(25, 118, 210, 0.1)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.2)"},children:[t(Ls,{sx:{fontSize:24,color:"primary.main",mb:1}}),t(f,{variant:"h6",sx:{fontWeight:700,color:"primary.main"},children:u.comments_count.toLocaleString()}),t(f,{variant:"caption",color:"text.secondary",children:"تعليق"})]}),s(d,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(255, 152, 0, 0.1)",borderRadius:2,border:"1px solid rgba(255, 152, 0, 0.2)"},children:[t(Ir,{sx:{fontSize:24,color:"warning.main",mb:1}}),t(f,{variant:"h6",sx:{fontWeight:700,color:"warning.main"},children:u.views_count.toLocaleString()}),t(f,{variant:"caption",color:"text.secondary",children:"مشاهدة"})]}),s(d,{sx:{textAlign:"center",p:2,backgroundColor:"rgba(156, 39, 176, 0.1)",borderRadius:2,border:"1px solid rgba(156, 39, 176, 0.2)"},children:[t(zn,{sx:{fontSize:24,color:"secondary.main",mb:1}}),t(f,{variant:"h6",sx:{fontWeight:700,color:"secondary.main"},children:u.reading_time}),t(f,{variant:"caption",color:"text.secondary",children:"دقيقة"})]})]})]})}),t(Wu,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:700,display:"flex",alignItems:"center",color:"primary.main"},children:[t(Qr,{sx:{mr:1.5,fontSize:28}}),"مقالات ذات صلة"]}),t(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:H&&H.length>0?H.map(ce=>s(d,{onClick:()=>n(`/articles/${ce.slug}`),sx:{display:"flex",gap:2,cursor:"pointer",p:2,borderRadius:3,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(25, 118, 210, 0.1)",backgroundColor:"rgba(25, 118, 210, 0.02)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.1)",transform:"translateX(-8px) scale(1.02)",boxShadow:"0 8px 24px rgba(25, 118, 210, 0.2)",border:"1px solid rgba(25, 118, 210, 0.3)"}},children:[s(d,{sx:{width:70,height:70,borderRadius:3,background:ce.image?"transparent":"linear-gradient(135deg, #1976d2, #42a5f5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.8rem",fontWeight:700,boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",flexShrink:0,overflow:"hidden"},children:[ce.image?t("img",{src:ce.image,alt:ce.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:ie=>{ie.target.style.display="none",ie.target.nextSibling.style.display="flex"}}):null,t(d,{sx:{display:ce.image?"none":"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1976d2, #42a5f5)"},children:(ce.category||"مقال").split(" ")[0]})]}),s(d,{sx:{flex:1},children:[t(f,{variant:"body2",sx:{fontWeight:700,lineHeight:1.3,mb:1,color:"text.primary"},children:ce.title}),s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(zn,{sx:{fontSize:14,color:"text.secondary"}}),s(f,{variant:"caption",color:"text.secondary",sx:{fontWeight:500},children:[ce.reading_time," دقيقة قراءة"]})]}),t(f,{variant:"caption",sx:{color:"primary.main",fontWeight:600,backgroundColor:"rgba(25, 118, 210, 0.1)",px:1,py:.25,borderRadius:1,display:"inline-block",mt:.5},children:ce.category||"عام"})]})]},ce.id)):t(d,{sx:{textAlign:"center",py:3,color:"text.secondary"},children:t(f,{variant:"body2",children:"لا توجد مقالات ذات صلة متاحة حالياً"})})})]})})]})})]})})]}),t(En,{})]}):s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[t(Rn,{}),t(d,{component:"main",sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:s(d,{sx:{textAlign:"center",py:8},children:[t(f,{variant:"h4",color:"text.secondary",sx:{mb:2},children:"المقالة غير موجودة"}),t(te,{variant:"contained",onClick:()=>n("/articles"),children:"العودة إلى المقالات"})]})}),t(En,{})]})};ht`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`;ht`
  0% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(103, 58, 183, 0); }
  100% { box-shadow: 0 0 0 0 rgba(103, 58, 183, 0); }
`;const _7=ht`
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
`;ht`
  0% { transform: translateX(-100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
`;const A7=oe(Je)(({theme:e})=>({height:"100%",display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:"#ffffff",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)",border:"none",transition:"all 0.3s ease",position:"relative",minHeight:"450px",width:"100%","& .image-container":{width:"100%",height:"200px",overflow:"hidden",position:"relative"},"& .article-image":{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",transition:"transform 0.4s ease",borderRadius:"12px 12px 0 0"},"&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.12)","& .article-image":{transform:"scale(1.05)"},"& .action-buttons":{opacity:1}},"& .action-buttons":{opacity:.8,transition:"opacity 0.3s ease"}})),gw=oe(Ce)(({theme:e,status:n})=>q(q(q({fontWeight:700,borderRadius:"20px",backdropFilter:"blur(10px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"0.7rem",height:24,textTransform:"uppercase",letterSpacing:"0.5px"},n==="published"&&{backgroundColor:"#2e7d32",color:"white","&:hover":{backgroundColor:"#1b5e20",transform:"translateY(-1px)"}}),n==="draft"&&{backgroundColor:"#ed6c02",color:"white","&:hover":{backgroundColor:"#e65100",transform:"translateY(-1px)"}}),n==="archived"&&{backgroundColor:"#757575",color:"white","&:hover":{backgroundColor:"#616161",transform:"translateY(-1px)"}})),$u=oe(Ce)(({theme:e,active:n})=>ae(q({fontWeight:600,borderRadius:"20px",transition:"all 0.3s ease",height:32},n&&{background:"linear-gradient(45deg, #1976d2, #42a5f5)",color:"white",boxShadow:`0 4px 12px ${he("#1976d2",.3)}`,transform:"translateY(-2px)"}),{"&:hover":{transform:n?"translateY(-2px)":"translateY(-1px)",boxShadow:n?`0 6px 16px ${he("#1976d2",.4)}`:`0 4px 12px ${he("#1976d2",.2)}`}})),z7=oe(_e)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:20,backgroundColor:he("#ffffff",.95),backdropFilter:"blur(10px)","&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2",borderWidth:2}}}));oe(We)(({theme:e})=>({padding:e.spacing(2.5),borderRadius:16,background:`linear-gradient(135deg, ${he("#1976d2",.08)}, ${he("#42a5f5",.08)})`,border:`1px solid ${he("#1976d2",.15)}`,backdropFilter:"blur(10px)",transition:"all 0.3s ease",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #1976d2, #42a5f5)"},"&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${he("#1976d2",.2)}`}}));const jg=oe(xe)(({theme:e,variant:n})=>q(q(q({width:32,height:32,borderRadius:"8px",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",backdropFilter:"blur(10px)"},n==="edit"&&{backgroundColor:"#1976d2",color:"white","&:hover":{backgroundColor:"#1565c0",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)"}}),n==="delete"&&{backgroundColor:"#d32f2f",color:"white","&:hover":{backgroundColor:"#c62828",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(211, 47, 47, 0.3)"}}),n==="view"&&{backgroundColor:"#e5978b",color:"white","&:hover":{backgroundColor:"#388e3c",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)"}})),R7=oe(d)(({theme:e})=>({background:`linear-gradient(135deg, ${he("#ffffff",.95)}, ${he("#f8f9ff",.95)})`,borderRadius:24,padding:e.spacing(4),marginBottom:e.spacing(4),boxShadow:`0 8px 32px ${he("#1976d2",.08)}`,border:`1px solid ${he("#1976d2",.1)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #1976d2, #42a5f5, #1565c0)",backgroundSize:"200% 100%",animation:`${_7} 3s ease-in-out infinite`}})),E7=()=>{Vt();const e=nt(),[n,a]=w.useState([]),[l,u]=w.useState(!0),[p,h]=w.useState(""),[x,m]=w.useState("all"),[y,v]=w.useState("created_at"),[S,_]=w.useState("grid"),[k,E]=w.useState(null),[R,W]=w.useState(!1),[T,z]=w.useState(0),[N,G]=w.useState(1),[J,H]=w.useState(10),[U,A]=w.useState(0),[V,Y]=w.useState(null);w.useEffect(()=>{$(null,null,function*(){try{u(!0),console.log("Fetching articles...");const fe=yield Mr.getArticles({page:N,page_size:J,search:p,status:T===0?"published":T===1?"draft":"archived",ordering:y==="newest"?"-created_at":y==="oldest"?"created_at":"-views_count"});console.log("Articles response:",fe);let ce=[],ie=0;Array.isArray(fe)?(ce=fe,ie=fe.length):fe.results?(ce=fe.results,ie=fe.count||fe.results.length):fe.data?(ce=fe.data,ie=fe.total||fe.data.length):(ce=[],ie=0);const ge=ce.map(Ae=>({id:Ae.id,title:Ae.title||"",summary:Ae.summary||"",status:Ae.status||"draft",views_count:Ae.views_count||0,created_at:Ae.created_at,updated_at:Ae.updated_at,published_at:Ae.published_at,featured:Ae.featured||!1,tags:Ae.tags?Ae.tags.map(tt=>tt.name||tt):[],image:Ae.image?Ae.image.startsWith("http")?Ae.image:`http://localhost:8000${Ae.image}`:null,reading_time:Ae.reading_time||5,likes_count:Ae.likes_count||0,comments_count:Ae.comments_count||0,category:Ae.category||"عام"}));a(ge),A(ie),u(!1)}catch(fe){console.error("Error fetching articles:",fe),Y("حدث خطأ أثناء تحميل المقالات. يرجى المحاولة مرة أخرى."),u(!1)}})},[N,J,p,T,y]);const P=de=>{h(de.target.value)},I=de=>{m(de)},B=de=>{e(`/teacher/articles/${de.id}/edit`)},F=de=>{E(de),W(!0)},Q=de=>{console.log("عرض تفاصيل المقالة:",de.title),e(`/articles/${de.slug||de.id}`)},M=()=>$(null,null,function*(){try{console.log("Deleting article:",k.id),yield Mr.deleteArticle(k.id),a(de=>de.filter(fe=>fe.id!==k.id)),W(!1),E(null),console.log("Article deleted successfully")}catch(de){console.error("Error deleting article:",de),Y("حدث خطأ أثناء حذف المقالة. يرجى المحاولة مرة أخرى.")}}),C=[...n.filter(de=>{const fe=de.title.toLowerCase().includes(p.toLowerCase())||de.summary.toLowerCase().includes(p.toLowerCase()),ce=x==="all"||de.status===x;return fe&&ce})].sort((de,fe)=>{switch(y){case"created_at":return new Date(fe.created_at)-new Date(de.created_at);case"updated_at":return new Date(fe.updated_at)-new Date(de.updated_at);case"title":return de.title.localeCompare(fe.title);case"views":return fe.views_count-de.views_count;default:return 0}}),X=de=>new Date(de).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}),j=(()=>{const de=n.length,fe=n.filter(Ae=>Ae.status==="published").length,ce=n.filter(Ae=>Ae.status==="draft").length,ie=n.filter(Ae=>Ae.status==="archived").length,ge=n.reduce((Ae,tt)=>Ae+tt.views_count,0);return{total:de,published:fe,draft:ce,archived:ie,totalViews:ge}})(),re=de=>t(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{scale:1.02},whileTap:{scale:.98},layout:!0,style:{width:"100%"},children:s(A7,{sx:{height:"100%",cursor:"pointer",width:"100%"},onClick:()=>Q(de),children:[s(d,{sx:{position:"relative",overflow:"hidden"},children:[t(d,{className:"image-container",sx:{position:"relative",width:"100%",height:"200px",overflow:"hidden"},children:t("img",{src:de.image||"https://via.placeholder.com/400x200/4A6CF7/ffffff?text=No+Image",alt:de.title,className:"article-image",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",transition:"transform 0.4s ease",borderRadius:"12px 12px 0 0"},onError:fe=>{console.error("Image failed to load:",de.image),fe.target.src="https://via.placeholder.com/400x200/4A6CF7/ffffff?text=Image+Error"},onLoad:()=>{console.log("Article image loaded successfully:",de.image)}})}),s(d,{className:"action-buttons",sx:{position:"absolute",top:8,right:8,display:"flex",flexDirection:"column",gap:.5,opacity:1,zIndex:3},children:[t(Xe,{title:"عرض التفاصيل",placement:"left",children:t(jg,{variant:"view",onClick:fe=>{fe.stopPropagation(),Q(de)},size:"small",sx:{backgroundColor:"#e5978b",color:"white","&:hover":{backgroundColor:"#388e3c",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.3)"}},children:t(Pp,{sx:{fontSize:16}})})}),t(Xe,{title:"تعديل المقالة",placement:"left",children:t(jg,{variant:"edit",onClick:fe=>{fe.stopPropagation(),B(de)},size:"small",children:t(vr,{sx:{fontSize:16}})})}),t(Xe,{title:"حذف المقالة",placement:"left",children:t(jg,{variant:"delete",onClick:fe=>{fe.stopPropagation(),F(de)},size:"small",children:t(sn,{sx:{fontSize:16}})})})]}),de.featured&&t(d,{sx:{position:"absolute",top:8,left:8,zIndex:2},children:s(d,{sx:{background:"linear-gradient(45deg, #FFD700, #FFA500)",borderRadius:"6px",px:.6,py:.2,display:"flex",alignItems:"center",gap:.2,boxShadow:"0 2px 6px rgba(255, 215, 0, 0.4)"},children:[t(si,{sx:{fontSize:10,color:"white"}}),t(f,{variant:"caption",sx:{color:"white",fontWeight:600,fontSize:"0.55rem"},children:"مميز"})]})}),t(d,{sx:{position:"absolute",bottom:8,left:8,zIndex:2},children:t(gw,{label:de.status==="published"?"منشور":de.status==="draft"?"مسودة":"مؤرشف",status:de.status,size:"small"})})]}),s(st,{className:"card-content",sx:{flexGrow:1,p:3,display:"flex",flexDirection:"column",gap:2,minHeight:"250px"},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[t(gw,{label:de.status==="published"?"منشور":de.status==="draft"?"مسودة":"مؤرشف",status:de.status,size:"small"}),t(f,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:X(de.updated_at)})]}),t(Xe,{title:"عرض التفاصيل",children:t(xe,{size:"small",onClick:fe=>{fe.stopPropagation(),Q(de)},sx:{width:28,height:28,backgroundColor:"rgba(76, 175, 80, 0.1)",color:"#e5978b","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.2)",transform:"scale(1.1)"}},children:t(Pp,{sx:{fontSize:14}})})})]}),t(f,{variant:"h6",component:"h3",sx:{fontWeight:700,lineHeight:1.3,minHeight:"2.4em",maxHeight:"2.4em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:"#333",fontSize:"1.1rem",mb:2},children:de.title}),t(f,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.5,minHeight:"3.6em",maxHeight:"3.6em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"0.85rem",mb:3,color:"#666"},children:de.summary}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"auto"},children:[s(d,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t(te,{variant:"contained",size:"small",startIcon:t(Pp,{}),onClick:fe=>{fe.stopPropagation(),Q(de)},sx:{borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,backgroundColor:"#e5978b",color:"white",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.3)","&:hover":{backgroundColor:"#388e3c",transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(76, 175, 80, 0.4)"}},children:"عرض التفاصيل"}),t(te,{variant:"outlined",size:"small",startIcon:t(vr,{}),onClick:fe=>{fe.stopPropagation(),B(de)},sx:{borderRadius:"12px",fontSize:"0.7rem",fontWeight:600,borderColor:"#1976d2",color:"#1976d2","&:hover":{borderColor:"#1565c0",backgroundColor:"rgba(25, 118, 210, 0.08)",transform:"translateY(-1px)"}},children:"تعديل"})]}),s(d,{sx:{display:"flex",gap:1.5,alignItems:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(zn,{sx:{fontSize:14,color:"#999"}}),s(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:[de.reading_time," د"]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(Ir,{sx:{fontSize:14,color:"#999"}}),t(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:de.views_count.toLocaleString()})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(ha,{sx:{fontSize:14,color:"#999"}}),t(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:de.likes_count.toLocaleString()})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t(Ls,{sx:{fontSize:14,color:"#999"}}),t(f,{variant:"caption",sx:{fontWeight:500,color:"#999",fontSize:"0.7rem"},children:de.comments_count.toLocaleString()})]})]})]})]})]})});return l?s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(Qr,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة المقالات"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"قم بإدارة مقالاتك وإنشاء محتوى جديد"})]})]}),t(Qe,{sx:{py:4},children:t(se,{container:!0,spacing:3,children:[1,2,3,4,5,6].map(de=>s(se,{item:!0,xs:12,md:6,children:[t(dt,{variant:"rectangular",height:200,sx:{borderRadius:3,mb:2}}),t(dt,{variant:"text",height:24,sx:{mb:1}}),t(dt,{variant:"text",height:20,width:"60%",sx:{mb:1}}),t(dt,{variant:"text",height:20,width:"40%"})]},de))})})]}):s(d,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[s(d,{sx:{mb:4,p:3,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",borderRadius:3,color:"white",position:"relative",overflow:"hidden"},children:[t(d,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.1)",zIndex:1}}),t(d,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",zIndex:1}}),s(d,{sx:{position:"relative",zIndex:2},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t(Qr,{sx:{fontSize:32,color:"white"}}),t(f,{variant:"h4",fontWeight:700,sx:{color:"white"},children:"إدارة المقالات"})]}),t(f,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem"},children:"قم بإدارة مقالاتك وإنشاء محتوى جديد"})]})]}),s(Qe,{sx:{py:3},children:[t(d,{sx:{position:"fixed",top:100,left:32,zIndex:1200},children:t(xe,{onClick:()=>e("/teacher/articles/create"),sx:{width:56,height:56,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)",boxShadow:"0 4px 20px rgba(14, 81, 129, 0.3)",color:"white","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)",boxShadow:"0 6px 25px rgba(14, 81, 129, 0.4)",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:t(Hr,{sx:{fontSize:28}})})}),s(d,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap",justifyContent:"center"},children:[s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Qr,{sx:{color:"#1976d2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"primary",children:j.total}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي المقالات"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(S6,{sx:{color:"#2e7d32",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"success.main",children:j.published}),t(f,{variant:"caption",color:"text.secondary",children:"منشور"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(P0,{sx:{color:"#f57c00",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"warning.main",children:j.draft}),t(f,{variant:"caption",color:"text.secondary",children:"مسودة"})]})]}),s(d,{sx:{display:"flex",alignItems:"center",gap:2,p:2,backgroundColor:"background.paper",borderRadius:2,border:"1px solid #e0e0e0",minWidth:140,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[t(Ir,{sx:{color:"#7b1fa2",fontSize:24}}),s(d,{children:[t(f,{variant:"h5",fontWeight:700,color:"secondary.main",children:j.totalViews.toLocaleString()}),t(f,{variant:"caption",color:"text.secondary",children:"إجمالي المشاهدات"})]})]})]}),s(R7,{children:[s(d,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center",mb:2},children:[t(f,{variant:"h6",sx:{fontWeight:600,mr:2,color:"primary.main"},children:"تصفية المقالات:"}),t(z7,{placeholder:"البحث في المقالات...",value:p,onChange:P,InputProps:{startAdornment:t(Pr,{position:"start",children:t(Vi,{})})},sx:{minWidth:280,flexGrow:1}}),s(d,{sx:{display:"flex",gap:1},children:[t($u,{label:"الكل",onClick:()=>I("all"),active:x==="all"}),t($u,{label:"منشور",onClick:()=>I("published"),active:x==="published"}),t($u,{label:"مسودة",onClick:()=>I("draft"),active:x==="draft"}),t($u,{label:"مؤرشف",onClick:()=>I("archived"),active:x==="archived"})]})]}),t(Pt,{sx:{my:2}}),s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s(f,{variant:"body2",color:"text.secondary",children:[C.length," مقالة ",p&&`مطابقة لـ "${p}"`]}),s(d,{sx:{display:"flex",gap:1},children:[t(Xe,{title:"عرض شبكي",children:t(xe,{onClick:()=>_("grid"),color:S==="grid"?"primary":"default",children:t(Hg,{})})}),t(Xe,{title:"عرض قائمة",children:t(xe,{onClick:()=>_("list"),color:S==="list"?"primary":"default",children:t(C6,{})})})]})]})]}),C.length>0?t(d,{children:t(tE,{children:t(se,{container:!0,spacing:3,sx:{width:"100%"},children:C.map(de=>t(se,{item:!0,xs:12,md:6,sx:{display:"flex"},children:re(de)},de.id))})})}):t(d,{sx:{textAlign:"center",py:8},children:s(St.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[s(f,{variant:"h6",color:"text.secondary",sx:{mb:2},children:["لا توجد مقالات ",p&&`مطابقة لـ "${p}"`]}),t(te,{variant:"contained",startIcon:t(Hr,{}),onClick:()=>e("/teacher/articles/create"),sx:{borderRadius:2,background:"linear-gradient(90deg, #0e5181 0%, #e5978b 100%)","&:hover":{background:"linear-gradient(90deg, #0a3d5f 0%, #d17a6e 100%)"}},children:"إنشاء مقالة جديدة"})]})})]}),s(yr,{open:R,onClose:()=>W(!1),PaperProps:{sx:{borderRadius:3,minWidth:400}},children:[t(Wr,{sx:{textAlign:"center",fontWeight:600,color:"#d32f2f",borderBottom:"1px solid #eee",pb:2},children:"⚠️ تأكيد حذف المقالة"}),s(br,{sx:{pt:3},children:[t(f,{sx:{textAlign:"center",mb:2},children:"هل أنت متأكد من حذف المقالة:"}),s(f,{sx:{fontWeight:600,textAlign:"center",color:"primary.main",mb:2,p:2,backgroundColor:"rgba(25, 118, 210, 0.08)",borderRadius:2},children:['"',k==null?void 0:k.title,'"']}),t(f,{sx:{textAlign:"center",color:"error.main",fontSize:"0.9rem",fontWeight:500},children:"⚠️ هذا الإجراء لا يمكن التراجع عنه!"})]}),s($r,{sx:{p:3,pt:1},children:[t(te,{onClick:()=>W(!1),variant:"outlined",sx:{borderRadius:2},children:"إلغاء"}),t(te,{onClick:M,color:"error",variant:"contained",sx:{borderRadius:2,px:3,fontWeight:600},children:"حذف المقالة"})]})]})]})},$s=oe(Je)(({theme:e})=>({marginBottom:e.spacing(3),border:`1px solid ${he(e.palette.divider,.1)}`,borderRadius:e.spacing(2),transition:"all 0.3s ease-in-out","&:hover":{borderColor:e.palette.primary.main,boxShadow:e.shadows[4]}})),T7=oe(d)(({theme:e,hasImage:n})=>({border:`2px dashed ${n?e.palette.primary.main:e.palette.grey[300]}`,borderRadius:e.spacing(2),padding:e.spacing(4),textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:n?he(e.palette.primary.main,.05):e.palette.grey[50],"&:hover":{borderColor:e.palette.primary.main,backgroundColor:he(e.palette.primary.main,.1)}})),M7=()=>{const e=Vt(),n=nt(),[a,l]=w.useState(!1),[u,p]=w.useState(!1),[h,x]=w.useState({}),[m,y]=w.useState({title:"",slug:"",content:"",summary:"",tags:[],status:"draft",featured:!1,allow_comments:!0,meta_description:"",meta_keywords:"",image:null,imagePreview:null}),[v,S]=w.useState(""),_=U=>{const{name:A,value:V,type:Y,checked:P}=U.target;if(y(I=>ae(q({},I),{[A]:Y==="checkbox"?P:V})),h[A]&&x(I=>ae(q({},I),{[A]:""})),A==="title"){const I=z(V);y(B=>ae(q({},B),{slug:I}))}},k=U=>{const A=U.target.files[0];if(A){if(A.size>5*1024*1024){x(Y=>ae(q({},Y),{image:"حجم الصورة يجب أن يكون أقل من 5 ميجابايت"}));return}const V=new FileReader;V.onload=Y=>{y(P=>ae(q({},P),{image:A,imagePreview:Y.target.result}))},V.readAsDataURL(A),h.image&&x(Y=>ae(q({},Y),{image:""}))}},E=()=>{y(U=>ae(q({},U),{image:null,imagePreview:null}))},R=()=>{v.trim()&&!m.tags.includes(v.trim())&&(y(U=>ae(q({},U),{tags:[...U.tags,v.trim()]})),S(""))},W=U=>{y(A=>ae(q({},A),{tags:A.tags.filter(V=>V!==U)}))},T=U=>{U.key==="Enter"&&(U.preventDefault(),R())},z=U=>U.toLowerCase().replace(/[^\u0600-\u06FF\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"),N=()=>{const U={};return m.title.trim()||(U.title="العنوان مطلوب"),m.content.trim()||(U.content="المحتوى مطلوب"),m.summary.trim()||(U.summary="الملخص مطلوب"),m.summary.length>200&&(U.summary="الملخص يجب أن يكون أقل من 200 حرف"),x(U),Object.keys(U).length===0},G=(U,A="draft")=>$(null,null,function*(){var V;if(U.preventDefault(),!!N()){p(!0);try{const Y=ae(q({},m),{status:A,content:m.content||"",summary:m.summary||"",meta_description:m.meta_description||"",meta_keywords:m.meta_keywords||"",featured:m.featured||!1,allow_comments:m.allow_comments!==!1,tags:m.tags||[]});delete Y.imagePreview,console.log("Sending article data:",Y);const P=yield Mr.createArticle(Y);console.log("Article created successfully:",P),n("/teacher/articles")}catch(Y){if(console.error("Error saving article:",Y),(V=Y.response)!=null&&V.data){const P=Y.response.data,I={};Object.keys(P).forEach(B=>{Array.isArray(P[B])?I[B]=P[B][0]:I[B]=P[B]}),x(I)}else x(P=>ae(q({},P),{general:"حدث خطأ أثناء حفظ المقالة. يرجى المحاولة مرة أخرى."}))}finally{p(!1)}}}),J=U=>{G(U,"draft")},H=U=>{G(U,"published")};return a?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:t(Ke,{})}):s(d,{sx:{p:3},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[s(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main,display:"flex",alignItems:"center"},children:[t(Qr,{sx:{mr:1}}),"إنشاء مقالة جديدة"]}),t(te,{variant:"outlined",startIcon:t(Gt,{}),onClick:()=>n("/teacher/articles"),sx:{borderRadius:2},children:"العودة للمقالات"})]}),t("form",{onSubmit:G,children:s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,lg:8,children:s(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t($s,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[t(Qr,{sx:{mr:1,color:"primary.main"}}),"المعلومات الأساسية"]}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"عنوان المقالة",name:"title",value:m.title,onChange:_,error:!!h.title,helperText:h.title,sx:{mb:2}})}),t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"رابط المقالة (Slug)",name:"slug",value:m.slug,onChange:_,error:!!h.slug,helperText:h.slug||"سيتم إنشاؤه تلقائياً من العنوان"})}),t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"ملخص المقالة",name:"summary",value:m.summary,onChange:_,multiline:!0,rows:3,error:!!h.summary,helperText:h.summary||`${m.summary.length}/200`,inputProps:{maxLength:200}})})]})]})}),t($s,{children:s(st,{sx:{p:3},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"محتوى المقالة"}),t(_e,{fullWidth:!0,label:"محتوى المقالة",name:"content",value:m.content,onChange:_,multiline:!0,rows:12,error:!!h.content,helperText:h.content,sx:{"& .MuiOutlinedInput-root":{fontFamily:"inherit"}}})]})}),t($s,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[t(B0,{sx:{mr:1,color:"primary.main"}}),"الوسوم"]}),t(d,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:m.tags.map(U=>t(Ce,{label:U,onDelete:()=>W(U),color:"primary",variant:"outlined",sx:{fontWeight:500}},U))}),s(d,{sx:{display:"flex",gap:1},children:[t(_e,{label:"إضافة وسم جديد",value:v,onChange:U=>S(U.target.value),onKeyPress:T,sx:{flexGrow:1}}),t(te,{variant:"outlined",onClick:R,disabled:!v.trim(),sx:{borderRadius:2},children:"إضافة"})]})]})})]})}),t(se,{item:!0,xs:12,lg:4,children:s(St.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[t($s,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[t(jo,{sx:{mr:1,color:"primary.main"}}),"صورة المقالة"]}),m.imagePreview?s(d,{sx:{position:"relative",mb:2},children:[t("img",{src:m.imagePreview,alt:"Preview",style:{width:"100%",height:200,objectFit:"cover",borderRadius:e.spacing(1)}}),t(xe,{onClick:E,sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:t(sn,{})})]}):s(T7,{hasImage:!1,children:[t("input",{type:"file",accept:"image/*",onChange:k,style:{display:"none"},id:"image-upload"}),t("label",{htmlFor:"image-upload",children:s(d,{sx:{cursor:"pointer"},children:[t(jo,{sx:{fontSize:48,color:"text.secondary",mb:2}}),t(f,{variant:"body2",color:"text.secondary",children:"انقر لاختيار صورة أو اسحبها هنا"}),t(f,{variant:"caption",color:"text.secondary",children:"الحد الأقصى: 5 ميجابايت"})]})})]}),h.image&&t(Be,{severity:"error",sx:{mt:2},children:h.image})]})}),t($s,{children:s(st,{sx:{p:3},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"الإعدادات"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(At,{fullWidth:!0,children:[t(Rt,{children:"حالة المقالة"}),s(Et,{name:"status",value:m.status,onChange:_,label:"حالة المقالة",children:[t(Me,{value:"draft",children:"مسودة"}),t(Me,{value:"published",children:"منشور"})]})]}),t(kt,{control:t(Nr,{name:"featured",checked:m.featured,onChange:_,color:"primary"}),label:"مقالة مميزة"}),t(kt,{control:t(Nr,{name:"allow_comments",checked:m.allow_comments,onChange:_,color:"primary"}),label:"السماح بالتعليقات"})]})]})}),t($s,{children:s(st,{sx:{p:3},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"إعدادات SEO"}),t(_e,{fullWidth:!0,label:"Meta Description",name:"meta_description",value:m.meta_description,onChange:_,multiline:!0,rows:2,sx:{mb:2}}),t(_e,{fullWidth:!0,label:"Meta Keywords",name:"meta_keywords",value:m.meta_keywords,onChange:_,multiline:!0,rows:2})]})}),s(We,{sx:{p:3,borderRadius:2},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"الإجراءات"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t(te,{type:"submit",variant:"contained",startIcon:t(a5,{}),onClick:H,disabled:u,sx:{background:"linear-gradient(45deg, #0288d1 30%, #0e5181 90%)",borderRadius:2,py:1.5,fontWeight:600},children:u?t(Ke,{size:20,color:"inherit"}):"نشر المقالة"}),t(te,{type:"submit",variant:"outlined",startIcon:t(P0,{}),onClick:J,disabled:u,sx:{borderRadius:2,py:1.5,fontWeight:600},children:u?t(Ke,{size:20}):"حفظ كمسودة"})]})]})]})})]})}),h.general&&t(Be,{severity:"error",sx:{mt:2},children:h.general})]})},Os=oe(Je)(({theme:e})=>({marginBottom:e.spacing(3),border:`1px solid ${he(e.palette.divider,.1)}`,borderRadius:e.spacing(2),transition:"all 0.3s ease-in-out","&:hover":{borderColor:e.palette.primary.main,boxShadow:e.shadows[4]}})),D7=oe(d)(({theme:e,hasImage:n})=>({border:`2px dashed ${n?e.palette.primary.main:e.palette.grey[300]}`,borderRadius:e.spacing(2),padding:e.spacing(4),textAlign:"center",cursor:"pointer",transition:"all 0.3s ease",backgroundColor:n?he(e.palette.primary.main,.05):e.palette.grey[50],"&:hover":{borderColor:e.palette.primary.main,backgroundColor:he(e.palette.primary.main,.1)}})),I7=()=>{const e=Vt(),n=nt(),{id:a}=er(),[l,u]=w.useState(!0),[p,h]=w.useState(!1),[x,m]=w.useState({}),[y,v]=w.useState({title:"",slug:"",content:"",summary:"",tags:[],status:"draft",featured:!1,allow_comments:!0,meta_description:"",meta_keywords:"",image:null,imagePreview:null}),[S,_]=w.useState("");w.useEffect(()=>{a&&$(null,null,function*(){try{console.log("Fetching article with ID:",a);const V=yield Mr.getArticle(a);console.log("Article data received:",V);const Y={id:V.id,title:V.title||"",slug:V.slug||"",content:V.content||"",summary:V.summary||"",tags:V.tags?V.tags.map(P=>P.name||P):[],status:V.status||"draft",featured:V.featured||!1,allow_comments:V.allow_comments!==!1,meta_description:V.meta_description||"",meta_keywords:V.meta_keywords||"",image:null,imagePreview:V.image?V.image.startsWith("http")?V.image:`http://localhost:8000${V.image}`:null};v(Y),u(!1)}catch(V){console.error("Error fetching article:",V),m(Y=>ae(q({},Y),{general:"حدث خطأ أثناء تحميل المقالة. يرجى المحاولة مرة أخرى."})),u(!1)}})},[a]);const k=A=>{const{name:V,value:Y,type:P,checked:I}=A.target;if(v(B=>ae(q({},B),{[V]:P==="checkbox"?I:Y})),x[V]&&m(B=>ae(q({},B),{[V]:""})),V==="title"){const B=N(Y);v(F=>ae(q({},F),{slug:B}))}},E=A=>{const V=A.target.files[0];if(V){if(V.size>5*1024*1024){m(P=>ae(q({},P),{image:"حجم الصورة يجب أن يكون أقل من 5 ميجابايت"}));return}const Y=new FileReader;Y.onload=P=>{v(I=>ae(q({},I),{image:V,imagePreview:P.target.result}))},Y.readAsDataURL(V),x.image&&m(P=>ae(q({},P),{image:""}))}},R=()=>{v(A=>ae(q({},A),{image:null,imagePreview:null}))},W=()=>{S.trim()&&!y.tags.includes(S.trim())&&(v(A=>ae(q({},A),{tags:[...A.tags,S.trim()]})),_(""))},T=A=>{v(V=>ae(q({},V),{tags:V.tags.filter(Y=>Y!==A)}))},z=A=>{A.key==="Enter"&&(A.preventDefault(),W())},N=A=>A.toLowerCase().replace(/[^\u0600-\u06FF\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-"),G=()=>{const A={};return y.title.trim()||(A.title="العنوان مطلوب"),y.content.trim()||(A.content="المحتوى مطلوب"),y.summary.trim()||(A.summary="الملخص مطلوب"),y.summary.length>200&&(A.summary="الملخص يجب أن يكون أقل من 200 حرف"),m(A),Object.keys(A).length===0},J=(A,V="draft")=>$(null,null,function*(){var Y;if(A.preventDefault(),!!G()){h(!0);try{const P=ae(q({},y),{status:V,content:y.content||"",summary:y.summary||"",meta_description:y.meta_description||"",meta_keywords:y.meta_keywords||"",featured:y.featured||!1,allow_comments:y.allow_comments!==!1,tags:y.tags||[]});delete P.imagePreview,console.log("Sending updated article data:",P);const I=yield Mr.updateArticle(a,P);console.log("Article updated successfully:",I),n("/teacher/articles")}catch(P){if(console.error("Error updating article:",P),(Y=P.response)!=null&&Y.data){const I=P.response.data,B={};Object.keys(I).forEach(F=>{Array.isArray(I[F])?B[F]=I[F][0]:B[F]=I[F]}),m(B)}else m(I=>ae(q({},I),{general:"حدث خطأ أثناء تحديث المقالة. يرجى المحاولة مرة أخرى."}))}finally{h(!1)}}}),H=A=>{J(A,"draft")},U=A=>{J(A,"published")};return l?s(d,{sx:{p:3},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[t(dt,{variant:"text",width:300,height:40}),t(dt,{variant:"rectangular",width:150,height:40})]}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,lg:8,children:[1,2,3].map(A=>t(dt,{variant:"rectangular",height:200,sx:{mb:2,borderRadius:2}},A))}),t(se,{item:!0,xs:12,lg:4,children:[1,2,3].map(A=>t(dt,{variant:"rectangular",height:150,sx:{mb:2,borderRadius:2}},A))})]})]}):s(d,{sx:{p:3},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[s(f,{variant:"h4",component:"h1",sx:{fontWeight:700,color:e.palette.primary.main,display:"flex",alignItems:"center"},children:[t(Qr,{sx:{mr:1}}),"تعديل المقالة"]}),t(te,{variant:"outlined",startIcon:t(Gt,{}),onClick:()=>n("/teacher/articles"),sx:{borderRadius:2},children:"العودة للمقالات"})]}),t("form",{onSubmit:J,children:s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,lg:8,children:s(St.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[t(Os,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[t(Qr,{sx:{mr:1,color:"primary.main"}}),"المعلومات الأساسية"]}),s(se,{container:!0,spacing:3,children:[t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"عنوان المقالة",name:"title",value:y.title,onChange:k,error:!!x.title,helperText:x.title,sx:{mb:2}})}),t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"رابط المقالة (Slug)",name:"slug",value:y.slug,onChange:k,error:!!x.slug,helperText:x.slug||"سيتم إنشاؤه تلقائياً من العنوان"})}),t(se,{item:!0,xs:12,children:t(_e,{fullWidth:!0,label:"ملخص المقالة",name:"summary",value:y.summary,onChange:k,multiline:!0,rows:3,error:!!x.summary,helperText:x.summary||`${y.summary.length}/200`,inputProps:{maxLength:200}})})]})]})}),t(Os,{children:s(st,{sx:{p:3},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"محتوى المقالة"}),t(_e,{fullWidth:!0,label:"محتوى المقالة",name:"content",value:y.content,onChange:k,multiline:!0,rows:12,error:!!x.content,helperText:x.content,sx:{"& .MuiOutlinedInput-root":{fontFamily:"inherit"}}})]})}),t(Os,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[t(B0,{sx:{mr:1,color:"primary.main"}}),"الوسوم"]}),t(d,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:y.tags.map(A=>t(Ce,{label:A,onDelete:()=>T(A),color:"primary",variant:"outlined",sx:{fontWeight:500}},A))}),s(d,{sx:{display:"flex",gap:1},children:[t(_e,{label:"إضافة وسم جديد",value:S,onChange:A=>_(A.target.value),onKeyPress:z,sx:{flexGrow:1}}),t(te,{variant:"outlined",onClick:W,disabled:!S.trim(),sx:{borderRadius:2},children:"إضافة"})]})]})})]})}),t(se,{item:!0,xs:12,lg:4,children:s(St.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[t(Os,{children:s(st,{sx:{p:3},children:[s(f,{variant:"h6",sx:{mb:3,fontWeight:600,display:"flex",alignItems:"center"},children:[t(jo,{sx:{mr:1,color:"primary.main"}}),"صورة المقالة"]}),y.imagePreview?s(d,{sx:{position:"relative",mb:2},children:[t("img",{src:y.imagePreview||"https://via.placeholder.com/400x250/4A6CF7/ffffff?text=No+Image",alt:"Preview",style:{width:"100%",height:200,objectFit:"cover",borderRadius:e.spacing(1)},onError:A=>{A.target.src="https://via.placeholder.com/400x250/4A6CF7/ffffff?text=Image+Error"}}),t(xe,{onClick:R,sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.7)"}},children:t(sn,{})})]}):s(D7,{hasImage:!1,children:[t("input",{type:"file",accept:"image/*",onChange:E,style:{display:"none"},id:"image-upload"}),t("label",{htmlFor:"image-upload",children:s(d,{sx:{cursor:"pointer"},children:[t(jo,{sx:{fontSize:48,color:"text.secondary",mb:2}}),t(f,{variant:"body2",color:"text.secondary",children:"انقر لاختيار صورة أو اسحبها هنا"}),t(f,{variant:"caption",color:"text.secondary",children:"الحد الأقصى: 5 ميجابايت"})]})})]}),x.image&&t(Be,{severity:"error",sx:{mt:2},children:x.image})]})}),t(Os,{children:s(st,{sx:{p:3},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"الإعدادات"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s(At,{fullWidth:!0,children:[t(Rt,{children:"حالة المقالة"}),s(Et,{name:"status",value:y.status,onChange:k,label:"حالة المقالة",children:[t(Me,{value:"draft",children:"مسودة"}),t(Me,{value:"published",children:"منشور"})]})]}),t(kt,{control:t(Nr,{name:"featured",checked:y.featured,onChange:k,color:"primary"}),label:"مقالة مميزة"}),t(kt,{control:t(Nr,{name:"allow_comments",checked:y.allow_comments,onChange:k,color:"primary"}),label:"السماح بالتعليقات"})]})]})}),t(Os,{children:s(st,{sx:{p:3},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"إعدادات SEO"}),t(_e,{fullWidth:!0,label:"Meta Description",name:"meta_description",value:y.meta_description,onChange:k,multiline:!0,rows:2,sx:{mb:2}}),t(_e,{fullWidth:!0,label:"Meta Keywords",name:"meta_keywords",value:y.meta_keywords,onChange:k,multiline:!0,rows:2})]})}),s(We,{sx:{p:3,borderRadius:2},children:[t(f,{variant:"h6",sx:{mb:3,fontWeight:600},children:"الإجراءات"}),s(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t(te,{type:"submit",variant:"contained",startIcon:t(a5,{}),onClick:U,disabled:p,sx:{background:"linear-gradient(45deg, #0288d1 30%, #0e5181 90%)",borderRadius:2,py:1.5,fontWeight:600},children:p?t(Ke,{size:20,color:"inherit"}):"نشر المقالة"}),t(te,{type:"submit",variant:"outlined",startIcon:t(P0,{}),onClick:H,disabled:p,sx:{borderRadius:2,py:1.5,fontWeight:600},children:p?t(Ke,{size:20}):"حفظ كمسودة"})]})]})]})})]})}),x.general&&t(Be,{severity:"error",sx:{mt:2},children:x.general})]})},mw=oe(Je)(({theme:e})=>({borderRadius:e.shape.borderRadius*2,boxShadow:`0 8px 32px ${he(e.palette.common.black,.1)}`,border:`1px solid ${he(e.palette.primary.main,.1)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:`0 12px 40px ${he(e.palette.common.black,.15)}`}})),W7=oe(te)(({theme:e})=>({width:"100%",padding:e.spacing(2,4),fontSize:"1.1rem",fontWeight:700,borderRadius:e.shape.borderRadius*3,textTransform:"none",background:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.primary.dark} 100%)`,boxShadow:`0 8px 24px ${he(e.palette.primary.main,.3)}`,"&:hover":{transform:"translateY(-2px)",boxShadow:`0 12px 32px ${he(e.palette.primary.main,.4)}`}})),$7=()=>{const e=nt(),{isAuthenticated:n,loading:a}=Ka(),[l,u]=w.useState([]),[p,h]=w.useState(!0),[x,m]=w.useState(!1);w.useEffect(()=>{if(!a){if(!n){e("/login",{state:{from:"/cart"}});return}y()}},[n,a,e]);const y=()=>$(null,null,function*(){try{h(!0);const k=yield Ro.getCart();u(k.items||[])}catch(k){console.error("Error loading cart:",k)}finally{h(!1)}}),v=k=>$(null,null,function*(){try{yield Ro.removeFromCart(k),u(E=>E.filter(R=>R.id!==k))}catch(E){console.error("Error removing from cart:",E),alert("حدث خطأ أثناء إزالة الدورة من السلة")}}),S=()=>l.reduce((k,E)=>{const R=E.course.discount_price||E.course.price;return k+parseFloat(R)},0),_=()=>$(null,null,function*(){if(!n){e("/login",{state:{from:"/cart"}});return}if(l.length===0){alert("السلة فارغة. يرجى إضافة دورة إلى السلة أولاً.");return}try{m(!0);const{url:k}=yield N5.createMoyasarPayment();window.location.href=k}catch(k){console.error("Payment error:",k),alert("حدث خطأ أثناء بدء عملية الدفع")}finally{m(!1)}});return a||p?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:t(Ke,{size:60})}):s(d,{sx:{bgcolor:"background.default",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[t(Rn,{}),s(Qe,{maxWidth:"lg",sx:{py:4,flex:1},children:[s(d,{sx:{mb:4,display:"flex",alignItems:"center",gap:2},children:[t(xe,{onClick:()=>e(-1),sx:{color:"primary.main"},children:t(Gt,{})}),s(f,{variant:"h4",component:"h1",fontWeight:700,sx:{display:"flex",alignItems:"center",gap:1},children:[t(Do,{color:"primary"}),"سلة التسوق"]})]}),l.length===0?s(d,{sx:{textAlign:"center",py:8},children:[t(Do,{sx:{fontSize:80,color:"text.secondary",mb:2}}),t(f,{variant:"h5",gutterBottom:!0,children:"السلة فارغة"}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"لم تقم بإضافة أي دورات إلى السلة بعد"}),t(te,{variant:"contained",size:"large",onClick:()=>e("/courses"),sx:{borderRadius:3,px:4,py:1.5},children:"تصفح الدورات"})]}):s(se,{container:!0,spacing:4,children:[t(se,{xs:12,lg:8,children:t(mw,{children:s(st,{children:[s(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[t(Do,{color:"primary"}),"الدورات المضافة (",l.length,")"]}),l.map(k=>s(d,{sx:{display:"flex",alignItems:"center",p:2,mb:2,border:"1px solid",borderColor:"divider",borderRadius:2},children:[t(_t,{src:k.course.image,alt:k.course.title,sx:{width:80,height:80,mr:2}}),s(d,{sx:{flex:1,mr:2},children:[t(f,{variant:"h6",fontWeight:600,gutterBottom:!0,children:k.course.title}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:1},children:k.course.instructor}),s(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[t(Ce,{label:k.course.level,size:"small",color:"primary",variant:"outlined"}),t(f,{variant:"body2",color:"text.secondary",children:k.course.duration})]})]}),s(d,{sx:{textAlign:"left",mr:2},children:[s(f,{variant:"h6",color:"primary",fontWeight:700,children:[parseFloat(k.course.discount_price||k.course.price).toFixed(2)," ر.س"]}),k.course.discount_price&&s(f,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:[parseFloat(k.course.price).toFixed(2)," ر.س"]})]}),t(xe,{color:"error",onClick:()=>v(k.id),sx:{ml:1},children:t(sn,{})})]},k.course.id))]})})}),t(se,{xs:12,lg:4,children:t(mw,{children:s(st,{children:[s(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[t(qg,{color:"primary"}),"ملخص الطلب"]}),s(d,{sx:{mb:3},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t(f,{variant:"body1",children:"عدد الدورات:"}),t(f,{variant:"body1",fontWeight:600,children:l.length})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t(f,{variant:"body1",children:"المجموع الفرعي:"}),s(f,{variant:"body1",fontWeight:600,children:[S().toFixed(2)," ر.س"]})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[t(f,{variant:"body1",children:"الضريبة (15%):"}),s(f,{variant:"body1",fontWeight:600,children:[(S()*.15).toFixed(2)," ر.س"]})]}),t(Pt,{sx:{my:2}}),s(d,{sx:{display:"flex",justifyContent:"space-between"},children:[t(f,{variant:"h6",fontWeight:700,children:"المجموع الكلي:"}),s(f,{variant:"h6",color:"primary",fontWeight:700,children:[(S()*1.15).toFixed(2)," ر.س"]})]})]}),t(W7,{variant:"contained",onClick:_,startIcon:x?t(Ke,{size:20,color:"inherit"}):t(qu,{}),disabled:l.length===0||x,children:x?"جاري التوجيه...":"إتمام الشراء"}),t(te,{variant:"outlined",fullWidth:!0,sx:{mt:2,borderRadius:3,py:1.5},onClick:()=>e("/courses"),children:"إضافة المزيد من الدورات"})]})})})]})]}),t(En,{})]})},xw=oe(Je)(({theme:e})=>({borderRadius:e.shape.borderRadius*3,background:`linear-gradient(135deg, ${he(e.palette.background.paper,.9)} 0%, ${he(e.palette.background.default,.9)} 100%)`,backdropFilter:"blur(10px)",border:`1px solid ${he("#1976d2",.1)}`,boxShadow:`0 8px 32px ${he(e.palette.common.black,.08)}`,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-8px)",boxShadow:`0 20px 60px ${he(e.palette.common.black,.12)}`}})),O7=oe(te)(({theme:e})=>({width:"100%",padding:e.spacing(2.5,4),fontSize:"1.2rem",fontWeight:700,borderRadius:e.shape.borderRadius*4,textTransform:"none",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",boxShadow:`0 8px 32px ${he("#1976d2",.3)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:`linear-gradient(90deg, transparent, ${he(e.palette.common.white,.2)}, transparent)`,transition:"left 0.5s"},"&:hover":{transform:"translateY(-3px)",boxShadow:`0 16px 48px ${he("#1976d2",.4)}`,"&::before":{left:"100%"}}})),L7=oe(We)(({theme:e})=>({padding:e.spacing(3),borderRadius:e.shape.borderRadius*2,background:`linear-gradient(135deg, ${he("#42a5f5",.05)} 0%, ${he("#1976d2",.02)} 100%)`,border:`1px solid ${he("#1976d2",.1)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #f50057)"}})),bw=oe(d)(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1),padding:e.spacing(1,2),borderRadius:e.shape.borderRadius*2,background:he("#2e7d32",.1),border:`1px solid ${he("#2e7d32",.2)}`,color:"#2e7d32",fontSize:"0.875rem",fontWeight:500})),B7=()=>{const{courseId:e}=er(),n=nt(),{isAuthenticated:a,loading:l}=Ka(),[u,p]=w.useState(null),[h,x]=w.useState(!0),[m,y]=w.useState(!1);w.useEffect(()=>{if(!l){if(!a){n("/login",{state:{from:`/payment/${e}`}});return}v()}},[e,a,l,n]);const v=()=>$(null,null,function*(){try{x(!0);const k=yield tn.getCourseById(e);p(k)}catch(k){console.error("Error loading course:",k),alert("حدث خطأ أثناء تحميل بيانات الدورة")}finally{x(!1)}}),S=()=>$(null,null,function*(){var k,E;if(!a){n("/login",{state:{from:`/payment/${e}`}});return}try{y(!0);const{url:R}=yield N5.createCoursePayment(e);window.location.href=R}catch(R){console.error("Payment error:",R),(E=(k=R.response)==null?void 0:k.data)!=null&&E.detail?alert(R.response.data.detail):alert("حدث خطأ أثناء بدء عملية الدفع")}finally{y(!1)}}),_=()=>{if(!u)return 0;const k=u.discount_price||u.price,E=parseFloat(k),R=E*.15;return E+R};return l||h?t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:t(Ke,{size:60})}):a?u?s(d,{sx:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[t(Rn,{}),s(Qe,{maxWidth:"lg",sx:{py:6,flex:1},children:[s(d,{sx:{mb:6,display:"flex",alignItems:"center",gap:2},children:[t(xe,{onClick:()=>n(-1),sx:{color:"#1976d2",background:he("#fff",.8),backdropFilter:"blur(10px)","&:hover":{background:he("#fff",.9),transform:"scale(1.1)"}},children:t(Gt,{})}),s(f,{variant:"h3",component:"h1",fontWeight:800,sx:{display:"flex",alignItems:"center",gap:2,background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:[t(qu,{sx:{fontSize:40}}),"إتمام الشراء"]})]}),s(se,{container:!0,spacing:4,children:[t(se,{xs:12,lg:8,children:t(xw,{children:s(st,{children:[s(f,{variant:"h5",gutterBottom:!0,sx:{mb:4,display:"flex",alignItems:"center",gap:2,fontWeight:700,color:"#1976d2"},children:[t(qg,{sx:{fontSize:28}}),"معلومات الدورة"]}),t(L7,{elevation:0,children:s(d,{sx:{display:"flex",alignItems:"flex-start",gap:3},children:[t(_t,{src:u.image,alt:u.title,sx:{width:120,height:120,border:"4px solid",borderColor:"#1976d2",boxShadow:"0 8px 32px rgba(0,0,0,0.1)"}}),s(d,{sx:{flex:1},children:[t(f,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{mb:2},children:u.title}),t(f,{variant:"body1",color:"text.secondary",sx:{mb:2,fontSize:"1.1rem"},children:u.instructor}),s(d,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:3},children:[t(Ce,{label:u.level,color:"primary",variant:"filled",sx:{fontWeight:600}}),s(bw,{children:[t(on,{fontSize:"small"}),u.duration]}),s(bw,{children:[t(Po,{fontSize:"small"}),u.total_enrollments||0," مشترك"]})]})]}),s(d,{sx:{textAlign:"center",minWidth:120},children:[t(f,{variant:"h4",color:"primary",fontWeight:800,sx:{mb:1},children:parseFloat(u.discount_price||u.price).toFixed(2)}),t(f,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"ريال سعودي"}),u.discount_price&&s(f,{variant:"body2",color:"error.main",sx:{textDecoration:"line-through",fontWeight:600},children:[parseFloat(u.price).toFixed(2)," ر.س"]})]})]})}),s(Be,{severity:"info",sx:{mt:4,borderRadius:3,background:he("#e3f2fd",.8),border:"1px solid",borderColor:"#42a5f5"},children:[t(k6,{sx:{mr:1,color:"#1976d2"}}),t(f,{variant:"body1",fontWeight:600,children:"جميع المدفوعات آمنة ومشفرة عبر بوابة Moyasar"})]})]})})}),t(se,{xs:12,lg:4,children:t(d,{sx:{position:"sticky",top:24},children:t(xw,{children:s(st,{children:[s(f,{variant:"h5",gutterBottom:!0,sx:{mb:4,display:"flex",alignItems:"center",gap:2,fontWeight:700,color:"#1976d2"},children:[t(qg,{sx:{fontSize:28}}),"ملخص الطلب"]}),s(d,{sx:{mb:4},children:[s(d,{sx:{display:"flex",justifyContent:"space-between",mb:2,p:2,borderRadius:2,background:he("#1976d2",.05)},children:[t(f,{variant:"body1",fontWeight:600,children:"سعر الدورة:"}),s(f,{variant:"body1",fontWeight:700,color:"primary",children:[parseFloat(u.discount_price||u.price).toFixed(2)," ر.س"]})]}),u.discount_price&&s(d,{sx:{display:"flex",justifyContent:"space-between",mb:2,p:1.5,borderRadius:2,background:he("#2e7d32",.1)},children:[t(f,{variant:"body2",color:"success.main",fontWeight:600,children:"التوفير:"}),s(f,{variant:"body2",color:"success.main",fontWeight:700,children:[(parseFloat(u.price)-parseFloat(u.discount_price)).toFixed(2)," ر.س"]})]}),s(d,{sx:{display:"flex",justifyContent:"space-between",mb:2,p:2,borderRadius:2,background:he("#ed6c02",.05)},children:[t(f,{variant:"body1",fontWeight:600,children:"الضريبة (15%):"}),s(f,{variant:"body1",fontWeight:700,color:"warning.main",children:[(parseFloat(u.discount_price||u.price)*.15).toFixed(2)," ر.س"]})]}),t(Pt,{sx:{my:3,borderWidth:2}}),s(d,{sx:{display:"flex",justifyContent:"space-between",p:3,borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #0e5181 100%)",color:"white"},children:[t(f,{variant:"h6",fontWeight:700,children:"المجموع الكلي:"}),s(f,{variant:"h5",fontWeight:800,children:[_().toFixed(2)," ر.س"]})]})]}),t(O7,{variant:"contained",onClick:S,disabled:m,startIcon:m?t(Ke,{size:20,color:"inherit"}):t(qu,{}),children:m?"جاري التوجيه...":"إتمام الدفع الآمن"}),t(te,{variant:"outlined",fullWidth:!0,sx:{mt:3,borderRadius:3,py:1.5,borderWidth:2,fontWeight:600,"&:hover":{borderWidth:2,transform:"translateY(-2px)"}},onClick:()=>n("/courses"),children:"العودة للدورات"}),s(d,{sx:{mt:4,p:3,borderRadius:3,background:"linear-gradient(135deg, #e5978b 0%, #45a049 100%)",color:"white",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="20" height="20" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%23ffffff" fill-opacity="0.1"%3E%3Ccircle cx="10" cy="10" r="1"/%3E%3C/g%3E%3C/svg%3E")',opacity:.3}},children:[s(f,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1,mb:2,fontWeight:700},children:[t(xr,{}),"المميزات المضمنة"]}),s(d,{sx:{position:"relative",zIndex:1},children:[s(f,{variant:"body2",sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:[t(si,{fontSize:"small"}),"وصول مدى الحياة للدورة"]}),s(f,{variant:"body2",sx:{mb:1,display:"flex",alignItems:"center",gap:1},children:[t(si,{fontSize:"small"}),"شهادة إتمام معتمدة"]}),s(f,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1},children:[t(si,{fontSize:"small"}),"ضمان استرداد الأموال خلال 30 يوم"]})]})]})]})})})})]})]}),t(En,{})]}):s(Qe,{maxWidth:"lg",sx:{py:8,textAlign:"center"},children:[t(Be,{severity:"error",sx:{mb:4},children:t(f,{variant:"h6",gutterBottom:!0,children:"الدورة غير موجودة"})}),t(te,{variant:"contained",onClick:()=>n("/courses"),startIcon:t(Gt,{}),sx:{borderRadius:3,px:4,py:1.5},children:"العودة للدورات"})]}):t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:t(Ke,{size:60})})},yw=_6({key:"muirtl",stylisPlugins:[U6,x5],prepend:!0});console.log("App component is being loaded...");const gc=({children:e,allowedRoles:n=[]})=>{const{isAuthenticated:a,user:l,loading:u,getUserRole:p}=Ka(),h=yh();if(console.log("ProtectedRoute - isAuthenticated:",a),console.log("ProtectedRoute - user:",l),console.log("ProtectedRoute - allowedRoles:",n),console.log("ProtectedRoute - current path:",h.pathname),u)return console.log("ProtectedRoute - Loading auth state..."),t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:t(Ke,{})});if(!a)return console.log("ProtectedRoute - Not authenticated, redirecting to login"),t(Zs,{to:"/login",state:{from:h},replace:!0});if(n.length>0){const x=p();if(console.log("ProtectedRoute - User role:",x),!n.some(y=>y==="teacher"&&x==="instructor"||y==="instructor"&&x==="teacher"?!0:y===x))return console.log(`ProtectedRoute - User role ${x} not in allowed roles:`,n),t(Zs,{to:"/unauthorized",replace:!0})}return console.log("ProtectedRoute - Access granted"),e},vw=({children:e})=>{const{isAuthenticated:n,loading:a,getUserRole:l}=Ka();if(a)return t(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:t(Ke,{})});if(n){const u=l();let p="/student/dashboard";return(u==="instructor"||u==="teacher")&&(p="/teacher/dashboard"),t(Zs,{to:p,replace:!0})}return e},P7=()=>{const[e,n]=w.useState(!1),[a,l]=w.useState(!1),u=()=>{l(!a),localStorage.setItem("darkMode",!a)};w.useEffect(()=>{const h=localStorage.getItem("darkMode")==="true";l(h)},[]);const p=w.useMemo(()=>R0(ae(q({},pg),{palette:ae(q({},pg.palette),{mode:a?"dark":"light",background:ae(q({},pg.palette.background),{default:a?"#121212":"#F8FAFF",paper:a?"#1E1E1E":"#FFFFFF"})})})),[a]);return w.useEffect(()=>(console.log("App component mounted"),n(!0),()=>{console.log("App component unmounting")}),[]),console.log("App component rendering..."),e?t(H0,{children:t(Ey,{value:yw,children:t(A6,{injectFirst:!0,children:s(Yg,{theme:p,children:[t(o5,{}),t(z6,{styles:S_}),t(A4,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"left"},autoHideDuration:4e3,style:{direction:"rtl"},classes:{containerRoot:"snackbar-container"},dense:!0,children:t("div",{className:"App",dir:"rtl",style:{fontFamily:"Tajawal, sans-serif"},children:s(jp,{children:[t(He,{path:"/login",element:t(vw,{children:t(YA,{})})}),t(He,{path:"/register",element:t(vw,{children:t(ez,{})})}),t(He,{path:"/",element:t(PA,{})}),t(He,{path:"/unauthorized",element:t(H9,{})}),t(He,{path:"/courses",element:t(GM,{})}),t(He,{path:"/courses/:id",element:t(d9,{})}),t(He,{path:"/articles",element:t(v7,{})}),t(He,{path:"/articles/:slug",element:t(k7,{})}),t(He,{path:"/cart",element:t($7,{})}),t(He,{path:"/payment/:courseId",element:t(B7,{})}),t(He,{path:"/student/*",element:t(gc,{allowedRoles:["student"],children:t(mg,{toggleDarkMode:u,isDarkMode:a,children:s(jp,{children:[t(He,{index:!0,element:t(rw,{})}),t(He,{path:"dashboard",element:t(rw,{})}),t(He,{path:"courses",element:t(Jv,{})}),t(He,{path:"my-courses",element:t(Jv,{})}),t(He,{path:"my-courses/:courseId/exam",element:t(rD,{})}),t(He,{path:"my-courses/:courseId/exam/taking",element:t(nD,{})}),t(He,{path:"my-courses/:courseId/exam/result",element:t(CC,{})}),t(He,{path:"assignments",element:t(qD,{})}),t(He,{path:"assignments/:assignmentId/submit",element:t(KD,{})}),t(He,{path:"certificates",element:t(UD,{})}),t(He,{path:"meetings",element:t(o7,{})}),t(He,{path:"meetings/live/:meetingId",element:t(h7,{})}),t(He,{path:"settings",element:t(Bg,{})})]})})})}),t(He,{path:"/student/courses/:id",element:t(gc,{allowedRoles:["student"],children:t(pD,{})})}),t(He,{path:"/teacher/*",element:t(gc,{allowedRoles:["teacher","instructor"],children:t(mg,{toggleDarkMode:u,isDarkMode:a,children:s(jp,{children:[t(He,{index:!0,element:t(nw,{})}),t(He,{path:"dashboard",element:t(nw,{})}),t(He,{path:"courses",element:t("div",{children:"إدارة الدورات"})}),t(He,{path:"my-courses",element:t(B9,{})}),t(He,{path:"courses/new",element:t(m9,{})}),t(He,{path:"courses/:id/edit",element:t(v9,{})}),t(He,{path:"courses/:courseId/units",element:t(_9,{})}),t(He,{path:"courses/:courseId/units/new",element:t(C9,{})}),t(He,{path:"courses/:courseId/units/:unitId",element:t(M9,{})}),t(He,{path:"courses/:courseId/units/:unitId/edit",element:t(R9,{})}),t(He,{path:"courses/:courseId/units/:unitId/lessons",element:t($9,{})}),t(He,{path:"courses/:courseId/units/:unitId/lessons/create",element:t(Kv,{})}),t(He,{path:"courses/:courseId/units/:unitId/lessons/:lessonId/edit",element:t(Kv,{isEdit:!0})}),t(He,{path:"courses/:courseId/units/:unitId/lessons/:lessonId",element:t(Dm,{})}),t(He,{path:"assignments",element:t(YD,{})}),t(He,{path:"assignments/new",element:t(ZD,{})}),t(He,{path:"assignments/:assignmentId/edit",element:t(JD,{})}),t(He,{path:"assignments/:assignmentId/questions",element:t(e7,{})}),t(He,{path:"assignments/:assignmentId/submissions",element:t(QD,{})}),t(He,{path:"assignments/:assignmentId/submissions/:submissionId",element:t(GD,{})}),t(He,{path:"students",element:t("div",{children:"الطلاب"})}),t(He,{path:"reports",element:t("div",{children:"التقارير"})}),t(He,{path:"settings",element:t(Bg,{})}),t(He,{path:"quizzes",element:t(U9,{})}),t(He,{path:"quizzes/create",element:t(ew,{})}),t(He,{path:"quizzes/:quizId/edit",element:t(ew,{})}),t(He,{path:"quizzes/:quizId",element:t(Q9,{})}),t(He,{path:"exams",element:t(G9,{})}),t(He,{path:"exams/create",element:t(tw,{})}),t(He,{path:"exams/:examId",element:t(X9,{})}),t(He,{path:"exams/:examId/edit",element:t(tw,{isEdit:!0})}),t(He,{path:"meetings",element:t(n7,{})}),t(He,{path:"meetings/live/:meetingId",element:t(c7,{})}),t(He,{path:"articles",element:t(E7,{})}),t(He,{path:"articles/create",element:t(M7,{})}),t(He,{path:"articles/:id/edit",element:t(I7,{})})]})})})}),t(He,{path:"/profile",element:t(gc,{children:t(mg,{children:t(Bg,{})})})}),t(He,{path:"/dashboard",element:t(gc,{children:t(V9,{})})}),t(He,{path:"/dashboard/student",element:t(Zs,{to:"/student/dashboard",replace:!0})}),t(He,{path:"/dashboard/teacher",element:t(Zs,{to:"/teacher/dashboard",replace:!0})}),t(He,{path:"*",element:t(F9,{})})]})})})]})})})}):(console.log("App not yet initialized, showing loading state"),t(Ey,{value:yw,children:t(Yg,{theme:p,children:t("div",{dir:"rtl",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:p.palette.background.default,fontFamily:"Tajawal, sans-serif",direction:"rtl"},children:t("div",{children:"جاري تحميل التطبيق..."})})})}))},j7=()=>t(w_,{children:t(P7,{})});class N7 extends w.Component{constructor(a){super(a);ri(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,l){console.error("ErrorBoundary caught an error:",a,l),this.setState({error:a,errorInfo:l})}render(){return this.state.hasError?s(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,textAlign:"center",backgroundColor:"#f8f8f8"},children:[t(f,{variant:"h4",color:"error",gutterBottom:!0,children:"Something went wrong"}),t(f,{variant:"body1",paragraph:!0,children:"We're sorry for the inconvenience. An error has occurred."}),!1,t(te,{variant:"contained",color:"primary",onClick:this.handleReload,sx:{mt:3},children:"Reload Page"})]}):this.props.children}}const F7=Z4({reducer:{auth:v_,ui:lD},devTools:!1}),H7=R0({direction:"rtl",palette:{primary:{main:"#8E44AD",light:"#9B59B6",dark:"#7D3C98",contrastText:"#fff"},secondary:{main:"#2C3E50",light:"#34495E",dark:"#1F2D3D",contrastText:"#fff"},accent:{main:"#E74C3C",light:"#EC7063",dark:"#C0392B",contrastText:"#fff"},error:{main:"#E74C3C",light:"#EC7063",dark:"#C0392B"},warning:{main:"#F39C12",light:"#F4B350",dark:"#D68910"},info:{main:"#3498DB",light:"#5DADE2",dark:"#2E86C1"},success:{main:"#27AE60",light:"#58D68D",dark:"#1E8449"},background:{default:"#F8F9FA",paper:"#FFFFFF"},text:{primary:"#2C3E50",secondary:"#566573",disabled:"#95A5A6"}},typography:{fontFamily:["Tajawal","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h1:{fontSize:"2.5rem",fontWeight:500},h2:{fontSize:"2rem",fontWeight:500},h3:{fontSize:"1.75rem",fontWeight:500},h4:{fontSize:"1.5rem",fontWeight:500},h5:{fontSize:"1.25rem",fontWeight:500},h6:{fontSize:"1rem",fontWeight:500}},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500}}},MuiCard:{styleOverrides:{root:{boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.15)"}}}}}});console.log("Application is starting...");const ww=document.getElementById("root");ww?(console.log("Root element found, rendering application..."),e8.createRoot(ww).render(t(ut.StrictMode,{children:t(N7,{children:t(g8,{store:F7,children:s(Yg,{theme:H7,children:[t(o5,{}),t(M6,{children:t(H0,{children:t(j7,{})})})]})})})}))):console.error("Failed to find the root element")});export default V7();
